"use strict";(self.webpackChunkWindmill_Whitelabel_Example=self.webpackChunkWindmill_Whitelabel_Example||[]).push([[3124],{3124:(t,e,a)=>{a.r(e),a.d(e,{default:()=>h});var r=a(9379),i=a(4772);let l=(0,i.v)((t=>{let{kind:e}=t;return i._.listHubIntegrations({kind:e})}),{initial:{kind:"script",refreshCount:0},invalidateMs:6e4});console.log("listHubIntegrationsCached",l);let n=(0,i.v)((async t=>{var e;let{filter:a,kind:r,appFilter:l}=t;return(0,i.V)(i.Y)?a.length>0?await i.X.queryHubScripts({text:a,limit:40,kind:r}):null!==(e=(await i.X.getTopHubScripts({limit:40,kind:r,app:l})).asks)&&void 0!==e?e:[]:void 0}),{initial:{filter:"",kind:"script",appFilter:void 0,refreshCount:0},invalidateMs:6e4});var s=(0,i.f)('<div class="text-2xs text-red-400 ftext-2xs font-light text-center py-2 px-3 items-center">Hub not available</div>'),o=(0,i.f)('<div class="flex flex-col"><div class="text-left text-xs font-normal leading-tight py-0"> </div> <div class="text-left text-2xs font-normal"> </div></div>'),c=(t,e,a)=>e("pickScript",(0,i.g)(a)),d=(0,i.f)('<div class="w-[14px] h-[14px] text-gray-400 flex flex-row items-center justify-center"><!></div>'),v=(0,i.f)('<div class="grow truncate text-left text-2xs text-secondary font-[220]"> </div>'),p=(0,i.f)('<kbd class="!text-xs">&crarr;</kbd>'),f=(0,i.f)('<button><div><!></div> <div class="flex flex-col grow min-w-0"><div class="grow truncate text-left text-2xs text-primary font-normal leading-tight py-0.5"> </div> <!></div> <!></button>'),u=(0,i.f)('<li class="w-full"><!></li>'),x=(0,i.f)('<div class="text-2xs text-tercary font-extralight text-center py-2 px-3 items-center">There are more items than being displayed. Refine your search.</div>'),g=(0,i.f)("<ul></ul> <!>",1);function h(t,e){(0,i.p)(e,!0);let a=(0,i.A)(!1);const h=(0,i.y)();let k=(0,i.a)(e,"kind",3,"script"),m=(0,i.a)(e,"filter",11,""),y=(0,i.a)(e,"loading",15,!1),b=(0,i.a)(e,"selected",3,void 0),w=(0,i.a)(e,"appFilter",3,void 0),C=(0,i.a)(e,"items",31,(()=>(0,i.x)([]))),F=(0,i.a)(e,"displayPath",3,!1),J=(0,i.a)(e,"apps",31,(()=>(0,i.x)([]))),_=(0,i.a)(e,"refreshCount",3,0),E=(0,i.A)((0,i.x)([]));(0,i.z)((()=>{var t,e;m().length>0?J(Array.from(new Set(null!==(t=null==(e=C())?void 0:e.map((t=>t.app)))&&void 0!==t?t:[])).sort()):J((0,i.g)(E))}));let A=(0,i.r)((()=>n({appFilter:w(),filter:m(),kind:k(),refreshCount:_()})),{loadInit:!1});(0,i.z)((()=>{m(),k(),w(),_(),A.refresh()})),(0,i.z)((()=>{y("loading"===A.status),(0,i.s)(a,!!A.error);const t=A.value;(0,i.u)((()=>{if(!t)return;const e=t.map((t=>(0,r.A)((0,r.A)({},t),{},{path:"hub/".concat(t.version_id,"/").concat(t.app,"/").concat(t.summary.toLowerCase().replaceAll(/\s+/g,"_")),summary:"".concat(t.summary," (").concat(t.app,")")})));C(w()?e.filter((t=>t.app===w())):e)}))})),(0,i.z)((()=>{k(),_(),(0,i.u)((()=>{!async function(t){try{(0,i.s)(a,!1),(0,i.s)(E,(await l({kind:t,refreshCount:_()})).map((t=>t.name)),!0)}catch(e){console.error("Hub is not available"),(0,i.s)(E,[],!0),(0,i.s)(a,!0)}}(k())}))}));var H=(0,i.N)();(0,i.B)("keydown",i.$,(function(t){var e;if(null!=b()&&C()&&b()>=0&&b()<(null==(e=C())?void 0:e.length)&&"Enter"===t.key){t.preventDefault();let e=C()[b()];h("pickScript",e)}}));var z=(0,i.C)(H),I=t=>{var e=s();(0,i.k)(t,e)},N=t=>{var e=(0,i.N)(),a=(0,i.C)(e),r=t=>{var e=(0,i.N)(),a=(0,i.C)(e);(0,i.I)(a,16,(()=>Array(15).fill(0)),i.T,((t,e)=>{(0,i.U)(t,{layout:[.1,[1.5]]})})),(0,i.k)(t,e)},l=t=>{var e=(0,i.N)(),a=(0,i.C)(e),r=t=>{var e=g(),a=(0,i.C)(e);(0,i.I)(a,23,C,(t=>t.path),((t,e,a)=>{var r=u(),l=(0,i.J)(r);{const t=t=>{var a=o(),r=(0,i.J)(a),l=(0,i.J)(r),n=(0,i.E)(r,2),s=(0,i.J)(n);(0,i.e)((()=>{var t,a;(0,i.R)(l,null!==(t=(0,i.g)(e).summary)&&void 0!==t?t:""),(0,i.R)(s,null!==(a=(0,i.g)(e).path)&&void 0!==a?a:"")})),(0,i.k)(t,a)};let r=(0,i.K)((()=>(0,i.g)(a)===b()));(0,i.P)(l,{class:"w-full",placement:"right",get forceOpen(){return(0,i.g)(r)},text:t,children:(t,r)=>{var l=f();l.__click=[c,h,e];var n=(0,i.J)(l),s=(0,i.J)(n),o=t=>{const a=(0,i.K)((()=>i.a0[(0,i.g)(e).app]));var r=(0,i.N)(),l=(0,i.C)(r);(0,i.a3)(l,(()=>(0,i.g)(a)),((t,e)=>{e(t,{height:14,width:14})})),(0,i.k)(t,r)},u=t=>{var e=d(),a=(0,i.J)(e);(0,i.a4)(a,{size:"12"}),(0,i.k)(t,e)};(0,i.F)(s,(t=>{(0,i.g)(e).app in i.a0?t(o):t(u,!1)}));var x=(0,i.E)(n,2),g=(0,i.J)(x),k=(0,i.J)(g),m=(0,i.E)(g,2),y=t=>{var a=v(),r=(0,i.J)(a);(0,i.e)((()=>(0,i.R)(r,(0,i.g)(e).path))),(0,i.k)(t,a)};(0,i.F)(m,(t=>{F()&&(0,i.g)(e).path&&t(y)}));var w=(0,i.E)(x,2),C=t=>{var e=p();(0,i.k)(t,e)};(0,i.F)(w,(t=>{(0,i.g)(a)===b()&&t(C)})),(0,i.e)((t=>{var r;(0,i.h)(l,1,"px-3 py-2 gap-2 flex flex-row w-full hover:bg-surface-hover transition-all items-center rounded-md ".concat((0,i.g)(a)===b()?"bg-surface-hover":"")),(0,i.h)(n,1,t),(0,i.R)(k,null!==(r=(0,i.g)(e).summary)&&void 0!==r?r:"")}),[()=>(0,i.a1)((0,i.a2)("flex justify-center items-center"))]),(0,i.k)(t,l)},$$slots:{text:!0,default:!0}})}(0,i.k)(t,r)}));var r=(0,i.E)(a,2),l=t=>{var e=x();(0,i.k)(t,e)};(0,i.F)(r,(t=>{40==C().length&&t(l)})),(0,i.k)(t,e)};(0,i.F)(a,(t=>{C().length>0&&J().length>0&&t(r)}),!0),(0,i.k)(t,e)};(0,i.F)(a,(t=>{y()?t(r):t(l,!1)}),!0),(0,i.k)(t,e)};(0,i.F)(z,(t=>{(0,i.g)(a)?t(I):t(N,!1)})),(0,i.k)(t,H),(0,i.n)()}(0,i.Z)(["click"])}}]);