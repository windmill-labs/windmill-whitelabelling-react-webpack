"use strict";(self.webpackChunkWindmill_Whitelabel_Example=self.webpackChunkWindmill_Whitelabel_Example||[]).push([[6772],{6772:(t,e,i)=>{i.r(e),i.d(e,{AbstractResourceEditorInput:()=>N.b,AbstractTextResourceEditorInput:()=>N.h,ConfirmResult:()=>x.sa,DomScrollableElement:()=>V.zp,EditorInput:()=>F.jt,EditorInputCapabilities:()=>F.zt,Parts:()=>O.I,RegisteredEditorPriority:()=>N.t,SplitView:()=>V.Jt,ViewContainerLocation:()=>x.Sf,ViewPaneContainer:()=>x.P,default:()=>Ue,getSideBarPosition:()=>W.t,isPartVisibile:()=>W.n,onDidChangeSideBarPosition:()=>W.r});var s,n,o,r,a,l,h,d,c,u,g,m,b,p,A,I,v,f,E,C,S,_,y,w,T,D,R,P=i(9379),V=i(6233),L=i(3262),N=i(9114),x=(i(8040),i(5452)),M=(i(3890),i(9558)),B=(i(4892),i(4747)),O=i(1588),F=i(5929),k=(i(7077),i(6693),i(6048)),H=(i(4673),i(9863)),G=(i(9399),i(7564)),U=(i(7183),i(6567),i(1698),i(7),i(308),i(6183),i(5321)),W=i(97);(0,O.z)(),(0,O.Q)(),(0,F.L)(),(0,F.z)(),(0,V.hi)(),(0,V.Wo)(),(0,V.Jo)(),(0,V.yc)(),(0,V.Rd)(),(0,V.im)(),(0,V.sm)(),(0,V.s_)(),(0,V.Ib)(),(0,V.Kb)(),(0,V.qx)(),(0,V.BC)(),(0,V.Iw)(),(0,V.FT)(),(0,V.zT)(),(0,V.eE)(),(0,V.fE)(),(0,V.gE)(),(0,V.TD)(),(0,V.tO)(),(0,V.gA)(),(0,V.PA)(),(0,V.VA)(),(0,V.QA)(),(0,V.mj)(),(0,V.Fj)(),(0,V.nM)(),(0,V.WM)(),(0,V.xN)();var z,j,Y,K={};(0,N.Xn)(),(0,V.$d)(),(0,V.dp)(),(0,V.wm)(),(0,V.Dm)(),(0,V.Om)(),(0,V.Mm)(),(0,V.Pm)(),(0,V.Zm)(),(0,V.lh)(),(0,V.uh)(),(0,V.ig)(),(0,V.mg)(),(0,V.wg)(),(0,V.Pg)(),(0,V.Ev)(),(0,V.vb)(),(0,V.gD)(),(0,V.Ud)(),(0,V.Pp)(),(0,V.Mb)(),(0,V.lr)(),(0,V.qd)(),(j=z||(z={}))[j.ADD=0]="ADD",j[j.CHANGE=1]="CHANGE",j[j.EXPAND_COLLAPSE=2]="EXPAND_COLLAPSE",j[j.REMOVE=3]="REMOVE",function(t){t[t.ADD=0]="ADD",t[t.REMOVE=1]="REMOVE"}(Y||(Y={}));var Z=class extends V.CA{constructor(t,e){super(),this.item=t,this.onClose=e,this._onDidClose=this._register(new V.uA),this.onDidClose=this._onDidClose.event,this._onDidChangeVisibility=this._register(new V.uA),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.registerListeners()}registerListeners(){this._register(this.item.onDidChangeVisibility(t=>this._onDidChangeVisibility.fire(t))),V.dA.once(this.item.onDidClose)(()=>{this._onDidClose.fire(),this.dispose()})}get progress(){return this.item.progress}updateSeverity(t){this.item.updateSeverity(t)}updateMessage(t){this.item.updateMessage(t)}updateActions(t){this.item.updateActions(t)}close(){this.onClose(this.item),this.dispose()}};s=class t extends V.CA{constructor(){super(...arguments),this._onDidChangeNotification=this._register(new V.uA),this.onDidChangeNotification=this._onDidChangeNotification.event,this._onDidChangeStatusMessage=this._register(new V.uA),this.onDidChangeStatusMessage=this._onDidChangeStatusMessage.event,this._onDidChangeFilter=this._register(new V.uA),this.onDidChangeFilter=this._onDidChangeFilter.event,this._notifications=[],this.filter={global:V.Hd.OFF,sources:new Map}}get notifications(){return this._notifications}get statusMessage(){return this._statusMessage}setFilter(t){let e=!1;"number"==typeof t.global&&(e=this.filter.global!==t.global,this.filter.global=t.global);let i=!1;t.sources&&(i=!(0,V.$A)(this.filter.sources,t.sources),this.filter.sources=t.sources),(e||i)&&this._onDidChangeFilter.fire({global:e?t.global:void 0,sources:i?t.sources:void 0})}addNotification(e){var i;let s=this.createViewItem(e);return s?(null!==(i=this.findNotification(s))&&void 0!==i&&i.close(),this._notifications.splice(0,0,s),this._onDidChangeNotification.fire({item:s,index:0,kind:z.ADD}),new Z(s,t=>this.onClose(t))):t.NO_OP_NOTIFICATION}onClose(t){let e=this.findNotification(t);e&&e!==t?e.close():t.close()}findNotification(t){return this._notifications.find(e=>e.equals(t))}createViewItem(t){let e=$.create(t,this.filter);if(!e)return;let i=(t,i)=>{let s=this._notifications.indexOf(e);s>=0&&this._onDidChangeNotification.fire({item:e,index:s,kind:t,detail:i})},s=e.onDidChangeExpansion(()=>i(z.EXPAND_COLLAPSE)),n=e.onDidChangeContent(t=>i(z.CHANGE,t.kind));return V.dA.once(e.onDidClose)(()=>{s.dispose(),n.dispose();let t=this._notifications.indexOf(e);t>=0&&(this._notifications.splice(t,1),this._onDidChangeNotification.fire({item:e,index:t,kind:z.REMOVE}))}),e}showStatusMessage(t,e){let i=tt.create(t,e);return i?(this._statusMessage=i,this._onDidChangeStatusMessage.fire({kind:Y.ADD,item:i}),{close:()=>{this._statusMessage===i&&(this._statusMessage=void 0,this._onDidChangeStatusMessage.fire({kind:Y.REMOVE,item:i}))}}):{close:()=>{}}}};var X;s.NO_OP_NOTIFICATION=new V.Bd;function q(t){return t instanceof $}!function(t){t[t.SEVERITY=0]="SEVERITY",t[t.MESSAGE=1]="MESSAGE",t[t.ACTIONS=2]="ACTIONS",t[t.PROGRESS=3]="PROGRESS"}(X||(X={}));var Q=class extends V.CA{constructor(){super(),this._onDidChange=this._register(new V.uA),this.onDidChange=this._onDidChange.event,this._state=Object.create(null)}get state(){return this._state}infinite(){this._state.infinite||(this._state.infinite=!0,this._state.total=void 0,this._state.worked=void 0,this._state.done=void 0,this._onDidChange.fire())}done(){this._state.done||(this._state.done=!0,this._state.infinite=void 0,this._state.total=void 0,this._state.worked=void 0,this._onDidChange.fire())}total(t){this._state.total!==t&&(this._state.total=t,this._state.infinite=void 0,this._state.done=void 0,this._onDidChange.fire())}worked(t){"number"==typeof this._state.worked?this._state.worked+=t:this._state.worked=t,this._state.infinite=void 0,this._state.done=void 0,this._onDidChange.fire()}},$=(n=class t extends V.CA{static create(e,i){var s;if(null===e||void 0===e||!e.message||(0,V.SN)(e.message))return;let n;n="number"==typeof e.severity?e.severity:V.Kd.Info;let o,r=t.parseNotificationMessage(e.message);if(!r)return;e.actions?o=e.actions:(0,V.Fp)(e.message)&&(o={primary:e.message.actions});let a=null!==(s=e.priority)&&void 0!==s?s:V.Vd.DEFAULT;return(a===V.Vd.DEFAULT||a===V.Vd.OPTIONAL)&&n!==V.Kd.Error&&(i.global===V.Hd.ERROR||(0,V.Wd)(e.source)&&i.sources.get(e.source.id)===V.Hd.ERROR)&&(a=V.Vd.SILENT),new t(e.id,n,e.sticky,a,r,e.source,e.progress,o)}static parseNotificationMessage(e){let i;if(e instanceof Error?i=(0,V.Ip)(e,!1):"string"==typeof e&&(i=e),!i)return;let s=i;return i.length>t.MAX_MESSAGE_LENGTH&&(i="".concat(i.substr(0,t.MAX_MESSAGE_LENGTH),"...")),i=i.replace(/(\r\n|\n|\r)/gm," ").trim(),{raw:s,linkedText:(0,V.ur)(i),original:e}}constructor(t,e,i,s,n,o,r,a){super(),this.id=t,this._severity=e,this._sticky=i,this._priority=s,this._message=n,this._source=o,this._visible=!1,this._onDidChangeExpansion=this._register(new V.uA),this.onDidChangeExpansion=this._onDidChangeExpansion.event,this._onDidClose=this._register(new V.uA),this.onDidClose=this._onDidClose.event,this._onDidChangeContent=this._register(new V.uA),this.onDidChangeContent=this._onDidChangeContent.event,this._onDidChangeVisibility=this._register(new V.uA),this.onDidChangeVisibility=this._onDidChangeVisibility.event,r&&this.setProgress(r),this.setActions(a)}setProgress(t){t.infinite?this.progress.infinite():t.total&&(this.progress.total(t.total),t.worked&&this.progress.worked(t.worked))}setActions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{primary:[],secondary:[]};this._actions={primary:Array.isArray(t.primary)?t.primary:[],secondary:Array.isArray(t.secondary)?t.secondary:[]},this._expanded=t.primary&&t.primary.length>0}get canCollapse(){return!this.hasActions}get expanded(){return!!this._expanded}get severity(){return this._severity}get sticky(){if(this._sticky)return!0;let t=this.hasActions;return!!(t&&this._severity===V.Kd.Error||!t&&this._expanded||this._progress&&!this._progress.state.done)}get priority(){return this._priority}get hasActions(){return!(!this._actions||!this._actions.primary)&&this._actions.primary.length>0}get hasProgress(){return!!this._progress}get progress(){return this._progress||(this._progress=this._register(new Q),this._register(this._progress.onDidChange(()=>this._onDidChangeContent.fire({kind:X.PROGRESS})))),this._progress}get message(){return this._message}get source(){return"string"==typeof this._source?this._source:this._source?this._source.label:void 0}get sourceId(){return this._source&&"string"!=typeof this._source&&"id"in this._source?this._source.id:void 0}get actions(){return this._actions}get visible(){return this._visible}updateSeverity(t){t!==this._severity&&(this._severity=t,this._onDidChangeContent.fire({kind:X.SEVERITY}))}updateMessage(e){let i=t.parseNotificationMessage(e);!i||i.raw===this._message.raw||(this._message=i,this._onDidChangeContent.fire({kind:X.MESSAGE}))}updateActions(t){this.setActions(t),this._onDidChangeContent.fire({kind:X.ACTIONS})}updateVisibility(t){this._visible!==t&&(this._visible=t,this._onDidChangeVisibility.fire(t))}expand(){this._expanded||!this.canCollapse||(this._expanded=!0,this._onDidChangeExpansion.fire())}collapse(t){!this._expanded||!this.canCollapse||(this._expanded=!1,t||this._onDidChangeExpansion.fire())}toggle(){this._expanded?this.collapse():this.expand()}close(){this._onDidClose.fire(),this.dispose()}equals(t){var e,i;if(this.hasProgress||t.hasProgress)return!1;if("string"==typeof this.id||"string"==typeof t.id)return this.id===t.id;if("object"==typeof this._source){if(this._source.label!==t.source||this._source.id!==t.sourceId)return!1}else if(this._source!==t.source)return!1;return this._message.raw===t.message.raw&&(0,V.RM)((null===(e=this._actions)||void 0===e?void 0:e.primary)||[],(null===(i=t.actions)||void 0===i?void 0:i.primary)||[],(t,e)=>t.id+t.label===e.id+e.label)}},{_:n.MAX_MESSAGE_LENGTH=1e3},n),J=class t extends V.Ob{constructor(e,i){super(e,i.label,void 0,!0,async()=>{i.run(),this._onDidRun.fire()}),this._onDidRun=this._register(new V.uA),this.onDidRun=this._onDidRun.event,this._keepOpen=!!i.keepOpen,this._menu=!i.isSecondary&&i.menu?i.menu.map((i,s)=>new t("".concat(e,".").concat(s),i)):void 0}get menu(){return this._menu}get keepOpen(){return this._keepOpen}},tt=class{static create(t,e){if(!t||(0,V.SN)(t))return;let i;return t instanceof Error?i=(0,V.Ip)(t,!1):"string"==typeof t&&(i=t),i?{message:i,options:e}:void 0}};(0,V.bb)(),(0,V.Sb)(),(0,V.IO)(),(0,V.gb)(),(0,V.db)(),(0,V.Ct)(),(0,V.Tt)(),(0,V.ab)(),(0,O.ir)(),(0,V.Ud)(),(0,V.Mb)(),(0,V.Sc)(),(0,V.PA)(),(0,N.oi)(),(0,V.m)();var et="notifications.showList",it="notifications.hideList",st="notifications.hideToasts",nt="notifications.focusToasts",ot="notification.collapse",rt="notification.expand",at="notification.acceptPrimaryAction",lt="notification.clear",ht="notifications.clearAll",dt="notifications.toggleDoNotDisturbMode",ct="notifications.toggleDoNotDisturbModeBySource";function ut(t,e){if(q(e))return e;let i=t.lastFocusedList;if(i instanceof V.ot){let t=i.getFocusedElements()[0];if(q(t)||i.isDOMFocused()&&(t=i.element(0)),q(t))return t}}var gt=class extends V.kb{constructor(t,e){super(),this.telemetryService=t,this.notificationService=e}async runAction(t,e){this.telemetryService.publicLog2("workbenchActionExecuted",{id:t.id,from:"message"});try{await super.runAction(t,e)}catch(t){this.notificationService.error(t)}}};gt=(0,V.Pb)([(0,V.Fb)(0,V.ib),(0,V.Fb)(1,V.Ld)],gt),(0,F.it)(),(0,F.At)(),(0,F.en)(),(0,V.Mi)(),(0,V.bs)(),(0,V.wl)(),(0,V.Ad)(),(0,V.wb)(),(0,V.Db)();(0,V.Qn)(),(0,V.br)(),(0,V.zr)(),(0,V.Hi)(),(0,V.Yi)(),(0,V.da)(),(0,V.Ic)(),(0,V.ym)(),(0,V.Ib)(),(0,V.Fj)(),(0,V.Mb)(),(0,V.w)(),(0,V.q)(),(0,V.mE)(K);var mt=(0,V.J)("notifications-clear",V.mD.close,(0,V.Ij)(3526,"Icon for the clear action in notifications.")),bt=(0,V.J)("notifications-clear-all",V.mD.clearAll,(0,V.Ij)(3527,"Icon for the clear all action in notifications.")),pt=(0,V.J)("notifications-hide",V.mD.chevronDown,(0,V.Ij)(3528,"Icon for the hide action in notifications.")),At=(0,V.J)("notifications-expand",V.mD.chevronUp,(0,V.Ij)(3529,"Icon for the expand action in notifications.")),It=(0,V.J)("notifications-collapse",V.mD.chevronDown,(0,V.Ij)(3530,"Icon for the collapse action in notifications.")),vt=(0,V.J)("notifications-configure",V.mD.gear,(0,V.Ij)(3531,"Icon for the configure action in notifications.")),ft=(0,V.J)("notifications-do-not-disturb",V.mD.bellSlash,(0,V.Ij)(3532,"Icon for the mute all action in notifications.")),Et=(o=class extends V.Ob{constructor(t,e,i){super(t,e,V.Eb.asClassName(mt)),this.commandService=i}async run(t){this.commandService.executeCommand(lt,t)}},{_:o.ID=lt},{_:o.LABEL=(0,V.Ij)(3533,"Clear Notification")},o);Et=(0,V.Pb)([(0,V.Fb)(2,V.Cb)],Et);var Ct=(r=class extends V.Ob{constructor(t,e,i){super(t,e,V.Eb.asClassName(bt)),this.commandService=i}async run(){this.commandService.executeCommand(ht)}},{_:r.ID=ht},{_:r.LABEL=(0,V.Ij)(3534,"Clear All Notifications")},r);Ct=(0,V.Pb)([(0,V.Fb)(2,V.Cb)],Ct);var St=(a=class extends V.Ob{constructor(t,e,i){super(t,e,V.Eb.asClassName(ft)),this.commandService=i}async run(){this.commandService.executeCommand(dt)}},{_:a.ID=dt},{_:a.LABEL=(0,V.Ij)(3535,"Toggle Do Not Disturb Mode")},a);St=(0,V.Pb)([(0,V.Fb)(2,V.Cb)],St);var _t=(l=class extends V.Ob{constructor(t,e,i){super(t,e),this.commandService=i}async run(){this.commandService.executeCommand(ct)}},{_:l.ID=ct},{_:l.LABEL=(0,V.Ij)(3536,"Toggle Do Not Disturb Mode By Source...")},l);_t=(0,V.Pb)([(0,V.Fb)(2,V.Cb)],_t);var yt=(h=class extends V.Ob{constructor(t,e){super(t,e,V.Eb.asClassName(ft))}},{_:h.ID="workbench.action.configureDoNotDisturbMode"},{_:h.LABEL=(0,V.Ij)(3537,"Configure Do Not Disturb...")},h),wt=(d=class extends V.Ob{constructor(t,e,i){super(t,e,V.Eb.asClassName(pt)),this.commandService=i}async run(){this.commandService.executeCommand(it)}},{_:d.ID=it},{_:d.LABEL=(0,V.Ij)(3538,"Hide Notifications")},d);wt=(0,V.Pb)([(0,V.Fb)(2,V.Cb)],wt);var Tt=(c=class extends V.Ob{constructor(t,e,i){super(t,e,V.Eb.asClassName(At)),this.commandService=i}async run(t){this.commandService.executeCommand(rt,t)}},{_:c.ID=rt},{_:c.LABEL=(0,V.Ij)(3539,"Expand Notification")},c);Tt=(0,V.Pb)([(0,V.Fb)(2,V.Cb)],Tt);var Dt=(u=class extends V.Ob{constructor(t,e,i){super(t,e,V.Eb.asClassName(It)),this.commandService=i}async run(t){this.commandService.executeCommand(ot,t)}},{_:u.ID=ot},{_:u.LABEL=(0,V.Ij)(3540,"Collapse Notification")},u);Dt=(0,V.Pb)([(0,V.Fb)(2,V.Cb)],Dt);var Rt=(g=class extends V.Ob{constructor(t,e,i){super(t,e,V.Eb.asClassName(vt)),this.notification=i}},{_:g.ID="workbench.action.configureNotification"},{_:g.LABEL=(0,V.Ij)(3541,"More Actions...")},g),Pt=(m=class extends V.Ob{constructor(t,e,i){super(t,e),this.clipboardService=i}run(t){return this.clipboardService.writeText(t.message.raw)}},{_:m.ID="workbench.action.copyNotificationMessage"},{_:m.LABEL=(0,V.Ij)(3542,"Copy Text")},m);Pt=(0,V.Pb)([(0,V.Fb)(2,V.C)],Pt),(0,V.Ib)(),(0,V.Fj)(),(0,V.Mb)(),(0,V.Kb)(),(0,V.PA)(),(0,V.Hn)(),(0,V.Ud)(),(0,V.Rd)(),(0,V.WM)(),(0,V.gD)(),(0,V.Db)(),(0,V.Li)(),(0,V.Rp)(),(0,V.gA)(),(0,V.tO)(),(0,V.cr)(),(0,V.qd)();var Vt,Lt,Nt=(b=class t{constructor(t){this.offsetHelper=this.createOffsetHelper(t)}createOffsetHelper(t){return t.appendChild((0,V.Zb)(".notification-offset-helper"))}getHeight(e){var i;if(!e.expanded)return t.ROW_HEIGHT;let s=t.ROW_HEIGHT,n=this.computePreferredHeight(e);if(t.LINE_HEIGHT<n){s+=n-t.LINE_HEIGHT}return(e.source||(0,V.JM)(null===(i=e.actions)||void 0===i?void 0:i.primary))&&(s+=t.ROW_HEIGHT),s===t.ROW_HEIGHT&&e.collapse(!0),s}computePreferredHeight(t){var e;let i=0;t.hasProgress||i++,t.canCollapse&&i++,(0,V.JM)(null===(e=t.actions)||void 0===e?void 0:e.secondary)&&i++,this.offsetHelper.style.width="".concat(450-(40+30*i-4*Math.max(i-1,0)),"px");let s=xt.render(t.message);this.offsetHelper.appendChild(s);let n=Math.max(this.offsetHelper.offsetHeight,this.offsetHelper.scrollHeight);return(0,V.fx)(this.offsetHelper),n}getTemplateId(t){if(t instanceof $)return Mt.TEMPLATE_ID;throw Error("unknown element type: "+t)}},{_:b.ROW_HEIGHT=42},{_:b.LINE_HEIGHT=22},b),xt=class{static render(t,e){let i=(0,V.Zb)("span");for(let s of t.linkedText.nodes)if("string"==typeof s)i.appendChild((0,V.bx)(s));else{let t=s.title;!t&&s.href.startsWith("command:")?t=(0,V.Ij)(3583,"Click to execute command '{0}'",s.href.substr(8)):t||(t=s.href);let n=(0,V.Zb)("a",{href:s.href,title:t,tabIndex:0},s.label);if(e){let t=t=>{(0,V.nS)(t)&&V.ex.stop(t,!0),e.callback(s.href)},i=e.toDispose.add(new V.Lp(n,V.tx.CLICK)).event,o=e.toDispose.add(new V.Lp(n,V.tx.KEY_DOWN)).event,r=V.dA.chain(o,t=>t.filter(t=>{let e=new V.RT(t);return e.equals(V.YD.Space)||e.equals(V.YD.Enter)}));e.toDispose.add(V.vm.addTarget(n));let a=e.toDispose.add(new V.Lp(n,V._m.Tap)).event;V.dA.any(i,a,r)(t,null,e.toDispose)}i.appendChild(n)}return i}},Mt=(p=class{constructor(t,e,i,s){this.actionRunner=t,this.contextMenuService=e,this.instantiationService=i,this.notificationService=s}get templateId(){return Vt.TEMPLATE_ID}renderTemplate(t){let e=Object.create(null);e.toDispose=new V.EA,e.container=(0,V.Zb)(".notification-list-item"),e.mainRow=(0,V.Zb)(".notification-list-item-main-row"),e.icon=(0,V.Zb)(".notification-list-item-icon.codicon"),e.message=(0,V.Zb)(".notification-list-item-message");let i=this,s=(0,V.Zb)(".notification-list-item-toolbar-container");return e.toolbar=new V.Lr(s,{ariaLabel:(0,V.Ij)(3584,"Notification Actions"),actionViewItemProvider:(t,s)=>{if(t instanceof Rt)return e.toDispose.add(new V.Ii(t,{getActions(){var e;let s=[],n={id:t.notification.sourceId,label:t.notification.source};if((0,V.Wd)(n)){var o;let e=i.notificationService.getFilter(n)===V.Hd.ERROR;s.push((0,V.Nb)({id:n.id,label:e?(0,V.Ij)(3585,"Turn On All Notifications from '{0}'",n.label):(0,V.Ij)(3586,"Turn Off Info and Warning Notifications from '{0}'",n.label),run:()=>i.notificationService.setFilter((0,P.A)((0,P.A)({},n),{},{filter:e?V.Hd.OFF:V.Hd.ERROR}))})),(null===(o=t.notification.actions)||void 0===o||null===(o=o.secondary)||void 0===o?void 0:o.length)&&s.push(new V.Ab)}return Array.isArray(null===(e=t.notification.actions)||void 0===e?void 0:e.secondary)&&s.push(...t.notification.actions.secondary),s}},this.contextMenuService,(0,P.A)((0,P.A)({},s),{},{actionRunner:this.actionRunner,classNames:t.class})))},actionRunner:this.actionRunner}),e.toDispose.add(e.toolbar),e.detailsRow=(0,V.Zb)(".notification-list-item-details-row"),e.source=(0,V.Zb)(".notification-list-item-source"),e.buttonsContainer=(0,V.Zb)(".notification-list-item-buttons-container"),t.appendChild(e.container),e.container.appendChild(e.detailsRow),e.detailsRow.appendChild(e.source),e.detailsRow.appendChild(e.buttonsContainer),e.container.appendChild(e.mainRow),e.mainRow.appendChild(e.icon),e.mainRow.appendChild(e.message),e.mainRow.appendChild(s),e.progress=new V.Vn(t,V.ki),e.toDispose.add(e.progress),e.renderer=this.instantiationService.createInstance(Bt,e,this.actionRunner),e.toDispose.add(e.renderer),e}renderElement(t,e,i){i.renderer.setInput(t)}disposeTemplate(t){(0,V.MA)(t.toDispose)}},{_:Vt=p},{_:p.TEMPLATE_ID="notification"},p);Mt=Vt=(0,V.Pb)([(0,V.Fb)(1,V.Sl),(0,V.Fb)(2,V.Ub),(0,V.Fb)(3,V.Ld)],Mt);var Bt=(A=class extends V.CA{constructor(t,e,i,s,n,o,r){super(),this.template=t,this.actionRunner=e,this.openerService=i,this.instantiationService=s,this.keybindingService=n,this.contextMenuService=o,this.hoverService=r,this.inputDisposables=this._register(new V.EA),Lt.closeNotificationAction||(Lt.closeNotificationAction=s.createInstance(Et,Et.ID,Et.LABEL),Lt.expandNotificationAction=s.createInstance(Tt,Tt.ID,Tt.LABEL),Lt.collapseNotificationAction=s.createInstance(Dt,Dt.ID,Dt.LABEL))}setInput(t){this.inputDisposables.clear(),this.render(t)}render(t){this.template.container.classList.toggle("expanded",t.expanded),this.inputDisposables.add((0,V.ox)(this.template.container,V.tx.MOUSE_UP,t=>{1===t.button&&V.ex.stop(t,!0)})),this.inputDisposables.add((0,V.ox)(this.template.container,V.tx.AUXCLICK,e=>{!t.hasProgress&&1===e.button&&(V.ex.stop(e,!0),t.close())})),this.renderSeverity(t);let e=this.inputDisposables.add(this.hoverService.setupManagedHover((0,V.ua)("mouse"),this.template.message,"")),i=this.renderMessage(t,e);this.renderSecondaryActions(t,i);let s=this.inputDisposables.add(this.hoverService.setupManagedHover((0,V.ua)("mouse"),this.template.source,""));this.renderSource(t,s),this.renderButtons(t),this.renderProgress(t),this.inputDisposables.add(t.onDidChangeContent(i=>{switch(i.kind){case X.SEVERITY:this.renderSeverity(t);break;case X.PROGRESS:this.renderProgress(t);break;case X.MESSAGE:this.renderMessage(t,e)}}))}renderSeverity(t){Lt.SEVERITIES.forEach(e=>{t.severity!==e&&this.template.icon.classList.remove(...V.Eb.asClassNameArray(this.toSeverityIcon(e)))}),this.template.icon.classList.add(...V.Eb.asClassNameArray(this.toSeverityIcon(t.severity)))}renderMessage(t,e){(0,V.fx)(this.template.message),this.template.message.appendChild(xt.render(t.message,{callback:t=>this.openerService.open(V.wD.parse(t),{allowCommands:!0}),toDispose:this.inputDisposables}));let i=t.canCollapse&&!t.expanded&&this.template.message.scrollWidth>this.template.message.clientWidth;return e.update(i?this.template.message.textContent+"":""),i}renderSecondaryActions(t,e){var i;let s=[];if((0,V.JM)(null===(i=t.actions)||void 0===i?void 0:i.secondary)){let e=this.instantiationService.createInstance(Rt,Rt.ID,Rt.LABEL,t);s.push(e),this.inputDisposables.add(e)}let n=!1;t.canCollapse&&(t.expanded||t.source||e)&&(n=!0),n&&s.push(t.expanded?Lt.collapseNotificationAction:Lt.expandNotificationAction),t.hasProgress||s.push(Lt.closeNotificationAction),this.template.toolbar.clear(),this.template.toolbar.context=t,s.forEach(t=>this.template.toolbar.push(t,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(t)}))}renderSource(t,e){t.expanded&&t.source?(this.template.source.textContent=(0,V.Ij)(3587,"Source: {0}",t.source),e.update(t.source)):(this.template.source.textContent="",e.update(""))}renderButtons(t){(0,V.fx)(this.template.buttonsContainer);let e=t.actions?t.actions.primary:void 0;if(t.expanded&&(0,V.JM)(e)){let i=this,s=this.inputDisposables.add(new class extends V.kb{async runAction(e){i.actionRunner.run(e,t),(!(e instanceof J)||!e.keepOpen)&&t.close()}}),n=this.inputDisposables.add(new V.Jn(this.template.buttonsContainer));for(let t=0;t<e.length;t++){let i=e[t],o=(0,P.A)({title:!0,secondary:t>0},V.xi),r=i instanceof J?i.menu:void 0,a=this.inputDisposables.add(r?n.addButtonWithDropdown((0,P.A)((0,P.A)({},o),{},{contextMenuProvider:this.contextMenuService,actions:r,actionRunner:s})):n.addButton(o));a.label=i.label,this.inputDisposables.add(a.onDidClick(t=>{t&&V.ex.stop(t,!0),s.run(i)}))}}}renderProgress(t){if(!t.hasProgress)return void this.template.progress.stop().hide();let e=t.progress.state;e.infinite?this.template.progress.infinite().show():"number"==typeof e.total||"number"==typeof e.worked?("number"==typeof e.total&&!this.template.progress.hasTotal()&&this.template.progress.total(e.total),"number"==typeof e.worked&&this.template.progress.setWorked(e.worked).show()):this.template.progress.done().hide()}toSeverityIcon(t){switch(t){case V.Kd.Warning:return V.mD.warning;case V.Kd.Error:return V.mD.error}return V.mD.info}getKeybindingLabel(t){let e=this.keybindingService.lookupKeybinding(t.id);return e?e.getLabel():null}},{_:Lt=A},{_:A.SEVERITIES=[V.Kd.Info,V.Kd.Warning,V.Kd.Error]},A);Bt=Lt=(0,V.Pb)([(0,V.Fb)(2,V.yr),(0,V.Fb)(3,V.Ub),(0,V.Fb)(4,V.kd),(0,V.Fb)(5,V.Sl),(0,V.Fb)(6,V.sr)],Bt),(0,V.fE)(),(0,V.Ib)(),(0,V.Fj)(),(0,V.qx)(),(0,V.Ct)(),(0,V.Kb)(),(0,V.wl)(),(0,O.ir)(),(0,V.PA)(),(0,V.Ad)(),(0,V.Ud)(),(0,V.mE)({});var Ot=class extends V.CA{constructor(t,e,i,s){super(),this.container=t,this.options=e,this.instantiationService=i,this.contextMenuService=s,this.viewModel=[]}show(){this.isVisible||(this.isVisible=(this.list||this.createNotificationsList(),!0))}createNotificationsList(){this.listContainer=(0,V.Zb)(".notifications-list-container");let t=this._register(this.instantiationService.createInstance(gt)),e=this.instantiationService.createInstance(Mt,t),i=this.listDelegate=new Nt(this.listContainer),s=this.options,n=this.list=this._register(this.instantiationService.createInstance(V.ot,"NotificationsList",this.listContainer,i,[e],(0,P.A)((0,P.A)({},s),{},{setRowLineHeight:!1,horizontalScrolling:!1,overrideStyles:{listBackground:N.wt},accessibilityProvider:this.instantiationService.createInstance(kt,s)}))),o=this._register(this.instantiationService.createInstance(Pt,Pt.ID,Pt.LABEL));this._register(n.onContextMenu(e=>{e.element&&this.contextMenuService.showContextMenu({getAnchor:()=>e.anchor,getActions:()=>[o],getActionsContext:()=>e.element,actionRunner:t})})),this._register(n.onMouseDblClick(t=>t.element.toggle()));let r=this._register((0,V.AS)(n.getHTMLElement()));this._register(r.onDidBlur(()=>{(0,V.Bx)(this.listContainer).document.hasFocus()&&n.setFocus([])})),O.jn.bindTo(n.contextKeyService),this._register(n.onDidChangeSelection(t=>{t.indexes.length>0&&n.setSelection([])})),this.container.appendChild(this.listContainer)}updateNotificationsList(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],[s,n]=(0,V.Qj)(this.list,this.listContainer),o=(0,V.Zx)(n),r=s.getFocus()[0],a=this.viewModel[r],l=null;if("number"==typeof r&&(l=s.getRelativeTop(r)),this.viewModel.splice(t,e,...i),s.splice(t,e,i),s.layout(),0===this.viewModel.length)this.hide();else if("number"==typeof r){let t=0;if(a){let e=this.viewModel.indexOf(a);-1===e&&(e=r-1),e<this.viewModel.length&&e>=0&&(t=e)}"number"==typeof l&&s.reveal(t,l),s.setFocus([t])}this.isVisible&&o&&s.domFocus()}updateNotificationHeight(t){let e=this.viewModel.indexOf(t);if(-1===e)return;let[i,s]=(0,V.Qj)(this.list,this.listDelegate);i.updateElementHeight(e,s.getHeight(t)),i.layout()}hide(){!this.isVisible||!this.list||(this.isVisible=!1,this.list.splice(0,this.viewModel.length),this.viewModel=[])}focusFirst(){this.list&&(this.list.focusFirst(),this.list.domFocus())}hasFocus(){return!!this.listContainer&&(0,V.Zx)(this.listContainer)}layout(t,e){this.listContainer&&this.list&&(this.listContainer.style.width="".concat(t,"px"),"number"==typeof e&&(this.list.getHTMLElement().style.maxHeight="".concat(e,"px")),this.list.layout())}dispose(){this.hide(),super.dispose()}};Ot=(0,V.Pb)([(0,V.Fb)(2,V.Ub),(0,V.Fb)(3,V.Sl)],Ot);var Ft,kt=class{constructor(t,e,i){this._options=t,this._keybindingService=e,this._configurationService=i}getAriaLabel(t){var e;let i,s=null===(e=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))||void 0===e?void 0:e.getAriaLabel();return this._configurationService.getValue("accessibility.verbosity.notification")&&(i=s?(0,V.Ij)(3562,"Inspect the response in the accessible view with {0}",s):(0,V.Ij)(3563,"Inspect the response in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding")),t.source?(0,V.Gd)(i?(0,V.Ij)(3566,"{0}, source: {1}, notification, {2}",t.message.raw,t.source,i):(0,V.Ij)(3567,"{0}, source: {1}, notification",t.message.raw,t.source),t.severity):(0,V.Gd)(i?(0,V.Ij)(3564,"{0}, notification, {1}",t.message.raw,i):(0,V.Ij)(3565,"{0}, notification",t.message.raw),t.severity)}getWidgetAriaLabel(){var t;return null!==(t=this._options.widgetAriaLabel)&&void 0!==t?t:(0,V.Ij)(3568,"Notifications List")}getRole(){return"dialog"}};kt=(0,V.Pb)([(0,V.Fb)(1,V.kd),(0,V.Fb)(2,V.o_)],kt),(0,V.fE)(),(0,V.Ib)(),(0,N.Xn)(),(0,V.gA)(),(0,V.Kb)(),(0,V.qx)(),(0,F.G)(),(0,V.Fj)(),(0,V.zr)(),(0,V.Mb)(),(0,V.Ad)(),(0,V.nM)(),(0,O.ir)(),(0,V.Ud)(),(0,V.Rd)(),(0,V.wl)(),(0,V.Li)(),(0,N.oi)(),(0,V.m)(),(0,V.mE)({}),(0,V.mE)(K);var Ht=(I=class extends V.lp{constructor(t,e,i,s,n,o,r,a,l,h,d){super(i),this.container=t,this.model=e,this.instantiationService=s,this.layoutService=n,this.editorGroupService=r,this.keybindingService=a,this.notificationService=l,this.accessibilitySignalService=h,this.contextMenuService=d,this._onDidChangeVisibility=this._register(new V.uA),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.notificationsCenterVisibleContextKey=O.Mn.bindTo(o),this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification(t=>this.onDidChangeNotification(t))),this._register(this.layoutService.onDidLayoutMainContainer(t=>this.layout(V.Qb.lift(t)))),this._register(this.notificationService.onDidChangeFilter(()=>this.onDidChangeFilter()))}onDidChangeFilter(){this.notificationService.getFilter()===V.Hd.ERROR&&this.hide()}get isVisible(){return!!this._isVisible}show(){if(this._isVisible){let t=(0,V.$j)(this.notificationsList);return t.show(),void t.focusFirst()}this.notificationsCenterContainer||this.create(),this.updateTitle();let[t,e]=(0,V.Qj)(this.notificationsList,this.notificationsCenterContainer);this._isVisible=!0,e.classList.add("visible"),t.show(),this.layout(this.workbenchDimensions),t.updateNotificationsList(0,0,this.model.notifications),t.focusFirst(),this.updateStyles(),this.model.notifications.forEach(t=>t.updateVisibility(!0)),this.notificationsCenterVisibleContextKey.set(!0),this._onDidChangeVisibility.fire()}updateTitle(){let[t,e]=(0,V.Qj)(this.notificationsCenterTitle,this.clearAllAction);0===this.model.notifications.length?(t.textContent=(0,V.Ij)(3546,"No new notifications"),e.enabled=!1):(t.textContent=(0,V.Ij)(3547,"Notifications"),e.enabled=this.model.notifications.some(t=>!t.hasProgress))}create(){this.notificationsCenterContainer=(0,V.Zb)(".notifications-center"),this.notificationsCenterHeader=(0,V.Zb)(".notifications-center-header"),this.notificationsCenterContainer.appendChild(this.notificationsCenterHeader),this.notificationsCenterTitle=(0,V.Zb)("span.notifications-center-header-title"),this.notificationsCenterHeader.appendChild(this.notificationsCenterTitle);let t=(0,V.Zb)(".notifications-center-header-toolbar");this.notificationsCenterHeader.appendChild(t);let e=this._register(this.instantiationService.createInstance(gt)),i=this,s=this._register(new V.Lr(t,{ariaLabel:(0,V.Ij)(3548,"Notification Center Actions"),actionRunner:e,actionViewItemProvider:(t,s)=>{if(t.id===yt.ID)return this._register(this.instantiationService.createInstance(V.Ii,t,{getActions(){let t=[(0,V.Nb)({id:St.ID,label:i.notificationService.getFilter()===V.Hd.OFF?(0,V.Ij)(3549,"Enable Do Not Disturb Mode"):(0,V.Ij)(3550,"Disable Do Not Disturb Mode"),run:()=>i.notificationService.setFilter(i.notificationService.getFilter()===V.Hd.OFF?V.Hd.ERROR:V.Hd.OFF)})],e=i.notificationService.getFilters().sort((t,e)=>t.label.localeCompare(e.label));for(let s of e.slice(0,Ft.MAX_NOTIFICATION_SOURCES))1===t.length&&t.push(new V.Ab),t.push((0,V.Nb)({id:"".concat(St.ID,".").concat(s.id),label:s.label,checked:s.filter!==V.Hd.ERROR,run:()=>i.notificationService.setFilter((0,P.A)((0,P.A)({},s),{},{filter:s.filter===V.Hd.ERROR?V.Hd.OFF:V.Hd.ERROR}))}));return e.length>Ft.MAX_NOTIFICATION_SOURCES&&(t.push(new V.Ab),t.push(i._register(i.instantiationService.createInstance(_t,_t.ID,(0,V.Ij)(3551,"More\u2026"))))),t}},this.contextMenuService,(0,P.A)((0,P.A)({},s),{},{actionRunner:e,classNames:t.class,keybindingProvider:t=>this.keybindingService.lookupKeybinding(t.id)})))}}));this.clearAllAction=this._register(this.instantiationService.createInstance(Ct,Ct.ID,Ct.LABEL)),s.push(this.clearAllAction,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(this.clearAllAction)}),this.configureDoNotDisturbAction=this._register(this.instantiationService.createInstance(yt,yt.ID,yt.LABEL)),s.push(this.configureDoNotDisturbAction,{icon:!0,label:!1});let n=this._register(this.instantiationService.createInstance(wt,wt.ID,wt.LABEL));s.push(n,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(n)}),this.notificationsList=this.instantiationService.createInstance(Ot,this.notificationsCenterContainer,{widgetAriaLabel:(0,V.Ij)(3552,"Notifications Center")}),this.container.appendChild(this.notificationsCenterContainer)}getKeybindingLabel(t){let e=this.keybindingService.lookupKeybinding(t.id);return e?e.getLabel():null}onDidChangeNotification(t){if(!this._isVisible)return;let e=!1,[i,s]=(0,V.Qj)(this.notificationsList,this.notificationsCenterContainer);switch(t.kind){case z.ADD:i.updateNotificationsList(t.index,0,[t.item]),t.item.updateVisibility(!0);break;case z.CHANGE:switch(t.detail){case X.ACTIONS:i.updateNotificationsList(t.index,1,[t.item]);break;case X.MESSAGE:t.item.expanded&&i.updateNotificationHeight(t.item)}break;case z.EXPAND_COLLAPSE:i.updateNotificationsList(t.index,1,[t.item]);break;case z.REMOVE:e=(0,V.Zx)(s),i.updateNotificationsList(t.index,1),t.item.updateVisibility(!1)}this.updateTitle(),0===this.model.notifications.length&&(this.hide(),e&&this.editorGroupService.activeGroup.focus())}hide(){if(!this._isVisible||!this.notificationsCenterContainer||!this.notificationsList)return;let t=(0,V.Zx)(this.notificationsCenterContainer);this._isVisible=!1,this.notificationsCenterContainer.classList.remove("visible"),this.notificationsList.hide(),this.model.notifications.forEach(t=>t.updateVisibility(!1)),this.notificationsCenterVisibleContextKey.set(!1),this._onDidChangeVisibility.fire(),t&&this.editorGroupService.activeGroup.focus()}updateStyles(){if(this.notificationsCenterContainer&&this.notificationsCenterHeader){let t=this.getColor(V.dg);this.notificationsCenterContainer.style.boxShadow=t?"0 0 8px 2px ".concat(t):"";let e=this.getColor(N.Tt);this.notificationsCenterContainer.style.border=e?"1px solid ".concat(e):"";let i=this.getColor(N.Dt);this.notificationsCenterHeader.style.color=null!==i&&void 0!==i?i:"";let s=this.getColor(N.Et);this.notificationsCenterHeader.style.background=null!==s&&void 0!==s?s:""}}layout(t){if(this.workbenchDimensions=t,this._isVisible&&this.notificationsCenterContainer){let t=Ft.MAX_DIMENSIONS.width,e=Ft.MAX_DIMENSIONS.height,i=t,s=e;this.workbenchDimensions&&(i=this.workbenchDimensions.width,i-=16,s=this.workbenchDimensions.height-35,this.layoutService.isVisible(O.I.STATUSBAR_PART,V.vE)&&(s-=22),this.layoutService.isVisible(O.I.TITLEBAR_PART,V.vE)&&(s-=22),s-=24),(0,V.$j)(this.notificationsList).layout(Math.min(t,i),Math.min(e,s))}}clearAll(){this.hide();for(let t of[...this.model.notifications])t.hasProgress||t.close(),this.accessibilitySignalService.playSignal(N.ai.clear)}},{_:Ft=I},{_:I.MAX_DIMENSIONS=new V.Qb(450,400)},{_:I.MAX_NOTIFICATION_SOURCES=10},I);Ht=Ft=(0,V.Pb)([(0,V.Fb)(2,V.Qd),(0,V.Fb)(3,V.Ub),(0,V.Fb)(4,O.Z),(0,V.Fb)(5,V.yb),(0,V.Fb)(6,F.W),(0,V.Fb)(7,V.kd),(0,V.Fb)(8,V.Ld),(0,V.Fb)(9,V.p),(0,V.Fb)(10,V.Sl)],Ht),(0,V.Un)(),(0,V.r_)(),(0,V.Fj)(),(0,V.PA)(),(0,V.Pp)(),(0,V.Ud)(),(0,V.gA)(),(0,V.qd)();var Gt=class extends V.CA{constructor(t){super(),this.model=t;for(let e of t.notifications)this.triggerAriaAlert(e);this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification(t=>this.onDidChangeNotification(t)))}onDidChangeNotification(t){t.kind===z.ADD&&(this.triggerAriaAlert(t.item),t.item.severity===V.Kd.Error&&(t.item.message.original instanceof Error?console.error(t.item.message.original):console.error((0,V.Ip)(t.item.message.linkedText.toString(),!0))))}triggerAriaAlert(t){if(t.priority===V.Vd.SILENT)return;let e=t.onDidChangeContent(e=>{e.kind===X.MESSAGE&&this.doTriggerAriaAlert(t)});V.dA.once(t.onDidClose)(()=>e.dispose()),this.doTriggerAriaAlert(t)}doTriggerAriaAlert(t){let e;e=t.severity===V.Kd.Error?(0,V.Ij)(3543,"Error: {0}",t.message.linkedText.toString()):t.severity===V.Kd.Warning?(0,V.Ij)(3544,"Warning: {0}",t.message.linkedText.toString()):(0,V.Ij)(3545,"Info: {0}",t.message.linkedText.toString()),(0,V.n_)(e)}};(0,V.Ib)(),(0,x.Sx)(),(0,x.vx)(),(0,V.PA)(),(0,V.Fj)(),(0,V.Ud)(),(0,V.Rd)();var Ut=class extends V.CA{constructor(t,e,i){super(),this.model=t,this.statusbarService=e,this.notificationService=i,this.newNotificationsCount=0,this.isNotificationsCenterVisible=!1,this.isNotificationsToastsVisible=!1,this.updateNotificationsCenterStatusItem(),t.statusMessage&&this.doSetStatusMessage(t.statusMessage),this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification(t=>this.onDidChangeNotification(t))),this._register(this.model.onDidChangeStatusMessage(t=>this.onDidChangeStatusMessage(t))),this._register(this.notificationService.onDidChangeFilter(()=>this.updateNotificationsCenterStatusItem()))}onDidChangeNotification(t){this.isNotificationsCenterVisible||(t.kind===z.ADD?this.newNotificationsCount++:t.kind===z.REMOVE&&this.newNotificationsCount>0&&this.newNotificationsCount--),this.updateNotificationsCenterStatusItem()}updateNotificationsCenterStatusItem(){let t=0;if(!this.isNotificationsCenterVisible&&!this.isNotificationsToastsVisible)for(let i of this.model.notifications)i.hasProgress&&t++;let e={name:(0,V.Ij)(3569,"Notifications"),text:"".concat(t>0||this.newNotificationsCount>0?"$(bell-dot)":"$(bell)"),ariaLabel:(0,V.Ij)(3569,"Notifications"),command:this.isNotificationsCenterVisible?it:et,tooltip:this.getTooltip(t),showBeak:this.isNotificationsCenterVisible};this.notificationService.getFilter()===V.Hd.ERROR&&(e=(0,P.A)((0,P.A)({},e),{},{text:"".concat(t>0||this.newNotificationsCount>0?"$(bell-slash-dot)":"$(bell-slash)"),ariaLabel:(0,V.Ij)(3570,"Do Not Disturb"),tooltip:(0,V.Ij)(3571,"Do Not Disturb Mode is Enabled")})),this.notificationsCenterStatusItem?this.notificationsCenterStatusItem.update(e):this.notificationsCenterStatusItem=this.statusbarService.addEntry(e,"status.notifications",x.bx.RIGHT,-1/0)}getTooltip(t){return this.isNotificationsCenterVisible?(0,V.Ij)(3572,"Hide Notifications"):0===this.model.notifications.length?(0,V.Ij)(3573,"No Notifications"):0===t?0===this.newNotificationsCount?(0,V.Ij)(3574,"No New Notifications"):1===this.newNotificationsCount?(0,V.Ij)(3575,"1 New Notification"):(0,V.Ij)(3576,"{0} New Notifications",this.newNotificationsCount):0===this.newNotificationsCount?(0,V.Ij)(3577,"No New Notifications ({0} in progress)",t):1===this.newNotificationsCount?(0,V.Ij)(3578,"1 New Notification ({0} in progress)",t):(0,V.Ij)(3579,"{0} New Notifications ({1} in progress)",this.newNotificationsCount,t)}update(t,e){let i=!1;this.isNotificationsCenterVisible!==t&&(this.isNotificationsCenterVisible=t,this.newNotificationsCount=0,i=!0),this.isNotificationsToastsVisible!==e&&(this.isNotificationsToastsVisible=e,i=!0),i&&this.updateNotificationsCenterStatusItem()}onDidChangeStatusMessage(t){let e=t.item;switch(t.kind){case Y.ADD:this.doSetStatusMessage(e);break;case Y.REMOVE:this.currentStatusMessage&&this.currentStatusMessage[0]===e&&((0,V.MA)(this.currentStatusMessage[1]),this.currentStatusMessage=void 0)}}doSetStatusMessage(t){let e=t.message,i=t.options&&"number"==typeof t.options.showAfter?t.options.showAfter:0,s=t.options&&"number"==typeof t.options.hideAfter?t.options.hideAfter:-1;this.currentStatusMessage&&(0,V.MA)(this.currentStatusMessage[1]);let n,o,r=setTimeout(()=>{n=this.statusbarService.addEntry({name:(0,V.Ij)(3580,"Status Message"),text:e,ariaLabel:e},"status.message",x.bx.LEFT,-1/0),r=void 0},i),a={dispose:()=>{var t;r&&clearTimeout(r),o&&clearTimeout(o),null===(t=n)||void 0===t||t.dispose()}};s>0&&(o=setTimeout(()=>a.dispose(),s)),this.currentStatusMessage=[t,a]}};Ut=(0,V.Pb)([(0,V.Fb)(1,x._x),(0,V.Fb)(2,V.Ld)],Ut);var Wt,zt;(0,V.fE)(),(0,V.Ib)(),(0,V.Fj)(),(0,V.PA)(),(0,V.qx)(),(0,V.Kb)(),(0,V.gA)(),(0,O.z)(),(0,O.Q)(),(0,N.Xn)(),(0,V.dp)(),(0,V.$d)(),(0,V.Pg)(),(0,V.wg)(),(0,V.lh)(),(0,V.ig)(),(0,V.Zm)(),(0,V.Pm)(),(0,V.Mm)(),(0,V.uh)(),(0,V.mg)(),(0,V.Om)(),(0,V.Dm)(),(0,F.G)(),(0,V.bb)(),(0,V.Ud)(),(0,V.oA)(),(0,N.F)(),(0,V.nM)(),(0,O.ir)(),(0,V.gE)(),(0,V.qd)(),(0,V.mE)({}),function(t){t[t.HIDDEN_OR_VISIBLE=0]="HIDDEN_OR_VISIBLE",t[t.HIDDEN=1]="HIDDEN",t[t.VISIBLE=2]="VISIBLE"}(zt||(zt={}));var jt,Yt=(v=class extends V.lp{get isVisible(){return!!this._isVisible}constructor(t,e,i,s,n,o,r,a,l){super(n),this.container=t,this.model=e,this.instantiationService=i,this.layoutService=s,this.editorGroupService=o,this.lifecycleService=a,this.hostService=l,this._onDidChangeVisibility=this._register(new V.uA),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._isVisible=!1,this.mapNotificationToToast=new Map,this.mapNotificationToDisposable=new Map,this.addedToastsIntervalCounter=new V.gw(Wt.SPAM_PROTECTION.interval),this.notificationsToastsVisibleContextKey=O.Nn.bindTo(r),this.registerListeners()}registerListeners(){this._register(this.layoutService.onDidLayoutMainContainer(t=>this.layout(V.Qb.lift(t)))),this.lifecycleService.when(F.M.Restored).then(()=>{this.model.notifications.forEach(t=>this.addToast(t)),this._register(this.model.onDidChangeNotification(t=>this.onDidChangeNotification(t)))}),this._register(this.model.onDidChangeFilter(t=>{let{global:e,sources:i}=t;if(e===V.Hd.ERROR)this.hide();else if(i)for(let[s]of this.mapNotificationToToast)"string"==typeof s.sourceId&&i.get(s.sourceId)===V.Hd.ERROR&&s.severity!==V.Kd.Error&&s.priority!==V.Vd.URGENT&&this.removeToast(s)}))}onDidChangeNotification(t){switch(t.kind){case z.ADD:return this.addToast(t.item);case z.REMOVE:return this.removeToast(t.item)}}addToast(t){if(this.isNotificationsCenterVisible||t.priority===V.Vd.SILENT)return;if(t.priority===V.Vd.OPTIONAL){let t=(0,V.Tx)();if((0,V.iS)(t)&&(0,V.$x)(t)&&(0,V.tS)(t,this.layoutService.mainContainer))return}if(this.addedToastsIntervalCounter.increment()>Wt.SPAM_PROTECTION.limit)return;let e=new V.EA;this.mapNotificationToDisposable.set(t,e),e.add((0,V.CS)((0,V.Bx)(this.container),()=>this.doAddToast(t,e)))}doAddToast(t,e){let i=this.notificationsToastsContainer;i||(i=this.notificationsToastsContainer=(0,V.Zb)(".notifications-toasts"),this.container.appendChild(i)),i.classList.add("visible");let s=(0,V.Zb)(".notification-toast-container"),n=i.firstChild;n?i.insertBefore(s,n):i.appendChild(s);let o=(0,V.Zb)(".notification-toast");s.appendChild(o);let r=this.instantiationService.createInstance(Ot,o,{verticalScrollMode:V.aA.Hidden,widgetAriaLabel:t.source?(0,V.Gd)((0,V.Ij)(3582,"{0}, source: {1}, notification",t.message.raw,t.source),t.severity):(0,V.Gd)((0,V.Ij)(3581,"{0}, notification",t.message.raw),t.severity)});e.add(r);let a={item:t,list:r,container:s,toast:o};this.mapNotificationToToast.set(t,a),e.add((0,V.zA)(()=>this.updateToastVisibility(a,!1))),r.show();let l=this.computeMaxDimensions();this.layoutLists(l.width),r.updateNotificationsList(0,0,[t]),this.layoutContainer(l.height),e.add(t.onDidChangeExpansion(()=>{r.updateNotificationsList(0,1,[t])})),e.add(t.onDidChangeContent(e=>{switch(e.kind){case X.ACTIONS:r.updateNotificationsList(0,1,[t]);break;case X.MESSAGE:t.expanded&&r.updateNotificationHeight(t)}})),V.dA.once(t.onDidClose)(()=>{this.removeToast(t)}),this.purgeNotification(t,s,r,e),this.updateStyles(),this.notificationsToastsVisibleContextKey.set(!0),o.classList.add("notification-fade-in"),e.add((0,V.ox)(o,"transitionend",()=>{o.classList.remove("notification-fade-in"),o.classList.add("notification-fade-in-done")})),t.updateVisibility(!0),this._isVisible||(this._isVisible=!0,this._onDidChangeVisibility.fire())}purgeNotification(t,e,i,s){let n=!1;s.add((0,V.ox)(e,V.tx.MOUSE_OVER,()=>n=!0)),s.add((0,V.ox)(e,V.tx.MOUSE_OUT,()=>n=!1));let o,r,a=()=>{o=setTimeout(()=>{this.hostService.hasFocus?t.sticky||i.hasFocus()||n?a():this.removeToast(t):r||(r=this.hostService.onDidChangeFocus(t=>{t&&a()}),s.add(r))},Wt.PURGE_TIMEOUT[t.severity])};a(),s.add((0,V.zA)(()=>clearTimeout(o)))}removeToast(t){let e=!1,i=this.mapNotificationToToast.get(t);i&&((0,V.Zx)(i.container)&&(e=!(this.focusNext()||this.focusPrevious())),this.mapNotificationToToast.delete(t));let s=this.mapNotificationToDisposable.get(t);s&&((0,V.MA)(s),this.mapNotificationToDisposable.delete(t)),this.mapNotificationToToast.size>0?this.layout(this.workbenchDimensions):(this.doHide(),e&&this.editorGroupService.activeGroup.focus())}removeToasts(){this.mapNotificationToToast.clear(),this.mapNotificationToDisposable.forEach(t=>(0,V.MA)(t)),this.mapNotificationToDisposable.clear(),this.doHide()}doHide(){var t;null!==(t=this.notificationsToastsContainer)&&void 0!==t&&t.classList.remove("visible"),this.notificationsToastsVisibleContextKey.set(!1),this._isVisible&&(this._isVisible=!1,this._onDidChangeVisibility.fire())}hide(){let t=!!this.notificationsToastsContainer&&(0,V.Zx)(this.notificationsToastsContainer);this.removeToasts(),t&&this.editorGroupService.activeGroup.focus()}focus(){let t=this.getToasts(zt.VISIBLE);return t.length>0&&(t[0].list.focusFirst(),!0)}focusNext(){let t=this.getToasts(zt.VISIBLE);for(let e=0;e<t.length;e++)if(t[e].list.hasFocus()){let i=t[e+1];if(i)return i.list.focusFirst(),!0;break}return!1}focusPrevious(){let t=this.getToasts(zt.VISIBLE);for(let e=0;e<t.length;e++)if(t[e].list.hasFocus()){let i=t[e-1];if(i)return i.list.focusFirst(),!0;break}return!1}focusFirst(){let t=this.getToasts(zt.VISIBLE)[0];return!!t&&(t.list.focusFirst(),!0)}focusLast(){let t=this.getToasts(zt.VISIBLE);return t.length>0&&(t[t.length-1].list.focusFirst(),!0)}update(t){this.isNotificationsCenterVisible!==t&&(this.isNotificationsCenterVisible=t,this.isNotificationsCenterVisible&&this.removeToasts())}updateStyles(){this.mapNotificationToToast.forEach(t=>{let{toast:e}=t,i=this.getColor(N.wt);e.style.background=i||"";let s=this.getColor(V.dg);e.style.boxShadow=s?"0 0 8px 2px ".concat(s):"";let n=this.getColor(N.Ot);e.style.border=n?"1px solid ".concat(n):""})}getToasts(t){let e=[];return this.mapNotificationToToast.forEach(i=>{switch(t){case zt.HIDDEN_OR_VISIBLE:e.push(i);break;case zt.HIDDEN:this.isToastInDOM(i)||e.push(i);break;case zt.VISIBLE:this.isToastInDOM(i)&&e.push(i)}}),e.reverse()}layout(t){this.workbenchDimensions=t;let e=this.computeMaxDimensions();e.height&&this.layoutContainer(e.height),this.layoutLists(e.width)}computeMaxDimensions(){let t,e=Wt.MAX_WIDTH,i=e;return this.workbenchDimensions&&(i=this.workbenchDimensions.width,i-=16,t=this.workbenchDimensions.height,this.layoutService.isVisible(O.I.STATUSBAR_PART,V.vE)&&(t-=22),this.layoutService.isVisible(O.I.TITLEBAR_PART,V.vE)&&(t-=22),t-=24),new V.Qb(Math.min(e,i),null!==t&&void 0!==t?t:0)}layoutLists(t){this.mapNotificationToToast.forEach(e=>{let{list:i}=e;return i.layout(t)})}layoutContainer(t){let e=t,i=Math.round(.618*t),s=0;for(let n of this.getToasts(zt.HIDDEN_OR_VISIBLE)){n.container.style.opacity="0",this.updateToastVisibility(n,!0),e-=n.container.offsetHeight,i-=n.container.offsetHeight;let t=!1;s===Wt.MAX_NOTIFICATIONS?t=!1:(0===s&&e>=0||s>0&&i>=0)&&(t=!0),this.updateToastVisibility(n,t),n.container.style.opacity="",t&&s++}}updateToastVisibility(t,e){if(this.isToastInDOM(t)===e)return;let i=(0,V.$j)(this.notificationsToastsContainer);e?i.appendChild(t.container):t.container.remove(),t.item.updateVisibility(e)}isToastInDOM(t){return!!t.container.parentElement}},{_:Wt=v},{_:v.MAX_WIDTH=450},{_:v.MAX_NOTIFICATIONS=3},{_:v.PURGE_TIMEOUT={[V.Kd.Info]:1e4,[V.Kd.Warning]:12e3,[V.Kd.Error]:15e3}},{_:v.SPAM_PROTECTION={interval:800,limit:v.MAX_NOTIFICATIONS}},v);Yt=Wt=(0,V.Pb)([(0,V.Fb)(2,V.Ub),(0,V.Fb)(3,O.Z),(0,V.Fb)(4,V.Qd),(0,V.Fb)(5,F.W),(0,V.Fb)(6,V.yb),(0,V.Fb)(7,F.R),(0,V.Fb)(8,N.P)],Yt),(0,V.S)(),(0,V.tu)(),(0,N.Ia)(),(0,N._o)(),(0,N.xo)(),(0,V.qx)(),(0,V.qg)(),(0,V.gE)(),(0,V.WM)(),(0,V.Iw)(),(0,V.gA)(),(0,V.PA)(),(0,V.nM)(),(0,V.TD)(),(0,M.o)(),(0,V.Q_)(),(0,V.s_)(),(0,V.nb)(),(0,V.Ud)(),(0,V.Rd)(),(0,V.ab)(),(0,V.$d)(),(0,V.ss)(),(0,V.za)(),(0,N.Xn)(),(0,x.Df)(),(0,x.fx)(),(0,L.Fn)(),(0,L.Nn)(),(0,F.Q)(),(0,F.G)(),(0,H.n)(),(0,O.Ot)(),(0,N.F)(),(0,O.z)(),(0,F.L)(),(0,F.z)(),(0,O.wt)(),(0,x.vx)(),(0,L.Cn)(),(0,L.mt)(),(0,V.en)(),function(t){t.SIDEBAR_HIDDEN="nosidebar",t.MAIN_EDITOR_AREA_HIDDEN="nomaineditorarea",t.PANEL_HIDDEN="nopanel",t.AUXILIARYBAR_HIDDEN="noauxiliarybar",t.STATUSBAR_HIDDEN="nostatusbar",t.FULLSCREEN="fullscreen",t.MAXIMIZED="maximized",t.WINDOW_BORDER="border"}(jt||(jt={}));var Kt=[O.P.ACTIVITY_BAR_LOCATION,O.P.COMMAND_CENTER,"chat.commandCenter.enabled","workbench.navigationControl.enabled","workbench.experimental.share.enabled",O.P.EDITOR_ACTIONS_LOCATION,O.P.LAYOUT_ACTIONS,V.ii.MenuBarVisibility,V.ai.TITLE_BAR_STYLE,V.ai.CUSTOM_TITLE_BAR_VISIBILITY],Zt=new V.Qb(V.ni.width,V.ni.height),Xt=new V.Qb(V.ri.width,V.ri.height),qt=class extends V.CA{get activeContainer(){return this.getContainerFromDocument((0,V.wx)())}get containers(){let t=[];for(let{window:e}of(0,V.Ux)())t.push(this.getContainerFromDocument(e.document));return t}getContainerFromDocument(t){return t===this.mainContainer.ownerDocument?this.mainContainer:t.body.getElementsByClassName("monaco-workbench")[0]}whenContainerStylesLoaded(t){return this.containerStylesLoaded.get(t.vscodeWindowId)}get mainContainerDimension(){return this._mainContainerDimension}get activeContainerDimension(){return this.getContainerDimension(this.activeContainer)}getContainerDimension(t){return t===this.mainContainer?this.mainContainerDimension:(0,V.Dx)(t)}get mainContainerOffset(){return this.computeContainerOffset(V.vE)}get activeContainerOffset(){return this.computeContainerOffset((0,V.Bx)(this.activeContainer))}computeContainerOffset(t){let e=0,i=0;this.isVisible(O.I.BANNER_PART)&&(e=this.getPart(O.I.BANNER_PART).maximumHeight,i=e);let s=this.isVisible(O.I.TITLEBAR_PART,t);return s&&(e+=this.getPart(O.I.TITLEBAR_PART).maximumHeight,i=e),s&&!1!==this.configurationService.getValue(O.P.COMMAND_CENTER)&&(i=6),{top:e,quickPickTop:i}}constructor(t,e){super(),this.parent=t,this.layoutOptions=e,this._onDidChangeZenMode=this._register(new V.uA),this.onDidChangeZenMode=this._onDidChangeZenMode.event,this._onDidChangeMainEditorCenteredLayout=this._register(new V.uA),this.onDidChangeMainEditorCenteredLayout=this._onDidChangeMainEditorCenteredLayout.event,this._onDidChangePanelAlignment=this._register(new V.uA),this.onDidChangePanelAlignment=this._onDidChangePanelAlignment.event,this._onDidChangeWindowMaximized=this._register(new V.uA),this.onDidChangeWindowMaximized=this._onDidChangeWindowMaximized.event,this._onDidChangePanelPosition=this._register(new V.uA),this.onDidChangePanelPosition=this._onDidChangePanelPosition.event,this._onDidChangePartVisibility=this._register(new V.uA),this.onDidChangePartVisibility=this._onDidChangePartVisibility.event,this._onDidChangeNotificationsVisibility=this._register(new V.uA),this.onDidChangeNotificationsVisibility=this._onDidChangeNotificationsVisibility.event,this._onDidChangeAuxiliaryBarMaximized=this._register(new V.uA),this.onDidChangeAuxiliaryBarMaximized=this._onDidChangeAuxiliaryBarMaximized.event,this._onDidLayoutMainContainer=this._register(new V.uA),this.onDidLayoutMainContainer=this._onDidLayoutMainContainer.event,this._onDidLayoutActiveContainer=this._register(new V.uA),this.onDidLayoutActiveContainer=this._onDidLayoutActiveContainer.event,this._onDidLayoutContainer=this._register(new V.uA),this.onDidLayoutContainer=this._onDidLayoutContainer.event,this._onDidAddContainer=this._register(new V.uA),this.onDidAddContainer=this._onDidAddContainer.event,this._onDidChangeActiveContainer=this._register(new V.uA),this.onDidChangeActiveContainer=this._onDidChangeActiveContainer.event,this.mainContainer=(0,V.gx)("div"),this.containerStylesLoaded=new Map,this.parts=new Map,this.initialized=!1,this.disposed=!1,this._openedDefaultEditors=!1,this.whenReadyPromise=new V.pw,this.whenReady=this.whenReadyPromise.p,this.whenRestoredPromise=new V.pw,this.whenRestored=this.whenRestoredPromise.p,this.restored=!1,this.inMaximizedAuxiliaryBarTransition=!1,(0,V.Xg)(t)}initLayout(t){this.environmentService=t.get(H.t),this.configurationService=t.get(V.o_),this.hostService=t.get(N.P),this.contextService=t.get(V.Ra),this.storageService=t.get(V.Uo),this.themeService=t.get(V.Qd),this.extensionService=t.get(O.Dt),this.logService=t.get(V.eb),this.telemetryService=t.get(V.ib),this.auxiliaryWindowService=t.get(L.Pn),this.editorService=t.get(F.kt),this.editorGroupService=t.get(F.W),this.mainPartEditorService=this.editorService.createScoped(this.editorGroupService.mainPart,this._store),this.paneCompositeService=t.get(O.Ct),this.viewDescriptorService=t.get(x.dx),this.titleService=t.get(L.Sn),this.notificationService=t.get(V.Ld),this.statusBarService=t.get(x._x),t.get(L.Mn),this.registerLayoutListeners(),this.initLayoutState(t.get(F.R),t.get(V.ys))}registerLayoutListeners(){let t=()=>{this.isVisible(O.I.EDITOR_PART,V.vE)||(this.isAuxiliaryBarMaximized()?this.toggleMaximizedAuxiliaryBar():this.toggleMaximizedPanel())};this.editorGroupService.whenRestored.then(()=>{this._register(this.mainPartEditorService.onDidVisibleEditorsChange(t)),this._register(this.editorGroupService.mainPart.onDidActivateGroup(t)),this._register(this.mainPartEditorService.onDidActiveEditorChange(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue(se.MAIN_EDITOR_CENTERED))))}),this._register(this.configurationService.onDidChangeConfiguration(t=>{if([...Kt,Jt.SIDEBAR_POSITION,Jt.STATUSBAR_VISIBLE].some(e=>t.affectsConfiguration(e))){let e=t.affectsConfiguration("workbench.experimental.share.enabled")&&this.configurationService.getValue("workbench.experimental.share.enabled"),i=t.affectsConfiguration("workbench.navigationControl.enabled")&&this.configurationService.getValue("workbench.navigationControl.enabled");if((e||i)&&!1===this.configurationService.getValue(O.P.COMMAND_CENTER))return void this.configurationService.updateValue(O.P.COMMAND_CENTER,!0);let s=t.affectsConfiguration(O.P.EDITOR_ACTIONS_LOCATION)&&this.configurationService.getValue(O.P.EDITOR_ACTIONS_LOCATION)===O.M.TITLEBAR,n=t.affectsConfiguration(O.P.COMMAND_CENTER)&&this.configurationService.getValue(O.P.COMMAND_CENTER),o=t.affectsConfiguration(O.P.LAYOUT_ACTIONS)&&this.configurationService.getValue(O.P.LAYOUT_ACTIONS);if((t.affectsConfiguration(O.P.ACTIVITY_BAR_LOCATION)&&[O.j.TOP,O.j.BOTTOM].includes(this.configurationService.getValue(O.P.ACTIVITY_BAR_LOCATION))||s||n||o)&&this.configurationService.getValue(V.ai.CUSTOM_TITLE_BAR_VISIBILITY)===V.$r.NEVER)return void this.configurationService.updateValue(V.ai.CUSTOM_TITLE_BAR_VISIBILITY,V.$r.AUTO);this.doUpdateLayoutConfiguration()}})),this._register((0,V.uE)(t=>this.onFullscreenChanged(t))),this._register(this.editorGroupService.mainPart.onDidAddGroup(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue(se.MAIN_EDITOR_CENTERED)))),this._register(this.editorGroupService.mainPart.onDidRemoveGroup(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue(se.MAIN_EDITOR_CENTERED)))),this._register(this.editorGroupService.mainPart.onDidChangeGroupMaximized(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue(se.MAIN_EDITOR_CENTERED)))),this._register((0,V.ox)(this.mainContainer,V.tx.SCROLL,()=>this.mainContainer.scrollTop=0)),(V.kj||V.xj||V.Dj)&&!(0,V.mi)(this.configurationService)&&this._register(this.titleService.onMenubarVisibilityChange(t=>this.onMenubarToggled(t))),this._register(this.themeService.onDidColorThemeChange(()=>this.updateWindowBorder())),this._register(this.hostService.onDidChangeFocus(t=>this.onWindowFocusChanged(t))),this._register(this.hostService.onDidChangeActiveWindow(()=>this.onActiveWindowChanged())),V.Dj&&"object"==typeof navigator.windowControlsOverlay&&this._register((0,V.ox)(navigator.windowControlsOverlay,"geometrychange",()=>this.onDidChangeWCO())),this._register(this.auxiliaryWindowService.onDidOpenAuxiliaryWindow(t=>{let{window:e,disposables:i}=t,s=e.window.vscodeWindowId;this.containerStylesLoaded.set(s,e.whenStylesHaveLoaded),e.whenStylesHaveLoaded.then(()=>this.containerStylesLoaded.delete(s)),i.add((0,V.zA)(()=>this.containerStylesLoaded.delete(s)));let n=i.add(new V.EA);this._onDidAddContainer.fire({container:e.container,disposables:n}),i.add(e.onDidLayout(t=>this.handleContainerDidLayout(e.container,t)))}))}onMenubarToggled(t){if(t!==this.state.runtime.menuBar.toggled){this.state.runtime.menuBar.toggled=t;let e=(0,V.li)(this.configurationService);(V.Dj&&"toggle"===e||this.state.runtime.mainWindowFullscreen&&("toggle"===e||"classic"===e))&&this.workbenchGrid.setViewVisible(this.titleBarPartView,(0,O.G)(this.configurationService,V.vE,this.state.runtime.menuBar.toggled)),this.handleContainerDidLayout(this.mainContainer,this._mainContainerDimension)}}handleContainerDidLayout(t,e){t===this.mainContainer&&this._onDidLayoutMainContainer.fire(e),(0,V.Jx)(t)&&this._onDidLayoutActiveContainer.fire(e),this._onDidLayoutContainer.fire({container:t,dimension:e})}onFullscreenChanged(t){t===V.vE.vscodeWindowId&&(this.state.runtime.mainWindowFullscreen=(0,V.iE)(V.vE),this.state.runtime.mainWindowFullscreen?this.mainContainer.classList.add(jt.FULLSCREEN):(this.mainContainer.classList.remove(jt.FULLSCREEN),this.stateModel.getRuntimeValue(se.ZEN_MODE_EXIT_INFO).transitionedToFullScreen&&this.isZenModeActive()&&this.toggleZenMode()),this.workbenchGrid.edgeSnapping=this.state.runtime.mainWindowFullscreen,this.workbenchGrid.setViewVisible(this.titleBarPartView,(0,O.G)(this.configurationService,V.vE,this.state.runtime.menuBar.toggled)),this.updateWindowBorder(!0))}onActiveWindowChanged(){let t=this.getActiveContainerId();this.state.runtime.activeContainerId!==t&&(this.state.runtime.activeContainerId=t,this.updateWindowBorder(),this._onDidChangeActiveContainer.fire())}onWindowFocusChanged(t){this.state.runtime.hasFocus!==t&&(this.state.runtime.hasFocus=t,this.updateWindowBorder())}getActiveContainerId(){let t=this.activeContainer;return(0,V.Bx)(t).vscodeWindowId}doUpdateLayoutConfiguration(t){this.updateCustomTitleBarVisibility(),this.updateMenubarVisibility(!!t),this.editorGroupService.whenRestored.then(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue(se.MAIN_EDITOR_CENTERED),t))}setSideBarPosition(t){let e=this.getPart(O.I.ACTIVITYBAR_PART),i=this.getPart(O.I.SIDEBAR_PART),s=this.getPart(O.I.AUXILIARYBAR_PART),n=t===O.L.LEFT?"left":"right",o=t===O.L.RIGHT?"left":"right",r=this.getPanelAlignment(),a=this.getPanelPosition();this.stateModel.setRuntimeValue(se.SIDEBAR_POSITON,t);let l=(0,V.$j)(e.getContainer()),h=(0,V.$j)(i.getContainer()),d=(0,V.$j)(s.getContainer());l.classList.remove(o),h.classList.remove(o),l.classList.add(n),h.classList.add(n),d.classList.remove(n),d.classList.add(o),e.updateStyles(),i.updateStyles(),s.updateStyles(),this.adjustPartPositions(t,r,a)}updateWindowBorder(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(V.Dj||V.kj||(V.kj||V.xj)&&(0,V.yi)(this.configurationService)||(0,V.mi)(this.configurationService))return;let e=this.themeService.getColorTheme(),i=e.getColor(N.qn),s=e.getColor(N.Jn),n=this.hasMainWindowBorder();for(let r of this.containers){let t=r===this.mainContainer,e=this.activeContainer===r,n=!1;if(!this.state.runtime.mainWindowFullscreen&&(i||s)){var o;n=!0;let t=e&&this.state.runtime.hasFocus?i:null!==s&&void 0!==s?s:i;r.style.setProperty("--window-border-color",null!==(o=null===t||void 0===t?void 0:t.toString())&&void 0!==o?o:"transparent")}t&&(this.state.runtime.mainWindowBorder=n),r.classList.toggle(jt.WINDOW_BORDER,n)}!t&&n!==this.hasMainWindowBorder()&&this.layout()}initLayoutState(t,e){var i;this._mainContainerDimension=(0,V.Dx)(this.parent,this.contextService.getWorkbenchState()===V.rs.EMPTY?Zt:Xt),this.stateModel=new ne(this.storageService,this.configurationService,this.contextService,this.environmentService),this.stateModel.load({mainContainerDimension:this._mainContainerDimension,resetLayout:!(null===(i=this.layoutOptions)||void 0===i||!i.resetLayout)}),this._register(this.stateModel.onDidChangeState(t=>{t.key===se.ACTIVITYBAR_HIDDEN&&this.setActivityBarHidden(t.value),t.key===se.STATUSBAR_HIDDEN&&this.setStatusBarHidden(t.value),t.key===se.SIDEBAR_POSITON&&this.setSideBarPosition(t.value),t.key===se.PANEL_POSITION&&this.setPanelPosition(t.value),t.key===se.PANEL_ALIGNMENT&&this.setPanelAlignment(t.value),this.doUpdateLayoutConfiguration()}));let s=this.getInitialEditorsState();if(s&&this.logService.trace("Initial editor state",s),this.state={initialization:{layout:{editors:null===s||void 0===s?void 0:s.layout},editor:{restoreEditors:this.shouldRestoreEditors(this.contextService,s),editorsToOpen:this.resolveEditorsToOpen(e,s)},views:{defaults:this.getDefaultLayoutViews(this.environmentService,this.storageService),containerToRestore:{}}},runtime:{activeContainerId:this.getActiveContainerId(),mainWindowFullscreen:(0,V.iE)(V.vE),hasFocus:this.hostService.hasFocus,maximized:new Set,mainWindowBorder:!1,menuBar:{toggled:!1},zenMode:{transitionDisposables:new V.wA}}},this.isVisible(O.I.SIDEBAR_PART)){var n,o,r,a;let e=this.storageService.get(W.c.activeViewletSettingsKey,V.Go.WORKSPACE,null===(n=this.viewDescriptorService.getDefaultViewContainer(x.Sf.Sidebar))||void 0===n?void 0:n.id);!this.environmentService.isBuilt||t.startupKind===F.F.ReloadedWindow||this.environmentService.isExtensionDevelopment&&!this.environmentService.extensionTestsLocationURI||e!==(null===(o=this.viewDescriptorService.getDefaultViewContainer(x.Sf.Sidebar))||void 0===o?void 0:o.id)&&e!==(null===(r=this.viewDescriptorService.getDefaultViewContainer(x.Sf.AuxiliaryBar))||void 0===r?void 0:r.id)&&(e=null===(a=this.viewDescriptorService.getDefaultViewContainer(x.Sf.Sidebar))||void 0===a?void 0:a.id),e?this.state.initialization.views.containerToRestore.sideBar=e:this.stateModel.setRuntimeValue(se.SIDEBAR_HIDDEN,!0)}if(this.isVisible(O.I.PANEL_PART)){var l;let t=this.storageService.get(W.l.activePanelSettingsKey,V.Go.WORKSPACE,null===(l=this.viewDescriptorService.getDefaultViewContainer(x.Sf.Panel))||void 0===l?void 0:l.id);t?this.state.initialization.views.containerToRestore.panel=t:this.stateModel.setRuntimeValue(se.PANEL_HIDDEN,!0)}if(this.isVisible(O.I.AUXILIARYBAR_PART)){var h;let t=this.storageService.get(W._.activeViewSettingsKey,V.Go.WORKSPACE,null===(h=this.viewDescriptorService.getDefaultViewContainer(x.Sf.AuxiliaryBar))||void 0===h?void 0:h.id);t?this.state.initialization.views.containerToRestore.auxiliaryBar=t:this.stateModel.setRuntimeValue(se.AUXILIARYBAR_HIDDEN,!0)}this.updateWindowBorder(!0)}getDefaultLayoutViews(t,e){var i;let s=null===(i=t.options)||void 0===i?void 0:i.defaultLayout;if(!s||!s.force&&!e.isNew(V.Go.WORKSPACE))return;let{views:n}=s;return null!==n&&void 0!==n&&n.length?n.map(t=>t.id):void 0}shouldRestoreEditors(t,e){return!(0,V.fs)(t.getWorkspace())&&("preserve"===this.configurationService.getValue("window.restoreWindows")||void 0===e)}willRestoreEditors(){return this.state.initialization.editor.restoreEditors}async resolveEditorsToOpen(t,e){if(e){let s=(0,V.AM)(await(0,F._n)(e.filesToMerge,t,this.logService));if(4===s.length&&(0,F.un)(s[0])&&(0,F.un)(s[1])&&(0,F.un)(s[2])&&(0,F.un)(s[3]))return[{editor:{input1:{resource:s[0].resource},input2:{resource:s[1].resource},base:{resource:s[2].resource},result:{resource:s[3].resource},options:{pinned:!0}}}];let n=(0,V.AM)(await(0,F._n)(e.filesToDiff,t,this.logService));if(2===n.length)return[{editor:{original:{resource:n[0].resource},modified:{resource:n[1].resource},options:{pinned:!0}}}];let o=[],r=await(0,F._n)(e.filesToOpenOrCreate,t,this.logService);for(let t=0;t<r.length;t++){var i;let s=r[t];s&&o.push({editor:s,viewColumn:null===(i=e.filesToOpenOrCreate)||void 0===i?void 0:i[t].viewColumn})}return o}return this.contextService.getWorkbenchState()===V.rs.EMPTY&&"newUntitledFile"===this.configurationService.getValue("workbench.startupEditor")?this.editorGroupService.hasRestorableState?[]:[{editor:{resource:void 0}}]:[]}get openedDefaultEditors(){return this._openedDefaultEditors}getInitialEditorsState(){var t,e,i,s,n;let o=null===(t=this.environmentService.options)||void 0===t?void 0:t.defaultLayout;if((null!==o&&void 0!==o&&null!==(e=o.editors)&&void 0!==e&&e.length||null!==o&&void 0!==o&&null!==(i=o.layout)&&void 0!==i&&i.editors)&&(o.force||this.storageService.isNew(V.Go.WORKSPACE)))return this._openedDefaultEditors=!0,{layout:null===(s=o.layout)||void 0===s?void 0:s.editors,filesToOpenOrCreate:null===o||void 0===o||null===(n=o.editors)||void 0===n?void 0:n.map(t=>({viewColumn:t.viewColumn,fileUri:V.wD.revive(t.uri),openOnlyIfExists:t.openOnlyIfExists,options:t.options}))};let{filesToOpenOrCreate:r,filesToDiff:a,filesToMerge:l}=this.environmentService;return r||a||l?{filesToOpenOrCreate:r,filesToDiff:a,filesToMerge:l}:void 0}isRestored(){return this.restored}restoreParts(t){let e=[],i=[];e.push((async(e,s,n,o,r)=>{(0,V.bc)("code/willRestoreEditors"),await this.editorGroupService.whenReady,(0,V.bc)("code/restoreEditors/editorGroupsReady"),(null===(e=this.state.initialization.layout)||void 0===e?void 0:e.editors)&&this.editorGroupService.mainPart.applyLayout(this.state.initialization.layout.editors);let a,l=await this.state.initialization.editor.editorsToOpen;if((0,V.bc)("code/restoreEditors/editorsToOpenResolved"),l.length){let t=this.editorGroupService.mainPart.getGroups(F.X.GRID_APPEARANCE),e=new Map;for(let i of l){var h;let s=t[(null!==(h=i.viewColumn)&&void 0!==h?h:1)-1],n=e.get(s.id);n||(n=new Set,e.set(s.id,n)),n.add(i.editor)}a=Promise.all(Array.from(e).map(async t=>{let[e,i]=t;try{await this.editorService.openEditors(Array.from(i),e,{validateTrust:!0})}catch(e){this.logService.error(e)}}))}let d=t.invokeFunction(null!==(s=null===(n=this.layoutOptions)||void 0===n?void 0:n.customEditorRestore)&&void 0!==s?s:async()=>{},!(null===(o=this.state.initialization.layout)||void 0===o||!o.editors));i.push(Promise.all([null===(r=a)||void 0===r?void 0:r.finally(()=>(0,V.bc)("code/restoreEditors/editorsOpened")),null===d||void 0===d?void 0:d.finally(()=>(0,V.bc)("code/restoreEditors/customEditorsOpened")),this.editorGroupService.whenRestored.finally(()=>(0,V.bc)("code/restoreEditors/editorGroupsRestored"))]).finally(()=>{(0,V.bc)("code/didRestoreEditors")}))})());let s=(async t=>{if(null!==(t=this.state.initialization.views.defaults)&&void 0!==t&&t.length){(0,V.bc)("code/willOpenDefaultViews");let t=[],e=e=>{let i=this.viewDescriptorService.getViewLocationById(e.id);if(null!==i){let o=this.viewDescriptorService.getViewContainerByViewId(e.id);if(o){var s,n;e.order>=(null!==(s=null===t||void 0===t||null===(n=t[i])||void 0===n?void 0:n.order)&&void 0!==s?s:0)&&(t[i]={id:o.id,order:e.order});let r=this.viewDescriptorService.getViewContainerModel(o);return r.setCollapsed(e.id,!1),r.setVisible(e.id,!0),!0}}return!1},i=[...this.state.initialization.views.defaults].reverse().map((t,e)=>({id:t,order:e})),s=i.length;for(;s;)s--,e(i[s])&&i.splice(s,1);if(i.length){await this.extensionService.whenInstalledExtensionsRegistered();let t=i.length;for(;t;)t--,e(i[t])&&i.splice(t,1)}t[x.Sf.Sidebar]&&(this.state.initialization.views.containerToRestore.sideBar=t[x.Sf.Sidebar].id),t[x.Sf.Panel]&&(this.state.initialization.views.containerToRestore.panel=t[x.Sf.Panel].id),t[x.Sf.AuxiliaryBar]&&(this.state.initialization.views.containerToRestore.auxiliaryBar=t[x.Sf.AuxiliaryBar].id),(0,V.bc)("code/didOpenDefaultViews")}})();e.push(s),e.push((async()=>{await s,this.state.initialization.views.containerToRestore.sideBar&&((0,V.bc)("code/willRestoreViewlet"),await this.openViewContainer(x.Sf.Sidebar,this.state.initialization.views.containerToRestore.sideBar),(0,V.bc)("code/didRestoreViewlet"))})()),e.push((async()=>{await s,this.state.initialization.views.containerToRestore.panel&&((0,V.bc)("code/willRestorePanel"),await this.openViewContainer(x.Sf.Panel,this.state.initialization.views.containerToRestore.panel),(0,V.bc)("code/didRestorePanel"))})()),e.push((async()=>{await s,this.state.initialization.views.containerToRestore.auxiliaryBar&&((0,V.bc)("code/willRestoreAuxiliaryBar"),await this.openViewContainer(x.Sf.AuxiliaryBar,this.state.initialization.views.containerToRestore.auxiliaryBar),(0,V.bc)("code/didRestoreAuxiliaryBar"))})());let n=this.isZenModeActive(),o=Qt(this.configurationService).restore;n&&(this.setZenModeActive(!o),this.toggleZenMode(!1,!0)),this.stateModel.getRuntimeValue(se.MAIN_EDITOR_CENTERED)&&this.centerMainEditorLayout(!0,!0),V.yw.settled(e).finally(()=>{(0,V.Tx)()===V.vE.document.body&&(this.isPanelMaximized()||this.isAuxiliaryBarMaximized())&&this.focus(),this.whenReadyPromise.complete(),V.yw.settled(i).finally(()=>{this.restored=!0,this.whenRestoredPromise.complete()})})}async openViewContainer(t,e,i){var s;let n=await this.paneCompositeService.openPaneComposite(e,t,i);n||(n=await this.paneCompositeService.openPaneComposite(null===(s=this.viewDescriptorService.getDefaultViewContainer(t))||void 0===s?void 0:s.id,t,i),!n&&await this.paneCompositeService.openPaneComposite(this.paneCompositeService.getVisiblePaneCompositeIds(t).at(0),t,i))}registerPart(t){let e=t.getId();return this.parts.set(e,t),(0,V.zA)(()=>this.parts.delete(e))}getPart(t){let e=this.parts.get(t);if(!e)throw Error("Unknown part ".concat(t));return e}registerNotifications(t){this._register(t.onDidChangeNotificationsVisibility(t=>this._onDidChangeNotificationsVisibility.fire(t)))}hasFocus(t){let e=this.getContainer((0,V.Ex)(),t);if(!e)return!1;let i=(0,V.Tx)();return!!i&&(0,V.Qx)(i,e)}_getFocusedPart(){for(let t of this.parts.keys())if(this.hasFocus(t))return t}focusPart(t){var e,i,s,n;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:V.vE,r=null!==(e=this.getContainer(o,t))&&void 0!==e?e:this.mainContainer;switch(t){case O.I.EDITOR_PART:this.editorGroupService.getPart(r).activeGroup.focus();break;case O.I.PANEL_PART:null===(i=this.paneCompositeService.getActivePaneComposite(x.Sf.Panel))||void 0===i||i.focus();break;case O.I.SIDEBAR_PART:null===(s=this.paneCompositeService.getActivePaneComposite(x.Sf.Sidebar))||void 0===s||s.focus();break;case O.I.AUXILIARYBAR_PART:null===(n=this.paneCompositeService.getActivePaneComposite(x.Sf.AuxiliaryBar))||void 0===n||n.focus();break;case O.I.ACTIVITYBAR_PART:this.getPart(O.I.SIDEBAR_PART).focusActivityBar();break;case O.I.STATUSBAR_PART:this.statusBarService.getPart(r).focus();break;default:null===r||void 0===r||r.focus()}}getContainer(t,e){if(void 0===e)return this.getContainerFromDocument(t.document);if(t===V.vE)return this.getPart(e).getContainer();let i;return e===O.I.EDITOR_PART?i=this.editorGroupService.getPart(this.getContainerFromDocument(t.document)):e===O.I.STATUSBAR_PART?i=this.statusBarService.getPart(this.getContainerFromDocument(t.document)):e===O.I.TITLEBAR_PART&&(i=this.titleService.getPart(this.getContainerFromDocument(t.document))),i instanceof L.pt?i.getContainer():void 0}isVisible(t){if((arguments.length>1&&void 0!==arguments[1]?arguments[1]:V.vE)!==V.vE&&t===O.I.EDITOR_PART)return!0;switch(t){case O.I.TITLEBAR_PART:return this.initialized?this.workbenchGrid.isViewVisible(this.titleBarPartView):(0,O.G)(this.configurationService,V.vE,this.state.runtime.menuBar.toggled);case O.I.SIDEBAR_PART:return!this.stateModel.getRuntimeValue(se.SIDEBAR_HIDDEN);case O.I.PANEL_PART:return!this.stateModel.getRuntimeValue(se.PANEL_HIDDEN);case O.I.AUXILIARYBAR_PART:return!this.stateModel.getRuntimeValue(se.AUXILIARYBAR_HIDDEN);case O.I.STATUSBAR_PART:return!this.stateModel.getRuntimeValue(se.STATUSBAR_HIDDEN);case O.I.ACTIVITYBAR_PART:return!this.stateModel.getRuntimeValue(se.ACTIVITYBAR_HIDDEN);case O.I.EDITOR_PART:return!this.stateModel.getRuntimeValue(se.EDITOR_HIDDEN);case O.I.BANNER_PART:return!!this.initialized&&this.workbenchGrid.isViewVisible(this.bannerPartView);default:return!1}}shouldShowBannerFirst(){return V.Dj&&!(0,V.sE)()}focus(){this.isPanelMaximized()&&this.mainContainer===this.activeContainer?this.focusPart(O.I.PANEL_PART):this.isAuxiliaryBarMaximized()&&this.mainContainer===this.activeContainer?this.focusPart(O.I.AUXILIARYBAR_PART):this.focusPart(O.I.EDITOR_PART,(0,V.Bx)(this.activeContainer))}focusPanelOrEditor(){let t=this.paneCompositeService.getActivePaneComposite(x.Sf.Panel);!this.hasFocus(O.I.PANEL_PART)&&this.isVisible(O.I.EDITOR_PART)||!t?this.focus():t.focus()}getMaximumEditorDimensions(t){let e=(0,V.Bx)(t),i=this.getContainerDimension(t);if(t===this.mainContainer){let t=(0,O.B)(this.getPanelPosition()),s=(this.isVisible(O.I.ACTIVITYBAR_PART)?this.activityBarPartView.minimumWidth:0)+(this.isVisible(O.I.SIDEBAR_PART)?this.sideBarPartView.minimumWidth:0)+(this.isVisible(O.I.PANEL_PART)&&!t?this.panelPartView.minimumWidth:0)+(this.isVisible(O.I.AUXILIARYBAR_PART)?this.auxiliaryBarPartView.minimumWidth:0),n=(this.isVisible(O.I.TITLEBAR_PART,e)?this.titleBarPartView.minimumHeight:0)+(this.isVisible(O.I.STATUSBAR_PART,e)?this.statusBarPartView.minimumHeight:0)+(this.isVisible(O.I.PANEL_PART)&&t?this.panelPartView.minimumHeight:0);return{width:i.width-s,height:i.height-n}}{let t=(this.isVisible(O.I.TITLEBAR_PART,e)?this.titleBarPartView.minimumHeight:0)+(this.isVisible(O.I.STATUSBAR_PART,e)?this.statusBarPartView.minimumHeight:0);return{width:i.width,height:i.height-t}}}isZenModeActive(){return this.stateModel.getRuntimeValue(se.ZEN_MODE_ACTIVE)}setZenModeActive(t){this.stateModel.setRuntimeValue(se.ZEN_MODE_ACTIVE,t)}toggleZenMode(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this._getFocusedPart();this.setZenModeActive(!this.isZenModeActive()),this.state.runtime.zenMode.transitionDisposables.clearAndDisposeAll();let s=t=>{for(let e of this.mainPartEditorService.visibleTextEditorControls){if(!t&&(0,M.s)(e)&&e.hasModel()){let i=e.getModel();t=this.configurationService.getValue("editor.lineNumbers",{resource:i.uri,overrideIdentifier:i.getLanguageId()})}t||(t=this.configurationService.getValue("editor.lineNumbers")),e.updateOptions({lineNumbers:t})}},n=!1,o=Qt(this.configurationService),r=this.stateModel.getRuntimeValue(se.ZEN_MODE_EXIT_INFO);this.isZenModeActive()?(n=!this.state.runtime.mainWindowFullscreen&&o.fullScreen&&!V.bj,e||(r.transitionedToFullScreen=n,r.transitionedToCenteredEditorLayout=!this.isMainEditorLayoutCentered()&&o.centerLayout,r.handleNotificationsDoNotDisturbMode=this.notificationService.getFilter()===V.Hd.OFF,r.wasVisible.sideBar=this.isVisible(O.I.SIDEBAR_PART),r.wasVisible.panel=this.isVisible(O.I.PANEL_PART),r.wasVisible.auxiliaryBar=this.isVisible(O.I.AUXILIARYBAR_PART),this.stateModel.setRuntimeValue(se.ZEN_MODE_EXIT_INFO,r)),this.setPanelHidden(!0,!0),this.setAuxiliaryBarHidden(!0,!0),this.setSideBarHidden(!0),o.hideActivityBar&&this.setActivityBarHidden(!0),o.hideStatusBar&&this.setStatusBarHidden(!0),o.hideLineNumbers&&(s("off"),this.state.runtime.zenMode.transitionDisposables.set(O.R.HIDE_LINENUMBERS,this.mainPartEditorService.onDidVisibleEditorsChange(()=>s("off")))),o.showTabs!==this.editorGroupService.partOptions.showTabs&&this.state.runtime.zenMode.transitionDisposables.set(O.R.SHOW_TABS,this.editorGroupService.mainPart.enforcePartOptions({showTabs:o.showTabs})),o.silentNotifications&&r.handleNotificationsDoNotDisturbMode&&this.notificationService.setFilter(V.Hd.ERROR),o.centerLayout&&this.centerMainEditorLayout(!0,!0),this.state.runtime.zenMode.transitionDisposables.set("configurationChange",this.configurationService.onDidChangeConfiguration(t=>{if(t.affectsConfiguration(O.R.HIDE_ACTIVITYBAR)||t.affectsConfiguration(O.P.ACTIVITY_BAR_LOCATION)){let t=this.configurationService.getValue(O.R.HIDE_ACTIVITYBAR),e=this.configurationService.getValue(O.P.ACTIVITY_BAR_LOCATION);this.setActivityBarHidden(!!t||(e===O.j.TOP||e===O.j.BOTTOM))}if(t.affectsConfiguration(O.R.HIDE_STATUSBAR)){let t=this.configurationService.getValue(O.R.HIDE_STATUSBAR);this.setStatusBarHidden(t)}if(t.affectsConfiguration(O.R.CENTER_LAYOUT)){let t=this.configurationService.getValue(O.R.CENTER_LAYOUT);this.centerMainEditorLayout(t,!0)}if(t.affectsConfiguration(O.R.SHOW_TABS)){var e;let t=null!==(e=this.configurationService.getValue(O.R.SHOW_TABS))&&void 0!==e?e:"multiple";this.state.runtime.zenMode.transitionDisposables.set(O.R.SHOW_TABS,this.editorGroupService.mainPart.enforcePartOptions({showTabs:t}))}if(t.affectsConfiguration(O.R.SILENT_NOTIFICATIONS)){let t=!!this.configurationService.getValue(O.R.SILENT_NOTIFICATIONS);r.handleNotificationsDoNotDisturbMode&&this.notificationService.setFilter(t?V.Hd.ERROR:V.Hd.OFF)}if(t.affectsConfiguration(O.R.HIDE_LINENUMBERS)){let t=this.configurationService.getValue(O.R.HIDE_LINENUMBERS)?"off":void 0;s(t),this.state.runtime.zenMode.transitionDisposables.set(O.R.HIDE_LINENUMBERS,this.mainPartEditorService.onDidVisibleEditorsChange(()=>s(t)))}}))):(r.wasVisible.panel&&this.setPanelHidden(!1,!0),r.wasVisible.auxiliaryBar&&this.setAuxiliaryBarHidden(!1,!0),r.wasVisible.sideBar&&this.setSideBarHidden(!1),this.stateModel.getRuntimeValue(se.ACTIVITYBAR_HIDDEN,!0)||this.setActivityBarHidden(!1),this.stateModel.getRuntimeValue(se.STATUSBAR_HIDDEN,!0)||this.setStatusBarHidden(!1),r.transitionedToCenteredEditorLayout&&this.centerMainEditorLayout(!1,!0),r.handleNotificationsDoNotDisturbMode&&this.notificationService.setFilter(V.Hd.OFF),s(),n=r.transitionedToFullScreen&&this.state.runtime.mainWindowFullscreen),t||this.layout(),n&&this.hostService.toggleFullScreen(V.vE),i&&this.isVisible(i,(0,V.Bx)(this.activeContainer))?(0,O.V)(i)?this.focusPart(i,(0,V.Bx)(this.activeContainer)):this.focusPart(i):this.focus(),this._onDidChangeZenMode.fire(this.isZenModeActive())}setStatusBarHidden(t){this.stateModel.setRuntimeValue(se.STATUSBAR_HIDDEN,t),t?this.mainContainer.classList.add(jt.STATUSBAR_HIDDEN):this.mainContainer.classList.remove(jt.STATUSBAR_HIDDEN),this.workbenchGrid.setViewVisible(this.statusBarPartView,!t)}createWorkbenchLayout(){let t=this.getPart(O.I.TITLEBAR_PART),e=this.getPart(O.I.BANNER_PART),i=this.getPart(O.I.EDITOR_PART),s=this.getPart(O.I.ACTIVITYBAR_PART),n=this.getPart(O.I.PANEL_PART),o=this.getPart(O.I.AUXILIARYBAR_PART),r=this.getPart(O.I.SIDEBAR_PART),a=this.getPart(O.I.STATUSBAR_PART);this.titleBarPartView=t,this.bannerPartView=e,this.sideBarPartView=r,this.activityBarPartView=s,this.editorPartView=i,this.panelPartView=n,this.auxiliaryBarPartView=o,this.statusBarPartView=a;let l={[O.I.ACTIVITYBAR_PART]:this.activityBarPartView,[O.I.BANNER_PART]:this.bannerPartView,[O.I.TITLEBAR_PART]:this.titleBarPartView,[O.I.EDITOR_PART]:this.editorPartView,[O.I.PANEL_PART]:this.panelPartView,[O.I.SIDEBAR_PART]:this.sideBarPartView,[O.I.STATUSBAR_PART]:this.statusBarPartView,[O.I.AUXILIARYBAR_PART]:this.auxiliaryBarPartView},h=W.h.deserialize(this.createGridDescriptor(),{fromJSON:t=>{let{type:e}=t;return l[e]}},{proportionalLayout:!1});this.mainContainer.prepend(h.element),this.mainContainer.setAttribute("role","application"),this.workbenchGrid=h,this.workbenchGrid.edgeSnapping=this.state.runtime.mainWindowFullscreen;for(let d of[t,i,s,n,r,a,o,e])this._register(d.onDidVisibilityChange(t=>{this.inMaximizedAuxiliaryBarTransition||(d===r?this.setSideBarHidden(!t):d===n&&this.stateModel.getRuntimeValue(se.PANEL_HIDDEN)===t?this.setPanelHidden(!t,!0):d===o?this.setAuxiliaryBarHidden(!t,!0):d===i&&this.setEditorHidden(!t)),this._onDidChangePartVisibility.fire(),this.handleContainerDidLayout(this.mainContainer,this._mainContainerDimension)}));this._register(this.storageService.onWillSaveState(()=>{let t=this.stateModel.getRuntimeValue(se.SIDEBAR_HIDDEN)?this.workbenchGrid.getViewCachedVisibleSize(this.sideBarPartView):this.workbenchGrid.getViewSize(this.sideBarPartView).width;this.stateModel.setInitializationValue(se.SIDEBAR_SIZE,t);let e=this.stateModel.getRuntimeValue(se.PANEL_HIDDEN)?this.workbenchGrid.getViewCachedVisibleSize(this.panelPartView):(0,O.B)(this.stateModel.getRuntimeValue(se.PANEL_POSITION))?this.workbenchGrid.getViewSize(this.panelPartView).height:this.workbenchGrid.getViewSize(this.panelPartView).width;this.stateModel.setInitializationValue(se.PANEL_SIZE,e);let i=this.stateModel.getRuntimeValue(se.AUXILIARYBAR_HIDDEN)?this.workbenchGrid.getViewCachedVisibleSize(this.auxiliaryBarPartView):this.workbenchGrid.getViewSize(this.auxiliaryBarPartView).width;this.stateModel.setInitializationValue(se.AUXILIARYBAR_SIZE,i),this.stateModel.save(!0,!0)})),this._register(V.dA.any(this.paneCompositeService.onDidPaneCompositeOpen,this.paneCompositeService.onDidPaneCompositeClose)(()=>{this.stateModel.setInitializationValue(se.AUXILIARYBAR_EMPTY,0===this.paneCompositeService.getPaneCompositeIds(x.Sf.AuxiliaryBar).length)}))}layout(){if(!this.disposed){let t=(0,V.Nx)(V.vE.document);this._mainContainerDimension=(0,V.Dx)(this.state.runtime.mainWindowFullscreen&&this.mainContainer===t?V.vE.document.body:this.parent,this.contextService.getWorkbenchState()===V.rs.EMPTY?Zt:Xt),this.logService.trace("Layout#layout, height: ".concat(this._mainContainerDimension.height,", width: ").concat(this._mainContainerDimension.width)),(0,V.OS)(this.mainContainer,this._mainContainerDimension.width,this._mainContainerDimension.height),this.workbenchGrid.layout(this._mainContainerDimension.width,this._mainContainerDimension.height),this.initialized=!0,this.handleContainerDidLayout(this.mainContainer,this._mainContainerDimension)}}isMainEditorLayoutCentered(){return this.stateModel.getRuntimeValue(se.MAIN_EDITOR_CENTERED)}centerMainEditorLayout(t,e){this.stateModel.setRuntimeValue(se.MAIN_EDITOR_CENTERED,t);let i=(0,V.AM)(this.editorGroupService.mainPart.groups.map(t=>t.activeEditor)).some(t=>t instanceof F.nt?this.configurationService.getValue("diffEditor.renderSideBySide"):!(null===t||void 0===t||!t.hasCapability(F.zt.MultipleEditors))),s=this.editorGroupService.getLayout(),n=!1;n=s.orientation===F.J.HORIZONTAL?s.groups.length>1:s.groups.some(t=>t.groups&&t.groups.length>1),this.configurationService.getValue("workbench.editor.centeredLayoutAutoResize")&&(n&&!this.editorGroupService.mainPart.hasMaximizedGroup()||i)&&(t=!1),this.editorGroupService.mainPart.isLayoutCentered()!==t&&(this.editorGroupService.mainPart.centerLayout(t),e||this.layout()),this._onDidChangeMainEditorCenteredLayout.fire(this.stateModel.getRuntimeValue(se.MAIN_EDITOR_CENTERED))}getSize(t){return this.workbenchGrid.getViewSize(this.getPart(t))}setSize(t,e){this.workbenchGrid.resizeView(this.getPart(t),e)}resizePart(t,e,i){let s,n=Math.sign(e)*(0,V.px)((0,V.Ex)(),Math.abs(e)),o=Math.sign(i)*(0,V.px)((0,V.Ex)(),Math.abs(i));switch(t){case O.I.SIDEBAR_PART:s=this.workbenchGrid.getViewSize(this.sideBarPartView),this.workbenchGrid.resizeView(this.sideBarPartView,{width:s.width+n,height:s.height});break;case O.I.PANEL_PART:s=this.workbenchGrid.getViewSize(this.panelPartView),this.workbenchGrid.resizeView(this.panelPartView,{width:s.width+((0,O.B)(this.getPanelPosition())?0:n),height:s.height+((0,O.B)(this.getPanelPosition())?o:0)});break;case O.I.AUXILIARYBAR_PART:s=this.workbenchGrid.getViewSize(this.auxiliaryBarPartView),this.workbenchGrid.resizeView(this.auxiliaryBarPartView,{width:s.width+n,height:s.height});break;case O.I.EDITOR_PART:if(s=this.workbenchGrid.getViewSize(this.editorPartView),1===this.editorGroupService.mainPart.count)this.workbenchGrid.resizeView(this.editorPartView,{width:s.width+n,height:s.height+o});else{let t=this.editorGroupService.mainPart.activeGroup,{width:e,height:i}=this.editorGroupService.mainPart.getSize(t);this.editorGroupService.mainPart.setSize(t,{width:e+n,height:i+o});let{width:r,height:a}=this.editorGroupService.mainPart.getSize(t);(o&&i===a||n&&e===r)&&this.workbenchGrid.resizeView(this.editorPartView,{width:s.width+(n&&e===r?n:0),height:s.height+(o&&i===a?o:0)})}break;default:return}}setActivityBarHidden(t){this.stateModel.setRuntimeValue(se.ACTIVITYBAR_HIDDEN,t),this.workbenchGrid.setViewVisible(this.activityBarPartView,!t)}setBannerHidden(t){this.workbenchGrid.setViewVisible(this.bannerPartView,!t)}setEditorHidden(t){!t&&this.setAuxiliaryBarMaximized(!1)&&this.isVisible(O.I.EDITOR_PART)||(this.stateModel.setRuntimeValue(se.EDITOR_HIDDEN,t),t?this.mainContainer.classList.add(jt.MAIN_EDITOR_AREA_HIDDEN):this.mainContainer.classList.remove(jt.MAIN_EDITOR_AREA_HIDDEN),this.workbenchGrid.setViewVisible(this.editorPartView,!t),t&&!this.isVisible(O.I.PANEL_PART)&&!this.isAuxiliaryBarMaximized()&&this.setPanelHidden(!1,!0))}getLayoutClasses(){return(0,V.AM)([this.isVisible(O.I.SIDEBAR_PART)?void 0:jt.SIDEBAR_HIDDEN,this.isVisible(O.I.EDITOR_PART,V.vE)?void 0:jt.MAIN_EDITOR_AREA_HIDDEN,this.isVisible(O.I.PANEL_PART)?void 0:jt.PANEL_HIDDEN,this.isVisible(O.I.AUXILIARYBAR_PART)?void 0:jt.AUXILIARYBAR_HIDDEN,this.isVisible(O.I.STATUSBAR_PART)?void 0:jt.STATUSBAR_HIDDEN,this.state.runtime.mainWindowFullscreen?jt.FULLSCREEN:void 0])}setSideBarHidden(t){if(t||!this.setAuxiliaryBarMaximized(!1)||!this.isVisible(O.I.SIDEBAR_PART))if(this.stateModel.setRuntimeValue(se.SIDEBAR_HIDDEN,t),t?this.mainContainer.classList.add(jt.SIDEBAR_HIDDEN):this.mainContainer.classList.remove(jt.SIDEBAR_HIDDEN),this.workbenchGrid.setViewVisible(this.sideBarPartView,!t),t&&this.paneCompositeService.getActivePaneComposite(x.Sf.Sidebar))this.paneCompositeService.hideActivePaneComposite(x.Sf.Sidebar),this.isAuxiliaryBarMaximized()||this.focusPanelOrEditor();else if(!t&&!this.paneCompositeService.getActivePaneComposite(x.Sf.Sidebar)){let t=this.paneCompositeService.getLastActivePaneCompositeId(x.Sf.Sidebar);t&&this.openViewContainer(x.Sf.Sidebar,t)}}hasViews(t){let e=this.viewDescriptorService.getViewContainerById(t);if(!e)return!1;let i=this.viewDescriptorService.getViewContainerModel(e);return!!i&&i.activeViewDescriptors.length>=1}adjustPartPositions(t,e,i){var s,n,o,r;let a=!(0,O.B)(i),l=a||!("center"===e||t===O.L.LEFT&&"right"===e||t===O.L.RIGHT&&"left"===e),h=a||!("center"===e||t===O.L.RIGHT&&"right"===e||t===O.L.LEFT&&"left"===e),d=this.isVisible(O.I.PANEL_PART)?this.workbenchGrid.getViewSize(this.panelPartView).width:W.g.Invisible(null!==(s=this.workbenchGrid.getViewCachedVisibleSize(this.panelPartView))&&void 0!==s?s:this.panelPartView.minimumWidth),c=this.isVisible(O.I.PANEL_PART)?this.workbenchGrid.getViewSize(this.panelPartView).height:W.g.Invisible(null!==(n=this.workbenchGrid.getViewCachedVisibleSize(this.panelPartView))&&void 0!==n?n:this.panelPartView.minimumHeight),u=this.isVisible(O.I.SIDEBAR_PART)?this.workbenchGrid.getViewSize(this.sideBarPartView).width:W.g.Invisible(null!==(o=this.workbenchGrid.getViewCachedVisibleSize(this.sideBarPartView))&&void 0!==o?o:this.sideBarPartView.minimumWidth),g=this.isVisible(O.I.AUXILIARYBAR_PART)?this.workbenchGrid.getViewSize(this.auxiliaryBarPartView).width:W.g.Invisible(null!==(r=this.workbenchGrid.getViewCachedVisibleSize(this.auxiliaryBarPartView))&&void 0!==r?r:this.auxiliaryBarPartView.minimumWidth),m=[O.I.PANEL_PART,O.I.SIDEBAR_PART,O.I.AUXILIARYBAR_PART].find(t=>this.hasFocus(t));t===O.L.LEFT?(this.workbenchGrid.moveViewTo(this.activityBarPartView,[2,0]),this.workbenchGrid.moveView(this.sideBarPartView,u,l?this.editorPartView:this.activityBarPartView,l?W.m.Left:W.m.Right),h?this.workbenchGrid.moveView(this.auxiliaryBarPartView,g,this.editorPartView,W.m.Right):this.workbenchGrid.moveViewTo(this.auxiliaryBarPartView,[2,-1])):(this.workbenchGrid.moveViewTo(this.activityBarPartView,[2,-1]),this.workbenchGrid.moveView(this.sideBarPartView,u,l?this.editorPartView:this.activityBarPartView,l?W.m.Right:W.m.Left),h?this.workbenchGrid.moveView(this.auxiliaryBarPartView,g,this.editorPartView,W.m.Left):this.workbenchGrid.moveViewTo(this.auxiliaryBarPartView,[2,0])),m&&this.focusPart(m),a&&(this.workbenchGrid.moveView(this.panelPartView,d,this.editorPartView,i===O.L.LEFT?W.m.Left:W.m.Right),this.workbenchGrid.resizeView(this.panelPartView,{height:c,width:d})),this.isVisible(O.I.SIDEBAR_PART)&&this.workbenchGrid.resizeView(this.sideBarPartView,{height:this.workbenchGrid.getViewSize(this.sideBarPartView).height,width:u}),this.isVisible(O.I.AUXILIARYBAR_PART)&&this.workbenchGrid.resizeView(this.auxiliaryBarPartView,{height:this.workbenchGrid.getViewSize(this.auxiliaryBarPartView).height,width:g})}setPanelAlignment(t){(0,O.B)(this.getPanelPosition())||this.setPanelPosition(O.L.BOTTOM),"center"!==t&&this.isPanelMaximized()&&this.toggleMaximizedPanel(),this.stateModel.setRuntimeValue(se.PANEL_ALIGNMENT,t),this.adjustPartPositions(this.getSideBarPosition(),t,this.getPanelPosition()),this._onDidChangePanelAlignment.fire(t)}setPanelHidden(t,e){if(!this.workbenchGrid||!t&&this.setAuxiliaryBarMaximized(!1)&&this.isVisible(O.I.PANEL_PART))return;let i=!this.isVisible(O.I.PANEL_PART),s=this.isPanelMaximized();this.stateModel.setRuntimeValue(se.PANEL_HIDDEN,t);let n=this.panelOpensMaximized();t?this.mainContainer.classList.add(jt.PANEL_HIDDEN):this.mainContainer.classList.remove(jt.PANEL_HIDDEN),t&&s&&this.toggleMaximizedPanel(),this.workbenchGrid.setViewVisible(this.panelPartView,!t);let o=!1;if(t&&this.paneCompositeService.getActivePaneComposite(x.Sf.Panel))this.paneCompositeService.hideActivePaneComposite(x.Sf.Panel),!V.bj&&!this.isAuxiliaryBarMaximized()&&(o=!0);else if(!t&&!this.paneCompositeService.getActivePaneComposite(x.Sf.Panel)){var r;let t=this.paneCompositeService.getLastActivePaneCompositeId(x.Sf.Panel);(!t||!this.hasViews(t))&&(t=null===(r=this.viewDescriptorService.getViewContainersByLocation(x.Sf.Panel).find(t=>this.hasViews(t.id)))||void 0===r?void 0:r.id),t&&this.openViewContainer(x.Sf.Panel,t,!e)}i!==t&&(t?this.stateModel.setRuntimeValue(se.PANEL_WAS_LAST_MAXIMIZED,s):!e&&s!==n&&this.toggleMaximizedPanel(),o&&this.editorGroupService.mainPart.activeGroup.focus())}isAuxiliaryBarMaximized(){return this.stateModel.getRuntimeValue(se.AUXILIARYBAR_WAS_LAST_MAXIMIZED)}toggleMaximizedAuxiliaryBar(){this.setAuxiliaryBarMaximized(!this.isAuxiliaryBarMaximized())}setAuxiliaryBarMaximized(t){if(this.inMaximizedAuxiliaryBarTransition||t===this.isAuxiliaryBarMaximized())return!1;if(t){let t={sideBarVisible:this.isVisible(O.I.SIDEBAR_PART),editorVisible:this.isVisible(O.I.EDITOR_PART),panelVisible:this.isVisible(O.I.PANEL_PART),auxiliaryBarVisible:this.isVisible(O.I.AUXILIARYBAR_PART)};this.stateModel.setRuntimeValue(se.AUXILIARYBAR_WAS_LAST_MAXIMIZED,!0),this.inMaximizedAuxiliaryBarTransition=!0;try{t.auxiliaryBarVisible||this.setAuxiliaryBarHidden(!1);let e=this.workbenchGrid.getViewSize(this.auxiliaryBarPartView).width;this.stateModel.setRuntimeValue(se.AUXILIARYBAR_LAST_NON_MAXIMIZED_SIZE,e),t.sideBarVisible&&this.setSideBarHidden(!0),t.panelVisible&&this.setPanelHidden(!0),t.editorVisible&&this.setEditorHidden(!0),this.stateModel.setRuntimeValue(se.AUXILIARYBAR_LAST_NON_MAXIMIZED_VISIBILITY,t)}finally{this.inMaximizedAuxiliaryBarTransition=!1}}else{let t=(0,V.$j)(this.stateModel.getRuntimeValue(se.AUXILIARYBAR_LAST_NON_MAXIMIZED_VISIBILITY));this.stateModel.setRuntimeValue(se.AUXILIARYBAR_WAS_LAST_MAXIMIZED,!1),this.inMaximizedAuxiliaryBarTransition=!0;try{this.setEditorHidden(!(null!==t&&void 0!==t&&t.editorVisible)),this.setPanelHidden(!(null!==t&&void 0!==t&&t.panelVisible)),this.setSideBarHidden(!(null!==t&&void 0!==t&&t.sideBarVisible));let e=this.workbenchGrid.getViewSize(this.auxiliaryBarPartView);this.workbenchGrid.resizeView(this.auxiliaryBarPartView,{width:this.stateModel.getRuntimeValue(se.AUXILIARYBAR_LAST_NON_MAXIMIZED_SIZE),height:e.height})}finally{this.inMaximizedAuxiliaryBarTransition=!1}}return this.focusPart(O.I.AUXILIARYBAR_PART),this._onDidChangeAuxiliaryBarMaximized.fire(),!0}isPanelMaximized(){return("center"===this.getPanelAlignment()||!(0,O.B)(this.getPanelPosition()))&&!this.isVisible(O.I.EDITOR_PART,V.vE)&&!this.isAuxiliaryBarMaximized()}toggleMaximizedPanel(){let t=this.workbenchGrid.getViewSize(this.panelPartView),e=this.getPanelPosition(),i=!this.isPanelMaximized();i?(this.isVisible(O.I.PANEL_PART)&&((0,O.B)(e)?this.stateModel.setRuntimeValue(se.PANEL_LAST_NON_MAXIMIZED_HEIGHT,t.height):this.stateModel.setRuntimeValue(se.PANEL_LAST_NON_MAXIMIZED_WIDTH,t.width)),this.setEditorHidden(!0)):(this.setEditorHidden(!1),this.workbenchGrid.resizeView(this.panelPartView,{width:(0,O.B)(e)?t.width:this.stateModel.getRuntimeValue(se.PANEL_LAST_NON_MAXIMIZED_WIDTH),height:(0,O.B)(e)?this.stateModel.getRuntimeValue(se.PANEL_LAST_NON_MAXIMIZED_HEIGHT):t.height})),this.stateModel.setRuntimeValue(se.PANEL_WAS_LAST_MAXIMIZED,i)}panelOpensMaximized(){if("center"!==this.getPanelAlignment()&&(0,O.B)(this.getPanelPosition()))return!1;let t=(0,O.H)(this.configurationService.getValue($t.PANEL_OPENS_MAXIMIZED)),e=this.stateModel.getRuntimeValue(se.PANEL_WAS_LAST_MAXIMIZED);return t===O.F.ALWAYS||t===O.F.REMEMBER_LAST&&e}setAuxiliaryBarHidden(t,e){if(!t||!this.setAuxiliaryBarMaximized(!1)||this.isVisible(O.I.AUXILIARYBAR_PART))if(this.stateModel.setRuntimeValue(se.AUXILIARYBAR_HIDDEN,t),t?this.mainContainer.classList.add(jt.AUXILIARYBAR_HIDDEN):this.mainContainer.classList.remove(jt.AUXILIARYBAR_HIDDEN),this.workbenchGrid.setViewVisible(this.auxiliaryBarPartView,!t),t&&this.paneCompositeService.getActivePaneComposite(x.Sf.AuxiliaryBar))this.paneCompositeService.hideActivePaneComposite(x.Sf.AuxiliaryBar),this.focusPanelOrEditor();else if(!t&&!this.paneCompositeService.getActivePaneComposite(x.Sf.AuxiliaryBar)){var i;let t=this.paneCompositeService.getLastActivePaneCompositeId(x.Sf.AuxiliaryBar);(!t||!this.hasViews(t))&&(t=null===(i=this.viewDescriptorService.getViewContainersByLocation(x.Sf.AuxiliaryBar).find(t=>this.hasViews(t.id)))||void 0===i?void 0:i.id),t&&this.openViewContainer(x.Sf.AuxiliaryBar,t,!e)}}setPartHidden(t,e){switch(e){case O.I.ACTIVITYBAR_PART:return this.setActivityBarHidden(t);case O.I.SIDEBAR_PART:return this.setSideBarHidden(t);case O.I.EDITOR_PART:return this.setEditorHidden(t);case O.I.BANNER_PART:return this.setBannerHidden(t);case O.I.AUXILIARYBAR_PART:return this.setAuxiliaryBarHidden(t);case O.I.PANEL_PART:return this.setPanelHidden(t)}}hasMainWindowBorder(){return this.state.runtime.mainWindowBorder}getMainWindowBorderRadius(){return this.state.runtime.mainWindowBorder&&V.Cj?"10px":void 0}getSideBarPosition(){return this.stateModel.getRuntimeValue(se.SIDEBAR_POSITON)}getPanelAlignment(){return this.stateModel.getRuntimeValue(se.PANEL_ALIGNMENT)}updateMenubarVisibility(t){let e=(0,O.G)(this.configurationService,V.vE,this.state.runtime.menuBar.toggled);!t&&this.workbenchGrid&&e!==this.isVisible(O.I.TITLEBAR_PART,V.vE)&&this.workbenchGrid.setViewVisible(this.titleBarPartView,e)}updateCustomTitleBarVisibility(){let t=(0,O.G)(this.configurationService,V.vE,this.state.runtime.menuBar.toggled);t!==this.isVisible(O.I.TITLEBAR_PART)&&this.workbenchGrid.setViewVisible(this.titleBarPartView,t)}toggleMenuBar(){let t,e=(0,V.li)(this.configurationService);"string"!=typeof e&&(e="classic"),t="visible"===e||"classic"===e?(0,V.pi)(this.configurationService)?"toggle":"compact":"classic",this.configurationService.updateValue(V.ii.MenuBarVisibility,t)}getPanelPosition(){return this.stateModel.getRuntimeValue(se.PANEL_POSITION)}setPanelPosition(t){this.isVisible(O.I.PANEL_PART)||this.setPanelHidden(!1);let e=this.getPart(O.I.PANEL_PART),i=(0,O.W)(this.getPanelPosition()),s=(0,O.W)(t),n=(0,V.$j)(e.getContainer());n.classList.remove(i),n.classList.add(s),e.updateStyles();let o=this.workbenchGrid.getViewSize(this.panelPartView),r=this.workbenchGrid.getViewSize(this.sideBarPartView),a=this.workbenchGrid.getViewSize(this.auxiliaryBarPartView),l=!this.isVisible(O.I.EDITOR_PART,V.vE);s!==i&&!l&&((0,O.B)(t)?this.stateModel.setRuntimeValue(se.PANEL_LAST_NON_MAXIMIZED_WIDTH,o.width):(0,O.B)((0,O.U)(i))&&this.stateModel.setRuntimeValue(se.PANEL_LAST_NON_MAXIMIZED_HEIGHT,o.height)),(0,O.B)(t)&&"center"!==this.getPanelAlignment()&&l&&(this.toggleMaximizedPanel(),l=!1),this.stateModel.setRuntimeValue(se.PANEL_POSITION,t);let h=this.isVisible(O.I.SIDEBAR_PART),d=this.isVisible(O.I.AUXILIARYBAR_PART),c=this.hasFocus(O.I.PANEL_PART);t===O.L.BOTTOM?this.workbenchGrid.moveView(this.panelPartView,l?o.height:this.stateModel.getRuntimeValue(se.PANEL_LAST_NON_MAXIMIZED_HEIGHT),this.editorPartView,W.m.Down):t===O.L.TOP?this.workbenchGrid.moveView(this.panelPartView,l?o.height:this.stateModel.getRuntimeValue(se.PANEL_LAST_NON_MAXIMIZED_HEIGHT),this.editorPartView,W.m.Up):t===O.L.RIGHT?this.workbenchGrid.moveView(this.panelPartView,l?o.width:this.stateModel.getRuntimeValue(se.PANEL_LAST_NON_MAXIMIZED_WIDTH),this.editorPartView,W.m.Right):this.workbenchGrid.moveView(this.panelPartView,l?o.width:this.stateModel.getRuntimeValue(se.PANEL_LAST_NON_MAXIMIZED_WIDTH),this.editorPartView,W.m.Left),c&&this.focusPart(O.I.PANEL_PART),this.workbenchGrid.resizeView(this.sideBarPartView,r),h||this.setSideBarHidden(!0),this.workbenchGrid.resizeView(this.auxiliaryBarPartView,a),d||this.setAuxiliaryBarHidden(!0),(0,O.B)(t)&&this.adjustPartPositions(this.getSideBarPosition(),this.getPanelAlignment(),t),this._onDidChangePanelPosition.fire(s)}isWindowMaximized(t){return this.state.runtime.maximized.has((0,V.Hx)(t))}updateWindowMaximizedState(t,e){this.mainContainer.classList.toggle(jt.MAXIMIZED,e);let i=(0,V.Hx)(t);e!==this.state.runtime.maximized.has(i)&&(e?this.state.runtime.maximized.add(i):this.state.runtime.maximized.delete(i),this.updateWindowBorder(),this._onDidChangeWindowMaximized.fire({windowId:i,maximized:e}))}getVisibleNeighborPart(t,e){if(!this.workbenchGrid||!this.isVisible(t,V.vE))return;let i=this.workbenchGrid.getNeighborViews(this.getPart(t),e,!1);if(i)for(let s of i){let t=[O.I.ACTIVITYBAR_PART,O.I.EDITOR_PART,O.I.PANEL_PART,O.I.AUXILIARYBAR_PART,O.I.SIDEBAR_PART,O.I.STATUSBAR_PART,O.I.TITLEBAR_PART].find(t=>this.getPart(t)===s&&this.isVisible(t,V.vE));if(void 0!==t)return t}}onDidChangeWCO(){let t=this.workbenchGrid.getNeighborViews(this.titleBarPartView,W.m.Up,!1).length>0,e=this.shouldShowBannerFirst();t!==e&&this.workbenchGrid.moveView(this.bannerPartView,W.g.Distribute,this.titleBarPartView,e?W.m.Up:W.m.Down),this.workbenchGrid.setViewVisible(this.titleBarPartView,(0,O.G)(this.configurationService,V.vE,this.state.runtime.menuBar.toggled))}arrangeEditorNodes(t,e,i){if(!t.sideBar&&!t.auxiliaryBar)return t.editor.size=e,t.editor;let s=[t.editor];return t.editor.size=i,t.sideBar&&(this.stateModel.getRuntimeValue(se.SIDEBAR_POSITON)===O.L.LEFT?s.splice(0,0,t.sideBar):s.push(t.sideBar),t.editor.size-=this.stateModel.getRuntimeValue(se.SIDEBAR_HIDDEN)?0:t.sideBar.size),t.auxiliaryBar&&(this.stateModel.getRuntimeValue(se.SIDEBAR_POSITON)===O.L.RIGHT?s.splice(0,0,t.auxiliaryBar):s.push(t.auxiliaryBar),t.editor.size-=this.stateModel.getRuntimeValue(se.AUXILIARYBAR_HIDDEN)?0:t.auxiliaryBar.size),{type:"branch",data:s,size:e,visible:s.some(t=>t.visible)}}arrangeMiddleSectionNodes(t,e,i){let s=this.stateModel.getRuntimeValue(se.ACTIVITYBAR_HIDDEN)?0:t.activityBar.size,n=this.stateModel.getRuntimeValue(se.SIDEBAR_HIDDEN)?0:t.sideBar.size,o=this.stateModel.getRuntimeValue(se.AUXILIARYBAR_HIDDEN)?0:t.auxiliaryBar.size,r=this.stateModel.getInitializationValue(se.PANEL_SIZE)?0:t.panel.size,a=this.stateModel.getRuntimeValue(se.PANEL_POSITION),l=this.stateModel.getRuntimeValue(se.SIDEBAR_POSITON),h=[];if((0,O.B)(a)){let d=this.stateModel.getRuntimeValue(se.PANEL_ALIGNMENT),c=!("center"===d||l===O.L.LEFT&&"right"===d||l===O.L.RIGHT&&"left"===d),u=!("center"===d||l===O.L.RIGHT&&"right"===d||l===O.L.LEFT&&"left"===d),g=e-s-(c?0:n)-(u?0:o),m=this.arrangeEditorNodes({editor:t.editor,sideBar:c?t.sideBar:void 0,auxiliaryBar:u?t.auxiliaryBar:void 0},i-r,g),b=a===O.L.BOTTOM?[m,t.panel]:[t.panel,m];h.push({type:"branch",data:b,size:g,visible:b.some(t=>t.visible)}),c||(l===O.L.LEFT?h.splice(0,0,t.sideBar):h.push(t.sideBar)),u||(l===O.L.RIGHT?h.splice(0,0,t.auxiliaryBar):h.push(t.auxiliaryBar)),l===O.L.LEFT?h.splice(0,0,t.activityBar):h.push(t.activityBar)}else h.push(t.editor),t.editor.size=e-s-n-r-o,a===O.L.RIGHT?h.push(t.panel):h.splice(0,0,t.panel),l===O.L.LEFT?(h.push(t.auxiliaryBar),h.splice(0,0,t.sideBar),h.splice(0,0,t.activityBar)):(h.splice(0,0,t.auxiliaryBar),h.push(t.sideBar),h.push(t.activityBar));return h}createGridDescriptor(){let{width:t,height:e}=this._mainContainerDimension,i=this.stateModel.getInitializationValue(se.SIDEBAR_SIZE),s=this.stateModel.getInitializationValue(se.AUXILIARYBAR_SIZE),n=this.stateModel.getInitializationValue(se.PANEL_SIZE),o=this.titleBarPartView.minimumHeight,r=this.bannerPartView.minimumHeight,a=this.statusBarPartView.minimumHeight,l=this.activityBarPartView.minimumWidth,h=e-o-a,d=[{type:"leaf",data:{type:O.I.TITLEBAR_PART},size:o,visible:this.isVisible(O.I.TITLEBAR_PART,V.vE)},{type:"leaf",data:{type:O.I.BANNER_PART},size:r,visible:!1}],c={type:"leaf",data:{type:O.I.ACTIVITYBAR_PART},size:l,visible:!this.stateModel.getRuntimeValue(se.ACTIVITYBAR_HIDDEN)},u={type:"leaf",data:{type:O.I.SIDEBAR_PART},size:i,visible:!this.stateModel.getRuntimeValue(se.SIDEBAR_HIDDEN)},g={type:"leaf",data:{type:O.I.AUXILIARYBAR_PART},size:s,visible:this.isVisible(O.I.AUXILIARYBAR_PART)},m={type:"leaf",data:{type:O.I.EDITOR_PART},size:0,visible:!this.stateModel.getRuntimeValue(se.EDITOR_HIDDEN)},b={type:"leaf",data:{type:O.I.PANEL_PART},size:n,visible:!this.stateModel.getRuntimeValue(se.PANEL_HIDDEN)},p=this.arrangeMiddleSectionNodes({activityBar:c,auxiliaryBar:g,editor:m,panel:b,sideBar:u},t,h),A={root:{type:"branch",size:t,data:[...this.shouldShowBannerFirst()?d.reverse():d,{type:"branch",data:p,size:h},{type:"leaf",data:{type:O.I.STATUSBAR_PART},size:a,visible:!this.stateModel.getRuntimeValue(se.STATUSBAR_HIDDEN)}]},orientation:V.Xt.VERTICAL,width:t,height:e},I={activityBarVisible:!this.stateModel.getRuntimeValue(se.ACTIVITYBAR_HIDDEN),sideBarVisible:!this.stateModel.getRuntimeValue(se.SIDEBAR_HIDDEN),auxiliaryBarVisible:!this.stateModel.getRuntimeValue(se.AUXILIARYBAR_HIDDEN),panelVisible:!this.stateModel.getRuntimeValue(se.PANEL_HIDDEN),statusbarVisible:!this.stateModel.getRuntimeValue(se.STATUSBAR_HIDDEN),sideBarPosition:(0,O.W)(this.stateModel.getRuntimeValue(se.SIDEBAR_POSITON)),panelPosition:(0,O.W)(this.stateModel.getRuntimeValue(se.PANEL_POSITION))};return this.telemetryService.publicLog2("startupLayout",I),A}dispose(){super.dispose(),this.disposed=!0}};function Qt(t){return t.getValue($t.ZEN_MODE_CONFIG)}var $t,Jt,te=class{constructor(t,e,i,s){this.name=t,this.scope=e,this.target=i,this.defaultValue=s}},ee=class extends te{constructor(t,e,i,s,n){super(t,e,i,s),this.zenModeIgnore=n,this.runtime=!0}},ie=class extends te{constructor(){super(...arguments),this.runtime=!1}},se={MAIN_EDITOR_CENTERED:new ee("editor.centered",V.Go.WORKSPACE,V.Ko.MACHINE,!1),ZEN_MODE_ACTIVE:new ee("zenMode.active",V.Go.WORKSPACE,V.Ko.MACHINE,!1),ZEN_MODE_EXIT_INFO:new ee("zenMode.exitInfo",V.Go.WORKSPACE,V.Ko.MACHINE,{transitionedToCenteredEditorLayout:!1,transitionedToFullScreen:!1,handleNotificationsDoNotDisturbMode:!1,wasVisible:{auxiliaryBar:!1,panel:!1,sideBar:!1}}),SIDEBAR_SIZE:new ie("sideBar.size",V.Go.PROFILE,V.Ko.MACHINE,300),AUXILIARYBAR_SIZE:new ie("auxiliaryBar.size",V.Go.PROFILE,V.Ko.MACHINE,300),PANEL_SIZE:new ie("panel.size",V.Go.PROFILE,V.Ko.MACHINE,300),PANEL_LAST_NON_MAXIMIZED_HEIGHT:new ee("panel.lastNonMaximizedHeight",V.Go.PROFILE,V.Ko.MACHINE,300),PANEL_LAST_NON_MAXIMIZED_WIDTH:new ee("panel.lastNonMaximizedWidth",V.Go.PROFILE,V.Ko.MACHINE,300),PANEL_WAS_LAST_MAXIMIZED:new ee("panel.wasLastMaximized",V.Go.WORKSPACE,V.Ko.MACHINE,!1),AUXILIARYBAR_WAS_LAST_MAXIMIZED:new ee("auxiliaryBar.wasLastMaximized",V.Go.WORKSPACE,V.Ko.MACHINE,!1),AUXILIARYBAR_LAST_NON_MAXIMIZED_SIZE:new ee("auxiliaryBar.lastNonMaximizedSize",V.Go.PROFILE,V.Ko.MACHINE,300),AUXILIARYBAR_LAST_NON_MAXIMIZED_VISIBILITY:new ee("auxiliaryBar.lastNonMaximizedVisibility",V.Go.WORKSPACE,V.Ko.MACHINE,{sideBarVisible:!1,editorVisible:!1,panelVisible:!1,auxiliaryBarVisible:!1}),AUXILIARYBAR_EMPTY:new ie("auxiliaryBar.empty",V.Go.PROFILE,V.Ko.MACHINE,!1),SIDEBAR_POSITON:new ee("sideBar.position",V.Go.WORKSPACE,V.Ko.MACHINE,O.L.LEFT),PANEL_POSITION:new ee("panel.position",V.Go.WORKSPACE,V.Ko.MACHINE,O.L.BOTTOM),PANEL_ALIGNMENT:new ee("panel.alignment",V.Go.PROFILE,V.Ko.USER,"center"),ACTIVITYBAR_HIDDEN:new ee("activityBar.hidden",V.Go.WORKSPACE,V.Ko.MACHINE,!1,!0),SIDEBAR_HIDDEN:new ee("sideBar.hidden",V.Go.WORKSPACE,V.Ko.MACHINE,!1),EDITOR_HIDDEN:new ee("editor.hidden",V.Go.WORKSPACE,V.Ko.MACHINE,!1),PANEL_HIDDEN:new ee("panel.hidden",V.Go.WORKSPACE,V.Ko.MACHINE,!0),AUXILIARYBAR_HIDDEN:new ee("auxiliaryBar.hidden",V.Go.WORKSPACE,V.Ko.MACHINE,!0),STATUSBAR_HIDDEN:new ee("statusBar.hidden",V.Go.WORKSPACE,V.Ko.MACHINE,!1,!0)};!function(t){t.AUXILIARYBAR_DEFAULT_VISIBILITY="workbench.secondarySideBar.defaultVisibility",t.ACTIVITY_BAR_VISIBLE="workbench.activityBar.visible",t.PANEL_POSITION="workbench.panel.defaultLocation",t.PANEL_OPENS_MAXIMIZED="workbench.panel.opensMaximized",t.ZEN_MODE_CONFIG="zenMode",t.EDITOR_CENTERED_LAYOUT_AUTO_RESIZE="workbench.editor.centeredLayoutAutoResize"}($t||($t={})),function(t){t.STATUSBAR_VISIBLE="workbench.statusBar.visible",t.SIDEBAR_POSITION="workbench.sideBar.location"}(Jt||(Jt={}));var ne=(f=class t extends V.CA{constructor(t,e,i,s){super(),this.storageService=t,this.configurationService=e,this.contextService=i,this.environmentService=s,this._onDidChangeState=this._register(new V.uA),this.onDidChangeState=this._onDidChangeState.event,this.stateCache=new Map,this.isNew={[V.Go.WORKSPACE]:this.storageService.isNew(V.Go.WORKSPACE),[V.Go.PROFILE]:this.storageService.isNew(V.Go.PROFILE),[V.Go.APPLICATION]:this.storageService.isNew(V.Go.APPLICATION)},this._register(this.configurationService.onDidChangeConfiguration(t=>this.updateStateFromLegacySettings(t)))}updateStateFromLegacySettings(t){var e;t.affectsConfiguration(O.P.ACTIVITY_BAR_LOCATION)&&this.setRuntimeValueAndFire(se.ACTIVITYBAR_HIDDEN,this.isActivityBarHidden()),t.affectsConfiguration(Jt.STATUSBAR_VISIBLE)&&this.setRuntimeValueAndFire(se.STATUSBAR_HIDDEN,!this.configurationService.getValue(Jt.STATUSBAR_VISIBLE)),t.affectsConfiguration(Jt.SIDEBAR_POSITION)&&this.setRuntimeValueAndFire(se.SIDEBAR_POSITON,(0,O.U)(null!==(e=this.configurationService.getValue(Jt.SIDEBAR_POSITION))&&void 0!==e?e:"left"))}updateLegacySettingsFromState(t,e){let i=this.getRuntimeValue(se.ZEN_MODE_ACTIVE);t.zenModeIgnore&&i||(t===se.ACTIVITYBAR_HIDDEN?this.configurationService.updateValue(O.P.ACTIVITY_BAR_LOCATION,e?O.j.HIDDEN:void 0):t===se.STATUSBAR_HIDDEN?this.configurationService.updateValue(Jt.STATUSBAR_VISIBLE,!e):t===se.SIDEBAR_POSITON&&this.configurationService.updateValue(Jt.SIDEBAR_POSITION,(0,O.W)(e)))}load(e){var i;let s;if(!e.resetLayout)for(s in se){let t=se[s],e=this.loadKeyFromStorage(t);void 0!==e&&this.stateCache.set(t.name,e)}this.stateCache.set(se.ACTIVITYBAR_HIDDEN.name,this.isActivityBarHidden()),this.stateCache.set(se.STATUSBAR_HIDDEN.name,!this.configurationService.getValue(Jt.STATUSBAR_VISIBLE)),this.stateCache.set(se.SIDEBAR_POSITON.name,(0,O.U)(null!==(i=this.configurationService.getValue(Jt.SIDEBAR_POSITION))&&void 0!==i?i:"left"));let n=this.contextService.getWorkbenchState(),o=e.mainContainerDimension;for(s in se.SIDEBAR_SIZE.defaultValue=Math.min(300,o.width/4),se.SIDEBAR_HIDDEN.defaultValue=n===V.rs.EMPTY,se.AUXILIARYBAR_SIZE.defaultValue=Math.min(300,o.width/4),se.AUXILIARYBAR_HIDDEN.defaultValue=(()=>{if(V.Dj&&!this.environmentService.remoteAuthority)return!0;let t=this.configurationService.inspect($t.AUXILIARYBAR_DEFAULT_VISIBILITY);if("hidden"!==t.defaultValue&&!(0,V.tv)(t)&&this.stateCache.get(se.AUXILIARYBAR_EMPTY.name))return!0;if(this.isNew[V.Go.APPLICATION]&&"hidden"!==t.value)return!1;switch(t.value){case"hidden":return!0;case"visibleInWorkspace":case"maximizedInWorkspace":return n===V.rs.EMPTY;default:return!1}})(),se.PANEL_SIZE.defaultValue=(null!==(r=this.stateCache.get(se.PANEL_POSITION.name))&&void 0!==r?r:(0,O.B)(se.PANEL_POSITION.defaultValue))?o.height/3:o.width/4,se.PANEL_POSITION.defaultValue=(0,O.U)(null!==(a=this.configurationService.getValue($t.PANEL_POSITION))&&void 0!==a?a:"bottom"),se){var r,a;let t=se[s];void 0===this.stateCache.get(t.name)&&this.stateCache.set(t.name,t.defaultValue)}this.applyOverrides(e),this._register(this.storageService.onDidChangeValue(V.Go.PROFILE,void 0,this._store)(e=>{let i;for(i in se){let n=se[i];if(n instanceof ee&&n.scope===V.Go.PROFILE&&n.target===V.Ko.USER&&"".concat(t.STORAGE_PREFIX).concat(n.name)===e.key){var s;let t=null!==(s=this.loadKeyFromStorage(n))&&void 0!==s?s:n.defaultValue;this.stateCache.get(n.name)!==t&&(this.stateCache.set(n.name,t),this._onDidChangeState.fire({key:n,value:t}))}}}))}applyOverrides(t){if(this.isNew[V.Go.WORKSPACE]){let t=this.configurationService.getValue($t.AUXILIARYBAR_DEFAULT_VISIBILITY);("maximized"===t||"maximizedInWorkspace"===t&&this.contextService.getWorkbenchState()!==V.rs.EMPTY)&&this.applyAuxiliaryBarMaximizedOverride()}this.getRuntimeValue(se.PANEL_HIDDEN)&&this.getRuntimeValue(se.EDITOR_HIDDEN)&&!this.getRuntimeValue(se.AUXILIARYBAR_WAS_LAST_MAXIMIZED)&&this.setRuntimeValue(se.EDITOR_HIDDEN,!1),this.isNew[V.Go.WORKSPACE]&&t.mainContainerDimension.width<=Xt.width&&(this.setInitializationValue(se.SIDEBAR_SIZE,Math.min(300,t.mainContainerDimension.width/4)),this.setInitializationValue(se.AUXILIARYBAR_SIZE,Math.min(300,t.mainContainerDimension.width/4)))}applyAuxiliaryBarMaximizedOverride(){this.setRuntimeValue(se.AUXILIARYBAR_LAST_NON_MAXIMIZED_VISIBILITY,{sideBarVisible:!this.getRuntimeValue(se.SIDEBAR_HIDDEN),panelVisible:!this.getRuntimeValue(se.PANEL_HIDDEN),editorVisible:!this.getRuntimeValue(se.EDITOR_HIDDEN),auxiliaryBarVisible:!this.getRuntimeValue(se.AUXILIARYBAR_HIDDEN)}),this.setRuntimeValue(se.SIDEBAR_HIDDEN,!0),this.setRuntimeValue(se.PANEL_HIDDEN,!0),this.setRuntimeValue(se.EDITOR_HIDDEN,!0),this.setRuntimeValue(se.AUXILIARYBAR_HIDDEN,!1),this.setRuntimeValue(se.AUXILIARYBAR_LAST_NON_MAXIMIZED_SIZE,this.getInitializationValue(se.AUXILIARYBAR_SIZE)),this.setRuntimeValue(se.AUXILIARYBAR_WAS_LAST_MAXIMIZED,!0)}save(t,e){let i,s=this.getRuntimeValue(se.ZEN_MODE_ACTIVE);for(i in se){let n=se[i];if(t&&n.scope===V.Go.WORKSPACE||e&&n.scope===V.Go.PROFILE){if(s&&n instanceof ee&&n.zenModeIgnore)continue;this.saveKeyToStorage(n)}}}getInitializationValue(t){return this.stateCache.get(t.name)}setInitializationValue(t,e){this.stateCache.set(t.name,e)}getRuntimeValue(t,e){var i;if(e)switch(t){case se.ACTIVITYBAR_HIDDEN:this.stateCache.set(t.name,this.isActivityBarHidden());break;case se.STATUSBAR_HIDDEN:this.stateCache.set(t.name,!this.configurationService.getValue(Jt.STATUSBAR_VISIBLE));break;case se.SIDEBAR_POSITON:this.stateCache.set(t.name,null!==(i=this.configurationService.getValue(Jt.SIDEBAR_POSITION))&&void 0!==i?i:"left")}return this.stateCache.get(t.name)}setRuntimeValue(t,e){this.stateCache.set(t.name,e);let i=this.getRuntimeValue(se.ZEN_MODE_ACTIVE);t.scope===V.Go.PROFILE&&(!i||!t.zenModeIgnore)&&(this.saveKeyToStorage(t),this.updateLegacySettingsFromState(t,e))}isActivityBarHidden(){let t=this.configurationService.getValue($t.ACTIVITY_BAR_VISIBLE);return void 0===t?this.configurationService.getValue(O.P.ACTIVITY_BAR_LOCATION)!==O.j.DEFAULT:!t}setRuntimeValueAndFire(t,e){this.stateCache.get(t.name)!==e&&(this.setRuntimeValue(t,e),this._onDidChangeState.fire({key:t,value:e}))}saveKeyToStorage(e){let i=this.stateCache.get(e.name);this.storageService.store("".concat(t.STORAGE_PREFIX).concat(e.name),"object"==typeof i?JSON.stringify(i):i,e.scope,e.target)}loadKeyFromStorage(e){let i=this.storageService.get("".concat(t.STORAGE_PREFIX).concat(e.name),e.scope);if(void 0!==i)switch(this.isNew[e.scope]=!1,typeof e.defaultValue){case"boolean":return"true"===i;case"number":return parseInt(i);case"object":return JSON.parse(i)}return i}},{_:f.STORAGE_PREFIX="workbench."},f);(0,V.Ll)(),(0,V.pv)(),(0,V.Ib)(),(0,V.Iw)(),(0,V.PA)(),(0,N.oi)(),(0,V.m)();var oe=class extends V.CA{constructor(t,e,i){super(),this._accessibilitySignalService=i,this._scheduler=this._register(new V.Sw(()=>{this._signalLoop=this._accessibilitySignalService.playSignalLoop(N.ai.progress,null!==e&&void 0!==e?e:5e3)},t)),this._scheduler.schedule()}dispose(){var t;super.dispose(),null!==(t=this._signalLoop)&&void 0!==t&&t.dispose(),this._scheduler.dispose()}};oe=(0,V.Pb)([(0,V.Fb)(2,V.p)],oe),(0,L.vn)(),(0,V.gD)(),(0,V.Db)(),(0,V.Fj)(),(0,x.Ig)(),(0,x.yS)(),(0,N.oi)(),(0,V.m)(),(0,V.wb)(),(0,V.Ct)(),(0,V.Tt)(),(0,O.ir)(),(0,V.Ud)();var re=class{constructor(){this.priority=90,this.name="notifications",this.when=O.jn,this.type=x.Fg.View}getProvider(t){let e=t.get(x.vS),i=t.get(V.wt),s=t.get(V.Cb),n=t.get(V.p);return function(){let t=ut(i);if(!t)return;s.executeCommand("notifications.showList");let o,r=i.lastFocusedList;if(r instanceof V.ot&&(o=r.indexOf(t)),void 0===o)return;function a(){if(s.executeCommand("notifications.showList"),r&&void 0!==o){r.domFocus();try{r.setFocus([o])}catch(t){}}}function l(){let t=ut(i),e=null===t||void 0===t?void 0:t.message.original.toString();if(t&&e)return(0,V.Gd)(t.source?(0,V.Ij)(3524,"{0} Source: {1}",e,t.source):e,t.severity)}let h=l();return h?(t.onDidClose(()=>e.next()),new x.Ng(x.Pg.Notification,{type:x.Fg.View},()=>h,()=>a(),"accessibility.verbosity.notification",void 0,function(t,e){var i;let s;if(t.actions&&(s=[],t.actions.primary&&s.push(...t.actions.primary),t.actions.secondary&&s.push(...t.actions.secondary)),s)for(let o of s){o.class=V.Eb.asClassName(V.mD.bell);let e=o.run;o.run=()=>{e(),t.close()}}let n=null===(i=s)||void 0===i?void 0:i.find(t=>t.label.includes("Manage Extension"));return n&&(n.class=V.Eb.asClassName(V.mD.gear)),s&&s.push({id:"clearNotification",label:(0,V.Ij)(3525,"Clear Notification"),tooltip:(0,V.Ij)(3525,"Clear Notification"),run:()=>{t.close(),e.playSignal(N.ai.clear)},enabled:!0,class:V.Eb.asClassName(V.mD.clearAll)}),s}(t,n),()=>{if(r)return a(),r.focusNext(),l()},()=>{if(r)return a(),r.focusPrevious(),l()})):void 0}()}};(0,V.qx)(),(0,V.gA)(),(0,V.Iw)(),(0,V.eE)(),(0,V.yc)(),(0,V.xN)(),(0,V.mj)(),(0,O.z)(),(0,O.Q)(),(0,V.Jo)(),(0,V.Wo)(),(0,V.s_)(),(0,F.L)(),(0,F.z)(),(0,V.Rd)(),(0,V.r_)(),(0,V.Pp)(),(0,V.WM)(),(0,N.F)(),(0,V.gE)(),(0,V.dl)(),(0,B.S)();var ae=class extends qt{constructor(t,e,i,s){super(t,{resetLayout:null===e||void 0===e?void 0:e.resetLayout,customEditorRestore:null===e||void 0===e?void 0:e.customEditorRestore}),this.options=e,this.serviceCollection=i,this._onWillShutdown=this._register(new V.uA),this.onWillShutdown=this._onWillShutdown.event,this._onDidShutdown=this._register(new V.uA),this.onDidShutdown=this._onDidShutdown.event,this.previousUnexpectedError={message:void 0,time:0},(0,V.bc)("code/willStartWorkbench"),this.registerErrorHandler(s),this.parent.appendChild(this.mainContainer)}registerErrorHandler(t){V.vE.addEventListener("unhandledrejection",t=>{(0,V.CN)(t.reason),t.preventDefault()}),(0,V.TN)(e=>this.handleUnexpectedError(e,t))}handleUnexpectedError(t,e){let i=(0,V.Ip)(t,!0);if(!i)return;let s=Date.now();i===this.previousUnexpectedError.message&&s-this.previousUnexpectedError.time<=1e3||(this.previousUnexpectedError.time=s,this.previousUnexpectedError.message=i,e.error(i))}startup(){try{this._register((0,V._A)(175));let t=this.initServices(this.serviceCollection);return t.invokeFunction(e=>{let i=e.get(F.R),s=e.get(V.Uo),n=e.get(V.o_),o=e.get(N.P),r=e.get(V.Fl),a=e.get(V.Ld);e.get(V.ul).setDefaultCodeBlockRenderer(t.createInstance(B.x)),this.initLayout(e),this.registerListeners(i,s,n,o,r),this.renderWorkbench(t,a,s,n),this.createWorkbenchLayout(),this.layout(),this.restore(t,i)}),t}catch(j){throw(0,V.CN)(j),j}}initServices(t){t.set(O.Z,this);let e=(0,V.rm)();for(let[s,n]of e)t.set(s,n);let i=new V.x(t,!0);return i.invokeFunction(t=>{let e=t.get(F.R),s=t.get(V.o_);s&&"acquireInstantiationService"in s&&s.acquireInstantiationService(i),e.phase=F.M.Ready}),i}registerListeners(t,e,i,s,n){this._register(i.onDidChangeConfiguration(t=>this.updateFontAliasing(t,i))),V.Tj?this._register(e.onWillSaveState(t=>{t.reason===V.qo.SHUTDOWN&&this.storeFontInfo(e)})):this._register(t.onWillShutdown(()=>this.storeFontInfo(e))),this._register(t.onWillShutdown(t=>this._onWillShutdown.fire(t))),this._register(t.onDidShutdown(()=>{this._onDidShutdown.fire(),this.dispose()})),this._register(s.onDidChangeFocus(t=>{t||e.flush()})),this._register(n.onWillShowDialog(()=>this.mainContainer.classList.add("modal-dialog-visible"))),this._register(n.onDidShowDialog(()=>this.mainContainer.classList.remove("modal-dialog-visible")))}updateFontAliasing(t,e){if(!V.Cj||t&&!t.affectsConfiguration("workbench.fontAliasing"))return;let i=e.getValue("workbench.fontAliasing");if(this.fontAliasing===i)return;this.fontAliasing=i;let s=["antialiased","none","auto"];this.mainContainer.classList.remove(...s.map(t=>"monaco-font-aliasing-".concat(t))),s.some(t=>t===i)&&this.mainContainer.classList.add("monaco-font-aliasing-".concat(i))}restoreFontInfo(t,e){let i=t.get("editorFontInfo",V.Go.APPLICATION);if(i)try{let t=JSON.parse(i);Array.isArray(t)&&N.go.restoreFontInfo(V.vE,t)}catch(s){}N.go.readFontInfo(V.vE,(0,N.Fa)(e.getValue("editor"),N.bo.getInstance(V.vE).value))}storeFontInfo(t){let e=N.go.serializeFontInfo(V.vE);e&&t.store("editorFontInfo",JSON.stringify(e),V.Go.APPLICATION,V.Ko.MACHINE)}renderWorkbench(t,e,i,s){var n;(0,V.i_)(this.mainContainer),(0,V.Wn)((e,i)=>t.createInstance(oe,e,i));let o=(0,V.AM)(["monaco-workbench",V.kj?"windows":V.xj?"linux":"mac",V.Dj?"web":void 0,V.nE?"chromium":V.rE?"firefox":V.aE?"safari":void 0,...this.getLayoutClasses(),...null!==(n=this.options)&&void 0!==n&&n.extraClasses?this.options.extraClasses:[]]);this.mainContainer.classList.add(...o),this.updateFontAliasing(void 0,s),this.restoreFontInfo(i,s);for(let{id:r,role:a,classes:l,options:h}of[{id:O.I.TITLEBAR_PART,role:"none",classes:["titlebar"]},{id:O.I.BANNER_PART,role:"banner",classes:["banner"]},{id:O.I.ACTIVITYBAR_PART,role:"none",classes:["activitybar",this.getSideBarPosition()===O.L.LEFT?"left":"right"]},{id:O.I.SIDEBAR_PART,role:"none",classes:["sidebar",this.getSideBarPosition()===O.L.LEFT?"left":"right"]},{id:O.I.EDITOR_PART,role:"main",classes:["editor"],options:{restorePreviousState:this.willRestoreEditors()}},{id:O.I.PANEL_PART,role:"none",classes:["panel","basepanel",(0,O.W)(this.getPanelPosition())]},{id:O.I.AUXILIARYBAR_PART,role:"none",classes:["auxiliarybar","basepanel",this.getSideBarPosition()===O.L.LEFT?"right":"left"]},{id:O.I.STATUSBAR_PART,role:"status",classes:["statusbar"]}]){let t=this.createPart(r,a,l);(0,V.bc)("code/willCreatePart/".concat(r)),this.getPart(r).create(t,h),(0,V.bc)("code/didCreatePart/".concat(r))}this.createNotificationsHandlers(t,e)}createPart(t,e,i){let s=(0,V.gx)("status"===e?"footer":"div");return s.classList.add("part",...i),s.id=t,s.setAttribute("role",e),"status"===e&&s.setAttribute("aria-live","off"),s}createNotificationsHandlers(t,e){let i=this._register(t.createInstance(Ht,this.mainContainer,e.model)),s=this._register(t.createInstance(Yt,this.mainContainer,e.model));this._register(t.createInstance(Gt,e.model));let n=t.createInstance(Ut,e.model);this._register(i.onDidChangeVisibility(()=>{n.update(i.isVisible,s.isVisible),s.update(i.isVisible)})),this._register(s.onDidChangeVisibility(()=>{n.update(i.isVisible,s.isVisible)})),function(t,e,i){V.hb.registerCommandAndKeybindingRule({id:et,weight:V.mb.WorkbenchContrib,primary:(0,V.JD)(V.ZD.CtrlCmd|V.YD.KeyK,V.ZD.CtrlCmd|V.ZD.Shift|V.YD.KeyN),handler:()=>{e.hide(),t.show()}}),V.hb.registerCommandAndKeybindingRule({id:it,weight:V.mb.WorkbenchContrib+50,when:O.Mn,primary:V.YD.Escape,handler:()=>t.hide()}),V.xb.registerCommand("notifications.toggleList",()=>{t.isVisible?t.hide():(e.hide(),t.show())}),V.hb.registerCommandAndKeybindingRule({id:lt,weight:V.mb.WorkbenchContrib,when:O.jn,primary:V.YD.Delete,mac:{primary:V.ZD.CtrlCmd|V.YD.Backspace},handler:(t,e)=>{let i=t.get(V.p),s=ut(t.get(V.wt),e);s&&!s.hasProgress&&(s.close(),i.playSignal(N.ai.clear))}}),V.hb.registerCommandAndKeybindingRule({id:rt,weight:V.mb.WorkbenchContrib,when:O.jn,primary:V.YD.RightArrow,handler:(t,e)=>{var i;null===(i=ut(t.get(V.wt),e))||void 0===i||i.expand()}}),V.hb.registerCommandAndKeybindingRule({id:at,weight:V.mb.WorkbenchContrib+1,when:V.PO.or(O.jn,O.Nn),primary:V.ZD.CtrlCmd|V.ZD.Shift|V.YD.KeyA,handler:t=>{var e;let s=t.get(V.Ub).createInstance(gt),n=ut(t.get(V.wt))||i.notifications.at(0);if(!n)return;let o=null!==(e=n.actions)&&void 0!==e&&e.primary?n.actions.primary.at(0):void 0;o&&(s.run(o,n),n.close(),s.dispose())}}),V.hb.registerCommandAndKeybindingRule({id:ot,weight:V.mb.WorkbenchContrib,when:O.jn,primary:V.YD.LeftArrow,handler:(t,e)=>{var i;null===(i=ut(t.get(V.wt),e))||void 0===i||i.collapse()}}),V.hb.registerCommandAndKeybindingRule({id:"notification.toggle",weight:V.mb.WorkbenchContrib,when:O.jn,primary:V.YD.Space,secondary:[V.YD.Enter],handler:t=>{var e;null===(e=ut(t.get(V.wt)))||void 0===e||e.toggle()}}),V.xb.registerCommand(st,t=>{e.hide()}),V.hb.registerKeybindingRule({id:st,weight:V.mb.WorkbenchContrib-50,when:O.Nn,primary:V.YD.Escape}),V.hb.registerKeybindingRule({id:st,weight:V.mb.WorkbenchContrib+100,when:V.PO.and(O.Nn,O.jn),primary:V.YD.Escape}),V.xb.registerCommand(nt,()=>e.focus()),V.hb.registerCommandAndKeybindingRule({id:"notifications.focusNextToast",weight:V.mb.WorkbenchContrib,when:V.PO.and(O.jn,O.Nn),primary:V.YD.DownArrow,handler:()=>{e.focusNext()}}),V.hb.registerCommandAndKeybindingRule({id:"notifications.focusPreviousToast",weight:V.mb.WorkbenchContrib,when:V.PO.and(O.jn,O.Nn),primary:V.YD.UpArrow,handler:()=>{e.focusPrevious()}}),V.hb.registerCommandAndKeybindingRule({id:"notifications.focusFirstToast",weight:V.mb.WorkbenchContrib,when:V.PO.and(O.jn,O.Nn),primary:V.YD.PageUp,secondary:[V.YD.Home],handler:()=>{e.focusFirst()}}),V.hb.registerCommandAndKeybindingRule({id:"notifications.focusLastToast",weight:V.mb.WorkbenchContrib,when:V.PO.and(O.jn,O.Nn),primary:V.YD.PageDown,secondary:[V.YD.End],handler:()=>{e.focusLast()}}),V.xb.registerCommand(ht,()=>t.clearAll()),V.xb.registerCommand(dt,t=>{let e=t.get(V.Ld);e.setFilter(e.getFilter()===V.Hd.ERROR?V.Hd.OFF:V.Hd.ERROR)}),V.xb.registerCommand(ct,t=>{let e=t.get(V.Ld),i=t.get(V.xc),s=e.getFilters().sort((t,e)=>t.label.localeCompare(e.label)),n=new V.EA,o=n.add(i.createQuickPick());o.items=s.map(t=>({id:t.id,label:t.label,tooltip:"".concat(t.label," (").concat(t.id,")"),filter:t.filter})),o.canSelectMany=!0,o.placeholder=(0,V.Ij)(3553,"Select sources to enable all notifications from"),o.selectedItems=o.items.filter(t=>t.filter===V.Hd.OFF),o.show(),n.add(o.onDidAccept(async()=>{for(let t of o.items)e.setFilter({id:t.id,label:t.label,filter:o.selectedItems.includes(t)?V.Hd.OFF:V.Hd.ERROR});o.hide()})),n.add(o.onDidHide(()=>n.dispose()))});let s=(0,V.Lj)(3554,"Notifications");V.lb.appendMenuItem(V.sb.CommandPalette,{command:{id:et,title:(0,V.Lj)(3555,"Show Notifications"),category:s}}),V.lb.appendMenuItem(V.sb.CommandPalette,{command:{id:it,title:(0,V.Lj)(3556,"Hide Notifications"),category:s},when:O.Mn}),V.lb.appendMenuItem(V.sb.CommandPalette,{command:{id:ht,title:(0,V.Lj)(3557,"Clear All Notifications"),category:s}}),V.lb.appendMenuItem(V.sb.CommandPalette,{command:{id:at,title:(0,V.Lj)(3558,"Accept Notification Primary Action"),category:s}}),V.lb.appendMenuItem(V.sb.CommandPalette,{command:{id:dt,title:(0,V.Lj)(3559,"Toggle Do Not Disturb Mode"),category:s}}),V.lb.appendMenuItem(V.sb.CommandPalette,{command:{id:ct,title:(0,V.Lj)(3560,"Toggle Do Not Disturb Mode By Source..."),category:s}}),V.lb.appendMenuItem(V.sb.CommandPalette,{command:{id:nt,title:(0,V.Lj)(3561,"Focus Notification Toast"),category:s},when:O.Nn})}(i,s,e.model),L._n.register(new re),this.registerNotifications({onDidChangeNotificationsVisibility:V.dA.map(V.dA.any(s.onDidChangeVisibility,i.onDidChangeVisibility),()=>s.isVisible||i.isVisible)})}restore(t,e){try{this.restoreParts(t)}catch(t){(0,V.CN)(t)}this.whenReady.finally(()=>Promise.race([this.whenRestored,(0,V.Gw)(2e3)]).finally(()=>{function t(){(0,V.bc)("code/didStartWorkbench"),performance.measure("perf: workbench create & restore","code/didLoadWorkbenchMain","code/didStartWorkbench")}this.isRestored()?t():this.whenRestored.finally(()=>t()),e.phase=F.M.Restored,this._register(new V.Sw(()=>{this._register((0,V.xS)(V.vE,()=>e.phase=F.M.Eventually,2500))},2500)).schedule()}))}};(0,L.bt)();(0,L.O)(),(0,L.Ct)(),(0,V.Qr)(),(0,V.Xl)(),(0,V.Ib)(),(0,V.qx)(),(0,V.da)(),(0,V.Mb)(),(0,V.gD)(),(0,V.gA)(),(0,V.PA)(),(0,V.Fj)(),(0,V.Xr)(),(0,N.lr)(),(0,V.db)(),(0,V.Kb)(),(0,V.Ad)(),(0,V.Sc)(),(0,F.G)(),(0,V.cr)();var le,he=class{constructor(t,e,i,s){this._disposables=new V.EA,this._onDidChangeVisibility=this._disposables.add(new V.uA),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.element=(0,V.gx)("div"),this.element.classList.add("command-center");let n=i.createInstance(N.sr,this.element,V.sb.CommandCenter,{contextMenu:V.sb.TitleBarContext,hiddenItemStrategy:N.or.NoHide,toolbarOptions:{primaryGroup:()=>!0},telemetrySource:"commandCenter",actionViewItemProvider:(s,n)=>s instanceof V.ub&&s.item.submenu===V.sb.CommandCenterCenter?i.createInstance(de,s,t,(0,P.A)((0,P.A)({},n),{},{hoverDelegate:e})):(0,V.Wr)(i,s,(0,P.A)((0,P.A)({},n),{},{hoverDelegate:e}))});this._disposables.add(V.dA.filter(s.onShow,()=>(0,V.Jx)(this.element),this._disposables)(this._setVisibility.bind(this,!1))),this._disposables.add(s.onHide(this._setVisibility.bind(this,!0))),this._disposables.add(n)}_setVisibility(t){this.element.classList.toggle("hide",!t),this._onDidChangeVisibility.fire()}dispose(){this._disposables.dispose()}};he=(0,V.Pb)([(0,V.Fb)(2,V.Ub),(0,V.Fb)(3,V.xc)],he);var de=(E=class extends V.Vi{constructor(t,e,i,s,n,o,r){var a,l;super(void 0,null!==(a=t.actions.find(t=>"workbench.action.quickOpenWithModes"===t.id))&&void 0!==a?a:t.actions[0],i),this._submenu=t,this._windowTitle=e,this._hoverService=s,this._keybindingService=n,this._instaService=o,this._editorGroupService=r,this._hoverDelegate=null!==(l=i.hoverDelegate)&&void 0!==l?l:(0,V.ua)("mouse")}render(t){super.render(t),t.classList.add("command-center-center"),t.classList.toggle("multiple",this._submenu.actions.length>1);let e=this._store.add(this._hoverService.setupManagedHover(this._hoverDelegate,t,this.getTooltip()));this._store.add(this._windowTitle.onDidChange(()=>{e.update(this.getTooltip())}));let i=[];for(let s of this._submenu.actions)s instanceof V.jb?i.push(s.actions):i.push([s]);for(let s=0;s<i.length;s++){let e=i[s],n=this._instaService.createInstance(N.cr,t,{hiddenItemStrategy:N.or.NoHide,telemetrySource:"commandCenterCenter",actionViewItemProvider:(t,e)=>{if(e=(0,P.A)((0,P.A)({},e),{},{hoverDelegate:this._hoverDelegate}),t.id!==le._quickOpenCommandId)return(0,V.Wr)(this._instaService,t,e);let i=this;return this._instaService.createInstance(class extends V.Vi{constructor(){super(void 0,t,e)}render(t){var e;super.render(t),t.classList.toggle("command-center-quick-pick"),t.role="button",t.setAttribute("aria-description",this.getTooltip());let s=this.action,n=(0,V.gx)("span");n.ariaHidden="true",n.className=null!==(e=s.class)&&void 0!==e?e:"",n.classList.add("search-icon");let o=this._getLabel(),r=(0,V.gx)("span");r.classList.add("search-label"),r.textContent=o,(0,V.vS)(t,n,r);let a=this._store.add(i._hoverService.setupManagedHover(i._hoverDelegate,t,this.getTooltip()));this._store.add(i._windowTitle.onDidChange(()=>{a.update(this.getTooltip()),r.textContent=this._getLabel()})),this._store.add(i._editorGroupService.onDidChangeEditorPartOptions(t=>{let{newPartOptions:e,oldPartOptions:i}=t;e.showTabs!==i.showTabs&&(a.update(this.getTooltip()),r.textContent=this._getLabel())}))}getTooltip(){return i.getTooltip()}_getLabel(){var t;let{prefix:e,suffix:s}=i._windowTitle.getTitleDecorations(),n=i._windowTitle.workspaceName;return i._windowTitle.isCustomTitleFormat()?n=i._windowTitle.getWindowTitle():"none"===i._editorGroupService.partOptions.showTabs&&(n=null!==(t=i._windowTitle.fileName)&&void 0!==t?t:n),n||(n=(0,V.Ij)(3644,"Search")),e&&(n=(0,V.Ij)(3645,"{0} {1}",e,n)),s&&(n=(0,V.Ij)(3646,"{0} {1}",n,s)),n.replaceAll(/\r\n|\r|\n/g,"\u23ce")}})}});if(n.setActions(e),this._store.add(n),s<i.length-1){let e=(0,V.Xi)(V.mD.circleSmallFilled);e.style.padding="0 8px",e.style.height="100%",e.style.opacity="0.5",t.appendChild(e)}}}getTooltip(){var t;let e=null===(t=this._keybindingService.lookupKeybinding(this.action.id))||void 0===t?void 0:t.getLabel();return e?(0,V.Ij)(3647,"Search {0} ({1}) \u2014 {2}",this._windowTitle.workspaceName,e,this._windowTitle.value):(0,V.Ij)(3648,"Search {0} \u2014 {1}",this._windowTitle.workspaceName,this._windowTitle.value)}},{_:le=E},{_:E._quickOpenCommandId="workbench.action.quickOpenWithModes"},E);de=le=(0,V.Pb)([(0,V.Fb)(3,V.sr),(0,V.Fb)(4,V.kd),(0,V.Fb)(5,V.Ub),(0,V.Fb)(6,F.W)],de),V.lb.appendMenuItem(V.sb.CommandCenter,{submenu:V.sb.CommandCenterCenter,title:(0,V.Ij)(3649,"Command Center"),icon:V.mD.shield,order:101}),(0,L.b)(),(0,N.c)(),(0,H.c)(),(0,V.ml)(),(0,V.xl)(),(0,V.Up)(),(0,V.Fj)(),(0,V.s_)(),(0,V.Jo)(),(0,V.Wo)(),(0,O.z)(),(0,V.db)(),(0,V.IO)(),(0,V.bb)(),(0,L.w)(),(0,O.ir)(),(0,V.hi)();var ce=class extends V.ob{constructor(t,e,i,s,n){super({id:"toggle.".concat(t),title:e,metadata:i?{description:i}:void 0,toggled:V.PO.equals("config.".concat(t),!0),menu:[{id:V.sb.TitleBarContext,when:n,order:s,group:"2_config"},{id:V.sb.TitleBarTitleContext,when:n,order:s,group:"2_config"}]}),this.section=t}run(t){let e=t.get(V.o_),i=e.getValue(this.section);e.updateValue(this.section,!i)}};(0,V.pb)(class extends ce{constructor(){super(O.P.COMMAND_CENTER,(0,V.Ij)(3668,"Command Center"),(0,V.Ij)(3669,"Toggle visibility of the Command Center in title bar"),1,O.wn.toNegated())}}),(0,V.pb)(class extends ce{constructor(){super("workbench.navigationControl.enabled",(0,V.Ij)(3670,"Navigation Controls"),(0,V.Ij)(3671,"Toggle visibility of the Navigation Controls in title bar"),2,V.PO.and(O.wn.toNegated(),V.PO.has("config.window.commandCenter")))}}),(0,V.pb)(class extends ce{constructor(){super(O.P.LAYOUT_ACTIONS,(0,V.Ij)(3672,"Layout Controls"),(0,V.Ij)(3673,"Toggle visibility of the Layout Controls in title bar"),4)}}),(0,V.pb)(class extends V.ob{constructor(){super({id:"toggle.".concat(V.ai.CUSTOM_TITLE_BAR_VISIBILITY),title:(0,V.Ij)(3674,"Hide Custom Title Bar"),menu:[{id:V.sb.TitleBarContext,order:0,when:V.PO.equals(O.Zn.key,V.oi.NATIVE),group:"3_toggle"},{id:V.sb.TitleBarTitleContext,order:0,when:V.PO.equals(O.Zn.key,V.oi.NATIVE),group:"3_toggle"}]})}run(t){t.get(V.o_).updateValue(V.ai.CUSTOM_TITLE_BAR_VISIBILITY,V.$r.NEVER)}}),(0,V.pb)(class extends V.ob{constructor(){super({id:"toggle.".concat(V.ai.CUSTOM_TITLE_BAR_VISIBILITY,".windowed"),title:(0,V.Ij)(3675,"Hide Custom Title Bar In Full Screen"),menu:[{id:V.sb.TitleBarContext,order:1,when:O.En,group:"3_toggle"},{id:V.sb.TitleBarTitleContext,order:1,when:O.En,group:"3_toggle"}]})}run(t){t.get(V.o_).updateValue(V.ai.CUSTOM_TITLE_BAR_VISIBILITY,V.$r.WINDOWED)}}),(0,V.pb)(class extends V.ob{constructor(){var t;super({id:"toggle.toggleCustomTitleBar",title:(0,V.Ij)(3676,"Custom Title Bar"),toggled:O.Qn,menu:[{id:V.sb.MenubarAppearanceMenu,order:6,when:V.PO.or(V.PO.and(V.PO.equals(O.Zn.key,V.oi.NATIVE),null===(t=V.PO.and(V.PO.equals("config.workbench.layoutControl.enabled",!1),V.PO.equals("config.window.commandCenter",!1),V.PO.notEquals("config.workbench.editor.editorActionsLocation","titleBar"),V.PO.notEquals("config.workbench.activityBar.location","top"),V.PO.notEquals("config.workbench.activityBar.location","bottom")))||void 0===t?void 0:t.negate()),O.En),group:"2_workbench_layout"}]})}run(t){let e=t.get(V.o_),i=t.get(V.yb);switch(e.getValue(V.ai.CUSTOM_TITLE_BAR_VISIBILITY)){case V.$r.NEVER:e.updateValue(V.ai.CUSTOM_TITLE_BAR_VISIBILITY,V.$r.AUTO);break;case V.$r.WINDOWED:O.En.evaluate(i.getContext(null))?e.updateValue(V.ai.CUSTOM_TITLE_BAR_VISIBILITY,V.$r.AUTO):e.updateValue(V.ai.CUSTOM_TITLE_BAR_VISIBILITY,V.$r.NEVER);break;case V.$r.AUTO:default:e.updateValue(V.ai.CUSTOM_TITLE_BAR_VISIBILITY,V.$r.NEVER)}}}),(0,V.pb)(class extends V.ob{constructor(){super({id:"showCustomTitleBar",title:(0,V.Lj)(3677,"Show Custom Title Bar"),precondition:O.Qn.negate(),f1:!0})}run(t){t.get(V.o_).updateValue(V.ai.CUSTOM_TITLE_BAR_VISIBILITY,V.$r.AUTO)}}),(0,V.pb)(class extends V.ob{constructor(){super({id:"hideCustomTitleBar",title:(0,V.Lj)(3678,"Hide Custom Title Bar"),precondition:O.Qn,f1:!0})}run(t){t.get(V.o_).updateValue(V.ai.CUSTOM_TITLE_BAR_VISIBILITY,V.$r.NEVER)}}),(0,V.pb)(class extends V.ob{constructor(){super({id:"hideCustomTitleBarInFullScreen",title:(0,V.Lj)(3679,"Hide Custom Title Bar In Full Screen"),precondition:V.PO.and(O.Qn,O.En),f1:!0})}run(t){t.get(V.o_).updateValue(V.ai.CUSTOM_TITLE_BAR_VISIBILITY,V.$r.WINDOWED)}}),(0,V.pb)((C=class t extends V.ob{constructor(){var e;let i=null===(e=V.PO.and(V.PO.equals("config.workbench.editor.showTabs","none").negate(),V.PO.equals("config.".concat(t.settingsID),"default")))||void 0===e?void 0:e.negate();super({id:"toggle.".concat(t.settingsID),title:(0,V.Ij)(3680,"Editor Actions"),toggled:V.PO.equals("config.".concat(t.settingsID),"hidden").negate(),menu:[{id:V.sb.TitleBarContext,order:3,when:i,group:"2_config"},{id:V.sb.TitleBarTitleContext,order:3,when:i,group:"2_config"}]})}run(e){let i=e.get(V.o_),s=e.get(V.Uo),n=i.getValue(t.settingsID);if("hidden"===n){if("none"!==i.getValue(O.P.EDITOR_TABS_MODE))i.updateValue(t.settingsID,"titleBar");else{let e=s.get(t.settingsID,V.Go.PROFILE);i.updateValue(t.settingsID,null!==e&&void 0!==e?e:"default")}s.remove(t.settingsID,V.Go.PROFILE)}else i.updateValue(t.settingsID,"hidden"),s.store(t.settingsID,n,V.Go.PROFILE,V.Ko.USER)}},{_:C.settingsID="workbench.editor.editorActionsLocation"},C));var ue,ge={id:L.S,label:(0,V.Ij)(3681,"Accounts"),tooltip:(0,V.Ij)(3681,"Accounts"),class:void 0,enabled:!0,run:function(){}},me={id:L.C,label:(0,V.Ij)(3682,"Manage"),tooltip:(0,V.Ij)(3682,"Manage"),class:void 0,enabled:!0,run:function(){}};(0,V.fE)(),(0,V.Ib)(),(0,V.Fj)(),(0,L.mt)(),(0,V.eE)(),(0,V.hi)(),(0,V.wl)(),(0,V.s_)(),(0,V.PA)(),(0,H.n)(),(0,V.$d)(),(0,N.Xn)(),(0,V.mj)(),(0,V.qx)(),(0,V.Kb)(),(0,V.gA)(),(0,V.Jo)(),(0,V.Wo)(),(0,O.z)(),(0,O.Q)(),(0,V.Xr)(),(0,V.db)(),(0,V.bb)(),(0,N.F)(),(0,N.lr)(),(0,L.w)(),(0,F.G)(),(0,V.Mb)(),(0,F.At)(),(0,V.zr)(),(0,V.Ad)(),(0,V.gE)(),(0,V.da)(),(0,V.Sb)(),(0,V._y)(),(0,O.ir)(),(0,V.mE)({});var be=class extends L.ft{constructor(t,e,i){super("workbench.titleService",i,e),this.instantiationService=t,this.properties=void 0,this.variables=new Map,this.mainPart=this._register(this.createMainTitlebarPart()),this.onMenubarVisibilityChange=this.mainPart.onMenubarVisibilityChange,this._register(this.registerPart(this.mainPart)),this.registerActions(),this.registerAPICommands()}createMainTitlebarPart(){return this.instantiationService.createInstance(Ae)}registerActions(){let t=this;this._register((0,V.pb)(class extends V.ob{constructor(){super({id:"workbench.action.focusTitleBar",title:(0,V.Lj)(3683,"Focus Title Bar"),category:H.s.View,f1:!0,precondition:O.Qn})}run(){var e;null===(e=t.getPartByDocument((0,V.wx)()))||void 0===e||e.focus()}}))}registerAPICommands(){this._register(V.xb.registerCommand({id:"registerWindowTitleVariable",handler:(t,e,i)=>{this.registerVariables([{name:e,contextKey:i}])},metadata:{description:"Registers a new title variable",args:[{name:"name",schema:{type:"string"},description:"The name of the variable to register"},{name:"contextKey",schema:{type:"string"},description:"The context key to use for the value of the variable"}]}}))}createAuxiliaryTitlebarPart(t,e,i){let s=(0,V.Zb)(".part.titlebar",{role:"none"});s.style.position="relative",t.insertBefore(s,t.firstChild);let n=new V.EA,o=this.doCreateAuxiliaryTitlebarPart(s,e,i);return n.add(this.registerPart(o)),n.add(V.dA.runAndSubscribe(o.onDidChange,()=>s.style.height="".concat(o.height,"px"))),o.create(s),this.properties&&o.updateProperties(this.properties),this.variables.size&&o.registerVariables(Array.from(this.variables.values())),V.dA.once(o.onWillDispose)(()=>n.dispose()),o}doCreateAuxiliaryTitlebarPart(t,e,i){return i.createInstance(Ie,t,e,this.mainPart)}updateProperties(t){this.properties=t;for(let e of this.parts)e.updateProperties(t)}registerVariables(t){let e=[];for(let i of t)this.variables.has(i.name)||(this.variables.set(i.name,i),e.push(i));for(let i of this.parts)i.registerVariables(e)}};be=(0,V.Pb)([(0,V.Fb)(0,V.Ub),(0,V.Fb)(1,V.Uo),(0,V.Fb)(2,V.Qd)],be);var pe=class extends L.pt{get minimumHeight(){var t,e;let i=V.Dj&&(0,V.sE)(),s=this.isCommandCenterVisible||i?35:30;return i&&(s=Math.max(s,null!==(t=null===(e=(0,V.ZT)((0,V.Bx)(this.element)))||void 0===e?void 0:e.height)&&void 0!==t?t:0)),s/(this.preventZoom?(0,V.QT)((0,V.Bx)(this.element)):1)}get maximumHeight(){return this.minimumHeight}constructor(t,e,i,s,n,o,r,a,l,h,d,c,u,g,m){super(t,{hasTitle:!1},a,l,h),this.editorGroupsContainer=i,this.contextMenuService=s,this.configurationService=n,this.environmentService=o,this.instantiationService=r,this.storageService=l,this.contextKeyService=d,this.hostService=c,this.editorService=u,this.menuService=g,this.keybindingService=m,this.minimumWidth=0,this.maximumWidth=1/0,this._onMenubarVisibilityChange=this._register(new V.uA),this.onMenubarVisibilityChange=this._onMenubarVisibilityChange.event,this._onWillDispose=this._register(new V.uA),this.onWillDispose=this._onWillDispose.event,this.customMenubar=this._register(new V.OA),this.actionToolBarDisposable=this._register(new V.EA),this.editorActionsChangeDisposable=this._register(new V.EA),this.globalToolbarMenuDisposables=this._register(new V.EA),this.editorToolbarMenuDisposables=this._register(new V.EA),this.layoutToolbarMenuDisposables=this._register(new V.EA),this.activityToolbarDisposables=this._register(new V.EA),this.titleDisposables=this._register(new V.EA),this.isInactive=!1,this.isCompact=!1,this.isAuxiliary=e.vscodeWindowId!==V.vE.vscodeWindowId,this.isCompactContextKey=O.wn.bindTo(this.contextKeyService),this.titleBarStyle=(0,V.ui)(this.configurationService),this.windowTitle=this._register(r.createInstance(L.St,e)),this.hoverDelegate=this._register((0,V.la)()),this.registerListeners((0,V.Hx)(e))}registerListeners(t){this._register(this.hostService.onDidChangeFocus(t=>t?this.onFocus():this.onBlur())),this._register(this.hostService.onDidChangeActiveWindow(e=>e===t?this.onFocus():this.onBlur())),this._register(this.configurationService.onDidChangeConfiguration(t=>this.onConfigurationChanged(t))),this._register(this.editorGroupsContainer.onDidChangeEditorPartOptions(t=>this.onEditorPartConfigurationChange(t)))}onBlur(){this.isInactive=!0,this.updateStyles()}onFocus(){this.isInactive=!1,this.updateStyles()}onEditorPartConfigurationChange(t){let{oldPartOptions:e,newPartOptions:i}=t;(e.editorActionsLocation!==i.editorActionsLocation||e.showTabs!==i.showTabs)&&this.actionToolBar&&(this.createActionToolBar(),this.createActionToolBarMenus({editorActions:!0}),this._onDidChange.fire(void 0))}onConfigurationChanged(t){if(!this.isAuxiliary&&!(0,V.pi)(this.configurationService,this.titleBarStyle)&&(!V.Cj||V.Dj)&&t.affectsConfiguration(V.ii.MenuBarVisibility)&&("compact"===this.currentMenubarVisibility?this.uninstallMenubar():this.installMenubar()),this.actionToolBar){let e=t.affectsConfiguration(O.P.LAYOUT_ACTIONS),i=t.affectsConfiguration(O.P.ACTIVITY_BAR_LOCATION);(e||i)&&(this.createActionToolBarMenus({layoutActions:e,activityActions:i}),this._onDidChange.fire(void 0))}t.affectsConfiguration(O.P.COMMAND_CENTER)&&this.recreateTitle()}recreateTitle(){this.createTitle(),this._onDidChange.fire(void 0)}updateOptions(t){let e=this.isCompact;this.isCompact=t.compact,this.isCompactContextKey.set(this.isCompact),e!==this.isCompact&&(this.recreateTitle(),this.createActionToolBarMenus(!0))}installMenubar(){this.menubar||(this.customMenubar.value=this.instantiationService.createInstance(L.D),this.menubar=(0,V.dx)(this.leftContent,(0,V.Zb)("div.menubar")),this.menubar.setAttribute("role","menubar"),this._register(this.customMenubar.value.onVisibilityChange(t=>this.onMenubarVisibilityChanged(t))),this.customMenubar.value.create(this.menubar))}uninstallMenubar(){var t;this.customMenubar.value=void 0,null!==(t=this.menubar)&&void 0!==t&&t.remove(),this.menubar=void 0,this.onMenubarVisibilityChanged(!1)}onMenubarVisibilityChanged(t){(V.Dj||V.kj||V.xj)&&(this.lastLayoutDimensions&&this.layout(this.lastLayoutDimensions.width,this.lastLayoutDimensions.height),this._onMenubarVisibilityChange.fire(t))}updateProperties(t){this.windowTitle.updateProperties(t)}registerVariables(t){this.windowTitle.registerVariables(t)}createContentArea(t){if(this.element=t,this.rootContainer=(0,V.dx)(t,(0,V.Zb)(".titlebar-container")),this.leftContent=(0,V.dx)(this.rootContainer,(0,V.Zb)(".titlebar-left")),this.centerContent=(0,V.dx)(this.rootContainer,(0,V.Zb)(".titlebar-center")),this.rightContent=(0,V.dx)(this.rootContainer,(0,V.Zb)(".titlebar-right")),(V.kj||V.xj)&&!(0,V.mi)(this.configurationService,this.titleBarStyle)&&(this.appIcon=(0,V.gS)(this.leftContent,(0,V.Zb)("a.window-appicon"))),this.dragRegion=(0,V.gS)(this.rootContainer,(0,V.Zb)("div.titlebar-drag-region")),!this.isAuxiliary&&!(0,V.pi)(this.configurationService,this.titleBarStyle)&&(!V.Cj||V.Dj)&&"compact"!==this.currentMenubarVisibility&&this.installMenubar(),this.title=(0,V.dx)(this.centerContent,(0,V.Zb)("div.window-title")),this.createTitle(),this.actionToolBarElement=(0,V.dx)(this.rightContent,(0,V.Zb)("div.action-toolbar-container")),this.createActionToolBar(),this.createActionToolBarMenus(),!(0,V.mi)(this.configurationService,this.titleBarStyle)){let t=V.Cj?"left":"right";if(V.Cj&&V.Tj){let e=V.vy.Locale(V.Nj).value.textInfo;e&&"object"==typeof e&&"direction"in e&&"rtl"===e.direction&&(t="right")}V.Cj&&V.Tj&&"left"===t||(0,V.di)(this.configurationService)===V.si.HIDDEN||(this.windowControlsContainer=(0,V.dx)("left"===t?this.leftContent:this.rightContent,(0,V.Zb)("div.window-controls-container")),V.Dj&&(0,V.dx)("left"===t?this.rightContent:this.leftContent,(0,V.Zb)("div.window-controls-container")),(0,V.sE)()&&this.windowControlsContainer.classList.add("wco-enabled"))}return this._register((0,V.ox)(this.rootContainer,V.tx.CONTEXT_MENU,t=>{let e;V.ex.stop(t),e=V.Cj&&(0,V.iS)(t.target)&&(0,V.Xx)(t.target,this.title)?V.sb.TitleBarTitleContext:V.sb.TitleBarContext,this.onContextMenu(t,e)})),V.Cj&&this._register((0,V.ox)(this.title,V.tx.MOUSE_DOWN,t=>{t.metaKey&&(V.ex.stop(t,!0),this.onContextMenu(t,V.sb.TitleBarTitleContext))},!0)),this.updateStyles(),this.element}createTitle(){this.titleDisposables.clear();let t=(0,V.mi)(this.configurationService,this.titleBarStyle);if(this.isCommandCenterVisible){let t=this.instantiationService.createInstance(he,this.windowTitle,this.hoverDelegate);(0,V.vS)(this.title,t.element),this.titleDisposables.add(t)}else t?(0,V.vS)(this.title):(this.title.textContent=this.windowTitle.value,this.titleDisposables.add(this.windowTitle.onDidChange(()=>{this.title.textContent=this.windowTitle.value,this.lastLayoutDimensions&&this.updateLayout(this.lastLayoutDimensions)})))}actionViewItemProvider(t,e){var i;if(!this.isAuxiliary){if("workbench.actions.manage"===t.id)return this.instantiationService.createInstance(L.y,{position:()=>V._l.BELOW},e);if("workbench.actions.accounts"===t.id)return this.instantiationService.createInstance(L.v,{position:()=>V._l.BELOW},e)}let s=null===(i=this.editorGroupsContainer.activeGroup)||void 0===i?void 0:i.activeEditorPane;if(s&&s instanceof N.s){let i=s.getActionViewItem(t,e);if(i)return i}return(0,V.Wr)(this.instantiationService,t,(0,P.A)((0,P.A)({},e),{},{menuAsChild:!1}))}getKeybinding(t){var e,i;let s=null!==(e=null===(i=this.editorGroupsContainer.activeGroup)||void 0===i||null===(i=i.activeEditorPane)||void 0===i?void 0:i.scopedContextKeyService)&&void 0!==e?e:this.contextKeyService;return this.keybindingService.lookupKeybinding(t.id,s)}createActionToolBar(){this.actionToolBarDisposable.clear(),this.actionToolBar=this.actionToolBarDisposable.add(this.instantiationService.createInstance(N.cr,this.actionToolBarElement,{contextMenu:V.sb.TitleBarContext,orientation:V.Rr.HORIZONTAL,ariaLabel:(0,V.Ij)(3684,"Title actions"),getKeyBinding:t=>this.getKeybinding(t),overflowBehavior:{maxItems:9,exempted:[L.S,L.C,...W.f]},anchorAlignmentProvider:()=>V.fl.RIGHT,telemetrySource:"titlePart",highlightToggledItems:this.editorActionsEnabled||this.isAuxiliary,actionViewItemProvider:(t,e)=>this.actionViewItemProvider(t,e),hoverDelegate:this.hoverDelegate})),this.editorActionsEnabled&&this.actionToolBarDisposable.add(this.editorGroupsContainer.onDidChangeActiveGroup(()=>this.createActionToolBarMenus({editorActions:!0})))}createActionToolBarMenus(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];!0===t&&(t={editorActions:!0,layoutActions:!0,globalActions:!0,activityActions:!0});let e=()=>{let t={primary:[],secondary:[]};if(this.editorActionsEnabled){this.editorActionsChangeDisposable.clear();let i=this.editorGroupsContainer.activeGroup;if(i){let s=i.createEditorActions(this.editorActionsChangeDisposable,this.isAuxiliary&&this.isCompact?V.sb.CompactWindowEditorTitle:V.sb.EditorTitle);t.primary.push(...s.actions.primary),t.secondary.push(...s.actions.secondary),this.editorActionsChangeDisposable.add(s.onDidChange(()=>e()))}}this.globalToolbarMenu&&(0,V.Gr)(this.globalToolbarMenu.getActions(),t),this.layoutToolbarMenu&&(0,V.Gr)(this.layoutToolbarMenu.getActions(),t,()=>!this.editorActionsEnabled||this.isCompact),this.activityActionsEnabled&&((0,L.x)(this.storageService)&&t.primary.push(ge),t.primary.push(me)),this.actionToolBar.setActions((0,V.Br)(t.primary),(0,V.Br)(t.secondary))};if(t.editorActions)if(this.editorToolbarMenuDisposables.clear(),this.editorActionsEnabled&&void 0!==this.editorService.activeEditor){let t={groupId:this.editorGroupsContainer.activeGroup.id};this.actionToolBar.actionRunner=this.editorToolbarMenuDisposables.add(new W.d(t)),this.actionToolBar.context=t}else this.actionToolBar.actionRunner=this.editorToolbarMenuDisposables.add(new V.kb),this.actionToolBar.context=void 0;t.layoutActions&&(this.layoutToolbarMenuDisposables.clear(),this.layoutControlEnabled?(this.layoutToolbarMenu=this.menuService.createMenu(V.sb.LayoutControlMenu,this.contextKeyService),this.layoutToolbarMenuDisposables.add(this.layoutToolbarMenu),this.layoutToolbarMenuDisposables.add(this.layoutToolbarMenu.onDidChange(()=>e()))):this.layoutToolbarMenu=void 0),t.globalActions&&(this.globalToolbarMenuDisposables.clear(),this.globalActionsEnabled?(this.globalToolbarMenu=this.menuService.createMenu(V.sb.TitleBar,this.contextKeyService),this.globalToolbarMenuDisposables.add(this.globalToolbarMenu),this.globalToolbarMenuDisposables.add(this.globalToolbarMenu.onDidChange(()=>e()))):this.globalToolbarMenu=void 0),t.activityActions&&(this.activityToolbarDisposables.clear(),this.activityActionsEnabled&&this.activityToolbarDisposables.add(this.storageService.onDidChangeValue(V.Go.PROFILE,L._.ACCOUNTS_VISIBILITY_PREFERENCE_KEY,this._store)(()=>e()))),e()}updateStyles(){if(super.updateStyles(),this.element){this.isInactive?this.element.classList.add("inactive"):this.element.classList.remove("inactive");let t=this.getColor(this.isInactive?N.Gn:N.Hn,(t,e)=>t.isOpaque()?t:t.makeOpaque((0,N.Yn)(e)))||"";this.element.style.backgroundColor=t,this.appIconBadge&&(this.appIconBadge.style.backgroundColor=t),t&&V.Sv.fromHex(t).isLighter()?this.element.classList.add("light"):this.element.classList.remove("light");let e=this.getColor(this.isInactive?N.Kn:N.Un);this.element.style.color=e||"";let i=this.getColor(N.Wn);this.element.style.borderBottom=i?"1px solid ".concat(i):""}}onContextMenu(t,e){let i=new V.NT((0,V.Bx)(this.element),t);this.contextMenuService.showContextMenu({getAnchor:()=>i,menuId:e,contextKeyService:this.contextKeyService,domForShadowRoot:V.Cj&&V.Tj?i.target:void 0})}get currentMenubarVisibility(){return this.isAuxiliary?"hidden":(0,V.li)(this.configurationService)}get layoutControlEnabled(){return!1!==this.configurationService.getValue(O.P.LAYOUT_ACTIONS)}get isCommandCenterVisible(){return!this.isCompact&&!1!==this.configurationService.getValue(O.P.COMMAND_CENTER)}get editorActionsEnabled(){return this.editorGroupsContainer.partOptions.editorActionsLocation===O.M.TITLEBAR||this.editorGroupsContainer.partOptions.editorActionsLocation===O.M.DEFAULT&&this.editorGroupsContainer.partOptions.showTabs===O.N.NONE}get activityActionsEnabled(){let t=this.configurationService.getValue(O.P.ACTIVITY_BAR_LOCATION);return!this.isCompact&&!this.isAuxiliary&&(t===O.j.TOP||t===O.j.BOTTOM)}get globalActionsEnabled(){return!this.isCompact}get hasZoomableElements(){let t=!("hidden"===this.currentMenubarVisibility||"compact"===this.currentMenubarVisibility||!V.Dj&&V.Cj),e=this.isCommandCenterVisible,i=this.globalActionsEnabled||this.layoutControlEnabled||this.editorActionsEnabled||this.activityActionsEnabled;return t||e||i}get preventZoom(){return(0,V.QT)((0,V.Bx)(this.element))<1||!this.hasZoomableElements}layout(t,e){this.updateLayout(new V.Qb(t,e)),super.layoutContents(t,e)}updateLayout(t){this.lastLayoutDimensions=t;let e=(0,V.QT)((0,V.Bx)(this.element));if(this.element.style.setProperty("--zoom-factor",e.toString()),this.rootContainer.classList.toggle("counter-zoom",this.preventZoom),this.customMenubar.value){let e=new V.Qb(0,t.height);this.customMenubar.value.layout(e)}let i=this.isCommandCenterVisible||""!==this.title.textContent;this.rootContainer.classList.toggle("has-center",i)}focus(){var t;this.customMenubar.value?this.customMenubar.value.toggleFocus():null===(t=this.element.querySelector('[tabindex]:not([tabindex="-1"])'))||void 0===t||t.focus()}toJSON(){return{type:O.I.TITLEBAR_PART}}dispose(){this._onWillDispose.fire(),super.dispose()}};pe=(0,V.Pb)([(0,V.Fb)(3,V.Sl),(0,V.Fb)(4,V.o_),(0,V.Fb)(5,H.t),(0,V.Fb)(6,V.Ub),(0,V.Fb)(7,V.Qd),(0,V.Fb)(8,V.Uo),(0,V.Fb)(9,O.Z),(0,V.Fb)(10,V.yb),(0,V.Fb)(11,N.P),(0,V.Fb)(12,F.kt),(0,V.Fb)(13,V.Zr),(0,V.Fb)(14,V.kd)],pe);var Ae=class extends pe{constructor(t,e,i,s,n,o,r,a,l,h,d,c,u){super(O.I.TITLEBAR_PART,V.vE,h.mainPart,t,e,i,s,n,o,r,a,l,d,c,u)}};Ae=(0,V.Pb)([(0,V.Fb)(0,V.Sl),(0,V.Fb)(1,V.o_),(0,V.Fb)(2,H.t),(0,V.Fb)(3,V.Ub),(0,V.Fb)(4,V.Qd),(0,V.Fb)(5,V.Uo),(0,V.Fb)(6,O.Z),(0,V.Fb)(7,V.yb),(0,V.Fb)(8,N.P),(0,V.Fb)(9,F.W),(0,V.Fb)(10,F.kt),(0,V.Fb)(11,V.Zr),(0,V.Fb)(12,V.kd)],Ae);var Ie=(S=class extends pe{get height(){return this.minimumHeight}constructor(t,e,i,s,n,o,r,a,l,h,d,c,u,g,m,b){let p=ue.COUNTER++;super("workbench.parts.auxiliaryTitle.".concat(p),(0,V.Bx)(t),e,s,n,o,r,a,l,h,d,c,g,m,b),this.container=t,this.mainTitlebar=i}get preventZoom(){return(0,V.QT)((0,V.Bx)(this.element))<1||!this.mainTitlebar.hasZoomableElements}},{_:ue=S},{_:S.COUNTER=1},S);Ie=ue=(0,V.Pb)([(0,V.Fb)(3,V.Sl),(0,V.Fb)(4,V.o_),(0,V.Fb)(5,H.t),(0,V.Fb)(6,V.Ub),(0,V.Fb)(7,V.Qd),(0,V.Fb)(8,V.Uo),(0,V.Fb)(9,O.Z),(0,V.Fb)(10,V.yb),(0,V.Fb)(11,N.P),(0,V.Fb)(12,F.W),(0,V.Fb)(13,F.kt),(0,V.Fb)(14,V.Zr),(0,V.Fb)(15,V.kd)],Ie),(0,L.Cn)(),(0,O.x)(),(0,O.w)(async t=>{t.get(L.Sn)}),(0,F.b)(),(0,V.ar)();(0,L.nt)(),(0,V.Ib)(),(0,V.Fj)(),(0,x.vx)(),(0,V.Mb)(),(0,O.z)(),(0,O.Q)(),(0,V.tO)(),(0,V.gb)(),(0,V.db)(),(0,H.c)(),(0,F.At)(),(0,O.ir)(),(0,V.qx)(),(0,V.wb)();var ve=class extends V.Ob{constructor(t,e,i){super(t,e,void 0,!0),this.model=i,this.checked=!i.isHidden(t)}async run(){this.model.isHidden(this.id)?this.model.show(this.id):this.model.hide(this.id)}},fe=class extends V.Ob{constructor(t,e,i){super(t,(0,V.Ij)(3640,"Hide '{0}'",e),void 0,!0),this.model=i}async run(){this.model.hide(this.id)}},Ee=class extends V.Ob{constructor(t,e){super("statusbar.manage.extension",(0,V.Ij)(3641,"Manage Extension")),this.extensionId=t,this.commandService=e}run(){return this.commandService.executeCommand("_extensions.manage",this.extensionId)}};Ee=(0,V.Pb)([(0,V.Fb)(1,V.Cb)],Ee),V.hb.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusPrevious",weight:V.mb.WorkbenchContrib,primary:V.YD.LeftArrow,secondary:[V.YD.UpArrow],when:O.qn,handler:t=>{t.get(x._x).focusPreviousEntry()}}),V.hb.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusNext",weight:V.mb.WorkbenchContrib,primary:V.YD.RightArrow,secondary:[V.YD.DownArrow],when:O.qn,handler:t=>{t.get(x._x).focusNextEntry()}}),V.hb.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusFirst",weight:V.mb.WorkbenchContrib,primary:V.YD.Home,when:O.qn,handler:t=>{let e=t.get(x._x);e.focus(!1),e.focusNextEntry()}}),V.hb.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusLast",weight:V.mb.WorkbenchContrib,primary:V.YD.End,when:O.qn,handler:t=>{let e=t.get(x._x);e.focus(!1),e.focusPreviousEntry()}}),V.hb.registerCommandAndKeybindingRule({id:"workbench.statusBar.clearFocus",weight:V.mb.WorkbenchContrib,primary:V.YD.Escape,when:O.qn,handler:t=>{let e=t.get(x._x),i=t.get(F.kt);e.isEntryFocused()?e.focus(!1):i.activeEditorPane&&i.activeEditorPane.focus()}}),(0,V.pb)(class extends V.ob{constructor(){super({id:"workbench.action.focusStatusBar",title:(0,V.Lj)(3642,"Focus Status Bar"),category:H.s.View,f1:!0})}async run(t){t.get(O.Z).focusPart(O.I.STATUSBAR_PART,(0,V.Ex)())}}),(0,V.PA)(),(0,x.Sx)(),(0,V.qx)(),(0,V.Jo)(),(0,V.gA)();var Ce=(_=class t extends V.CA{get entries(){return this._entries.slice(0)}get lastFocusedEntry(){return this._lastFocusedEntry&&!this.isHidden(this._lastFocusedEntry.id)?this._lastFocusedEntry:void 0}constructor(t){super(),this.storageService=t,this._onDidChangeEntryVisibility=this._register(new V.uA),this.onDidChangeEntryVisibility=this._onDidChangeEntryVisibility.event,this._entries=[],this.hidden=new Set,this.restoreState(),this.registerListeners()}restoreState(){let e=this.storageService.get(t.HIDDEN_ENTRIES_KEY,V.Go.PROFILE);if(e)try{this.hidden=new Set(JSON.parse(e))}catch(i){}}registerListeners(){this._register(this.storageService.onDidChangeValue(V.Go.PROFILE,t.HIDDEN_ENTRIES_KEY,this._store)(()=>this.onDidStorageValueChange()))}onDidStorageValueChange(){let t=new Set(this.hidden);this.hidden.clear(),this.restoreState();let e=new Set;for(let i of t)this.hidden.has(i)||e.add(i);for(let i of this.hidden)t.has(i)||e.add(i);if(e.size>0)for(let i of this._entries)e.has(i.id)&&(this.updateVisibility(i.id,!0),e.delete(i.id))}add(t){this._entries.push(t),this.updateVisibility(t,!1),this.sort(),this.markFirstLastVisibleEntry()}remove(t){let e=this._entries.indexOf(t);e>=0&&(this._entries.splice(e,1),this._entries.some(e=>(0,x.Cx)(e.priority.primary)&&e.priority.primary.location.id===t.id)&&this.sort(),this.markFirstLastVisibleEntry())}isHidden(t){return this.hidden.has(t)}hide(t){this.hidden.has(t)||(this.hidden.add(t),this.updateVisibility(t,!0),this.saveState())}show(t){this.hidden.delete(t)&&(this.updateVisibility(t,!0),this.saveState())}findEntry(t){return this._entries.find(e=>e.container===t)}getEntries(t){return this._entries.filter(e=>e.alignment===t)}focusNextEntry(){this.focusEntry(1,0)}focusPreviousEntry(){this.focusEntry(-1,this.entries.length-1)}isEntryFocused(){return!!this.getFocusedEntry()}getFocusedEntry(){return this._entries.find(t=>(0,V.Zx)(t.container))}focusEntry(t,e){let i=e=>{let i=e,s=i>=0&&i<this._entries.length?this._entries[i]:void 0;for(;s&&this.isHidden(s.id);)i+=t,s=i>=0&&i<this._entries.length?this._entries[i]:void 0;return s},s=this.getFocusedEntry();if(s){let e=i(this._entries.indexOf(s)+t);if(e)return this._lastFocusedEntry=e,void e.labelContainer.focus()}let n=i(e);n&&(this._lastFocusedEntry=n,n.labelContainer.focus())}updateVisibility(t,e){if("string"==typeof t){let i=t;for(let t of this._entries)t.id===i&&this.updateVisibility(t,e)}else{let i=t,s=this.isHidden(i.id);s?(0,V.Kx)(i.container):(0,V.DS)(i.container),e&&this._onDidChangeEntryVisibility.fire({id:i.id,visible:!s}),this.markFirstLastVisibleEntry()}}saveState(){this.hidden.size>0?this.storageService.store(t.HIDDEN_ENTRIES_KEY,JSON.stringify(Array.from(this.hidden.values())),V.Go.PROFILE,V.Ko.USER):this.storageService.remove(t.HIDDEN_ENTRIES_KEY,V.Go.PROFILE)}sort(){let t=new Set(this._entries.map(t=>t.id)),e=new Map,i=new Map;for(let o=0;o<this._entries.length;o++){let s=this._entries[o];if("number"!=typeof s.priority.primary&&t.has(s.priority.primary.location.id)){let t=s.priority.primary.location.id,e=i.get(t);if(!e){for(let s of i.values())if(s.has(t)){e=s;break}e||(e=new Map,i.set(t,e))}e.set(s.id,s)}else e.set(s,o)}let s,n=Array.from(e.keys());if(n.sort((t,i)=>{if(t.alignment===i.alignment){let s="number"==typeof t.priority.primary?t.priority.primary:t.priority.primary.location.priority,n="number"==typeof i.priority.primary?i.priority.primary:i.priority.primary.location.priority;return s===n?t.priority.secondary===i.priority.secondary?e.get(t)-e.get(i):i.priority.secondary-t.priority.secondary:n-s}return t.alignment===x.bx.LEFT?-1:i.alignment===x.bx.LEFT?1:0}),i.size>0){s=[];for(let t of n){let e=i.get(t.id),n=e?Array.from(e.values()):void 0;n&&s.push(...n.filter(t=>(0,x.Cx)(t.priority.primary)&&t.priority.primary.alignment===x.bx.LEFT).sort((t,e)=>e.priority.secondary-t.priority.secondary)),s.push(t),n&&s.push(...n.filter(t=>(0,x.Cx)(t.priority.primary)&&t.priority.primary.alignment===x.bx.RIGHT).sort((t,e)=>e.priority.secondary-t.priority.secondary)),i.delete(t.id)}for(let[,t]of i)s.push(...Array.from(t.values()).sort((t,e)=>e.priority.secondary-t.priority.secondary))}else s=n;this._entries=s}markFirstLastVisibleEntry(){this.doMarkFirstLastVisibleStatusbarItem(this.getEntries(x.bx.LEFT)),this.doMarkFirstLastVisibleStatusbarItem(this.getEntries(x.bx.RIGHT))}doMarkFirstLastVisibleStatusbarItem(t){var e,i;let s,n;for(let o of t)o.container.classList.remove("first-visible-item","last-visible-item"),this.isHidden(o.id)||(s||(s=o),n=o);null!==(e=s)&&void 0!==e&&e.container.classList.add("first-visible-item"),null===(i=n)||void 0===i||i.container.classList.add("last-visible-item")}},{_:_.HIDDEN_ENTRIES_KEY="workbench.statusbar.hidden"},_);(0,V.Ib)(),(0,V.Pp)(),(0,V.PA)(),(0,V.wb)(),(0,V.ab)(),(0,x.Sx)(),(0,V.$d)(),(0,V.qx)(),(0,V.Rd)(),(0,V.nM)(),(0,V.zT)(),(0,V.tO)(),(0,V.Yi)(),(0,V.q)(),(0,V.ym)(),(0,V.cr)();var Se=class extends V.CA{get name(){return(0,V.$j)(this.entry).name}get hasCommand(){var t;return void 0!==(null===(t=this.entry)||void 0===t?void 0:t.command)}constructor(t,e,i,s,n,o,r,a){super(),this.container=t,this.hoverDelegate=i,this.commandService=s,this.hoverService=n,this.notificationService=o,this.telemetryService=r,this.themeService=a,this.entry=void 0,this.foregroundListener=this._register(new V.OA),this.backgroundListener=this._register(new V.OA),this.commandMouseListener=this._register(new V.OA),this.commandTouchListener=this._register(new V.OA),this.commandKeyboardListener=this._register(new V.OA),this.hover=void 0,this.labelContainer=(0,V.Zb)("a.statusbar-item-label",{role:"button",tabIndex:-1}),this._register(V.vm.addTarget(this.labelContainer)),this.label=this._register(new we(this.labelContainer)),this.container.appendChild(this.labelContainer),this.beakContainer=(0,V.Zb)(".status-bar-item-beak-container"),this.container.appendChild(this.beakContainer),e.content&&this.container.appendChild(e.content),this.update(e)}update(t){var e;if(this.label.showProgress=null!==(e=t.showProgress)&&void 0!==e&&e,(!this.entry||t.text!==this.entry.text)&&(this.label.text=t.text,t.text?(0,V.DS)(this.labelContainer):(0,V.Kx)(this.labelContainer)),(!this.entry||t.ariaLabel!==this.entry.ariaLabel)&&(this.container.setAttribute("aria-label",t.ariaLabel),this.labelContainer.setAttribute("aria-label",t.ariaLabel)),(!this.entry||t.role!==this.entry.role)&&this.labelContainer.setAttribute("role",t.role||"button"),!this.entry||!this.isEqualTooltip(this.entry,t)){let e,i;(0,x.Tx)(t.tooltip)?(i=t.tooltip.content,e={actions:t.tooltip.commands.map(t=>({commandId:t.id,label:t.title,run:()=>this.executeCommand(t)}))}):i=t.tooltip;let s=(0,V.Rc)(i)?{markdown:i,markdownNotSupportedFallback:void 0}:i;this.hover?this.hover.update(s,e):this.hover=this._register(this.hoverService.setupManagedHover(this.hoverDelegate,this.container,s,e))}if(!this.entry||t.command!==this.entry.command){this.commandMouseListener.clear(),this.commandTouchListener.clear(),this.commandKeyboardListener.clear();let e=t.command;e&&(e!==x.yx||this.hover)?(this.commandMouseListener.value=(0,V.ox)(this.labelContainer,V.tx.CLICK,()=>this.executeCommand(e)),this.commandTouchListener.value=(0,V.ox)(this.labelContainer,V._m.Tap,()=>this.executeCommand(e)),this.commandKeyboardListener.value=(0,V.ox)(this.labelContainer,V.tx.KEY_DOWN,t=>{var i;let s=new V.RT(t);s.equals(V.YD.Space)||s.equals(V.YD.Enter)?(V.ex.stop(t),this.executeCommand(e)):(s.equals(V.YD.Escape)||s.equals(V.YD.LeftArrow)||s.equals(V.YD.RightArrow))&&(V.ex.stop(t),null===(i=this.hover)||void 0===i||i.hide())}),this.labelContainer.classList.remove("disabled")):this.labelContainer.classList.add("disabled")}(!this.entry||t.showBeak!==this.entry.showBeak)&&(t.showBeak?this.container.classList.add("has-beak"):this.container.classList.remove("has-beak"));let i=!!t.backgroundColor||t.kind&&"standard"!==t.kind;if(!this.entry||t.kind!==this.entry.kind){for(let t of x.xx)this.container.classList.remove("".concat(t,"-kind"));t.kind&&"standard"!==t.kind&&this.container.classList.add("".concat(t.kind,"-kind")),this.container.classList.toggle("has-background-color",i)}(!this.entry||t.color!==this.entry.color)&&this.applyColor(this.labelContainer,t.color),(!this.entry||t.backgroundColor!==this.entry.backgroundColor)&&(this.container.classList.toggle("has-background-color",i),this.applyColor(this.container,t.backgroundColor,!0)),this.entry=t}isEqualTooltip(t,e){let{tooltip:i}=t,{tooltip:s}=e;return void 0===i?void 0===s:(0,V.Rc)(i)?(0,V.Rc)(s)&&(0,V.zc)(i,s):i===s}async executeCommand(t){var e;if(t===x.yx)null===(e=this.hover)||void 0===e||e.show(!0);else{var i;let e="string"==typeof t?t:t.id,s="string"==typeof t?[]:null!==(i=t.arguments)&&void 0!==i?i:[];this.telemetryService.publicLog2("workbenchActionExecuted",{id:e,from:"status bar"});try{await this.commandService.executeCommand(e,...s)}catch(t){this.notificationService.error((0,V.Ip)(t))}}}applyColor(t,e,i){let s;if(i?this.backgroundListener.clear():this.foregroundListener.clear(),e)if((0,V.mv)(e)){var n;s=null===(n=this.themeService.getColorTheme().getColor(e.id))||void 0===n?void 0:n.toString();let o=this.themeService.onDidColorThemeChange(s=>{var n;let o=null===(n=s.getColor(e.id))||void 0===n?void 0:n.toString();i?t.style.backgroundColor=null!==o&&void 0!==o?o:"":t.style.color=null!==o&&void 0!==o?o:""});i?this.backgroundListener.value=o:this.foregroundListener.value=o}else s=e;i?t.style.backgroundColor=null!==s&&void 0!==s?s:"":t.style.color=null!==s&&void 0!==s?s:""}};Se=(0,V.Pb)([(0,V.Fb)(3,V.Cb),(0,V.Fb)(4,V.sr),(0,V.Fb)(5,V.Ld),(0,V.Fb)(6,V.ib),(0,V.Fb)(7,V.Qd)],Se);var _e,ye,we=class extends W.p{constructor(t){super(t),this.container=t,this.progressCodicon=(0,V.Xi)(V.X),this.currentText="",this.currentShowProgress=!1}set showProgress(t){this.currentShowProgress!==t&&(this.currentShowProgress=t,this.progressCodicon=(0,V.Xi)("syncing"===t?V.X:V.Y),this.text=this.currentText)}set text(t){if(this.currentShowProgress){this.container.firstChild!==this.progressCodicon&&this.container.appendChild(this.progressCodicon);for(let t of Array.from(this.container.childNodes))t!==this.progressCodicon&&t.remove();let e=null!==t&&void 0!==t?t:"";e&&(e="\xa0".concat(e)),(0,V.dx)(this.container,...(0,V.Zi)(e))}else super.text=t}};(0,V.fE)(),(0,V.Ib)(),(0,V.Fj)(),(0,V.PA)(),(0,L.mt)(),(0,V.ym)(),(0,V.Kb)(),(0,x.Sx)(),(0,x.vx)(),(0,V.wl)(),(0,V.Mb)(),(0,V.$d)(),(0,N.Xn)(),(0,V.ss)(),(0,V.za)(),(0,V.Pg)(),(0,V.wg)(),(0,V.lh)(),(0,V.ig)(),(0,V.Zm)(),(0,V.Pm)(),(0,V.Mm)(),(0,V.uh)(),(0,V.mg)(),(0,V.Om)(),(0,V.Dm)(),(0,V.qx)(),(0,V.qg)(),(0,V.Wo)(),(0,O.z)(),(0,O.Q)(),(0,V.im)(),(0,V.WM)(),(0,V.FT)(),(0,V.nM)(),(0,V.bb)(),(0,O.ir)(),(0,V.gA)(),(0,V.jc)(),(0,V.mE)({});var Te=(y=class extends L.pt{constructor(t,e,i,s,n,o,r,a){super(t,{hasTitle:!1},i,n,o),this.instantiationService=e,this.contextService=s,this.contextMenuService=r,this.contextKeyService=a,this.minimumWidth=0,this.maximumWidth=1/0,this.minimumHeight=_e.HEIGHT,this.maximumHeight=_e.HEIGHT,this.pendingEntries=[],this._onWillDispose=this._register(new V.uA),this.onWillDispose=this._onWillDispose.event,this.onDidOverrideEntry=this._register(new V.uA),this.entryOverrides=new Map,this.compactEntriesDisposable=this._register(new V.OA),this.styleOverrides=new Set,this.viewModel=this._register(new Ce(n)),this.onDidChangeEntryVisibility=this.viewModel.onDidChangeEntryVisibility,this.hoverDelegate=this._register(this.instantiationService.createInstance(V.ir,"element",{instantHover:!0,dynamicDelay(t){if("function"==typeof t||(0,V.iS)(t)||(0,V.Nc)(t)&&"function"==typeof t.markdown||(0,V.Mc)(t))return 500}},(t,e)=>({persistence:{hideOnKeyDown:!0,sticky:e},appearance:{maxHeightRatio:.9}}))),this.registerListeners()}registerListeners(){this._register(this.onDidChangeEntryVisibility(()=>this.updateCompactEntries())),this._register(this.contextService.onDidChangeWorkbenchState(()=>this.updateStyles()))}overrideEntry(t,e){return this.entryOverrides.set(t,e),this.onDidOverrideEntry.fire(t),(0,V.zA)(()=>{this.entryOverrides.get(t)===e&&(this.entryOverrides.delete(t),this.onDidOverrideEntry.fire(t))})}withEntryOverride(t,e){let i=this.entryOverrides.get(e);return i&&(t=(0,P.A)((0,P.A)({},t),i)),t}addEntry(t,e,i){let s,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return s=(0,x.wx)(n)?n:{primary:n,secondary:(0,V.zC)(e)},this.element?this.doAddEntry(t,e,i,s):this.doAddPendingEntry(t,e,i,s)}doAddPendingEntry(t,e,i,s){let n={entry:t,id:e,alignment:i,priority:s};return this.pendingEntries.push(n),{update:t=>{n.accessor?n.accessor.update(t):n.entry=t},dispose:()=>{n.accessor?n.accessor.dispose():this.pendingEntries=this.pendingEntries.filter(t=>t!==n)}}}doAddEntry(t,e,i,s){let n=new V.EA,o=this.doCreateStatusItem(e,i),r=n.add(this.instantiationService.createInstance(Se,o,this.withEntryOverride(t,e),this.hoverDelegate)),a=new class{constructor(){this.id=e,this.extensionId=t.extensionId,this.alignment=i,this.priority=s,this.container=o,this.labelContainer=r.labelContainer}get name(){return r.name}get hasCommand(){return r.hasCommand}},{needsFullRefresh:l}=this.doAddOrRemoveModelEntry(a,!0);l?this.appendStatusbarEntries():this.appendStatusbarEntry(a);let h=t,d={update:t=>{h=t,r.update(this.withEntryOverride(t,e))},dispose:()=>{let{needsFullRefresh:t}=this.doAddOrRemoveModelEntry(a,!1);t?this.appendStatusbarEntries():(o.remove(),this.updateCompactEntries()),n.dispose()}};return n.add(this.onDidOverrideEntry.event(t=>{t===e&&d.update(h)})),d}doCreateStatusItem(t,e){let i=(0,V.Zb)(".statusbar-item",{id:t});for(var s=arguments.length,n=new Array(s>2?s-2:0),o=2;o<s;o++)n[o-2]=arguments[o];return n&&i.classList.add(...n),e===x.bx.RIGHT?i.classList.add("right"):i.classList.add("left"),i}doAddOrRemoveModelEntry(t,e){let i=this.viewModel.entries;e?this.viewModel.add(t):this.viewModel.remove(t);let s=this.viewModel.entries;return e?i.splice(s.indexOf(t),0,t):i.splice(i.indexOf(t),1),{needsFullRefresh:!(0,V.RM)(i,s)}}isEntryVisible(t){return!this.viewModel.isHidden(t)}updateEntryVisibility(t,e){e?this.viewModel.show(t):this.viewModel.hide(t)}focusNextEntry(){this.viewModel.focusNextEntry()}focusPreviousEntry(){this.viewModel.focusPreviousEntry()}isEntryFocused(){return this.viewModel.isEntryFocused()}focus(){var t;let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];null===(t=this.getContainer())||void 0===t||t.focus();let i=this.viewModel.lastFocusedEntry;e&&i&&setTimeout(()=>i.labelContainer.focus(),0)}createContentArea(t){this.element=t;let e=this._register(this.contextKeyService.createScoped(this.element));return O.qn.bindTo(e).set(!0),this.leftItemsContainer=(0,V.Zb)(".left-items.items-container"),this.element.appendChild(this.leftItemsContainer),this.element.tabIndex=0,this.rightItemsContainer=(0,V.Zb)(".right-items.items-container"),this.element.appendChild(this.rightItemsContainer),this._register((0,V.ox)(t,V.tx.CONTEXT_MENU,t=>this.showContextMenu(t))),this._register(V.vm.addTarget(t)),this._register((0,V.ox)(t,V._m.Contextmenu,t=>this.showContextMenu(t))),this.createInitialStatusbarEntries(),this.element}createInitialStatusbarEntries(){for(this.appendStatusbarEntries();this.pendingEntries.length;){let t=this.pendingEntries.shift();t&&(t.accessor=this.addEntry(t.entry,t.id,t.alignment,t.priority.primary))}}appendStatusbarEntries(){let t=(0,V.$j)(this.leftItemsContainer),e=(0,V.$j)(this.rightItemsContainer);(0,V.fx)(t),(0,V.fx)(e);for(let i of[...this.viewModel.getEntries(x.bx.LEFT),...this.viewModel.getEntries(x.bx.RIGHT).reverse()])(i.alignment===x.bx.LEFT?t:e).appendChild(i.container);this.updateCompactEntries()}appendStatusbarEntry(t){let e=this.viewModel.getEntries(t.alignment);t.alignment===x.bx.RIGHT&&e.reverse();let i=(0,V.$j)(t.alignment===x.bx.LEFT?this.leftItemsContainer:this.rightItemsContainer),s=e.indexOf(t);s+1===e.length?i.appendChild(t.container):i.insertBefore(t.container,e[s+1].container),this.updateCompactEntries()}updateCompactEntries(){let t=this.viewModel.entries,e=new Map;for(let o of t)this.viewModel.isHidden(o.id)||e.set(o.id,o),o.container.classList.remove("compact-left","compact-right");let i=new Map;for(let o of e.values())if((0,x.Cx)(o.priority.primary)&&o.priority.primary.compact){let t=o.priority.primary.location.id,s=e.get(t);if(!s)continue;let n=i.get(t);if(!n){for(let e of i.values())if(e.has(t)){n=e;break}n||(n=new Map,i.set(t,n))}n.set(o.id,o),n.set(s.id,s),o.priority.primary.alignment===x.bx.LEFT?(s.container.classList.add("compact-left"),o.container.classList.add("compact-right")):(s.container.classList.add("compact-right"),o.container.classList.add("compact-left"))}let s=this.getColor(N.pn),n=this.getColor(N.dn);if(this.compactEntriesDisposable.value=new V.EA,s&&n&&!(0,V.Em)(this.theme.type))for(let[,o]of i)for(let t of o.values())t.hasCommand&&(this.compactEntriesDisposable.value.add((0,V.ox)(t.labelContainer,V.tx.MOUSE_OVER,()=>{o.forEach(t=>t.labelContainer.style.backgroundColor=s),t.labelContainer.style.backgroundColor=n})),this.compactEntriesDisposable.value.add((0,V.ox)(t.labelContainer,V.tx.MOUSE_OUT,()=>{o.forEach(t=>t.labelContainer.style.backgroundColor="")})))}showContextMenu(t){V.ex.stop(t,!0);let e,i=new V.NT((0,V.Bx)(this.element),t);this.contextMenuService.showContextMenu({getAnchor:()=>i,getActions:()=>(e=this.getContextMenuActions(i),e),onHide:()=>{e&&(0,V.NA)(e)}})}getContextMenuActions(t){let e=[];e.push((0,V.Nb)({id:L.Q.ID,label:(0,V.Ij)(3643,"Hide Status Bar"),run:()=>this.instantiationService.invokeFunction(t=>(new L.Q).run(t))})),e.push(new V.Ab);let i,s=new Set;for(let n of this.viewModel.entries)s.has(n.id)||(e.push(new ve(n.id,n.name,this.viewModel)),s.add(n.id));for(let n=t.target;n;n=n.parentElement){let t=this.viewModel.findEntry(n);if(t){i=t;break}}return i&&(e.push(new V.Ab),i.extensionId&&e.push(this.instantiationService.createInstance(Ee,i.extensionId)),e.push(new fe(i.id,i.name,this.viewModel))),e}updateStyles(){var t,e,i,s;super.updateStyles();let n=(0,V.$j)(this.getContainer()),o=[...this.styleOverrides].sort((t,e)=>t.priority-e.priority)[0],r=this.getColor(null!==(t=null===o||void 0===o?void 0:o.background)&&void 0!==t?t:this.contextService.getWorkbenchState()===V.rs.EMPTY?N.mn:N.on)||"";n.style.backgroundColor=r;let a=this.getColor(null!==(e=null===o||void 0===o?void 0:o.foreground)&&void 0!==e?e:this.contextService.getWorkbenchState()===V.rs.EMPTY?N.gn:N.un)||"";n.style.color=a;let l=this.getColor(N.fn),h=this.getColor(null!==(i=null===o||void 0===o?void 0:o.border)&&void 0!==i?i:this.contextService.getWorkbenchState()===V.rs.EMPTY?N.hn:N.sn)||this.getColor(V._g);h?(n.classList.add("status-border-top"),n.style.setProperty("--status-border-top-color",h)):(n.classList.remove("status-border-top"),n.style.removeProperty("--status-border-top-color"));let d=this.getColor(N.ln);this.styleElement||(this.styleElement=(0,V.Gg)(n)),this.styleElement.textContent="\n\n\t\t\t\t/* Status bar focus outline */\n\t\t\t\t.monaco-workbench .part.statusbar:focus {\n\t\t\t\t\toutline-color: ".concat(d,";\n\t\t\t\t}\n\n\t\t\t\t/* Status bar item focus outline */\n\t\t\t\t.monaco-workbench .part.statusbar > .items-container > .statusbar-item a:focus-visible {\n\t\t\t\t\toutline: 1px solid ").concat(null!==(s=this.getColor(V.gg))&&void 0!==s?s:l,";\n\t\t\t\t\toutline-offset: ").concat(h?"-2px":"-1px",";\n\t\t\t\t}\n\n\t\t\t\t/* Notification Beak */\n\t\t\t\t.monaco-workbench .part.statusbar > .items-container > .statusbar-item.has-beak > .status-bar-item-beak-container:before {\n\t\t\t\t\tborder-bottom-color: ").concat(null!==h&&void 0!==h?h:r,";\n\t\t\t\t}\n\t\t\t")}layout(t,e,i,s){super.layout(t,e,i,s),super.layoutContents(t,e)}overrideStyle(t){return this.styleOverrides.add(t),this.updateStyles(),(0,V.zA)(()=>{this.styleOverrides.delete(t),this.updateStyles()})}toJSON(){return{type:O.I.STATUSBAR_PART}}dispose(){this._onWillDispose.fire(),super.dispose()}},{_:_e=y},{_:y.HEIGHT=22},y);Te=_e=(0,V.Pb)([(0,V.Fb)(1,V.Ub),(0,V.Fb)(2,V.Qd),(0,V.Fb)(3,V.Ra),(0,V.Fb)(4,V.Uo),(0,V.Fb)(5,O.Z),(0,V.Fb)(6,V.Sl),(0,V.Fb)(7,V.yb)],Te);var De=class extends Te{constructor(t,e,i,s,n,o,r){super(O.I.STATUSBAR_PART,t,e,i,s,n,o,r)}};De=(0,V.Pb)([(0,V.Fb)(0,V.Ub),(0,V.Fb)(1,V.Qd),(0,V.Fb)(2,V.Ra),(0,V.Fb)(3,V.Uo),(0,V.Fb)(4,O.Z),(0,V.Fb)(5,V.Sl),(0,V.Fb)(6,V.yb)],De);var Re=(w=class extends Te{constructor(t,e,i,s,n,o,r,a){let l=ye.COUNTER++;super("workbench.parts.auxiliaryStatus.".concat(l),e,i,s,n,o,r,a),this.container=t,this.height=Te.HEIGHT}},{_:ye=w},{_:w.COUNTER=1},w);Re=ye=(0,V.Pb)([(0,V.Fb)(1,V.Ub),(0,V.Fb)(2,V.Qd),(0,V.Fb)(3,V.Ra),(0,V.Fb)(4,V.Uo),(0,V.Fb)(5,O.Z),(0,V.Fb)(6,V.Sl),(0,V.Fb)(7,V.yb)],Re);var Pe=class extends L.ft{constructor(t,e,i){super("workbench.statusBarService",i,e),this.instantiationService=t,this._onDidCreateAuxiliaryStatusbarPart=this._register(new V.uA),this.onDidCreateAuxiliaryStatusbarPart=this._onDidCreateAuxiliaryStatusbarPart.event,this.mainPart=this._register(this.instantiationService.createInstance(De)),this._register(this.registerPart(this.mainPart)),this.onDidChangeEntryVisibility=this.mainPart.onDidChangeEntryVisibility}createAuxiliaryStatusbarPart(t,e){let i=(0,V.Zb)("footer.part.statusbar",{role:"status","aria-live":"off",tabIndex:"0"});i.style.position="relative",t.appendChild(i);let s=e.createInstance(Re,i),n=this.registerPart(s);return s.create(i),V.dA.once(s.onWillDispose)(()=>n.dispose()),this._onDidCreateAuxiliaryStatusbarPart.fire(s),s}createScoped(t,e){return e.add(this.instantiationService.createInstance(Ve,t))}addEntry(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return t.showInAllWindows?this.doAddEntryToAllWindows(t,e,i,s):this.mainPart.addEntry(t,e,i,s)}doAddEntryToAllWindows(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=new V.EA,o=new Set,r=t;function a(t){let a=new V.EA;a.add(t.onWillDispose(()=>a.dispose()));let l=a.add(t.addEntry(r,e,i,s));o.add(l),a.add((0,V.zA)(()=>o.delete(l))),n.add(a),a.add((0,V.zA)(()=>n.delete(a)))}for(let l of this.parts)a(l);return n.add(this.onDidCreateAuxiliaryStatusbarPart(t=>a(t))),{update:t=>{r=t;for(let e of o)e.update(t)},dispose:()=>n.dispose()}}isEntryVisible(t){return this.mainPart.isEntryVisible(t)}updateEntryVisibility(t,e){for(let i of this.parts)i.updateEntryVisibility(t,e)}overrideEntry(t,e){let i=new V.EA;for(let s of this.parts)i.add(s.overrideEntry(t,e));return i}focus(t){this.activePart.focus(t)}focusNextEntry(){this.activePart.focusNextEntry()}focusPreviousEntry(){this.activePart.focusPreviousEntry()}isEntryFocused(){return this.activePart.isEntryFocused()}overrideStyle(t){let e=new V.EA;for(let i of this.parts)e.add(i.overrideStyle(t));return e}};Pe=(0,V.Pb)([(0,V.Fb)(0,V.Ub),(0,V.Fb)(1,V.Uo),(0,V.Fb)(2,V.Qd)],Pe);var Ve=class extends V.CA{constructor(t,e){super(),this.statusbarEntryContainer=t,this.statusbarService=e,this.onDidChangeEntryVisibility=this.statusbarEntryContainer.onDidChangeEntryVisibility}createAuxiliaryStatusbarPart(t,e){return this.statusbarService.createAuxiliaryStatusbarPart(t,e)}createScoped(t,e){return this.statusbarService.createScoped(t,e)}getPart(){return this.statusbarEntryContainer}addEntry(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.statusbarEntryContainer.addEntry(t,e,i,s)}isEntryVisible(t){return this.statusbarEntryContainer.isEntryVisible(t)}updateEntryVisibility(t,e){this.statusbarEntryContainer.updateEntryVisibility(t,e)}overrideEntry(t,e){return this.statusbarEntryContainer.overrideEntry(t,e)}focus(t){this.statusbarEntryContainer.focus(t)}focusNextEntry(){this.statusbarEntryContainer.focusNextEntry()}focusPreviousEntry(){this.statusbarEntryContainer.focusPreviousEntry()}isEntryFocused(){return this.statusbarEntryContainer.isEntryFocused()}overrideStyle(t){return this.statusbarEntryContainer.overrideStyle(t)}};function Le(t){let e=t;return"string"==typeof e.id&&e.id.length>0&&"string"==typeof e.name&&"string"==typeof e.text&&("left"===e.alignment||"right"===e.alignment)&&(void 0===e.command||"string"==typeof e.command)&&(void 0===e.tooltip||"string"==typeof e.tooltip)&&(void 0===e.priority||"number"==typeof e.priority)&&(void 0===e.accessibilityInformation||(0,V.MO)(e.accessibilityInformation))}Ve=(0,V.Pb)([(0,V.Fb)(1,x._x)],Ve),(0,V.Ib)(),(0,V.PA)(),(0,V.Fj)(),(0,V.Kb)(),(0,k.P)(),(0,G.a)(),(0,V.jO)(),(0,O.gr)(),(0,x.pu)(),(0,x.gx)();var Ne={type:"object",required:["id","text","alignment","name"],properties:{id:{type:"string",markdownDescription:(0,V.Ij)(2564,"The identifier of the status bar entry. Must be unique within the extension. The same value must be used when calling the `vscode.window.createStatusBarItem(id, ...)`-API")},name:{type:"string",description:(0,V.Ij)(2565,"The name of the entry, like 'Python Language Indicator', 'Git Status' etc. Try to keep the length of the name short, yet descriptive enough that users can understand what the status bar item is about.")},text:{type:"string",description:(0,V.Ij)(2566,"The text to show for the entry. You can embed icons in the text by leveraging the `$(<name>)`-syntax, like 'Hello $(globe)!'")},tooltip:{type:"string",description:(0,V.Ij)(2567,"The tooltip text for the entry.")},command:{type:"string",description:(0,V.Ij)(2568,"The command to execute when the status bar entry is clicked.")},alignment:{type:"string",enum:["left","right"],description:(0,V.Ij)(2569,"The alignment of the status bar entry.")},priority:{type:"number",description:(0,V.Ij)(2570,"The priority of the status bar entry. Higher value means the item should be shown more to the left.")},accessibilityInformation:{type:"object",description:(0,V.Ij)(2571,"Defines the role and aria label to be used when the status bar entry is focused."),required:["label"],properties:{role:{type:"string",description:(0,V.Ij)(2572,"The role of the status bar entry which defines how a screen reader interacts with it. More about aria roles can be found here https://w3c.github.io/aria/#widget_roles")},label:{type:"string",description:(0,V.Ij)(2573,"The aria label of the status bar entry. Defaults to the entry's text.")}}}}},xe={description:(0,V.Ij)(2574,"Contributes items to the status bar."),oneOf:[Ne,{type:"array",items:Ne}]},Me=G.i.registerExtensionPoint({extensionPoint:"statusBarItems",jsonSchema:xe}),Be=class{constructor(t){let e=new V.EA;Me.setHandler(i=>{e.clear();for(let o of i){if(!(0,k.F)(o.description,"contribStatusBarItems")){o.collector.error("The ".concat(Me.name," is proposed API"));continue}let{value:i,collector:r}=o;for(let a of V.BA.wrap(i)){var s,n;if(!Le(a)){r.error((0,V.Ij)(2575,"Invalid status bar item contribution."));continue}let i=(0,x.fu)(o.description.identifier,a.id);t.setOrUpdateEntry(i,i,O.lr.toKey(o.description.identifier),null!==(s=null!==(n=a.name)&&void 0!==n?n:o.description.displayName)&&void 0!==s?s:o.description.name,a.text,a.tooltip,a.command?{id:a.command,title:a.name}:void 0,void 0,void 0,"left"===a.alignment,a.priority,a.accessibilityInformation)===x.hx.DidDefine&&e.add((0,V.zA)(()=>t.unsetEntry(i)))}}})}};Be=(0,V.Pb)([(0,V.Fb)(0,x.mx)],Be);var Oe=(T=class{constructor(t){this.instantiationService=t,this.instantiationService.createInstance(Be)}},{_:T.ID="workbench.contrib.statusBarItemsExtensionPoint"},T);Oe=(0,V.Pb)([(0,V.Fb)(0,V.Ub)],Oe),(0,F.x)(Oe.ID,Oe,F.y.BlockStartup),(0,V.sm)(),(0,x.vx)(),(0,x.gx)(),(0,V.fE)(),(0,V.Ib)(),(0,V.Fj)(),(0,V.qx)(),(0,V.zr)(),(0,V.im)(),(0,V.Kb)(),(0,V.Wo)(),(0,V.$d)(),(0,V.Db)(),(0,L.mt)(),(0,O.z)(),(0,O.Q)(),(0,V.Mb)(),(0,x.Mf)(),(0,V.gA)(),(0,L.Nn)(),(0,V.dl)(),(0,V.db)(),(0,H.c)(),(0,V.gb)(),(0,V.tO)(),(0,V.bb)(),(0,V.TD)(),(0,V.q)(),(0,O.ir)(),(0,V.mE)({});var Fe=class extends L.pt{get minimumHeight(){return this.visible?this.height:0}get maximumHeight(){return this.visible?this.height:0}get onDidChange(){return this._onDidChangeSize.event}constructor(t,e,i,s,n,o){super(O.I.BANNER_PART,{hasTitle:!1},t,i,e),this.contextKeyService=s,this.instantiationService=n,this.markdownRendererService=o,this.height=26,this.minimumWidth=0,this.maximumWidth=1/0,this._onDidChangeSize=this._register(new V.uA),this.visible=!1,this.focusedActionIndex=-1}createContentArea(t){this.element=t,this.element.tabIndex=0,this._register((0,V.ox)(this.element,V.tx.FOCUS,()=>{-1!==this.focusedActionIndex&&this.focusActionLink()}));let e=this._register(this.contextKeyService.createScoped(this.element));return O.fn.bindTo(e).set(!0),this.element}close(t){this.setVisibility(!1),(0,V.fx)(this.element),"function"==typeof t.onClose&&t.onClose(),this.item=void 0}focusActionLink(){var t,e,i;let s=null!==(t=null===(e=this.item)||void 0===e||null===(e=e.actions)||void 0===e?void 0:e.length)&&void 0!==t?t:0;if(this.focusedActionIndex<s){var n,o;let t=null===(n=this.messageActionsContainer)||void 0===n?void 0:n.children[this.focusedActionIndex];(0,V.iS)(t)&&(null!==(o=this.actionBar)&&void 0!==o&&o.setFocusable(!1),t.focus())}else null===(i=this.actionBar)||void 0===i||i.focus(0)}getAriaLabel(t){return t.ariaLabel?t.ariaLabel:"string"==typeof t.message?t.message:void 0}getBannerMessage(t){if("string"==typeof t){let e=(0,V.Zb)("span");return e.textContent=t,e}return this.markdownRendererService.render(t).element}setVisibility(t){t!==this.visible&&(this.visible=t,this.focusedActionIndex=-1,this.layoutService.setPartHidden(!t,O.I.BANNER_PART),this._onDidChangeSize.fire(void 0))}focus(){this.focusedActionIndex=-1,this.element.focus()}focusNextAction(){var t,e;let i=null!==(t=null===(e=this.item)||void 0===e||null===(e=e.actions)||void 0===e?void 0:e.length)&&void 0!==t?t:0;this.focusedActionIndex=this.focusedActionIndex<i?this.focusedActionIndex+1:0,this.focusActionLink()}focusPreviousAction(){var t,e;let i=null!==(t=null===(e=this.item)||void 0===e||null===(e=e.actions)||void 0===e?void 0:e.length)&&void 0!==t?t:0;this.focusedActionIndex=this.focusedActionIndex>0?this.focusedActionIndex-1:i,this.focusActionLink()}hide(t){var e;(null===(e=this.item)||void 0===e?void 0:e.id)===t&&this.setVisibility(!1)}show(t){var e,i;if(t.id===(null===(e=this.item)||void 0===e?void 0:e.id))return void this.setVisibility(!0);(0,V.fx)(this.element);let s=this.getAriaLabel(t);s&&this.element.setAttribute("aria-label",s);let n=(0,V.dx)(this.element,(0,V.Zb)("div.icon-container"));n.setAttribute("aria-hidden","true"),V.Eb.isThemeIcon(t.icon)?n.appendChild((0,V.Zb)("div".concat(V.Eb.asCSSSelector(t.icon)))):(n.classList.add("custom-icon"),V.wD.isUri(t.icon)&&(n.style.backgroundImage=(0,V.Gl)(t.icon)));let o=(0,V.dx)(this.element,(0,V.Zb)("div.message-container"));if(o.setAttribute("aria-hidden","true"),o.appendChild(this.getBannerMessage(t.message)),this.messageActionsContainer=(0,V.dx)(this.element,(0,V.Zb)("div.message-actions-container")),t.actions)for(let h of t.actions)this._register(this.instantiationService.createInstance(x.jf,this.messageActionsContainer,(0,P.A)((0,P.A)({},h),{},{tabIndex:-1}),{}));let r=(0,V.dx)(this.element,(0,V.Zb)("div.action-container"));this.actionBar=this._register(new V.Lr(r));let a=null!==(i=t.closeLabel)&&void 0!==i?i:(0,V.Ij)(3032,"Close Banner"),l=this._register(new V.Ob("banner.close",a,V.Eb.asClassName(V.Z),!0,()=>this.close(t)));this.actionBar.push(l,{icon:!0,label:!1}),this.actionBar.setFocusable(!1),this.setVisibility(!0),this.item=t}toJSON(){return{type:O.I.BANNER_PART}}};Fe=(0,V.Pb)([(0,V.Fb)(0,V.Qd),(0,V.Fb)(1,O.Z),(0,V.Fb)(2,V.Uo),(0,V.Fb)(3,V.yb),(0,V.Fb)(4,V.Ub),(0,V.Fb)(5,V.ul)],Fe),V.hb.registerCommandAndKeybindingRule({id:"workbench.banner.focusBanner",weight:V.mb.WorkbenchContrib,primary:V.YD.Escape,when:O.fn,handler:t=>{t.get(L.Mn).focus()}}),V.hb.registerCommandAndKeybindingRule({id:"workbench.banner.focusNextAction",weight:V.mb.WorkbenchContrib,primary:V.YD.RightArrow,secondary:[V.YD.DownArrow],when:O.fn,handler:t=>{t.get(L.Mn).focusNextAction()}}),V.hb.registerCommandAndKeybindingRule({id:"workbench.banner.focusPreviousAction",weight:V.mb.WorkbenchContrib,primary:V.YD.LeftArrow,secondary:[V.YD.UpArrow],when:O.fn,handler:t=>{t.get(L.Mn).focusPreviousAction()}}),(0,V.pb)((D=class t extends V.ob{constructor(){super({id:t.ID,title:t.LABEL,category:H.s.View,f1:!0})}async run(t){t.get(O.Z).focusPart(O.I.BANNER_PART)}},{_:D.ID="workbench.action.focusBanner"},{_:D.LABEL=(0,V.Lj)(3033,"Focus Banner")},D)),(0,V.Ib)(),(0,F.L)(),(0,F.b)(),(0,L.Nn)(),(0,V.Jo)(),(0,V.Wo)(),(0,H.n)(),(0,V.TD)(),(0,V.Db)();var ke,He=(R=class{constructor(t,e,i){var s;let n,o=null===(s=i.options)||void 0===s?void 0:s.welcomeBanner;o&&!e.getBoolean(ke.WELCOME_BANNER_DISMISSED_KEY,V.Go.PROFILE,!1)&&("string"==typeof o.icon?n=V.Eb.fromId(o.icon):o.icon&&(n=V.wD.revive(o.icon)),t.show({id:"welcome.banner",message:o.message,icon:n,actions:o.actions,onClose:()=>{e.store(ke.WELCOME_BANNER_DISMISSED_KEY,!0,V.Go.PROFILE,V.Ko.MACHINE)}}))}},{_:ke=R},{_:R.WELCOME_BANNER_DISMISSED_KEY="workbench.banner.welcome.dismissed"},R);He=ke=(0,V.Pb)([(0,V.Fb)(0,L.Mn),(0,V.Fb)(1,V.Uo),(0,V.Fb)(2,H.t)],He),V._b.as(F.v.Workbench).registerWorkbenchContribution(He,F.M.Restored),(0,V.sm)(),(0,L.Nn)(),(0,O.x)(),(0,O.w)(async t=>{t.get(L.Mn)}),(0,V.Ib)(),(0,V.nb)(),(0,V.Kb)(),(0,O.Q)(),(0,V.sm)(),(0,F.G)(),(0,F.At)(),(0,V.xN)(),(0,V.qx)(),(0,V.gE)(),(0,V.eE)(),(0,O.rt)(),(0,O.x)(),(0,x.Df)(),(0,x.L)(),(0,x.ca)(),(0,N.a)(),(0,N.x)(),(0,N._)(),(0,F.Mt)(),(0,F.en)(),(0,O.z)(),(0,V.Yt)();var Ge=class extends ae{constructor(t,e,i){super((0,O.tt)(),t,new V.eu,e),this.instantiationService=i,this.mainContainer.classList.add("monaco-workbench-part")}registerErrorHandler(t){(0,V.TN)(e=>this.handleUnexpectedError(e,t))}createNotificationsHandlers(){}initServices(){return this.instantiationService}restore(t){try{this.restoreParts(t)}catch(t){(0,V.CN)(t)}}};function Ue(t,e){return(0,P.A)((0,P.A)((0,P.A)((0,P.A)((0,P.A)((0,P.A)({},(0,W.i)(e)),(0,L.yt)({isKeybindingConfigurationVisible:()=>!0,shouldUseGlobalPicker:()=>!0})),(0,W.o)({shouldUseGlobalKeybindings:()=>!0})),{},{[O.Z.toString()]:new V.om(Ge,[t],!1),[F.W.toString()]:new V.om(W.u,[],!1),[F.kt.toString()]:new V.om(U.i,[void 0],!1)},{[L.Sn.toString()]:new V.om(be,[],!1)}),{[x._x.toString()]:new V.om(Pe,[],!1),[x.mx.toString()]:new V.om(x.px,[],!1)}),{[L.Mn.toString()]:new V.om(Fe,[],!1)})}Ge=(0,V.Pb)([(0,V.Fb)(1,V.eb),(0,V.Fb)(2,V.Ub)],Ge),(0,O.S)(async t=>{t.get(O.Z).startup();let e=(0,V.xx)(V.vE,(0,O.tt)());(0,V.dE)(null!=e&&!e.guess,V.vE)}),(0,O.C)(async t=>{t.get(V.Ub).createInstance(W.a)})}}]);