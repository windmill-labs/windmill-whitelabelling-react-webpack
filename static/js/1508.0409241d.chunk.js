"use strict";(self.webpackChunkWindmill_Whitelabel_Example=self.webpackChunkWindmill_Whitelabel_Example||[]).push([[1508],{9127:(e,t,s)=>{s.r(t),s.d(t,{ErrorEvent:()=>o,EventSource:()=>j});var i=s(9379);class n extends Error{constructor(e,t){super(e),this.name="ParseError",this.type=t.type,this.field=t.field,this.value=t.value,this.line=t.line}}function r(e){}function a(e){if("function"==typeof e)throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=r,onError:s=r,onRetry:i=r,onComment:a}=e;let o,h="",c=!0,l="",d="";function u(e){if(""===e)return l.length>0&&t({id:o,event:d||void 0,data:l.endsWith("\n")?l.slice(0,-1):l}),o=void 0,l="",void(d="");if(e.startsWith(":"))return void(a&&a(e.slice(e.startsWith(": ")?2:1)));const s=e.indexOf(":");if(-1===s)v(e,"",e);else{const t=e.slice(0,s),i=" "===e[s+1]?2:1;v(t,e.slice(s+i),e)}}function v(e,t,r){switch(e){case"event":d=t;break;case"data":l="".concat(l).concat(t,"\n");break;case"id":o=t.includes("\0")?void 0:t;break;case"retry":/^\d+$/.test(t)?i(parseInt(t,10)):s(new n('Invalid `retry` value: "'.concat(t,'"'),{type:"invalid-retry",value:t,line:r}));break;default:s(new n('Unknown field "'.concat(e.length>20?"".concat(e.slice(0,20),"\u2026"):e,'"'),{type:"unknown-field",field:e,value:t,line:r}))}}return{feed:function(e){const t=c?e.replace(/^\xEF\xBB\xBF/,""):e,[s,i]=function(e){const t=[];let s="",i=0;for(;i<e.length;){const n=e.indexOf("\r",i),r=e.indexOf("\n",i);let a=-1;if(-1!==n&&-1!==r?a=Math.min(n,r):-1!==n?a=n:-1!==r&&(a=r),-1===a){s=e.slice(i);break}{const s=e.slice(i,a);t.push(s),i=a+1,"\r"===e[i-1]&&"\n"===e[i]&&i++}}return[t,s]}("".concat(h).concat(t));for(const n of s)u(n);h=i,c=!1},reset:function(){h&&(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).consume&&u(h),c=!0,o=void 0,l="",d="",h=""}}}class o extends Event{constructor(e,t){var s,i;super(e),this.code=null!=(s=null==t?void 0:t.code)?s:void 0,this.message=null!=(i=null==t?void 0:t.message)?i:void 0}[Symbol.for("nodejs.util.inspect.custom")](e,t,s){return s(c(this),t)}[Symbol.for("Deno.customInspect")](e,t){return e(c(this),t)}}function h(e){return e instanceof Error?"errors"in e&&Array.isArray(e.errors)?e.errors.map(h).join(", "):"cause"in e&&e.cause instanceof Error?"".concat(e,": ").concat(h(e.cause)):e.message:"".concat(e)}function c(e){return{type:e.type,message:e.message,code:e.code,defaultPrevented:e.defaultPrevented,cancelable:e.cancelable,timeStamp:e.timeStamp}}var l,d,u,v,f,p,w,E,m,g,b,y,k,C,W,N,M,O,x,S,T,I,L,D=e=>{throw TypeError(e)},R=(e,t,s)=>t.has(e)||D("Cannot "+s),U=(e,t,s)=>(R(e,t,"read from private field"),s?s.call(e):t.get(e)),A=(e,t,s)=>t.has(e)?D("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),P=(e,t,s,i)=>(R(e,t,"write to private field"),t.set(e,s),s),G=(e,t,s)=>(R(e,t,"access private method"),s);class j extends EventTarget{constructor(e,t){var s,i;super(),A(this,C),this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,A(this,l),A(this,d),A(this,u),A(this,v),A(this,f),A(this,p),A(this,w),A(this,E,null),A(this,m),A(this,g),A(this,b,null),A(this,y,null),A(this,k,null),A(this,N,(async e=>{var t;U(this,g).reset();const{body:s,redirected:i,status:n,headers:r}=e;if(204===n)return G(this,C,T).call(this,"Server sent HTTP 204, not reconnecting",204),void this.close();if(P(this,u,i?new URL(e.url):void 0),200!==n)return void G(this,C,T).call(this,"Non-200 status code (".concat(n,")"),n);if(!(r.get("content-type")||"").startsWith("text/event-stream"))return void G(this,C,T).call(this,'Invalid content type, expected "text/event-stream"',n);if(U(this,l)===this.CLOSED)return;P(this,l,this.OPEN);const a=new Event("open");if(null==(t=U(this,k))||t.call(this,a),this.dispatchEvent(a),"object"!=typeof s||!s||!("getReader"in s))return G(this,C,T).call(this,"Invalid response body, expected a web ReadableStream",n),void this.close();const o=new TextDecoder,h=s.getReader();let c=!0;do{const{done:e,value:t}=await h.read();t&&U(this,g).feed(o.decode(t,{stream:!e})),e&&(c=!1,U(this,g).reset(),G(this,C,I).call(this))}while(c)})),A(this,M,(e=>{P(this,m,void 0),"AbortError"!==e.name&&"aborted"!==e.type&&G(this,C,I).call(this,h(e))})),A(this,x,(e=>{"string"==typeof e.id&&P(this,E,e.id);const t=new MessageEvent(e.event||"message",{data:e.data,origin:U(this,u)?U(this,u).origin:U(this,d).origin,lastEventId:e.id||""});U(this,y)&&(!e.event||"message"===e.event)&&U(this,y).call(this,t),this.dispatchEvent(t)})),A(this,S,(e=>{P(this,p,e)})),A(this,L,(()=>{P(this,w,void 0),U(this,l)===this.CONNECTING&&G(this,C,W).call(this)}));try{if(e instanceof URL)P(this,d,e);else{if("string"!=typeof e)throw new Error("Invalid URL");P(this,d,new URL(e,function(){const e="document"in globalThis?globalThis.document:void 0;return e&&"object"==typeof e&&"baseURI"in e&&"string"==typeof e.baseURI?e.baseURI:void 0}()))}}catch(n){throw function(e){const t=globalThis.DOMException;return"function"==typeof t?new t(e,"SyntaxError"):new SyntaxError(e)}("An invalid or illegal string was specified")}P(this,g,a({onEvent:U(this,x),onRetry:U(this,S)})),P(this,l,this.CONNECTING),P(this,p,3e3),P(this,f,null!=(s=null==t?void 0:t.fetch)?s:globalThis.fetch),P(this,v,null!=(i=null==t?void 0:t.withCredentials)&&i),G(this,C,W).call(this)}get readyState(){return U(this,l)}get url(){return U(this,d).href}get withCredentials(){return U(this,v)}get onerror(){return U(this,b)}set onerror(e){P(this,b,e)}get onmessage(){return U(this,y)}set onmessage(e){P(this,y,e)}get onopen(){return U(this,k)}set onopen(e){P(this,k,e)}addEventListener(e,t,s){const i=t;super.addEventListener(e,i,s)}removeEventListener(e,t,s){const i=t;super.removeEventListener(e,i,s)}close(){U(this,w)&&clearTimeout(U(this,w)),U(this,l)!==this.CLOSED&&(U(this,m)&&U(this,m).abort(),P(this,l,this.CLOSED),P(this,m,void 0))}}l=new WeakMap,d=new WeakMap,u=new WeakMap,v=new WeakMap,f=new WeakMap,p=new WeakMap,w=new WeakMap,E=new WeakMap,m=new WeakMap,g=new WeakMap,b=new WeakMap,y=new WeakMap,k=new WeakMap,C=new WeakSet,W=function(){P(this,l,this.CONNECTING),P(this,m,new AbortController),U(this,f)(U(this,d),G(this,C,O).call(this)).then(U(this,N)).catch(U(this,M))},N=new WeakMap,M=new WeakMap,O=function(){var e;const t={mode:"cors",redirect:"follow",headers:(0,i.A)({Accept:"text/event-stream"},U(this,E)?{"Last-Event-ID":U(this,E)}:void 0),cache:"no-store",signal:null==(e=U(this,m))?void 0:e.signal};return"window"in globalThis&&(t.credentials=this.withCredentials?"include":"same-origin"),t},x=new WeakMap,S=new WeakMap,T=function(e,t){var s;U(this,l)!==this.CLOSED&&P(this,l,this.CLOSED);const i=new o("error",{code:t,message:e});null==(s=U(this,b))||s.call(this,i),this.dispatchEvent(i)},I=function(e,t){var s;if(U(this,l)===this.CLOSED)return;P(this,l,this.CONNECTING);const i=new o("error",{code:t,message:e});null==(s=U(this,b))||s.call(this,i),this.dispatchEvent(i),P(this,w,setTimeout(U(this,L),U(this,p)))},L=new WeakMap,j.CONNECTING=0,j.OPEN=1,j.CLOSED=2}}]);