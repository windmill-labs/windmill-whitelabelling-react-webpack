"use strict";(self.webpackChunkWindmill_Whitelabel_Example=self.webpackChunkWindmill_Whitelabel_Example||[]).push([[6300],{6300:(e,t,i)=>{i.d(t,{a:()=>I,c:()=>S,i:()=>P,l:()=>f,n:()=>F,o:()=>w,r:()=>N,s:()=>C,t:()=>V});var r,s,o,n,d,a=i(9379),l=i(1359),h=i(6095),u=i(3373),c=i(8638),p=i(1070),g=i(9796);(0,l.Xb)(),(0,p.en)(),(0,h._)(),(0,p.D)(),(0,l.Ua)(),(0,p.At)(),(0,l.ps)(),(0,l.dT)(),(0,p.k)(),(0,p.j)(),(0,p.V)(),(0,l.Qb)(),(0,l.wj)(),(0,l.pv)(),(0,h.U)();var v,f=(r=class extends h.h{get typeId(){return v.ID}get editorId(){return p.Ft.id}constructor(e,t,i,r,s,o,n,d,a,h,u){super(e.resource,void 0,r,t,i,s,d,h,u),this.model=e,this.environmentService=o,this.pathService=n,this.textModelService=a,this.modelResolve=void 0,this.modelDisposables=this._register(new l.gj),this.cachedUntitledTextEditorModelReference=void 0,this.registerModelListeners(e),this._register(this.textFileService.untitled.onDidCreate(e=>this.onDidCreateUntitledModel(e)))}registerModelListeners(e){this.modelDisposables.clear(),this.modelDisposables.add(e.onDidChangeDirty(()=>this._onDidChangeDirty.fire())),this.modelDisposables.add(e.onDidChangeName(()=>this._onDidChangeLabel.fire())),this.modelDisposables.add(e.onDidRevert(()=>this.dispose()))}onDidCreateUntitledModel(e){(0,l.pT)(e.resource,this.model.resource)&&e!==this.model&&(this.model=e,this.registerModelListeners(e))}getName(){return this.model.name}getDescription(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.Xt.MEDIUM;if(!this.model.hasAssociatedFilePath){let e=this.resource.path;return e===this.getName()?void 0:e}return super.getDescription(e)}getTitle(e){if(!this.model.hasAssociatedFilePath){let e=this.getName(),t=this.getDescription();return t&&t!==e?"".concat(e," \u2022 ").concat(t):e}return super.getTitle(e)}isDirty(){return this.model.isDirty()}getEncoding(){return this.model.getEncoding()}setEncoding(e,t){return this.model.setEncoding(e)}get hasLanguageSetExplicitly(){return this.model.hasLanguageSetExplicitly}get hasAssociatedFilePath(){return this.model.hasAssociatedFilePath}setLanguageId(e,t){this.model.setLanguageId(e,t)}getLanguageId(){return this.model.getLanguageId()}async resolve(){return this.modelResolve||(this.modelResolve=(async()=>{this.cachedUntitledTextEditorModelReference=await this.textModelService.createModelReference(this.resource)})()),await this.modelResolve,this.isDisposed()&&this.disposeModelReference(),this.model}toUntyped(e){var t;let i={resource:this.model.hasAssociatedFilePath?(0,l.xT)(this.model.resource,this.environmentService.remoteAuthority,this.pathService.defaultUriScheme):this.resource,forceUntitled:!0,options:{override:this.editorId}};return"number"==typeof(null===e||void 0===e?void 0:e.preserveViewState)&&(i.encoding=this.getEncoding(),i.languageId=this.getLanguageId(),i.contents=this.model.isModified()?null===(t=this.model.textEditorModel)||void 0===t?void 0:t.getValue():void 0,i.options.viewState=(0,p.$t)(this,e.preserveViewState,this.editorService),"string"==typeof i.contents&&!this.model.hasAssociatedFilePath&&!e.preserveResource&&(i.resource=void 0)),i}matches(e){return this===e||(e instanceof v?(0,l.pT)(e.resource,this.resource):!!(0,p.gn)(e)&&super.matches(e))}dispose(){this.modelResolve=void 0,this.disposeModelReference(),super.dispose()}disposeModelReference(){(0,l.Sj)(this.cachedUntitledTextEditorModelReference),this.cachedUntitledTextEditorModelReference=void 0}},{_:v=r},{_:r.ID="workbench.editors.untitledEditorInput"},r);f=v=(0,l.Jb)([(0,l.Yb)(1,p.E),(0,l.Yb)(2,l.Ha),(0,l.Yb)(3,p.kt),(0,l.Yb)(4,l.fs),(0,l.Yb)(5,p.O),(0,l.Yb)(6,p.A),(0,l.Yb)(7,p.B),(0,l.Yb)(8,l.Zb),(0,l.Yb)(9,l.dv),(0,l.Yb)(10,h.H)],f),(0,l.Xb)(),(0,l.sj)(),(0,l.Mb)(),(0,l.Hj)(),(0,l.ox)(),(0,p.en)(),(0,p.T)(),(0,l.ET)(),(0,p.it)(),(0,p.Ot)(),(0,h._)(),(0,l.dT)(),(0,l.SO)(),(0,l.Go)(),(0,l.ps)(),(0,h.a)(),(0,h.V)(),(0,l.wj)(),(0,l.Jp)(),(0,l.aP)();var E,m=class extends Error{constructor(e,t){super(e),this.name="FileEditorInputLeakError",this.stack=t}},S=(s=class extends l.mj{constructor(e,t,i,r,s){super(),this.untitledTextEditorService=e,this.instantiationService=t,this.uriIdentityService=i,this.fileService=r,this.editorResolverService=s,this.editorInputCache=new l.Lj,this.fileEditorFactory=l.jb.as(p.Rt.EditorFactory).getFileEditorFactory(),this.mapLeakToCounter=new Map,this.registerDefaultEditor()}registerDefaultEditor(){this._register(this.editorResolverService.registerEditor("*",{id:p.Ft.id,label:p.Ft.displayName,detail:p.Ft.providerDisplayName,priority:h.t.builtin},{},{createEditorInput:e=>({editor:this.createTextEditor(e)}),createUntitledEditorInput:e=>({editor:this.createTextEditor(e)}),createDiffEditorInput:e=>({editor:this.createTextEditor(e)})}))}async resolveTextEditor(e){return this.createTextEditor(e)}createTextEditor(e){if((0,p.dn)(e))return this.createTextEditor(e.result);if((0,p.ln)(e)){let t=this.createTextEditor(e.original),i=this.createTextEditor(e.modified);return this.instantiationService.createInstance(p.nt,e.label,e.description,t,i,void 0)}if((0,p.pn)(e)){let t=this.createTextEditor(e.primary),i=this.createTextEditor(e.secondary);return this.instantiationService.createInstance(p.Et,e.label,e.description,i,t)}let t=e;if(t.forceUntitled||!t.resource||t.resource.scheme===l.TT.untitled){var i;let e,r={languageId:t.languageId,initialValue:t.contents,encoding:t.encoding};return e=(null===(i=t.resource)||void 0===i?void 0:i.scheme)===l.TT.untitled?this.untitledTextEditorService.create((0,a.A)({untitledResource:t.resource},r)):this.untitledTextEditorService.create((0,a.A)({associatedResource:t.resource},r)),this.createOrGetCached(e.resource,()=>this.instantiationService.createInstance(f,e))}let r=e;if(r.resource instanceof l.xO){let e=r.label||(0,l.iT)(r.resource),t=r.resource,i=this.uriIdentityService.asCanonicalUri(t);return this.createOrGetCached(i,()=>r.forceFile||this.fileService.hasProvider(i)?this.fileEditorFactory.createFileEditor(i,t,r.label,r.description,r.encoding,r.languageId,r.contents,this.instantiationService):this.instantiationService.createInstance(h.g,i,r.label,r.description,r.languageId,r.contents),i=>{i instanceof f||(i instanceof h.g?(e&&i.setName(e),r.description&&i.setDescription(r.description),r.languageId&&i.setPreferredLanguageId(r.languageId),"string"==typeof r.contents&&i.setPreferredContents(r.contents)):(i.setPreferredResource(t),r.label&&i.setPreferredName(r.label),r.description&&i.setPreferredDescription(r.description),r.encoding&&i.setPreferredEncoding(r.encoding),r.languageId&&i.setPreferredLanguageId(r.languageId),"string"==typeof r.contents&&i.setPreferredContents(r.contents)))})}throw Error("ITextEditorService: Unable to create texteditor from ".concat(JSON.stringify(e)))}createOrGetCached(e,t,i){let r=this.editorInputCache.get(e);if(r)return null!==i&&void 0!==i&&i(r),r;r=t(),this.editorInputCache.set(e,r);let s=this.trackLeaks(r);return l.tj.once(r.onWillDispose)(()=>{this.editorInputCache.delete(e),s&&this.untrackLeaks(s)}),r}trackLeaks(e){var t,i,r;if(E.LEAK_REPORTED||this.editorInputCache.size<E.LEAK_TRACKING_THRESHOLD)return;let s="".concat(e.resource.scheme,"#").concat(e.typeId||"<no typeId>","#").concat(e.editorId||"<no editorId>","\n").concat(null!==(t=null===(i=Error().stack)||void 0===i?void 0:i.split("\n").slice(2).join("\n"))&&void 0!==t?t:""),o=(null!==(r=this.mapLeakToCounter.get(s))&&void 0!==r?r:0)+1;if(this.mapLeakToCounter.set(s,o),this.editorInputCache.size>E.LEAK_REPORTING_THRESHOLD){E.LEAK_REPORTED=!0;let[e,t]=Array.from(this.mapLeakToCounter.entries()).reduce((e,t)=>{let[i,r]=e,[s,o]=t;return o>r?[s,o]:[i,r]});(0,l.sP)(new m("Potential text editor input LEAK detected, having ".concat(this.editorInputCache.size," text editor inputs already. Most frequent owner (").concat(t,")"),e))}return s}untrackLeaks(e){var t;let i=(null!==(t=this.mapLeakToCounter.get(e))&&void 0!==t?t:1)-1;this.mapLeakToCounter.set(e,i),0===i&&this.mapLeakToCounter.delete(e)}},{_:E=s},{_:s.LEAK_TRACKING_THRESHOLD=256},{_:s.LEAK_REPORTING_THRESHOLD=2*s.LEAK_TRACKING_THRESHOLD},{_:s.LEAK_REPORTED=!1},s);S=E=(0,l.Jb)([(0,l.Yb)(0,p.w),(0,l.Yb)(1,l.rx),(0,l.Yb)(2,l.Wo),(0,l.Yb)(3,l.fs),(0,l.Yb)(4,h.B)],S);(0,l.Xb)(),(0,l.sj)(),(0,p.en)(),(0,h.c)(),(0,l.Lo)(),(0,l.ox)(),(0,l.yb)(),(0,l.Xd)(),(0,l.pv)(),(0,p.G)(),(0,p.At)(),(0,l.wj)();var y,C=class extends h.s{constructor(e,t,i,r,s,o,n,d,a,h){super(e,t,r,d,o),this.instantiationService=s,this.textResourceConfigurationService=n,this.editorService=a,this.editorGroupService=h,this.groupListener=this._register(new l.vj),this.viewState=this.getEditorMemento(h,n,i,100)}setEditorVisible(e){this.groupListener.value=this.group.onWillCloseEditor(e=>this.onWillCloseEditor(e)),super.setEditorVisible(e)}onWillCloseEditor(e){let t=e.editor;t===this.input&&this.updateEditorViewState(t)}clearInput(){this.updateEditorViewState(this.input),super.clearInput()}saveState(){this.updateEditorViewState(this.input),super.saveState()}updateEditorViewState(e){if(!e||!this.tracksEditorViewState(e))return;let t=this.toEditorViewStateResource(e);t&&(this.tracksDisposedEditorViewState()||(this.editorViewStateDisposables||(this.editorViewStateDisposables=new Map),this.editorViewStateDisposables.has(e)||this.editorViewStateDisposables.set(e,l.tj.once(e.onWillDispose)(()=>{var i;this.clearEditorViewState(t,this.group),null===(i=this.editorViewStateDisposables)||void 0===i||i.delete(e)}))),e.isDisposed()&&!this.tracksDisposedEditorViewState()||!this.shouldRestoreEditorViewState(e)&&!this.group.contains(e)?this.clearEditorViewState(t,this.group):e.isDisposed()||this.saveEditorViewState(t))}shouldRestoreEditorViewState(e,t){return null===t||void 0===t||!t.newInGroup||!1!==this.textResourceConfigurationService.getValue(p.Ht.getOriginalUri(e,{supportSideBySide:p.Jt.PRIMARY}),"workbench.editor.restoreViewState")}getViewState(){let e=this.input;if(!e||!this.tracksEditorViewState(e))return;let t=this.toEditorViewStateResource(e);return t?this.computeEditorViewState(t):void 0}saveEditorViewState(e){let t=this.computeEditorViewState(e);t&&this.viewState.saveEditorState(this.group,e,t)}loadEditorViewState(e,t){if(!e||!this.tracksEditorViewState(e)||!this.shouldRestoreEditorViewState(e,t))return;let i=this.toEditorViewStateResource(e);return i?this.viewState.loadEditorState(this.group,i):void 0}moveEditorViewState(e,t,i){return this.viewState.moveEditorState(e,t,i)}clearEditorViewState(e,t){this.viewState.clearEditorState(e,t)}dispose(){if(super.dispose(),this.editorViewStateDisposables){for(let[,e]of this.editorViewStateDisposables)e.dispose();this.editorViewStateDisposables=void 0}}tracksDisposedEditorViewState(){return!1}};C=(0,l.Jb)([(0,l.Yb)(3,l.vb),(0,l.Yb)(4,l.rx),(0,l.Yb)(5,l.Io),(0,l.Yb)(6,l.dv),(0,l.Yb)(7,l.Yd),(0,l.Yb)(8,p.kt),(0,l.Yb)(9,p.W)],C),(0,l.vE)(),(0,l.Xb)(),(0,l.TM)(),(0,l.oS)(),(0,l.rA)(),(0,l.Mb)(),(0,p.en)(),(0,p.Ot)(),(0,l.yb)(),(0,l.ox)(),(0,l.Xd)(),(0,p.G)(),(0,l.Xt)(),(0,l.sj)(),(0,l.Lo)(),(0,l.GM)(),(0,l.i_)(),(0,h.tt)(),(0,l.wj)(),(0,h.er)(),(0,l.pv)(),(0,p.At)(),(0,l.dT)(),(0,l.SO)(),(0,l.tn)(),(0,l.bE)({});var w=(o=class extends C{get minimumPrimaryWidth(){return this.primaryEditorPane?this.primaryEditorPane.minimumWidth:0}get maximumPrimaryWidth(){return this.primaryEditorPane?this.primaryEditorPane.maximumWidth:1/0}get minimumPrimaryHeight(){return this.primaryEditorPane?this.primaryEditorPane.minimumHeight:0}get maximumPrimaryHeight(){return this.primaryEditorPane?this.primaryEditorPane.maximumHeight:1/0}get minimumSecondaryWidth(){return this.secondaryEditorPane?this.secondaryEditorPane.minimumWidth:0}get maximumSecondaryWidth(){return this.secondaryEditorPane?this.secondaryEditorPane.maximumWidth:1/0}get minimumSecondaryHeight(){return this.secondaryEditorPane?this.secondaryEditorPane.minimumHeight:0}get maximumSecondaryHeight(){return this.secondaryEditorPane?this.secondaryEditorPane.maximumHeight:1/0}set minimumWidth(e){}set maximumWidth(e){}set minimumHeight(e){}set maximumHeight(e){}get minimumWidth(){return this.minimumPrimaryWidth+this.minimumSecondaryWidth}get maximumWidth(){return this.maximumPrimaryWidth+this.maximumSecondaryWidth}get minimumHeight(){return this.minimumPrimaryHeight+this.minimumSecondaryHeight}get maximumHeight(){return this.maximumPrimaryHeight+this.maximumSecondaryHeight}constructor(e,t,i,r,s,o,n,d,a){super(y.ID,e,y.VIEW_STATE_PREFERENCE_KEY,t,i,s,n,r,d,a),this.configurationService=o,this.onDidCreateEditors=this._register(new l.ej),this._onDidChangeSizeConstraints=this._register(new l.ij),this.onDidChangeSizeConstraints=l.tj.any(this.onDidCreateEditors.event,this._onDidChangeSizeConstraints.event),this._onDidChangeSelection=this._register(new l.ej),this.onDidChangeSelection=this._onDidChangeSelection.event,this.primaryEditorPane=void 0,this.secondaryEditorPane=void 0,this.splitviewDisposables=this._register(new l.gj),this.editorDisposables=this._register(new l.gj),this.dimension=new l.mx(0,0),this.lastFocusedSide=void 0,this.orientation="vertical"===this.configurationService.getValue(y.SIDE_BY_SIDE_LAYOUT_SETTING)?l.Zt.VERTICAL:l.Zt.HORIZONTAL,this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>this.onConfigurationUpdated(e)))}onConfigurationUpdated(e){e.affectsConfiguration(y.SIDE_BY_SIDE_LAYOUT_SETTING)&&(this.orientation="vertical"===this.configurationService.getValue(y.SIDE_BY_SIDE_LAYOUT_SETTING)?l.Zt.VERTICAL:l.Zt.HORIZONTAL,this.splitview&&this.recreateSplitview())}recreateSplitview(){let e=(0,l.UM)(this.getContainer()),t=this.getSplitViewRatio();this.splitview&&(this.splitview.el.remove(),this.splitviewDisposables.clear()),this.createSplitView(e,t),this.layout(this.dimension)}getSplitViewRatio(){let e;if(this.splitview){let t=this.splitview.getViewSize(0),i=this.splitview.getViewSize(1);Math.abs(t-i)>1&&(e=t/(this.splitview.orientation===l.Zt.HORIZONTAL?this.dimension.width:this.dimension.height))}return e}createEditor(e){e.classList.add("side-by-side-editor"),this.secondaryEditorContainer=(0,l.px)(".side-by-side-editor-container.editor-instance"),this.primaryEditorContainer=(0,l.px)(".side-by-side-editor-container.editor-instance"),this.createSplitView(e)}createSplitView(e,t){var i,r,s;this.splitview=this.splitviewDisposables.add(new l.Yt(e,{orientation:this.orientation})),this.splitviewDisposables.add(this.splitview.onDidSashReset(()=>{var e;return null===(e=this.splitview)||void 0===e?void 0:e.distributeViewSizes()})),this.orientation===l.Zt.HORIZONTAL?this.splitview.orthogonalEndSash=null===(i=this._boundarySashes)||void 0===i?void 0:i.bottom:(this.splitview.orthogonalStartSash=null===(r=this._boundarySashes)||void 0===r?void 0:r.left,this.splitview.orthogonalEndSash=null===(s=this._boundarySashes)||void 0===s?void 0:s.right);let o=l.Jt.Distribute,n=l.Jt.Distribute;if(t){let e=this.splitview.orientation===l.Zt.HORIZONTAL?this.dimension.width:this.dimension.height;o=Math.round(e*t),n=e-o,this.splitview.layout(this.orientation===l.Zt.HORIZONTAL?this.dimension.width:this.dimension.height)}let d=(0,l.UM)(this.secondaryEditorContainer);this.splitview.addView({element:d,layout:e=>this.layoutPane(this.secondaryEditorPane,e),minimumSize:this.orientation===l.Zt.HORIZONTAL?h.X.width:h.X.height,maximumSize:1/0,onDidChange:l.tj.None},o);let a=(0,l.UM)(this.primaryEditorContainer);this.splitview.addView({element:a,layout:e=>this.layoutPane(this.primaryEditorPane,e),minimumSize:this.orientation===l.Zt.HORIZONTAL?h.X.width:h.X.height,maximumSize:1/0,onDidChange:l.tj.None},n),this.updateStyles()}getTitle(){return this.input?this.input.getName():(0,l.EM)(3417,"Side by Side Editor")}async setInput(e,t,i,r){var s,o,n;let d=this.input;await super.setInput(e,t,i,r),(!d||!e.matches(d))&&(d&&this.disposeEditors(),this.createEditors(e));let{primary:a,secondary:h,viewState:u}=this.loadViewState(e,t,i);if(this.lastFocusedSide=null===u||void 0===u?void 0:u.focus,"number"==typeof(null===u||void 0===u?void 0:u.ratio)&&this.splitview){let e=this.splitview.orientation===l.Zt.HORIZONTAL?this.dimension.width:this.dimension.height;this.splitview.resizeView(0,Math.round(e*u.ratio))}else null===(s=this.splitview)||void 0===s||s.distributeViewSizes();await Promise.all([null===(o=this.secondaryEditorPane)||void 0===o?void 0:o.setInput(e.secondary,h,i,r),null===(n=this.primaryEditorPane)||void 0===n?void 0:n.setInput(e.primary,a,i,r)]),"number"==typeof(null===t||void 0===t?void 0:t.target)&&(this.lastFocusedSide=t.target)}loadViewState(e,t,i){let r,s=function(e){let t=e;return"object"==typeof(null===t||void 0===t?void 0:t.primary)&&"object"==typeof t.secondary}(null===t||void 0===t?void 0:t.viewState)?null===t||void 0===t?void 0:t.viewState:this.loadEditorViewState(e,i),o=Object.create(null);return(null===t||void 0===t?void 0:t.target)===p.Jt.SECONDARY?r=(0,a.A)({},t):o=(0,a.A)({},t),o.viewState=null===s||void 0===s?void 0:s.primary,null!==s&&void 0!==s&&s.secondary&&(r?r.viewState=null===s||void 0===s?void 0:s.secondary:r={viewState:s.secondary}),{primary:o,secondary:r,viewState:s}}createEditors(e){this.secondaryEditorPane=this.doCreateEditor(e.secondary,(0,l.UM)(this.secondaryEditorContainer)),this.primaryEditorPane=this.doCreateEditor(e.primary,(0,l.UM)(this.primaryEditorContainer)),this.layout(this.dimension),this._onDidChangeSizeConstraints.input=l.tj.any(l.tj.map(this.secondaryEditorPane.onDidChangeSizeConstraints,()=>{}),l.tj.map(this.primaryEditorPane.onDidChangeSizeConstraints,()=>{})),this.onDidCreateEditors.fire(void 0),this.editorDisposables.add(this.primaryEditorPane.onDidFocus(()=>this.onDidFocusChange(p.Jt.PRIMARY))),this.editorDisposables.add(this.secondaryEditorPane.onDidFocus(()=>this.onDidFocusChange(p.Jt.SECONDARY)))}doCreateEditor(e,t){let i=l.jb.as(p.Rt.EditorPane).getEditorPane(e);if(!i)throw Error("No editor pane descriptor for editor found");let r=i.instantiate(this.instantiationService,this.group);return r.create(t),r.setVisible(this.isVisible()),(0,p.cn)(r)&&this.editorDisposables.add(r.onDidChangeSelection(e=>this._onDidChangeSelection.fire(e))),this.editorDisposables.add(r),r}onDidFocusChange(e){this.lastFocusedSide=e,this._onDidChangeControl.fire()}getSelection(){let e=this.getLastFocusedEditorPane();if((0,p.cn)(e)){let t=e.getSelection();if(t)return new b(t,e===this.primaryEditorPane?p.Jt.PRIMARY:p.Jt.SECONDARY)}}setOptions(e){var t;super.setOptions(e),"number"==typeof(null===e||void 0===e?void 0:e.target)&&(this.lastFocusedSide=e.target),null===(t=this.getLastFocusedEditorPane())||void 0===t||t.setOptions(e)}setEditorVisible(e){var t,i;null!==(t=this.primaryEditorPane)&&void 0!==t&&t.setVisible(e),null!==(i=this.secondaryEditorPane)&&void 0!==i&&i.setVisible(e),super.setEditorVisible(e)}clearInput(){var e,t;super.clearInput(),null!==(e=this.primaryEditorPane)&&void 0!==e&&e.clearInput(),null!==(t=this.secondaryEditorPane)&&void 0!==t&&t.clearInput(),this.disposeEditors()}focus(){var e;super.focus(),null===(e=this.getLastFocusedEditorPane())||void 0===e||e.focus()}getLastFocusedEditorPane(){return this.lastFocusedSide===p.Jt.SECONDARY?this.secondaryEditorPane:this.primaryEditorPane}layout(e){this.dimension=e,(0,l.UM)(this.splitview).layout(this.orientation===l.Zt.HORIZONTAL?e.width:e.height)}setBoundarySashes(e){this._boundarySashes=e,this.splitview&&(this.splitview.orthogonalEndSash=e.bottom)}layoutPane(e,t){null===e||void 0===e||e.layout(this.orientation===l.Zt.HORIZONTAL?new l.mx(t,this.dimension.height):new l.mx(this.dimension.width,t))}getControl(){var e;return null===(e=this.getLastFocusedEditorPane())||void 0===e?void 0:e.getControl()}getPrimaryEditorPane(){return this.primaryEditorPane}getSecondaryEditorPane(){return this.secondaryEditorPane}tracksEditorViewState(e){return e instanceof p.Et}computeEditorViewState(e){var t,i;if(!this.input||!(0,l.pT)(e,this.toEditorViewStateResource(this.input)))return;let r=null===(t=this.primaryEditorPane)||void 0===t?void 0:t.getViewState(),s=null===(i=this.secondaryEditorPane)||void 0===i?void 0:i.getViewState();return r&&s?{primary:r,secondary:s,focus:this.lastFocusedSide,ratio:this.getSplitViewRatio()}:void 0}toEditorViewStateResource(e){let t,i;if(e instanceof p.Et&&(t=e.primary.resource,i=e.secondary.resource),i&&t)return l.xO.from({scheme:"sideBySide",path:"".concat((0,l.hA)(i.toString())).concat((0,l.hA)(t.toString()))})}updateStyles(){var e,t;super.updateStyles(),this.primaryEditorContainer&&(this.orientation===l.Zt.HORIZONTAL?(this.primaryEditorContainer.style.borderLeftWidth="1px",this.primaryEditorContainer.style.borderLeftStyle="solid",this.primaryEditorContainer.style.borderLeftColor=null!==(e=this.getColor(h.ln))&&void 0!==e?e:"",this.primaryEditorContainer.style.borderTopWidth="0"):(this.primaryEditorContainer.style.borderTopWidth="1px",this.primaryEditorContainer.style.borderTopStyle="solid",this.primaryEditorContainer.style.borderTopColor=null!==(t=this.getColor(h.cn))&&void 0!==t?t:"",this.primaryEditorContainer.style.borderLeftWidth="0"))}dispose(){this.disposeEditors(),super.dispose()}disposeEditors(){this.editorDisposables.clear(),this.secondaryEditorPane=void 0,this.primaryEditorPane=void 0,this.lastFocusedSide=void 0,this.secondaryEditorContainer&&(0,l.Ox)(this.secondaryEditorContainer),this.primaryEditorContainer&&(0,l.Ox)(this.primaryEditorContainer)}},{_:y=o},{_:o.ID=p.Gt},{_:o.SIDE_BY_SIDE_LAYOUT_SETTING="workbench.editor.splitInGroupLayout"},{_:o.VIEW_STATE_PREFERENCE_KEY="sideBySideEditorViewState"},o);w=y=(0,l.Jb)([(0,l.Yb)(1,l.vb),(0,l.Yb)(2,l.rx),(0,l.Yb)(3,l.Yd),(0,l.Yb)(4,l.Io),(0,l.Yb)(5,l.r_),(0,l.Yb)(6,l.dv),(0,l.Yb)(7,p.kt),(0,l.Yb)(8,p.W)],w);var b=class e{constructor(e,t){this.selection=e,this.side=t}compare(t){return t instanceof e&&this.side===t.side?this.selection.compare(t.selection):p.Vt.DIFFERENT}restore(e){let t=(0,a.A)((0,a.A)({},e),{},{target:this.side});return this.selection.restore(t)}};(0,l.Xb)(),(0,p.en)(),(0,p.Ot)(),(0,l.wj)(),(0,l.Vo)(),(0,l.Lo)(),(0,l.Mb)(),(0,l.sj)(),(0,p.Q)(),(0,p.G)(),(0,l.AN)(),(0,l.Hj)(),(0,l.LM)();var D,A=(n=class extends l.mj{get count(){return this.mostRecentEditorsMap.size}get editors(){return[...this.mostRecentEditorsMap.values()]}hasEditor(e){var t,i;return null!==(t=null===(i=this.editorsPerResourceCounter.get(e.resource))||void 0===i?void 0:i.has(this.toIdentifier(e)))&&void 0!==t&&t}hasEditors(e){return this.editorsPerResourceCounter.has(e)}toIdentifier(e,t){return"string"==typeof e?t?"".concat(e,"/").concat(t):e:this.toIdentifier(e.typeId,e.editorId)}constructor(e,t,i){super(),this.editorGroupService=t,this.storageService=i,this.keyMap=new Map,this.mostRecentEditorsMap=new l.Pj,this.editorsPerResourceCounter=new l.Lj,this._onDidMostRecentlyActiveEditorsChange=this._register(new l.ej),this.onDidMostRecentlyActiveEditorsChange=this._onDidMostRecentlyActiveEditorsChange.event,this.editorGroupsContainer=null!==e&&void 0!==e?e:t,this.isScoped=!!e,this.registerListeners(),this.loadState()}registerListeners(){this._register(this.editorGroupsContainer.onDidAddGroup(e=>this.onGroupAdded(e))),this._register(this.editorGroupService.onDidChangeEditorPartOptions(e=>this.onDidChangeEditorPartOptions(e))),this._register(this.storageService.onWillSaveState(()=>this.saveState()))}onGroupAdded(e){let t=e.getEditors(p.Ut.MOST_RECENTLY_ACTIVE);for(let i=t.length-1;i>=0;i--)this.addMostRecentEditor(e,t[i],!1,!0);this.editorGroupsContainer.activeGroup===e&&e.activeEditor&&this.addMostRecentEditor(e,e.activeEditor,!0,!1),this.registerGroupListeners(e)}registerGroupListeners(e){let t=new l.gj;t.add(e.onDidModelChange(t=>{switch(t.kind){case p.Wt.GROUP_ACTIVE:this.editorGroupsContainer.activeGroup===e&&e.activeEditor&&this.addMostRecentEditor(e,e.activeEditor,!0,!1);break;case p.Wt.EDITOR_OPEN:t.editor&&(this.addMostRecentEditor(e,t.editor,!1,!0),this.ensureOpenedEditorsLimit({groupId:e.id,editor:t.editor},e.id))}})),t.add(e.onDidCloseEditor(t=>{this.removeMostRecentEditor(e,t.editor)})),t.add(e.onDidActiveEditorChange(t=>{t.editor&&this.addMostRecentEditor(e,t.editor,this.editorGroupsContainer.activeGroup===e,!1)})),l.tj.once(e.onWillDispose)(()=>(0,l.Sj)(t))}onDidChangeEditorPartOptions(e){if(!(0,l.FM)(e.newPartOptions.limit,e.oldPartOptions.limit)){let e,t=this.editorGroupsContainer.activeGroup;t.activeEditor&&(e={editor:t.activeEditor,groupId:t.id}),this.ensureOpenedEditorsLimit(e)}}addMostRecentEditor(e,t,i,r){let s=this.ensureKey(e,t),o=this.mostRecentEditorsMap.first;i||!o?this.mostRecentEditorsMap.set(s,s,o?l.Bj.AsOld:void 0):(this.mostRecentEditorsMap.set(s,s,l.Bj.AsOld),this.mostRecentEditorsMap.set(o,o,l.Bj.AsOld)),r&&this.updateEditorResourcesMap(t,!0),this._onDidMostRecentlyActiveEditorsChange.fire()}updateEditorResourcesMap(e,t){let i,r,s;if(e instanceof p.Et?(i=e.primary.resource,r=e.primary.typeId,s=e.primary.editorId):(i=e.resource,r=e.typeId,s=e.editorId),!i)return;let o=this.toIdentifier(r,s);if(t){var n;let e=this.editorsPerResourceCounter.get(i);e||(e=new Map,this.editorsPerResourceCounter.set(i,e)),e.set(o,(null!==(n=e.get(o))&&void 0!==n?n:0)+1)}else{let e=this.editorsPerResourceCounter.get(i);if(e){var d;let t=null!==(d=e.get(o))&&void 0!==d?d:0;t>1?e.set(o,t-1):(e.delete(o),0===e.size&&this.editorsPerResourceCounter.delete(i))}}}removeMostRecentEditor(e,t){this.updateEditorResourcesMap(t,!1);let i=this.findKey(e,t);if(i){this.mostRecentEditorsMap.delete(i);let t=this.keyMap.get(e.id);t&&t.delete(i.editor)&&0===t.size&&this.keyMap.delete(e.id),this._onDidMostRecentlyActiveEditorsChange.fire()}}findKey(e,t){let i=this.keyMap.get(e.id);if(i)return i.get(t)}ensureKey(e,t){let i=this.keyMap.get(e.id);i||(i=new Map,this.keyMap.set(e.id,i));let r=i.get(t);return r||(r={groupId:e.id,editor:t},i.set(t,r)),r}async ensureOpenedEditorsLimit(e,t){var i,r;if(null===(i=this.editorGroupService.partOptions.limit)||void 0===i||!i.enabled||"number"!=typeof this.editorGroupService.partOptions.limit.value||this.editorGroupService.partOptions.limit.value<=0)return;let s=this.editorGroupService.partOptions.limit.value;if(null!==(r=this.editorGroupService.partOptions.limit)&&void 0!==r&&r.perEditorGroup)if("number"==typeof t){let i=this.editorGroupsContainer.getGroup(t);i&&await this.doEnsureOpenedEditorsLimit(s,i.getEditors(p.Ut.MOST_RECENTLY_ACTIVE).map(e=>({editor:e,groupId:t})),e)}else for(let o of this.editorGroupsContainer.groups)await this.ensureOpenedEditorsLimit(e,o.id);else await this.doEnsureOpenedEditorsLimit(s,[...this.mostRecentEditorsMap.values()],e)}async doEnsureOpenedEditorsLimit(e,t,i){var r;let s;if(s=null!==(r=this.editorGroupService.partOptions.limit)&&void 0!==r&&r.excludeDirty?t.filter(e=>{let{editor:t}=e;return!(t.isDirty()&&!t.isSaving()||t.hasCapability(p.zt.Scratchpad))}):t,e>=s.length)return;let o=s.reverse().filter(e=>{var t;let{editor:r,groupId:s}=e;return!(r.isDirty()&&!r.isSaving()||r.hasCapability(p.zt.Scratchpad)||i&&r===i.editor&&s===i.groupId||null!==(t=this.editorGroupsContainer.getGroup(s))&&void 0!==t&&t.isSticky(r))}),n=s.length-e,d=new Map;for(let{groupId:a,editor:l}of o){let e=d.get(a);if(e||(e=[],d.set(a,e)),e.push(l),n--,0===n)break}for(let[a,l]of d){let e=this.editorGroupsContainer.getGroup(a);e&&await e.closeEditors(l,{preserveFocus:!0})}}saveState(){this.isScoped||(this.mostRecentEditorsMap.isEmpty()?this.storageService.remove(D.STORAGE_KEY,l.Ro.WORKSPACE):this.storageService.store(D.STORAGE_KEY,JSON.stringify(this.serialize()),l.Ro.WORKSPACE,l.zo.MACHINE))}serialize(){let e=l.jb.as(p.Rt.EditorFactory),t=[...this.mostRecentEditorsMap.values()],i=new Map;return{entries:(0,l._N)(t.map(t=>{let{editor:r,groupId:s}=t,o=this.editorGroupsContainer.getGroup(s);if(!o)return;let n=i.get(o);n||(n=o.getEditors(p.Ut.SEQUENTIAL).filter(t=>{var i;return null===(i=e.getEditorSerializer(t))||void 0===i?void 0:i.canSerialize(t)}),i.set(o,n));let d=n.indexOf(r);return-1!==d?{groupId:s,index:d}:void 0}))}}async loadState(){(this.editorGroupsContainer===this.editorGroupService.mainPart||this.editorGroupsContainer===this.editorGroupService)&&await this.editorGroupService.whenReady;let e=!1;if(!this.isScoped){let t=this.storageService.get(D.STORAGE_KEY,l.Ro.WORKSPACE);t&&(e=!0,this.deserialize(JSON.parse(t)))}if(!e){let e=this.editorGroupsContainer.getGroups(p.X.MOST_RECENTLY_ACTIVE);for(let t=e.length-1;t>=0;t--){let i=e[t],r=i.getEditors(p.Ut.MOST_RECENTLY_ACTIVE);for(let e=r.length-1;e>=0;e--)this.addMostRecentEditor(i,r[e],!0,!0)}}for(let t of this.editorGroupsContainer.groups)this.registerGroupListeners(t)}deserialize(e){let t=[];for(let{groupId:i,index:r}of e.entries){let e=this.editorGroupsContainer.getGroup(i);if(!e)continue;let s=e.getEditorByIndex(r);if(!s)continue;let o=this.ensureKey(e,s);t.push([o,o]),this.updateEditorResourcesMap(s,!0)}this.mostRecentEditorsMap.fromJSON(t)}},{_:D=n},{_:n.STORAGE_KEY="editors.mru"},n);function I(e,t,i){let r=e.get(p.W),s=function(e,t,i,r){var s,o,n;let d,a=(0,p.in)(e)?e.editor:e,l=e.options;if(t&&"number"!=typeof t)d=t;else if("number"==typeof t&&t>=0)d=i.getGroup(t);else if(-2===t){let e=(0,p.tt)(r),t=i.findGroup({direction:e});(!t||R(t,a))&&(t=i.addGroup(i.activeGroup,e)),d=t}else if(-3===t)d=i.createAuxiliaryEditorPart({bounds:null===l||void 0===l||null===(s=l.auxiliary)||void 0===s?void 0:s.bounds,compact:null===l||void 0===l||null===(o=l.auxiliary)||void 0===o?void 0:o.compact,alwaysOnTop:null===l||void 0===l||null===(n=l.auxiliary)||void 0===n?void 0:n.alwaysOnTop}).then(e=>e.activeGroup);else if(!l||"number"!=typeof l.index){let e=i.getGroups(p.X.MOST_RECENTLY_ACTIVE);if(null!==l&&void 0!==l&&l.revealIfVisible)for(let t of e)if(_(t,a)){d=t;break}if(!d&&(null!==l&&void 0!==l&&l.revealIfOpened||r.getValue("workbench.editor.revealIfOpen")||(0,p.rn)(a)&&a.hasCapability(p.zt.Singleton))){let t,i;for(let r of e)if(T(r,a)&&(i||(i=r),!t&&r.isActive(a)&&(t=r)),i&&t)break;d=t||i}}if(!d){let e=i.activeGroup;if(R(e,a)){for(let t of i.getGroups(p.X.MOST_RECENTLY_ACTIVE))if(!R(t,a)){e=t;break}d=R(e,a)?i.addGroup(e,(0,p.tt)(r)):e}else d=e}return d}(t,i,r,e.get(l.r_));return s instanceof Promise?s.then(e=>O(e,t,i,r)):O(s,t,i,r)}function O(e,t,i,r){let s;return r.activeGroup!==e&&t.options&&!t.options.inactive&&t.options.preserveFocus&&"number"!=typeof t.options.activation&&-2!==i&&(s=l.Er.ACTIVATE),[e,s]}function R(e,t){return!(!e.isLocked||T(e,t))}function _(e,t){return!!e.activeEditor&&e.activeEditor.matches(t)}function T(e,t){for(let i of e.editors)if(i.matches(t))return!0;return!1}A=D=(0,l.Jb)([(0,l.Yb)(1,p.W),(0,l.Yb)(2,l.Io)],A),(0,l.i_)(),(0,l.jr)(),(0,p.en)(),(0,p.Q)(),(0,p.G)(),(0,h.q)(),(0,l.Xb)(),(0,l.ox)(),(0,p.en)(),(0,p.Mt)(),(0,p.Ot)(),(0,l.Hj)(),(0,l.Qs)(),(0,l.ps)(),(0,l.sj)(),(0,l.SO)(),(0,l.dT)(),(0,p.it)(),(0,p.Q)(),(0,p.G)(),(0,h.q)(),(0,l.i_)(),(0,l.wj)(),(0,l.AN)(),(0,u.o)(),(0,l.Jp)(),(0,l.GM)(),(0,l.Ww)(),(0,l.Ma)(),(0,l.NT)(),(0,l.Go)(),(0,h.a)(),(0,h.V)(),(0,h.nr)(),(0,l.Ta)(),(0,h.z)(),(0,c.d)();var x,P=x=class extends l.mj{constructor(e,t,i,r,s,o,n,d,a,h,u){super(),this.editorGroupService=t,this.instantiationService=i,this.fileService=r,this.configurationService=s,this.contextService=o,this.uriIdentityService=n,this.editorResolverService=d,this.workspaceTrustRequestService=a,this.hostService=h,this.textEditorService=u,this._onDidActiveEditorChange=this._register(new l.ej),this.onDidActiveEditorChange=this._onDidActiveEditorChange.event,this._onDidVisibleEditorsChange=this._register(new l.ej),this.onDidVisibleEditorsChange=this._onDidVisibleEditorsChange.event,this._onDidEditorsChange=this._register(new l.ej),this.onDidEditorsChange=this._onDidEditorsChange.event,this._onWillOpenEditor=this._register(new l.ej),this.onWillOpenEditor=this._onWillOpenEditor.event,this._onDidCloseEditor=this._register(new l.ej),this.onDidCloseEditor=this._onDidCloseEditor.event,this._onDidOpenEditorFail=this._register(new l.ej),this.onDidOpenEditorFail=this._onDidOpenEditorFail.event,this._onDidMostRecentlyActiveEditorsChange=this._register(new l.ej),this.onDidMostRecentlyActiveEditorsChange=this._onDidMostRecentlyActiveEditorsChange.event,this.lastActiveEditor=void 0,this.activeOutOfWorkspaceWatchers=new l.Lj,this.closeOnFileDelete=!1,this.editorGroupsContainer=null!==e&&void 0!==e?e:t,this.editorsObserver=this._register(this.instantiationService.createInstance(A,this.editorGroupsContainer)),this.onConfigurationUpdated(),this.registerListeners()}createScoped(e,t){return t.add(new x(e,this.editorGroupService,this.instantiationService,this.fileService,this.configurationService,this.contextService,this.uriIdentityService,this.editorResolverService,this.workspaceTrustRequestService,this.hostService,this.textEditorService))}registerListeners(){this.editorGroupsContainer===this.editorGroupService.mainPart||this.editorGroupsContainer===this.editorGroupService?this.editorGroupService.whenReady.then(()=>this.onEditorGroupsReady()):this.onEditorGroupsReady(),this._register(this.editorGroupsContainer.onDidChangeActiveGroup(e=>this.handleActiveEditorChange(e))),this._register(this.editorGroupsContainer.onDidAddGroup(e=>this.registerGroupListeners(e))),this._register(this.editorsObserver.onDidMostRecentlyActiveEditorsChange(()=>this._onDidMostRecentlyActiveEditorsChange.fire())),this._register(this.onDidVisibleEditorsChange(()=>this.handleVisibleEditorsChange())),this._register(this.fileService.onDidRunOperation(e=>this.onDidRunFileOperation(e))),this._register(this.fileService.onDidFilesChange(e=>this.onDidFilesChange(e))),this._register(this.configurationService.onDidChangeConfiguration(e=>this.onConfigurationUpdated(e)))}onEditorGroupsReady(){for(let e of this.editorGroupsContainer.groups)this.registerGroupListeners(e);this.activeEditor&&(this.doHandleActiveEditorChangeEvent(),this._onDidVisibleEditorsChange.fire())}handleActiveEditorChange(e){e===this.editorGroupsContainer.activeGroup&&(!this.lastActiveEditor&&!e.activeEditor||this.doHandleActiveEditorChangeEvent())}doHandleActiveEditorChangeEvent(){var e;this.lastActiveEditor=null!==(e=this.editorGroupsContainer.activeGroup.activeEditor)&&void 0!==e?e:void 0,this._onDidActiveEditorChange.fire()}registerGroupListeners(e){let t=new l.gj;t.add(e.onDidModelChange(t=>{this._onDidEditorsChange.fire({groupId:e.id,event:t})})),t.add(e.onDidActiveEditorChange(()=>{this.handleActiveEditorChange(e),this._onDidVisibleEditorsChange.fire()})),t.add(e.onWillOpenEditor(e=>{this._onWillOpenEditor.fire(e)})),t.add(e.onDidCloseEditor(e=>{this._onDidCloseEditor.fire(e)})),t.add(e.onDidOpenEditorFail(t=>{this._onDidOpenEditorFail.fire({editor:t,groupId:e.id})})),l.tj.once(e.onWillDispose)(()=>{(0,l.Sj)(t)})}handleVisibleEditorsChange(){let e=new l.Rj;for(let t of this.visibleEditors){let i=(0,l.wN)((0,l._N)([p.Ht.getCanonicalUri(t,{supportSideBySide:p.Jt.PRIMARY}),p.Ht.getCanonicalUri(t,{supportSideBySide:p.Jt.SECONDARY})]),e=>e.toString());for(let t of i)this.fileService.hasProvider(t)&&!this.contextService.isInsideWorkspace(t)&&e.add(t)}for(let t of this.activeOutOfWorkspaceWatchers.keys())e.has(t)||((0,l.Sj)(this.activeOutOfWorkspaceWatchers.get(t)),this.activeOutOfWorkspaceWatchers.delete(t));for(let t of e.keys())if(!this.activeOutOfWorkspaceWatchers.get(t)){let e=this.fileService.watch(t);this.activeOutOfWorkspaceWatchers.set(t,e)}}async onDidRunFileOperation(e){e.isOperation(l.Es.MOVE)&&this.handleMovedFile(e.resource,e.target.resource),(e.isOperation(l.Es.DELETE)||e.isOperation(l.Es.MOVE))&&this.handleDeletedFile(e.resource,!1,e.target?e.target.resource:void 0)}onDidFilesChange(e){e.gotDeleted()&&this.handleDeletedFile(e,!0)}async handleMovedFile(e,t){for(let i of this.editorGroupsContainer.groups){let r=[];for(let s of i.editors){let o,n=s.resource;if(!n||!this.uriIdentityService.extUri.isEqualOrParent(n,e))continue;if(this.uriIdentityService.extUri.isEqual(e,n))o=t;else{let i=(0,l.MT)(n.path,e.path,this.uriIdentityService.extUri.ignorePathCasing(n));o=(0,l.gT)(t,n.path.substr(i+e.path.length+1))}let d=await s.rename(i.id,o);if(!d)return;let h={preserveFocus:!0,pinned:i.isPinned(s),sticky:i.isSticky(s),index:i.getIndexOfEditor(s),inactive:!i.isActive(s)};(0,p.rn)(d.editor)?r.push({editor:s,replacement:d.editor,options:(0,a.A)((0,a.A)({},d.options),h)}):r.push({editor:s,replacement:(0,a.A)((0,a.A)({},d.editor),{},{options:(0,a.A)((0,a.A)({},d.editor.options),h)})})}r.length&&this.replaceEditors(r,i)}}onConfigurationUpdated(e){var t;if(e&&!e.affectsConfiguration("workbench.editor.closeOnFileDelete"))return;let i=this.configurationService.getValue();"boolean"==typeof(null===(t=i.workbench)||void 0===t||null===(t=t.editor)||void 0===t?void 0:t.closeOnFileDelete)?this.closeOnFileDelete=i.workbench.editor.closeOnFileDelete:this.closeOnFileDelete=!1}handleDeletedFile(e,t,i){for(let r of this.getAllNonDirtyEditors({includeUntitled:!1,supportSideBySide:!0}))(async()=>{let s=r.resource;if(s&&(this.closeOnFileDelete||!t)){if(i&&this.uriIdentityService.extUri.isEqualOrParent(s,i))return;let o=!1;if(o=e instanceof l.ws?e.contains(s,l.Cs.DELETED):this.uriIdentityService.extUri.isEqualOrParent(s,e),!o)return;let n=!1;t&&this.fileService.hasProvider(s)&&(await(0,l.$w)(100),n=await this.fileService.exists(s)),!n&&!r.isDisposed()&&r.dispose()}})()}getAllNonDirtyEditors(e){let t=[];function i(i){i.hasCapability(p.zt.Untitled)&&!e.includeUntitled||i.isDirty()||t.push(i)}for(let r of this.editors)e.supportSideBySide&&r instanceof p.Et?(i(r.primary),i(r.secondary)):i(r);return t}get activeEditorPane(){var e;return null===(e=this.editorGroupsContainer.activeGroup)||void 0===e?void 0:e.activeEditorPane}get activeTextEditorControl(){let e=this.activeEditorPane;if(e){let t=e.getControl();if((0,u.s)(t)||(0,u.l)(t))return t;if((0,u.c)(t)&&(0,u.s)(t.activeCodeEditor))return t.activeCodeEditor}}get activeTextEditorLanguageId(){var e;let t,i=this.activeTextEditorControl;return t=(0,u.l)(i)?i.getModifiedEditor():i,null===(e=t)||void 0===e||null===(e=e.getModel())||void 0===e?void 0:e.getLanguageId()}get count(){return this.editorsObserver.count}get editors(){return this.getEditors(p.Ut.SEQUENTIAL).map(e=>{let{editor:t}=e;return t})}getEditors(e,t){switch(e){case p.Ut.MOST_RECENTLY_ACTIVE:return null!==t&&void 0!==t&&t.excludeSticky?this.editorsObserver.editors.filter(e=>{var t;let{groupId:i,editor:r}=e;return!(null!==(t=this.editorGroupsContainer.getGroup(i))&&void 0!==t&&t.isSticky(r))}):this.editorsObserver.editors;case p.Ut.SEQUENTIAL:{let e=[];for(let i of this.editorGroupsContainer.getGroups(p.X.GRID_APPEARANCE))e.push(...i.getEditors(p.Ut.SEQUENTIAL,t).map(e=>({editor:e,groupId:i.id})));return e}}}get activeEditor(){var e;let t=this.editorGroupsContainer.activeGroup;return t&&null!==(e=t.activeEditor)&&void 0!==e?e:void 0}get visibleEditorPanes(){return(0,l._N)(this.editorGroupsContainer.groups.map(e=>e.activeEditorPane))}get visibleTextEditorControls(){return this.doGetVisibleTextEditorControls(this.visibleEditorPanes)}doGetVisibleTextEditorControls(e){let t=[];for(let s of e){var i,r;let e=[];s instanceof w?(e.push(null===(i=s.getPrimaryEditorPane())||void 0===i?void 0:i.getControl()),e.push(null===(r=s.getSecondaryEditorPane())||void 0===r?void 0:r.getControl())):e.push(s.getControl());for(let i of e)((0,u.s)(i)||(0,u.l)(i))&&t.push(i)}return t}getVisibleTextEditorControls(e){return this.doGetVisibleTextEditorControls((0,l._N)(this.editorGroupsContainer.getGroups(e===p.Ut.SEQUENTIAL?p.X.GRID_APPEARANCE:p.X.MOST_RECENTLY_ACTIVE).map(e=>e.activeEditorPane)))}get visibleEditors(){return(0,l._N)(this.editorGroupsContainer.groups.map(e=>e.activeEditor))}async openEditor(e,t,i){let r,s,o=(0,p.rn)(e)?t:e.options;if((0,h.J)(t)&&(i=t),!(0,p.rn)(e)){let t=await this.editorResolverService.resolveEditor(e,i);if(t===h.n.ABORT)return;(0,p.an)(t)&&(r=t.editor,o=t.options,s=t.group)}if(r||(r=(0,p.rn)(e)?e:await this.textEditorService.resolveTextEditor(e)),!s){let e,t=this.instantiationService.invokeFunction(I,{editor:r,options:o},i);[s,e]=t instanceof Promise?await t:t,e&&(o=(0,a.A)((0,a.A)({},o),{},{activation:e}))}return s.openEditor(r,o)}async openEditors(e,t,i){if(null!==i&&void 0!==i&&i.validateTrust&&!await this.handleWorkspaceTrust(e))return[];let r=new Map;for(let o of e){let e,i;if(!(0,p.in)(o)){let r=await this.editorResolverService.resolveEditor(o,t);if(r===h.n.ABORT)continue;(0,p.an)(r)&&(e=r,i=r.group)}if(e||(e=(0,p.in)(o)?o:{editor:await this.textEditorService.resolveTextEditor(o),options:o.options}),!i){let r=this.instantiationService.invokeFunction(I,e,t);[i]=r instanceof Promise?await r:r}let s=r.get(i);s||(s=[],r.set(i,s)),s.push(e)}let s=[];for(let[o,n]of r)s.push(o.openEditors(n));return(0,l._N)(await l.Dw.settled(s))}async handleWorkspaceTrust(e){let{resources:t,diffMode:i,mergeMode:r}=this.extractEditorResources(e);switch(await this.workspaceTrustRequestService.requestOpenFilesTrust(t)){case h.tr.Open:return!0;case h.tr.OpenInNewWindow:return await this.hostService.openWindow(t.map(e=>({fileUri:e})),{forceNewWindow:!0,diffMode:i,mergeMode:r}),!1;case h.tr.Cancel:return!1}}extractEditorResources(e){let t=new l.Rj,i=!1,r=!1;for(let s of e)if((0,p.in)(s)){let e=p.Ht.getOriginalUri(s.editor,{supportSideBySide:p.Jt.BOTH});l.xO.isUri(e)?t.add(e):e&&(e.primary&&t.add(e.primary),e.secondary&&t.add(e.secondary),i=s.editor instanceof p.nt)}else(0,p.dn)(s)&&(l.xO.isUri(s.input1)&&t.add(s.input1.resource),l.xO.isUri(s.input2)&&t.add(s.input2.resource),l.xO.isUri(s.base)&&t.add(s.base.resource),l.xO.isUri(s.result)&&t.add(s.result.resource),r=!0),(0,p.ln)(s)?(l.xO.isUri(s.original.resource)&&t.add(s.original.resource),l.xO.isUri(s.modified.resource)&&t.add(s.modified.resource),i=!0):(0,p.un)(s)&&t.add(s.resource);return{resources:Array.from(t.keys()),diffMode:i,mergeMode:r}}isOpened(e){return this.editorsObserver.hasEditor({resource:this.uriIdentityService.asCanonicalUri(e.resource),typeId:e.typeId,editorId:e.editorId})}isVisible(e){for(let i of this.editorGroupsContainer.groups){var t;if(null!==(t=i.activeEditor)&&void 0!==t&&t.matches(e))return!0}return!1}async closeEditor(e,t){var i;let{editor:r,groupId:s}=e;await(null===(i=this.editorGroupsContainer.getGroup(s))||void 0===i?void 0:i.closeEditor(r,t))}async closeEditors(e,t){let i=new Map;for(let{editor:r,groupId:s}of e){let e=this.editorGroupsContainer.getGroup(s);if(!e)continue;let t=i.get(e);t||(t=[],i.set(e,t)),t.push(r)}for(let[r,s]of i)await r.closeEditors(s,t)}findEditors(e,t,i){let r=l.xO.isUri(e)?e:e.resource,s=l.xO.isUri(e)?void 0:e.typeId;if((null===t||void 0===t?void 0:t.supportSideBySide)!==p.Jt.ANY&&(null===t||void 0===t?void 0:t.supportSideBySide)!==p.Jt.SECONDARY&&!this.editorsObserver.hasEditors(r))return l.xO.isUri(e)||(0,l.eN)(i)?[]:void 0;if((0,l.eN)(i)){let i=[];for(let r of this.editorGroupsContainer.getGroups((null===t||void 0===t?void 0:t.order)===p.Ut.SEQUENTIAL?p.X.GRID_APPEARANCE:p.X.MOST_RECENTLY_ACTIVE)){let s=[];if(l.xO.isUri(e))s.push(...this.findEditors(e,t,r));else{let i=this.findEditors(e,t,r);i&&s.push(i)}i.push(...s.map(e=>({editor:e,groupId:r.id})))}return i}{let o="number"==typeof i?this.editorGroupsContainer.getGroup(i):i;if(l.xO.isUri(e))return o?o.findEditors(r,t):[];{if(!o)return;let e=o.findEditors(r,t);for(let t of e)if(t.typeId===s)return t;return}}}async replaceEditors(e,t){let i="number"==typeof t?this.editorGroupsContainer.getGroup(t):t,r=[];for(let s of e){let e;if(!(0,p.rn)(s.replacement)){let t=await this.editorResolverService.resolveEditor(s.replacement,i);if(t===h.n.ABORT)continue;(0,p.an)(t)&&(e={editor:s.editor,replacement:t.editor,options:t.options,forceReplaceDirty:s.forceReplaceDirty})}e||(e={editor:s.editor,replacement:(0,p.et)(s)?s.replacement:await this.textEditorService.resolveTextEditor(s.replacement),options:(0,p.et)(s)?s.options:s.replacement.options,forceReplaceDirty:s.forceReplaceDirty}),r.push(e)}return null===i||void 0===i?void 0:i.replaceEditors(r)}async save(e,t){Array.isArray(e)||(e=[e]);let i=this.getUniqueEditors(e),r=[],s=[];if(null!==t&&void 0!==t&&t.saveAs)s.push(...i);else for(let{groupId:d,editor:a}of i)a.hasCapability(p.zt.Untitled)?s.push({groupId:d,editor:a}):r.push({groupId:d,editor:a});let o=await l.Dw.settled(r.map(e=>{var i;let{groupId:r,editor:s}=e;return(null===t||void 0===t?void 0:t.reason)===p.Kt.EXPLICIT&&null!==(i=this.editorGroupsContainer.getGroup(r))&&void 0!==i&&i.pinEditor(s),s.save(r,t)}));for(let{groupId:d,editor:l}of s){var n;if(l.isDisposed())continue;let e={pinned:!0,viewState:null===(n=await this.openEditor(l,d))||void 0===n?void 0:n.getViewState()},i=null!==t&&void 0!==t&&t.saveAs?await l.saveAs(d,t):await l.save(d,t);if(o.push(i),!i)break;if(!l.matches(i)){let t=l.hasCapability(p.zt.Untitled)?this.editorGroupsContainer.groups.map(e=>e.id):[d];for(let r of t)i instanceof p.jt?await this.replaceEditors([{editor:l,replacement:i,options:e}],r):await this.replaceEditors([{editor:l,replacement:(0,a.A)((0,a.A)({},i),{},{options:e})}],r)}}return{success:o.every(e=>!!e),editors:(0,l._N)(o)}}saveAll(e){return this.save(this.getAllModifiedEditors(e),e)}async revert(e,t){Array.isArray(e)||(e=[e]);let i=this.getUniqueEditors(e);return await l.Dw.settled(i.map(async e=>{var i;let{groupId:r,editor:s}=e;return null!==(i=this.editorGroupsContainer.getGroup(r))&&void 0!==i&&i.pinEditor(s),s.revert(r,t)})),!i.some(e=>{let{editor:t}=e;return t.isDirty()})}async revertAll(e){return this.revert(this.getAllModifiedEditors(e),e)}getAllModifiedEditors(e){let t=[];for(let r of this.editorGroupsContainer.getGroups(p.X.MOST_RECENTLY_ACTIVE))for(let s of r.getEditors(p.Ut.MOST_RECENTLY_ACTIVE)){var i;s.isModified()&&(("boolean"==typeof(null===e||void 0===e?void 0:e.includeUntitled)||null===e||void 0===e||null===(i=e.includeUntitled)||void 0===i||!i.includeScratchpad)&&s.hasCapability(p.zt.Scratchpad)||(null===e||void 0===e||!e.includeUntitled)&&s.hasCapability(p.zt.Untitled)||(null===e||void 0===e?void 0:e.excludeSticky)&&r.isSticky(s)||t.push({groupId:r.id,editor:s}))}return t}getUniqueEditors(e){let t=[];for(let{editor:i,groupId:r}of e)t.some(e=>e.editor.matches(i))||t.push({editor:i,groupId:r});return t}dispose(){super.dispose(),this.activeOutOfWorkspaceWatchers.forEach(e=>(0,l.Sj)(e)),this.activeOutOfWorkspaceWatchers.clear()}};P=x=(0,l.Jb)([(0,l.Yb)(1,p.W),(0,l.Yb)(2,l.rx),(0,l.Yb)(3,l.fs),(0,l.Yb)(4,l.r_),(0,l.Yb)(5,l.ja),(0,l.Yb)(6,l.Wo),(0,l.Yb)(7,h.B),(0,l.Yb)(8,l.wa),(0,l.Yb)(9,h.R),(0,l.Yb)(10,c.u)],P),(0,l.Xb)(),(0,l.wj)(),(0,p.i)(),(0,p.V)(),(0,h.z)(),(0,p.en)(),(0,p.At)(),(0,p.G)(),(0,p.C)(),(0,p.l)(),(0,l.gb)(),(0,l.gr)(),(0,l.Hj)(),(0,l.Go)();var L=(d=class extends l.mj{constructor(e,t,i,r,s,o,n,d){super(),this.filesConfigurationService=e,this.hostService=t,this.editorService=i,this.editorGroupService=r,this.workingCopyService=s,this.logService=o,this.markerService=n,this.uriIdentityService=d,this.scheduledAutoSavesAfterDelay=new Map,this.lastActiveEditor=void 0,this.lastActiveGroupId=void 0,this.lastActiveEditorControlDisposable=this._register(new l.gj),this.waitingOnConditionAutoSaveWorkingCopies=new l.Lj(e=>this.uriIdentityService.extUri.getComparisonKey(e)),this.waitingOnConditionAutoSaveEditors=new l.Lj(e=>this.uriIdentityService.extUri.getComparisonKey(e));for(let a of this.workingCopyService.dirtyWorkingCopies)this.onDidRegister(a);this.registerListeners()}registerListeners(){this._register(this.hostService.onDidChangeFocus(e=>this.onWindowFocusChange(e))),this._register(this.hostService.onDidChangeActiveWindow(()=>this.onActiveWindowChange())),this._register(this.editorService.onDidActiveEditorChange(()=>this.onDidActiveEditorChange())),this._register(this.filesConfigurationService.onDidChangeAutoSaveConfiguration(()=>this.onDidChangeAutoSaveConfiguration())),this._register(this.workingCopyService.onDidRegister(e=>this.onDidRegister(e))),this._register(this.workingCopyService.onDidUnregister(e=>this.onDidUnregister(e))),this._register(this.workingCopyService.onDidChangeDirty(e=>this.onDidChangeDirty(e))),this._register(this.workingCopyService.onDidChangeContent(e=>this.onDidChangeContent(e))),this._register(this.markerService.onMarkerChanged(e=>this.onConditionChanged(e,p.t.ERRORS))),this._register(this.filesConfigurationService.onDidChangeAutoSaveDisabled(e=>this.onConditionChanged([e],p.t.DISABLED)))}onConditionChanged(e,t){for(let i of e){let e=this.waitingOnConditionAutoSaveWorkingCopies.get(i);if((null===e||void 0===e?void 0:e.condition)===t)e.workingCopy.isDirty()&&this.filesConfigurationService.getAutoSaveMode(e.workingCopy.resource,e.reason).mode!==p.n.OFF&&(this.discardAutoSave(e.workingCopy),this.logService.trace("[editor auto save] running auto save from condition change event",e.workingCopy.resource.toString(),e.workingCopy.typeId),e.workingCopy.save({reason:e.reason}));else{let e=this.waitingOnConditionAutoSaveEditors.get(i);(null===e||void 0===e?void 0:e.condition)===t&&!e.editor.editor.isDisposed()&&e.editor.editor.isDirty()&&this.filesConfigurationService.getAutoSaveMode(e.editor.editor,e.reason).mode!==p.n.OFF&&(this.waitingOnConditionAutoSaveEditors.delete(i),this.logService.trace("[editor auto save] running auto save from condition change event with reason ".concat(e.reason)),this.editorService.save(e.editor,{reason:e.reason}))}}}onWindowFocusChange(e){e||this.maybeTriggerAutoSave(p.Kt.WINDOW_CHANGE)}onActiveWindowChange(){this.maybeTriggerAutoSave(p.Kt.WINDOW_CHANGE)}onDidActiveEditorChange(){var e;this.lastActiveEditor&&"number"==typeof this.lastActiveGroupId&&this.maybeTriggerAutoSave(p.Kt.FOCUS_CHANGE,{groupId:this.lastActiveGroupId,editor:this.lastActiveEditor});let t=this.editorGroupService.activeGroup,i=this.lastActiveEditor=null!==(e=t.activeEditor)&&void 0!==e?e:void 0;this.lastActiveGroupId=t.id,this.lastActiveEditorControlDisposable.clear();let r=this.editorService.activeEditorPane;i&&r&&this.lastActiveEditorControlDisposable.add(r.onDidBlur(()=>{this.maybeTriggerAutoSave(p.Kt.FOCUS_CHANGE,{groupId:t.id,editor:i})}))}maybeTriggerAutoSave(e,t){if(t){if(!t.editor.isDirty()||t.editor.isReadonly()||t.editor.hasCapability(p.zt.Untitled))return;let i=this.filesConfigurationService.getAutoSaveMode(t.editor,e);i.mode===p.n.OFF?t.editor.resource&&(i.reason===p.t.ERRORS||i.reason===p.t.DISABLED)&&this.waitingOnConditionAutoSaveEditors.set(t.editor.resource,{editor:t,reason:e,condition:i.reason}):(e===p.Kt.WINDOW_CHANGE&&(i.mode===p.n.ON_FOCUS_CHANGE||i.mode===p.n.ON_WINDOW_CHANGE)||e===p.Kt.FOCUS_CHANGE&&i.mode===p.n.ON_FOCUS_CHANGE)&&(this.logService.trace("[editor auto save] triggering auto save with reason ".concat(e)),this.editorService.save(t,{reason:e}))}else this.saveAllDirtyAutoSaveables(e)}onDidChangeAutoSaveConfiguration(){let e;switch(this.filesConfigurationService.getAutoSaveMode(void 0).mode){case p.n.ON_FOCUS_CHANGE:e=p.Kt.FOCUS_CHANGE;break;case p.n.ON_WINDOW_CHANGE:e=p.Kt.WINDOW_CHANGE;break;case p.n.AFTER_SHORT_DELAY:case p.n.AFTER_LONG_DELAY:e=p.Kt.AUTO}e&&this.saveAllDirtyAutoSaveables(e)}saveAllDirtyAutoSaveables(e){for(let t of this.workingCopyService.dirtyWorkingCopies){if(t.capabilities&p.c.Untitled)continue;let i=this.filesConfigurationService.getAutoSaveMode(t.resource,e);i.mode===p.n.OFF?(i.reason===p.t.ERRORS||i.reason===p.t.DISABLED)&&this.waitingOnConditionAutoSaveWorkingCopies.set(t.resource,{workingCopy:t,reason:e,condition:i.reason}):t.save({reason:e})}}onDidRegister(e){e.isDirty()&&this.scheduleAutoSave(e)}onDidUnregister(e){this.discardAutoSave(e)}onDidChangeDirty(e){e.isDirty()?this.scheduleAutoSave(e):this.discardAutoSave(e)}onDidChangeContent(e){e.isDirty()&&this.scheduleAutoSave(e)}scheduleAutoSave(e){if(e.capabilities&p.c.Untitled)return;let t=this.filesConfigurationService.getAutoSaveConfiguration(e.resource).autoSaveDelay;if("number"!=typeof t)return;this.discardAutoSave(e),this.logService.trace("[editor auto save] scheduling auto save after ".concat(t,"ms"),e.resource.toString(),e.typeId);let i=setTimeout(()=>{if(this.discardAutoSave(e),e.isDirty()){let t=p.Kt.AUTO,i=this.filesConfigurationService.getAutoSaveMode(e.resource,t);i.mode===p.n.OFF?(i.reason===p.t.ERRORS||i.reason===p.t.DISABLED)&&this.waitingOnConditionAutoSaveWorkingCopies.set(e.resource,{workingCopy:e,reason:t,condition:i.reason}):(this.logService.trace("[editor auto save] running auto save",e.resource.toString(),e.typeId),e.save({reason:t}))}},t);this.scheduledAutoSavesAfterDelay.set(e,(0,l.kj)(()=>{this.logService.trace("[editor auto save] clearing pending auto save",e.resource.toString(),e.typeId),clearTimeout(i)}))}discardAutoSave(e){(0,l.Sj)(this.scheduledAutoSavesAfterDelay.get(e)),this.scheduledAutoSavesAfterDelay.delete(e),this.waitingOnConditionAutoSaveWorkingCopies.delete(e.resource),this.waitingOnConditionAutoSaveEditors.delete(e.resource)}},{_:d.ID="workbench.contrib.editorAutoSave"},d);L=(0,l.Jb)([(0,l.Yb)(0,p.B),(0,l.Yb)(1,h.R),(0,l.Yb)(2,p.kt),(0,l.Yb)(3,p.W),(0,l.Yb)(4,p.S),(0,l.Yb)(5,l.mb),(0,l.Yb)(6,l.hr),(0,l.Yb)(7,l.Wo)],L),(0,p.b)(),(0,p.x)(L.ID,L,p.y.BlockRestore),(0,l.Xb)(),(0,p.Tt)(),(0,l.ps)(),(0,l.X_)();var M,G,k,N=class extends p.wt{constructor(e,t,i){super(),this.resource=e,this.name=t,this.fileService=i,this.mime=l.J_.binary}getName(){return this.name}getSize(){return this.size}getMime(){return this.mime}getETag(){return this.etag}async resolve(){if(this.fileService.hasProvider(this.resource)){let e=await this.fileService.stat(this.resource);this.etag=e.etag,"number"==typeof e.size&&(this.size=e.size)}return super.resolve()}};N=(0,l.Jb)([(0,l.Yb)(2,l.fs)],N),(0,l.Xb)(),(0,p.en)(),(0,h._)(),(0,l.ps)(),(0,p.h)(),(0,p.D)(),(0,l.ox)(),(0,l.wj)(),(0,l.Qb)(),(0,l.Ua)(),(0,p.V)(),(0,p.At)(),(0,l.dT)(),(0,l.sj)(),(0,l.ET)(),(0,l.hu)(),(0,p.j)(),(0,l.pv)(),(0,h.U)(),(k=G||(G={}))[k.None=0]="None",k[k.Text=1]="Text",k[k.Binary=2]="Binary";var F=M=class extends h.h{get typeId(){return g.r}get editorId(){return p.Ft.id}get capabilities(){let e=p.zt.CanSplitInGroup;return this.model?this.model.isReadonly()&&(e|=p.zt.Readonly):this.fileService.hasProvider(this.resource)?this.filesConfigurationService.isReadonly(this.resource)&&(e|=p.zt.Readonly):e|=p.zt.Untitled,e&p.zt.Readonly||(e|=p.zt.CanDropIntoEditor),e}constructor(e,t,i,r,s,o,n,d,a,h,u,c,p,g,v,f,E){super(e,t,g,a,u,c,p,f,E),this.instantiationService=d,this.textModelService=h,this.pathService=v,this.forceOpenAs=G.None,this.model=void 0,this.cachedTextFileModelReference=void 0,this.modelListeners=this._register(new l.gj),this.model=this.textFileService.files.get(e),i&&this.setPreferredName(i),r&&this.setPreferredDescription(r),s&&this.setPreferredEncoding(s),o&&this.setPreferredLanguageId(o),"string"==typeof n&&this.setPreferredContents(n),this._register(this.textFileService.files.onDidCreate(e=>this.onDidCreateTextFileModel(e))),this.model&&this.registerModelListeners(this.model)}onDidCreateTextFileModel(e){(0,l.pT)(e.resource,this.resource)&&(this.model=e,this.registerModelListeners(e))}registerModelListeners(e){this.modelListeners.clear(),this.modelListeners.add(e.onDidChangeDirty(()=>this._onDidChangeDirty.fire())),this.modelListeners.add(e.onDidChangeReadonly(()=>this._onDidChangeCapabilities.fire())),this.modelListeners.add(e.onDidSaveError(()=>this._onDidChangeDirty.fire())),this.modelListeners.add(l.tj.once(e.onWillDispose)(()=>{this.modelListeners.clear(),this.model=void 0}))}getName(){return this.preferredName||super.getName()}setPreferredName(e){this.allowLabelOverride()&&this.preferredName!==e&&(this.preferredName=e,this._onDidChangeLabel.fire())}allowLabelOverride(){return this.resource.scheme!==this.pathService.defaultUriScheme&&this.resource.scheme!==l.TT.vscodeUserData&&this.resource.scheme!==l.TT.file&&this.resource.scheme!==l.TT.vscodeRemote}getPreferredName(){return this.preferredName}isReadonly(){return this.model?this.model.isReadonly():this.filesConfigurationService.isReadonly(this.resource)}getDescription(e){return this.preferredDescription||super.getDescription(e)}setPreferredDescription(e){this.allowLabelOverride()&&this.preferredDescription!==e&&(this.preferredDescription=e,this._onDidChangeLabel.fire())}getPreferredDescription(){return this.preferredDescription}getTitle(e){let t=super.getTitle(e),i=this.getPreferredTitle();return i&&(t="".concat(i," (").concat(t,")")),t}getPreferredTitle(){var e;return this.preferredName&&this.preferredDescription?"".concat(this.preferredName," ").concat(this.preferredDescription):this.preferredName||this.preferredDescription?null!==(e=this.preferredName)&&void 0!==e?e:this.preferredDescription:void 0}getEncoding(){return this.model?this.model.getEncoding():this.preferredEncoding}getPreferredEncoding(){return this.preferredEncoding}async setEncoding(e,t){var i;return this.setPreferredEncoding(e),null===(i=this.model)||void 0===i?void 0:i.setEncoding(e,t)}setPreferredEncoding(e){this.preferredEncoding=e,this.setForceOpenAsText()}getLanguageId(){return this.model?this.model.getLanguageId():this.preferredLanguageId}getPreferredLanguageId(){return this.preferredLanguageId}setLanguageId(e,t){var i;this.setPreferredLanguageId(e),null===(i=this.model)||void 0===i||i.setLanguageId(e,t)}setPreferredLanguageId(e){this.preferredLanguageId=e,this.setForceOpenAsText()}setPreferredContents(e){this.preferredContents=e,this.setForceOpenAsText()}setForceOpenAsText(){this.forceOpenAs=G.Text}setForceOpenAsBinary(){this.forceOpenAs=G.Binary}isDirty(){var e;return!(null===(e=this.model)||void 0===e||!e.isDirty())}isSaving(){var e,t,i;return!(null!==(e=this.model)&&void 0!==e&&e.hasState(p.d.SAVED)||null!==(t=this.model)&&void 0!==t&&t.hasState(p.d.CONFLICT)||null!==(i=this.model)&&void 0!==i&&i.hasState(p.d.ERROR))&&(!!this.filesConfigurationService.hasShortAutoSaveDelay(this)||super.isSaving())}prefersEditorPane(e){return this.forceOpenAs===G.Binary?e.find(e=>e.typeId===g.t):e.find(e=>e.typeId===g.o)}resolve(e){return this.forceOpenAs===G.Binary?this.doResolveAsBinary():this.doResolveAsText(e)}async doResolveAsText(e){try{let t=this.preferredContents;this.preferredContents=void 0,await this.textFileService.files.resolve(this.resource,{languageId:this.preferredLanguageId,encoding:this.preferredEncoding,contents:"string"==typeof t?(0,l.du)(t):void 0,reload:{async:!0},allowBinary:this.forceOpenAs===G.Text,reason:p.m.EDITOR,limits:this.ensureLimits(e)}),this.cachedTextFileModelReference||(this.cachedTextFileModelReference=await this.textModelService.createModelReference(this.resource));let i=this.cachedTextFileModelReference.object;return this.isDisposed()&&this.disposeModelReference(),i}catch(e){if(e.textFileOperationResult===p.p.FILE_IS_BINARY)return this.doResolveAsBinary();throw e}}async doResolveAsBinary(){let e=this.instantiationService.createInstance(N,this.preferredResource,this.getName());return await e.resolve(),e}isResolved(){return!!this.model}async rename(e,t){return{editor:{resource:t,encoding:this.getEncoding(),options:{viewState:(0,p.$t)(this,e,this.editorService)}}}}toUntyped(e){let t={resource:this.preferredResource,forceFile:!0,options:{override:this.editorId}};return"number"==typeof(null===e||void 0===e?void 0:e.preserveViewState)&&(t.encoding=this.getEncoding(),t.languageId=this.getLanguageId(),t.contents=(()=>{let e=this.textFileService.files.get(this.resource);if(null!==e&&void 0!==e&&e.isDirty()&&!e.textEditorModel.isTooLargeForHeapOperation())return e.textEditorModel.getValue()})(),t.options=(0,a.A)((0,a.A)({},t.options),{},{viewState:(0,p.$t)(this,e.preserveViewState,this.editorService)})),t}matches(e){return this===e||(e instanceof M?(0,l.pT)(e.resource,this.resource):!!(0,p.un)(e)&&super.matches(e))}dispose(){this.model=void 0,this.disposeModelReference(),super.dispose()}disposeModelReference(){(0,l.Sj)(this.cachedTextFileModelReference),this.cachedTextFileModelReference=void 0}};function V(e,t,i,r){let s=function(e,t,i,r){let s=r.lastFocusedList,o=s instanceof l.Xi&&s.getHTMLElement()===(0,l.zx)(),n=function(e,t,i,r,s){let o=e.filter(e=>(0,p.tn)(e)||l.xO.isUri(e));for(let n of o)if((0,p.tn)(n))return n;for(let n of o){let e=i.findEditors(n);if(e.length){let t=e[0],i=r.getGroup(t.groupId);return{groupId:t.groupId,editorIndex:null===i||void 0===i?void 0:i.getIndexOfEditor(t.editor)}}}if(t){let e=s.lastFocusedList;for(let t of e.getFocusedElements())if(Y(t))return W(t,void 0,r)}}(e,o,t,i,r);if(!n){let e=i.activeGroup,t=e.activeEditor;n={groupId:e.id,editorIndex:t?e.getIndexOfEditor(t):void 0},o=!1}let d=U(n,o,t,i,r);return function(e,t){if(t.length<=1)return t;let i=t.findIndex(t=>t.groupId===e.groupId&&t.editorIndex===e.editorIndex);if(-1!==i)t.splice(i,1),t.unshift(e);else{if(void 0!==e.editorIndex)throw Error("Editor context not found in multi editor context");t.unshift(e)}return t}(n,d)}(e,t,i,r),o={groupedEditors:[],preserveFocus:s.length&&s[0].preserveFocus||!1};for(let n of s){let e=j(n,i);if(!e)continue;let t,{group:r,editor:s}=e;for(let i of o.groupedEditors)if(i.group.id===r.id){t=i;break}t||(t={group:r,editors:[]},o.groupedEditors.push(t)),s&&t.editors.push(s)}return o}function U(e,t,i,r,s){if(t){let t=s.lastFocusedList.getSelectedElements().filter(Y);if(t.length>1)return t.map(t=>W(t,e.preserveFocus,r));if(0===t.length)return U(e,!1,i,r,s)}else{let t=r.getGroup(e.groupId),i=void 0===e.editorIndex?null===t||void 0===t?void 0:t.activeEditor:null===t||void 0===t?void 0:t.getEditorByIndex(e.editorIndex);if(t&&i&&t.isSelected(i))return t.selectedEditors.map(i=>W({editor:i,groupId:t.id},e.preserveFocus,r))}return[e]}function W(e,t,i){if((0,p.$)(e))return{groupId:e.id,editorIndex:void 0,preserveFocus:t};let r=i.getGroup(e.groupId);return{groupId:e.groupId,editorIndex:r?r.getIndexOfEditor(e.editor):-1,preserveFocus:t}}function Y(e){return(0,p.$)(e)||(0,p.nn)(e)}function j(e,t){let i=t.getGroup(e.groupId);if(i)return void 0===e.editorIndex?{group:i,editor:void 0}:{group:i,editor:i.getEditorByIndex(e.editorIndex)}}F=M=(0,l.Jb)([(0,l.Yb)(7,l.rx),(0,l.Yb)(8,p.E),(0,l.Yb)(9,l.Zb),(0,l.Yb)(10,l.Ha),(0,l.Yb)(11,l.fs),(0,l.Yb)(12,p.B),(0,l.Yb)(13,p.kt),(0,l.Yb)(14,p.A),(0,l.Yb)(15,l.dv),(0,l.Yb)(16,h.H)],F),(0,l.Mb)(),(0,p.en)(),l.jb.as(p.Rt.EditorFactory).registerFileEditorFactory({typeId:g.r,createFileEditor:(e,t,i,r,s,o,n,d)=>d.createInstance(F,e,t,i,r,s,o,n),isFileEditor:e=>e instanceof F}),(0,l.oS)(),(0,l.Zi)(),(0,l.SO)(),(0,p.en)(),(0,p.Q)();var H,K=class{constructor(e){this.root=new z;for(let[t,i]of e)for(let e of i)this.root.add(t,e)}toString(){return this.root.toString()}getAttributes(e,t){let i=e.lastIndexOf(".");return i<1?{dirname:t,basename:e,extname:""}:{dirname:t,basename:e.substring(0,i),extname:e.substring(i+1)}}nest(e,t){var i=this;let r=new z;for(let n of e){let e=this.getAttributes(n,t),i=this.root.get(n,e);for(let t of i)r.add(t,n)}let s=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;if(o.has(e))return[];o.add(e);let n=i.getAttributes(e,t),d=r.get(e,n);return 0===d.length||1===d.length&&d[0]===e?[e]:d.flatMap(e=>s(e,o))},o=new Map;for(let n of e){let e=s(n);0===e.length&&(e=[n]);for(let t of e){let e=o.get(t);e||o.set(t,e=new Set),n!==t&&e.add(n)}}return o}},z=class e{constructor(){this.value=new B,this.map=new Map}add(t,i){if(""===t)this.value.add(t,i);else if("*"===t[0])this.value.add(t,i);else{let r=t[0],s=t.slice(1),o=this.map.get(r);o||this.map.set(r,o=new e),o.add(s,i)}}get(e,t){let i=[];i.push(...this.value.get(e,t));let r=e[0],s=e.slice(1),o=this.map.get(r);return o&&i.push(...o.get(s,t)),i}toString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[];return this.value.hasItems&&t.push("* => \n"+this.value.toString(e+"  ")),t.map(t=>e+t).join("\n")}},B=class e{constructor(){this.star=[],this.epsilon=[],this.map=new Map,this.hasItems=!1}add(t,i){if(this.hasItems=!0,"*"===t)this.star.push(new X(i));else if(""===t)this.epsilon.push(new X(i));else{let r=t[t.length-1],s=t.slice(0,t.length-1);if("*"===r)throw Error("Unexpected star in SufTrie key: "+t);{let t=this.map.get(r);t||this.map.set(r,t=new e),t.add(s,i)}}}get(e,t){let i=[];""===e&&i.push(...this.epsilon.map(e=>e.substitute(t))),this.star.length&&i.push(...this.star.map(i=>i.substitute(t,e)));let r=e[e.length-1],s=e.slice(0,e.length-1),o=this.map.get(r);return o&&i.push(...o.get(s,t)),i}toString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[];return this.star.length&&t.push("* => "+this.star.join("; ")),this.epsilon.length&&t.push("\u03b5 => "+this.epsilon.join("; ")),t.map(t=>e+t).join("\n")}};!function(e){e.capture="capture",e.basename="basename",e.dirname="dirname",e.extname="extname"}(H||(H={}));var J=/\$[({](capture|basename|dirname|extname)[)}]/g,X=class{constructor(e){this.tokens=[],J.lastIndex=0;let t,i=0;for(;t=J.exec(e);){let r=e.slice(i,t.index);this.tokens.push(r);let s=t[1];switch(s){case H.basename:case H.dirname:case H.extname:case H.capture:this.tokens.push({capture:s});break;default:throw Error("unknown substitution type: "+s)}i=t.index+t[0].length}if(i!==e.length){let t=e.slice(i,e.length);this.tokens.push(t)}}substitute(e,t){return this.tokens.map(i=>{if("string"==typeof i)return i;switch(i.capture){case H.basename:return e.basename;case H.dirname:return e.dirname;case H.extname:return e.extname;case H.capture:return t||""}}).join("")}};(0,l.Xb)(),(0,l.SO)(),(0,l.NT)(),(0,l.DO)(),(0,l.Hj)(),(0,l.Qs)(),(0,l.rA)(),(0,l.AN)(),(0,l.wj)(),(0,l.Kd)(),(0,l.sj)(),(0,l.dT)(),(0,l.GM)();var Z=class e{constructor(e,t,i,r,s,o,n,d,a){let h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:(0,l.aT)(e),u=arguments.length>10?arguments[10]:void 0,c=arguments.length>11&&void 0!==arguments[11]&&arguments[11];this.resource=e,this.fileService=t,this.configService=i,this.filesConfigService=r,this._parent=s,this._isDirectory=o,this._isSymbolicLink=n,this._readonly=d,this._locked=a,this._name=h,this._mtime=u,this._unknown=c,this.error=void 0,this._isExcluded=!1,this.markedAsFindResult=!1,this._isDirectoryResolved=!1}get isExcluded(){return!!this._isExcluded||!!this._parent&&this._parent.isExcluded}set isExcluded(e){this._isExcluded=e}hasChildren(e){var t,i;return this.hasNests?null!==(t=null===(i=this.nestedChildren)||void 0===i?void 0:i.some(t=>e(t)))&&void 0!==t&&t:this.isDirectory}get hasNests(){var e;return!(null===(e=this.nestedChildren)||void 0===e||!e.length)}get isDirectoryResolved(){return this._isDirectoryResolved}get isSymbolicLink(){return!!this._isSymbolicLink}get isDirectory(){return!!this._isDirectory}get isReadonly(){return this.filesConfigService.isReadonly(this.resource,{resource:this.resource,name:this.name,readonly:this._readonly,locked:this._locked})}get mtime(){return this._mtime}get name(){return this._name}get isUnknown(){return this._unknown}get parent(){return this._parent}get root(){return this._parent?this._parent.root:this}get children(){return new Map}updateName(e){var t,i;null!==(t=this._parent)&&void 0!==t&&t.removeChild(this),this._name=e,null===(i=this._parent)||void 0===i||i.addChild(this)}getId(){let e=this.root.resource.toString()+"::"+this.resource.toString();return this.isMarkedAsFiltered()&&(e+="::findFilterResult"),e}toString(){return"ExplorerItem: ".concat(this.name)}get isRoot(){return this===this.root}static create(t,i,r,s,o,n){let d=new e(s.resource,t,i,r,o,s.isDirectory,s.isSymbolicLink,s.readonly,s.locked,s.name,s.mtime,!s.isFile&&!s.isDirectory);if(d.isDirectory&&(d._isDirectoryResolved=!!s.children||!!n&&n.some(e=>(0,l.hT)(e,d.resource)),s.children))for(let a=0,l=s.children.length;a<l;a++){let o=e.create(t,i,r,s.children[a],d,n);d.addChild(o)}return d}static mergeLocalWithDisk(t,i){if(t.resource.toString()!==i.resource.toString())return;let r=t.isDirectory||i.isDirectory;if((!r||!i._isDirectoryResolved||t._isDirectoryResolved)&&(i.resource=t.resource,i.isRoot||i.updateName(t.name),i._isDirectory=t.isDirectory,i._mtime=t.mtime,i._isDirectoryResolved=t._isDirectoryResolved,i._isSymbolicLink=t.isSymbolicLink,i.error=t.error,r&&t._isDirectoryResolved)){let r=new l.Lj;i.children.forEach(e=>{r.set(e.resource,e)}),i.children.clear(),t.children.forEach(t=>{let s=r.get(t.resource);s?(e.mergeLocalWithDisk(t,s),i.addChild(s),r.delete(t.resource)):i.addChild(t)}),r.forEach(e=>{e instanceof q&&i.addChild(e)})}}addChild(e){e._parent=this,e.updateResource(!1),this.children.set(this.getPlatformAwareName(e.name),e)}getChild(e){return this.children.get(this.getPlatformAwareName(e))}fetchChildren(t){let i=this.configService.getValue({resource:this.root.resource}).explorer.fileNesting;return i.enabled&&this.nestedChildren?this.nestedChildren:(async()=>{if(!this._isDirectoryResolved){let i=t===g.a.Modified;this.error=void 0;try{let t=await this.fileService.resolve(this.resource,{resolveSingleChildDescendants:!0,resolveMetadata:i}),r=e.create(this.fileService,this.configService,this.filesConfigService,t,this);e.mergeLocalWithDisk(r,this)}catch(e){throw this.error=e,e}this._isDirectoryResolved=!0}let r=[];if(i.enabled){let e=[],t=[];for(let r of this.children.entries())r[1].nestedParent=void 0,r[1].isDirectory?t.push(r):e.push(r);let i=this.fileNester.nest(e.map(e=>{let[t]=e;return t}),this.getPlatformAwareName(this.name));for(let[s,o]of e){let e=i.get(s);if(void 0!==e){o.nestedChildren=[];for(let t of e.keys()){let e=(0,l.UM)(this.children.get(t));o.nestedChildren.push(e),e.nestedParent=o}r.push(o)}else o.nestedChildren=void 0}for(let[s,o]of t.values())r.push(o)}else this.children.forEach(e=>{r.push(e)});return r})()}get fileNester(){if(!this.root._fileNester){let e=this.configService.getValue({resource:this.root.resource}).explorer.fileNesting,t=Object.entries(e.patterns).filter(e=>"string"==typeof e[0]&&"string"==typeof e[1]&&e[0]&&e[1]).map(e=>{let[t,i]=e;return[this.getPlatformAwareName(t.trim()),i.split(",").map(e=>this.getPlatformAwareName(e.trim().replace(/\u200b/g,"").trim())).filter(e=>""!==e)]});this.root._fileNester=new K(t)}return this.root._fileNester}removeChild(e){this.nestedChildren=void 0,this.children.delete(this.getPlatformAwareName(e.name))}forgetChildren(){this.children.clear(),this.nestedChildren=void 0,this._isDirectoryResolved=!1,this._fileNester=void 0}getPlatformAwareName(e){return this.fileService.hasCapability(this.resource,l.js.PathCaseSensitive)?e:e.toLowerCase()}move(e){var t,i;null!==(t=this.nestedParent)&&void 0!==t&&t.removeChild(this),null!==(i=this._parent)&&void 0!==i&&i.removeChild(this),e.removeChild(this),e.addChild(this),this.updateResource(!0)}updateResource(e){this._parent&&(this.resource=(0,l.gT)(this._parent.resource,this.name)),e&&this.isDirectory&&this.children.forEach(e=>{e.updateResource(!0)})}rename(e){this.updateName(e.name),this._mtime=e.mtime,this.updateResource(!0)}find(e){let t=!this.fileService.hasCapability(e,l.js.PathCaseSensitive);return e&&this.resource.scheme===e.scheme&&(0,l.Kk)(this.resource.authority,e.authority)&&(t?(0,l.wA)(e.path,this.resource.path):e.path.startsWith(this.resource.path))?this.findByPath((0,l.xA)(e.path,l.MO.sep),this.resource.path.length,t):null}findByPath(e,t,i){if((0,l.PT)((0,l.xA)(this.resource.path,l.MO.sep),e,i))return this;if(this.isDirectory){for(;t<e.length&&e[t]===l.MO.sep;)t++;let r=e.indexOf(l.MO.sep,t);-1===r&&(r=e.length);let s=e.substring(t,r),o=this.children.get(this.getPlatformAwareName(s));if(o)return o.findByPath(e,r,i)}return null}isMarkedAsFiltered(){return this.markedAsFindResult}markItemAndParentsAsFiltered(){var e;this.markedAsFindResult=!0,null===(e=this.parent)||void 0===e||e.markItemAndParentsAsFiltered()}unmarkItemAndChildren(){this.markedAsFindResult=!1,this.children.forEach(e=>e.unmarkItemAndChildren())}};Z.__decorator=(0,l.Jb)([l.qd],Z.prototype,"children",null);var q=class extends Z{constructor(e,t,i,r,s){super(l.xO.file(""),e,t,i,r,s),this._isDirectoryResolved=!0}};function Q(e){let t=e.get(l.wt).lastFocusedList,i=null===t||void 0===t?void 0:t.getHTMLElement();if(i&&(0,l.cS)(i)&&t instanceof l.Xi){let e,i=(0,l._N)(t.getSelectedElements().filter(e=>e instanceof g.i)),r=t.getFocusedElements(),s=r.length?r[0]:void 0;return s instanceof g.i&&(e=s),i.some(t=>t===e)?i:e?[e]:void 0}}async function $(e,t){let i=e.get(p.W),r=e.get(l.tx),s=e.get(p.E),o=Q(e);if(!o){let e=i.activeGroup;e.activeEditor&&(o=[],!(e.activeEditor instanceof p.Et)||null!==t&&void 0!==t&&t.saveAs||e.activeEditor.primary.hasCapability(p.zt.Untitled)||e.activeEditor.secondary.hasCapability(p.zt.Untitled)||!e.activeEditor.secondary.isModified()?o.push({groupId:e.id,editor:e.activeEditor}):(o.push({groupId:e.id,editor:e.activeEditor.primary}),o.push({groupId:e.id,editor:e.activeEditor.secondary})))}if(!o||0===o.length)return;await te(e,o,t);let n=r.getFocusedCodeEditor();if(n instanceof h.ar&&!n.isSimpleWidget){var d,a;let e=null===(d=n.getModel())||void 0===d?void 0:d.uri;e&&!o.some(t=>{let{editor:i}=t;return(0,l.pT)(p.Ht.getCanonicalUri(i,{supportSideBySide:p.Jt.PRIMARY}),e)})&&((null===(a=s.files.get(e))||void 0===a?void 0:a.isReadonly())||await s.save(e,t))}}function ee(e,t,i){let r=[];for(let s of t)for(let e of s.getEditors(p.Ut.MOST_RECENTLY_ACTIVE))e.isDirty()&&r.push({groupId:s.id,editor:e});return te(e,r,i)}async function te(e,t,i){let r=e.get(p.kt),s=e.get(l.Pd),o=e.get(l.rx);try{await r.save(t,i)}catch(e){if(!(0,l.oP)(e)){let n=[(0,l.qb)({id:"workbench.action.files.saveEditors",label:(0,l.EM)(7562,"Retry"),run:()=>o.invokeFunction(e=>te(e,t,i))})],d=t.filter(e=>{let{editor:t}=e;return!t.hasCapability(p.zt.Untitled)});d.length>0&&n.push((0,l.qb)({id:"workbench.action.files.revertEditors",label:d.length>1?(0,l.EM)(7563,"Revert All"):(0,l.EM)(7564,"Revert"),run:()=>r.revert(d)})),s.notify({id:t.map(e=>{var t;let{editor:i}=e;return(0,l.qC)(null===(t=i.resource)||void 0===t?void 0:t.toString())}).join(),severity:l.Ud.Error,message:(0,l.EM)(7565,"Failed to save '{0}': {1}",t.map(e=>{let{editor:t}=e;return t.getName()}).join(", "),(0,l.Mp)(e,!1)),actions:{primary:n}})}}}(0,l.SO)(),(0,l.Tt)(),(0,p.en)(),(0,l.Zi)(),(0,l.AN)(),(0,l.Ht)(),(0,l.oS)(),(0,l.TM)(),(0,l.Kb)(),(0,l.aP)(),(0,l.JC)(),(0,l.QO)(),(0,l.nx)(),(0,h.sr)(),(0,l.Ib)(),(0,l.ox)(),(0,l.Ab)(),(0,l.Tt)(),(0,l.Bd)(),(0,l.Fd)(),(0,p.en)(),(0,p.Ot)(),(0,p.Q)(),(0,p.G)(),(0,p.At)(),(0,p.D)(),(0,c.l)(),(0,l.dT)(),(0,l.Ap)(),(0,l.Wd)(),l.kb.registerCommandAndKeybindingRule({when:void 0,weight:l.Ob.WorkbenchContrib,primary:l.JO.CtrlCmd|l.KO.KeyS,id:c.s,handler:e=>$(e,{reason:p.Kt.EXPLICIT,force:!0})}),l.kb.registerCommandAndKeybindingRule({when:void 0,weight:l.Ob.WorkbenchContrib,primary:(0,l.GO)(l.JO.CtrlCmd|l.KO.KeyK,l.KO.KeyS),win:{primary:(0,l.GO)(l.JO.CtrlCmd|l.KO.KeyK,l.JO.CtrlCmd|l.JO.Shift|l.KO.KeyS)},id:c.c,handler:e=>$(e,{reason:p.Kt.EXPLICIT,force:!0,skipSaveParticipants:!0})}),l.kb.registerCommandAndKeybindingRule({id:c.a,weight:l.Ob.WorkbenchContrib,when:void 0,primary:l.JO.CtrlCmd|l.JO.Shift|l.KO.KeyS,handler:e=>$(e,{reason:p.Kt.EXPLICIT,saveAs:!0})}),l.kb.registerCommandAndKeybindingRule({when:void 0,weight:l.Ob.WorkbenchContrib,primary:void 0,mac:{primary:l.JO.CtrlCmd|l.JO.Alt|l.KO.KeyS},win:{primary:(0,l.GO)(l.JO.CtrlCmd|l.KO.KeyK,l.KO.KeyS)},id:c.n,handler:e=>ee(e,e.get(p.W).getGroups(p.X.MOST_RECENTLY_ACTIVE),{reason:p.Kt.EXPLICIT})}),l.Fb.registerCommand({id:c.r,handler:(e,t,i)=>{let r,s=e.get(p.W),o=V([i],e.get(p.kt),s,e.get(l.wt));return r=o.groupedEditors.length?o.groupedEditors.map(e=>{let{group:t}=e;return t}):s.getGroups(p.X.MOST_RECENTLY_ACTIVE),ee(e,r,{reason:p.Kt.EXPLICIT})}}),l.Fb.registerCommand({id:c.i,handler:async e=>(await e.get(p.kt).saveAll({includeUntitled:!1,reason:p.Kt.EXPLICIT})).success}),l.Fb.registerCommand({id:c.t,handler:async e=>{let t=e.get(p.W),i=e.get(p.kt),r=Q(e);if(!r){let e=t.activeGroup;e.activeEditor&&(r=[{groupId:e.id,editor:e.activeEditor}])}if(r&&0!==r.length)try{await i.revert(r.filter(e=>{let{editor:t}=e;return!t.hasCapability(p.zt.Untitled)}),{force:!0})}catch(t){e.get(l.Pd).error((0,l.EM)(7566,"Failed to revert '{0}': {1}",r.map(e=>{let{editor:t}=e;return t.getName()}).join(", "),(0,l.Mp)(t,!1)))}}})}}]);