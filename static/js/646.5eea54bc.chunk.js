"use strict";(self.webpackChunkWindmill_Whitelabel_Example=self.webpackChunkWindmill_Whitelabel_Example||[]).push([[646],{646:(t,e,a)=>{a.r(e),a.d(e,{default:()=>b});var n=a(9379),r=a(7091),i=a(3829),l=a(8e3),s=a(6084),d=a(1737),o=(0,i.m)(t=>{let{kind:e}=t;return i.nr.listHubIntegrations({kind:e})},{initial:{kind:"script",refreshCount:0},invalidateMs:6e4});console.log("listHubIntegrationsCached",o);var c=(0,i.m)(async t=>{var e;let{filter:a,kind:n,appFilter:l}=t;return(0,r.n)(i.kn)?a.length>0?await i.fr.queryHubScripts({text:a,limit:40,kind:n}):null!==(e=(await i.fr.getTopHubScripts({limit:40,kind:n,app:l})).asks)&&void 0!==e?e:[]:void 0},{initial:{filter:"",kind:"script",appFilter:void 0,refreshCount:0},invalidateMs:6e4}),v=(0,r.vt)('<div class="text-2xs text-red-400 ftext-2xs font-light text-center py-2 px-3 items-center">Hub not available</div>'),p=(0,r.vt)('<div class="flex flex-col"><div class="text-left text-xs font-normal leading-tight py-0"> </div> <div class="text-left text-2xs font-normal"> </div></div>'),f=(t,e,a)=>e("pickScript",(0,r.Ft)(a)),u=(0,r.vt)('<div class="w-[14px] h-[14px] text-gray-400 flex flex-row items-center justify-center"><!></div>'),x=(0,r.vt)('<div class="grow truncate text-left text-2xs text-secondary font-[220]"> </div>'),g=(0,r.vt)('<kbd class="!text-xs">&crarr;</kbd>'),h=(0,r.vt)('<button><div><!></div> <div class="flex flex-col grow min-w-0"><div class="grow truncate text-left text-2xs text-primary font-normal leading-tight py-0.5"> </div> <!></div> <!></button>'),m=(0,r.vt)('<li class="w-full"><!></li>'),y=(0,r.vt)('<div class="text-2xs text-tercary font-extralight text-center py-2 px-3 items-center">There are more items than being displayed. Refine your search.</div>'),k=(0,r.vt)("<ul></ul> <!>",1);function b(t,e){(0,r.cn)(e,!0);let a=(0,r.Gt)(!1),b=(0,r.o)(),w=(0,r.f)(e,"kind",3,"script"),F=(0,r.f)(e,"filter",11,""),_=(0,r.f)(e,"loading",15,!1),Z=(0,r.f)(e,"selected",3,void 0),C=(0,r.f)(e,"appFilter",3,void 0),W=(0,r.f)(e,"items",31,()=>(0,r.en)([])),A=(0,r.f)(e,"displayPath",3,!1),Q=(0,r.f)(e,"apps",31,()=>(0,r.en)([])),$=(0,r.f)(e,"refreshCount",3,0),j=(0,r.Gt)((0,r.en)([]));(0,r.jt)(()=>{var t,e;F().length>0?Q(Array.from(new Set(null!==(t=null===(e=W())||void 0===e?void 0:e.map(t=>t.app))&&void 0!==t?t:[])).sort()):Q((0,r.Ft)(j))});let H=(0,i.zn)(()=>c({appFilter:C(),filter:F(),kind:w(),refreshCount:$()}),{loadInit:!1});(0,r.jt)(()=>{F(),w(),C(),$(),H.refresh()}),(0,r.jt)(()=>{_("loading"===H.status),(0,r.Wt)(a,!!H.error);let t=H.value;(0,r.Lt)(()=>{if(!t)return;let e=t.map(t=>(0,n.A)((0,n.A)({},t),{},{path:"hub/".concat(t.version_id,"/").concat(t.app,"/").concat(t.summary.toLowerCase().replaceAll(/\s+/g,"_")),summary:"".concat(t.summary," (").concat(t.app,")")}));W(C()?e.filter(t=>t.app===C()):e)})}),(0,r.jt)(()=>{w(),$(),(0,r.Lt)(()=>{!async function(t){try{(0,r.Wt)(a,!1),(0,r.Wt)(j,(await o({kind:t,refreshCount:$()})).map(t=>t.name),!0)}catch(e){console.error("Hub is not available"),(0,r.Wt)(j,[],!0),(0,r.Wt)(a,!0)}}(w())})});var S=(0,r._t)();(0,r.St)("keydown",r.Xt,function(t){var e;if(null!=Z()&&W()&&Z()>=0&&Z()<(null===(e=W())||void 0===e?void 0:e.length)&&"Enter"===t.key){t.preventDefault();let e=W()[Z()];b("pickScript",e)}});var E=(0,r.Qt)(S),I=t=>{(0,r.gt)(t,v())},L=t=>{var e=(0,r._t)(),a=(0,r.Qt)(e),n=t=>{var e=(0,r._t)();(0,r.st)((0,r.Qt)(e),16,()=>Array(15).fill(0),r.ct,(t,e)=>{(0,l.c)(t,{layout:[.1,[1.5]]})}),(0,r.gt)(t,e)},o=t=>{var e=(0,r._t)(),a=(0,r.Qt)(e),n=t=>{var e=k(),a=(0,r.Qt)(e);(0,r.st)(a,23,W,t=>t.path,(t,e,a)=>{var n=m(),o=(0,r.Zt)(n);{let t=t=>{var a=p(),n=(0,r.Zt)(a),i=(0,r.Zt)(n,!0);(0,r.nn)(n);var l=(0,r.$t)(n,2),s=(0,r.Zt)(l,!0);(0,r.nn)(l),(0,r.nn)(a),(0,r.At)(()=>{var t,a;(0,r.mt)(i,null!==(t=(0,r.Ft)(e).summary)&&void 0!==t?t:""),(0,r.mt)(s,null!==(a=(0,r.Ft)(e).path)&&void 0!==a?a:"")}),(0,r.gt)(t,a)},n=(0,r.Jt)(()=>(0,r.Ft)(a)===Z());(0,l.x)(o,{class:"w-full",placement:"right",get forceOpen(){return(0,r.Ft)(n)},text:t,children:(t,n)=>{var l=h();l.__click=[f,b,e];var o=(0,r.Zt)(l),c=(0,r.Zt)(o),v=t=>{let a=(0,r.Jt)(()=>d.t[(0,r.Ft)(e).app]);var n=(0,r._t)();(0,r.tt)((0,r.Qt)(n),()=>(0,r.Ft)(a),(t,e)=>{e(t,{height:14,width:14})}),(0,r.gt)(t,n)},p=t=>{var e=u();(0,s.t)((0,r.Zt)(e),{size:"12"}),(0,r.nn)(e),(0,r.gt)(t,e)};(0,r.dt)(c,t=>{(0,r.Ft)(e).app in d.t?t(v):t(p,!1)}),(0,r.nn)(o);var m=(0,r.$t)(o,2),y=(0,r.Zt)(m),k=(0,r.Zt)(y,!0);(0,r.nn)(y);var w=(0,r.$t)(y,2),F=t=>{var a=x(),n=(0,r.Zt)(a,!0);(0,r.nn)(a),(0,r.At)(()=>(0,r.mt)(n,(0,r.Ft)(e).path)),(0,r.gt)(t,a)};(0,r.dt)(w,t=>{A()&&(0,r.Ft)(e).path&&t(F)}),(0,r.nn)(m);var _=(0,r.$t)(m,2),C=t=>{(0,r.gt)(t,g())};(0,r.dt)(_,t=>{(0,r.Ft)(a)===Z()&&t(C)}),(0,r.nn)(l),(0,r.At)(t=>{var n;(0,r.Z)(l,1,"px-3 py-2 gap-2 flex flex-row w-full hover:bg-surface-hover transition-all items-center rounded-md ".concat((0,r.Ft)(a)===Z()?"bg-surface-hover":"")),(0,r.Z)(o,1,t),(0,r.mt)(k,null!==(n=(0,r.Ft)(e).summary)&&void 0!==n?n:"")},[()=>(0,r.Q)((0,i.a)("flex justify-center items-center"))]),(0,r.gt)(t,l)},$$slots:{text:!0,default:!0}})}(0,r.nn)(n),(0,r.gt)(t,n)}),(0,r.nn)(a);var n=(0,r.$t)(a,2),o=t=>{(0,r.gt)(t,y())};(0,r.dt)(n,t=>{40==W().length&&t(o)}),(0,r.gt)(t,e)};(0,r.dt)(a,t=>{W().length>0&&Q().length>0&&t(n)},!0),(0,r.gt)(t,e)};(0,r.dt)(a,t=>{_()?t(n):t(o,!1)},!0),(0,r.gt)(t,e)};(0,r.dt)(E,t=>{(0,r.Ft)(a)?t(I):t(L,!1)}),(0,r.gt)(t,S),(0,r.sn)()}(0,r.xt)(["click"])}}]);