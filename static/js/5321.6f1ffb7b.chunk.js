"use strict";(self.webpackChunkWindmill_Whitelabel_Example=self.webpackChunkWindmill_Whitelabel_Example||[]).push([[5321],{5321:(e,t,i)=>{i.d(t,{a:()=>I,c:()=>S,i:()=>P,l:()=>f,n:()=>N,o:()=>A,r:()=>k,s:()=>C,t:()=>V});var r,o,s,n,d,a=i(9379),l=i(6233),h=i(9114),u=i(9558),c=i(4747),p=i(5929),v=i(308);(0,l.Ib)(),(0,p.en)(),(0,h._)(),(0,p.D)(),(0,l.Xa)(),(0,p.At)(),(0,l.bs)(),(0,l.iT)(),(0,p.k)(),(0,p.j)(),(0,p.V)(),(0,l.Rb)(),(0,l.PA)(),(0,l._v)(),(0,h.z)();var g,f=(r=class extends h.h{get typeId(){return g.ID}get editorId(){return p.Ft.id}constructor(e,t,i,r,o,s,n,d,a,h,u){super(e.resource,void 0,r,t,i,o,d,h,u),this.model=e,this.environmentService=s,this.pathService=n,this.textModelService=a,this.modelResolve=void 0,this.modelDisposables=this._register(new l.EA),this.cachedUntitledTextEditorModelReference=void 0,this.registerModelListeners(e),this._register(this.textFileService.untitled.onDidCreate(e=>this.onDidCreateUntitledModel(e)))}registerModelListeners(e){this.modelDisposables.clear(),this.modelDisposables.add(e.onDidChangeDirty(()=>this._onDidChangeDirty.fire())),this.modelDisposables.add(e.onDidChangeName(()=>this._onDidChangeLabel.fire())),this.modelDisposables.add(e.onDidRevert(()=>this.dispose()))}onDidCreateUntitledModel(e){(0,l.oT)(e.resource,this.model.resource)&&e!==this.model&&(this.model=e,this.registerModelListeners(e))}getName(){return this.model.name}getDescription(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.Xt.MEDIUM;if(!this.model.hasAssociatedFilePath){let e=this.resource.path;return e===this.getName()?void 0:e}return super.getDescription(e)}getTitle(e){if(!this.model.hasAssociatedFilePath){let e=this.getName(),t=this.getDescription();return t&&t!==e?"".concat(e," \u2022 ").concat(t):e}return super.getTitle(e)}isDirty(){return this.model.isDirty()}getEncoding(){return this.model.getEncoding()}setEncoding(e,t){return this.model.setEncoding(e)}get hasLanguageSetExplicitly(){return this.model.hasLanguageSetExplicitly}get hasAssociatedFilePath(){return this.model.hasAssociatedFilePath}setLanguageId(e,t){this.model.setLanguageId(e,t)}getLanguageId(){return this.model.getLanguageId()}async resolve(){return this.modelResolve||(this.modelResolve=(async()=>{this.cachedUntitledTextEditorModelReference=await this.textModelService.createModelReference(this.resource)})()),await this.modelResolve,this.isDisposed()&&this.disposeModelReference(),this.model}toUntyped(e){var t;let i={resource:this.model.hasAssociatedFilePath?(0,l.mT)(this.model.resource,this.environmentService.remoteAuthority,this.pathService.defaultUriScheme):this.resource,forceUntitled:!0,options:{override:this.editorId}};return"number"==typeof(null===e||void 0===e?void 0:e.preserveViewState)&&(i.encoding=this.getEncoding(),i.languageId=this.getLanguageId(),i.contents=this.model.isModified()?null===(t=this.model.textEditorModel)||void 0===t?void 0:t.getValue():void 0,i.options.viewState=(0,p.$t)(this,e.preserveViewState,this.editorService),"string"==typeof i.contents&&!this.model.hasAssociatedFilePath&&!e.preserveResource&&(i.resource=void 0)),i}matches(e){return this===e||(e instanceof g?(0,l.oT)(e.resource,this.resource):!!(0,p.gn)(e)&&super.matches(e))}dispose(){this.modelResolve=void 0,this.disposeModelReference(),super.dispose()}disposeModelReference(){(0,l.MA)(this.cachedUntitledTextEditorModelReference),this.cachedUntitledTextEditorModelReference=void 0}},{_:g=r},{_:r.ID="workbench.editors.untitledEditorInput"},r);f=g=(0,l.Pb)([(0,l.Fb)(1,p.E),(0,l.Fb)(2,l.Ya),(0,l.Fb)(3,p.kt),(0,l.Fb)(4,l.ys),(0,l.Fb)(5,p.O),(0,l.Fb)(6,p.A),(0,l.Fb)(7,p.B),(0,l.Fb)(8,l.Lb),(0,l.Fb)(9,l.hv),(0,l.Fb)(10,h.R)],f),(0,l.Ib)(),(0,l.gA)(),(0,l.vb)(),(0,l.QA)(),(0,l.Kb)(),(0,p.en)(),(0,p.T)(),(0,l.yT)(),(0,p.it)(),(0,p.Ot)(),(0,h._)(),(0,l.iT)(),(0,l.TD)(),(0,l.Qo)(),(0,l.bs)(),(0,h.a)(),(0,h.L)(),(0,l.PA)(),(0,l.im)(),(0,l.xN)();var E,m=class extends Error{constructor(e,t){super(e),this.name="FileEditorInputLeakError",this.stack=t}},S=(o=class extends l.CA{constructor(e,t,i,r,o){super(),this.untitledTextEditorService=e,this.instantiationService=t,this.uriIdentityService=i,this.fileService=r,this.editorResolverService=o,this.editorInputCache=new l.qA,this.fileEditorFactory=l._b.as(p.Rt.EditorFactory).getFileEditorFactory(),this.mapLeakToCounter=new Map,this.registerDefaultEditor()}registerDefaultEditor(){this._register(this.editorResolverService.registerEditor("*",{id:p.Ft.id,label:p.Ft.displayName,detail:p.Ft.providerDisplayName,priority:h.t.builtin},{},{createEditorInput:e=>({editor:this.createTextEditor(e)}),createUntitledEditorInput:e=>({editor:this.createTextEditor(e)}),createDiffEditorInput:e=>({editor:this.createTextEditor(e)})}))}async resolveTextEditor(e){return this.createTextEditor(e)}createTextEditor(e){if((0,p.dn)(e))return this.createTextEditor(e.result);if((0,p.ln)(e)){let t=this.createTextEditor(e.original),i=this.createTextEditor(e.modified);return this.instantiationService.createInstance(p.nt,e.label,e.description,t,i,void 0)}if((0,p.pn)(e)){let t=this.createTextEditor(e.primary),i=this.createTextEditor(e.secondary);return this.instantiationService.createInstance(p.Et,e.label,e.description,i,t)}let t=e;if(t.forceUntitled||!t.resource||t.resource.scheme===l.vT.untitled){var i;let e,r={languageId:t.languageId,initialValue:t.contents,encoding:t.encoding};return e=(null===(i=t.resource)||void 0===i?void 0:i.scheme)===l.vT.untitled?this.untitledTextEditorService.create((0,a.A)({untitledResource:t.resource},r)):this.untitledTextEditorService.create((0,a.A)({associatedResource:t.resource},r)),this.createOrGetCached(e.resource,()=>this.instantiationService.createInstance(f,e))}let r=e;if(r.resource instanceof l.wD){let e=r.label||(0,l.Xw)(r.resource),t=r.resource,i=this.uriIdentityService.asCanonicalUri(t);return this.createOrGetCached(i,()=>r.forceFile||this.fileService.hasProvider(i)?this.fileEditorFactory.createFileEditor(i,t,r.label,r.description,r.encoding,r.languageId,r.contents,this.instantiationService):this.instantiationService.createInstance(h.g,i,r.label,r.description,r.languageId,r.contents),i=>{i instanceof f||(i instanceof h.g?(e&&i.setName(e),r.description&&i.setDescription(r.description),r.languageId&&i.setPreferredLanguageId(r.languageId),"string"==typeof r.contents&&i.setPreferredContents(r.contents)):(i.setPreferredResource(t),r.label&&i.setPreferredName(r.label),r.description&&i.setPreferredDescription(r.description),r.encoding&&i.setPreferredEncoding(r.encoding),r.languageId&&i.setPreferredLanguageId(r.languageId),"string"==typeof r.contents&&i.setPreferredContents(r.contents)))})}throw Error("ITextEditorService: Unable to create texteditor from ".concat(JSON.stringify(e)))}createOrGetCached(e,t,i){let r=this.editorInputCache.get(e);if(r)return null!==i&&void 0!==i&&i(r),r;r=t(),this.editorInputCache.set(e,r);let o=this.trackLeaks(r);return l.dA.once(r.onWillDispose)(()=>{this.editorInputCache.delete(e),o&&this.untrackLeaks(o)}),r}trackLeaks(e){var t,i,r;if(E.LEAK_REPORTED||this.editorInputCache.size<E.LEAK_TRACKING_THRESHOLD)return;let o="".concat(e.resource.scheme,"#").concat(e.typeId||"<no typeId>","#").concat(e.editorId||"<no editorId>","\n").concat(null!==(t=null===(i=Error().stack)||void 0===i?void 0:i.split("\n").slice(2).join("\n"))&&void 0!==t?t:""),s=(null!==(r=this.mapLeakToCounter.get(o))&&void 0!==r?r:0)+1;if(this.mapLeakToCounter.set(o,s),this.editorInputCache.size>E.LEAK_REPORTING_THRESHOLD){E.LEAK_REPORTED=!0;let[e,t]=Array.from(this.mapLeakToCounter.entries()).reduce((e,t)=>{let[i,r]=e,[o,s]=t;return s>r?[o,s]:[i,r]});(0,l.CN)(new m("Potential text editor input LEAK detected, having ".concat(this.editorInputCache.size," text editor inputs already. Most frequent owner (").concat(t,")"),e))}return o}untrackLeaks(e){var t;let i=(null!==(t=this.mapLeakToCounter.get(e))&&void 0!==t?t:1)-1;this.mapLeakToCounter.set(e,i),0===i&&this.mapLeakToCounter.delete(e)}},{_:E=o},{_:o.LEAK_TRACKING_THRESHOLD=256},{_:o.LEAK_REPORTING_THRESHOLD=2*o.LEAK_TRACKING_THRESHOLD},{_:o.LEAK_REPORTED=!1},o);S=E=(0,l.Pb)([(0,l.Fb)(0,p.w),(0,l.Fb)(1,l.Ub),(0,l.Fb)(2,l.Zo),(0,l.Fb)(3,l.ys),(0,l.Fb)(4,h.I)],S);(0,l.Ib)(),(0,l.gA)(),(0,p.en)(),(0,h.c)(),(0,l.Wo)(),(0,l.Kb)(),(0,l.ab)(),(0,l.$d)(),(0,l._v)(),(0,p.G)(),(0,p.At)(),(0,l.PA)();var y,C=class extends h.s{constructor(e,t,i,r,o,s,n,d,a,h){super(e,t,r,d,s),this.instantiationService=o,this.textResourceConfigurationService=n,this.editorService=a,this.editorGroupService=h,this.groupListener=this._register(new l.OA),this.viewState=this.getEditorMemento(h,n,i,100)}setEditorVisible(e){this.groupListener.value=this.group.onWillCloseEditor(e=>this.onWillCloseEditor(e)),super.setEditorVisible(e)}onWillCloseEditor(e){let t=e.editor;t===this.input&&this.updateEditorViewState(t)}clearInput(){this.updateEditorViewState(this.input),super.clearInput()}saveState(){this.updateEditorViewState(this.input),super.saveState()}updateEditorViewState(e){if(!e||!this.tracksEditorViewState(e))return;let t=this.toEditorViewStateResource(e);t&&(this.tracksDisposedEditorViewState()||(this.editorViewStateDisposables||(this.editorViewStateDisposables=new Map),this.editorViewStateDisposables.has(e)||this.editorViewStateDisposables.set(e,l.dA.once(e.onWillDispose)(()=>{var i;this.clearEditorViewState(t,this.group),null===(i=this.editorViewStateDisposables)||void 0===i||i.delete(e)}))),e.isDisposed()&&!this.tracksDisposedEditorViewState()||!this.shouldRestoreEditorViewState(e)&&!this.group.contains(e)?this.clearEditorViewState(t,this.group):e.isDisposed()||this.saveEditorViewState(t))}shouldRestoreEditorViewState(e,t){return null===t||void 0===t||!t.newInGroup||!1!==this.textResourceConfigurationService.getValue(p.Ht.getOriginalUri(e,{supportSideBySide:p.Jt.PRIMARY}),"workbench.editor.restoreViewState")}getViewState(){let e=this.input;if(!e||!this.tracksEditorViewState(e))return;let t=this.toEditorViewStateResource(e);return t?this.computeEditorViewState(t):void 0}saveEditorViewState(e){let t=this.computeEditorViewState(e);t&&this.viewState.saveEditorState(this.group,e,t)}loadEditorViewState(e,t){if(!e||!this.tracksEditorViewState(e)||!this.shouldRestoreEditorViewState(e,t))return;let i=this.toEditorViewStateResource(e);return i?this.viewState.loadEditorState(this.group,i):void 0}moveEditorViewState(e,t,i){return this.viewState.moveEditorState(e,t,i)}clearEditorViewState(e,t){this.viewState.clearEditorState(e,t)}dispose(){if(super.dispose(),this.editorViewStateDisposables){for(let[,e]of this.editorViewStateDisposables)e.dispose();this.editorViewStateDisposables=void 0}}tracksDisposedEditorViewState(){return!1}};C=(0,l.Pb)([(0,l.Fb)(3,l.ib),(0,l.Fb)(4,l.Ub),(0,l.Fb)(5,l.Uo),(0,l.Fb)(6,l.hv),(0,l.Fb)(7,l.Qd),(0,l.Fb)(8,p.kt),(0,l.Fb)(9,p.W)],C),(0,l.fE)(),(0,l.Ib)(),(0,l.Fj)(),(0,l.qx)(),(0,l.ok)(),(0,l.vb)(),(0,p.en)(),(0,p.Ot)(),(0,l.ab)(),(0,l.Kb)(),(0,l.$d)(),(0,p.G)(),(0,l.Yt)(),(0,l.gA)(),(0,l.Wo)(),(0,l.nM)(),(0,l.s_)(),(0,h.Z)(),(0,l.PA)(),(0,h.Xn)(),(0,l._v)(),(0,p.At)(),(0,l.iT)(),(0,l.TD)(),(0,l.en)(),(0,l.mE)({});var A=(s=class extends C{get minimumPrimaryWidth(){return this.primaryEditorPane?this.primaryEditorPane.minimumWidth:0}get maximumPrimaryWidth(){return this.primaryEditorPane?this.primaryEditorPane.maximumWidth:1/0}get minimumPrimaryHeight(){return this.primaryEditorPane?this.primaryEditorPane.minimumHeight:0}get maximumPrimaryHeight(){return this.primaryEditorPane?this.primaryEditorPane.maximumHeight:1/0}get minimumSecondaryWidth(){return this.secondaryEditorPane?this.secondaryEditorPane.minimumWidth:0}get maximumSecondaryWidth(){return this.secondaryEditorPane?this.secondaryEditorPane.maximumWidth:1/0}get minimumSecondaryHeight(){return this.secondaryEditorPane?this.secondaryEditorPane.minimumHeight:0}get maximumSecondaryHeight(){return this.secondaryEditorPane?this.secondaryEditorPane.maximumHeight:1/0}set minimumWidth(e){}set maximumWidth(e){}set minimumHeight(e){}set maximumHeight(e){}get minimumWidth(){return this.minimumPrimaryWidth+this.minimumSecondaryWidth}get maximumWidth(){return this.maximumPrimaryWidth+this.maximumSecondaryWidth}get minimumHeight(){return this.minimumPrimaryHeight+this.minimumSecondaryHeight}get maximumHeight(){return this.maximumPrimaryHeight+this.maximumSecondaryHeight}constructor(e,t,i,r,o,s,n,d,a){super(y.ID,e,y.VIEW_STATE_PREFERENCE_KEY,t,i,o,n,r,d,a),this.configurationService=s,this.onDidCreateEditors=this._register(new l.uA),this._onDidChangeSizeConstraints=this._register(new l.pA),this.onDidChangeSizeConstraints=l.dA.any(this.onDidCreateEditors.event,this._onDidChangeSizeConstraints.event),this._onDidChangeSelection=this._register(new l.uA),this.onDidChangeSelection=this._onDidChangeSelection.event,this.primaryEditorPane=void 0,this.secondaryEditorPane=void 0,this.splitviewDisposables=this._register(new l.EA),this.editorDisposables=this._register(new l.EA),this.dimension=new l.Qb(0,0),this.lastFocusedSide=void 0,this.orientation="vertical"===this.configurationService.getValue(y.SIDE_BY_SIDE_LAYOUT_SETTING)?l.Xt.VERTICAL:l.Xt.HORIZONTAL,this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>this.onConfigurationUpdated(e)))}onConfigurationUpdated(e){e.affectsConfiguration(y.SIDE_BY_SIDE_LAYOUT_SETTING)&&(this.orientation="vertical"===this.configurationService.getValue(y.SIDE_BY_SIDE_LAYOUT_SETTING)?l.Xt.VERTICAL:l.Xt.HORIZONTAL,this.splitview&&this.recreateSplitview())}recreateSplitview(){let e=(0,l.$j)(this.getContainer()),t=this.getSplitViewRatio();this.splitview&&(this.splitview.el.remove(),this.splitviewDisposables.clear()),this.createSplitView(e,t),this.layout(this.dimension)}getSplitViewRatio(){let e;if(this.splitview){let t=this.splitview.getViewSize(0),i=this.splitview.getViewSize(1);Math.abs(t-i)>1&&(e=t/(this.splitview.orientation===l.Xt.HORIZONTAL?this.dimension.width:this.dimension.height))}return e}createEditor(e){e.classList.add("side-by-side-editor"),this.secondaryEditorContainer=(0,l.Zb)(".side-by-side-editor-container.editor-instance"),this.primaryEditorContainer=(0,l.Zb)(".side-by-side-editor-container.editor-instance"),this.createSplitView(e)}createSplitView(e,t){var i,r,o;this.splitview=this.splitviewDisposables.add(new l.Jt(e,{orientation:this.orientation})),this.splitviewDisposables.add(this.splitview.onDidSashReset(()=>{var e;return null===(e=this.splitview)||void 0===e?void 0:e.distributeViewSizes()})),this.orientation===l.Xt.HORIZONTAL?this.splitview.orthogonalEndSash=null===(i=this._boundarySashes)||void 0===i?void 0:i.bottom:(this.splitview.orthogonalStartSash=null===(r=this._boundarySashes)||void 0===r?void 0:r.left,this.splitview.orthogonalEndSash=null===(o=this._boundarySashes)||void 0===o?void 0:o.right);let s=l.qt.Distribute,n=l.qt.Distribute;if(t){let e=this.splitview.orientation===l.Xt.HORIZONTAL?this.dimension.width:this.dimension.height;s=Math.round(e*t),n=e-s,this.splitview.layout(this.orientation===l.Xt.HORIZONTAL?this.dimension.width:this.dimension.height)}let d=(0,l.$j)(this.secondaryEditorContainer);this.splitview.addView({element:d,layout:e=>this.layoutPane(this.secondaryEditorPane,e),minimumSize:this.orientation===l.Xt.HORIZONTAL?h.K.width:h.K.height,maximumSize:1/0,onDidChange:l.dA.None},s);let a=(0,l.$j)(this.primaryEditorContainer);this.splitview.addView({element:a,layout:e=>this.layoutPane(this.primaryEditorPane,e),minimumSize:this.orientation===l.Xt.HORIZONTAL?h.K.width:h.K.height,maximumSize:1/0,onDidChange:l.dA.None},n),this.updateStyles()}getTitle(){return this.input?this.input.getName():(0,l.Ij)(3507,"Side by Side Editor")}async setInput(e,t,i,r){var o,s,n;let d=this.input;await super.setInput(e,t,i,r),(!d||!e.matches(d))&&(d&&this.disposeEditors(),this.createEditors(e));let{primary:a,secondary:h,viewState:u}=this.loadViewState(e,t,i);if(this.lastFocusedSide=null===u||void 0===u?void 0:u.focus,"number"==typeof(null===u||void 0===u?void 0:u.ratio)&&this.splitview){let e=this.splitview.orientation===l.Xt.HORIZONTAL?this.dimension.width:this.dimension.height;this.splitview.resizeView(0,Math.round(e*u.ratio))}else null===(o=this.splitview)||void 0===o||o.distributeViewSizes();await Promise.all([null===(s=this.secondaryEditorPane)||void 0===s?void 0:s.setInput(e.secondary,h,i,r),null===(n=this.primaryEditorPane)||void 0===n?void 0:n.setInput(e.primary,a,i,r)]),"number"==typeof(null===t||void 0===t?void 0:t.target)&&(this.lastFocusedSide=t.target)}loadViewState(e,t,i){let r,o=function(e){let t=e;return"object"==typeof(null===t||void 0===t?void 0:t.primary)&&"object"==typeof t.secondary}(null===t||void 0===t?void 0:t.viewState)?null===t||void 0===t?void 0:t.viewState:this.loadEditorViewState(e,i),s=Object.create(null);return(null===t||void 0===t?void 0:t.target)===p.Jt.SECONDARY?r=(0,a.A)({},t):s=(0,a.A)({},t),s.viewState=null===o||void 0===o?void 0:o.primary,null!==o&&void 0!==o&&o.secondary&&(r?r.viewState=null===o||void 0===o?void 0:o.secondary:r={viewState:o.secondary}),{primary:s,secondary:r,viewState:o}}createEditors(e){this.secondaryEditorPane=this.doCreateEditor(e.secondary,(0,l.$j)(this.secondaryEditorContainer)),this.primaryEditorPane=this.doCreateEditor(e.primary,(0,l.$j)(this.primaryEditorContainer)),this.layout(this.dimension),this._onDidChangeSizeConstraints.input=l.dA.any(l.dA.map(this.secondaryEditorPane.onDidChangeSizeConstraints,()=>{}),l.dA.map(this.primaryEditorPane.onDidChangeSizeConstraints,()=>{})),this.onDidCreateEditors.fire(void 0),this.editorDisposables.add(this.primaryEditorPane.onDidFocus(()=>this.onDidFocusChange(p.Jt.PRIMARY))),this.editorDisposables.add(this.secondaryEditorPane.onDidFocus(()=>this.onDidFocusChange(p.Jt.SECONDARY)))}doCreateEditor(e,t){let i=l._b.as(p.Rt.EditorPane).getEditorPane(e);if(!i)throw Error("No editor pane descriptor for editor found");let r=i.instantiate(this.instantiationService,this.group);return r.create(t),r.setVisible(this.isVisible()),(0,p.cn)(r)&&this.editorDisposables.add(r.onDidChangeSelection(e=>this._onDidChangeSelection.fire(e))),this.editorDisposables.add(r),r}onDidFocusChange(e){this.lastFocusedSide=e,this._onDidChangeControl.fire()}getSelection(){let e=this.getLastFocusedEditorPane();if((0,p.cn)(e)){let t=e.getSelection();if(t)return new D(t,e===this.primaryEditorPane?p.Jt.PRIMARY:p.Jt.SECONDARY)}}setOptions(e){var t;super.setOptions(e),"number"==typeof(null===e||void 0===e?void 0:e.target)&&(this.lastFocusedSide=e.target),null===(t=this.getLastFocusedEditorPane())||void 0===t||t.setOptions(e)}setEditorVisible(e){var t,i;null!==(t=this.primaryEditorPane)&&void 0!==t&&t.setVisible(e),null!==(i=this.secondaryEditorPane)&&void 0!==i&&i.setVisible(e),super.setEditorVisible(e)}clearInput(){var e,t;super.clearInput(),null!==(e=this.primaryEditorPane)&&void 0!==e&&e.clearInput(),null!==(t=this.secondaryEditorPane)&&void 0!==t&&t.clearInput(),this.disposeEditors()}focus(){var e;super.focus(),null===(e=this.getLastFocusedEditorPane())||void 0===e||e.focus()}getLastFocusedEditorPane(){return this.lastFocusedSide===p.Jt.SECONDARY?this.secondaryEditorPane:this.primaryEditorPane}layout(e){this.dimension=e,(0,l.$j)(this.splitview).layout(this.orientation===l.Xt.HORIZONTAL?e.width:e.height)}setBoundarySashes(e){this._boundarySashes=e,this.splitview&&(this.splitview.orthogonalEndSash=e.bottom)}layoutPane(e,t){null===e||void 0===e||e.layout(this.orientation===l.Xt.HORIZONTAL?new l.Qb(t,this.dimension.height):new l.Qb(this.dimension.width,t))}getControl(){var e;return null===(e=this.getLastFocusedEditorPane())||void 0===e?void 0:e.getControl()}getPrimaryEditorPane(){return this.primaryEditorPane}getSecondaryEditorPane(){return this.secondaryEditorPane}tracksEditorViewState(e){return e instanceof p.Et}computeEditorViewState(e){var t,i;if(!this.input||!(0,l.oT)(e,this.toEditorViewStateResource(this.input)))return;let r=null===(t=this.primaryEditorPane)||void 0===t?void 0:t.getViewState(),o=null===(i=this.secondaryEditorPane)||void 0===i?void 0:i.getViewState();return r&&o?{primary:r,secondary:o,focus:this.lastFocusedSide,ratio:this.getSplitViewRatio()}:void 0}toEditorViewStateResource(e){let t,i;if(e instanceof p.Et&&(t=e.primary.resource,i=e.secondary.resource),i&&t)return l.wD.from({scheme:"sideBySide",path:"".concat((0,l.vk)(i.toString())).concat((0,l.vk)(t.toString()))})}updateStyles(){var e,t;super.updateStyles(),this.primaryEditorContainer&&(this.orientation===l.Xt.HORIZONTAL?(this.primaryEditorContainer.style.borderLeftWidth="1px",this.primaryEditorContainer.style.borderLeftStyle="solid",this.primaryEditorContainer.style.borderLeftColor=null!==(e=this.getColor(h.an))&&void 0!==e?e:"",this.primaryEditorContainer.style.borderTopWidth="0"):(this.primaryEditorContainer.style.borderTopWidth="1px",this.primaryEditorContainer.style.borderTopStyle="solid",this.primaryEditorContainer.style.borderTopColor=null!==(t=this.getColor(h.in))&&void 0!==t?t:"",this.primaryEditorContainer.style.borderLeftWidth="0"))}dispose(){this.disposeEditors(),super.dispose()}disposeEditors(){this.editorDisposables.clear(),this.secondaryEditorPane=void 0,this.primaryEditorPane=void 0,this.lastFocusedSide=void 0,this.secondaryEditorContainer&&(0,l.fx)(this.secondaryEditorContainer),this.primaryEditorContainer&&(0,l.fx)(this.primaryEditorContainer)}},{_:y=s},{_:s.ID=p.Gt},{_:s.SIDE_BY_SIDE_LAYOUT_SETTING="workbench.editor.splitInGroupLayout"},{_:s.VIEW_STATE_PREFERENCE_KEY="sideBySideEditorViewState"},s);A=y=(0,l.Pb)([(0,l.Fb)(1,l.ib),(0,l.Fb)(2,l.Ub),(0,l.Fb)(3,l.Qd),(0,l.Fb)(4,l.Uo),(0,l.Fb)(5,l.o_),(0,l.Fb)(6,l.hv),(0,l.Fb)(7,p.kt),(0,l.Fb)(8,p.W)],A);var D=class e{constructor(e,t){this.selection=e,this.side=t}compare(t){return t instanceof e&&this.side===t.side?this.selection.compare(t.selection):p.Vt.DIFFERENT}restore(e){let t=(0,a.A)((0,a.A)({},e),{},{target:this.side});return this.selection.restore(t)}};(0,l.Ib)(),(0,p.en)(),(0,p.Ot)(),(0,l.PA)(),(0,l.Jo)(),(0,l.Wo)(),(0,l.vb)(),(0,l.gA)(),(0,p.Q)(),(0,p.G)(),(0,l.WM)(),(0,l.QA)(),(0,l.qj)();var b,w=(n=class extends l.CA{get count(){return this.mostRecentEditorsMap.size}get editors(){return[...this.mostRecentEditorsMap.values()]}hasEditor(e){var t,i;return null!==(t=null===(i=this.editorsPerResourceCounter.get(e.resource))||void 0===i?void 0:i.has(this.toIdentifier(e)))&&void 0!==t&&t}hasEditors(e){return this.editorsPerResourceCounter.has(e)}toIdentifier(e,t){return"string"==typeof e?t?"".concat(e,"/").concat(t):e:this.toIdentifier(e.typeId,e.editorId)}constructor(e,t,i){super(),this.editorGroupService=t,this.storageService=i,this.keyMap=new Map,this.mostRecentEditorsMap=new l.WA,this.editorsPerResourceCounter=new l.qA,this._onDidMostRecentlyActiveEditorsChange=this._register(new l.uA),this.onDidMostRecentlyActiveEditorsChange=this._onDidMostRecentlyActiveEditorsChange.event,this.editorGroupsContainer=null!==e&&void 0!==e?e:t,this.isScoped=!!e,this.registerListeners(),this.loadState()}registerListeners(){this._register(this.editorGroupsContainer.onDidAddGroup(e=>this.onGroupAdded(e))),this._register(this.editorGroupService.onDidChangeEditorPartOptions(e=>this.onDidChangeEditorPartOptions(e))),this._register(this.storageService.onWillSaveState(()=>this.saveState()))}onGroupAdded(e){let t=e.getEditors(p.Ut.MOST_RECENTLY_ACTIVE);for(let i=t.length-1;i>=0;i--)this.addMostRecentEditor(e,t[i],!1,!0);this.editorGroupsContainer.activeGroup===e&&e.activeEditor&&this.addMostRecentEditor(e,e.activeEditor,!0,!1),this.registerGroupListeners(e)}registerGroupListeners(e){let t=new l.EA;t.add(e.onDidModelChange(t=>{switch(t.kind){case p.Wt.GROUP_ACTIVE:this.editorGroupsContainer.activeGroup===e&&e.activeEditor&&this.addMostRecentEditor(e,e.activeEditor,!0,!1);break;case p.Wt.EDITOR_OPEN:t.editor&&(this.addMostRecentEditor(e,t.editor,!1,!0),this.ensureOpenedEditorsLimit({groupId:e.id,editor:t.editor},e.id))}})),t.add(e.onDidCloseEditor(t=>{this.removeMostRecentEditor(e,t.editor)})),t.add(e.onDidActiveEditorChange(t=>{t.editor&&this.addMostRecentEditor(e,t.editor,this.editorGroupsContainer.activeGroup===e,!1)})),l.dA.once(e.onWillDispose)(()=>(0,l.MA)(t))}onDidChangeEditorPartOptions(e){if(!(0,l.Gj)(e.newPartOptions.limit,e.oldPartOptions.limit)){let e,t=this.editorGroupsContainer.activeGroup;t.activeEditor&&(e={editor:t.activeEditor,groupId:t.id}),this.ensureOpenedEditorsLimit(e)}}addMostRecentEditor(e,t,i,r){let o=this.ensureKey(e,t),s=this.mostRecentEditorsMap.first;i||!s?this.mostRecentEditorsMap.set(o,o,s?l.XA.AsOld:void 0):(this.mostRecentEditorsMap.set(o,o,l.XA.AsOld),this.mostRecentEditorsMap.set(s,s,l.XA.AsOld)),r&&this.updateEditorResourcesMap(t,!0),this._onDidMostRecentlyActiveEditorsChange.fire()}updateEditorResourcesMap(e,t){let i,r,o;if(e instanceof p.Et?(i=e.primary.resource,r=e.primary.typeId,o=e.primary.editorId):(i=e.resource,r=e.typeId,o=e.editorId),!i)return;let s=this.toIdentifier(r,o);if(t){var n;let e=this.editorsPerResourceCounter.get(i);e||(e=new Map,this.editorsPerResourceCounter.set(i,e)),e.set(s,(null!==(n=e.get(s))&&void 0!==n?n:0)+1)}else{let e=this.editorsPerResourceCounter.get(i);if(e){var d;let t=null!==(d=e.get(s))&&void 0!==d?d:0;t>1?e.set(s,t-1):(e.delete(s),0===e.size&&this.editorsPerResourceCounter.delete(i))}}}removeMostRecentEditor(e,t){this.updateEditorResourcesMap(t,!1);let i=this.findKey(e,t);if(i){this.mostRecentEditorsMap.delete(i);let t=this.keyMap.get(e.id);null!==t&&void 0!==t&&t.delete(i.editor)&&0===t.size&&this.keyMap.delete(e.id),this._onDidMostRecentlyActiveEditorsChange.fire()}}findKey(e,t){let i=this.keyMap.get(e.id);if(i)return i.get(t)}ensureKey(e,t){let i=this.keyMap.get(e.id);i||(i=new Map,this.keyMap.set(e.id,i));let r=i.get(t);return r||(r={groupId:e.id,editor:t},i.set(t,r)),r}async ensureOpenedEditorsLimit(e,t){var i,r;if(null===(i=this.editorGroupService.partOptions.limit)||void 0===i||!i.enabled||"number"!=typeof this.editorGroupService.partOptions.limit.value||this.editorGroupService.partOptions.limit.value<=0)return;let o=this.editorGroupService.partOptions.limit.value;if(null!==(r=this.editorGroupService.partOptions.limit)&&void 0!==r&&r.perEditorGroup)if("number"==typeof t){let i=this.editorGroupsContainer.getGroup(t);i&&await this.doEnsureOpenedEditorsLimit(o,i.getEditors(p.Ut.MOST_RECENTLY_ACTIVE).map(e=>({editor:e,groupId:t})),e)}else for(let s of this.editorGroupsContainer.groups)await this.ensureOpenedEditorsLimit(e,s.id);else await this.doEnsureOpenedEditorsLimit(o,[...this.mostRecentEditorsMap.values()],e)}async doEnsureOpenedEditorsLimit(e,t,i){var r;let o;if(o=null!==(r=this.editorGroupService.partOptions.limit)&&void 0!==r&&r.excludeDirty?t.filter(e=>{let{editor:t}=e;return!(t.isDirty()&&!t.isSaving()||t.hasCapability(p.zt.Scratchpad))}):t,e>=o.length)return;let s=o.reverse().filter(e=>{var t;let{editor:r,groupId:o}=e;return!(r.isDirty()&&!r.isSaving()||r.hasCapability(p.zt.Scratchpad)||i&&r===i.editor&&o===i.groupId||null!==(t=this.editorGroupsContainer.getGroup(o))&&void 0!==t&&t.isSticky(r))}),n=o.length-e,d=new Map;for(let{groupId:a,editor:l}of s){let e=d.get(a);if(e||(e=[],d.set(a,e)),e.push(l),n--,0===n)break}for(let[a,l]of d){let e=this.editorGroupsContainer.getGroup(a);e&&await e.closeEditors(l,{preserveFocus:!0})}}saveState(){this.isScoped||(this.mostRecentEditorsMap.isEmpty()?this.storageService.remove(b.STORAGE_KEY,l.Go.WORKSPACE):this.storageService.store(b.STORAGE_KEY,JSON.stringify(this.serialize()),l.Go.WORKSPACE,l.Ko.MACHINE))}serialize(){let e=l._b.as(p.Rt.EditorFactory),t=[...this.mostRecentEditorsMap.values()],i=new Map;return{entries:(0,l.AM)(t.map(t=>{let{editor:r,groupId:o}=t,s=this.editorGroupsContainer.getGroup(o);if(!s)return;let n=i.get(s);n||(n=s.getEditors(p.Ut.SEQUENTIAL).filter(t=>{var i;return null===(i=e.getEditorSerializer(t))||void 0===i?void 0:i.canSerialize(t)}),i.set(s,n));let d=n.indexOf(r);return-1!==d?{groupId:o,index:d}:void 0}))}}async loadState(){(this.editorGroupsContainer===this.editorGroupService.mainPart||this.editorGroupsContainer===this.editorGroupService)&&await this.editorGroupService.whenReady;let e=!1;if(!this.isScoped){let t=this.storageService.get(b.STORAGE_KEY,l.Go.WORKSPACE);t&&(e=!0,this.deserialize(JSON.parse(t)))}if(!e){let e=this.editorGroupsContainer.getGroups(p.X.MOST_RECENTLY_ACTIVE);for(let t=e.length-1;t>=0;t--){let i=e[t],r=i.getEditors(p.Ut.MOST_RECENTLY_ACTIVE);for(let e=r.length-1;e>=0;e--)this.addMostRecentEditor(i,r[e],!0,!0)}}for(let t of this.editorGroupsContainer.groups)this.registerGroupListeners(t)}deserialize(e){let t=[];for(let{groupId:i,index:r}of e.entries){let e=this.editorGroupsContainer.getGroup(i);if(!e)continue;let o=e.getEditorByIndex(r);if(!o)continue;let s=this.ensureKey(e,o);t.push([s,s]),this.updateEditorResourcesMap(o,!0)}this.mostRecentEditorsMap.fromJSON(t)}},{_:b=n},{_:n.STORAGE_KEY="editors.mru"},n);function I(e,t,i){let r=e.get(p.W),o=function(e,t,i,r){var o,s,n;let d,a=(0,p.in)(e)?e.editor:e,l=e.options;if(t&&"number"!=typeof t)d=t;else if("number"==typeof t&&t>=0)d=i.getGroup(t);else if(-2===t){let e=(0,p.tt)(r),t=i.findGroup({direction:e});(!t||_(t,a))&&(t=i.addGroup(i.activeGroup,e)),d=t}else if(-3===t)d=i.createAuxiliaryEditorPart({bounds:null===l||void 0===l||null===(o=l.auxiliary)||void 0===o?void 0:o.bounds,compact:null===l||void 0===l||null===(s=l.auxiliary)||void 0===s?void 0:s.compact,alwaysOnTop:null===l||void 0===l||null===(n=l.auxiliary)||void 0===n?void 0:n.alwaysOnTop}).then(e=>e.activeGroup);else if(!l||"number"!=typeof l.index){let e=i.getGroups(p.X.MOST_RECENTLY_ACTIVE);if(null!==l&&void 0!==l&&l.revealIfVisible)for(let t of e)if(T(t,a)){d=t;break}if(!d&&(null!==l&&void 0!==l&&l.revealIfOpened||r.getValue("workbench.editor.revealIfOpen")||(0,p.rn)(a)&&a.hasCapability(p.zt.Singleton))){let t,i;for(let r of e)if(O(r,a)&&(i||(i=r),!t&&r.isActive(a)&&(t=r)),i&&t)break;d=t||i}}if(!d){let e=i.activeGroup;if(_(e,a)){for(let t of i.getGroups(p.X.MOST_RECENTLY_ACTIVE))if(!_(t,a)){e=t;break}d=_(e,a)?i.addGroup(e,(0,p.tt)(r)):e}else d=e}return d}(t,i,r,e.get(l.o_));return o instanceof Promise?o.then(e=>R(e,t,i,r)):R(o,t,i,r)}function R(e,t,i,r){let o;return r.activeGroup!==e&&t.options&&!t.options.inactive&&t.options.preserveFocus&&"number"!=typeof t.options.activation&&-2!==i&&(o=l.Jp.ACTIVATE),[e,o]}function _(e,t){return!(!e.isLocked||O(e,t))}function T(e,t){return!!e.activeEditor&&e.activeEditor.matches(t)}function O(e,t){for(let i of e.editors)if(i.matches(t))return!0;return!1}w=b=(0,l.Pb)([(0,l.Fb)(1,p.W),(0,l.Fb)(2,l.Uo)],w),(0,l.s_)(),(0,l.$p)(),(0,p.en)(),(0,p.Q)(),(0,p.G)(),(0,h.U)(),(0,l.Ib)(),(0,l.Kb)(),(0,p.en)(),(0,p.Mt)(),(0,p.Ot)(),(0,l.QA)(),(0,l.ac)(),(0,l.bs)(),(0,l.gA)(),(0,l.TD)(),(0,l.iT)(),(0,p.it)(),(0,p.Q)(),(0,p.G)(),(0,h.U)(),(0,l.s_)(),(0,l.PA)(),(0,l.WM)(),(0,u.o)(),(0,l.im)(),(0,l.nM)(),(0,l.Iw)(),(0,l.za)(),(0,l.ET)(),(0,l.Qo)(),(0,h.a)(),(0,h.L)(),(0,h.Qn)(),(0,l.Ma)(),(0,h.F)(),(0,c.d)();var F,P=F=class extends l.CA{constructor(e,t,i,r,o,s,n,d,a,h,u){super(),this.editorGroupService=t,this.instantiationService=i,this.fileService=r,this.configurationService=o,this.contextService=s,this.uriIdentityService=n,this.editorResolverService=d,this.workspaceTrustRequestService=a,this.hostService=h,this.textEditorService=u,this._onDidActiveEditorChange=this._register(new l.uA),this.onDidActiveEditorChange=this._onDidActiveEditorChange.event,this._onDidVisibleEditorsChange=this._register(new l.uA),this.onDidVisibleEditorsChange=this._onDidVisibleEditorsChange.event,this._onDidEditorsChange=this._register(new l.uA),this.onDidEditorsChange=this._onDidEditorsChange.event,this._onWillOpenEditor=this._register(new l.uA),this.onWillOpenEditor=this._onWillOpenEditor.event,this._onDidCloseEditor=this._register(new l.uA),this.onDidCloseEditor=this._onDidCloseEditor.event,this._onDidOpenEditorFail=this._register(new l.uA),this.onDidOpenEditorFail=this._onDidOpenEditorFail.event,this._onDidMostRecentlyActiveEditorsChange=this._register(new l.uA),this.onDidMostRecentlyActiveEditorsChange=this._onDidMostRecentlyActiveEditorsChange.event,this.lastActiveEditor=void 0,this.activeOutOfWorkspaceWatchers=new l.qA,this.closeOnFileDelete=!1,this.editorGroupsContainer=null!==e&&void 0!==e?e:t,this.editorsObserver=this._register(this.instantiationService.createInstance(w,this.editorGroupsContainer)),this.onConfigurationUpdated(),this.registerListeners()}createScoped(e,t){return t.add(new F(e,this.editorGroupService,this.instantiationService,this.fileService,this.configurationService,this.contextService,this.uriIdentityService,this.editorResolverService,this.workspaceTrustRequestService,this.hostService,this.textEditorService))}registerListeners(){this.editorGroupsContainer===this.editorGroupService.mainPart||this.editorGroupsContainer===this.editorGroupService?this.editorGroupService.whenReady.then(()=>this.onEditorGroupsReady()):this.onEditorGroupsReady(),this._register(this.editorGroupsContainer.onDidChangeActiveGroup(e=>this.handleActiveEditorChange(e))),this._register(this.editorGroupsContainer.onDidAddGroup(e=>this.registerGroupListeners(e))),this._register(this.editorsObserver.onDidMostRecentlyActiveEditorsChange(()=>this._onDidMostRecentlyActiveEditorsChange.fire())),this._register(this.onDidVisibleEditorsChange(()=>this.handleVisibleEditorsChange())),this._register(this.fileService.onDidRunOperation(e=>this.onDidRunFileOperation(e))),this._register(this.fileService.onDidFilesChange(e=>this.onDidFilesChange(e))),this._register(this.configurationService.onDidChangeConfiguration(e=>this.onConfigurationUpdated(e)))}onEditorGroupsReady(){for(let e of this.editorGroupsContainer.groups)this.registerGroupListeners(e);this.activeEditor&&(this.doHandleActiveEditorChangeEvent(),this._onDidVisibleEditorsChange.fire())}handleActiveEditorChange(e){e===this.editorGroupsContainer.activeGroup&&(!this.lastActiveEditor&&!e.activeEditor||this.doHandleActiveEditorChangeEvent())}doHandleActiveEditorChangeEvent(){var e;this.lastActiveEditor=null!==(e=this.editorGroupsContainer.activeGroup.activeEditor)&&void 0!==e?e:void 0,this._onDidActiveEditorChange.fire()}registerGroupListeners(e){let t=new l.EA;t.add(e.onDidModelChange(t=>{this._onDidEditorsChange.fire({groupId:e.id,event:t})})),t.add(e.onDidActiveEditorChange(()=>{this.handleActiveEditorChange(e),this._onDidVisibleEditorsChange.fire()})),t.add(e.onWillOpenEditor(e=>{this._onWillOpenEditor.fire(e)})),t.add(e.onDidCloseEditor(e=>{this._onDidCloseEditor.fire(e)})),t.add(e.onDidOpenEditorFail(t=>{this._onDidOpenEditorFail.fire({editor:t,groupId:e.id})})),l.dA.once(e.onWillDispose)(()=>{(0,l.MA)(t)})}handleVisibleEditorsChange(){let e=new l.JA;for(let t of this.visibleEditors){let i=(0,l.LM)((0,l.AM)([p.Ht.getCanonicalUri(t,{supportSideBySide:p.Jt.PRIMARY}),p.Ht.getCanonicalUri(t,{supportSideBySide:p.Jt.SECONDARY})]),e=>e.toString());for(let t of i)this.fileService.hasProvider(t)&&!this.contextService.isInsideWorkspace(t)&&e.add(t)}for(let t of this.activeOutOfWorkspaceWatchers.keys())e.has(t)||((0,l.MA)(this.activeOutOfWorkspaceWatchers.get(t)),this.activeOutOfWorkspaceWatchers.delete(t));for(let t of e.keys())if(!this.activeOutOfWorkspaceWatchers.get(t)){let e=this.fileService.watch(t);this.activeOutOfWorkspaceWatchers.set(t,e)}}async onDidRunFileOperation(e){e.isOperation(l.Ns.MOVE)&&this.handleMovedFile(e.resource,e.target.resource),(e.isOperation(l.Ns.DELETE)||e.isOperation(l.Ns.MOVE))&&this.handleDeletedFile(e.resource,!1,e.target?e.target.resource:void 0)}onDidFilesChange(e){e.gotDeleted()&&this.handleDeletedFile(e,!0)}async handleMovedFile(e,t){for(let i of this.editorGroupsContainer.groups){let r=[];for(let o of i.editors){let s,n=o.resource;if(!n||!this.uriIdentityService.extUri.isEqualOrParent(n,e))continue;if(this.uriIdentityService.extUri.isEqual(e,n))s=t;else{let i=(0,l.TT)(n.path,e.path,this.uriIdentityService.extUri.ignorePathCasing(n));s=(0,l.lT)(t,n.path.substr(i+e.path.length+1))}let d=await o.rename(i.id,s);if(!d)return;let h={preserveFocus:!0,pinned:i.isPinned(o),sticky:i.isSticky(o),index:i.getIndexOfEditor(o),inactive:!i.isActive(o)};(0,p.rn)(d.editor)?r.push({editor:o,replacement:d.editor,options:(0,a.A)((0,a.A)({},d.options),h)}):r.push({editor:o,replacement:(0,a.A)((0,a.A)({},d.editor),{},{options:(0,a.A)((0,a.A)({},d.editor.options),h)})})}r.length&&this.replaceEditors(r,i)}}onConfigurationUpdated(e){var t;if(e&&!e.affectsConfiguration("workbench.editor.closeOnFileDelete"))return;let i=this.configurationService.getValue();"boolean"==typeof(null===(t=i.workbench)||void 0===t||null===(t=t.editor)||void 0===t?void 0:t.closeOnFileDelete)?this.closeOnFileDelete=i.workbench.editor.closeOnFileDelete:this.closeOnFileDelete=!1}handleDeletedFile(e,t,i){for(let r of this.getAllNonDirtyEditors({includeUntitled:!1,supportSideBySide:!0}))(async()=>{let o=r.resource;if(o&&(this.closeOnFileDelete||!t)){if(i&&this.uriIdentityService.extUri.isEqualOrParent(o,i))return;let s=!1;if(s=e instanceof l.js?e.contains(o,l.As.DELETED):this.uriIdentityService.extUri.isEqualOrParent(o,e),!s)return;let n=!1;t&&this.fileService.hasProvider(o)&&(await(0,l.Gw)(100),n=await this.fileService.exists(o)),!n&&!r.isDisposed()&&r.dispose()}})()}getAllNonDirtyEditors(e){let t=[];function i(i){i.hasCapability(p.zt.Untitled)&&!e.includeUntitled||i.isDirty()||t.push(i)}for(let r of this.editors)e.supportSideBySide&&r instanceof p.Et?(i(r.primary),i(r.secondary)):i(r);return t}get activeEditorPane(){var e;return null===(e=this.editorGroupsContainer.activeGroup)||void 0===e?void 0:e.activeEditorPane}get activeTextEditorControl(){let e=this.activeEditorPane;if(e){let t=e.getControl();if((0,u.s)(t)||(0,u.l)(t))return t;if((0,u.c)(t)&&(0,u.s)(t.activeCodeEditor))return t.activeCodeEditor}}get activeTextEditorLanguageId(){var e;let t,i=this.activeTextEditorControl;return t=(0,u.l)(i)?i.getModifiedEditor():i,null===(e=t)||void 0===e||null===(e=e.getModel())||void 0===e?void 0:e.getLanguageId()}get count(){return this.editorsObserver.count}get editors(){return this.getEditors(p.Ut.SEQUENTIAL).map(e=>{let{editor:t}=e;return t})}getEditors(e,t){switch(e){case p.Ut.MOST_RECENTLY_ACTIVE:return null!==t&&void 0!==t&&t.excludeSticky?this.editorsObserver.editors.filter(e=>{var t;let{groupId:i,editor:r}=e;return!(null!==(t=this.editorGroupsContainer.getGroup(i))&&void 0!==t&&t.isSticky(r))}):this.editorsObserver.editors;case p.Ut.SEQUENTIAL:{let e=[];for(let i of this.editorGroupsContainer.getGroups(p.X.GRID_APPEARANCE))e.push(...i.getEditors(p.Ut.SEQUENTIAL,t).map(e=>({editor:e,groupId:i.id})));return e}}}get activeEditor(){var e;let t=this.editorGroupsContainer.activeGroup;return t&&null!==(e=t.activeEditor)&&void 0!==e?e:void 0}get visibleEditorPanes(){return(0,l.AM)(this.editorGroupsContainer.groups.map(e=>e.activeEditorPane))}get visibleTextEditorControls(){return this.doGetVisibleTextEditorControls(this.visibleEditorPanes)}doGetVisibleTextEditorControls(e){let t=[];for(let o of e){var i,r;let e=[];o instanceof A?(e.push(null===(i=o.getPrimaryEditorPane())||void 0===i?void 0:i.getControl()),e.push(null===(r=o.getSecondaryEditorPane())||void 0===r?void 0:r.getControl())):e.push(o.getControl());for(let i of e)((0,u.s)(i)||(0,u.l)(i))&&t.push(i)}return t}getVisibleTextEditorControls(e){return this.doGetVisibleTextEditorControls((0,l.AM)(this.editorGroupsContainer.getGroups(e===p.Ut.SEQUENTIAL?p.X.GRID_APPEARANCE:p.X.MOST_RECENTLY_ACTIVE).map(e=>e.activeEditorPane)))}get visibleEditors(){return(0,l.AM)(this.editorGroupsContainer.groups.map(e=>e.activeEditor))}async openEditor(e,t,i){let r,o,s=(0,p.rn)(e)?t:e.options;if((0,h.W)(t)&&(i=t),!(0,p.rn)(e)){let t=await this.editorResolverService.resolveEditor(e,i);if(t===h.n.ABORT)return;(0,p.an)(t)&&(r=t.editor,s=t.options,o=t.group)}if(r||(r=(0,p.rn)(e)?e:await this.textEditorService.resolveTextEditor(e)),!o){let e,t=this.instantiationService.invokeFunction(I,{editor:r,options:s},i);[o,e]=t instanceof Promise?await t:t,e&&(s=(0,a.A)((0,a.A)({},s),{},{activation:e}))}return o.openEditor(r,s)}async openEditors(e,t,i){if(null!==i&&void 0!==i&&i.validateTrust&&!await this.handleWorkspaceTrust(e))return[];let r=new Map;for(let s of e){let e,i;if(!(0,p.in)(s)){let r=await this.editorResolverService.resolveEditor(s,t);if(r===h.n.ABORT)continue;(0,p.an)(r)&&(e=r,i=r.group)}if(e||(e=(0,p.in)(s)?s:{editor:await this.textEditorService.resolveTextEditor(s),options:s.options}),!i){let r=this.instantiationService.invokeFunction(I,e,t);[i]=r instanceof Promise?await r:r}let o=r.get(i);o||(o=[],r.set(i,o)),o.push(e)}let o=[];for(let[s,n]of r)o.push(s.openEditors(n));return(0,l.AM)(await l.yw.settled(o))}async handleWorkspaceTrust(e){let{resources:t,diffMode:i,mergeMode:r}=this.extractEditorResources(e);switch(await this.workspaceTrustRequestService.requestOpenFilesTrust(t)){case h.Zn.Open:return!0;case h.Zn.OpenInNewWindow:return await this.hostService.openWindow(t.map(e=>({fileUri:e})),{forceNewWindow:!0,diffMode:i,mergeMode:r}),!1;case h.Zn.Cancel:return!1}}extractEditorResources(e){let t=new l.JA,i=!1,r=!1;for(let o of e)if((0,p.in)(o)){let e=p.Ht.getOriginalUri(o.editor,{supportSideBySide:p.Jt.BOTH});l.wD.isUri(e)?t.add(e):e&&(e.primary&&t.add(e.primary),e.secondary&&t.add(e.secondary),i=o.editor instanceof p.nt)}else(0,p.dn)(o)&&(l.wD.isUri(o.input1)&&t.add(o.input1.resource),l.wD.isUri(o.input2)&&t.add(o.input2.resource),l.wD.isUri(o.base)&&t.add(o.base.resource),l.wD.isUri(o.result)&&t.add(o.result.resource),r=!0),(0,p.ln)(o)?(l.wD.isUri(o.original.resource)&&t.add(o.original.resource),l.wD.isUri(o.modified.resource)&&t.add(o.modified.resource),i=!0):(0,p.un)(o)&&t.add(o.resource);return{resources:Array.from(t.keys()),diffMode:i,mergeMode:r}}isOpened(e){return this.editorsObserver.hasEditor({resource:this.uriIdentityService.asCanonicalUri(e.resource),typeId:e.typeId,editorId:e.editorId})}isVisible(e){for(let i of this.editorGroupsContainer.groups){var t;if(null!==(t=i.activeEditor)&&void 0!==t&&t.matches(e))return!0}return!1}async closeEditor(e,t){var i;let{editor:r,groupId:o}=e;await(null===(i=this.editorGroupsContainer.getGroup(o))||void 0===i?void 0:i.closeEditor(r,t))}async closeEditors(e,t){let i=new Map;for(let{editor:r,groupId:o}of e){let e=this.editorGroupsContainer.getGroup(o);if(!e)continue;let t=i.get(e);t||(t=[],i.set(e,t)),t.push(r)}for(let[r,o]of i)await r.closeEditors(o,t)}findEditors(e,t,i){let r=l.wD.isUri(e)?e:e.resource,o=l.wD.isUri(e)?void 0:e.typeId;if((null===t||void 0===t?void 0:t.supportSideBySide)!==p.Jt.ANY&&(null===t||void 0===t?void 0:t.supportSideBySide)!==p.Jt.SECONDARY&&!this.editorsObserver.hasEditors(r))return l.wD.isUri(e)||(0,l.fM)(i)?[]:void 0;if((0,l.fM)(i)){let i=[];for(let r of this.editorGroupsContainer.getGroups((null===t||void 0===t?void 0:t.order)===p.Ut.SEQUENTIAL?p.X.GRID_APPEARANCE:p.X.MOST_RECENTLY_ACTIVE)){let o=[];if(l.wD.isUri(e))o.push(...this.findEditors(e,t,r));else{let i=this.findEditors(e,t,r);i&&o.push(i)}i.push(...o.map(e=>({editor:e,groupId:r.id})))}return i}{let s="number"==typeof i?this.editorGroupsContainer.getGroup(i):i;if(l.wD.isUri(e))return s?s.findEditors(r,t):[];{if(!s)return;let e=s.findEditors(r,t);for(let t of e)if(t.typeId===o)return t;return}}}async replaceEditors(e,t){let i="number"==typeof t?this.editorGroupsContainer.getGroup(t):t,r=[];for(let o of e){let e;if(!(0,p.rn)(o.replacement)){let t=await this.editorResolverService.resolveEditor(o.replacement,i);if(t===h.n.ABORT)continue;(0,p.an)(t)&&(e={editor:o.editor,replacement:t.editor,options:t.options,forceReplaceDirty:o.forceReplaceDirty})}e||(e={editor:o.editor,replacement:(0,p.et)(o)?o.replacement:await this.textEditorService.resolveTextEditor(o.replacement),options:(0,p.et)(o)?o.options:o.replacement.options,forceReplaceDirty:o.forceReplaceDirty}),r.push(e)}return null===i||void 0===i?void 0:i.replaceEditors(r)}async save(e,t){Array.isArray(e)||(e=[e]);let i=this.getUniqueEditors(e),r=[],o=[];if(null!==t&&void 0!==t&&t.saveAs)o.push(...i);else for(let{groupId:d,editor:a}of i)a.hasCapability(p.zt.Untitled)?o.push({groupId:d,editor:a}):r.push({groupId:d,editor:a});let s=await l.yw.settled(r.map(e=>{var i;let{groupId:r,editor:o}=e;return(null===t||void 0===t?void 0:t.reason)===p.Kt.EXPLICIT&&null!==(i=this.editorGroupsContainer.getGroup(r))&&void 0!==i&&i.pinEditor(o),o.save(r,t)}));for(let{groupId:d,editor:l}of o){var n;if(l.isDisposed())continue;let e={pinned:!0,viewState:null===(n=await this.openEditor(l,d))||void 0===n?void 0:n.getViewState()},i=null!==t&&void 0!==t&&t.saveAs?await l.saveAs(d,t):await l.save(d,t);if(s.push(i),!i)break;if(!l.matches(i)){let t=l.hasCapability(p.zt.Untitled)?this.editorGroupsContainer.groups.map(e=>e.id):[d];for(let r of t)i instanceof p.jt?await this.replaceEditors([{editor:l,replacement:i,options:e}],r):await this.replaceEditors([{editor:l,replacement:(0,a.A)((0,a.A)({},i),{},{options:e})}],r)}}return{success:s.every(e=>!!e),editors:(0,l.AM)(s)}}saveAll(e){return this.save(this.getAllModifiedEditors(e),e)}async revert(e,t){Array.isArray(e)||(e=[e]);let i=this.getUniqueEditors(e);return await l.yw.settled(i.map(async e=>{var i;let{groupId:r,editor:o}=e;return null!==(i=this.editorGroupsContainer.getGroup(r))&&void 0!==i&&i.pinEditor(o),o.revert(r,t)})),!i.some(e=>{let{editor:t}=e;return t.isDirty()})}async revertAll(e){return this.revert(this.getAllModifiedEditors(e),e)}getAllModifiedEditors(e){let t=[];for(let r of this.editorGroupsContainer.getGroups(p.X.MOST_RECENTLY_ACTIVE))for(let o of r.getEditors(p.Ut.MOST_RECENTLY_ACTIVE)){var i;o.isModified()&&(("boolean"==typeof(null===e||void 0===e?void 0:e.includeUntitled)||null===e||void 0===e||null===(i=e.includeUntitled)||void 0===i||!i.includeScratchpad)&&o.hasCapability(p.zt.Scratchpad)||(null===e||void 0===e||!e.includeUntitled)&&o.hasCapability(p.zt.Untitled)||(null===e||void 0===e?void 0:e.excludeSticky)&&r.isSticky(o)||t.push({groupId:r.id,editor:o}))}return t}getUniqueEditors(e){let t=[];for(let{editor:i,groupId:r}of e)t.some(e=>e.editor.matches(i))||t.push({editor:i,groupId:r});return t}dispose(){super.dispose(),this.activeOutOfWorkspaceWatchers.forEach(e=>(0,l.MA)(e)),this.activeOutOfWorkspaceWatchers.clear()}};P=F=(0,l.Pb)([(0,l.Fb)(1,p.W),(0,l.Fb)(2,l.Ub),(0,l.Fb)(3,l.ys),(0,l.Fb)(4,l.o_),(0,l.Fb)(5,l.Ra),(0,l.Fb)(6,l.Zo),(0,l.Fb)(7,h.I),(0,l.Fb)(8,l.ja),(0,l.Fb)(9,h.P),(0,l.Fb)(10,c.u)],P),(0,l.Ib)(),(0,l.PA)(),(0,p.i)(),(0,p.V)(),(0,h.F)(),(0,p.en)(),(0,p.At)(),(0,p.G)(),(0,p.C)(),(0,p.l)(),(0,l.nb)(),(0,l.Sr)(),(0,l.QA)(),(0,l.Qo)();var x=(d=class extends l.CA{constructor(e,t,i,r,o,s,n,d){super(),this.filesConfigurationService=e,this.hostService=t,this.editorService=i,this.editorGroupService=r,this.workingCopyService=o,this.logService=s,this.markerService=n,this.uriIdentityService=d,this.scheduledAutoSavesAfterDelay=new Map,this.lastActiveEditor=void 0,this.lastActiveGroupId=void 0,this.lastActiveEditorControlDisposable=this._register(new l.EA),this.waitingOnConditionAutoSaveWorkingCopies=new l.qA(e=>this.uriIdentityService.extUri.getComparisonKey(e)),this.waitingOnConditionAutoSaveEditors=new l.qA(e=>this.uriIdentityService.extUri.getComparisonKey(e));for(let a of this.workingCopyService.dirtyWorkingCopies)this.onDidRegister(a);this.registerListeners()}registerListeners(){this._register(this.hostService.onDidChangeFocus(e=>this.onWindowFocusChange(e))),this._register(this.hostService.onDidChangeActiveWindow(()=>this.onActiveWindowChange())),this._register(this.editorService.onDidActiveEditorChange(()=>this.onDidActiveEditorChange())),this._register(this.filesConfigurationService.onDidChangeAutoSaveConfiguration(()=>this.onDidChangeAutoSaveConfiguration())),this._register(this.workingCopyService.onDidRegister(e=>this.onDidRegister(e))),this._register(this.workingCopyService.onDidUnregister(e=>this.onDidUnregister(e))),this._register(this.workingCopyService.onDidChangeDirty(e=>this.onDidChangeDirty(e))),this._register(this.workingCopyService.onDidChangeContent(e=>this.onDidChangeContent(e))),this._register(this.markerService.onMarkerChanged(e=>this.onConditionChanged(e,p.t.ERRORS))),this._register(this.filesConfigurationService.onDidChangeAutoSaveDisabled(e=>this.onConditionChanged([e],p.t.DISABLED)))}onConditionChanged(e,t){for(let i of e){let e=this.waitingOnConditionAutoSaveWorkingCopies.get(i);if((null===e||void 0===e?void 0:e.condition)===t)e.workingCopy.isDirty()&&this.filesConfigurationService.getAutoSaveMode(e.workingCopy.resource,e.reason).mode!==p.n.OFF&&(this.discardAutoSave(e.workingCopy),this.logService.trace("[editor auto save] running auto save from condition change event",e.workingCopy.resource.toString(),e.workingCopy.typeId),e.workingCopy.save({reason:e.reason}));else{let e=this.waitingOnConditionAutoSaveEditors.get(i);(null===e||void 0===e?void 0:e.condition)===t&&!e.editor.editor.isDisposed()&&e.editor.editor.isDirty()&&this.filesConfigurationService.getAutoSaveMode(e.editor.editor,e.reason).mode!==p.n.OFF&&(this.waitingOnConditionAutoSaveEditors.delete(i),this.logService.trace("[editor auto save] running auto save from condition change event with reason ".concat(e.reason)),this.editorService.save(e.editor,{reason:e.reason}))}}}onWindowFocusChange(e){e||this.maybeTriggerAutoSave(p.Kt.WINDOW_CHANGE)}onActiveWindowChange(){this.maybeTriggerAutoSave(p.Kt.WINDOW_CHANGE)}onDidActiveEditorChange(){var e;this.lastActiveEditor&&"number"==typeof this.lastActiveGroupId&&this.maybeTriggerAutoSave(p.Kt.FOCUS_CHANGE,{groupId:this.lastActiveGroupId,editor:this.lastActiveEditor});let t=this.editorGroupService.activeGroup,i=this.lastActiveEditor=null!==(e=t.activeEditor)&&void 0!==e?e:void 0;this.lastActiveGroupId=t.id,this.lastActiveEditorControlDisposable.clear();let r=this.editorService.activeEditorPane;i&&r&&this.lastActiveEditorControlDisposable.add(r.onDidBlur(()=>{this.maybeTriggerAutoSave(p.Kt.FOCUS_CHANGE,{groupId:t.id,editor:i})}))}maybeTriggerAutoSave(e,t){if(t){if(!t.editor.isDirty()||t.editor.isReadonly()||t.editor.hasCapability(p.zt.Untitled))return;let i=this.filesConfigurationService.getAutoSaveMode(t.editor,e);i.mode===p.n.OFF?t.editor.resource&&(i.reason===p.t.ERRORS||i.reason===p.t.DISABLED)&&this.waitingOnConditionAutoSaveEditors.set(t.editor.resource,{editor:t,reason:e,condition:i.reason}):(e===p.Kt.WINDOW_CHANGE&&(i.mode===p.n.ON_FOCUS_CHANGE||i.mode===p.n.ON_WINDOW_CHANGE)||e===p.Kt.FOCUS_CHANGE&&i.mode===p.n.ON_FOCUS_CHANGE)&&(this.logService.trace("[editor auto save] triggering auto save with reason ".concat(e)),this.editorService.save(t,{reason:e}))}else this.saveAllDirtyAutoSaveables(e)}onDidChangeAutoSaveConfiguration(){let e;switch(this.filesConfigurationService.getAutoSaveMode(void 0).mode){case p.n.ON_FOCUS_CHANGE:e=p.Kt.FOCUS_CHANGE;break;case p.n.ON_WINDOW_CHANGE:e=p.Kt.WINDOW_CHANGE;break;case p.n.AFTER_SHORT_DELAY:case p.n.AFTER_LONG_DELAY:e=p.Kt.AUTO}e&&this.saveAllDirtyAutoSaveables(e)}saveAllDirtyAutoSaveables(e){for(let t of this.workingCopyService.dirtyWorkingCopies){if(t.capabilities&p.c.Untitled)continue;let i=this.filesConfigurationService.getAutoSaveMode(t.resource,e);i.mode===p.n.OFF?(i.reason===p.t.ERRORS||i.reason===p.t.DISABLED)&&this.waitingOnConditionAutoSaveWorkingCopies.set(t.resource,{workingCopy:t,reason:e,condition:i.reason}):t.save({reason:e})}}onDidRegister(e){e.isDirty()&&this.scheduleAutoSave(e)}onDidUnregister(e){this.discardAutoSave(e)}onDidChangeDirty(e){e.isDirty()?this.scheduleAutoSave(e):this.discardAutoSave(e)}onDidChangeContent(e){e.isDirty()&&this.scheduleAutoSave(e)}scheduleAutoSave(e){if(e.capabilities&p.c.Untitled)return;let t=this.filesConfigurationService.getAutoSaveConfiguration(e.resource).autoSaveDelay;if("number"!=typeof t)return;this.discardAutoSave(e),this.logService.trace("[editor auto save] scheduling auto save after ".concat(t,"ms"),e.resource.toString(),e.typeId);let i=setTimeout(()=>{if(this.discardAutoSave(e),e.isDirty()){let t=p.Kt.AUTO,i=this.filesConfigurationService.getAutoSaveMode(e.resource,t);i.mode===p.n.OFF?(i.reason===p.t.ERRORS||i.reason===p.t.DISABLED)&&this.waitingOnConditionAutoSaveWorkingCopies.set(e.resource,{workingCopy:e,reason:t,condition:i.reason}):(this.logService.trace("[editor auto save] running auto save",e.resource.toString(),e.typeId),e.save({reason:t}))}},t);this.scheduledAutoSavesAfterDelay.set(e,(0,l.zA)(()=>{this.logService.trace("[editor auto save] clearing pending auto save",e.resource.toString(),e.typeId),clearTimeout(i)}))}discardAutoSave(e){(0,l.MA)(this.scheduledAutoSavesAfterDelay.get(e)),this.scheduledAutoSavesAfterDelay.delete(e),this.waitingOnConditionAutoSaveWorkingCopies.delete(e.resource),this.waitingOnConditionAutoSaveEditors.delete(e.resource)}},{_:d.ID="workbench.contrib.editorAutoSave"},d);x=(0,l.Pb)([(0,l.Fb)(0,p.B),(0,l.Fb)(1,h.P),(0,l.Fb)(2,p.kt),(0,l.Fb)(3,p.W),(0,l.Fb)(4,p.S),(0,l.Fb)(5,l.eb),(0,l.Fb)(6,l.xr),(0,l.Fb)(7,l.Zo)],x),(0,p.b)(),(0,p.x)(x.ID,x,p.y.BlockRestore),(0,l.Ib)(),(0,p.Tt)(),(0,l.bs)(),(0,l.av)();var L,M,G,k=class extends p.wt{constructor(e,t,i){super(),this.resource=e,this.name=t,this.fileService=i,this.mime=l.rv.binary}getName(){return this.name}getSize(){return this.size}getMime(){return this.mime}getETag(){return this.etag}async resolve(){if(this.fileService.hasProvider(this.resource)){let e=await this.fileService.stat(this.resource);this.etag=e.etag,"number"==typeof e.size&&(this.size=e.size)}return super.resolve()}};k=(0,l.Pb)([(0,l.Fb)(2,l.ys)],k),(0,l.Ib)(),(0,p.en)(),(0,h._)(),(0,l.bs)(),(0,p.h)(),(0,p.D)(),(0,l.Kb)(),(0,l.PA)(),(0,l.Rb)(),(0,l.Xa)(),(0,p.V)(),(0,p.At)(),(0,l.iT)(),(0,l.gA)(),(0,l.yT)(),(0,l.lu)(),(0,p.j)(),(0,l._v)(),(0,h.z)(),(G=M||(M={}))[G.None=0]="None",G[G.Text=1]="Text",G[G.Binary=2]="Binary";var N=L=class extends h.h{get typeId(){return v.r}get editorId(){return p.Ft.id}get capabilities(){let e=p.zt.CanSplitInGroup;return this.model?this.model.isReadonly()&&(e|=p.zt.Readonly):this.fileService.hasProvider(this.resource)?this.filesConfigurationService.isReadonly(this.resource)&&(e|=p.zt.Readonly):e|=p.zt.Untitled,e&p.zt.Readonly||(e|=p.zt.CanDropIntoEditor),e}constructor(e,t,i,r,o,s,n,d,a,h,u,c,p,v,g,f,E){super(e,t,v,a,u,c,p,f,E),this.instantiationService=d,this.textModelService=h,this.pathService=g,this.forceOpenAs=M.None,this.model=void 0,this.cachedTextFileModelReference=void 0,this.modelListeners=this._register(new l.EA),this.model=this.textFileService.files.get(e),i&&this.setPreferredName(i),r&&this.setPreferredDescription(r),o&&this.setPreferredEncoding(o),s&&this.setPreferredLanguageId(s),"string"==typeof n&&this.setPreferredContents(n),this._register(this.textFileService.files.onDidCreate(e=>this.onDidCreateTextFileModel(e))),this.model&&this.registerModelListeners(this.model)}onDidCreateTextFileModel(e){(0,l.oT)(e.resource,this.resource)&&(this.model=e,this.registerModelListeners(e))}registerModelListeners(e){this.modelListeners.clear(),this.modelListeners.add(e.onDidChangeDirty(()=>this._onDidChangeDirty.fire())),this.modelListeners.add(e.onDidChangeReadonly(()=>this._onDidChangeCapabilities.fire())),this.modelListeners.add(e.onDidSaveError(()=>this._onDidChangeDirty.fire())),this.modelListeners.add(l.dA.once(e.onWillDispose)(()=>{this.modelListeners.clear(),this.model=void 0}))}getName(){return this.preferredName||super.getName()}setPreferredName(e){this.allowLabelOverride()&&this.preferredName!==e&&(this.preferredName=e,this._onDidChangeLabel.fire())}allowLabelOverride(){return this.resource.scheme!==this.pathService.defaultUriScheme&&this.resource.scheme!==l.vT.vscodeUserData&&this.resource.scheme!==l.vT.file&&this.resource.scheme!==l.vT.vscodeRemote}getPreferredName(){return this.preferredName}isReadonly(){return this.model?this.model.isReadonly():this.filesConfigurationService.isReadonly(this.resource)}getDescription(e){return this.preferredDescription||super.getDescription(e)}setPreferredDescription(e){this.allowLabelOverride()&&this.preferredDescription!==e&&(this.preferredDescription=e,this._onDidChangeLabel.fire())}getPreferredDescription(){return this.preferredDescription}getTitle(e){let t=super.getTitle(e),i=this.getPreferredTitle();return i&&(t="".concat(i," (").concat(t,")")),t}getPreferredTitle(){var e;return this.preferredName&&this.preferredDescription?"".concat(this.preferredName," ").concat(this.preferredDescription):this.preferredName||this.preferredDescription?null!==(e=this.preferredName)&&void 0!==e?e:this.preferredDescription:void 0}getEncoding(){return this.model?this.model.getEncoding():this.preferredEncoding}getPreferredEncoding(){return this.preferredEncoding}async setEncoding(e,t){var i;return this.setPreferredEncoding(e),null===(i=this.model)||void 0===i?void 0:i.setEncoding(e,t)}setPreferredEncoding(e){this.preferredEncoding=e,this.setForceOpenAsText()}getLanguageId(){return this.model?this.model.getLanguageId():this.preferredLanguageId}getPreferredLanguageId(){return this.preferredLanguageId}setLanguageId(e,t){var i;this.setPreferredLanguageId(e),null===(i=this.model)||void 0===i||i.setLanguageId(e,t)}setPreferredLanguageId(e){this.preferredLanguageId=e,this.setForceOpenAsText()}setPreferredContents(e){this.preferredContents=e,this.setForceOpenAsText()}setForceOpenAsText(){this.forceOpenAs=M.Text}setForceOpenAsBinary(){this.forceOpenAs=M.Binary}isDirty(){var e;return!(null===(e=this.model)||void 0===e||!e.isDirty())}isSaving(){var e,t,i;return!(null!==(e=this.model)&&void 0!==e&&e.hasState(p.d.SAVED)||null!==(t=this.model)&&void 0!==t&&t.hasState(p.d.CONFLICT)||null!==(i=this.model)&&void 0!==i&&i.hasState(p.d.ERROR))&&(!!this.filesConfigurationService.hasShortAutoSaveDelay(this)||super.isSaving())}prefersEditorPane(e){return this.forceOpenAs===M.Binary?e.find(e=>e.typeId===v.t):e.find(e=>e.typeId===v.o)}resolve(e){return this.forceOpenAs===M.Binary?this.doResolveAsBinary():this.doResolveAsText(e)}async doResolveAsText(e){try{let t=this.preferredContents;this.preferredContents=void 0,await this.textFileService.files.resolve(this.resource,{languageId:this.preferredLanguageId,encoding:this.preferredEncoding,contents:"string"==typeof t?(0,l.au)(t):void 0,reload:{async:!0},allowBinary:this.forceOpenAs===M.Text,reason:p.m.EDITOR,limits:this.ensureLimits(e)}),this.cachedTextFileModelReference||(this.cachedTextFileModelReference=await this.textModelService.createModelReference(this.resource));let i=this.cachedTextFileModelReference.object;return this.isDisposed()&&this.disposeModelReference(),i}catch(e){if(e.textFileOperationResult===p.p.FILE_IS_BINARY)return this.doResolveAsBinary();throw e}}async doResolveAsBinary(){let e=this.instantiationService.createInstance(k,this.preferredResource,this.getName());return await e.resolve(),e}isResolved(){return!!this.model}async rename(e,t){return{editor:{resource:t,encoding:this.getEncoding(),options:{viewState:(0,p.$t)(this,e,this.editorService)}}}}toUntyped(e){let t={resource:this.preferredResource,forceFile:!0,options:{override:this.editorId}};return"number"==typeof(null===e||void 0===e?void 0:e.preserveViewState)&&(t.encoding=this.getEncoding(),t.languageId=this.getLanguageId(),t.contents=(()=>{let e=this.textFileService.files.get(this.resource);if(null!==e&&void 0!==e&&e.isDirty()&&!e.textEditorModel.isTooLargeForHeapOperation())return e.textEditorModel.getValue()})(),t.options=(0,a.A)((0,a.A)({},t.options),{},{viewState:(0,p.$t)(this,e.preserveViewState,this.editorService)})),t}matches(e){return this===e||(e instanceof L?(0,l.oT)(e.resource,this.resource):!!(0,p.un)(e)&&super.matches(e))}dispose(){this.model=void 0,this.disposeModelReference(),super.dispose()}disposeModelReference(){(0,l.MA)(this.cachedTextFileModelReference),this.cachedTextFileModelReference=void 0}};function V(e,t,i,r){let o=function(e,t,i,r){let o=r.lastFocusedList,s=o instanceof l.ra&&o.getHTMLElement()===(0,l.Tx)(),n=function(e,t,i,r,o){let s=e.filter(e=>(0,p.tn)(e)||l.wD.isUri(e));for(let n of s)if((0,p.tn)(n))return n;for(let n of s){let e=i.findEditors(n);if(e.length){let t=e[0],i=r.getGroup(t.groupId);return{groupId:t.groupId,editorIndex:null===i||void 0===i?void 0:i.getIndexOfEditor(t.editor)}}}if(t){let e=o.lastFocusedList;for(let t of e.getFocusedElements())if(K(t))return W(t,void 0,r)}}(e,s,t,i,r);if(!n){let e=i.activeGroup,t=e.activeEditor;n={groupId:e.id,editorIndex:t?e.getIndexOfEditor(t):void 0},s=!1}let d=U(n,s,t,i,r);return function(e,t){if(t.length<=1)return t;let i=t.findIndex(t=>t.groupId===e.groupId&&t.editorIndex===e.editorIndex);if(-1!==i)t.splice(i,1),t.unshift(e);else{if(void 0!==e.editorIndex)throw Error("Editor context not found in multi editor context");t.unshift(e)}return t}(n,d)}(e,t,i,r),s={groupedEditors:[],preserveFocus:o.length&&o[0].preserveFocus||!1};for(let n of o){let e=H(n,i);if(!e)continue;let t,{group:r,editor:o}=e;for(let i of s.groupedEditors)if(i.group.id===r.id){t=i;break}t||(t={group:r,editors:[]},s.groupedEditors.push(t)),o&&t.editors.push(o)}return s}function U(e,t,i,r,o){if(t){let t=o.lastFocusedList.getSelectedElements().filter(K);if(t.length>1)return t.map(t=>W(t,e.preserveFocus,r));if(0===t.length)return U(e,!1,i,r,o)}else{let t=r.getGroup(e.groupId),i=void 0===e.editorIndex?null===t||void 0===t?void 0:t.activeEditor:null===t||void 0===t?void 0:t.getEditorByIndex(e.editorIndex);if(t&&i&&t.isSelected(i))return t.selectedEditors.map(i=>W({editor:i,groupId:t.id},e.preserveFocus,r))}return[e]}function W(e,t,i){if((0,p.$)(e))return{groupId:e.id,editorIndex:void 0,preserveFocus:t};let r=i.getGroup(e.groupId);return{groupId:e.groupId,editorIndex:r?r.getIndexOfEditor(e.editor):-1,preserveFocus:t}}function K(e){return(0,p.$)(e)||(0,p.nn)(e)}function H(e,t){let i=t.getGroup(e.groupId);if(i)return void 0===e.editorIndex?{group:i,editor:void 0}:{group:i,editor:i.getEditorByIndex(e.editorIndex)}}N=L=(0,l.Pb)([(0,l.Fb)(7,l.Ub),(0,l.Fb)(8,p.E),(0,l.Fb)(9,l.Lb),(0,l.Fb)(10,l.Ya),(0,l.Fb)(11,l.ys),(0,l.Fb)(12,p.B),(0,l.Fb)(13,p.kt),(0,l.Fb)(14,p.A),(0,l.Fb)(15,l.hv),(0,l.Fb)(16,h.R)],N),(0,l.vb)(),(0,p.en)(),l._b.as(p.Rt.EditorFactory).registerFileEditorFactory({typeId:v.r,createFileEditor:(e,t,i,r,o,s,n,d)=>d.createInstance(N,e,t,i,r,o,s,n),isFileEditor:e=>e instanceof N}),(0,l.qx)(),(0,l.ia)(),(0,l.TD)(),(0,p.en)(),(0,p.Q)();var Y,z=class{constructor(e){this.root=new B;for(let[t,i]of e)for(let e of i)this.root.add(t,e)}toString(){return this.root.toString()}getAttributes(e,t){let i=e.lastIndexOf(".");return i<1?{dirname:t,basename:e,extname:""}:{dirname:t,basename:e.substring(0,i),extname:e.substring(i+1)}}nest(e,t){var i=this;let r=new B;for(let n of e){let e=this.getAttributes(n,t),i=this.root.get(n,e);for(let t of i)r.add(t,n)}let o=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;if(s.has(e))return[];s.add(e);let n=i.getAttributes(e,t),d=r.get(e,n);return 0===d.length||1===d.length&&d[0]===e?[e]:d.flatMap(e=>o(e,s))},s=new Map;for(let n of e){let e=o(n);0===e.length&&(e=[n]);for(let t of e){let e=s.get(t);e||s.set(t,e=new Set),n!==t&&e.add(n)}}return s}},B=class e{constructor(){this.value=new X,this.map=new Map}add(t,i){if(""===t)this.value.add(t,i);else if("*"===t[0])this.value.add(t,i);else{let r=t[0],o=t.slice(1),s=this.map.get(r);s||this.map.set(r,s=new e),s.add(o,i)}}get(e,t){let i=[];i.push(...this.value.get(e,t));let r=e[0],o=e.slice(1),s=this.map.get(r);return s&&i.push(...s.get(o,t)),i}toString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[];return this.value.hasItems&&t.push("* => \n"+this.value.toString(e+"  ")),t.map(t=>e+t).join("\n")}},X=class e{constructor(){this.star=[],this.epsilon=[],this.map=new Map,this.hasItems=!1}add(t,i){if(this.hasItems=!0,"*"===t)this.star.push(new Z(i));else if(""===t)this.epsilon.push(new Z(i));else{let r=t[t.length-1],o=t.slice(0,t.length-1);if("*"===r)throw Error("Unexpected star in SufTrie key: "+t);{let t=this.map.get(r);t||this.map.set(r,t=new e),t.add(o,i)}}}get(e,t){let i=[];""===e&&i.push(...this.epsilon.map(e=>e.substitute(t))),this.star.length&&i.push(...this.star.map(i=>i.substitute(t,e)));let r=e[e.length-1],o=e.slice(0,e.length-1),s=this.map.get(r);return s&&i.push(...s.get(o,t)),i}toString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[];return this.star.length&&t.push("* => "+this.star.join("; ")),this.epsilon.length&&t.push("\u03b5 => "+this.epsilon.join("; ")),t.map(t=>e+t).join("\n")}};!function(e){e.capture="capture",e.basename="basename",e.dirname="dirname",e.extname="extname"}(Y||(Y={}));var j=/\$[({](capture|basename|dirname|extname)[)}]/g,Z=class{constructor(e){this.tokens=[],j.lastIndex=0;let t,i=0;for(;t=j.exec(e);){let r=e.slice(i,t.index);this.tokens.push(r);let o=t[1];switch(o){case Y.basename:case Y.dirname:case Y.extname:case Y.capture:this.tokens.push({capture:o});break;default:throw Error("unknown substitution type: "+o)}i=t.index+t[0].length}if(i!==e.length){let t=e.slice(i,e.length);this.tokens.push(t)}}substitute(e,t){return this.tokens.map(i=>{if("string"==typeof i)return i;switch(i.capture){case Y.basename:return e.basename;case Y.dirname:return e.dirname;case Y.extname:return e.extname;case Y.capture:return t||""}}).join("")}};(0,l.Ib)(),(0,l.TD)(),(0,l.ET)(),(0,l.AD)(),(0,l.QA)(),(0,l.ac)(),(0,l.ok)(),(0,l.WM)(),(0,l.PA)(),(0,l.Yd)(),(0,l.gA)(),(0,l.iT)(),(0,l.nM)();var q=class e{constructor(e,t,i,r,o,s,n,d,a){let h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:(0,l.Zw)(e),u=arguments.length>10?arguments[10]:void 0,c=arguments.length>11&&void 0!==arguments[11]&&arguments[11];this.resource=e,this.fileService=t,this.configService=i,this.filesConfigService=r,this._parent=o,this._isDirectory=s,this._isSymbolicLink=n,this._readonly=d,this._locked=a,this._name=h,this._mtime=u,this._unknown=c,this.error=void 0,this._isExcluded=!1,this.markedAsFindResult=!1,this._isDirectoryResolved=!1}get isExcluded(){return!!this._isExcluded||!!this._parent&&this._parent.isExcluded}set isExcluded(e){this._isExcluded=e}hasChildren(e){var t,i;return this.hasNests?null!==(t=null===(i=this.nestedChildren)||void 0===i?void 0:i.some(t=>e(t)))&&void 0!==t&&t:this.isDirectory}get hasNests(){var e;return!(null===(e=this.nestedChildren)||void 0===e||!e.length)}get isDirectoryResolved(){return this._isDirectoryResolved}get isSymbolicLink(){return!!this._isSymbolicLink}get isDirectory(){return!!this._isDirectory}get isReadonly(){return this.filesConfigService.isReadonly(this.resource,{resource:this.resource,name:this.name,readonly:this._readonly,locked:this._locked})}get mtime(){return this._mtime}get name(){return this._name}get isUnknown(){return this._unknown}get parent(){return this._parent}get root(){return this._parent?this._parent.root:this}get children(){return new Map}updateName(e){var t,i;null!==(t=this._parent)&&void 0!==t&&t.removeChild(this),this._name=e,null===(i=this._parent)||void 0===i||i.addChild(this)}getId(){let e=this.root.resource.toString()+"::"+this.resource.toString();return this.isMarkedAsFiltered()&&(e+="::findFilterResult"),e}toString(){return"ExplorerItem: ".concat(this.name)}get isRoot(){return this===this.root}static create(t,i,r,o,s,n){let d=new e(o.resource,t,i,r,s,o.isDirectory,o.isSymbolicLink,o.readonly,o.locked,o.name,o.mtime,!o.isFile&&!o.isDirectory);if(d.isDirectory&&(d._isDirectoryResolved=!!o.children||!!n&&n.some(e=>(0,l.cT)(e,d.resource)),o.children))for(let a=0,l=o.children.length;a<l;a++){let s=e.create(t,i,r,o.children[a],d,n);d.addChild(s)}return d}static mergeLocalWithDisk(t,i){if(t.resource.toString()!==i.resource.toString())return;let r=t.isDirectory||i.isDirectory;if((!r||!i._isDirectoryResolved||t._isDirectoryResolved)&&(i.resource=t.resource,i.isRoot||i.updateName(t.name),i._isDirectory=t.isDirectory,i._mtime=t.mtime,i._isDirectoryResolved=t._isDirectoryResolved,i._isSymbolicLink=t.isSymbolicLink,i.error=t.error,r&&t._isDirectoryResolved)){let r=new l.qA;i.children.forEach(e=>{r.set(e.resource,e)}),i.children.clear(),t.children.forEach(t=>{let o=r.get(t.resource);o?(e.mergeLocalWithDisk(t,o),i.addChild(o),r.delete(t.resource)):i.addChild(t)}),r.forEach(e=>{e instanceof J&&i.addChild(e)})}}addChild(e){e._parent=this,e.updateResource(!1),this.children.set(this.getPlatformAwareName(e.name),e)}getChild(e){return this.children.get(this.getPlatformAwareName(e))}fetchChildren(t){let i=this.configService.getValue({resource:this.root.resource}).explorer.fileNesting;return i.enabled&&this.nestedChildren?this.nestedChildren:(async()=>{if(!this._isDirectoryResolved){let i=t===v.a.Modified;this.error=void 0;try{let t=await this.fileService.resolve(this.resource,{resolveSingleChildDescendants:!0,resolveMetadata:i}),r=e.create(this.fileService,this.configService,this.filesConfigService,t,this);e.mergeLocalWithDisk(r,this)}catch(e){throw this.error=e,e}this._isDirectoryResolved=!0}let r=[];if(i.enabled){let e=[],t=[];for(let r of this.children.entries())r[1].nestedParent=void 0,r[1].isDirectory?t.push(r):e.push(r);let i=this.fileNester.nest(e.map(e=>{let[t]=e;return t}),this.getPlatformAwareName(this.name));for(let[o,s]of e){let e=i.get(o);if(void 0!==e){s.nestedChildren=[];for(let t of e.keys()){let e=(0,l.$j)(this.children.get(t));s.nestedChildren.push(e),e.nestedParent=s}r.push(s)}else s.nestedChildren=void 0}for(let[o,s]of t.values())r.push(s)}else this.children.forEach(e=>{r.push(e)});return r})()}get fileNester(){if(!this.root._fileNester){let e=this.configService.getValue({resource:this.root.resource}).explorer.fileNesting,t=Object.entries(e.patterns).filter(e=>"string"==typeof e[0]&&"string"==typeof e[1]&&e[0]&&e[1]).map(e=>{let[t,i]=e;return[this.getPlatformAwareName(t.trim()),i.split(",").map(e=>this.getPlatformAwareName(e.trim().replace(/\u200b/g,"").trim())).filter(e=>""!==e)]});this.root._fileNester=new z(t)}return this.root._fileNester}removeChild(e){this.nestedChildren=void 0,this.children.delete(this.getPlatformAwareName(e.name))}forgetChildren(){this.children.clear(),this.nestedChildren=void 0,this._isDirectoryResolved=!1,this._fileNester=void 0}getPlatformAwareName(e){return this.fileService.hasCapability(this.resource,l.Rs.PathCaseSensitive)?e:e.toLowerCase()}move(e){var t,i;null!==(t=this.nestedParent)&&void 0!==t&&t.removeChild(this),null!==(i=this._parent)&&void 0!==i&&i.removeChild(this),e.removeChild(this),e.addChild(this),this.updateResource(!0)}updateResource(e){this._parent&&(this.resource=(0,l.lT)(this._parent.resource,this.name)),e&&this.isDirectory&&this.children.forEach(e=>{e.updateResource(!0)})}rename(e){this.updateName(e.name),this._mtime=e.mtime,this.updateResource(!0)}find(e){let t=!this.fileService.hasCapability(e,l.Rs.PathCaseSensitive);return e&&this.resource.scheme===e.scheme&&(0,l.YO)(this.resource.authority,e.authority)&&(t?(0,l.Dk)(e.path,this.resource.path):e.path.startsWith(this.resource.path))?this.findByPath((0,l.wk)(e.path,l.FD.sep),this.resource.path.length,t):null}findByPath(e,t,i){if((0,l.DT)((0,l.wk)(this.resource.path,l.FD.sep),e,i))return this;if(this.isDirectory){for(;t<e.length&&e[t]===l.FD.sep;)t++;let r=e.indexOf(l.FD.sep,t);-1===r&&(r=e.length);let o=e.substring(t,r),s=this.children.get(this.getPlatformAwareName(o));if(s)return s.findByPath(e,r,i)}return null}isMarkedAsFiltered(){return this.markedAsFindResult}markItemAndParentsAsFiltered(){var e;this.markedAsFindResult=!0,null===(e=this.parent)||void 0===e||e.markItemAndParentsAsFiltered()}unmarkItemAndChildren(){this.markedAsFindResult=!1,this.children.forEach(e=>e.unmarkItemAndChildren())}};q.__decorator=(0,l.Pb)([l.Xd],q.prototype,"children",null);var J=class extends q{constructor(e,t,i,r,o){super(l.wD.file(""),e,t,i,r,o),this._isDirectoryResolved=!0}};function Q(e){let t=e.get(l.wt).lastFocusedList,i=null===t||void 0===t?void 0:t.getHTMLElement();if(i&&(0,l.Yx)(i)&&t instanceof l.ra){let e,i=(0,l.AM)(t.getSelectedElements().filter(e=>e instanceof v.i)),r=t.getFocusedElements(),o=r.length?r[0]:void 0;return o instanceof v.i&&(e=o),i.some(t=>t===e)?i:e?[e]:void 0}}async function $(e,t){let i=e.get(p.W),r=e.get(l.Vb),o=e.get(p.E),s=Q(e);if(!s){let e=i.activeGroup;e.activeEditor&&(s=[],!(e.activeEditor instanceof p.Et)||null!==t&&void 0!==t&&t.saveAs||e.activeEditor.primary.hasCapability(p.zt.Untitled)||e.activeEditor.secondary.hasCapability(p.zt.Untitled)||!e.activeEditor.secondary.isModified()?s.push({groupId:e.id,editor:e.activeEditor}):(s.push({groupId:e.id,editor:e.activeEditor.primary}),s.push({groupId:e.id,editor:e.activeEditor.secondary})))}if(!s||0===s.length)return;await te(e,s,t);let n=r.getFocusedCodeEditor();if(n instanceof h.$n&&!n.isSimpleWidget){var d,a;let e=null===(d=n.getModel())||void 0===d?void 0:d.uri;e&&!s.some(t=>{let{editor:i}=t;return(0,l.oT)(p.Ht.getCanonicalUri(i,{supportSideBySide:p.Jt.PRIMARY}),e)})&&((null===(a=o.files.get(e))||void 0===a?void 0:a.isReadonly())||await o.save(e,t))}}function ee(e,t,i){let r=[];for(let o of t)for(let e of o.getEditors(p.Ut.MOST_RECENTLY_ACTIVE))e.isDirty()&&r.push({groupId:o.id,editor:e});return te(e,r,i)}async function te(e,t,i){let r=e.get(p.kt),o=e.get(l.Ld),s=e.get(l.Ub);try{await r.save(t,i)}catch(e){if(!(0,l.SN)(e)){let n=[(0,l.Nb)({id:"workbench.action.files.saveEditors",label:(0,l.Ij)(8064,"Retry"),run:()=>s.invokeFunction(e=>te(e,t,i))})],d=t.filter(e=>{let{editor:t}=e;return!t.hasCapability(p.zt.Untitled)});d.length>0&&n.push((0,l.Nb)({id:"workbench.action.files.revertEditors",label:d.length>1?(0,l.Ij)(8065,"Revert All"):(0,l.Ij)(8066,"Revert"),run:()=>r.revert(d)})),o.notify({id:t.map(e=>{var t;let{editor:i}=e;return(0,l.zC)(null===(t=i.resource)||void 0===t?void 0:t.toString())}).join(),severity:l.Kd.Error,message:(0,l.Ij)(8067,"Failed to save '{0}': {1}",t.map(e=>{let{editor:t}=e;return t.getName()}).join(", "),(0,l.Ip)(e,!1)),actions:{primary:n}})}}}(0,l.TD)(),(0,l.Tt)(),(0,p.en)(),(0,l.ia)(),(0,l.WM)(),(0,l.Vt)(),(0,l.qx)(),(0,l.Fj)(),(0,l.Mb)(),(0,l.xN)(),(0,l.BC)(),(0,l.tO)(),(0,l.Hb)(),(0,h.tr)(),(0,l.Sb)(),(0,l.Kb)(),(0,l.gb)(),(0,l.Tt)(),(0,l.Ud)(),(0,l.Rd)(),(0,p.en)(),(0,p.Ot)(),(0,p.Q)(),(0,p.G)(),(0,p.At)(),(0,p.D)(),(0,c.l)(),(0,l.iT)(),(0,l.Pp)(),(0,l.qd)(),l.hb.registerCommandAndKeybindingRule({when:void 0,weight:l.mb.WorkbenchContrib,primary:l.ZD.CtrlCmd|l.YD.KeyS,id:c.s,handler:e=>$(e,{reason:p.Kt.EXPLICIT,force:!0})}),l.hb.registerCommandAndKeybindingRule({when:void 0,weight:l.mb.WorkbenchContrib,primary:(0,l.JD)(l.ZD.CtrlCmd|l.YD.KeyK,l.YD.KeyS),win:{primary:(0,l.JD)(l.ZD.CtrlCmd|l.YD.KeyK,l.ZD.CtrlCmd|l.ZD.Shift|l.YD.KeyS)},id:c.c,handler:e=>$(e,{reason:p.Kt.EXPLICIT,force:!0,skipSaveParticipants:!0})}),l.hb.registerCommandAndKeybindingRule({id:c.a,weight:l.mb.WorkbenchContrib,when:void 0,primary:l.ZD.CtrlCmd|l.ZD.Shift|l.YD.KeyS,handler:e=>$(e,{reason:p.Kt.EXPLICIT,saveAs:!0})}),l.hb.registerCommandAndKeybindingRule({when:void 0,weight:l.mb.WorkbenchContrib,primary:void 0,mac:{primary:l.ZD.CtrlCmd|l.ZD.Alt|l.YD.KeyS},win:{primary:(0,l.JD)(l.ZD.CtrlCmd|l.YD.KeyK,l.YD.KeyS)},id:c.n,handler:e=>ee(e,e.get(p.W).getGroups(p.X.MOST_RECENTLY_ACTIVE),{reason:p.Kt.EXPLICIT})}),l.xb.registerCommand({id:c.r,handler:(e,t,i)=>{let r,o=e.get(p.W),s=V([i],e.get(p.kt),o,e.get(l.wt));return r=s.groupedEditors.length?s.groupedEditors.map(e=>{let{group:t}=e;return t}):o.getGroups(p.X.MOST_RECENTLY_ACTIVE),ee(e,r,{reason:p.Kt.EXPLICIT})}}),l.xb.registerCommand({id:c.i,handler:async e=>(await e.get(p.kt).saveAll({includeUntitled:!1,reason:p.Kt.EXPLICIT})).success}),l.xb.registerCommand({id:c.t,handler:async e=>{let t=e.get(p.W),i=e.get(p.kt),r=Q(e);if(!r){let e=t.activeGroup;e.activeEditor&&(r=[{groupId:e.id,editor:e.activeEditor}])}if(r&&0!==r.length)try{await i.revert(r.filter(e=>{let{editor:t}=e;return!t.hasCapability(p.zt.Untitled)}),{force:!0})}catch(t){e.get(l.Ld).error((0,l.Ij)(8068,"Failed to revert '{0}': {1}",r.map(e=>{let{editor:t}=e;return t.getName()}).join(", "),(0,l.Ip)(t,!1)))}}})}}]);