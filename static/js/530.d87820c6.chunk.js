"use strict";(self.webpackChunkWindmill_Whitelabel_Example=self.webpackChunkWindmill_Whitelabel_Example||[]).push([[530],{530:(t,e,r)=>{r.r(e),r.d(e,{default:()=>m});var i=r(9354),l=(r(8036),r(5242)),a=r(1143),s=(r(4300),r(547)),n=(0,i.n)(l.Vn),o=(0,l.h)(t=>{let{workspace:e,kind:r,isTemplate:a}=t;return e&&(0,i.n)(l.In)?"flow"==r?l.Gi.listFlows({workspace:e,withoutDescription:!0}):l.da.listScripts({workspace:e,kinds:r,isTemplate:a,withoutDescription:!0}):void 0},n?{initial:{workspace:n,kind:"script",isTemplate:void 0,refreshCount:0},invalidateMs:6e4}:{}),d=(0,i._t)('<div class="text-2xs text-primary font-light text-center py-2 px-3 items-center"> </div>'),f=(0,i._t)('<div class="flex flex-col"><div class="text-left text-xs font-normal leading-tight py-0"> </div> <div class="text-left text-2xs font-normal"> </div></div>'),v=(0,i._t)('<div class="grow min-w-0 truncate text-left text-2xs font-thin"> </div>'),h=(0,i._t)('<kbd class="!text-xs">&crarr;</kbd>'),u=(0,i._t)('<div class="flex flex-col grow min-w-0"><div class="grow min-w-0 truncate text-left"><!></div> <!></div> <!>',1),c=(0,i._t)('<li class="w-full"><!></li>'),p=(0,i._t)('<!> <ul class="gap-1 flex flex-col"></ul>',1),w=(0,i._t)("<!> <!>",1);function m(t,e){(0,i.ln)(e,!0);let r=()=>(0,i.v)(l.Vn,"$workspaceStore",n),[n,m]=(0,i._)(),k=(0,l.Ai)(async()=>await o({workspace:r(),kind:g(),isTemplate:y(),refreshCount:Q()}),{loadInit:!1,clearValueOnRefresh:!1}),x=(0,i.Kt)(void 0),g=(0,i.f)(e,"kind",3,"script"),y=(0,i.f)(e,"isTemplate",3,void 0),W=(0,i.f)(e,"selected",3,void 0),P=(0,i.f)(e,"displayPath",3,!1),_=(0,i.f)(e,"filteredWithOwner",15,void 0),$=(0,i.f)(e,"filter",3,""),C=(0,i.f)(e,"owners",31,()=>(0,i.tn)([])),b=(0,i.f)(e,"ownerFilter",15,void 0),Q=(0,i.f)(e,"refreshCount",3,0),A=(0,i.o)();(0,i.At)(()=>{Q(),r()&&g()&&(0,i.It)(()=>k.refresh())}),(0,i.At)(()=>{r()&&b(void 0)}),(0,i.At)(()=>{var t,e;(0,i.Pt)(x)&&C(Array.from(new Set(null!==(t=null===(e=(0,i.Pt)(x))||void 0===e?void 0:e.map(t=>t.path.split("/").slice(0,2).join("/")))&&void 0!==t?t:[])).sort((t,e)=>t.startsWith("u/")&&!e.startsWith("u/")?-1:e.startsWith("u/")&&!t.startsWith("u/")?1:t.startsWith("f/")&&!e.startsWith("f/")?-1:e.startsWith("f/")&&!t.startsWith("f/")?1:t.localeCompare(e)))}),(0,i.At)(()=>{var t;_(null==b()?(0,i.Pt)(x):null===(t=(0,i.Pt)(x))||void 0===t?void 0:t.filter(t=>{var e;return t.path.startsWith(null===(e=b())||void 0===e?void 0:e.name)}))});var I=w();(0,i.xt)("keydown",i.Zt,function(t){if(null!=W()&&_()&&W()>=0&&W()<_().length&&"Enter"===t.key){t.preventDefault();let e=_()[W()];"flow"==g()?A("pickFlow",{path:e.path}):A("pickScript",{path:e.path,hash:void 0,kind:g()})}});var S=(0,i.$t)(I);(0,s.t)(S,{get filter(){return $()},get items(){return k.value},f:t=>(0,l.C)(t.summary)?t.path:t.summary+" ("+t.path+")",get filteredItems(){return(0,i.Pt)(x)},set filteredItems(t){(0,i.Wt)(x,t,!0)}});var T=(0,i.en)(S,2),F=t=>{var e=p(),r=(0,i.$t)(e),s=t=>{var e=d(),r=(0,i.Qt)(e,!0);(0,i.rn)(e),(0,i.kt)(()=>(0,i.pt)(r,"flow"==g()?"No flows found.":"No scripts found.")),(0,i.ht)(t,e)};(0,i.ut)(r,t=>{0==(0,i.Pt)(x).length&&t(s)});var n=(0,i.en)(r,2);(0,i.ot)(n,21,()=>{var t;return null!==(t=_())&&void 0!==t?t:[]},i.st,(t,e,r)=>{let s=()=>(0,i.Pt)(e).path,n=()=>(0,i.Pt)(e).summary,o=()=>(0,i.Pt)(e).marked;var d=c(),p=(0,i.Qt)(d);{let t=t=>{var e=f(),r=(0,i.Qt)(e),l=(0,i.Qt)(r,!0);(0,i.rn)(r);var a=(0,i.en)(r,2),o=(0,i.Qt)(a,!0);(0,i.rn)(a),(0,i.rn)(e),(0,i.kt)(()=>{var t,e;(0,i.pt)(l,null!==(t=n())&&void 0!==t?t:""),(0,i.pt)(o,null!==(e=s())&&void 0!==e?e:"")}),(0,i.ht)(t,e)},e=(0,i.Yt)(()=>r===W());(0,l.Tr)(p,{class:"w-full ",placement:"right",get forceOpen(){return(0,i.Pt)(e)},text:t,children:(t,e)=>{{let e=(0,i.Yt)(()=>W()===r),d=(0,i.Yt)(()=>({icon:"flow"==g()?l.Ht:a.t}));(0,l.Zn)(t,{get selected(){return(0,i.Pt)(e)},variant:"subtle",unifiedSize:"sm",btnClasses:"justify-start transition-all",onClick:()=>{"flow"==g()?A("pickFlow",{path:s()}):A("pickScript",{path:s(),hash:void 0,kind:g()})},get startIcon(){return(0,i.Pt)(d)},children:(t,e)=>{var l=u(),a=(0,i.$t)(l),d=(0,i.Qt)(a),f=(0,i.Qt)(d),c=t=>{var e=(0,i.gt)();(0,i.at)((0,i.$t)(e),o),(0,i.ht)(t,e)},p=t=>{var e=(0,i.yt)();(0,i.kt)(()=>(0,i.pt)(e,n()&&0!=n().length?n():s())),(0,i.ht)(t,e)};(0,i.ut)(f,t=>{o()?t(c):t(p,!1)}),(0,i.rn)(d);var w=(0,i.en)(d,2),m=t=>{var e=v(),r=(0,i.Qt)(e,!0);(0,i.rn)(e),(0,i.kt)(()=>(0,i.pt)(r,s())),(0,i.ht)(t,e)};(0,i.ut)(w,t=>{P()&&s()&&t(m)}),(0,i.rn)(a);var k=(0,i.en)(a,2),x=t=>{(0,i.ht)(t,h())};(0,i.ut)(k,t=>{r===W()&&t(x)}),(0,i.ht)(t,l)},$$slots:{default:!0}})}},$$slots:{text:!0,default:!0}})}(0,i.rn)(d),(0,i.ht)(t,d)}),(0,i.rn)(n),(0,i.ht)(t,e)},D=t=>{var e=(0,i.gt)();(0,i.ot)((0,i.$t)(e),16,()=>Array(10).fill(0),i.st,(t,e)=>{(0,l.dr)(t,{layout:[.5,[1.5]]})}),(0,i.ht)(t,e)};(0,i.ut)(T,t=>{(0,i.Pt)(x)?t(F):t(D,!1)}),(0,i.ht)(t,I),(0,i.cn)(),m()}}}]);