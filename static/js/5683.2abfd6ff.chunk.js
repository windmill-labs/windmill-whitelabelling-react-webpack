"use strict";(self.webpackChunkWindmill_Whitelabel_Example=self.webpackChunkWindmill_Whitelabel_Example||[]).push([[5683],{5683:(e,t,i)=>{i.r(t),i.d(t,{default:()=>O$});var n=i(45),s=i(7528),r=i(9379),o=i(6140),a=i(9495),l=i(8476),h=i(7744);const d=["f1","menu","keybinding"];let c;var u,g,p,f,m,v,_,b,C,y,w,S,k,E,D,T,I,x,L,A,N,F,O,R,M,P,B,U,H,W,V,z,K,q,G,j,Y,Q,$,X,Z,J,ee,te,ie,ne,se,re,oe,ae,le,he,de,ce,ue,ge,pe,fe,me,ve,_e,be,Ce,ye,we,Se,ke,Ee,De,Te,Ie,xe,Le,Ae,Ne,Fe,Oe,Re,Me,Pe,Be,Ue,He,We,Ve,ze,Ke,qe,Ge,je,Ye,Qe,$e,Xe,Ze,Je,et,tt,it,nt,st,rt,ot,at,lt,ht,dt,ct,ut,gt,pt,ft,mt,vt,_t,bt,Ct,yt,wt,St,kt,Et,Dt,Tt,It,xt,Lt,At,Nt,Ft,Ot,Rt,Mt,Pt,Bt,Ut,Ht,Wt,Vt,zt,Kt,qt,Gt,jt,Yt,Qt,$t,Xt,Zt,Jt,ei,ti,ii,ni,si,ri,oi,ai,li,hi,di,ci,ui,gi,pi,fi,mi,vi,_i,bi,Ci,yi,wi,Si;function ki(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o}function Ei(e,t){return function(i,n){t(i,n,e)}}function Di(){return globalThis._VSCODE_NLS_MESSAGES}function Ti(){return globalThis._VSCODE_NLS_LANGUAGE}var Ii="pseudo"===Ti()||typeof document<"u"&&document.location&&"string"==typeof document.location.hash&&document.location.hash.indexOf("pseudo=true")>=0;function xi(e,t){let i;return i=0===t.length?e:e.replace(/\{(\d+)\}/g,(e,i)=>{let n=t[i[0]],s=e;return"string"==typeof n?s=n:("number"==typeof n||"boolean"==typeof n||null==n)&&(s=String(n)),s}),Ii&&(i="\uff3b"+i.replace(/[aouei]/g,"$&$&")+"\uff3d"),i}function Li(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),s=2;s<i;s++)n[s-2]=arguments[s];return xi("number"==typeof e?Ai(e,t):t,n)}function Ai(e,t){var i;let n=null===(i=Di())||void 0===i?void 0:i[e];if("string"!=typeof n){if("string"==typeof t)return t;throw Error("!!! NLS MISSING: ".concat(e," !!!"))}return n}function Ni(e,t){let i;i="number"==typeof e?Ai(e,t):t;for(var n=arguments.length,s=new Array(n>2?n-2:0),r=2;r<n;r++)s[r-2]=arguments[r];let o=xi(i,s);return{value:o,original:t===i?o:xi(t,s)}}var Fi=new class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?Ki.isErrorNoTelemetry(e)?new Ki(e.message+"\n\n"+e.stack):Error(e.message+"\n\n"+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(t=>{t(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}};function Oi(e){Fi.onUnexpectedError(e)}function Ri(e){Bi(e)||Fi.onUnexpectedError(e)}function Mi(e){if(e instanceof Error){let{name:t,message:i,cause:n}=e;return{$isError:!0,name:t,message:i,stack:e.stacktrace||e.stack,noTelemetry:Ki.isErrorNoTelemetry(e),cause:n?Mi(n):void 0,code:e.code}}return e}var Pi="Canceled";function Bi(e){return e instanceof Ui||e instanceof Error&&"Canceled"===e.name&&"Canceled"===e.message}var Ui=class extends Error{constructor(){super(Pi),this.name=this.message}};u=class e extends Error{static is(t){return t instanceof e||t instanceof Error&&t.name===e._name}constructor(t){super(t),this.name=e._name}};u._name="PendingMigrationError";function Hi(e){return e?Error("Illegal argument: ".concat(e)):Error("Illegal argument")}function Wi(e){return e?Error("Illegal state: ".concat(e)):Error("Illegal state")}function Vi(e){return e?e.message?e.message:e.stack?e.stack.split("\n")[0]:String(e):"Error"}var zi=class extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}},Ki=class e extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(t){if(t instanceof e)return t;let i=new e;return i.message=t.message,i.stack=t.stack,i}static isErrorNoTelemetry(e){return"CodeExpectedError"===e.name}},qi=class e extends Error{constructor(t){super(t||"An unexpected bug occurred."),Object.setPrototypeOf(this,e.prototype)}};function Gi(e,t){if(!e)throw Error(t?"Assertion failed (".concat(t,")"):"Assertion Failed")}function ji(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unexpected state";if(!e)throw"string"==typeof t?new qi("Assertion Failed: ".concat(t)):t}function Yi(e){e()||(e(),Ri(new qi("Assertion Failed")))}function Qi(e,t){let i=0;for(;i<e.length-1;){if(!t(e[i],e[i+1]))return!1;i++}return!0}function $i(e){return"string"==typeof e}function Xi(e){return"object"==typeof e&&!!e&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}function Zi(e){let t=Object.getPrototypeOf(Uint8Array);return"object"==typeof e&&e instanceof t}function Ji(e){return"number"==typeof e&&!isNaN(e)}function en(e){return!!e&&"function"==typeof e[Symbol.iterator]}function tn(e){return!0===e||!1===e}function nn(e){return void 0===e}function sn(e){return!rn(e)}function rn(e){return nn(e)||null===e}function on(e,t){if(!e)throw Error(t?"Unexpected type, expected '".concat(t,"'"):"Unexpected type")}function an(e){return ji(null!=e,"Argument is `undefined` or `null`."),e}var ln,hn,dn=Object.prototype.hasOwnProperty;function cn(e){if(!Xi(e))return!1;for(let t in e)if(dn.call(e,t))return!1;return!0}function un(e){return"function"==typeof e}function gn(e,t){if($i(t)){if(typeof e!==t)throw Error("argument does not match constraint: typeof ".concat(t))}else if(un(t)){try{if(e instanceof t)return}catch(i){}if(!rn(e)&&e.constructor===t||1===t.length&&!0===t.call(void 0,e))return;throw Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}(hn=ln||(ln={})).serviceIds=new Map,hn.DI_TARGET="$di$target",hn.DI_DEPENDENCIES="$di$dependencies",hn.getServiceDependencies=function(e){return e[hn.DI_DEPENDENCIES]||[]};var pn=fn("instantiationService");function fn(e){if(ln.serviceIds.has(e))return ln.serviceIds.get(e);let t=function(e,i,n){if(3!==arguments.length)throw Error("@IServiceName-decorator can only be used to decorate a parameter");!function(e,t,i){t[ln.DI_TARGET]===t?t[ln.DI_DEPENDENCIES].push({id:e,index:i}):(t[ln.DI_DEPENDENCIES]=[{id:e,index:i}],t[ln.DI_TARGET]=t)}(t,e,n)};return t.toString=()=>e,ln.serviceIds.set(e,t),t}var mn,vn,_n=fn("extensionService"),bn=/\[(.+?)\]/g;!function(e){e.COLOR_THEME="workbench.colorTheme",e.FILE_ICON_THEME="workbench.iconTheme",e.PRODUCT_ICON_THEME="workbench.productIconTheme",e.COLOR_CUSTOMIZATIONS="workbench.colorCustomizations",e.TOKEN_COLOR_CUSTOMIZATIONS="editor.tokenColorCustomizations",e.SEMANTIC_TOKEN_COLOR_CUSTOMIZATIONS="editor.semanticTokenColorCustomizations",e.PREFERRED_DARK_THEME="workbench.preferredDarkColorTheme",e.PREFERRED_LIGHT_THEME="workbench.preferredLightColorTheme",e.PREFERRED_HC_DARK_THEME="workbench.preferredHighContrastColorTheme",e.PREFERRED_HC_LIGHT_THEME="workbench.preferredHighContrastLightColorTheme",e.DETECT_COLOR_SCHEME="window.autoDetectColorScheme",e.DETECT_HC="window.autoDetectHighContrast",e.SYSTEM_COLOR_THEME="window.systemColorTheme"}(mn||(mn={})),function(e){e.COLOR_THEME_DARK="Default Dark Modern",e.COLOR_THEME_LIGHT="Default Light Modern",e.COLOR_THEME_HC_DARK="Default High Contrast",e.COLOR_THEME_HC_LIGHT="Default High Contrast Light",e.COLOR_THEME_DARK_OLD="Default Dark+",e.COLOR_THEME_LIGHT_OLD="Default Light+",e.FILE_ICON_THEME="vs-seti",e.PRODUCT_ICON_THEME="Default"}(vn||(vn={}));var Cn,yn={"actionBar.toggledBackground":"#383a49","activityBar.activeBorder":"#0078D4","activityBar.background":"#181818","activityBar.border":"#2B2B2B","activityBar.foreground":"#D7D7D7","activityBar.inactiveForeground":"#868686","activityBarBadge.background":"#0078D4","activityBarBadge.foreground":"#FFFFFF","badge.background":"#616161","badge.foreground":"#F8F8F8","button.background":"#0078D4","button.border":"#FFFFFF12","button.foreground":"#FFFFFF","button.hoverBackground":"#026EC1","button.secondaryBackground":"#313131","button.secondaryForeground":"#CCCCCC","button.secondaryHoverBackground":"#3C3C3C","chat.slashCommandBackground":"#26477866","chat.slashCommandForeground":"#85B6FF","chat.editedFileForeground":"#E2C08D","checkbox.background":"#313131","checkbox.border":"#3C3C3C","debugToolBar.background":"#181818",descriptionForeground:"#9D9D9D","dropdown.background":"#313131","dropdown.border":"#3C3C3C","dropdown.foreground":"#CCCCCC","dropdown.listBackground":"#1F1F1F","editor.background":"#1F1F1F","editor.findMatchBackground":"#9E6A03","editor.foreground":"#CCCCCC","editor.inactiveSelectionBackground":"#3A3D41","editor.selectionHighlightBackground":"#ADD6FF26","editorGroup.border":"#FFFFFF17","editorGroupHeader.tabsBackground":"#181818","editorGroupHeader.tabsBorder":"#2B2B2B","editorGutter.addedBackground":"#2EA043","editorGutter.deletedBackground":"#F85149","editorGutter.modifiedBackground":"#0078D4","editorIndentGuide.activeBackground1":"#707070","editorIndentGuide.background1":"#404040","editorLineNumber.activeForeground":"#CCCCCC","editorLineNumber.foreground":"#6E7681","editorOverviewRuler.border":"#010409","editorWidget.background":"#202020",errorForeground:"#F85149",focusBorder:"#0078D4",foreground:"#CCCCCC","icon.foreground":"#CCCCCC","input.background":"#313131","input.border":"#3C3C3C","input.foreground":"#CCCCCC","input.placeholderForeground":"#989898","inputOption.activeBackground":"#2489DB82","inputOption.activeBorder":"#2488DB","keybindingLabel.foreground":"#CCCCCC","list.activeSelectionIconForeground":"#FFF","list.dropBackground":"#383B3D","menu.background":"#1F1F1F","menu.border":"#454545","menu.foreground":"#CCCCCC","menu.selectionBackground":"#0078d4","menu.separatorBackground":"#454545","notificationCenterHeader.background":"#1F1F1F","notificationCenterHeader.foreground":"#CCCCCC","notifications.background":"#1F1F1F","notifications.border":"#2B2B2B","notifications.foreground":"#CCCCCC","panel.background":"#181818","panel.border":"#2B2B2B","panelInput.border":"#2B2B2B","panelTitle.activeBorder":"#0078D4","panelTitle.activeForeground":"#CCCCCC","panelTitle.inactiveForeground":"#9D9D9D","peekViewEditor.background":"#1F1F1F","peekViewEditor.matchHighlightBackground":"#BB800966","peekViewResult.background":"#1F1F1F","peekViewResult.matchHighlightBackground":"#BB800966","pickerGroup.border":"#3C3C3C","ports.iconRunningProcessForeground":"#369432","progressBar.background":"#0078D4","quickInput.background":"#222222","quickInput.foreground":"#CCCCCC","settings.dropdownBackground":"#313131","settings.dropdownBorder":"#3C3C3C","settings.headerForeground":"#FFFFFF","settings.modifiedItemIndicator":"#BB800966","sideBar.background":"#181818","sideBar.border":"#2B2B2B","sideBar.foreground":"#CCCCCC","sideBarSectionHeader.background":"#181818","sideBarSectionHeader.border":"#2B2B2B","sideBarSectionHeader.foreground":"#CCCCCC","sideBarTitle.foreground":"#CCCCCC","statusBar.background":"#181818","statusBar.border":"#2B2B2B","statusBar.debuggingBackground":"#0078D4","statusBar.debuggingForeground":"#FFFFFF","statusBar.focusBorder":"#0078D4","statusBar.foreground":"#CCCCCC","statusBar.noFolderBackground":"#1F1F1F","statusBarItem.focusBorder":"#0078D4","statusBarItem.prominentBackground":"#6E768166","statusBarItem.remoteBackground":"#0078D4","statusBarItem.remoteForeground":"#FFFFFF","tab.activeBackground":"#1F1F1F","tab.activeBorder":"#1F1F1F","tab.activeBorderTop":"#0078D4","tab.activeForeground":"#FFFFFF","tab.border":"#2B2B2B","tab.hoverBackground":"#1F1F1F","tab.inactiveBackground":"#181818","tab.inactiveForeground":"#9D9D9D","tab.lastPinnedBorder":"#ccc3","tab.selectedBackground":"#222222","tab.selectedBorderTop":"#6caddf","tab.selectedForeground":"#ffffffa0","tab.unfocusedActiveBorder":"#1F1F1F","tab.unfocusedActiveBorderTop":"#2B2B2B","tab.unfocusedHoverBackground":"#1F1F1F","terminal.foreground":"#CCCCCC","terminal.inactiveSelectionBackground":"#3A3D41","terminal.tab.activeBorder":"#0078D4","textBlockQuote.background":"#2B2B2B","textBlockQuote.border":"#616161","textCodeBlock.background":"#2B2B2B","textLink.activeForeground":"#4daafc","textLink.foreground":"#4daafc","textPreformat.background":"#3C3C3C","textPreformat.foreground":"#D0D0D0","textSeparator.foreground":"#21262D","titleBar.activeBackground":"#181818","titleBar.activeForeground":"#CCCCCC","titleBar.border":"#2B2B2B","titleBar.inactiveBackground":"#1F1F1F","titleBar.inactiveForeground":"#9D9D9D","welcomePage.progress.foreground":"#0078D4","welcomePage.tileBackground":"#2B2B2B","widget.border":"#313131"},wn={"actionBar.toggledBackground":"#dddddd","activityBar.activeBorder":"#005FB8","activityBar.background":"#F8F8F8","activityBar.border":"#E5E5E5","activityBar.foreground":"#1F1F1F","activityBar.inactiveForeground":"#616161","activityBarBadge.background":"#005FB8","activityBarBadge.foreground":"#FFFFFF","badge.background":"#CCCCCC","badge.foreground":"#3B3B3B","button.background":"#005FB8","button.border":"#0000001a","button.foreground":"#FFFFFF","button.hoverBackground":"#0258A8","button.secondaryBackground":"#E5E5E5","button.secondaryForeground":"#3B3B3B","button.secondaryHoverBackground":"#CCCCCC","chat.slashCommandBackground":"#ADCEFF7A","chat.slashCommandForeground":"#26569E","chat.editedFileForeground":"#895503","checkbox.background":"#F8F8F8","checkbox.border":"#CECECE",descriptionForeground:"#3B3B3B","diffEditor.unchangedRegionBackground":"#f8f8f8","dropdown.background":"#FFFFFF","dropdown.border":"#CECECE","dropdown.foreground":"#3B3B3B","dropdown.listBackground":"#FFFFFF","editor.background":"#FFFFFF","editor.foreground":"#3B3B3B","editor.inactiveSelectionBackground":"#E5EBF1","editor.selectionHighlightBackground":"#ADD6FF80","editorGroup.border":"#E5E5E5","editorGroupHeader.tabsBackground":"#F8F8F8","editorGroupHeader.tabsBorder":"#E5E5E5","editorGutter.addedBackground":"#2EA043","editorGutter.deletedBackground":"#F85149","editorGutter.modifiedBackground":"#005FB8","editorIndentGuide.activeBackground1":"#939393","editorIndentGuide.background1":"#D3D3D3","editorLineNumber.activeForeground":"#171184","editorLineNumber.foreground":"#6E7681","editorOverviewRuler.border":"#E5E5E5","editorSuggestWidget.background":"#F8F8F8","editorWidget.background":"#F8F8F8",errorForeground:"#F85149",focusBorder:"#005FB8",foreground:"#3B3B3B","icon.foreground":"#3B3B3B","input.background":"#FFFFFF","input.border":"#CECECE","input.foreground":"#3B3B3B","input.placeholderForeground":"#767676","inputOption.activeBackground":"#BED6ED","inputOption.activeBorder":"#005FB8","inputOption.activeForeground":"#000000","keybindingLabel.foreground":"#3B3B3B","list.activeSelectionBackground":"#E8E8E8","list.activeSelectionForeground":"#000000","list.activeSelectionIconForeground":"#000000","list.focusAndSelectionOutline":"#005FB8","list.hoverBackground":"#F2F2F2","menu.border":"#CECECE","menu.selectionBackground":"#005FB8","menu.selectionForeground":"#ffffff","notebook.cellBorderColor":"#E5E5E5","notebook.selectedCellBackground":"#C8DDF150","notificationCenterHeader.background":"#FFFFFF","notificationCenterHeader.foreground":"#3B3B3B","notifications.background":"#FFFFFF","notifications.border":"#E5E5E5","notifications.foreground":"#3B3B3B","panel.background":"#F8F8F8","panel.border":"#E5E5E5","panelInput.border":"#E5E5E5","panelTitle.activeBorder":"#005FB8","panelTitle.activeForeground":"#3B3B3B","panelTitle.inactiveForeground":"#3B3B3B","peekViewEditor.matchHighlightBackground":"#BB800966","peekViewResult.background":"#FFFFFF","peekViewResult.matchHighlightBackground":"#BB800966","pickerGroup.border":"#E5E5E5","pickerGroup.foreground":"#8B949E","ports.iconRunningProcessForeground":"#369432","progressBar.background":"#005FB8","quickInput.background":"#F8F8F8","quickInput.foreground":"#3B3B3B","searchEditor.textInputBorder":"#CECECE","settings.dropdownBackground":"#FFFFFF","settings.dropdownBorder":"#CECECE","settings.headerForeground":"#1F1F1F","settings.modifiedItemIndicator":"#BB800966","settings.numberInputBorder":"#CECECE","settings.textInputBorder":"#CECECE","sideBar.background":"#F8F8F8","sideBar.border":"#E5E5E5","sideBar.foreground":"#3B3B3B","sideBarSectionHeader.background":"#F8F8F8","sideBarSectionHeader.border":"#E5E5E5","sideBarSectionHeader.foreground":"#3B3B3B","sideBarTitle.foreground":"#3B3B3B","statusBar.background":"#F8F8F8","statusBar.border":"#E5E5E5","statusBar.debuggingBackground":"#FD716C","statusBar.debuggingForeground":"#000000","statusBar.focusBorder":"#005FB8","statusBar.foreground":"#3B3B3B","statusBar.noFolderBackground":"#F8F8F8","statusBarItem.compactHoverBackground":"#CCCCCC","statusBarItem.errorBackground":"#C72E0F","statusBarItem.focusBorder":"#005FB8","statusBarItem.hoverBackground":"#B8B8B850","statusBarItem.prominentBackground":"#6E768166","statusBarItem.remoteBackground":"#005FB8","statusBarItem.remoteForeground":"#FFFFFF","tab.activeBackground":"#FFFFFF","tab.activeBorder":"#F8F8F8","tab.activeBorderTop":"#005FB8","tab.activeForeground":"#3B3B3B","tab.border":"#E5E5E5","tab.hoverBackground":"#FFFFFF","tab.inactiveBackground":"#F8F8F8","tab.inactiveForeground":"#868686","tab.lastPinnedBorder":"#D4D4D4","tab.selectedBackground":"#ffffffa5","tab.selectedBorderTop":"#68a3da","tab.selectedForeground":"#333333b3","tab.unfocusedActiveBorder":"#F8F8F8","tab.unfocusedActiveBorderTop":"#E5E5E5","tab.unfocusedHoverBackground":"#F8F8F8","terminal.foreground":"#3B3B3B","terminal.inactiveSelectionBackground":"#E5EBF1","terminal.tab.activeBorder":"#005FB8","terminalCursor.foreground":"#005FB8","textBlockQuote.background":"#F8F8F8","textBlockQuote.border":"#E5E5E5","textCodeBlock.background":"#F8F8F8","textLink.activeForeground":"#005FB8","textLink.foreground":"#005FB8","textPreformat.background":"#0000001F","textPreformat.foreground":"#3B3B3B","textSeparator.foreground":"#21262D","titleBar.activeBackground":"#F8F8F8","titleBar.activeForeground":"#1E1E1E","titleBar.border":"#E5E5E5","titleBar.inactiveBackground":"#F8F8F8","titleBar.inactiveForeground":"#8B949E","welcomePage.tileBackground":"#F3F3F3","widget.border":"#E5E5E5"};!function(e){e.toJSONObject=function(e){return e&&{_extensionId:e.extensionId,_extensionIsBuiltin:e.extensionIsBuiltin,_extensionName:e.extensionName,_extensionPublisher:e.extensionPublisher}},e.fromJSONObject=function(e){if(e&&$i(e._extensionId)&&tn(e._extensionIsBuiltin)&&$i(e._extensionName)&&$i(e._extensionPublisher))return{extensionId:e._extensionId,extensionIsBuiltin:e._extensionIsBuiltin,extensionName:e._extensionName,extensionPublisher:e._extensionPublisher}},e.fromName=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{extensionPublisher:e,extensionId:"".concat(e,".").concat(t),extensionName:t,extensionIsBuiltin:i}}}(Cn||(Cn={}));var Sn=fn("storageService"),kn=fn("telemetryService");fn("customEndpointTelemetryService");var En,Dn,Tn=new class{constructor(){this.data=new Map}add(e,t){Gi($i(e)),Gi(Xi(t)),Gi(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}knows(e){return this.data.has(e)}as(e){return this.data.get(e)||null}dispose(){this.data.forEach(e=>{un(e.dispose)&&e.dispose()}),this.data.clear()}};!function(e){e[e.Null=0]="Null",e[e.Backspace=8]="Backspace",e[e.Tab=9]="Tab",e[e.LineFeed=10]="LineFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationMark=33]="ExclamationMark",e[e.DoubleQuote=34]="DoubleQuote",e[e.Hash=35]="Hash",e[e.DollarSign=36]="DollarSign",e[e.PercentSign=37]="PercentSign",e[e.Ampersand=38]="Ampersand",e[e.SingleQuote=39]="SingleQuote",e[e.OpenParen=40]="OpenParen",e[e.CloseParen=41]="CloseParen",e[e.Asterisk=42]="Asterisk",e[e.Plus=43]="Plus",e[e.Comma=44]="Comma",e[e.Dash=45]="Dash",e[e.Period=46]="Period",e[e.Slash=47]="Slash",e[e.Digit0=48]="Digit0",e[e.Digit1=49]="Digit1",e[e.Digit2=50]="Digit2",e[e.Digit3=51]="Digit3",e[e.Digit4=52]="Digit4",e[e.Digit5=53]="Digit5",e[e.Digit6=54]="Digit6",e[e.Digit7=55]="Digit7",e[e.Digit8=56]="Digit8",e[e.Digit9=57]="Digit9",e[e.Colon=58]="Colon",e[e.Semicolon=59]="Semicolon",e[e.LessThan=60]="LessThan",e[e.Equals=61]="Equals",e[e.GreaterThan=62]="GreaterThan",e[e.QuestionMark=63]="QuestionMark",e[e.AtSign=64]="AtSign",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.OpenSquareBracket=91]="OpenSquareBracket",e[e.Backslash=92]="Backslash",e[e.CloseSquareBracket=93]="CloseSquareBracket",e[e.Caret=94]="Caret",e[e.Underline=95]="Underline",e[e.BackTick=96]="BackTick",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.OpenCurlyBrace=123]="OpenCurlyBrace",e[e.Pipe=124]="Pipe",e[e.CloseCurlyBrace=125]="CloseCurlyBrace",e[e.Tilde=126]="Tilde",e[e.NoBreakSpace=160]="NoBreakSpace",e[e.U_Combining_Grave_Accent=768]="U_Combining_Grave_Accent",e[e.U_Combining_Acute_Accent=769]="U_Combining_Acute_Accent",e[e.U_Combining_Circumflex_Accent=770]="U_Combining_Circumflex_Accent",e[e.U_Combining_Tilde=771]="U_Combining_Tilde",e[e.U_Combining_Macron=772]="U_Combining_Macron",e[e.U_Combining_Overline=773]="U_Combining_Overline",e[e.U_Combining_Breve=774]="U_Combining_Breve",e[e.U_Combining_Dot_Above=775]="U_Combining_Dot_Above",e[e.U_Combining_Diaeresis=776]="U_Combining_Diaeresis",e[e.U_Combining_Hook_Above=777]="U_Combining_Hook_Above",e[e.U_Combining_Ring_Above=778]="U_Combining_Ring_Above",e[e.U_Combining_Double_Acute_Accent=779]="U_Combining_Double_Acute_Accent",e[e.U_Combining_Caron=780]="U_Combining_Caron",e[e.U_Combining_Vertical_Line_Above=781]="U_Combining_Vertical_Line_Above",e[e.U_Combining_Double_Vertical_Line_Above=782]="U_Combining_Double_Vertical_Line_Above",e[e.U_Combining_Double_Grave_Accent=783]="U_Combining_Double_Grave_Accent",e[e.U_Combining_Candrabindu=784]="U_Combining_Candrabindu",e[e.U_Combining_Inverted_Breve=785]="U_Combining_Inverted_Breve",e[e.U_Combining_Turned_Comma_Above=786]="U_Combining_Turned_Comma_Above",e[e.U_Combining_Comma_Above=787]="U_Combining_Comma_Above",e[e.U_Combining_Reversed_Comma_Above=788]="U_Combining_Reversed_Comma_Above",e[e.U_Combining_Comma_Above_Right=789]="U_Combining_Comma_Above_Right",e[e.U_Combining_Grave_Accent_Below=790]="U_Combining_Grave_Accent_Below",e[e.U_Combining_Acute_Accent_Below=791]="U_Combining_Acute_Accent_Below",e[e.U_Combining_Left_Tack_Below=792]="U_Combining_Left_Tack_Below",e[e.U_Combining_Right_Tack_Below=793]="U_Combining_Right_Tack_Below",e[e.U_Combining_Left_Angle_Above=794]="U_Combining_Left_Angle_Above",e[e.U_Combining_Horn=795]="U_Combining_Horn",e[e.U_Combining_Left_Half_Ring_Below=796]="U_Combining_Left_Half_Ring_Below",e[e.U_Combining_Up_Tack_Below=797]="U_Combining_Up_Tack_Below",e[e.U_Combining_Down_Tack_Below=798]="U_Combining_Down_Tack_Below",e[e.U_Combining_Plus_Sign_Below=799]="U_Combining_Plus_Sign_Below",e[e.U_Combining_Minus_Sign_Below=800]="U_Combining_Minus_Sign_Below",e[e.U_Combining_Palatalized_Hook_Below=801]="U_Combining_Palatalized_Hook_Below",e[e.U_Combining_Retroflex_Hook_Below=802]="U_Combining_Retroflex_Hook_Below",e[e.U_Combining_Dot_Below=803]="U_Combining_Dot_Below",e[e.U_Combining_Diaeresis_Below=804]="U_Combining_Diaeresis_Below",e[e.U_Combining_Ring_Below=805]="U_Combining_Ring_Below",e[e.U_Combining_Comma_Below=806]="U_Combining_Comma_Below",e[e.U_Combining_Cedilla=807]="U_Combining_Cedilla",e[e.U_Combining_Ogonek=808]="U_Combining_Ogonek",e[e.U_Combining_Vertical_Line_Below=809]="U_Combining_Vertical_Line_Below",e[e.U_Combining_Bridge_Below=810]="U_Combining_Bridge_Below",e[e.U_Combining_Inverted_Double_Arch_Below=811]="U_Combining_Inverted_Double_Arch_Below",e[e.U_Combining_Caron_Below=812]="U_Combining_Caron_Below",e[e.U_Combining_Circumflex_Accent_Below=813]="U_Combining_Circumflex_Accent_Below",e[e.U_Combining_Breve_Below=814]="U_Combining_Breve_Below",e[e.U_Combining_Inverted_Breve_Below=815]="U_Combining_Inverted_Breve_Below",e[e.U_Combining_Tilde_Below=816]="U_Combining_Tilde_Below",e[e.U_Combining_Macron_Below=817]="U_Combining_Macron_Below",e[e.U_Combining_Low_Line=818]="U_Combining_Low_Line",e[e.U_Combining_Double_Low_Line=819]="U_Combining_Double_Low_Line",e[e.U_Combining_Tilde_Overlay=820]="U_Combining_Tilde_Overlay",e[e.U_Combining_Short_Stroke_Overlay=821]="U_Combining_Short_Stroke_Overlay",e[e.U_Combining_Long_Stroke_Overlay=822]="U_Combining_Long_Stroke_Overlay",e[e.U_Combining_Short_Solidus_Overlay=823]="U_Combining_Short_Solidus_Overlay",e[e.U_Combining_Long_Solidus_Overlay=824]="U_Combining_Long_Solidus_Overlay",e[e.U_Combining_Right_Half_Ring_Below=825]="U_Combining_Right_Half_Ring_Below",e[e.U_Combining_Inverted_Bridge_Below=826]="U_Combining_Inverted_Bridge_Below",e[e.U_Combining_Square_Below=827]="U_Combining_Square_Below",e[e.U_Combining_Seagull_Below=828]="U_Combining_Seagull_Below",e[e.U_Combining_X_Above=829]="U_Combining_X_Above",e[e.U_Combining_Vertical_Tilde=830]="U_Combining_Vertical_Tilde",e[e.U_Combining_Double_Overline=831]="U_Combining_Double_Overline",e[e.U_Combining_Grave_Tone_Mark=832]="U_Combining_Grave_Tone_Mark",e[e.U_Combining_Acute_Tone_Mark=833]="U_Combining_Acute_Tone_Mark",e[e.U_Combining_Greek_Perispomeni=834]="U_Combining_Greek_Perispomeni",e[e.U_Combining_Greek_Koronis=835]="U_Combining_Greek_Koronis",e[e.U_Combining_Greek_Dialytika_Tonos=836]="U_Combining_Greek_Dialytika_Tonos",e[e.U_Combining_Greek_Ypogegrammeni=837]="U_Combining_Greek_Ypogegrammeni",e[e.U_Combining_Bridge_Above=838]="U_Combining_Bridge_Above",e[e.U_Combining_Equals_Sign_Below=839]="U_Combining_Equals_Sign_Below",e[e.U_Combining_Double_Vertical_Line_Below=840]="U_Combining_Double_Vertical_Line_Below",e[e.U_Combining_Left_Angle_Below=841]="U_Combining_Left_Angle_Below",e[e.U_Combining_Not_Tilde_Above=842]="U_Combining_Not_Tilde_Above",e[e.U_Combining_Homothetic_Above=843]="U_Combining_Homothetic_Above",e[e.U_Combining_Almost_Equal_To_Above=844]="U_Combining_Almost_Equal_To_Above",e[e.U_Combining_Left_Right_Arrow_Below=845]="U_Combining_Left_Right_Arrow_Below",e[e.U_Combining_Upwards_Arrow_Below=846]="U_Combining_Upwards_Arrow_Below",e[e.U_Combining_Grapheme_Joiner=847]="U_Combining_Grapheme_Joiner",e[e.U_Combining_Right_Arrowhead_Above=848]="U_Combining_Right_Arrowhead_Above",e[e.U_Combining_Left_Half_Ring_Above=849]="U_Combining_Left_Half_Ring_Above",e[e.U_Combining_Fermata=850]="U_Combining_Fermata",e[e.U_Combining_X_Below=851]="U_Combining_X_Below",e[e.U_Combining_Left_Arrowhead_Below=852]="U_Combining_Left_Arrowhead_Below",e[e.U_Combining_Right_Arrowhead_Below=853]="U_Combining_Right_Arrowhead_Below",e[e.U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below=854]="U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below",e[e.U_Combining_Right_Half_Ring_Above=855]="U_Combining_Right_Half_Ring_Above",e[e.U_Combining_Dot_Above_Right=856]="U_Combining_Dot_Above_Right",e[e.U_Combining_Asterisk_Below=857]="U_Combining_Asterisk_Below",e[e.U_Combining_Double_Ring_Below=858]="U_Combining_Double_Ring_Below",e[e.U_Combining_Zigzag_Above=859]="U_Combining_Zigzag_Above",e[e.U_Combining_Double_Breve_Below=860]="U_Combining_Double_Breve_Below",e[e.U_Combining_Double_Breve=861]="U_Combining_Double_Breve",e[e.U_Combining_Double_Macron=862]="U_Combining_Double_Macron",e[e.U_Combining_Double_Macron_Below=863]="U_Combining_Double_Macron_Below",e[e.U_Combining_Double_Tilde=864]="U_Combining_Double_Tilde",e[e.U_Combining_Double_Inverted_Breve=865]="U_Combining_Double_Inverted_Breve",e[e.U_Combining_Double_Rightwards_Arrow_Below=866]="U_Combining_Double_Rightwards_Arrow_Below",e[e.U_Combining_Latin_Small_Letter_A=867]="U_Combining_Latin_Small_Letter_A",e[e.U_Combining_Latin_Small_Letter_E=868]="U_Combining_Latin_Small_Letter_E",e[e.U_Combining_Latin_Small_Letter_I=869]="U_Combining_Latin_Small_Letter_I",e[e.U_Combining_Latin_Small_Letter_O=870]="U_Combining_Latin_Small_Letter_O",e[e.U_Combining_Latin_Small_Letter_U=871]="U_Combining_Latin_Small_Letter_U",e[e.U_Combining_Latin_Small_Letter_C=872]="U_Combining_Latin_Small_Letter_C",e[e.U_Combining_Latin_Small_Letter_D=873]="U_Combining_Latin_Small_Letter_D",e[e.U_Combining_Latin_Small_Letter_H=874]="U_Combining_Latin_Small_Letter_H",e[e.U_Combining_Latin_Small_Letter_M=875]="U_Combining_Latin_Small_Letter_M",e[e.U_Combining_Latin_Small_Letter_R=876]="U_Combining_Latin_Small_Letter_R",e[e.U_Combining_Latin_Small_Letter_T=877]="U_Combining_Latin_Small_Letter_T",e[e.U_Combining_Latin_Small_Letter_V=878]="U_Combining_Latin_Small_Letter_V",e[e.U_Combining_Latin_Small_Letter_X=879]="U_Combining_Latin_Small_Letter_X",e[e.LINE_SEPARATOR=8232]="LINE_SEPARATOR",e[e.PARAGRAPH_SEPARATOR=8233]="PARAGRAPH_SEPARATOR",e[e.NEXT_LINE=133]="NEXT_LINE",e[e.U_CIRCUMFLEX=94]="U_CIRCUMFLEX",e[e.U_GRAVE_ACCENT=96]="U_GRAVE_ACCENT",e[e.U_DIAERESIS=168]="U_DIAERESIS",e[e.U_MACRON=175]="U_MACRON",e[e.U_ACUTE_ACCENT=180]="U_ACUTE_ACCENT",e[e.U_CEDILLA=184]="U_CEDILLA",e[e.U_MODIFIER_LETTER_LEFT_ARROWHEAD=706]="U_MODIFIER_LETTER_LEFT_ARROWHEAD",e[e.U_MODIFIER_LETTER_RIGHT_ARROWHEAD=707]="U_MODIFIER_LETTER_RIGHT_ARROWHEAD",e[e.U_MODIFIER_LETTER_UP_ARROWHEAD=708]="U_MODIFIER_LETTER_UP_ARROWHEAD",e[e.U_MODIFIER_LETTER_DOWN_ARROWHEAD=709]="U_MODIFIER_LETTER_DOWN_ARROWHEAD",e[e.U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING=722]="U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING",e[e.U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING=723]="U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING",e[e.U_MODIFIER_LETTER_UP_TACK=724]="U_MODIFIER_LETTER_UP_TACK",e[e.U_MODIFIER_LETTER_DOWN_TACK=725]="U_MODIFIER_LETTER_DOWN_TACK",e[e.U_MODIFIER_LETTER_PLUS_SIGN=726]="U_MODIFIER_LETTER_PLUS_SIGN",e[e.U_MODIFIER_LETTER_MINUS_SIGN=727]="U_MODIFIER_LETTER_MINUS_SIGN",e[e.U_BREVE=728]="U_BREVE",e[e.U_DOT_ABOVE=729]="U_DOT_ABOVE",e[e.U_RING_ABOVE=730]="U_RING_ABOVE",e[e.U_OGONEK=731]="U_OGONEK",e[e.U_SMALL_TILDE=732]="U_SMALL_TILDE",e[e.U_DOUBLE_ACUTE_ACCENT=733]="U_DOUBLE_ACUTE_ACCENT",e[e.U_MODIFIER_LETTER_RHOTIC_HOOK=734]="U_MODIFIER_LETTER_RHOTIC_HOOK",e[e.U_MODIFIER_LETTER_CROSS_ACCENT=735]="U_MODIFIER_LETTER_CROSS_ACCENT",e[e.U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR=741]="U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR",e[e.U_MODIFIER_LETTER_HIGH_TONE_BAR=742]="U_MODIFIER_LETTER_HIGH_TONE_BAR",e[e.U_MODIFIER_LETTER_MID_TONE_BAR=743]="U_MODIFIER_LETTER_MID_TONE_BAR",e[e.U_MODIFIER_LETTER_LOW_TONE_BAR=744]="U_MODIFIER_LETTER_LOW_TONE_BAR",e[e.U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR=745]="U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR",e[e.U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK=746]="U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK",e[e.U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK=747]="U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK",e[e.U_MODIFIER_LETTER_UNASPIRATED=749]="U_MODIFIER_LETTER_UNASPIRATED",e[e.U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD=751]="U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD",e[e.U_MODIFIER_LETTER_LOW_UP_ARROWHEAD=752]="U_MODIFIER_LETTER_LOW_UP_ARROWHEAD",e[e.U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD=753]="U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD",e[e.U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD=754]="U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD",e[e.U_MODIFIER_LETTER_LOW_RING=755]="U_MODIFIER_LETTER_LOW_RING",e[e.U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT=756]="U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT",e[e.U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT=757]="U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT",e[e.U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT=758]="U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT",e[e.U_MODIFIER_LETTER_LOW_TILDE=759]="U_MODIFIER_LETTER_LOW_TILDE",e[e.U_MODIFIER_LETTER_RAISED_COLON=760]="U_MODIFIER_LETTER_RAISED_COLON",e[e.U_MODIFIER_LETTER_BEGIN_HIGH_TONE=761]="U_MODIFIER_LETTER_BEGIN_HIGH_TONE",e[e.U_MODIFIER_LETTER_END_HIGH_TONE=762]="U_MODIFIER_LETTER_END_HIGH_TONE",e[e.U_MODIFIER_LETTER_BEGIN_LOW_TONE=763]="U_MODIFIER_LETTER_BEGIN_LOW_TONE",e[e.U_MODIFIER_LETTER_END_LOW_TONE=764]="U_MODIFIER_LETTER_END_LOW_TONE",e[e.U_MODIFIER_LETTER_SHELF=765]="U_MODIFIER_LETTER_SHELF",e[e.U_MODIFIER_LETTER_OPEN_SHELF=766]="U_MODIFIER_LETTER_OPEN_SHELF",e[e.U_MODIFIER_LETTER_LOW_LEFT_ARROW=767]="U_MODIFIER_LETTER_LOW_LEFT_ARROW",e[e.U_GREEK_LOWER_NUMERAL_SIGN=885]="U_GREEK_LOWER_NUMERAL_SIGN",e[e.U_GREEK_TONOS=900]="U_GREEK_TONOS",e[e.U_GREEK_DIALYTIKA_TONOS=901]="U_GREEK_DIALYTIKA_TONOS",e[e.U_GREEK_KORONIS=8125]="U_GREEK_KORONIS",e[e.U_GREEK_PSILI=8127]="U_GREEK_PSILI",e[e.U_GREEK_PERISPOMENI=8128]="U_GREEK_PERISPOMENI",e[e.U_GREEK_DIALYTIKA_AND_PERISPOMENI=8129]="U_GREEK_DIALYTIKA_AND_PERISPOMENI",e[e.U_GREEK_PSILI_AND_VARIA=8141]="U_GREEK_PSILI_AND_VARIA",e[e.U_GREEK_PSILI_AND_OXIA=8142]="U_GREEK_PSILI_AND_OXIA",e[e.U_GREEK_PSILI_AND_PERISPOMENI=8143]="U_GREEK_PSILI_AND_PERISPOMENI",e[e.U_GREEK_DASIA_AND_VARIA=8157]="U_GREEK_DASIA_AND_VARIA",e[e.U_GREEK_DASIA_AND_OXIA=8158]="U_GREEK_DASIA_AND_OXIA",e[e.U_GREEK_DASIA_AND_PERISPOMENI=8159]="U_GREEK_DASIA_AND_PERISPOMENI",e[e.U_GREEK_DIALYTIKA_AND_VARIA=8173]="U_GREEK_DIALYTIKA_AND_VARIA",e[e.U_GREEK_DIALYTIKA_AND_OXIA=8174]="U_GREEK_DIALYTIKA_AND_OXIA",e[e.U_GREEK_VARIA=8175]="U_GREEK_VARIA",e[e.U_GREEK_OXIA=8189]="U_GREEK_OXIA",e[e.U_GREEK_DASIA=8190]="U_GREEK_DASIA",e[e.U_IDEOGRAPHIC_FULL_STOP=12290]="U_IDEOGRAPHIC_FULL_STOP",e[e.U_LEFT_CORNER_BRACKET=12300]="U_LEFT_CORNER_BRACKET",e[e.U_RIGHT_CORNER_BRACKET=12301]="U_RIGHT_CORNER_BRACKET",e[e.U_LEFT_BLACK_LENTICULAR_BRACKET=12304]="U_LEFT_BLACK_LENTICULAR_BRACKET",e[e.U_RIGHT_BLACK_LENTICULAR_BRACKET=12305]="U_RIGHT_BLACK_LENTICULAR_BRACKET",e[e.U_OVERLINE=8254]="U_OVERLINE",e[e.UTF8_BOM=65279]="UTF8_BOM",e[e.U_FULLWIDTH_SEMICOLON=65307]="U_FULLWIDTH_SEMICOLON",e[e.U_FULLWIDTH_COMMA=65292]="U_FULLWIDTH_COMMA"}(En||(En={})),function(e){e[e.Uri=1]="Uri",e[e.Regexp=2]="Regexp",e[e.ScmResource=3]="ScmResource",e[e.ScmResourceGroup=4]="ScmResourceGroup",e[e.ScmProvider=5]="ScmProvider",e[e.CommentController=6]="CommentController",e[e.CommentThread=7]="CommentThread",e[e.CommentThreadInstance=8]="CommentThreadInstance",e[e.CommentThreadReply=9]="CommentThreadReply",e[e.CommentNode=10]="CommentNode",e[e.CommentThreadNode=11]="CommentThreadNode",e[e.TimelineActionContext=12]="TimelineActionContext",e[e.NotebookCellActionContext=13]="NotebookCellActionContext",e[e.NotebookActionContext=14]="NotebookActionContext",e[e.TerminalContext=15]="TerminalContext",e[e.TestItemContext=16]="TestItemContext",e[e.Date=17]="Date",e[e.TestMessageMenuArgs=18]="TestMessageMenuArgs",e[e.ChatViewContext=19]="ChatViewContext",e[e.LanguageModelToolResult=20]="LanguageModelToolResult",e[e.LanguageModelTextPart=21]="LanguageModelTextPart",e[e.LanguageModelThinkingPart=22]="LanguageModelThinkingPart",e[e.LanguageModelPromptTsxPart=23]="LanguageModelPromptTsxPart",e[e.LanguageModelDataPart=24]="LanguageModelDataPart",e[e.ChatSessionContext=25]="ChatSessionContext",e[e.ChatResponsePullRequestPart=26]="ChatResponsePullRequestPart"}(Dn||(Dn={}));var In=!1,xn=!1,Ln=!1,An=!1,Nn=!1,Fn=!1,On=!1,Rn="en",Mn=void 0,Pn=globalThis,Bn=void 0;void 0!==Pn.vscode&&void 0!==Pn.vscode.process?Bn=Pn.vscode.process:typeof process<"u"&&"string"==typeof(null===(g=process)||void 0===g||null===(g=g.versions)||void 0===g?void 0:g.node)&&(Bn=process);var Un,Hn="string"==typeof(null===(p=Bn)||void 0===p||null===(p=p.versions)||void 0===p?void 0:p.electron)&&"renderer"===(null===(f=Bn)||void 0===f?void 0:f.type);if("object"==typeof Bn){In="win32"===Bn.platform,xn="darwin"===Bn.platform,Ln="linux"===Bn.platform,Rn="en";let e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.VSCODE_NLS_CONFIG;if(e)try{var Wn;let t=JSON.parse(e);t.userLocale,t.osLocale,Rn=t.resolvedLanguage||"en",null===(Wn=t.languagePack)||void 0===Wn||Wn.translationsConfigFile}catch(R$){}An=!0}else"object"!=typeof navigator||Hn?console.error("Unable to resolve platform."):(In=(Mn=navigator.userAgent).indexOf("Windows")>=0,xn=Mn.indexOf("Macintosh")>=0,Fn=(Mn.indexOf("Macintosh")>=0||Mn.indexOf("iPad")>=0||Mn.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Ln=Mn.indexOf("Linux")>=0,On=(null===(m=Mn)||void 0===m?void 0:m.indexOf("Mobi"))>=0,Nn=!0,Rn=Ti()||"en",navigator.language.toLowerCase());!function(e){e[e.Web=0]="Web",e[e.Mac=1]="Mac",e[e.Linux=2]="Linux",e[e.Windows=3]="Windows"}(Un||(Un={}));var Vn=Un.Web;xn?Vn=Un.Mac:In?Vn=Un.Windows:Ln&&(Vn=Un.Linux);var zn,Kn=In,qn=xn,Gn=Ln,jn=An,Yn=Nn,Qn=Nn&&"function"==typeof Pn.importScripts?Pn.origin:void 0,$n=Fn,Xn=On,Zn=Vn,Jn=Mn,es=Rn;!function(e){e.value=function(){return es},e.isDefaultVariant=function(){return 2===es.length?"en"===es:es.length>=3&&("e"===es[0]&&"n"===es[1]&&"-"===es[2])},e.isDefault=function(){return"en"===es}}(zn||(zn={}));var ts,is="function"==typeof Pn.postMessage&&!Pn.importScripts,ns=(()=>{if(is){let e=[];Pn.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let i=0,n=e.length;i<n;i++){let n=e[i];if(n.id===t.data.vscodeScheduleAsyncWork)return e.splice(i,1),void n.callback()}});let t=0;return i=>{let n=++t;e.push({id:n,callback:i}),Pn.postMessage({vscodeScheduleAsyncWork:n},"*")}}return e=>setTimeout(e)})();!function(e){e[e.Windows=1]="Windows",e[e.Macintosh=2]="Macintosh",e[e.Linux=3]="Linux"}(ts||(ts={}));var ss=xn||Fn?ts.Macintosh:In?ts.Windows:ts.Linux,rs=!0,os=!1;var as=!!(Jn&&Jn.indexOf("Chrome")>=0),ls=!!(Jn&&Jn.indexOf("Firefox")>=0),hs=!!(!as&&Jn&&Jn.indexOf("Safari")>=0),ds=!!(Jn&&Jn.indexOf("Edg/")>=0);Jn&&Jn.indexOf("Android");var cs,us=globalThis.vscode;if(void 0!==us&&void 0!==us.process){let e=us.process;cs={get platform(){return e.platform},get arch(){return e.arch},get env(){return e.env},cwd:()=>e.cwd()}}else cs=typeof process<"u"&&"string"==typeof(null===(v=process)||void 0===v||null===(v=v.versions)||void 0===v?void 0:v.node)?{get platform(){return process.platform},get arch(){return process.arch},get env(){return{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}},cwd:()=>({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.VSCODE_CWD||process.cwd())}:{get platform(){return Kn?"win32":qn?"darwin":"linux"},get arch(){},get env(){return{}},cwd:()=>"/"};var gs=cs.cwd,ps=cs.env,fs=cs.platform;cs.arch;var ms=46,vs=47,_s=92,bs=58,Cs=class extends Error{constructor(e,t,i){let n;"string"==typeof t&&0===t.indexOf("not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be";let s='The "'.concat(e,'" ').concat(-1===e.indexOf(".")?"argument":"property"," ").concat(n," of type ").concat(t);s+=". Received type ".concat(typeof i),super(s),this.code="ERR_INVALID_ARG_TYPE"}};function ys(e,t){if("string"!=typeof e)throw new Cs(t,"string",e)}var ws="win32"===fs;function Ss(e){return e===vs||e===_s}function ks(e){return e===vs}function Es(e){return e>=65&&e<=90||e>=97&&e<=122}function Ds(e,t,i,n){let s="",r=0,o=-1,a=0,l=0;for(let h=0;h<=e.length;++h){if(h<e.length)l=e.charCodeAt(h);else{if(n(l))break;l=vs}if(n(l)){if(o!==h-1&&1!==a)if(2===a){if(s.length<2||2!==r||s.charCodeAt(s.length-1)!==ms||s.charCodeAt(s.length-2)!==ms){if(s.length>2){let e=s.lastIndexOf(i);-1===e?(s="",r=0):(s=s.slice(0,e),r=s.length-1-s.lastIndexOf(i)),o=h,a=0;continue}if(0!==s.length){s="",r=0,o=h,a=0;continue}}t&&(s+=s.length>0?"".concat(i,".."):"..",r=2)}else s.length>0?s+="".concat(i).concat(e.slice(o+1,h)):s=e.slice(o+1,h),r=h-o-1;o=h,a=0}else l===ms&&-1!==a?++a:a=-1}return s}function Ts(e,t){!function(e,t){if("object"!=typeof e||!e)throw new Cs(t,"Object",e)}(t,"pathObject");let i=t.dir||t.root,n=t.base||"".concat(t.name||"").concat(function(e){return e?"".concat("."===e[0]?"":".").concat(e):""}(t.ext));return i?i===t.root?"".concat(i).concat(n):"".concat(i).concat(e).concat(n):n}var Is={resolve(){let e="",t="",i=!1;for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];for(let o=s.length-1;o>=-1;o--){let n;if(o>=0){if(n=s[o],ys(n,"paths[".concat(o,"]")),0===n.length)continue}else 0===e.length?n=gs():(n=ps["=".concat(e)]||gs(),(void 0===n||n.slice(0,2).toLowerCase()!==e.toLowerCase()&&n.charCodeAt(2)===_s)&&(n="".concat(e,"\\")));let r=n.length,a=0,l="",h=!1,d=n.charCodeAt(0);if(1===r)Ss(d)&&(a=1,h=!0);else if(Ss(d))if(h=!0,Ss(n.charCodeAt(1))){let e=2,t=e;for(;e<r&&!Ss(n.charCodeAt(e));)e++;if(e<r&&e!==t){let i=n.slice(t,e);for(t=e;e<r&&Ss(n.charCodeAt(e));)e++;if(e<r&&e!==t){for(t=e;e<r&&!Ss(n.charCodeAt(e));)e++;(e===r||e!==t)&&(l="\\\\".concat(i,"\\").concat(n.slice(t,e)),a=e)}}}else a=1;else Es(d)&&n.charCodeAt(1)===bs&&(l=n.slice(0,2),a=2,r>2&&Ss(n.charCodeAt(2))&&(h=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(i){if(e.length>0)break}else if(t="".concat(n.slice(a),"\\").concat(t),i=h,h&&e.length>0)break}return t=Ds(t,!i,"\\",Ss),i?"".concat(e,"\\").concat(t):"".concat(e).concat(t)||"."},normalize(e){ys(e,"path");let t=e.length;if(0===t)return".";let i,n=0,s=!1,r=e.charCodeAt(0);if(1===t)return ks(r)?"\\":e;if(Ss(r))if(s=!0,Ss(e.charCodeAt(1))){let s=2,r=s;for(;s<t&&!Ss(e.charCodeAt(s));)s++;if(s<t&&s!==r){let o=e.slice(r,s);for(r=s;s<t&&Ss(e.charCodeAt(s));)s++;if(s<t&&s!==r){for(r=s;s<t&&!Ss(e.charCodeAt(s));)s++;if(s===t)return"\\\\".concat(o,"\\").concat(e.slice(r),"\\");s!==r&&(i="\\\\".concat(o,"\\").concat(e.slice(r,s)),n=s)}}}else n=1;else Es(r)&&e.charCodeAt(1)===bs&&(i=e.slice(0,2),n=2,t>2&&Ss(e.charCodeAt(2))&&(s=!0,n=3));let o=n<t?Ds(e.slice(n),!s,"\\",Ss):"";if(0===o.length&&!s&&(o="."),o.length>0&&Ss(e.charCodeAt(t-1))&&(o+="\\"),!s&&void 0===i&&e.includes(":")){if(o.length>=2&&Es(o.charCodeAt(0))&&o.charCodeAt(1)===bs)return".\\".concat(o);let i=e.indexOf(":");do{if(i===t-1||Ss(e.charCodeAt(i+1)))return".\\".concat(o)}while(-1!==(i=e.indexOf(":",i+1)))}return void 0===i?s?"\\".concat(o):o:s?"".concat(i,"\\").concat(o):"".concat(i).concat(o)},isAbsolute(e){ys(e,"path");let t=e.length;if(0===t)return!1;let i=e.charCodeAt(0);return Ss(i)||t>2&&Es(i)&&e.charCodeAt(1)===bs&&Ss(e.charCodeAt(2))},join(){if(0===arguments.length)return".";let e,t;for(let s=0;s<arguments.length;++s){let i=s<0||arguments.length<=s?void 0:arguments[s];ys(i,"path"),i.length>0&&(void 0===e?e=t=i:e+="\\".concat(i))}if(void 0===e)return".";let i=!0,n=0;if("string"==typeof t&&Ss(t.charCodeAt(0))){++n;let e=t.length;e>1&&Ss(t.charCodeAt(1))&&(++n,e>2&&(Ss(t.charCodeAt(2))?++n:i=!1))}if(i){for(;n<e.length&&Ss(e.charCodeAt(n));)n++;n>=2&&(e="\\".concat(e.slice(n)))}return Is.normalize(e)},relative(e,t){if(ys(e,"from"),ys(t,"to"),e===t)return"";let i=Is.resolve(e),n=Is.resolve(t);if(i===n||(e=i.toLowerCase())===(t=n.toLowerCase()))return"";if(i.length!==e.length||n.length!==t.length){let e=i.split("\\"),t=n.split("\\");""===e[e.length-1]&&e.pop(),""===t[t.length-1]&&t.pop();let s,r=e.length,o=t.length,a=r<o?r:o;for(s=0;s<a&&e[s].toLowerCase()===t[s].toLowerCase();s++);return 0===s?n:s===a?o>a?t.slice(s).join("\\"):r>a?"..\\".repeat(r-1-s)+"..":"":"..\\".repeat(r-s)+t.slice(s).join("\\")}let s=0;for(;s<e.length&&e.charCodeAt(s)===_s;)s++;let r=e.length;for(;r-1>s&&e.charCodeAt(r-1)===_s;)r--;let o=r-s,a=0;for(;a<t.length&&t.charCodeAt(a)===_s;)a++;let l=t.length;for(;l-1>a&&t.charCodeAt(l-1)===_s;)l--;let h=l-a,d=o<h?o:h,c=-1,u=0;for(;u<d;u++){let i=e.charCodeAt(s+u);if(i!==t.charCodeAt(a+u))break;i===_s&&(c=u)}if(u!==d){if(-1===c)return n}else{if(h>d){if(t.charCodeAt(a+u)===_s)return n.slice(a+u+1);if(2===u)return n.slice(a+u)}o>d&&(e.charCodeAt(s+u)===_s?c=u:2===u&&(c=3)),-1===c&&(c=0)}let g="";for(u=s+c+1;u<=r;++u)(u===r||e.charCodeAt(u)===_s)&&(g+=0===g.length?"..":"\\..");return a+=c,g.length>0?"".concat(g).concat(n.slice(a,l)):(n.charCodeAt(a)===_s&&++a,n.slice(a,l))},toNamespacedPath(e){if("string"!=typeof e||0===e.length)return e;let t=Is.resolve(e);if(t.length<=2)return e;if(t.charCodeAt(0)===_s){if(t.charCodeAt(1)===_s){let e=t.charCodeAt(2);if(63!==e&&e!==ms)return"\\\\?\\UNC\\".concat(t.slice(2))}}else if(Es(t.charCodeAt(0))&&t.charCodeAt(1)===bs&&t.charCodeAt(2)===_s)return"\\\\?\\".concat(t);return t},dirname(e){ys(e,"path");let t=e.length;if(0===t)return".";let i=-1,n=0,s=e.charCodeAt(0);if(1===t)return Ss(s)?e:".";if(Ss(s)){if(i=n=1,Ss(e.charCodeAt(1))){let s=2,r=s;for(;s<t&&!Ss(e.charCodeAt(s));)s++;if(s<t&&s!==r){for(r=s;s<t&&Ss(e.charCodeAt(s));)s++;if(s<t&&s!==r){for(r=s;s<t&&!Ss(e.charCodeAt(s));)s++;if(s===t)return e;s!==r&&(i=n=s+1)}}}}else Es(s)&&e.charCodeAt(1)===bs&&(i=t>2&&Ss(e.charCodeAt(2))?3:2,n=i);let r=-1,o=!0;for(let a=t-1;a>=n;--a)if(Ss(e.charCodeAt(a))){if(!o){r=a;break}}else o=!1;if(-1===r){if(-1===i)return".";r=i}return e.slice(0,r)},basename(e,t){void 0!==t&&ys(t,"suffix"),ys(e,"path");let i,n=0,s=-1,r=!0;if(e.length>=2&&Es(e.charCodeAt(0))&&e.charCodeAt(1)===bs&&(n=2),void 0!==t&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(i=e.length-1;i>=n;--i){let l=e.charCodeAt(i);if(Ss(l)){if(!r){n=i+1;break}}else-1===a&&(r=!1,a=i+1),o>=0&&(l===t.charCodeAt(o)?-1===--o&&(s=i):(o=-1,s=a))}return n===s?s=a:-1===s&&(s=e.length),e.slice(n,s)}for(i=e.length-1;i>=n;--i)if(Ss(e.charCodeAt(i))){if(!r){n=i+1;break}}else-1===s&&(r=!1,s=i+1);return-1===s?"":e.slice(n,s)},extname(e){ys(e,"path");let t=0,i=-1,n=0,s=-1,r=!0,o=0;e.length>=2&&e.charCodeAt(1)===bs&&Es(e.charCodeAt(0))&&(t=n=2);for(let a=e.length-1;a>=t;--a){let t=e.charCodeAt(a);if(Ss(t)){if(!r){n=a+1;break}}else-1===s&&(r=!1,s=a+1),t===ms?-1===i?i=a:1!==o&&(o=1):-1!==i&&(o=-1)}return-1===i||-1===s||0===o||1===o&&i===s-1&&i===n+1?"":e.slice(i,s)},format:Ts.bind(null,"\\"),parse(e){ys(e,"path");let t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;let i=e.length,n=0,s=e.charCodeAt(0);if(1===i)return Ss(s)?(t.root=t.dir=e,t):(t.base=t.name=e,t);if(Ss(s)){if(n=1,Ss(e.charCodeAt(1))){let t=2,s=t;for(;t<i&&!Ss(e.charCodeAt(t));)t++;if(t<i&&t!==s){for(s=t;t<i&&Ss(e.charCodeAt(t));)t++;if(t<i&&t!==s){for(s=t;t<i&&!Ss(e.charCodeAt(t));)t++;t===i?n=t:t!==s&&(n=t+1)}}}}else if(Es(s)&&e.charCodeAt(1)===bs){if(i<=2)return t.root=t.dir=e,t;if(n=2,Ss(e.charCodeAt(2))){if(3===i)return t.root=t.dir=e,t;n=3}}n>0&&(t.root=e.slice(0,n));let r=-1,o=n,a=-1,l=!0,h=e.length-1,d=0;for(;h>=n;--h)if(s=e.charCodeAt(h),Ss(s)){if(!l){o=h+1;break}}else-1===a&&(l=!1,a=h+1),s===ms?-1===r?r=h:1!==d&&(d=1):-1!==r&&(d=-1);return-1!==a&&(-1===r||0===d||1===d&&r===a-1&&r===o+1?t.base=t.name=e.slice(o,a):(t.name=e.slice(o,r),t.base=e.slice(o,a),t.ext=e.slice(r,a))),t.dir=o>0&&o!==n?e.slice(0,o-1):t.root,t},sep:"\\",delimiter:";",win32:null,posix:null},xs=(()=>{if(ws){let e=/\\/g;return()=>{let t=gs().replace(e,"/");return t.slice(t.indexOf("/"))}}return()=>gs()})(),Ls={resolve(){let e="",t=!1;for(let i=arguments.length-1;i>=0&&!t;i--){let n=i<0||arguments.length<=i?void 0:arguments[i];ys(n,"paths[".concat(i,"]")),0!==n.length&&(e="".concat(n,"/").concat(e),t=n.charCodeAt(0)===vs)}if(!t){let i=xs();e="".concat(i,"/").concat(e),t=i.charCodeAt(0)===vs}return e=Ds(e,!t,"/",ks),t?"/".concat(e):e.length>0?e:"."},normalize(e){if(ys(e,"path"),0===e.length)return".";let t=e.charCodeAt(0)===vs,i=e.charCodeAt(e.length-1)===vs;return 0===(e=Ds(e,!t,"/",ks)).length?t?"/":i?"./":".":(i&&(e+="/"),t?"/".concat(e):e)},isAbsolute:e=>(ys(e,"path"),e.length>0&&e.charCodeAt(0)===vs),join(){if(0===arguments.length)return".";let e=[];for(let t=0;t<arguments.length;++t){let i=t<0||arguments.length<=t?void 0:arguments[t];ys(i,"path"),i.length>0&&e.push(i)}return 0===e.length?".":Ls.normalize(e.join("/"))},relative(e,t){if(ys(e,"from"),ys(t,"to"),e===t||(e=Ls.resolve(e))===(t=Ls.resolve(t)))return"";let i=e.length,n=i-1,s=t.length-1,r=n<s?n:s,o=-1,a=0;for(;a<r;a++){let i=e.charCodeAt(1+a);if(i!==t.charCodeAt(1+a))break;i===vs&&(o=a)}if(a===r)if(s>r){if(t.charCodeAt(1+a)===vs)return t.slice(1+a+1);if(0===a)return t.slice(1+a)}else n>r&&(e.charCodeAt(1+a)===vs?o=a:0===a&&(o=0));let l="";for(a=1+o+1;a<=i;++a)(a===i||e.charCodeAt(a)===vs)&&(l+=0===l.length?"..":"/..");return"".concat(l).concat(t.slice(1+o))},toNamespacedPath:e=>e,dirname(e){if(ys(e,"path"),0===e.length)return".";let t=e.charCodeAt(0)===vs,i=-1,n=!0;for(let s=e.length-1;s>=1;--s)if(e.charCodeAt(s)===vs){if(!n){i=s;break}}else n=!1;return-1===i?t?"/":".":t&&1===i?"//":e.slice(0,i)},basename(e,t){void 0!==t&&ys(t,"suffix"),ys(e,"path");let i,n=0,s=-1,r=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(i=e.length-1;i>=0;--i){let l=e.charCodeAt(i);if(l===vs){if(!r){n=i+1;break}}else-1===a&&(r=!1,a=i+1),o>=0&&(l===t.charCodeAt(o)?-1===--o&&(s=i):(o=-1,s=a))}return n===s?s=a:-1===s&&(s=e.length),e.slice(n,s)}for(i=e.length-1;i>=0;--i)if(e.charCodeAt(i)===vs){if(!r){n=i+1;break}}else-1===s&&(r=!1,s=i+1);return-1===s?"":e.slice(n,s)},extname(e){ys(e,"path");let t=-1,i=0,n=-1,s=!0,r=0;for(let o=e.length-1;o>=0;--o){let a=e[o];if("/"!==a)-1===n&&(s=!1,n=o+1),"."===a?-1===t?t=o:1!==r&&(r=1):-1!==t&&(r=-1);else if(!s){i=o+1;break}}return-1===t||-1===n||0===r||1===r&&t===n-1&&t===i+1?"":e.slice(t,n)},format:Ts.bind(null,"/"),parse(e){ys(e,"path");let t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;let i,n=e.charCodeAt(0)===vs;n?(t.root="/",i=1):i=0;let s=-1,r=0,o=-1,a=!0,l=e.length-1,h=0;for(;l>=i;--l){let t=e.charCodeAt(l);if(t!==vs)-1===o&&(a=!1,o=l+1),t===ms?-1===s?s=l:1!==h&&(h=1):-1!==s&&(h=-1);else if(!a){r=l+1;break}}if(-1!==o){let i=0===r&&n?1:r;-1===s||0===h||1===h&&s===o-1&&s===r+1?t.base=t.name=e.slice(i,o):(t.name=e.slice(i,s),t.base=e.slice(i,o),t.ext=e.slice(s,o))}return r>0?t.dir=e.slice(0,r-1):n&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};Ls.win32=Is.win32=Is,Ls.posix=Is.posix=Ls;var As=ws?Is.normalize:Ls.normalize,Ns=ws?Is.isAbsolute:Ls.isAbsolute,Fs=ws?Is.join:Ls.join,Os=ws?Is.resolve:Ls.resolve,Rs=ws?Is.relative:Ls.relative,Ms=ws?Is.dirname:Ls.dirname,Ps=ws?Is.basename:Ls.basename,Bs=ws?Is.extname:Ls.extname;ws?Is.parse:Ls.parse;var Us=ws?Is.sep:Ls.sep,Hs=/^\w[\w\d+.-]*$/,Ws=/^\//,Vs=/^\/\//;var zs="",Ks="/",qs=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,Gs=class e{static isUri(t){return t instanceof e||!(!t||"object"!=typeof t)&&("string"==typeof t.authority&&"string"==typeof t.fragment&&"string"==typeof t.path&&"string"==typeof t.query&&"string"==typeof t.scheme&&"string"==typeof t.fsPath&&"function"==typeof t.with&&"function"==typeof t.toString)}constructor(e,t,i,n,s){let r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];"object"==typeof e?(this.scheme=e.scheme||zs,this.authority=e.authority||zs,this.path=e.path||zs,this.query=e.query||zs,this.fragment=e.fragment||zs):(this.scheme=function(e,t){return e||t?e:"file"}(e,r),this.authority=t||zs,this.path=function(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==Ks&&(t=Ks+t):t=Ks}return t}(this.scheme,i||zs),this.query=n||zs,this.fragment=s||zs,function(e,t){if(!e.scheme&&t)throw Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(e.authority,'", path: "').concat(e.path,'", query: "').concat(e.query,'", fragment: "').concat(e.fragment,'"}'));if(e.scheme&&!Hs.test(e.scheme))throw Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!Ws.test(e.path))throw Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(Vs.test(e.path))throw Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}(this,r))}get fsPath(){return Zs(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:i,path:n,query:s,fragment:r}=e;return void 0===t?t=this.scheme:null===t&&(t=zs),void 0===i?i=this.authority:null===i&&(i=zs),void 0===n?n=this.path:null===n&&(n=zs),void 0===s?s=this.query:null===s&&(s=zs),void 0===r?r=this.fragment:null===r&&(r=zs),t===this.scheme&&i===this.authority&&n===this.path&&s===this.query&&r===this.fragment?this:new Ys(t,i,n,s,r)}static parse(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=qs.exec(e);return i?new Ys(i[2]||zs,nr(i[4]||zs),nr(i[5]||zs),nr(i[7]||zs),nr(i[9]||zs),t):new Ys(zs,zs,zs,zs,zs)}static file(e){let t=zs;if(Kn&&(e=e.replace(/\\/g,Ks)),e[0]===Ks&&e[1]===Ks){let i=e.indexOf(Ks,2);-1===i?(t=e.substring(2),e=Ks):(t=e.substring(2,i),e=e.substring(i)||Ks)}return new Ys("file",t,e,zs,zs)}static from(e,t){return new Ys(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(t){if(!t.path)throw Error("[UriError]: cannot call joinPath on URI without path");let i;for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];return i=Kn&&"file"===t.scheme?e.file(Is.join(Zs(t,!0),...s)).path:Ls.join(t.path,...s),t.with({path:i})}toString(){return Js(this,arguments.length>0&&void 0!==arguments[0]&&arguments[0])}toJSON(){return this}static revive(t){if(t){if(t instanceof e)return t;{var i,n;let e=new Ys(t);return e._formatted=null!==(i=t.external)&&void 0!==i?i:null,e._fsPath=t._sep===js&&null!==(n=t.fsPath)&&void 0!==n?n:null,e}}return t}[Symbol.for("debug.description")](){return"URI(".concat(this.toString(),")")}},js=Kn?1:void 0,Ys=class extends Gs{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=Zs(this,!1)),this._fsPath}toString(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?Js(this,!0):(this._formatted||(this._formatted=Js(this,!1)),this._formatted)}toJSON(){let e={$mid:Dn.Uri};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=js),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},Qs={[En.Colon]:"%3A",[En.Slash]:"%2F",[En.QuestionMark]:"%3F",[En.Hash]:"%23",[En.OpenSquareBracket]:"%5B",[En.CloseSquareBracket]:"%5D",[En.AtSign]:"%40",[En.ExclamationMark]:"%21",[En.DollarSign]:"%24",[En.Ampersand]:"%26",[En.SingleQuote]:"%27",[En.OpenParen]:"%28",[En.CloseParen]:"%29",[En.Asterisk]:"%2A",[En.Plus]:"%2B",[En.Comma]:"%2C",[En.Semicolon]:"%3B",[En.Equals]:"%3D",[En.Space]:"%20"};function $s(e,t,i){let n,s=-1;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);if(o>=En.a&&o<=En.z||o>=En.A&&o<=En.Z||o>=En.Digit0&&o<=En.Digit9||o===En.Dash||o===En.Period||o===En.Underline||o===En.Tilde||t&&o===En.Slash||i&&o===En.OpenSquareBracket||i&&o===En.CloseSquareBracket||i&&o===En.Colon)-1!==s&&(n+=encodeURIComponent(e.substring(s,r)),s=-1),void 0!==n&&(n+=e.charAt(r));else{void 0===n&&(n=e.substr(0,r));let t=Qs[o];void 0===t?-1===s&&(s=r):(-1!==s&&(n+=encodeURIComponent(e.substring(s,r)),s=-1),n+=t)}}return-1!==s&&(n+=encodeURIComponent(e.substring(s))),void 0===n?e:n}function Xs(e){let t;for(let i=0;i<e.length;i++){let n=e.charCodeAt(i);n===En.Hash||n===En.QuestionMark?(void 0===t&&(t=e.substr(0,i)),t+=Qs[n]):void 0!==t&&(t+=e[i])}return void 0===t?e:t}function Zs(e,t){let i;return i=e.authority&&e.path.length>1&&"file"===e.scheme?"//".concat(e.authority).concat(e.path):e.path.charCodeAt(0)===En.Slash&&(e.path.charCodeAt(1)>=En.A&&e.path.charCodeAt(1)<=En.Z||e.path.charCodeAt(1)>=En.a&&e.path.charCodeAt(1)<=En.z)&&e.path.charCodeAt(2)===En.Colon?t?e.path.substr(1):e.path[1].toLowerCase()+e.path.substr(2):e.path,Kn&&(i=i.replace(/\//g,"\\")),i}function Js(e,t){let i=t?Xs:$s,n="",{scheme:s,authority:r,path:o,query:a,fragment:l}=e;if(s&&(n+=s,n+=":"),(r||"file"===s)&&(n+=Ks,n+=Ks),r){let e=r.indexOf("@");if(-1!==e){let t=r.substr(0,e);r=r.substr(e+1),e=t.lastIndexOf(":"),-1===e?n+=i(t,!1,!1):(n+=i(t.substr(0,e),!1,!1),n+=":",n+=i(t.substr(e+1),!1,!0)),n+="@"}r=r.toLowerCase(),e=r.lastIndexOf(":"),-1===e?n+=i(r,!1,!0):(n+=i(r.substr(0,e),!1,!0),n+=r.substr(e))}if(o){if(o.length>=3&&o.charCodeAt(0)===En.Slash&&o.charCodeAt(2)===En.Colon){let e=o.charCodeAt(1);e>=En.A&&e<=En.Z&&(o="/".concat(String.fromCharCode(e+32),":").concat(o.substr(3)))}else if(o.length>=2&&o.charCodeAt(1)===En.Colon){let e=o.charCodeAt(0);e>=En.A&&e<=En.Z&&(o="".concat(String.fromCharCode(e+32),":").concat(o.substr(2)))}n+=i(o,!0,!1)}return a&&(n+="?",n+=i(a,!1,!1)),l&&(n+="#",n+=t?l:$s(l,!1,!1)),n}function er(e){try{return decodeURIComponent(e)}catch(t){return e.length>3?e.substr(0,3)+er(e.substr(3)):e}}var tr,ir=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function nr(e){return e.match(ir)?e.replace(ir,e=>er(e)):e}function sr(e,t){let i=Object.create(null);for(let n in e)rr(i,n,e[n],t);return i}function rr(e,t,i,n){let s=t.split("."),r=s.pop(),o=e;for(let l=0;l<s.length;l++){let e=s[l],i=o[e];switch(typeof i){case"undefined":i=o[e]=Object.create(null);break;case"object":if(null===i)return void n("Ignoring ".concat(t," as ").concat(s.slice(0,l+1).join(".")," is null"));break;default:return void n("Ignoring ".concat(t," as ").concat(s.slice(0,l+1).join(".")," is ").concat(JSON.stringify(i)))}o=i}if("object"==typeof o&&o)try{o[r]=i}catch(a){n("Ignoring ".concat(t," as ").concat(s.join(".")," is ").concat(JSON.stringify(o)))}else n("Ignoring ".concat(t," as ").concat(s.join(".")," is ").concat(JSON.stringify(o)))}function or(e,t){ar(e,t.split("."))}function ar(e,t){if(!e)return;let i=e,n=t.shift();if(0!==t.length){if(-1!==Object.keys(i).indexOf(n)){let e=i[n];"object"==typeof e&&!Array.isArray(e)&&(ar(e,t),0===Object.keys(e).length&&delete i[n])}}else delete i[n]}function lr(e,t,i){let n=function(e,t){let i=e;for(let n of t){if("object"!=typeof i||!i)return;i=i[n]}return i}(e,t.split("."));return void 0===n?i:n}function hr(e){return e.replace(/^\[/,"").replace(/]$/g,"").replace(/\]\[/g,", ")}!function(e){e[e.APPLICATION=1]="APPLICATION",e[e.USER=2]="USER",e[e.USER_LOCAL=3]="USER_LOCAL",e[e.USER_REMOTE=4]="USER_REMOTE",e[e.WORKSPACE=5]="WORKSPACE",e[e.WORKSPACE_FOLDER=6]="WORKSPACE_FOLDER",e[e.DEFAULT=7]="DEFAULT",e[e.MEMORY=8]="MEMORY"}(tr||(tr={}));var dr,cr,ur,gr,pr,fr=fn("configurationService");function mr(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=0,n=e.length,s="",r=0,o=cr.Unknown,a=dr.None;function l(t){let n=0,s=0;for(;n<t;){let t=e.charCodeAt(i);if(t>=pr._0&&t<=pr._9)s=16*s+t-pr._0;else if(t>=pr.A&&t<=pr.F)s=16*s+t-pr.A+10;else{if(!(t>=pr.a&&t<=pr.f))break;s=16*s+t-pr.a+10}i++,n++}return n<t&&(s=-1),s}function h(){if(s="",a=dr.None,r=i,i>=n)return r=n,o=cr.EOF;let t=e.charCodeAt(i);if(vr(t)){do{i++,s+=String.fromCharCode(t),t=e.charCodeAt(i)}while(vr(t));return o=cr.Trivia}if(_r(t))return i++,s+=String.fromCharCode(t),t===pr.carriageReturn&&e.charCodeAt(i)===pr.lineFeed&&(i++,s+="\n"),o=cr.LineBreakTrivia;switch(t){case pr.openBrace:return i++,o=cr.OpenBraceToken;case pr.closeBrace:return i++,o=cr.CloseBraceToken;case pr.openBracket:return i++,o=cr.OpenBracketToken;case pr.closeBracket:return i++,o=cr.CloseBracketToken;case pr.colon:return i++,o=cr.ColonToken;case pr.comma:return i++,o=cr.CommaToken;case pr.doubleQuote:return i++,s=function(){let t="",s=i;for(;;){if(i>=n){t+=e.substring(s,i),a=dr.UnexpectedEndOfString;break}let r=e.charCodeAt(i);if(r===pr.doubleQuote){t+=e.substring(s,i),i++;break}if(r!==pr.backslash){if(r>=0&&r<=31){if(_r(r)){t+=e.substring(s,i),a=dr.UnexpectedEndOfString;break}a=dr.InvalidCharacter}i++}else{if(t+=e.substring(s,i),i++,i>=n){a=dr.UnexpectedEndOfString;break}switch(e.charCodeAt(i++)){case pr.doubleQuote:t+='"';break;case pr.backslash:t+="\\";break;case pr.slash:t+="/";break;case pr.b:t+="\b";break;case pr.f:t+="\f";break;case pr.n:t+="\n";break;case pr.r:t+="\r";break;case pr.t:t+="\t";break;case pr.u:{let e=l(4);e>=0?t+=String.fromCharCode(e):a=dr.InvalidUnicode;break}default:a=dr.InvalidEscapeCharacter}s=i}}return t}(),o=cr.StringLiteral;case pr.slash:{let r=i-1;if(e.charCodeAt(i+1)===pr.slash){for(i+=2;i<n&&!_r(e.charCodeAt(i));)i++;return s=e.substring(r,i),o=cr.LineCommentTrivia}if(e.charCodeAt(i+1)===pr.asterisk){i+=2;let t=n-1,l=!1;for(;i<t;){if(e.charCodeAt(i)===pr.asterisk&&e.charCodeAt(i+1)===pr.slash){i+=2,l=!0;break}i++}return l||(i++,a=dr.UnexpectedEndOfComment),s=e.substring(r,i),o=cr.BlockCommentTrivia}return s+=String.fromCharCode(t),i++,o=cr.Unknown}case pr.minus:if(s+=String.fromCharCode(t),i++,i===n||!br(e.charCodeAt(i)))return o=cr.Unknown;case pr._0:case pr._1:case pr._2:case pr._3:case pr._4:case pr._5:case pr._6:case pr._7:case pr._8:case pr._9:return s+=function(){let t=i;if(e.charCodeAt(i)===pr._0)i++;else for(i++;i<e.length&&br(e.charCodeAt(i));)i++;if(i<e.length&&e.charCodeAt(i)===pr.dot){if(i++,!(i<e.length&&br(e.charCodeAt(i))))return a=dr.UnexpectedEndOfNumber,e.substring(t,i);for(i++;i<e.length&&br(e.charCodeAt(i));)i++}let n=i;if(i<e.length&&(e.charCodeAt(i)===pr.E||e.charCodeAt(i)===pr.e))if(i++,(i<e.length&&e.charCodeAt(i)===pr.plus||e.charCodeAt(i)===pr.minus)&&i++,i<e.length&&br(e.charCodeAt(i))){for(i++;i<e.length&&br(e.charCodeAt(i));)i++;n=i}else a=dr.UnexpectedEndOfNumber;return e.substring(t,n)}(),o=cr.NumericLiteral;default:for(;i<n&&d(t);)i++,t=e.charCodeAt(i);if(r!==i){switch(s=e.substring(r,i),s){case"true":return o=cr.TrueKeyword;case"false":return o=cr.FalseKeyword;case"null":return o=cr.NullKeyword}return o=cr.Unknown}return s+=String.fromCharCode(t),i++,o=cr.Unknown}}function d(e){if(vr(e)||_r(e))return!1;switch(e){case pr.closeBrace:case pr.closeBracket:case pr.openBrace:case pr.openBracket:case pr.doubleQuote:case pr.colon:case pr.comma:case pr.slash:return!1}return!0}return{setPosition:function(e){i=e,s="",r=0,o=cr.Unknown,a=dr.None},getPosition:()=>i,scan:t?function(){let e;do{e=h()}while(e>=cr.LineCommentTrivia&&e<=cr.Trivia);return e}:h,getToken:()=>o,getTokenValue:()=>s,getTokenOffset:()=>r,getTokenLength:()=>i-r,getTokenError:()=>a}}function vr(e){return e===pr.space||e===pr.tab||e===pr.verticalTab||e===pr.formFeed||e===pr.nonBreakingSpace||e===pr.ogham||e>=pr.enQuad&&e<=pr.zeroWidthSpace||e===pr.narrowNoBreakSpace||e===pr.mathematicalSpace||e===pr.ideographicSpace||e===pr.byteOrderMark}function _r(e){return e===pr.lineFeed||e===pr.carriageReturn||e===pr.lineSeparator||e===pr.paragraphSeparator}function br(e){return e>=pr._0&&e<=pr._9}function Cr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gr.DEFAULT,n=null,s=[],r=[];function o(e){Array.isArray(s)?s.push(e):null!==n&&(s[n]=e)}return yr(e,{onObjectBegin:()=>{let e={};o(e),r.push(s),s=e,n=null},onObjectProperty:e=>{n=e},onObjectEnd:()=>{s=r.pop()},onArrayBegin:()=>{let e=[];o(e),r.push(s),s=e,n=null},onArrayEnd:()=>{s=r.pop()},onLiteralValue:o,onError:(e,i,n)=>{t.push({error:e,offset:i,length:n})}},i),s[0]}function yr(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gr.DEFAULT,n=mr(e,!1);function s(e){return e?()=>e(n.getTokenOffset(),n.getTokenLength()):()=>!0}function r(e){return e?t=>e(t,n.getTokenOffset(),n.getTokenLength()):()=>!0}let o=s(t.onObjectBegin),a=r(t.onObjectProperty),l=s(t.onObjectEnd),h=s(t.onArrayBegin),d=s(t.onArrayEnd),c=r(t.onLiteralValue),u=r(t.onSeparator),g=s(t.onComment),p=r(t.onError),f=i&&i.disallowComments,m=i&&i.allowTrailingComma;function v(){for(;;){let e=n.scan();switch(n.getTokenError()){case dr.InvalidUnicode:_(ur.InvalidUnicode);break;case dr.InvalidEscapeCharacter:_(ur.InvalidEscapeCharacter);break;case dr.UnexpectedEndOfNumber:_(ur.UnexpectedEndOfNumber);break;case dr.UnexpectedEndOfComment:f||_(ur.UnexpectedEndOfComment);break;case dr.UnexpectedEndOfString:_(ur.UnexpectedEndOfString);break;case dr.InvalidCharacter:_(ur.InvalidCharacter)}switch(e){case cr.LineCommentTrivia:case cr.BlockCommentTrivia:f?_(ur.InvalidCommentToken):g();break;case cr.Unknown:_(ur.InvalidSymbol);break;case cr.Trivia:case cr.LineBreakTrivia:break;default:return e}}}function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(p(e),t.length+i.length>0){let e=n.getToken();for(;e!==cr.EOF;){if(-1!==t.indexOf(e)){v();break}if(-1!==i.indexOf(e))break;e=v()}}}function b(e){let t=n.getTokenValue();return e?c(t):a(t),v(),!0}function C(){return n.getToken()===cr.StringLiteral?(b(!1),n.getToken()===cr.ColonToken?(u(":"),v(),y()||_(ur.ValueExpected,[],[cr.CloseBraceToken,cr.CommaToken])):_(ur.ColonExpected,[],[cr.CloseBraceToken,cr.CommaToken]),!0):(_(ur.PropertyNameExpected,[],[cr.CloseBraceToken,cr.CommaToken]),!1)}function y(){switch(n.getToken()){case cr.OpenBracketToken:return function(){h(),v();let e=!1;for(;n.getToken()!==cr.CloseBracketToken&&n.getToken()!==cr.EOF;){if(n.getToken()===cr.CommaToken){if(e||_(ur.ValueExpected,[],[]),u(","),v(),n.getToken()===cr.CloseBracketToken&&m)break}else e&&_(ur.CommaExpected,[],[]);y()||_(ur.ValueExpected,[],[cr.CloseBracketToken,cr.CommaToken]),e=!0}return d(),n.getToken()===cr.CloseBracketToken?v():_(ur.CloseBracketExpected,[cr.CloseBracketToken],[]),!0}();case cr.OpenBraceToken:return function(){o(),v();let e=!1;for(;n.getToken()!==cr.CloseBraceToken&&n.getToken()!==cr.EOF;){if(n.getToken()===cr.CommaToken){if(e||_(ur.ValueExpected,[],[]),u(","),v(),n.getToken()===cr.CloseBraceToken&&m)break}else e&&_(ur.CommaExpected,[],[]);C()||_(ur.ValueExpected,[],[cr.CloseBraceToken,cr.CommaToken]),e=!0}return l(),n.getToken()===cr.CloseBraceToken?v():_(ur.CloseBraceExpected,[cr.CloseBraceToken],[]),!0}();case cr.StringLiteral:return b(!0);default:return function(){switch(n.getToken()){case cr.NumericLiteral:{let t=0;try{t=JSON.parse(n.getTokenValue()),"number"!=typeof t&&(_(ur.InvalidNumberFormat),t=0)}catch(e){_(ur.InvalidNumberFormat)}c(t);break}case cr.NullKeyword:c(null);break;case cr.TrueKeyword:c(!0);break;case cr.FalseKeyword:c(!1);break;default:return!1}return v(),!0}()}}return v(),n.getToken()===cr.EOF?!!i.allowEmptyContent||(_(ur.ValueExpected,[],[]),!1):y()?(n.getToken()!==cr.EOF&&_(ur.EndOfFileExpected,[],[]),!0):(_(ur.ValueExpected,[],[]),!1)}function wr(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":return e?Array.isArray(e)?"array":"object":"null";default:return"null"}}function Sr(e,t){let i=10**t;return Math.round(e*i)/i}!function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"}(dr||(dr={})),function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"}(cr||(cr={})),function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"}(ur||(ur={})),function(e){e.DEFAULT={allowTrailingComma:!0}}(gr||(gr={})),function(e){e[e.nullCharacter=0]="nullCharacter",e[e.maxAsciiCharacter=127]="maxAsciiCharacter",e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.lineSeparator=8232]="lineSeparator",e[e.paragraphSeparator=8233]="paragraphSeparator",e[e.nextLine=133]="nextLine",e[e.space=32]="space",e[e.nonBreakingSpace=160]="nonBreakingSpace",e[e.enQuad=8192]="enQuad",e[e.emQuad=8193]="emQuad",e[e.enSpace=8194]="enSpace",e[e.emSpace=8195]="emSpace",e[e.threePerEmSpace=8196]="threePerEmSpace",e[e.fourPerEmSpace=8197]="fourPerEmSpace",e[e.sixPerEmSpace=8198]="sixPerEmSpace",e[e.figureSpace=8199]="figureSpace",e[e.punctuationSpace=8200]="punctuationSpace",e[e.thinSpace=8201]="thinSpace",e[e.hairSpace=8202]="hairSpace",e[e.zeroWidthSpace=8203]="zeroWidthSpace",e[e.narrowNoBreakSpace=8239]="narrowNoBreakSpace",e[e.ideographicSpace=12288]="ideographicSpace",e[e.mathematicalSpace=8287]="mathematicalSpace",e[e.ogham=5760]="ogham",e[e._=95]="_",e[e.$=36]="$",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.ampersand=38]="ampersand",e[e.asterisk=42]="asterisk",e[e.at=64]="at",e[e.backslash=92]="backslash",e[e.bar=124]="bar",e[e.caret=94]="caret",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.closeParen=41]="closeParen",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.equals=61]="equals",e[e.exclamation=33]="exclamation",e[e.greaterThan=62]="greaterThan",e[e.lessThan=60]="lessThan",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.openParen=40]="openParen",e[e.percent=37]="percent",e[e.plus=43]="plus",e[e.question=63]="question",e[e.semicolon=59]="semicolon",e[e.singleQuote=39]="singleQuote",e[e.slash=47]="slash",e[e.tilde=126]="tilde",e[e.backspace=8]="backspace",e[e.formFeed=12]="formFeed",e[e.byteOrderMark=65279]="byteOrderMark",e[e.tab=9]="tab",e[e.verticalTab=11]="verticalTab"}(pr||(pr={}));var kr,Er=class{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this._rgbaBrand=void 0,this.r=0|Math.min(255,Math.max(0,e)),this.g=0|Math.min(255,Math.max(0,t)),this.b=0|Math.min(255,Math.max(0,i)),this.a=Sr(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}},Dr=class e{constructor(e,t,i,n){this._hslaBrand=void 0,this.h=0|Math.max(Math.min(360,e),0),this.s=Sr(Math.max(Math.min(1,t),0),3),this.l=Sr(Math.max(Math.min(1,i),0),3),this.a=Sr(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(t){let i=t.r/255,n=t.g/255,s=t.b/255,r=t.a,o=Math.max(i,n,s),a=Math.min(i,n,s),l=0,h=0,d=(a+o)/2,c=o-a;if(c>0){switch(h=Math.min(d<=.5?c/(2*d):c/(2-2*d),1),o){case i:l=(n-s)/c+(n<s?6:0);break;case n:l=(s-i)/c+2;break;case s:l=(i-n)/c+4}l*=60,l=Math.round(l)}return new e(l,h,d,r)}static _hue2rgb(e,t,i){return i<0&&(i+=1),i>1&&--i,i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}static toRGBA(t){let i,n,s,r=t.h/360,{s:o,l:a,a:l}=t;if(0===o)i=n=s=a;else{let t=a<.5?a*(1+o):a+o-a*o,l=2*a-t;i=e._hue2rgb(l,t,r+1/3),n=e._hue2rgb(l,t,r),s=e._hue2rgb(l,t,r-1/3)}return new Er(Math.round(255*i),Math.round(255*n),Math.round(255*s),l)}},Tr=class e{constructor(e,t,i,n){this._hsvaBrand=void 0,this.h=0|Math.max(Math.min(360,e),0),this.s=Sr(Math.max(Math.min(1,t),0),3),this.v=Sr(Math.max(Math.min(1,i),0),3),this.a=Sr(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(t){let i,n=t.r/255,s=t.g/255,r=t.b/255,o=Math.max(n,s,r),a=o-Math.min(n,s,r),l=0===o?0:a/o;return i=0===a?0:o===n?((s-r)/a%6+6)%6:o===s?(r-n)/a+2:(n-s)/a+4,new e(Math.round(60*i),l,o,t.a)}static toRGBA(e){let{h:t,s:i,v:n,a:s}=e,r=n*i,o=r*(1-Math.abs(t/60%2-1)),a=n-r,[l,h,d]=[0,0,0];return t<60?(l=r,h=o):t<120?(l=o,h=r):t<180?(h=r,d=o):t<240?(h=o,d=r):t<300?(l=o,d=r):t<=360&&(l=r,d=o),l=Math.round(255*(l+a)),h=Math.round(255*(h+a)),d=Math.round(255*(d+a)),new Er(l,h,d,s)}},Ir=(_=class e{static fromHex(t){return e.Format.CSS.parseHex(t)||e.red}static equals(e,t){return!e&&!t||!(!e||!t)&&e.equals(t)}get hsla(){return this._hsla?this._hsla:Dr.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:Tr.fromRGBA(this.rgba)}constructor(e){if(!e)throw Error("Color needs a value");if(e instanceof Er)this.rgba=e;else if(e instanceof Dr)this._hsla=e,this.rgba=Dr.toRGBA(e);else{if(!(e instanceof Tr))throw Error("Invalid color ctor argument");this._hsva=e,this.rgba=Tr.toRGBA(e)}}equals(e){return!!e&&Er.equals(this.rgba,e.rgba)&&Dr.equals(this.hsla,e.hsla)&&Tr.equals(this.hsva,e.hsva)}getRelativeLuminance(){return Sr(.2126*e._relativeLuminanceForComponent(this.rgba.r)+.7152*e._relativeLuminanceForComponent(this.rgba.g)+.0722*e._relativeLuminanceForComponent(this.rgba.b),4)}reduceRelativeLuminace(t,i){let{r:n,g:s,b:r}=t.rgba,o=this.getContrastRatio(t);for(;o<i&&(n>0||s>0||r>0);)n-=Math.max(0,Math.ceil(.1*n)),s-=Math.max(0,Math.ceil(.1*s)),r-=Math.max(0,Math.ceil(.1*r)),o=this.getContrastRatio(new e(new Er(n,s,r)));return new e(new Er(n,s,r))}increaseRelativeLuminace(t,i){let{r:n,g:s,b:r}=t.rgba,o=this.getContrastRatio(t);for(;o<i&&(n<255||s<255||r<255);)n=Math.min(255,n+Math.ceil(.1*(255-n))),s=Math.min(255,s+Math.ceil(.1*(255-s))),r=Math.min(255,r+Math.ceil(.1*(255-r))),o=this.getContrastRatio(new e(new Er(n,s,r)));return new e(new Er(n,s,r))}static _relativeLuminanceForComponent(e){let t=e/255;return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}getContrastRatio(e){let t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t>i?(t+.05)/(i+.05):(i+.05)/(t+.05)}isDarker(){return(299*this.rgba.r+587*this.rgba.g+114*this.rgba.b)/1e3<128}isLighter(){return(299*this.rgba.r+587*this.rgba.g+114*this.rgba.b)/1e3>=128}isLighterThan(e){return this.getRelativeLuminance()>e.getRelativeLuminance()}isDarkerThan(e){return this.getRelativeLuminance()<e.getRelativeLuminance()}ensureConstrast(e,t){let i=this.getRelativeLuminance(),n=e.getRelativeLuminance();if(this.getContrastRatio(e)<t){if(n<i){let i=this.reduceRelativeLuminace(e,t),n=this.getContrastRatio(i);if(n<t){let s=this.increaseRelativeLuminace(e,t);return n>this.getContrastRatio(s)?i:s}return i}let s=this.increaseRelativeLuminace(e,t),r=this.getContrastRatio(s);if(r<t){let i=this.reduceRelativeLuminace(e,t);return r>this.getContrastRatio(i)?s:i}return s}return e}lighten(t){return new e(new Dr(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*t,this.hsla.a))}darken(t){return new e(new Dr(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*t,this.hsla.a))}transparent(t){let{r:i,g:n,b:s,a:r}=this.rgba;return new e(new Er(i,n,s,r*t))}isTransparent(){return 0===this.rgba.a}isOpaque(){return 1===this.rgba.a}opposite(){return new e(new Er(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}blend(t){let i=t.rgba,n=this.rgba.a,s=i.a,r=n+s*(1-n);return r<1e-6?e.transparent:new e(new Er(this.rgba.r*n/r+i.r*s*(1-n)/r,this.rgba.g*n/r+i.g*s*(1-n)/r,this.rgba.b*n/r+i.b*s*(1-n)/r,r))}mix(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=Math.min(Math.max(i,0),1),s=this.rgba,r=t.rgba;return new e(new Er(s.r+(r.r-s.r)*n,s.g+(r.g-s.g)*n,s.b+(r.b-s.b)*n,s.a+(r.a-s.a)*n))}makeOpaque(t){if(this.isOpaque()||1!==t.rgba.a)return this;let{r:i,g:n,b:s,a:r}=this.rgba;return new e(new Er(t.rgba.r-r*(t.rgba.r-i),t.rgba.g-r*(t.rgba.g-n),t.rgba.b-r*(t.rgba.b-s),1))}flatten(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];let s=i.reduceRight((t,i)=>e._flatten(i,t));return e._flatten(this,s)}static _flatten(t,i){let n=1-t.rgba.a;return new e(new Er(n*i.rgba.r+t.rgba.a*t.rgba.r,n*i.rgba.g+t.rgba.a*t.rgba.g,n*i.rgba.b+t.rgba.a*t.rgba.b))}toString(){return this._toString||(this._toString=e.Format.CSS.format(this)),this._toString}toNumber32Bit(){return this._toNumber32Bit||(this._toNumber32Bit=(this.rgba.r<<24|this.rgba.g<<16|this.rgba.b<<8|255*this.rgba.a)>>>0),this._toNumber32Bit}static getLighterColor(e,t,i){if(e.isLighterThan(t))return e;i||(i=.5);let n=e.getRelativeLuminance(),s=t.getRelativeLuminance();return i=i*(s-n)/s,e.lighten(i)}static getDarkerColor(e,t,i){if(e.isDarkerThan(t))return e;i||(i=.5);let n=e.getRelativeLuminance();return i=i*(n-t.getRelativeLuminance())/n,e.darken(i)}},{_:_.white=new _(new Er(255,255,255,1))},{_:_.black=new _(new Er(0,0,0,1))},{_:_.red=new _(new Er(255,0,0,1))},{_:_.blue=new _(new Er(0,0,255,1))},{_:_.green=new _(new Er(0,255,0,1))},{_:_.cyan=new _(new Er(0,255,255,1))},{_:_.lightgrey=new _(new Er(211,211,211,1))},{_:_.transparent=new _(new Er(0,0,0,0))},_);function xr(e,t){let i=Object.create(null);for(let n of e){let e=t(n),s=i[e];s||(s=i[e]=[]),s.push(n)}return i}!function(e){var t;(function(t){function i(e){let t=e.toString(16);return 2===t.length?t:"0"+t}function n(t){let i=t.length;if(0===i||t.charCodeAt(0)!==En.Hash)return null;if(7===i)return new e(new Er(16*s(t.charCodeAt(1))+s(t.charCodeAt(2)),16*s(t.charCodeAt(3))+s(t.charCodeAt(4)),16*s(t.charCodeAt(5))+s(t.charCodeAt(6)),1));if(9===i)return new e(new Er(16*s(t.charCodeAt(1))+s(t.charCodeAt(2)),16*s(t.charCodeAt(3))+s(t.charCodeAt(4)),16*s(t.charCodeAt(5))+s(t.charCodeAt(6)),(16*s(t.charCodeAt(7))+s(t.charCodeAt(8)))/255));if(4===i){let i=s(t.charCodeAt(1)),n=s(t.charCodeAt(2)),r=s(t.charCodeAt(3));return new e(new Er(16*i+i,16*n+n,16*r+r))}if(5===i){let i=s(t.charCodeAt(1)),n=s(t.charCodeAt(2)),r=s(t.charCodeAt(3)),o=s(t.charCodeAt(4));return new e(new Er(16*i+i,16*n+n,16*r+r,(16*o+o)/255))}return null}function s(e){switch(e){case En.Digit0:return 0;case En.Digit1:return 1;case En.Digit2:return 2;case En.Digit3:return 3;case En.Digit4:return 4;case En.Digit5:return 5;case En.Digit6:return 6;case En.Digit7:return 7;case En.Digit8:return 8;case En.Digit9:return 9;case En.a:case En.A:return 10;case En.b:case En.B:return 11;case En.c:case En.C:return 12;case En.d:case En.D:return 13;case En.e:case En.E:return 14;case En.f:case En.F:return 15}return 0}t.formatRGB=function(t){return 1===t.rgba.a?"rgb(".concat(t.rgba.r,", ").concat(t.rgba.g,", ").concat(t.rgba.b,")"):e.Format.CSS.formatRGBA(t)},t.formatRGBA=function(e){return"rgba(".concat(e.rgba.r,", ").concat(e.rgba.g,", ").concat(e.rgba.b,", ").concat(+e.rgba.a.toFixed(2),")")},t.formatHSL=function(t){return 1===t.hsla.a?"hsl(".concat(t.hsla.h,", ").concat(Math.round(100*t.hsla.s),"%, ").concat(Math.round(100*t.hsla.l),"%)"):e.Format.CSS.formatHSLA(t)},t.formatHSLA=function(e){return"hsla(".concat(e.hsla.h,", ").concat(Math.round(100*e.hsla.s),"%, ").concat(Math.round(100*e.hsla.l),"%, ").concat(e.hsla.a.toFixed(2),")")},t.formatHex=function(e){return"#".concat(i(e.rgba.r)).concat(i(e.rgba.g)).concat(i(e.rgba.b))},t.formatHexA=function(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&1===t.rgba.a?e.Format.CSS.formatHex(t):"#".concat(i(t.rgba.r)).concat(i(t.rgba.g)).concat(i(t.rgba.b)).concat(i(Math.round(255*t.rgba.a)))},t.format=function(t){return t.isOpaque()?e.Format.CSS.formatHex(t):e.Format.CSS.formatRGBA(t)},t.parse=function(t){if("transparent"===t)return e.transparent;if(t.startsWith("#"))return n(t);if(t.startsWith("rgba(")){var i,s,r,a,l,h,d,c;let n=t.match((0,o.A)(/rgba\(((?:\+|-)?\d+), *((?:\+|-)?\d+), *((?:\+|-)?\d+), *((?:\+|-)?\d+(\.\d+)?)\)/,{r:1,g:2,b:3,a:4}));if(!n)throw Error("Invalid color format "+t);return new e(new Er(parseInt(null!==(i=null===(s=n.groups)||void 0===s?void 0:s.r)&&void 0!==i?i:"0"),parseInt(null!==(r=null===(a=n.groups)||void 0===a?void 0:a.g)&&void 0!==r?r:"0"),parseInt(null!==(l=null===(h=n.groups)||void 0===h?void 0:h.b)&&void 0!==l?l:"0"),parseFloat(null!==(d=null===(c=n.groups)||void 0===c?void 0:c.a)&&void 0!==d?d:"0")))}if(t.startsWith("rgb(")){var u,g,p,f,m,v;let i=t.match((0,o.A)(/rgb\(((?:\+|-)?\d+), *((?:\+|-)?\d+), *((?:\+|-)?\d+)\)/,{r:1,g:2,b:3}));if(!i)throw Error("Invalid color format "+t);return new e(new Er(parseInt(null!==(u=null===(g=i.groups)||void 0===g?void 0:g.r)&&void 0!==u?u:"0"),parseInt(null!==(p=null===(f=i.groups)||void 0===f?void 0:f.g)&&void 0!==p?p:"0"),parseInt(null!==(m=null===(v=i.groups)||void 0===v?void 0:v.b)&&void 0!==m?m:"0")))}return function(t){switch(t){case"aliceblue":return new e(new Er(240,248,255,1));case"antiquewhite":return new e(new Er(250,235,215,1));case"aqua":case"cyan":return new e(new Er(0,255,255,1));case"aquamarine":return new e(new Er(127,255,212,1));case"azure":return new e(new Er(240,255,255,1));case"beige":return new e(new Er(245,245,220,1));case"bisque":return new e(new Er(255,228,196,1));case"black":return new e(new Er(0,0,0,1));case"blanchedalmond":return new e(new Er(255,235,205,1));case"blue":return new e(new Er(0,0,255,1));case"blueviolet":return new e(new Er(138,43,226,1));case"brown":return new e(new Er(165,42,42,1));case"burlywood":return new e(new Er(222,184,135,1));case"cadetblue":return new e(new Er(95,158,160,1));case"chartreuse":return new e(new Er(127,255,0,1));case"chocolate":return new e(new Er(210,105,30,1));case"coral":return new e(new Er(255,127,80,1));case"cornflowerblue":return new e(new Er(100,149,237,1));case"cornsilk":return new e(new Er(255,248,220,1));case"crimson":return new e(new Er(220,20,60,1));case"darkblue":return new e(new Er(0,0,139,1));case"darkcyan":return new e(new Er(0,139,139,1));case"darkgoldenrod":return new e(new Er(184,134,11,1));case"darkgray":case"darkgrey":return new e(new Er(169,169,169,1));case"darkgreen":return new e(new Er(0,100,0,1));case"darkkhaki":return new e(new Er(189,183,107,1));case"darkmagenta":return new e(new Er(139,0,139,1));case"darkolivegreen":return new e(new Er(85,107,47,1));case"darkorange":return new e(new Er(255,140,0,1));case"darkorchid":return new e(new Er(153,50,204,1));case"darkred":return new e(new Er(139,0,0,1));case"darksalmon":return new e(new Er(233,150,122,1));case"darkseagreen":return new e(new Er(143,188,143,1));case"darkslateblue":return new e(new Er(72,61,139,1));case"darkslategray":case"darkslategrey":return new e(new Er(47,79,79,1));case"darkturquoise":return new e(new Er(0,206,209,1));case"darkviolet":return new e(new Er(148,0,211,1));case"deeppink":return new e(new Er(255,20,147,1));case"deepskyblue":return new e(new Er(0,191,255,1));case"dimgray":case"dimgrey":return new e(new Er(105,105,105,1));case"dodgerblue":return new e(new Er(30,144,255,1));case"firebrick":return new e(new Er(178,34,34,1));case"floralwhite":return new e(new Er(255,250,240,1));case"forestgreen":return new e(new Er(34,139,34,1));case"fuchsia":case"magenta":return new e(new Er(255,0,255,1));case"gainsboro":return new e(new Er(220,220,220,1));case"ghostwhite":return new e(new Er(248,248,255,1));case"gold":return new e(new Er(255,215,0,1));case"goldenrod":return new e(new Er(218,165,32,1));case"gray":case"grey":return new e(new Er(128,128,128,1));case"green":return new e(new Er(0,128,0,1));case"greenyellow":return new e(new Er(173,255,47,1));case"honeydew":return new e(new Er(240,255,240,1));case"hotpink":return new e(new Er(255,105,180,1));case"indianred":return new e(new Er(205,92,92,1));case"indigo":return new e(new Er(75,0,130,1));case"ivory":return new e(new Er(255,255,240,1));case"khaki":return new e(new Er(240,230,140,1));case"lavender":return new e(new Er(230,230,250,1));case"lavenderblush":return new e(new Er(255,240,245,1));case"lawngreen":return new e(new Er(124,252,0,1));case"lemonchiffon":return new e(new Er(255,250,205,1));case"lightblue":return new e(new Er(173,216,230,1));case"lightcoral":return new e(new Er(240,128,128,1));case"lightcyan":return new e(new Er(224,255,255,1));case"lightgoldenrodyellow":return new e(new Er(250,250,210,1));case"lightgray":case"lightgrey":return new e(new Er(211,211,211,1));case"lightgreen":return new e(new Er(144,238,144,1));case"lightpink":return new e(new Er(255,182,193,1));case"lightsalmon":return new e(new Er(255,160,122,1));case"lightseagreen":return new e(new Er(32,178,170,1));case"lightskyblue":return new e(new Er(135,206,250,1));case"lightslategray":case"lightslategrey":return new e(new Er(119,136,153,1));case"lightsteelblue":return new e(new Er(176,196,222,1));case"lightyellow":return new e(new Er(255,255,224,1));case"lime":return new e(new Er(0,255,0,1));case"limegreen":return new e(new Er(50,205,50,1));case"linen":return new e(new Er(250,240,230,1));case"maroon":return new e(new Er(128,0,0,1));case"mediumaquamarine":return new e(new Er(102,205,170,1));case"mediumblue":return new e(new Er(0,0,205,1));case"mediumorchid":return new e(new Er(186,85,211,1));case"mediumpurple":return new e(new Er(147,112,219,1));case"mediumseagreen":return new e(new Er(60,179,113,1));case"mediumslateblue":return new e(new Er(123,104,238,1));case"mediumspringgreen":return new e(new Er(0,250,154,1));case"mediumturquoise":return new e(new Er(72,209,204,1));case"mediumvioletred":return new e(new Er(199,21,133,1));case"midnightblue":return new e(new Er(25,25,112,1));case"mintcream":return new e(new Er(245,255,250,1));case"mistyrose":return new e(new Er(255,228,225,1));case"moccasin":return new e(new Er(255,228,181,1));case"navajowhite":return new e(new Er(255,222,173,1));case"navy":return new e(new Er(0,0,128,1));case"oldlace":return new e(new Er(253,245,230,1));case"olive":return new e(new Er(128,128,0,1));case"olivedrab":return new e(new Er(107,142,35,1));case"orange":return new e(new Er(255,165,0,1));case"orangered":return new e(new Er(255,69,0,1));case"orchid":return new e(new Er(218,112,214,1));case"palegoldenrod":return new e(new Er(238,232,170,1));case"palegreen":return new e(new Er(152,251,152,1));case"paleturquoise":return new e(new Er(175,238,238,1));case"palevioletred":return new e(new Er(219,112,147,1));case"papayawhip":return new e(new Er(255,239,213,1));case"peachpuff":return new e(new Er(255,218,185,1));case"peru":return new e(new Er(205,133,63,1));case"pink":return new e(new Er(255,192,203,1));case"plum":return new e(new Er(221,160,221,1));case"powderblue":return new e(new Er(176,224,230,1));case"purple":return new e(new Er(128,0,128,1));case"rebeccapurple":return new e(new Er(102,51,153,1));case"red":return new e(new Er(255,0,0,1));case"rosybrown":return new e(new Er(188,143,143,1));case"royalblue":return new e(new Er(65,105,225,1));case"saddlebrown":return new e(new Er(139,69,19,1));case"salmon":return new e(new Er(250,128,114,1));case"sandybrown":return new e(new Er(244,164,96,1));case"seagreen":return new e(new Er(46,139,87,1));case"seashell":return new e(new Er(255,245,238,1));case"sienna":return new e(new Er(160,82,45,1));case"silver":return new e(new Er(192,192,192,1));case"skyblue":return new e(new Er(135,206,235,1));case"slateblue":return new e(new Er(106,90,205,1));case"slategray":case"slategrey":return new e(new Er(112,128,144,1));case"snow":return new e(new Er(255,250,250,1));case"springgreen":return new e(new Er(0,255,127,1));case"steelblue":return new e(new Er(70,130,180,1));case"tan":return new e(new Er(210,180,140,1));case"teal":return new e(new Er(0,128,128,1));case"thistle":return new e(new Er(216,191,216,1));case"tomato":return new e(new Er(255,99,71,1));case"turquoise":return new e(new Er(64,224,208,1));case"violet":return new e(new Er(238,130,238,1));case"wheat":return new e(new Er(245,222,179,1));case"white":return new e(new Er(255,255,255,1));case"whitesmoke":return new e(new Er(245,245,245,1));case"yellow":return new e(new Er(255,255,0,1));case"yellowgreen":return new e(new Er(154,205,50,1));default:return null}}(t)},t.parseHex=n})((t=e.Format||(e.Format={})).CSS||(t.CSS={}))}(Ir||(Ir={}));var Lr=(b=class{constructor(e,t){this.toKey=t,this._map=new Map,this[kr]="SetWithKey";for(let i of e)this.add(i)}get size(){return this._map.size}add(e){let t=this.toKey(e);return this._map.set(t,e),this}delete(e){return this._map.delete(this.toKey(e))}has(e){return this._map.has(this.toKey(e))}*entries(){for(let e of this._map.values())yield[e,e]}keys(){return this.values()}*values(){for(let e of this._map.values())yield e}clear(){this._map.clear()}forEach(e,t){this._map.forEach(i=>e.call(t,i,i,this))}[Symbol.iterator](){return this.values()}},{_:kr=Symbol.toStringTag},b);function Ar(e,t){let i=function(e,t){for(let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length-1;i>=0;i--){if(t(e[i],i))return i}return-1}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length-1);if(-1!==i)return e[i]}function Nr(e,t){let i=Fr(e,t);return-1===i?void 0:e[i]}function Fr(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;for(;i<n;){let s=Math.floor((i+n)/2);t(e[s])?i=s+1:n=s}return i-1}function Or(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;for(;i<n;){let s=Math.floor((i+n)/2);t(e[s])?n=s:i=s+1}return i}C=class e{constructor(e){this._array=e,this._findLastMonotonousLastIdx=0}findLastMonotonous(t){if(e.assertInvariants){if(this._prevFindLastPredicate)for(let e of this._array)if(this._prevFindLastPredicate(e)&&!t(e))throw Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.");this._prevFindLastPredicate=t}let i=Fr(this._array,t,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=i+1,-1===i?void 0:this._array[i]}};var Rr;C.assertInvariants=!1;function Mr(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e===t;if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(let n=0,s=e.length;n<s;n++)if(!i(e[n],t[n]))return!1;return!0}function Pr(e){return e.filter(e=>!!e)}function Br(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e,i=new Set;return e.filter(e=>{let n=t(e);return!i.has(n)&&(i.add(n),!0)})}function Ur(e,t){let i="number"==typeof t?e:0;"number"==typeof t?i=e:(i=0,t=e);let n=[];if(i<=t)for(let s=i;s<t;s++)n.push(s);else for(let s=i;s>t;s--)n.push(s);return n}function Hr(e,t,i){let n=e.slice(0,t),s=e.slice(t);return n.concat(i,s)}function Wr(e,t){let i;if("number"==typeof t){let e=t;i=()=>{let t=179426549*Math.sin(e++);return t-Math.floor(t)}}else i=Math.random;for(let n=e.length-1;n>0;--n){let t=Math.floor(i()*(n+1)),s=e[n];e[n]=e[t],e[t]=s}}function Vr(e,t){let i=e.indexOf(t);i>-1&&(e.splice(i,1),e.unshift(t))}function zr(e,t){let i=e.indexOf(t);i>-1&&(e.splice(i,1),e.push(t))}function Kr(e,t){for(let i of t)e.push(i)}function qr(e,t,i){let n=jr(e,t),s=e.length,r=i.length;e.length=s+r;for(let o=s-1;o>=n;o--)e[o+r]=e[o];for(let o=0;o<r;o++)e[o+n]=i[o]}function Gr(e,t,i,n){let s=jr(e,t),r=e.splice(s,i);return void 0===r&&(r=[]),qr(e,s,n),r}function jr(e,t){return t<0?Math.max(t+e.length,0):Math.min(t,e.length)}function Yr(e,t){return(i,n)=>t(e(i),e(n))}!function(e){e.isLessThan=function(e){return e<0},e.isLessThanOrEqual=function(e){return e<=0},e.isGreaterThan=function(e){return e>0},e.isNeitherLessOrGreaterThan=function(e){return 0===e},e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0}(Rr||(Rr={}));var Qr,$r,Xr,Zr=(e,t)=>e-t,Jr=class{constructor(e){this.firstIdx=0,this.items=e,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;let i=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,i}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;let i=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,i}peek(){if(0!==this.length)return this.items[this.firstIdx]}peekLast(){if(0!==this.length)return this.items[this.lastIdx]}dequeue(){let e=this.items[this.firstIdx];return this.firstIdx++,e}removeLast(){let e=this.items[this.lastIdx];return this.lastIdx--,e}takeCount(e){let t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}},eo=(y=class e{constructor(e){this.iterate=e}forEach(e){this.iterate(t=>(e(t),!0))}toArray(){let e=[];return this.iterate(t=>(e.push(t),!0)),e}filter(t){return new e(e=>this.iterate(i=>!t(i)||e(i)))}map(t){return new e(e=>this.iterate(i=>e(t(i))))}some(e){let t=!1;return this.iterate(i=>(t=e(i),!t)),t}findFirst(e){let t;return this.iterate(i=>!e(i)||(t=i,!1)),t}findLast(e){let t;return this.iterate(i=>(e(i)&&(t=i),!0)),t}findLastMaxBy(e){let t,i=!0;return this.iterate(n=>((i||Rr.isGreaterThan(e(n,t)))&&(i=!1,t=n),!0)),t}},{_:y.empty=new y(e=>{})},y);function to(e,t,i){let n=e.get(t);return void 0===n&&(n=i,e.set(t,n)),n}var io=class{constructor(e,t){this.uri=e,this.value=t}};var no,so=(Qr=Symbol.toStringTag,c=Symbol.iterator,w=class e{constructor(t,i){if(this[Qr]="ResourceMap",t instanceof e)this.map=new Map(t.map),this.toKey=null!==i&&void 0!==i?i:e.defaultToKey;else if(function(e){return Array.isArray(e)}(t)){this.map=new Map,this.toKey=null!==i&&void 0!==i?i:e.defaultToKey;for(let[e,i]of t)this.set(e,i)}else this.map=new Map,this.toKey=null!==t&&void 0!==t?t:e.defaultToKey}set(e,t){return this.map.set(this.toKey(e),new io(e,t)),this}get(e){var t;return null===(t=this.map.get(this.toKey(e)))||void 0===t?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){void 0!==t&&(e=e.bind(t));for(let[i,n]of this.map)e(n.value,n.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[c](){for(let[,e]of this.map)yield[e.uri,e.value]}},{_:w.defaultToKey=e=>e.toString()},w),ro=class{constructor(e,t){this[$r]="ResourceSet",e&&"function"!=typeof e?(this._map=new so(t),e.forEach(this.add,this)):this._map=new so(e)}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,t){this._map.forEach((i,n)=>e.call(t,n,n,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[($r=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}};!function(e){e[e.None=0]="None",e[e.AsOld=1]="AsOld",e[e.AsNew=2]="AsNew"}(no||(no={}));var oo,ao=class{constructor(){this[Xr]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return null===(e=this._head)||void 0===e?void 0:e.value}get last(){var e;return null===(e=this._tail)||void 0===e?void 0:e.value}has(e){return this._map.has(e)}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:no.None,i=this._map.get(e);if(i)return t!==no.None&&this.touch(i,t),i.value}set(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:no.None,n=this._map.get(e);if(n)n.value=t,i!==no.None&&this.touch(n,i);else{switch(n={key:e,value:t,next:void 0,previous:void 0},i){case no.None:this.addItemLast(n);break;case no.AsOld:this.addItemFirst(n);break;case no.AsNew:default:this.addItemLast(n)}this._map.set(e,n),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let i=this._state,n=this._head;for(;n;){if(t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),this._state!==i)throw Error("LinkedMap got modified during iteration.");n=n.next}}keys(){let e=this,t=this._state,i=this._head,n={[Symbol.iterator]:()=>n,next(){if(e._state!==t)throw Error("LinkedMap got modified during iteration.");if(i){let e={value:i.key,done:!1};return i=i.next,e}return{value:void 0,done:!0}}};return n}values(){let e=this,t=this._state,i=this._head,n={[Symbol.iterator]:()=>n,next(){if(e._state!==t)throw Error("LinkedMap got modified during iteration.");if(i){let e={value:i.value,done:!1};return i=i.next,e}return{value:void 0,done:!0}}};return n}entries(){let e=this,t=this._state,i=this._head,n={[Symbol.iterator]:()=>n,next(){if(e._state!==t)throw Error("LinkedMap got modified during iteration.");if(i){let e={value:[i.key,i.value],done:!1};return i=i.next,e}return{value:void 0,done:!0}}};return n}[(Xr=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.next,i--;this._head=t,this._size=i,t&&(t.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._tail,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.previous,i--;this._tail=t,this._size=i,t&&(t.next=void 0),this._state++}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e,this._state++}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,i=e.previous;if(!t||!i)throw Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw Error("Invalid list");if(t===no.AsOld||t===no.AsNew)if(t===no.AsOld){if(e===this._head)return;let t=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(t.previous=i,i.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===no.AsNew){if(e===this._tail)return;let t=e.next,i=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=i,i.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}toJSON(){let e=[];return this.forEach((t,i)=>{e.push([i,t])}),e}fromJSON(e){this.clear();for(let[t,i]of e)this.set(t,i)}},lo=class extends ao{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:no.AsNew;return super.get(e,t)}peek(e){return super.get(e,no.None)}set(e,t){return super.set(e,t,no.AsNew),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}},ho=class extends lo{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}trim(e){this.trimOld(e)}set(e,t){return super.set(e,t),this.checkTrim(),this}},co=class{constructor(e){if(this._m1=new Map,this._m2=new Map,e)for(let[t,i]of e)this.set(t,i)}clear(){this._m1.clear(),this._m2.clear()}set(e,t){this._m1.set(e,t),this._m2.set(t,e)}get(e){return this._m1.get(e)}getKey(e){return this._m2.get(e)}delete(e){let t=this._m1.get(e);return void 0!==t&&(this._m1.delete(e),this._m2.delete(t),!0)}forEach(e,t){this._m1.forEach((i,n)=>{e.call(t,i,n,this)})}keys(){return this._m1.keys()}values(){return this._m1.values()}},uo=class{constructor(){this.map=new Map}add(e,t){let i=this.map.get(e);i||(i=new Set,this.map.set(e,i)),i.add(t)}delete(e,t){let i=this.map.get(e);i&&(i.delete(t),0===i.size&&this.map.delete(e))}forEach(e,t){let i=this.map.get(e);i&&i.forEach(t)}get(e){return this.map.get(e)||new Set}};!function(e){function t(e){return!!e&&"object"==typeof e&&"function"==typeof e[Symbol.iterator]}e.is=t;let i=Object.freeze([]);function*n(e){yield e}e.empty=function(){return i},e.single=n,e.wrap=function(e){return t(e)?e:n(e)},e.from=function(e){return null!==e&&void 0!==e?e:i},e.reverse=function*(e){for(let t=e.length-1;t>=0;t--)yield e[t]},e.isEmpty=function(e){return!e||!0===e[Symbol.iterator]().next().done},e.first=function(e){return e[Symbol.iterator]().next().value},e.some=function(e,t){let i=0;for(let n of e)if(t(n,i++))return!0;return!1},e.every=function(e,t){let i=0;for(let n of e)if(!t(n,i++))return!1;return!0},e.find=function(e,t){for(let i of e)if(t(i))return i},e.filter=function*(e,t){for(let i of e)t(i)&&(yield i)},e.map=function*(e,t){let i=0;for(let n of e)yield t(n,i++)},e.flatMap=function*(e,t){let i=0;for(let n of e)yield*t(n,i++)},e.concat=function*(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(let n of t)en(n)?yield*n:yield n},e.reduce=function(e,t,i){let n=i;for(let s of e)n=t(n,s);return n},e.length=function(e){let t=0;for(let i of e)t++;return t},e.slice=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length;return function*(){for(t<-e.length&&(t=0),t<0&&(t+=e.length),i<0?i+=e.length:i>e.length&&(i=e.length);t<i;t++)yield e[t]}()},e.consume=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=[];if(0===i)return[n,t];let s=t[Symbol.iterator]();for(let r=0;r<i;r++){let t=s.next();if(t.done)return[n,e.empty()];n.push(t.value)}return[n,{[Symbol.iterator]:()=>s}]},e.asyncToArray=async function(e){let t=[];var i,n=!1,s=!1;try{for(var r,o=(0,a.A)(e);n=!(r=await o.next()).done;n=!1){let e=r.value;t.push(e)}}catch(l){s=!0,i=l}finally{try{n&&null!=o.return&&await o.return()}finally{if(s)throw i}}return t},e.asyncToArrayFlat=async function(e){let t=[];var i,n=!1,s=!1;try{for(var r,o=(0,a.A)(e);n=!(r=await o.next()).done;n=!1){let e=r.value;t=t.concat(e)}}catch(l){s=!0,i=l}finally{try{n&&null!=o.return&&await o.return()}finally{if(s)throw i}}return t}}(oo||(oo={}));S=class e{constructor(){this.livingDisposables=new Map}getDisposableData(t){let i=this.livingDisposables.get(t);return i||(i={parent:null,source:null,isSingleton:!1,value:t,idx:e.idx++},this.livingDisposables.set(t,i)),i}trackDisposable(e){let t=this.getDisposableData(e);t.source||(t.source=Error().stack)}setParent(e,t){this.getDisposableData(e).parent=t}markAsDisposed(e){this.livingDisposables.delete(e)}markAsSingleton(e){this.getDisposableData(e).isSingleton=!0}getRootParent(e,t){let i=t.get(e);if(i)return i;let n=e.parent?this.getRootParent(this.getDisposableData(e.parent),t):e;return t.set(e,n),n}getTrackedDisposables(){let e=new Map;return[...this.livingDisposables.entries()].filter(t=>{let[,i]=t;return null!==i.source&&!this.getRootParent(i,e).isSingleton}).flatMap(e=>{let[t]=e;return t})}computeLeakingDisposables(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1?arguments[1]:void 0;if(i)e=i;else{let t=new Map,i=[...this.livingDisposables.values()].filter(e=>null!==e.source&&!this.getRootParent(e,t).isSingleton);if(0===i.length)return;let n=new Set(i.map(e=>e.value));if(e=i.filter(e=>!(e.parent&&n.has(e.parent))),0===e.length)throw Error("There are cyclic diposable chains!")}if(!e)return;function n(e){let t=e.source.split("\n").map(e=>e.trim().replace("at ","")).filter(e=>""!==e);return function(e,t){for(;e.length>0&&t.some(t=>"string"==typeof t?t===e[0]:e[0].match(t));)e.shift()}(t,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),t.reverse()}let s=new uo;for(let a of e){let e=n(a);for(let t=0;t<=e.length;t++)s.add(e.slice(0,t).join("\n"),a)}e.sort(Yr(e=>e.idx,Zr));let r="",o=0;for(let a of e.slice(0,t)){o++;let t=n(a),i=[];for(let r=0;r<t.length;r++){let o=t[r];o="(shared with ".concat(s.get(t.slice(0,r+1).join("\n")).size,"/").concat(e.length," leaks) at ").concat(o);let a=xr([...s.get(t.slice(0,r).join("\n"))].map(e=>n(e)[r]),e=>e);delete a[t[r]];for(let[e,t]of Object.entries(a))t&&i.unshift("    - stacktraces of ".concat(t.length," other leaks continue with ").concat(e));i.unshift(o)}r+="\n\n\n==================== Leaking disposable ".concat(o,"/").concat(e.length,": ").concat(a.value.constructor.name," ====================\n").concat(i.join("\n"),"\n============================================================\n\n")}return e.length>t&&(r+="\n\n\n... and ".concat(e.length-t," more leaking disposables\n\n")),{leaks:e,details:r}}};S.idx=0;function go(e){return"object"==typeof e&&!!e&&"function"==typeof e.dispose&&0===e.dispose.length}function po(e){if(oo.is(e)){let t=[];for(let i of e)if(i)try{i.dispose()}catch(e){t.push(e)}if(1===t.length)throw t[0];if(t.length>1)throw AggregateError(t,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}if(e)return e.dispose(),e}function fo(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];let n=vo(()=>po(t));return n}var mo=class{constructor(e){this._isDisposed=!1,this._fn=e}dispose(){if(!this._isDisposed){if(!this._fn)throw Error("Unbound disposable context: Need to use an arrow function to preserve the value of this");this._isDisposed=!0,this._fn()}}};function vo(e){return new mo(e)}var _o,bo=(k=class e{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(0!==this._toDispose.size)try{po(this._toDispose)}finally{this._toDispose.clear()}}add(t){if(!t||t===Co.None)return t;if(t===this)throw Error("Cannot register a disposable on itself!");return this._isDisposed?e.DISABLE_DISPOSED_WARNING||console.warn(Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(t),t}delete(e){if(e){if(e===this)throw Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.delete(e)}assertNotDisposed(){this._isDisposed&&Ri(new qi("Object disposed"))}},{_:k.DISABLE_DISPOSED_WARNING=!1},k),Co=(E=class{constructor(){this._store=new bo,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw Error("Cannot register a disposable on itself!");return this._store.add(e)}},{_:E.None=Object.freeze({dispose(){}})},E),yo=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||(null!==(t=this._value)&&void 0!==t&&t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,null!==(e=this._value)&&void 0!==e&&e.dispose(),this._value=void 0}clearAndLeak(){let e=this._value;return this._value=void 0,e}},wo=class{constructor(e){this.object=e}dispose(){}},So=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;this._isDisposed=!1,this._store=e}dispose(){this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{po(this._store.values())}finally{this._store.clear()}}has(e){return this._store.has(e)}get size(){return this._store.size}get(e){return this._store.get(e)}set(e,t){var i;let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._isDisposed&&console.warn(Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),n||null!==(i=this._store.get(e))&&void 0!==i&&i.dispose(),this._store.set(e,t)}deleteAndDispose(e){var t;null!==(t=this._store.get(e))&&void 0!==t&&t.dispose(),this._store.delete(e)}deleteAndLeak(e){let t=this._store.get(e);return this._store.delete(e),t}keys(){return this._store.keys()}values(){return this._store.values()}[Symbol.iterator](){return this._store[Symbol.iterator]()}},ko=(D=class e{constructor(t){this.element=t,this.next=e.Undefined,this.prev=e.Undefined}},{_:D.Undefined=new D(void 0)},D),Eo=class{constructor(){this._first=ko.Undefined,this._last=ko.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===ko.Undefined}clear(){let e=this._first;for(;e!==ko.Undefined;){let t=e.next;e.prev=ko.Undefined,e.next=ko.Undefined,e=t}this._first=ko.Undefined,this._last=ko.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){let i=new ko(e);if(this._first===ko.Undefined)this._first=i,this._last=i;else if(t){let e=this._last;this._last=i,i.prev=e,e.next=i}else{let e=this._first;this._first=i,i.next=e,e.prev=i}this._size+=1;let n=!1;return()=>{n||(n=!0,this._remove(i))}}shift(){if(this._first!==ko.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==ko.Undefined){let e=this._last.element;return this._remove(this._last),e}}peek(){if(this._last!==ko.Undefined)return this._last.element}_remove(e){if(e.prev!==ko.Undefined&&e.next!==ko.Undefined){let t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===ko.Undefined&&e.next===ko.Undefined?(this._first=ko.Undefined,this._last=ko.Undefined):e.next===ko.Undefined?(this._last=this._last.prev,this._last.next=ko.Undefined):e.prev===ko.Undefined&&(this._first=this._first.next,this._first.prev=ko.Undefined);--this._size}*[Symbol.iterator](){let e=this._first;for(;e!==ko.Undefined;)yield e.element,e=e.next}},Do=globalThis.performance.now.bind(globalThis.performance),To=class e{static create(t){return new e(t)}constructor(e){this._now=!1===e?Date.now:Do,this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return-1===this._stopTime?this._now()-this._startTime:this._stopTime-this._startTime}};!function(e){function t(e){return function(t){let i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=!1;return i=e(e=>{if(!s)return i?i.dispose():s=!0,t.call(n,e)},null,arguments.length>2?arguments[2]:void 0),s&&i.dispose(),i}}function i(e,t,i){return s(function(i){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e(e=>i.call(n,t(e)),null,arguments.length>2?arguments[2]:void 0)},i)}function n(e,t,i){return s(function(i){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e(e=>t(e)&&i.call(n,e),null,arguments.length>2?arguments[2]:void 0)},i)}function s(e,t){let i,n=new Ro({onWillAddFirstListener(){i=e(n.fire,n)},onDidRemoveLastListener(){var e;null===(e=i)||void 0===e||e.dispose()}});return null!==t&&void 0!==t&&t.add(n),n.event}function r(e,t){let i,n,s,r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],h=arguments.length>6?arguments[6]:void 0,d=0,c=new Ro({leakWarningThreshold:arguments.length>5?arguments[5]:void 0,onWillAddFirstListener(){i=e(e=>{d++,n=t(n,e),a&&!s&&(c.fire(n),n=void 0),r=()=>{let e=n;n=void 0,s=void 0,(!a||d>1)&&c.fire(e),d=0},"number"==typeof o?(s&&clearTimeout(s),s=setTimeout(r,o)):void 0===s&&(s=null,queueMicrotask(r))})},onWillRemoveListener(){var e;l&&d>0&&(null===(e=r)||void 0===e||e())},onDidRemoveLastListener(){r=void 0,i.dispose()}});return null!==h&&void 0!==h&&h.add(c),c.event}e.None=()=>Co.None,e.defer=function(e,t){return r(e,()=>{},0,void 0,!0,void 0,t)},e.once=t,e.onceIf=function(t,i){return e.once(e.filter(t,i))},e.map=i,e.forEach=function(e,t,i){return s(function(i){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e(e=>{t(e),i.call(n,e)},null,arguments.length>2?arguments[2]:void 0)},i)},e.filter=n,e.signal=function(e){return e},e.any=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;return function(e,t){return t instanceof Array?t.push(e):t&&t.add(e),e}(fo(...t.map(t=>t(t=>e.call(i,t)))),n)}},e.reduce=function(e,t,n,s){let r=n;return i(e,e=>(r=t(r,e),r),s)},e.debounce=r,e.accumulate=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return e.debounce(t,(e,t)=>e?(e.push(t),e):[t],i,void 0,!0,void 0,n)},e.latch=function(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,t)=>e===t,s=!0;return n(e,e=>{let n=s||!i(e,t);return s=!1,t=e,n},arguments.length>2?arguments[2]:void 0)},e.split=function(t,i,n){return[e.filter(t,i,n),e.filter(t,e=>!i(e),n)]},e.buffer=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>3?arguments[3]:void 0,n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]).slice(),s=e(e=>{n?n.push(e):o.fire(e)});i&&i.add(s);let r=()=>{var e;null!==(e=n)&&void 0!==e&&e.forEach(e=>o.fire(e)),n=null},o=new Ro({onWillAddFirstListener(){s||(s=e(e=>o.fire(e)),i&&i.add(s))},onDidAddFirstListener(){n&&(t?setTimeout(r):r())},onDidRemoveLastListener(){s&&s.dispose(),s=null}});return i&&i.add(o),o.event},e.chain=function(e,t){return(i,n,s)=>{let r=t(new a);return e(function(e){let t=r.evaluate(e);t!==o&&i.call(n,t)},void 0,s)}};let o=Symbol("HaltChainable");class a{constructor(){this.steps=[]}map(e){return this.steps.push(e),this}forEach(e){return this.steps.push(t=>(e(t),t)),this}filter(e){return this.steps.push(t=>e(t)?t:o),this}reduce(e,t){let i=t;return this.steps.push(t=>(i=e(i,t),i)),this}latch(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(e,t)=>e===t,i=!0;return this.steps.push(n=>{let s=i||!t(n,e);return i=!1,e=n,s?n:o}),this}evaluate(e){for(let t of this.steps)if((e=t(e))===o)break;return e}}e.fromNodeEventEmitter=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>e,n=function(){return s.fire(i(...arguments))},s=new Ro({onWillAddFirstListener:()=>e.on(t,n),onDidRemoveLastListener:()=>e.removeListener(t,n)});return s.event},e.fromDOMEventEmitter=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>e,n=function(){return s.fire(i(...arguments))},s=new Ro({onWillAddFirstListener:()=>e.addEventListener(t,n),onDidRemoveLastListener:()=>e.removeEventListener(t,n)});return s.event},e.toPromise=function(e,i){let n,s,r=new Promise(r=>{s=t(e)(r),Ko(s,i),n=()=>{qo(s,i)}});return r.cancel=n,i&&r.finally(()=>qo(s,i)),r},e.forward=function(e,t){return e(e=>t.fire(e))},e.runAndSubscribe=function(e,t,i){return t(i),e(e=>t(e))};class l{constructor(e,t){this._observable=e,this._counter=0,this._hasChanged=!1,this.emitter=new Ro({onWillAddFirstListener:()=>{e.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{e.removeObserver(this)}}),t&&t.add(this.emitter)}beginUpdate(e){this._counter++}handlePossibleChange(e){}handleChange(e,t){this._hasChanged=!0}endUpdate(e){this._counter--,0===this._counter&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}e.fromObservable=function(e,t){return new l(e,t).emitter.event},e.fromObservableLight=function(e){return(t,i,n)=>{let s=0,r=!1,o={beginUpdate(){s++},endUpdate(){s--,0===s&&(e.reportChanges(),r&&(r=!1,t.call(i)))},handlePossibleChange(){},handleChange(){r=!0}};e.addObserver(o),e.reportChanges();let a={dispose(){e.removeObserver(o)}};return Ko(a,n),a}}}(_o||(_o={}));var Io=(T=class e{constructor(t){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name="".concat(t,"_").concat(e._idPool++),e.all.add(this)}start(e){this._stopWatch=new To,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}},{_:T.all=new Set},{_:T._idPool=0},T),xo=(I=class e{constructor(t,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e._idPool++).toString(16).padStart(3,"0");this._errorHandler=t,this.threshold=i,this.name=n,this._warnCountdown=0}dispose(){var e;null===(e=this._stacks)||void 0===e||e.clear()}check(e,t){let i=this.threshold;if(i<=0||t<i)return;this._stacks||(this._stacks=new Map);let n=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,n+1),--this._warnCountdown,this._warnCountdown<=0){this._warnCountdown=.5*i;let[e,n]=this.getMostFrequentStack(),s="[".concat(this.name,"] potential listener LEAK detected, having ").concat(t," listeners already. MOST frequent listener (").concat(n,"):");console.warn(s),console.warn(e);let r=new Ao(s,e);this._errorHandler(r)}return()=>{let t=this._stacks.get(e.value)||0;this._stacks.set(e.value,t-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,t=0;for(let[i,n]of this._stacks)(!e||t<n)&&(e=[i,n],t=n);return e}},{_:I._idPool=1},I),Lo=class e{static create(){var t;return new e(null!==(t=Error().stack)&&void 0!==t?t:"")}constructor(e){this.value=e}print(){console.warn(this.value.split("\n").slice(2).join("\n"))}},Ao=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},No=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},Fo=0,Oo=class{constructor(e){this.value=e,this.id=Fo++}},Ro=class{constructor(e){var t,i,n,s,r,o;this._size=0,this._options=e,this._leakageMon=null!==(t=this._options)&&void 0!==t&&t.leakWarningThreshold?new xo(null!==(i=null===e||void 0===e?void 0:e.onListenerError)&&void 0!==i?i:Ri,null!==(n=null===(s=this._options)||void 0===s?void 0:s.leakWarningThreshold)&&void 0!==n?n:-1):void 0,this._perfMon=null!==(r=this._options)&&void 0!==r&&r._profName?new Io(this._options._profName):void 0,this._deliveryQueue=null===(o=this._options)||void 0===o?void 0:o.deliveryQueue}dispose(){var e,t,i,n;this._disposed||(this._disposed=!0,(null===(e=this._deliveryQueue)||void 0===e?void 0:e.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),null!==(t=this._options)&&void 0!==t&&null!==(i=t.onDidRemoveLastListener)&&void 0!==i&&i.call(t),null===(n=this._leakageMon)||void 0===n||n.dispose())}get event(){var e;return null!==(e=this._event)&&void 0!==e||(this._event=(e,t,i)=>{var n,s,r,o,a,l,h;if(this._leakageMon&&this._size>this._leakageMon.threshold**2){var d,c;let e="[".concat(this._leakageMon.name,"] REFUSES to accept new listeners because it exceeded its threshold by far (").concat(this._size," vs ").concat(this._leakageMon.threshold,")");console.warn(e);let t=null!==(d=this._leakageMon.getMostFrequentStack())&&void 0!==d?d:["UNKNOWN stack",-1],i=new No("".concat(e,". HINT: Stack shows most frequent listener (").concat(t[1],"-times)"),t[0]);return((null===(c=this._options)||void 0===c?void 0:c.onListenerError)||Ri)(i),Co.None}if(this._disposed)return Co.None;t&&(e=e.bind(t));let u,g=new Oo(e);this._leakageMon&&this._size>=Math.ceil(.2*this._leakageMon.threshold)&&(g.stack=Lo.create(),u=this._leakageMon.check(g.stack,this._size+1)),this._listeners?this._listeners instanceof Oo?(null!==(n=this._deliveryQueue)&&void 0!==n||(this._deliveryQueue=new Mo),this._listeners=[this._listeners,g]):this._listeners.push(g):(null!==(s=this._options)&&void 0!==s&&null!==(r=s.onWillAddFirstListener)&&void 0!==r&&r.call(s,this),this._listeners=g,null===(o=this._options)||void 0===o||null===(a=o.onDidAddFirstListener)||void 0===a||a.call(o,this)),null!==(l=this._options)&&void 0!==l&&null!==(h=l.onDidAddListener)&&void 0!==h&&h.call(l,this),this._size++;let p=vo(()=>{var e;null!==(e=u)&&void 0!==e&&e(),this._removeListener(g)});return Ko(p,i),p}),this._event}_removeListener(e){var t,i,n,s;if(null!==(t=this._options)&&void 0!==t&&null!==(i=t.onWillRemoveListener)&&void 0!==i&&i.call(t,this),!this._listeners)return;if(1===this._size)return this._listeners=void 0,null!==(n=this._options)&&void 0!==n&&null!==(s=n.onDidRemoveLastListener)&&void 0!==s&&s.call(n,this),void(this._size=0);let r=this._listeners,o=r.indexOf(e);if(-1===o)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),Error("Attempted to dispose unknown listener");this._size--,r[o]=void 0;let a=this._deliveryQueue.current===this;if(2*this._size<=r.length){let e=0;for(let t=0;t<r.length;t++)r[t]?r[e++]=r[t]:a&&e<this._deliveryQueue.end&&(this._deliveryQueue.end--,e<this._deliveryQueue.i&&this._deliveryQueue.i--);r.length=e}}_deliver(e,t){var i;if(!e)return;let n=(null===(i=this._options)||void 0===i?void 0:i.onListenerError)||Ri;if(n)try{e.value(t)}catch(e){n(e)}else e.value(t)}_deliverQueue(e){let t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){var t,i,n,s;if(null!==(t=this._deliveryQueue)&&void 0!==t&&t.current&&(this._deliverQueue(this._deliveryQueue),null!==(i=this._perfMon)&&void 0!==i&&i.stop()),null!==(n=this._perfMon)&&void 0!==n&&n.start(this._size),this._listeners)if(this._listeners instanceof Oo)this._deliver(this._listeners,e);else{let t=this._deliveryQueue;t.enqueue(this,e,this._listeners.length),this._deliverQueue(t)}null===(s=this._perfMon)||void 0===s||s.stop()}hasListeners(){return this._size>0}},Mo=class{constructor(){this.i=-1,this.end=0}enqueue(e,t,i){this.i=0,this.end=i,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},Po=class extends Ro{get isPaused(){return 0!==this._isPaused}constructor(e){super(e),this._isPaused=0,this._eventQueue=new Eo,this._mergeFn=null===e||void 0===e?void 0:e.merge}pause(){this._isPaused++}resume(){if(0!==this._isPaused&&0===--this._isPaused)if(this._mergeFn){if(this._eventQueue.size>0){let e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&0!==this._eventQueue.size;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(0===this._isPaused?super.fire(e):this._eventQueue.push(e))}},Bo=class extends Po{constructor(e){var t;super(e),this._delay=null!==(t=e.delay)&&void 0!==t?t:100}fire(e){this._handle||(this._handle=(this.pause(),setTimeout(()=>{this._handle=void 0,this.resume()},this._delay))),super.fire(e)}},Uo=class extends Ro{constructor(e){super(e),this._queuedEvents=[],this._mergeFn=null===e||void 0===e?void 0:e.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),1===this._queuedEvents.length&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(e=>super.fire(e)),this._queuedEvents=[]}))}},Ho=class{constructor(){this.data=[]}wrapEvent(e,t,i){return(n,s,r)=>e(e=>{var r;let o=this.data[this.data.length-1];if(!t)return void(o?o.buffers.push(()=>n.call(s,e)):n.call(s,e));let a=o;a?(null!==(r=a.items)&&void 0!==r||(a.items=[]),a.items.push(e),0===a.buffers.length&&o.buffers.push(()=>{var e;null!==(e=a.reducedResult)&&void 0!==e||(a.reducedResult=i?a.items.reduce(t,i):a.items.reduce(t)),n.call(s,a.reducedResult)})):n.call(s,t(i,e))},void 0,r)}bufferEvents(e){let t={buffers:[]};this.data.push(t);let i=e();return this.data.pop(),t.buffers.forEach(e=>e()),i}},Wo=class{constructor(){this.listening=!1,this.inputEvent=_o.None,this.inputEventListener=Co.None,this.emitter=new Ro({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}},Vo=class{static const(e){return new zo(e)}constructor(e){this._value=e,this._onDidChange=new Ro,this.onDidChange=this._onDidChange.event}get value(){return this._value}set value(e){e!==this._value&&(this._value=e,this._onDidChange.fire(void 0))}},zo=class{constructor(e){this.value=e,this.onDidChange=_o.None}};function Ko(e,t){t instanceof bo?t.add(e):Array.isArray(t)&&t.push(e)}function qo(e,t){if(t instanceof bo)t.delete(e);else if(Array.isArray(t)){let i=t.indexOf(e);-1!==i&&t.splice(i,1)}e.dispose()}var Go,jo=Object.freeze(function(e,t){let i=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(i)}}});!function(e){e.isCancellationToken=function(t){return t===e.None||t===e.Cancelled||t instanceof Yo||!(!t||"object"!=typeof t)&&("boolean"==typeof t.isCancellationRequested&&"function"==typeof t.onCancellationRequested)},e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:_o.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:jo})}(Go||(Go={}));var Yo=class{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?jo:(this._emitter||(this._emitter=new Ro),this._emitter.event)}dispose(){this._emitter&&(this._emitter=(this._emitter.dispose(),null))}},Qo=class{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new Yo),this._token}cancel(){this._token?this._token instanceof Yo&&this._token.cancel():this._token=Go.Cancelled}dispose(){var e;arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.cancel(),null!==(e=this._parentListener)&&void 0!==e&&e.dispose(),this._token?this._token instanceof Yo&&this._token.dispose():this._token=Go.None}};function $o(e){return e}var Xo;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Running=1]="Running",e[e.Completed=2]="Completed"}(Xo||(Xo={}));var Zo,Jo=class{constructor(e){this.executor=e,this._state=Xo.Uninitialized}get hasValue(){return this._state===Xo.Completed}get value(){if(this._state===Xo.Uninitialized){this._state=Xo.Running;try{this._value=this.executor()}catch(hn){this._error=hn}finally{this._state=Xo.Completed}}else if(this._state===Xo.Running)throw Error("Cannot read the value of a lazy that is being initialized");if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};function ea(e){return e<0?0:e>Zo.MAX_UINT_8?Zo.MAX_UINT_8:0|e}!function(e){e[e.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",e[e.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",e[e.MAX_UINT_8=255]="MAX_UINT_8",e[e.MAX_UINT_16=65535]="MAX_UINT_16",e[e.MAX_UINT_32=4294967295]="MAX_UINT_32",e[e.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"}(Zo||(Zo={}));var ta=/{(\d+)}/g;function ia(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return 0===i.length?e:e.replace(ta,function(e,t){let n=parseInt(t,10);return isNaN(n)||n<0||n>=i.length?e:i[n]})}function na(e){return e.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function sa(e){return e.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function ra(e,t){if(!e||!t)return e;let i=t.length,n=0;if(1===i){let i=t.charCodeAt(0);for(;n<e.length&&e.charCodeAt(n)===i;)n++}else for(;e.startsWith(t,n);)n+=i;return e.substring(n)}function oa(e){return e.split(/\r\n|\r|\n/)}function aa(e){for(let t=0,i=e.length;t<i;t++){let i=e.charCodeAt(t);if(i!==En.Space&&i!==En.Tab)return t}return-1}function la(e,t){return e<t?-1:e>t?1:0}function ha(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t.length;for(;i<n&&s<r;i++,s++){let n=e.charCodeAt(i),r=t.charCodeAt(s);if(n<r)return-1;if(n>r)return 1}let o=n-i,a=r-s;return o<a?-1:o>a?1:0}function da(e,t){return ca(e,t,0,e.length,0,t.length)}function ca(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t.length;for(;i<n&&s<r;i++,s++){let o=e.charCodeAt(i),a=t.charCodeAt(s);if(o===a)continue;if(o>=128||a>=128)return ha(e.toLowerCase(),t.toLowerCase(),i,n,s,r);ua(o)&&(o-=32),ua(a)&&(a-=32);let l=o-a;if(0!==l)return l}let o=n-i,a=r-s;return o<a?-1:o>a?1:0}function ua(e){return e>=En.a&&e<=En.z}function ga(e){return e>=En.A&&e<=En.Z}function pa(e,t){return e.length===t.length&&0===ca(e,t)}function fa(e,t,i){return e===t||void 0!==e&&void 0!==t&&pa(e,t)}function ma(e,t){let i=t.length;return i<=e.length&&0===ca(e,t,0,i)}function va(e,t){let i=e.length,n=i-t.length;return n>=0&&0===ca(e,t,n,i)}function _a(e,t){let i,n=Math.min(e.length,t.length);for(i=0;i<n;i++)if(e.charCodeAt(i)!==t.charCodeAt(i))return i;return n}function ba(e,t){let i,n=Math.min(e.length,t.length),s=e.length-1,r=t.length-1;for(i=0;i<n;i++)if(e.charCodeAt(s-i)!==t.charCodeAt(r-i))return i;return n}function Ca(e){return 55296<=e&&e<=56319}function ya(e){return 56320<=e&&e<=57343}function wa(e,t){return t-56320+(e-55296<<10)+65536}function Sa(e,t,i){let n=e.charCodeAt(i);if(Ca(n)&&i+1<t){let t=e.charCodeAt(i+1);if(ya(t))return wa(n,t)}return n}var ka=class{get offset(){return this._offset}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){let e=function(e,t){let i=e.charCodeAt(t-1);if(ya(i)&&t>1){let n=e.charCodeAt(t-2);if(Ca(n))return wa(n,i)}return i}(this._str,this._offset);return this._offset-=e>=Zo.UNICODE_SUPPLEMENTARY_PLANE_BEGIN?2:1,e}nextCodePoint(){let e=Sa(this._str,this._len,this._offset);return this._offset+=e>=Zo.UNICODE_SUPPLEMENTARY_PLANE_BEGIN?2:1,e}eol(){return this._offset>=this._len}},Ea=class{get offset(){return this._iterator.offset}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._iterator=new ka(e,t)}nextGraphemeLength(){let e=Wa.getInstance(),t=this._iterator,i=t.offset,n=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){let i=t.offset,s=e.getGraphemeBreakType(t.nextCodePoint());if(Ba(n,s)){t.setOffset(i);break}n=s}return t.offset-i}prevGraphemeLength(){let e=Wa.getInstance(),t=this._iterator,i=t.offset,n=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){let i=t.offset,s=e.getGraphemeBreakType(t.prevCodePoint());if(Ba(s,n)){t.setOffset(i);break}n=s}return i-t.offset}eol(){return this._iterator.eol()}};function Da(e,t){return new Ea(e,t).prevGraphemeLength()}function Ta(e,t){t>0&&ya(e.charCodeAt(t))&&t--;let i=t+function(e,t){return new Ea(e,t).nextGraphemeLength()}(e,t);return[i-Da(e,i),i]}var Ia=void 0;function xa(e){return Ia||(Ia=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/),Ia.test(e)}var La=/^[\t\n\r\x20-\x7E]*$/;function Aa(e){return La.test(e)}var Na=/[\u2028\u2029]/;function Fa(e){return Na.test(e)}function Oa(e){return e>=127462&&e<=127487||8986===e||8987===e||9200===e||9203===e||e>=9728&&e<=10175||11088===e||11093===e||e>=127744&&e<=128591||e>=128640&&e<=128764||e>=128992&&e<=129008||e>=129280&&e<=129535||e>=129648&&e<=129782}RegExp("(?:"+["(?:\\x1b\\[|\\x9b)[=?>!]?[\\d;:]*[\"$#'* ]?[a-zA-Z@^`{}|~]","(?:\\x1b\\]|\\x9d).*?(?:\\x1b\\\\|\\x07|\\x9c)","\\x1b(?:[ #%\\(\\)\\*\\+\\-\\.\\/]?[a-zA-Z0-9\\|}~@])"].join("|")+")","g");var Ra,Ma=String.fromCharCode(En.UTF8_BOM);function Pa(e){return!!(e&&e.length>0&&e.charCodeAt(0)===En.UTF8_BOM)}function Ba(e,t){return e===Ra.Other?t!==Ra.Extend&&t!==Ra.SpacingMark:(e!==Ra.CR||t!==Ra.LF)&&(e===Ra.Control||e===Ra.CR||e===Ra.LF||t===Ra.Control||t===Ra.CR||t===Ra.LF||!(e===Ra.L&&(t===Ra.L||t===Ra.V||t===Ra.LV||t===Ra.LVT)||(e===Ra.LV||e===Ra.V)&&(t===Ra.V||t===Ra.T)||(e===Ra.LVT||e===Ra.T)&&t===Ra.T||t===Ra.Extend||t===Ra.ZWJ||t===Ra.SpacingMark||e===Ra.Prepend||e===Ra.ZWJ&&t===Ra.Extended_Pictographic||e===Ra.Regional_Indicator&&t===Ra.Regional_Indicator))}!function(e){e[e.Other=0]="Other",e[e.Prepend=1]="Prepend",e[e.CR=2]="CR",e[e.LF=3]="LF",e[e.Control=4]="Control",e[e.Extend=5]="Extend",e[e.Regional_Indicator=6]="Regional_Indicator",e[e.SpacingMark=7]="SpacingMark",e[e.L=8]="L",e[e.V=9]="V",e[e.T=10]="T",e[e.LV=11]="LV",e[e.LVT=12]="LVT",e[e.ZWJ=13]="ZWJ",e[e.Extended_Pictographic=14]="Extended_Pictographic"}(Ra||(Ra={}));var Ua,Ha,Wa=(x=class e{static getInstance(){return e._INSTANCE||(e._INSTANCE=new e),e._INSTANCE}constructor(){this._data=JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}getGraphemeBreakType(e){if(e<32)return e===En.LineFeed?Ra.LF:e===En.CarriageReturn?Ra.CR:Ra.Control;if(e<127)return Ra.Other;let t=this._data,i=t.length/3,n=1;for(;n<=i;)if(e<t[3*n])n*=2;else{if(!(e>t[3*n+1]))return t[3*n+2];n=2*n+1}return Ra.Other}},{_:x._INSTANCE=null},x);function Va(e){return e===En.Slash||e===En.Backslash}function za(e){return e.replace(/[\\/]/g,Ls.sep)}function Ka(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ls.sep;if(!e)return"";let i=e.length,n=e.charCodeAt(0);if(Va(n)){if(Va(e.charCodeAt(1))&&!Va(e.charCodeAt(2))){let n=3,s=n;for(;n<i&&!Va(e.charCodeAt(n));n++);if(s!==n&&!Va(e.charCodeAt(n+1)))for(n+=1;n<i;n++)if(Va(e.charCodeAt(n)))return e.slice(0,n+1).replace(/[\\/]/g,t)}return t}if(Ga(n)&&e.charCodeAt(1)===En.Colon)return Va(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let s=e.indexOf("://");if(-1!==s)for(s+=3;s<i;s++)if(Va(e.charCodeAt(s)))return e.slice(0,s+1);return""}function qa(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Us;if(e===t)return!0;if(!e||!t||t.length>e.length)return!1;if(i){if(!ma(e,t))return!1;if(t.length===e.length)return!0;let i=t.length;return t.charAt(t.length-1)===n&&i--,e.charAt(i)===n}return t.charAt(t.length-1)!==n&&(t+=n),0===e.indexOf(t)}function Ga(e){return e>=En.A&&e<=En.Z||e>=En.a&&e<=En.z}function ja(e){return function(e){return!!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kn)&&Ga(e.charCodeAt(0))&&e.charCodeAt(1)===En.Colon}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kn)?e[0]:void 0}function Ya(e,t){return Gs.isUri(e)?pa(e.scheme,t):ma(e,t+":")}function Qa(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return i.some(t=>Ya(e,t))}(function(e){e[e.zwj=8205]="zwj",e[e.emojiVariantSelector=65039]="emojiVariantSelector",e[e.enclosingKeyCap=8419]="enclosingKeyCap",e[e.space=32]="space"})(Ua||(Ua={})),L=class e{static getInstance(t){return e.cache.get(Array.from(t).join(","))}static getLocales(){return e._locales.value}constructor(e){this.confusableDictionary=e}isAmbiguous(e){return this.confusableDictionary.has(e)}containsAmbiguousCharacter(e){for(let t=0;t<e.length;t++){let i=e.codePointAt(t);if("number"==typeof i&&this.isAmbiguous(i))return!0}return!1}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}},L.ambiguousCharacterData=new Jo(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,1523,96,8242,96,1370,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,118002,50,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,118003,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,118004,52,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,118005,53,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,118006,54,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,118007,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,118008,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,118009,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,117974,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,117975,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71913,67,71922,67,65315,67,8557,67,8450,67,8493,67,117976,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,117977,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,117978,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,117979,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,117980,71,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,117981,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,117983,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,117984,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,118001,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,117982,108,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,117985,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,117986,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,117987,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,118000,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,117988,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,117989,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,117990,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,117991,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,117992,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,117993,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,117994,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,117995,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71910,87,71919,87,117996,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,117997,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,117998,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,71909,90,66293,90,65338,90,8484,90,8488,90,117999,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65283,35,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"cs":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"es":[8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"fr":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"it":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"ja":[8211,45,8218,44,65281,33,8216,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65292,44,65297,49,65307,59],"ko":[8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"pt-BR":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"ru":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"zh-hans":[160,32,65374,126,8218,44,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65297,49],"zh-hant":[8211,45,65374,126,8218,44,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89]}')),L.cache=new class{constructor(e,t){this.lastCache=void 0,this.lastArgKey=void 0,"function"==typeof e?(this._fn=e,this._computeKey=$o):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){let t=this._computeKey(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this._fn(e)),this.lastCache}}(e=>{let t=e.split(",");function i(e){let t=new Map;for(let i=0;i<e.length;i+=2)t.set(e[i],e[i+1]);return t}function n(e,t){if(!e)return t;let i=new Map;for(let[n,s]of e)t.has(n)&&i.set(n,s);return i}let s,r=L.ambiguousCharacterData.value,o=t.filter(e=>!e.startsWith("_")&&Object.hasOwn(r,e));0===o.length&&(o=["_default"]);for(let a of o){s=n(s,i(r[a]))}return new L(function(e,t){let i=new Map(e);for(let[n,s]of t)i.set(n,s);return i}(i(r._common),s))}),L._locales=new Jo(()=>Object.keys(L.ambiguousCharacterData.value).filter(e=>!e.startsWith("_"))),A=class e{static getRawData(){return JSON.parse('{"_common":[11,12,13,127,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999],"cs":[173,8203,12288],"de":[173,8203,12288],"es":[8203,12288],"fr":[173,8203,12288],"it":[160,173,12288],"ja":[173],"ko":[173,12288],"pl":[173,8203,12288],"pt-BR":[173,8203,12288],"qps-ploc":[160,173,8203,12288],"ru":[173,12288],"tr":[160,173,8203,12288],"zh-hans":[160,173,8203,12288],"zh-hant":[173,12288]}')}static getData(){return this._data||(this._data=new Set([...Object.values(e.getRawData())].flat())),this._data}static isInvisibleCharacter(t){return e.getData().has(t)}static containsInvisibleCharacter(t){for(let i=0;i<t.length;i++){let n=t.codePointAt(i);if("number"==typeof n&&(e.isInvisibleCharacter(n)||n===Ua.space))return!0}return!1}static get codePoints(){return e.getData()}},A._data=void 0,function(e){e.inMemory="inmemory",e.vscode="vscode",e.internal="private",e.walkThrough="walkThrough",e.walkThroughSnippet="walkThroughSnippet",e.http="http",e.https="https",e.file="file",e.mailto="mailto",e.untitled="untitled",e.data="data",e.command="command",e.vscodeRemote="vscode-remote",e.vscodeRemoteResource="vscode-remote-resource",e.vscodeManagedRemoteResource="vscode-managed-remote-resource",e.vscodeUserData="vscode-userdata",e.vscodeCustomEditor="vscode-custom-editor",e.vscodeNotebookCell="vscode-notebook-cell",e.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",e.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",e.vscodeNotebookCellOutput="vscode-notebook-cell-output",e.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",e.vscodeNotebookMetadata="vscode-notebook-metadata",e.vscodeInteractiveInput="vscode-interactive-input",e.vscodeSettings="vscode-settings",e.vscodeWorkspaceTrust="vscode-workspace-trust",e.vscodeTerminal="vscode-terminal",e.vscodeChatCodeBlock="vscode-chat-code-block",e.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",e.vscodeChatEditor="vscode-chat-editor",e.vscodeChatInput="chatSessionInput",e.vscodeLocalChatSession="vscode-chat-session",e.webviewPanel="webview-panel",e.vscodeWebview="vscode-webview",e.extension="extension",e.vscodeFileResource="vscode-file",e.tmp="tmp",e.vsls="vsls",e.vscodeSourceControl="vscode-scm",e.commentsInput="comment",e.codeSetting="code-setting",e.outputChannel="output",e.accessibleView="accessible-view",e.chatEditingSnapshotScheme="chat-editing-snapshot-text-model",e.chatEditingModel="chat-editing-text-model",e.copilotPr="copilot-pr"}(Ha||(Ha={}));var $a=new class{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._serverRootPath="/"}setPreferredWebSchema(e){this._preferredWebSchema=e}setDelegate(e){this._delegate=e}setServerRootPath(e,t){this._serverRootPath=Ls.join(null!==t&&void 0!==t?t:"/",function(e){var t,i;return"".concat(null!==(t=e.quality)&&void 0!==t?t:"oss","-").concat(null!==(i=e.commit)&&void 0!==i?i:"dev")}(e))}getServerRootPath(){return this._serverRootPath}get _remoteResourcesPath(){return Ls.join(this._serverRootPath,Ha.vscodeRemoteResource)}set(e,t,i){this._hosts[e]=t,this._ports[e]=i}setConnectionToken(e,t){this._connectionTokens[e]=t}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(t){return Ri(t),e}let t=e.authority,i=this._hosts[t];i&&-1!==i.indexOf(":")&&-1===i.indexOf("[")&&(i="[".concat(i,"]"));let n=this._ports[t],s=this._connectionTokens[t],r="path=".concat(encodeURIComponent(e.path));return"string"==typeof s&&(r+="&tkn=".concat(encodeURIComponent(s))),Gs.from({scheme:Yn?this._preferredWebSchema:Ha.vscodeRemoteResource,authority:"".concat(i,":").concat(n),path:this._remoteResourcesPath,query:r})}};var Xa,Za=new(N=class e{constructor(){this.staticBrowserUris=new so,this.appResourcePathUrls=new Map}registerAppResourcePathUrl(e,t){this.appResourcePathUrls.set(e,t)}toUrl(e){var t,i;let n=this.appResourcePathUrls.get(e);return"function"==typeof n&&(n=n()),new URL(null!==n&&void 0!==n?n:e,null!==(t=null===(i=globalThis.location)||void 0===i?void 0:i.href)&&void 0!==t?t:"file:///home/runner/work/windmill-whitelabelling-react-webpack/windmill-whitelabelling-react-webpack/node_modules/@windmill-labs/windmill-react-sdk/dist/monaco-vscode-theme-service-override-DVqqDp7x.js").toString()}asBrowserUri(e){let t=this.toUri(e);return this.uriToBrowserUri(t)}uriToBrowserUri(t){var i;return t.scheme===Ha.vscodeRemote?$a.rewrite(t):t.scheme!==Ha.file||!jn&&Qn!=="".concat(Ha.vscodeFileResource,"://").concat(e.FALLBACK_AUTHORITY)?null!==(i=this.staticBrowserUris.get(t))&&void 0!==i?i:t:t.with({scheme:Ha.vscodeFileResource,authority:t.authority||e.FALLBACK_AUTHORITY,query:null,fragment:null})}asFileUri(e){let t=this.toUri(e);return this.uriToFileUri(t)}uriToFileUri(t){return t.scheme===Ha.vscodeFileResource?t.with({scheme:Ha.file,authority:t.authority===e.FALLBACK_AUTHORITY?null:t.authority,query:null,fragment:null}):t}toUri(e){if(Gs.isUri(e))return e;if(globalThis._VSCODE_FILE_ROOT){let t=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(t))return Gs.joinPath(Gs.parse(t,!0),e);let i=Fs(t,e);return Gs.file(i)}return Gs.parse(this.toUrl(e))}registerStaticBrowserUri(e,t){return this.staticBrowserUris.set(e,t),vo(()=>{this.staticBrowserUris.get(e)===t&&this.staticBrowserUris.delete(e)})}getRegisteredBrowserUris(){return this.staticBrowserUris.keys()}},{_:N.FALLBACK_AUTHORITY="vscode-app"},N);function Ja(e){return Zs(e,!0)}!function(e){let t=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);e.CoopAndCoep=Object.freeze(t.get("3"));let i="vscode-coi";e.getHeadersFromQuery=function(e){var n;let s;"string"==typeof e?s=new URL(e).searchParams:e instanceof URL?s=e.searchParams:Gs.isUri(e)&&(s=new URL(e.toString(!0)).searchParams);let r=null===(n=s)||void 0===n?void 0:n.get(i);if(r)return t.get(r)},e.addSearchParam=function(e,t,n){if(!globalThis.crossOriginIsolated)return;let s=t&&n?"3":n?"2":"1";e instanceof URLSearchParams?e.set(i,s):e[i]=s}}(Xa||(Xa={}));var el=class{constructor(e){this._ignorePathCasing=e}compare(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e===t?0:la(this.getComparisonKey(e,i),this.getComparisonKey(t,i))}isEqual(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e===t||!(!e||!t)&&this.getComparisonKey(e,i)===this.getComparisonKey(t,i)}getComparisonKey(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}ignorePathCasing(e){return this._ignorePathCasing(e)}isEqualOrParent(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.scheme===t.scheme){if(e.scheme===Ha.file)return qa(Ja(e),Ja(t),this._ignorePathCasing(e))&&e.query===t.query&&(i||e.fragment===t.fragment);if(pl(e.authority,t.authority))return qa(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(i||e.fragment===t.fragment)}return!1}joinPath(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return Gs.joinPath(e,...i)}basenameOrAuthority(e){return ol(e)||e.authority}basename(e){return Ls.basename(e.path)}extname(e){return Ls.extname(e.path)}dirname(e){if(0===e.path.length)return e;let t;return e.scheme===Ha.file?t=Gs.file(Ms(Ja(e))).path:(t=Ls.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==En.Slash&&(console.error('dirname("'.concat(e.toString,")) resulted in a relative path")),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return t=e.scheme===Ha.file?Gs.file(As(Ja(e))).path:Ls.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!pl(e.authority,t.authority))return;if(e.scheme===Ha.file){let i=Rs(Ja(e),Ja(t));return Kn?za(i):i}let i=e.path||"/",n=t.path||"/";if(this._ignorePathCasing(e)){let e=0;for(let t=Math.min(i.length,n.length);e<t&&(i.charCodeAt(e)===n.charCodeAt(e)||i.charAt(e).toLowerCase()===n.charAt(e).toLowerCase());e++);i=n.substr(0,e)+i.substr(e)}return Ls.relative(i,n)}resolvePath(e,t){if(e.scheme===Ha.file){let i=Gs.file(Os(Ja(e),t));return e.with({authority:i.authority,path:i.path})}return t=function(e){return-1===e.indexOf("/")&&(e=za(e)),/^[a-zA-Z]:(\/|$)/.test(e)&&(e="/"+e),e}(t),e.with({path:Ls.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&"/"===e.path[0]}isEqualAuthority(e,t){return e===t||void 0!==e&&void 0!==t&&pa(e,t)}hasTrailingPathSeparator(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Us;if(e.scheme===Ha.file){let i=Ja(e);return i.length>Ka(i).length&&i[i.length-1]===t}{let t=e.path;return t.length>1&&t.charCodeAt(t.length-1)===En.Slash&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e){return fl(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Us)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Us,i=!1;if(e.scheme===Ha.file){let n=Ja(e);i=void 0!==n&&n.length===Ka(n).length&&n[n.length-1]===t}else{t="/";let n=e.path;i=1===n.length&&n.charCodeAt(n.length-1)===En.Slash}return i||fl(e,t)?e:e.with({path:e.path+"/"})}},tl=new el(()=>!1);new el(e=>e.scheme!==Ha.file||!Gn);var il=new el(e=>!0),nl=tl.isEqual.bind(tl),sl=tl.isEqualOrParent.bind(tl);tl.getComparisonKey.bind(tl),tl.basenameOrAuthority.bind(tl);var rl,ol=tl.basename.bind(tl),al=tl.extname.bind(tl),ll=tl.dirname.bind(tl),hl=tl.joinPath.bind(tl),dl=tl.normalizePath.bind(tl),cl=tl.relativePath.bind(tl),ul=tl.resolvePath.bind(tl),gl=tl.isAbsolutePath.bind(tl),pl=tl.isEqualAuthority.bind(tl),fl=tl.hasTrailingPathSeparator.bind(tl);function ml(e,t,i){if(t){let n=e.path;return n&&n[0]!==Ls.sep&&(n=Ls.sep+n),e.with({scheme:i,authority:t,path:n})}return e.with({scheme:i})}tl.removeTrailingPathSeparator.bind(tl),tl.addTrailingPathSeparator.bind(tl),function(e){e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime",e.parseMetaData=function(t){let i=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(e=>{let[t,n]=e.split(":");t&&n&&i.set(t,n)});let n=t.path.substring(0,t.path.indexOf(";"));return n&&i.set(e.META_DATA_MIME,n),i}}(rl||(rl={}));var vl=Symbol("MicrotaskDelay");function _l(e){return!!e&&"function"==typeof e.then}function bl(e){let t=new Qo,i=e(t.token),n=!1,s=new Promise((e,s)=>{let r=t.token.onCancellationRequested(()=>{n=!0,r.dispose(),s(new Ui)});Promise.resolve(i).then(i=>{r.dispose(),t.dispose(),n?go(i)&&i.dispose():e(i)},e=>{r.dispose(),t.dispose(),s(e)})});return new class{cancel(){t.cancel(),t.dispose()}then(e,t){return s.then(e,t)}catch(e){return this.then(void 0,e)}finally(e){return s.finally(e)}}}function Cl(e,t,i){return new Promise((n,s)=>{let r=t.onCancellationRequested(()=>{r.dispose(),n(i)});e.then(n,s).finally(()=>r.dispose())})}var yl=class{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null,this.cancellationTokenSource=new Qo}queue(e){if(this.cancellationTokenSource.token.isCancellationRequested)return Promise.reject(Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){let e=()=>{if(this.queuedPromise=null,this.cancellationTokenSource.token.isCancellationRequested)return;let e=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,e};this.queuedPromise=new Promise(t=>{this.activePromise.then(e,e).then(t)})}return new Promise((e,t)=>{this.queuedPromise.then(e,t)})}return this.activePromise=e(this.cancellationTokenSource.token),new Promise((e,t)=>{this.activePromise.then(t=>{this.activePromise=null,e(t)},e=>{this.activePromise=null,t(e)})})}dispose(){this.cancellationTokenSource.cancel()}},wl=class{constructor(){this.current=Promise.resolve(null)}queue(e){return this.current=this.current.then(()=>e(),()=>e())}},Sl=class{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultDelay;this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((e,t)=>{this.doResolve=e,this.doReject=t}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){let e=this.task;return this.task=null,e()}}));let i=()=>{var e;this.deferred=null,null===(e=this.doResolve)||void 0===e||e.call(this,null)};return this.deferred=t===vl?(e=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,e())}),{isTriggered:()=>t,dispose:()=>{t=!1}}})(i):((e,t)=>{let i=!0,n=setTimeout(()=>{i=!1,t()},e);return{isTriggered:()=>i,dispose:()=>{clearTimeout(n),i=!1}}})(t,i),this.completionPromise}isTriggered(){var e;return!(null===(e=this.deferred)||void 0===e||!e.isTriggered())}cancel(){var e;this.cancelTimeout(),this.completionPromise&&(this.completionPromise=(null!==(e=this.doReject)&&void 0!==e&&e.call(this,new Ui),null))}cancelTimeout(){var e;null!==(e=this.deferred)&&void 0!==e&&e.dispose(),this.deferred=null}dispose(){this.cancel()}},kl=class{constructor(e){this.delayer=new Sl(e),this.throttler=new yl}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}};function El(e,t){return t?new Promise((i,n)=>{let s=setTimeout(()=>{r.dispose(),i()},e),r=t.onCancellationRequested(()=>{clearTimeout(s),r.dispose(),n(new Ui)})}):bl(t=>El(e,t))}function Dl(e){let t=arguments.length>2?arguments[2]:void 0,i=setTimeout(()=>{e(),t&&n.dispose()},arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),n=vo(()=>{clearTimeout(i),null===t||void 0===t||t.delete(n)});return null!==t&&void 0!==t&&t.add(n),n}var Tl,Il,xl=class{constructor(e){this._size=0,this._isDisposed=!1,this.maxDegreeOfParalellism=e,this.outstandingPromises=[],this.runningPromises=0,this._onDrained=new Ro}whenIdle(){return this.size>0?_o.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this._onDrained.event}get size(){return this._size}queue(e){if(this._isDisposed)throw Error("Object has been disposed");return this._size++,new Promise((t,i)=>{this.outstandingPromises.push({factory:e,c:t,e:i}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){let e=this.outstandingPromises.shift();this.runningPromises++;let t=e.factory();t.then(e.c,e.e),t.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._isDisposed||(this.runningPromises--,0===--this._size&&this._onDrained.fire(),this.outstandingPromises.length>0&&this.consume())}clear(){if(this._isDisposed)throw Error("Object has been disposed");this.outstandingPromises.length=0,this._size=this.runningPromises}dispose(){this._isDisposed=!0,this.outstandingPromises.length=0,this._size=0,this._onDrained.dispose()}},Ll=class extends xl{constructor(){super(1)}},Al=class{constructor(){this.queues=new Map,this.drainers=new Set,this.drainListeners=void 0,this.drainListenerCount=0}async whenDrained(){if(this.isDrained())return;let e=new Vl;return this.drainers.add(e),e.p}isDrained(){for(let[,e]of this.queues)if(e.size>0)return!1;return!0}queueSize(e){var t,i;let n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:tl).getComparisonKey(e);return null!==(t=null===(i=this.queues.get(n))||void 0===i?void 0:i.size)&&void 0!==t?t:0}queueFor(e,t){let i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:tl).getComparisonKey(e),n=this.queues.get(i);if(!n){n=new Ll;let e=this.drainListenerCount++,t=_o.once(n.onDrained)(()=>{var t,s,r;null!==(t=n)&&void 0!==t&&t.dispose(),this.queues.delete(i),this.onDidQueueDrain(),null!==(s=this.drainListeners)&&void 0!==s&&s.deleteAndDispose(e),0===(null===(r=this.drainListeners)||void 0===r?void 0:r.size)&&(this.drainListeners.dispose(),this.drainListeners=void 0)});this.drainListeners||(this.drainListeners=new So),this.drainListeners.set(e,t),this.queues.set(i,n)}return n.queue(t)}onDidQueueDrain(){this.isDrained()&&this.releaseDrainers()}releaseDrainers(){for(let e of this.drainers)e.complete();this.drainers.clear()}dispose(){var e;for(let[,t]of this.queues)t.dispose();this.queues.clear(),this.releaseDrainers(),null===(e=this.drainListeners)||void 0===e||e.dispose()}},Nl=class{constructor(){this._runningTask=void 0,this._pendingTasks=[]}schedule(e){let t=new Vl;return this._pendingTasks.push({task:e,deferred:t,setUndefinedWhenCleared:!1}),this._runIfNotRunning(),t.p}scheduleSkipIfCleared(e){let t=new Vl;return this._pendingTasks.push({task:e,deferred:t,setUndefinedWhenCleared:!0}),this._runIfNotRunning(),t.p}_runIfNotRunning(){void 0===this._runningTask&&this._processQueue()}async _processQueue(){if(0===this._pendingTasks.length)return;let e=this._pendingTasks.shift();if(e){if(this._runningTask)throw new qi;this._runningTask=e.task;try{let t=await e.task();e.deferred.complete(t)}catch(t){e.deferred.error(t)}finally{this._runningTask=void 0,this._processQueue()}}}clearPending(){let e=this._pendingTasks;this._pendingTasks=[];for(let t of e)t.setUndefinedWhenCleared?t.deferred.complete(void 0):t.deferred.error(new Ui)}},Fl=class{constructor(e,t){this._isDisposed=!1,this._token=void 0,"function"==typeof e&&"number"==typeof t&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){void 0!==this._token&&(clearTimeout(this._token),this._token=void 0)}cancelAndSet(e,t){if(this._isDisposed)throw new qi("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=void 0,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new qi("Calling 'setIfNotSet' on a disposed TimeoutTimer");void 0===this._token&&(this._token=setTimeout(()=>{this._token=void 0,e()},t))}},Ol=class{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){var e;null!==(e=this.disposable)&&void 0!==e&&e.dispose(),this.disposable=void 0}cancelAndSet(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:globalThis;if(this.isDisposed)throw new qi("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();let n=i.setInterval(()=>{e()},t);this.disposable=vo(()=>{i.clearInterval(n),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}},Rl=class{constructor(e,t){this.timeoutToken=void 0,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=void 0)}schedule(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return void 0!==this.timeoutToken}flush(){this.isScheduled()&&(this.cancel(),this.doRun())}onTimeout(){this.timeoutToken=void 0,this.runner&&this.doRun()}doRun(){var e;null===(e=this.runner)||void 0===e||e.call(this)}};!function(){let e=globalThis;Il="function"!=typeof e.requestIdleCallback||"function"!=typeof e.cancelIdleCallback?(e,t,i)=>{ns(()=>{if(n)return;let e=Date.now()+15;t(Object.freeze({didTimeout:!0,timeRemaining:()=>Math.max(0,e-Date.now())}))});let n=!1;return{dispose(){n||(n=!0)}}}:(e,t,i)=>{let n=e.requestIdleCallback(t,"number"==typeof i?{timeout:i}:void 0),s=!1;return{dispose(){s||(s=!0,e.cancelIdleCallback(n))}}},Tl=(e,t)=>Il(globalThis,e,t)}();var Ml,Pl=class{constructor(e,t){this._didRun=!1,this._executor=()=>{try{this._value=t()}catch(e){this._error=e}finally{this._didRun=!0}},this._handle=Il(e,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}},Bl=class extends Pl{constructor(e){super(globalThis,e)}},Ul=class{isRunning(e){var t;return"number"==typeof e?(null===(t=this._running)||void 0===t?void 0:t.taskId)===e:!!this._running}get running(){var e;return null===(e=this._running)||void 0===e?void 0:e.promise}cancelRunning(){var e;null===(e=this._running)||void 0===e||e.cancel()}run(e,t,i){return this._running={taskId:e,cancel:()=>null===i||void 0===i?void 0:i(),promise:t},t.then(()=>this.doneRunning(e),()=>this.doneRunning(e)),t}doneRunning(e){this._running&&e===this._running.taskId&&(this._running=void 0,this.runQueued())}runQueued(){if(this._queued){let e=this._queued;this._queued=void 0,e.run().then(e.promiseResolve,e.promiseReject)}}queue(e){if(this._queued)this._queued.run=e;else{let{promise:t,resolve:i,reject:n}=function(){let e,t;return{promise:new Promise((i,n)=>{e=i,t=n}),resolve:e,reject:t}}();this._queued={run:e,promise:t,promiseResolve:i,promiseReject:n}}return this._queued.promise}hasQueued(){return!!this._queued}async join(){var e,t,i;return null!==(e=null===(t=this._queued)||void 0===t?void 0:t.promise)&&void 0!==e?e:null===(i=this._running)||void 0===i?void 0:i.promise}};!function(e){e[e.Resolved=0]="Resolved",e[e.Rejected=1]="Rejected"}(Ml||(Ml={}));var Hl,Wl,Vl=class e{static fromPromise(t){let i=new e;return i.settleWith(t),i}get isRejected(){var e;return(null===(e=this.outcome)||void 0===e?void 0:e.outcome)===Ml.Rejected}get isResolved(){var e;return(null===(e=this.outcome)||void 0===e?void 0:e.outcome)===Ml.Resolved}get isSettled(){return!!this.outcome}get value(){var e,t;return(null===(e=this.outcome)||void 0===e?void 0:e.outcome)===Ml.Resolved?null===(t=this.outcome)||void 0===t?void 0:t.value:void 0}constructor(){this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return this.isSettled?Promise.resolve():new Promise(t=>{this.completeCallback(e),this.outcome={outcome:Ml.Resolved,value:e},t()})}error(e){return this.isSettled?Promise.resolve():new Promise(t=>{this.errorCallback(e),this.outcome={outcome:Ml.Rejected,value:e},t()})}settleWith(e){return e.then(e=>this.complete(e),e=>this.error(e))}cancel(){return this.error(new Ui)}};!function(e){e.settled=async function(e){let t,i=await Promise.all(e.map(e=>e.then(e=>e,e=>{t||(t=e)})));if(void 0!==t)throw t;return i},e.withAsyncBody=function(e){return new Promise(async(t,i)=>{try{await e(t,i)}catch(e){i(e)}})}}(Hl||(Hl={})),function(e){e[e.Initial=0]="Initial",e[e.DoneOK=1]="DoneOK",e[e.DoneError=2]="DoneError"}(Wl||(Wl={})),F=class e{static fromArray(t){return new e(e=>{e.emitMany(t)})}static fromPromise(t){return new e(async e=>{e.emitMany(await t)})}static fromPromisesResolveOrder(t){return new e(async e=>{await Promise.all(t.map(async t=>e.emitOne(await t)))})}static merge(t){return new e(async e=>{await Promise.all(t.map(async t=>{var i,n=!1,s=!1;try{for(var r,o=(0,a.A)(t);n=!(r=await o.next()).done;n=!1){let t=r.value;e.emitOne(t)}}catch(l){s=!0,i=l}finally{try{n&&null!=o.return&&await o.return()}finally{if(s)throw i}}}))})}constructor(e,t){this._state=Wl.Initial,this._results=[],this._error=null,this._onReturn=t,this._onStateChanged=new Ro,queueMicrotask(async()=>{let t={emitOne:e=>this.emitOne(e),emitMany:e=>this.emitMany(e),reject:e=>this.reject(e)};try{await Promise.resolve(e(t)),this.resolve()}catch(e){this.reject(e)}finally{t.emitOne=void 0,t.emitMany=void 0,t.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{for(;;){if(this._state===Wl.DoneError)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===Wl.DoneOK)return{done:!0,value:void 0};await _o.toPromise(this._onStateChanged.event)}},return:async()=>{var e;return null!==(e=this._onReturn)&&void 0!==e&&e.call(this),{done:!0,value:void 0}}}}static map(t,i){return new e(async e=>{var n,s=!1,r=!1;try{for(var o,l=(0,a.A)(t);s=!(o=await l.next()).done;s=!1){let t=o.value;e.emitOne(i(t))}}catch(h){r=!0,n=h}finally{try{s&&null!=l.return&&await l.return()}finally{if(r)throw n}}})}map(t){return e.map(this,t)}static filter(t,i){return new e(async e=>{var n,s=!1,r=!1;try{for(var o,l=(0,a.A)(t);s=!(o=await l.next()).done;s=!1){let t=o.value;i(t)&&e.emitOne(t)}}catch(h){r=!0,n=h}finally{try{s&&null!=l.return&&await l.return()}finally{if(r)throw n}}})}filter(t){return e.filter(this,t)}static coalesce(t){return e.filter(t,e=>!!e)}coalesce(){return e.coalesce(this)}static async toPromise(e){let t=[];var i,n=!1,s=!1;try{for(var r,o=(0,a.A)(e);n=!(r=await o.next()).done;n=!1){let e=r.value;t.push(e)}}catch(l){s=!0,i=l}finally{try{n&&null!=o.return&&await o.return()}finally{if(s)throw i}}return t}toPromise(){return e.toPromise(this)}emitOne(e){this._state===Wl.Initial&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===Wl.Initial&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===Wl.Initial&&(this._state=Wl.DoneOK,this._onStateChanged.fire())}reject(e){this._state===Wl.Initial&&(this._state=Wl.DoneError,this._error=e,this._onStateChanged.fire())}},F.EMPTY=F.fromArray([]);var zl=class{constructor(){this._unsatisfiedConsumers=[],this._unconsumedValues=[]}get hasFinalValue(){return!!this._finalValue}produce(e){if(this._ensureNoFinalValue(),this._unsatisfiedConsumers.length>0){let t=this._unsatisfiedConsumers.shift();this._resolveOrRejectDeferred(t,e)}else this._unconsumedValues.push(e)}produceFinal(e){this._ensureNoFinalValue(),this._finalValue=e;for(let t of this._unsatisfiedConsumers)this._resolveOrRejectDeferred(t,e);this._unsatisfiedConsumers.length=0}_ensureNoFinalValue(){if(this._finalValue)throw new qi("ProducerConsumer: cannot produce after final value has been set")}_resolveOrRejectDeferred(e,t){t.ok?e.complete(t.value):e.error(t.error)}consume(){if(this._unconsumedValues.length>0||this._finalValue){let e=this._unconsumedValues.length>0?this._unconsumedValues.shift():this._finalValue;return e.ok?Promise.resolve(e.value):Promise.reject(e.error)}{let e=new Vl;return this._unsatisfiedConsumers.push(e),e.p}}};O=class e{constructor(e,t){this._onReturn=t,this._producerConsumer=new zl,this._iterator={next:()=>this._producerConsumer.consume(),return:()=>{var e;return null!==(e=this._onReturn)&&void 0!==e&&e.call(this),Promise.resolve({done:!0,value:void 0})},throw:async e=>(this._finishError(e),{done:!0,value:void 0})},queueMicrotask(async()=>{let t=e({emitOne:e=>this._producerConsumer.produce({ok:!0,value:{done:!1,value:e}}),emitMany:e=>{for(let t of e)this._producerConsumer.produce({ok:!0,value:{done:!1,value:t}})},reject:e=>this._finishError(e)});if(!this._producerConsumer.hasFinalValue)try{await t,this._finishOk()}catch(e){this._finishError(e)}})}static fromArray(t){return new e(e=>{e.emitMany(t)})}static fromPromise(t){return new e(async e=>{e.emitMany(await t)})}static fromPromisesResolveOrder(t){return new e(async e=>{await Promise.all(t.map(async t=>e.emitOne(await t)))})}static merge(t){return new e(async e=>{await Promise.all(t.map(async t=>{var i,n=!1,s=!1;try{for(var r,o=(0,a.A)(t);n=!(r=await o.next()).done;n=!1){let t=r.value;e.emitOne(t)}}catch(l){s=!0,i=l}finally{try{n&&null!=o.return&&await o.return()}finally{if(s)throw i}}}))})}static map(t,i){return new e(async e=>{var n,s=!1,r=!1;try{for(var o,l=(0,a.A)(t);s=!(o=await l.next()).done;s=!1){let t=o.value;e.emitOne(i(t))}}catch(h){r=!0,n=h}finally{try{s&&null!=l.return&&await l.return()}finally{if(r)throw n}}})}static tee(t){let i,n,s=new Vl,r=async()=>{if(i&&n)try{var r,o=!1,l=!1;try{for(var h,d=(0,a.A)(t);o=!(h=await d.next()).done;o=!1){let e=h.value;i.emitOne(e),n.emitOne(e)}}catch(c){l=!0,r=c}finally{try{o&&null!=d.return&&await d.return()}finally{if(l)throw r}}}catch(e){i.reject(e),n.reject(e)}finally{s.complete()}};return[new e(async e=>(i=e,r(),s.p)),new e(async e=>(n=e,r(),s.p))]}map(t){return e.map(this,t)}static coalesce(t){return e.filter(t,e=>!!e)}coalesce(){return e.coalesce(this)}static filter(t,i){return new e(async e=>{var n,s=!1,r=!1;try{for(var o,l=(0,a.A)(t);s=!(o=await l.next()).done;s=!1){let t=o.value;i(t)&&e.emitOne(t)}}catch(h){r=!0,n=h}finally{try{s&&null!=l.return&&await l.return()}finally{if(r)throw n}}})}filter(t){return e.filter(this,t)}_finishOk(){this._producerConsumer.hasFinalValue||this._producerConsumer.produceFinal({ok:!0,value:{done:!0,value:void 0}})}_finishError(e){this._producerConsumer.hasFinalValue||this._producerConsumer.produceFinal({ok:!1,error:e})}[Symbol.asyncIterator](){return this._iterator}};O.EMPTY=O.fromArray([]);function Kl(e){let t=!1,i=new Map,n=new Map;if(function(e,t){if(!e||"object"!=typeof e)return;let i=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(let n of t)ql(n)&&o.push(n)},n=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(let n of t)if(ql(n))for(let e in n){let t=n[e];ql(t)&&o.push(t)}},s=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(let n of t)if(Array.isArray(n))for(let e of n)ql(e)&&o.push(e)},r=e=>{if(Array.isArray(e))for(let t of e)ql(t)&&o.push(t);else ql(e)&&o.push(e)},o=[e],a=o.pop();for(;a;)t(a)&&(i(a.additionalItems,a.additionalProperties,a.not,a.contains,a.propertyNames,a.if,a.then,a.else,a.unevaluatedItems,a.unevaluatedProperties),n(a.definitions,a.$defs,a.properties,a.patternProperties,a.dependencies,a.dependentSchemas),s(a.anyOf,a.allOf,a.oneOf,a.prefixItems),r(a.items)),a=o.pop()}(e,s=>{if(e===s)return!0;let r=JSON.stringify(s);if(r.length<30)return!0;let o=i.get(r);if(!o){let e={schemas:[s]};return i.set(r,e),n.set(s,e),!0}return o.schemas.push(s),n.set(s,o),t=!0,!1}),i.clear(),!t)return JSON.stringify(e);let s="$defs";for(;e.hasOwnProperty(s);)s+="_";let r=[];function o(e){return JSON.stringify(e,(t,i)=>{if(i!==e){let e=n.get(i);if(e&&e.schemas.length>1)return e.id||(e.id="_".concat(r.length),r.push(e.schemas[0])),{$ref:"#/".concat(s,"/").concat(e.id)}}return i})}let a=o(e),l=[];for(let h=0;h<r.length;h++)l.push('"_'.concat(h,'":').concat(o(r[h])));return l.length?"".concat(a.substring(0,a.length-1),',"').concat(s,'":{').concat(l.join(","),"}}"):a}function ql(e){return"object"==typeof e&&!!e}var Gl="base.contributions.json";function jl(e){return e.length>0&&"#"===e.charAt(e.length-1)?e.substring(0,e.length-1):e}var Yl,Ql=new class extends Co{constructor(){super(...arguments),this.schemasById={},this.schemaAssociations={},this._onDidChangeSchema=this._register(new Ro),this.onDidChangeSchema=this._onDidChangeSchema.event,this._onDidChangeSchemaAssociations=this._register(new Ro),this.onDidChangeSchemaAssociations=this._onDidChangeSchemaAssociations.event}registerSchema(e,t,i){let n=jl(e);this.schemasById[n]=t,this._onDidChangeSchema.fire(e),i&&i.add(vo(()=>{delete this.schemasById[n],this._onDidChangeSchema.fire(e)}))}registerSchemaAssociation(e,t){let i=jl(e);return this.schemaAssociations[i]||(this.schemaAssociations[i]=[]),this.schemaAssociations[i].includes(t)||(this.schemaAssociations[i].push(t),this._onDidChangeSchemaAssociations.fire()),vo(()=>{let e=this.schemaAssociations[i];if(e){let n=e.indexOf(t);-1!==n&&(e.splice(n,1),0===e.length&&delete this.schemaAssociations[i],this._onDidChangeSchemaAssociations.fire())}})}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}getSchemaContributions(){return{schemas:this.schemasById}}getSchemaContent(e){let t=this.schemasById[e];return t?Kl(t):void 0}hasSchemaContent(e){return!!this.schemasById[e]}getSchemaAssociations(){return this.schemaAssociations}};function $l(e){return"--vscode-".concat(e.replace(/\./g,"-"))}function Xl(e){return"var(".concat($l(e),")")}Tn.add(Gl,Ql),function(e){e[e.Darken=0]="Darken",e[e.Lighten=1]="Lighten",e[e.Transparent=2]="Transparent",e[e.Opaque=3]="Opaque",e[e.OneOf=4]="OneOf",e[e.LessProminent=5]="LessProminent",e[e.IfDefinedThenElse=6]="IfDefinedThenElse",e[e.Mix=7]="Mix"}(Yl||(Yl={}));var Zl="base.contributions.colors",Jl="default",eh=new class extends Co{constructor(){super(),this._onDidChangeSchema=this._register(new Ro),this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}notifyThemeUpdate(e){for(let t of Object.keys(this.colorsById)){let i=e.getColor(t);i&&(this.colorSchema.properties[t].oneOf[0].defaultSnippets[0].body="${1:".concat(Ir.Format.CSS.formatHexA(i,!0),"}"))}this._onDidChangeSchema.fire()}registerColor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4?arguments[4]:void 0,r={id:e,description:i,defaults:t,needsTransparency:n,deprecationMessage:s};this.colorsById[e]=r;let o={type:"string",format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return s&&(o.deprecationMessage=s),n&&(o.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",o.patternErrorMessage=Li(2108,"This color must be transparent or it will obscure content")),this.colorSchema.properties[e]={description:i,oneOf:[o,{type:"string",const:Jl,description:Li(2109,"Use the default color.")}]},this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(i),this._onDidChangeSchema.fire(),e}deregisterColor(e){delete this.colorsById[e],delete this.colorSchema.properties[e];let t=this.colorReferenceSchema.enum.indexOf(e);-1!==t&&(this.colorReferenceSchema.enum.splice(t,1),this.colorReferenceSchema.enumDescriptions.splice(t,1)),this._onDidChangeSchema.fire()}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){let i=this.colorsById[e];if(null!==i&&void 0!==i&&i.defaults)return hh(function(e){return"object"==typeof e&&!!e&&"light"in e&&"dark"in e}(i.defaults)?i.defaults[t.type]:i.defaults,t)}getColorSchema(){return this.colorSchema}getColorReferenceSchema(){return this.colorReferenceSchema}toString(){return Object.keys(this.colorsById).sort((e,t)=>{let i=-1===e.indexOf(".")?0:1,n=-1===t.indexOf(".")?0:1;return i===n?e.localeCompare(t):i-n}).map(e=>"- `".concat(e,"`: ").concat(this.colorsById[e].description)).join("\n")}};function th(e,t,i,n,s){return eh.registerColor(e,t,i,n,s)}function ih(){return eh}function nh(e,t){var i,n,s;switch(e.op){case Yl.Darken:return null===(i=hh(e.value,t))||void 0===i?void 0:i.darken(e.factor);case Yl.Lighten:return null===(n=hh(e.value,t))||void 0===n?void 0:n.lighten(e.factor);case Yl.Transparent:return null===(s=hh(e.value,t))||void 0===s?void 0:s.transparent(e.factor);case Yl.Mix:{let i=hh(e.color,t)||Ir.transparent,n=hh(e.with,t)||Ir.transparent;return i.mix(n,e.ratio)}case Yl.Opaque:{var r;let i=hh(e.background,t);return i?null===(r=hh(e.value,t))||void 0===r?void 0:r.makeOpaque(i):hh(e.value,t)}case Yl.OneOf:for(let i of e.values){let e=hh(i,t);if(e)return e}return;case Yl.IfDefinedThenElse:return hh(t.defines(e.if)?e.then:e.else,t);case Yl.LessProminent:{let i=hh(e.value,t);if(!i)return;let n=hh(e.background,t);return n?i.isDarkerThan(n)?Ir.getLighterColor(i,n,e.factor).transparent(e.transparency):Ir.getDarkerColor(i,n,e.factor).transparent(e.transparency):i.transparent(e.factor*e.transparency)}default:throw function(e){throw Error(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unreachable")}()}}function sh(e,t){return{op:Yl.Darken,value:e,factor:t}}function rh(e,t){return{op:Yl.Lighten,value:e,factor:t}}function oh(e,t){return{op:Yl.Transparent,value:e,factor:t}}function ah(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return{op:Yl.OneOf,values:t}}function lh(e,t,i,n){return{op:Yl.LessProminent,value:e,background:t,factor:i,transparency:n}}function hh(e,t){if(null!==e){if("string"==typeof e)return"#"===e[0]?Ir.fromHex(e):t.getColor(e);if(e instanceof Ir)return e;if("object"==typeof e)return nh(e,t)}}Tn.add(Zl,eh);var dh="vscode://schemas/workbench-colors",ch=Tn.as(Gl);ch.registerSchema(dh,eh.getColorSchema());var uh=new Rl(()=>ch.notifySchemaChanged(dh),200);eh.onDidChangeSchema(()=>{uh.isScheduled()||uh.schedule()});var gh=th("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},Li(2110,"Overall foreground color. This color is only used if not overridden by a component."));th("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},Li(2111,"Overall foreground for disabled elements. This color is only used if not overridden by a component.")),th("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},Li(2112,"Overall foreground color for error messages. This color is only used if not overridden by a component.")),th("descriptionForeground",{light:"#717171",dark:oh(gh,.7),hcDark:oh(gh,.7),hcLight:oh(gh,.7)},Li(2113,"Foreground color for description text providing additional information, for example for a label."));var ph=th("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},Li(2114,"The default color for icons in the workbench.")),fh=th("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},Li(2115,"Overall border color for focused elements. This color is only used if not overridden by a component.")),mh=th("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},Li(2116,"An extra border around elements to separate them from others for greater contrast.")),vh=th("contrastActiveBorder",{light:null,dark:null,hcDark:fh,hcLight:fh},Li(2117,"An extra border around active elements to separate them from others for greater contrast."));th("selection.background",null,Li(2118,"The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor."));var _h=th("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},Li(2119,"Foreground color for links in text."));th("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},Li(2120,"Foreground color for links in text when clicked on and on mouse hover.")),th("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:Ir.black,hcLight:"#292929"},Li(2121,"Color for text separators.")),th("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},Li(2122,"Foreground color for preformatted text segments.")),th("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},Li(2123,"Background color for preformatted text segments.")),th("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},Li(2124,"Background color for block quotes in text.")),th("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:Ir.white,hcLight:"#292929"},Li(2125,"Border color for block quotes in text.")),th("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:Ir.black,hcLight:"#F2F2F2"},Li(2126,"Background color for code blocks in text.")),th("sash.hoverBorder",fh,Li(2330,"Border color of active sashes."));var bh=th("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:Ir.black,hcLight:"#0F4A85"},Li(2331,"Badge background color. Badges are small information labels, e.g. for search results count.")),Ch=th("badge.foreground",{dark:Ir.white,light:"#333",hcDark:Ir.white,hcLight:Ir.white},Li(2332,"Badge foreground color. Badges are small information labels, e.g. for search results count."));th("activityWarningBadge.foreground",{dark:Ir.white,light:Ir.white,hcDark:Ir.white,hcLight:Ir.white},Li(2333,"Foreground color of the warning activity badge")),th("activityWarningBadge.background",{dark:"#B27C00",light:"#B27C00",hcDark:null,hcLight:"#B27C00"},Li(2334,"Background color of the warning activity badge")),th("activityErrorBadge.foreground",{dark:Ir.black.lighten(.2),light:Ir.white,hcDark:null,hcLight:Ir.black.lighten(.2)},Li(2335,"Foreground color of the error activity badge")),th("activityErrorBadge.background",{dark:"#F14C4C",light:"#E51400",hcDark:null,hcLight:"#F14C4C"},Li(2336,"Background color of the error activity badge"));var yh=th("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},Li(2337,"Scrollbar shadow to indicate that the view is scrolled.")),wh=th("scrollbarSlider.background",{dark:Ir.fromHex("#797979").transparent(.4),light:Ir.fromHex("#646464").transparent(.4),hcDark:oh(mh,.6),hcLight:oh(mh,.4)},Li(2338,"Scrollbar slider background color.")),Sh=th("scrollbarSlider.hoverBackground",{dark:Ir.fromHex("#646464").transparent(.7),light:Ir.fromHex("#646464").transparent(.7),hcDark:oh(mh,.8),hcLight:oh(mh,.8)},Li(2339,"Scrollbar slider background color when hovering.")),kh=th("scrollbarSlider.activeBackground",{dark:Ir.fromHex("#BFBFBF").transparent(.4),light:Ir.fromHex("#000000").transparent(.6),hcDark:mh,hcLight:mh},Li(2340,"Scrollbar slider background color when clicked on."));th("scrollbar.background",null,Li(2341,"Scrollbar track background color."));var Eh=th("progressBar.background",{dark:Ir.fromHex("#0E70C0"),light:Ir.fromHex("#0E70C0"),hcDark:mh,hcLight:mh},Li(2342,"Background color of the progress bar that can show for long running operations."));th("chart.line",{dark:"#236B8E",light:"#236B8E",hcDark:"#236B8E",hcLight:"#236B8E"},Li(2343,"Line color for the chart.")),th("chart.axis",{dark:Ir.fromHex("#BFBFBF").transparent(.4),light:Ir.fromHex("#000000").transparent(.6),hcDark:mh,hcLight:mh},Li(2344,"Axis color for the chart.")),th("chart.guide",{dark:Ir.fromHex("#BFBFBF").transparent(.2),light:Ir.fromHex("#000000").transparent(.2),hcDark:mh,hcLight:mh},Li(2345,"Guide line for the chart."));var Dh=th("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:Ir.black,hcLight:Ir.white},Li(2135,"Editor background color.")),Th=th("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:Ir.white,hcLight:gh},Li(2136,"Editor default foreground color."));th("editorStickyScroll.background",Dh,Li(2137,"Background color of sticky scroll in the editor")),th("editorStickyScrollGutter.background",Dh,Li(2138,"Background color of the gutter part of sticky scroll in the editor")),th("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:Ir.fromHex("#0F4A85").transparent(.1)},Li(2139,"Background color of sticky scroll on hover in the editor")),th("editorStickyScroll.border",{dark:null,light:null,hcDark:mh,hcLight:mh},Li(2140,"Border color of sticky scroll in the editor")),th("editorStickyScroll.shadow",yh,Li(2141," Shadow color of sticky scroll in the editor"));var Ih=th("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:Ir.white},Li(2142,"Background color of editor widgets, such as find/replace.")),xh=th("editorWidget.foreground",gh,Li(2143,"Foreground color of editor widgets, such as find/replace.")),Lh=th("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:mh,hcLight:mh},Li(2144,"Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget."));th("editorWidget.resizeBorder",null,Li(2145,"Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),th("editorError.background",null,Li(2146,"Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);var Ah=th("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},Li(2147,"Foreground color of error squigglies in the editor."));th("editorError.border",{dark:null,light:null,hcDark:Ir.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},Li(2148,"If set, color of double underlines for errors in the editor."));var Nh=th("editorWarning.background",null,Li(2149,"Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Fh=th("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},Li(2150,"Foreground color of warning squigglies in the editor.")),Oh=th("editorWarning.border",{dark:null,light:null,hcDark:Ir.fromHex("#FFCC00").transparent(.8),hcLight:Ir.fromHex("#FFCC00").transparent(.8)},Li(2151,"If set, color of double underlines for warnings in the editor."));th("editorInfo.background",null,Li(2152,"Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);var Rh=th("editorInfo.foreground",{dark:"#59a4f9",light:"#0063d3",hcDark:"#59a4f9",hcLight:"#0063d3"},Li(2153,"Foreground color of info squigglies in the editor.")),Mh=th("editorInfo.border",{dark:null,light:null,hcDark:Ir.fromHex("#59a4f9").transparent(.8),hcLight:"#292929"},Li(2154,"If set, color of double underlines for infos in the editor."));th("editorHint.foreground",{dark:Ir.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},Li(2155,"Foreground color of hint squigglies in the editor.")),th("editorHint.border",{dark:null,light:null,hcDark:Ir.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},Li(2156,"If set, color of double underlines for hints in the editor.")),th("editorLink.activeForeground",{dark:"#4E94CE",light:Ir.blue,hcDark:Ir.cyan,hcLight:"#292929"},Li(2157,"Color of active links."));var Ph=th("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},Li(2158,"Color of the editor selection."));th("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:Ir.white},Li(2159,"Color of the selected text for high contrast."));var Bh=th("editor.inactiveSelectionBackground",{light:oh(Ph,.5),dark:oh(Ph,.5),hcDark:oh(Ph,.7),hcLight:oh(Ph,.5)},Li(2160,"Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),Uh=th("editor.selectionHighlightBackground",{light:lh(Ph,Dh,.3,.6),dark:lh(Ph,Dh,.3,.6),hcDark:null,hcLight:null},Li(2161,"Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);th("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:vh,hcLight:vh},Li(2162,"Border color for regions with the same content as the selection.")),th("editor.compositionBorder",{light:"#000000",dark:"#ffffff",hcLight:"#000000",hcDark:"#ffffff"},Li(2163,"The border color for an IME composition."));var Hh=th("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},Li(2164,"Color of the current search match."));th("editor.findMatchForeground",null,Li(2165,"Text color of the current search match."));var Wh=th("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},Li(2166,"Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0);th("editor.findMatchHighlightForeground",null,Li(2167,"Foreground color of the other search matches."),!0);var Vh=th("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},Li(2168,"Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);th("editor.findMatchBorder",{light:null,dark:null,hcDark:vh,hcLight:vh},Li(2169,"Border color of the current search match."));var zh=th("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:vh,hcLight:vh},Li(2170,"Border color of the other search matches."));th("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:oh(vh,.4),hcLight:oh(vh,.4)},Li(2171,"Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);var Kh=th("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},Li(2172,"Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),qh=th("editorHoverWidget.background",Ih,Li(2173,"Background color of the editor hover."));th("editorHoverWidget.foreground",xh,Li(2174,"Foreground color of the editor hover."));var Gh=th("editorHoverWidget.border",Lh,Li(2175,"Border color of the editor hover."));th("editorHoverWidget.statusBarBackground",{dark:rh(qh,.2),light:sh(qh,.05),hcDark:Ih,hcLight:Ih},Li(2176,"Background color of the editor hover status bar."));var jh=th("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:Ir.white,hcLight:Ir.black},Li(2177,"Foreground color of inline hints")),Yh=th("editorInlayHint.background",{dark:oh(bh,.1),light:oh(bh,.1),hcDark:oh(Ir.white,.1),hcLight:oh(bh,.1)},Li(2178,"Background color of inline hints"));th("editorInlayHint.typeForeground",jh,Li(2179,"Foreground color of inline hints for types")),th("editorInlayHint.typeBackground",Yh,Li(2180,"Background color of inline hints for types")),th("editorInlayHint.parameterForeground",jh,Li(2181,"Foreground color of inline hints for parameters")),th("editorInlayHint.parameterBackground",Yh,Li(2182,"Background color of inline hints for parameters"));var Qh=th("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},Li(2183,"The color used for the lightbulb actions icon."));th("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},Li(2184,"The color used for the lightbulb auto fix actions icon.")),th("editorLightBulbAi.foreground",Qh,Li(2185,"The color used for the lightbulb AI icon.")),th("editor.snippetTabstopHighlightBackground",{dark:new Ir(new Er(124,124,124,.3)),light:new Ir(new Er(10,50,100,.2)),hcDark:new Ir(new Er(124,124,124,.3)),hcLight:new Ir(new Er(10,50,100,.2))},Li(2186,"Highlight background color of a snippet tabstop.")),th("editor.snippetTabstopHighlightBorder",null,Li(2187,"Highlight border color of a snippet tabstop.")),th("editor.snippetFinalTabstopHighlightBackground",null,Li(2188,"Highlight background color of the final tabstop of a snippet.")),th("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new Ir(new Er(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},Li(2189,"Highlight border color of the final tabstop of a snippet."));var $h=new Ir(new Er(155,185,85,.2)),Xh=new Ir(new Er(255,0,0,.2));th("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},Li(2190,"Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),th("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},Li(2191,"Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),th("diffEditor.insertedLineBackground",{dark:$h,light:$h,hcDark:null,hcLight:null},Li(2192,"Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),th("diffEditor.removedLineBackground",{dark:Xh,light:Xh,hcDark:null,hcLight:null},Li(2193,"Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),th("diffEditorGutter.insertedLineBackground",null,Li(2194,"Background color for the margin where lines got inserted.")),th("diffEditorGutter.removedLineBackground",null,Li(2195,"Background color for the margin where lines got removed.")),th("diffEditorOverview.insertedForeground",null,Li(2196,"Diff overview ruler foreground for inserted content.")),th("diffEditorOverview.removedForeground",null,Li(2197,"Diff overview ruler foreground for removed content.")),th("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},Li(2198,"Outline color for the text that got inserted.")),th("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},Li(2199,"Outline color for text that got removed.")),th("diffEditor.border",{dark:null,light:null,hcDark:mh,hcLight:mh},Li(2200,"Border color between the two text editors.")),th("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},Li(2201,"Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),th("diffEditor.unchangedRegionBackground","sideBar.background",Li(2202,"The background color of unchanged blocks in the diff editor.")),th("diffEditor.unchangedRegionForeground","foreground",Li(2203,"The foreground color of unchanged blocks in the diff editor.")),th("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},Li(2204,"The background color of unchanged code in the diff editor."));var Zh=th("widget.shadow",{dark:oh(Ir.black,.36),light:oh(Ir.black,.16),hcDark:null,hcLight:null},Li(2205,"Shadow color of widgets such as find/replace inside the editor.")),Jh=th("widget.border",{dark:null,light:null,hcDark:mh,hcLight:mh},Li(2206,"Border color of widgets such as find/replace inside the editor.")),ed=th("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},Li(2207,"Toolbar background when hovering over actions using the mouse"));th("toolbar.hoverOutline",{dark:null,light:null,hcDark:vh,hcLight:vh},Li(2208,"Toolbar outline when hovering over actions using the mouse")),th("toolbar.activeBackground",{dark:rh(ed,.1),light:sh(ed,.1),hcDark:null,hcLight:null},Li(2209,"Toolbar background when holding the mouse over actions"));var td=th("breadcrumb.foreground",oh(gh,.8),Li(2210,"Color of focused breadcrumb items.")),id=th("breadcrumb.background",Dh,Li(2211,"Background color of breadcrumb items.")),nd=th("breadcrumb.focusForeground",{light:sh(gh,.2),dark:rh(gh,.1),hcDark:rh(gh,.1),hcLight:rh(gh,.1)},Li(2210,"Color of focused breadcrumb items.")),sd=th("breadcrumb.activeSelectionForeground",{light:sh(gh,.2),dark:rh(gh,.1),hcDark:rh(gh,.1),hcLight:rh(gh,.1)},Li(2212,"Color of selected breadcrumb items."));th("breadcrumbPicker.background",Ih,Li(2213,"Background color of breadcrumb item picker."));var rd=Ir.fromHex("#40C8AE").transparent(.5),od=Ir.fromHex("#40A6FF").transparent(.5),ad=Ir.fromHex("#606060").transparent(.4),ld=th("merge.currentHeaderBackground",{dark:rd,light:rd,hcDark:null,hcLight:null},Li(2214,"Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);th("merge.currentContentBackground",oh(ld,.4),Li(2215,"Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);var hd=th("merge.incomingHeaderBackground",{dark:od,light:od,hcDark:null,hcLight:null},Li(2216,"Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);th("merge.incomingContentBackground",oh(hd,.4),Li(2217,"Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);var dd=th("merge.commonHeaderBackground",{dark:ad,light:ad,hcDark:null,hcLight:null},Li(2218,"Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);th("merge.commonContentBackground",oh(dd,.4),Li(2219,"Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);var cd=th("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},Li(2220,"Border color on headers and the splitter in inline merge-conflicts."));th("editorOverviewRuler.currentContentForeground",{dark:oh(ld,1),light:oh(ld,1),hcDark:cd,hcLight:cd},Li(2221,"Current overview ruler foreground for inline merge-conflicts.")),th("editorOverviewRuler.incomingContentForeground",{dark:oh(hd,1),light:oh(hd,1),hcDark:cd,hcLight:cd},Li(2222,"Incoming overview ruler foreground for inline merge-conflicts.")),th("editorOverviewRuler.commonContentForeground",{dark:oh(dd,1),light:oh(dd,1),hcDark:cd,hcLight:cd},Li(2223,"Common ancestor overview ruler foreground for inline merge-conflicts.")),th("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:"#AB5A00"},Li(2224,"Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),th("editorOverviewRuler.selectionHighlightForeground","#A0A0A0CC",Li(2225,"Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0);var ud=th("problemsErrorIcon.foreground",Ah,Li(2226,"The color used for the problems error icon.")),gd=th("problemsWarningIcon.foreground",Fh,Li(2227,"The color used for the problems warning icon.")),pd=th("problemsInfoIcon.foreground",Rh,Li(2228,"The color used for the problems info icon.")),fd=th("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},Li(2319,"Minimap marker color for find matches."),!0);th("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},Li(2320,"Minimap marker color for repeating editor selections."),!0),th("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},Li(2321,"Minimap marker color for the editor selection."),!0);var md=th("minimap.infoHighlight",{dark:Rh,light:Rh,hcDark:Mh,hcLight:Mh},Li(2322,"Minimap marker color for infos.")),vd=th("minimap.warningHighlight",{dark:Fh,light:Fh,hcDark:Oh,hcLight:Oh},Li(2323,"Minimap marker color for warnings.")),_d=th("minimap.errorHighlight",{dark:new Ir(new Er(255,18,18,.7)),light:new Ir(new Er(255,18,18,.7)),hcDark:new Ir(new Er(255,50,50,1)),hcLight:"#B5200D"},Li(2324,"Minimap marker color for errors."));th("minimap.background",null,Li(2325,"Minimap background color.")),th("minimap.foregroundOpacity",Ir.fromHex("#000f"),Li(2326,'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.')),th("minimapSlider.background",oh(wh,.5),Li(2327,"Minimap slider background color.")),th("minimapSlider.hoverBackground",oh(Sh,.5),Li(2328,"Minimap slider background color when hovering.")),th("minimapSlider.activeBackground",oh(kh,.5),Li(2329,"Minimap slider background color when clicked on.")),th("charts.foreground",gh,Li(2127,"The foreground color used in charts.")),th("charts.lines",oh(gh,.5),Li(2128,"The color used for horizontal lines in charts.")),th("charts.red",Ah,Li(2129,"The red color used in chart visualizations.")),th("charts.blue",Rh,Li(2130,"The blue color used in chart visualizations.")),th("charts.yellow",Fh,Li(2131,"The yellow color used in chart visualizations.")),th("charts.orange",fd,Li(2132,"The orange color used in chart visualizations.")),th("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},Li(2133,"The green color used in chart visualizations.")),th("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},Li(2134,"The purple color used in chart visualizations."));var bd=th("input.background",{dark:"#3C3C3C",light:Ir.white,hcDark:Ir.black,hcLight:Ir.white},Li(2229,"Input box background.")),Cd=th("input.foreground",gh,Li(2230,"Input box foreground.")),yd=th("input.border",{dark:null,light:null,hcDark:mh,hcLight:mh},Li(2231,"Input box border.")),wd=th("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:mh,hcLight:mh},Li(2232,"Border color of activated options in input fields.")),Sd=th("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},Li(2233,"Background color of activated options in input fields.")),kd=th("inputOption.activeBackground",{dark:oh(fh,.4),light:oh(fh,.2),hcDark:Ir.transparent,hcLight:Ir.transparent},Li(2234,"Background hover color of options in input fields.")),Ed=th("inputOption.activeForeground",{dark:Ir.white,light:Ir.black,hcDark:gh,hcLight:gh},Li(2235,"Foreground color of activated options in input fields."));th("input.placeholderForeground",{light:oh(gh,.5),dark:oh(gh,.5),hcDark:oh(gh,.7),hcLight:oh(gh,.7)},Li(2236,"Input box foreground color for placeholder text."));var Dd=th("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:Ir.black,hcLight:Ir.white},Li(2237,"Input validation background color for information severity.")),Td=th("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:gh},Li(2238,"Input validation foreground color for information severity.")),Id=th("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:mh,hcLight:mh},Li(2239,"Input validation border color for information severity.")),xd=th("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:Ir.black,hcLight:Ir.white},Li(2240,"Input validation background color for warning severity.")),Ld=th("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:gh},Li(2241,"Input validation foreground color for warning severity.")),Ad=th("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:mh,hcLight:mh},Li(2242,"Input validation border color for warning severity.")),Nd=th("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:Ir.black,hcLight:Ir.white},Li(2243,"Input validation background color for error severity.")),Fd=th("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:gh},Li(2244,"Input validation foreground color for error severity.")),Od=th("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:mh,hcLight:mh},Li(2245,"Input validation border color for error severity.")),Rd=th("dropdown.background",{dark:"#3C3C3C",light:Ir.white,hcDark:Ir.black,hcLight:Ir.white},Li(2246,"Dropdown background.")),Md=th("dropdown.listBackground",{dark:null,light:null,hcDark:Ir.black,hcLight:Ir.white},Li(2247,"Dropdown list background.")),Pd=th("dropdown.foreground",{dark:"#F0F0F0",light:gh,hcDark:Ir.white,hcLight:gh},Li(2248,"Dropdown foreground.")),Bd=th("dropdown.border",{dark:Rd,light:"#CECECE",hcDark:mh,hcLight:mh},Li(2249,"Dropdown border.")),Ud=th("button.foreground",Ir.white,Li(2250,"Button foreground color.")),Hd=th("button.separator",oh(Ud,.4),Li(2251,"Button separator color.")),Wd=th("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:Ir.black,hcLight:"#0F4A85"},Li(2252,"Button background color.")),Vd=th("button.hoverBackground",{dark:rh(Wd,.2),light:sh(Wd,.2),hcDark:Wd,hcLight:Wd},Li(2253,"Button background color when hovering.")),zd=th("button.border",mh,Li(2254,"Button border color.")),Kd=th("button.secondaryForeground",{dark:Ir.white,light:Ir.white,hcDark:Ir.white,hcLight:gh},Li(2255,"Secondary button foreground color.")),qd=th("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:Ir.white},Li(2256,"Secondary button background color.")),Gd=th("button.secondaryHoverBackground",{dark:rh(qd,.2),light:sh(qd,.2),hcDark:null,hcLight:null},Li(2257,"Secondary button background color when hovering.")),jd=th("radio.activeForeground",Ed,Li(2258,"Foreground color of active radio option.")),Yd=th("radio.activeBackground",kd,Li(2259,"Background color of active radio option.")),Qd=th("radio.activeBorder",wd,Li(2260,"Border color of the active radio option.")),$d=th("radio.inactiveForeground",null,Li(2261,"Foreground color of inactive radio option.")),Xd=th("radio.inactiveBackground",null,Li(2262,"Background color of inactive radio option.")),Zd=th("radio.inactiveBorder",{light:oh(jd,.2),dark:oh(jd,.2),hcDark:oh(jd,.4),hcLight:oh(jd,.2)},Li(2263,"Border color of the inactive radio option.")),Jd=th("radio.inactiveHoverBackground",Sd,Li(2264,"Background color of inactive active radio option when hovering.")),ec=th("checkbox.background",Rd,Li(2265,"Background color of checkbox widget."));th("checkbox.selectBackground",Ih,Li(2266,"Background color of checkbox widget when the element it's in is selected."));var tc=th("checkbox.foreground",Pd,Li(2267,"Foreground color of checkbox widget.")),ic=th("checkbox.border",Bd,Li(2268,"Border color of checkbox widget."));th("checkbox.selectBorder",ph,Li(2269,"Border color of checkbox widget when the element it's in is selected."));var nc=th("checkbox.disabled.background",{op:Yl.Mix,color:ec,with:tc,ratio:.33},Li(2270,"Background of a disabled checkbox.")),sc=th("checkbox.disabled.foreground",{op:Yl.Mix,color:tc,with:ec,ratio:.33},Li(2271,"Foreground of a disabled checkbox.")),rc=th("keybindingLabel.background",{dark:new Ir(new Er(128,128,128,.17)),light:new Ir(new Er(221,221,221,.4)),hcDark:Ir.transparent,hcLight:Ir.transparent},Li(2272,"Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),oc=th("keybindingLabel.foreground",{dark:Ir.fromHex("#CCCCCC"),light:Ir.fromHex("#555555"),hcDark:Ir.white,hcLight:gh},Li(2273,"Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),ac=th("keybindingLabel.border",{dark:new Ir(new Er(51,51,51,.6)),light:new Ir(new Er(204,204,204,.4)),hcDark:new Ir(new Er(111,195,223)),hcLight:mh},Li(2274,"Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),lc=th("keybindingLabel.bottomBorder",{dark:new Ir(new Er(68,68,68,.6)),light:new Ir(new Er(187,187,187,.4)),hcDark:new Ir(new Er(111,195,223)),hcLight:gh},Li(2275,"Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),hc=th("list.focusBackground",null,Li(2276,"List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),dc=th("list.focusForeground",null,Li(2277,"List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),cc=th("list.focusOutline",{dark:fh,light:fh,hcDark:vh,hcLight:vh},Li(2278,"List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),uc=th("list.focusAndSelectionOutline",null,Li(2279,"List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),gc=th("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:Ir.fromHex("#0F4A85").transparent(.1)},Li(2280,"List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),pc=th("list.activeSelectionForeground",{dark:Ir.white,light:Ir.white,hcDark:null,hcLight:null},Li(2281,"List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),fc=th("list.activeSelectionIconForeground",null,Li(2282,"List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),mc=th("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:Ir.fromHex("#0F4A85").transparent(.1)},Li(2283,"List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),vc=th("list.inactiveSelectionForeground",null,Li(2284,"List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),_c=th("list.inactiveSelectionIconForeground",null,Li(2285,"List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),bc=th("list.inactiveFocusBackground",null,Li(2286,"List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Cc=th("list.inactiveFocusOutline",null,Li(2287,"List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),yc=th("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:Ir.white.transparent(.1),hcLight:Ir.fromHex("#0F4A85").transparent(.1)},Li(2288,"List/Tree background when hovering over items using the mouse.")),wc=th("list.hoverForeground",null,Li(2289,"List/Tree foreground when hovering over items using the mouse.")),Sc=th("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},Li(2290,"List/Tree drag and drop background when moving items over other items when using the mouse.")),kc=th("list.dropBetweenBackground",{dark:ph,light:ph,hcDark:null,hcLight:null},Li(2291,"List/Tree drag and drop border color when moving items between items when using the mouse.")),Ec=th("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:fh,hcLight:fh},Li(2292,"List/Tree foreground color of the match highlights when searching inside the list/tree."));th("list.focusHighlightForeground",{dark:Ec,light:function(e,t,i){return{op:Yl.IfDefinedThenElse,if:e,then:t,else:i}}(gc,Ec,"#BBE7FF"),hcDark:Ec,hcLight:Ec},Li(2293,"List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree.")),th("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},Li(2294,"List/Tree foreground color for invalid items, for example an unresolved root in explorer."));var Dc=th("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},Li(2295,"Foreground color of list items containing errors."));th("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},Li(2296,"Foreground color of list items containing warnings."));var Tc=th("listFilterWidget.background",{light:sh(Ih,0),dark:rh(Ih,0),hcDark:Ih,hcLight:Ih},Li(2297,"Background color of the type filter widget in lists and trees.")),Ic=th("listFilterWidget.outline",{dark:Ir.transparent,light:Ir.transparent,hcDark:"#f38518",hcLight:"#007ACC"},Li(2298,"Outline color of the type filter widget in lists and trees.")),xc=th("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:mh,hcLight:mh},Li(2299,"Outline color of the type filter widget in lists and trees, when there are no matches.")),Lc=th("listFilterWidget.shadow",Zh,Li(2300,"Shadow color of the type filter widget in lists and trees."));th("list.filterMatchBackground",{dark:Wh,light:Wh,hcDark:null,hcLight:null},Li(2301,"Background color of the filtered match.")),th("list.filterMatchBorder",{dark:zh,light:zh,hcDark:mh,hcLight:vh},Li(2302,"Border color of the filtered match.")),th("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},Li(2303,"List/Tree foreground color for items that are deemphasized."));var Ac=th("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},Li(2304,"Tree stroke color for the indentation guides.")),Nc=th("tree.inactiveIndentGuidesStroke",oh(Ac,.4),Li(2305,"Tree stroke color for the indentation guides that are not active.")),Fc=th("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},Li(2306,"Table border color between columns.")),Oc=th("tree.tableOddRowsBackground",{dark:oh(gh,.04),light:oh(gh,.04),hcDark:null,hcLight:null},Li(2307,"Background color for odd table rows."));th("editorActionList.background",Ih,Li(2308,"Action List background color.")),th("editorActionList.foreground",xh,Li(2309,"Action List foreground color.")),th("editorActionList.focusForeground",pc,Li(2310,"Action List foreground color for the focused item.")),th("editorActionList.focusBackground",gc,Li(2311,"Action List background color for the focused item."));var Rc=th("menu.border",{dark:null,light:null,hcDark:mh,hcLight:mh},Li(2312,"Border color of menus.")),Mc=th("menu.foreground",Pd,Li(2313,"Foreground color of menu items.")),Pc=th("menu.background",Rd,Li(2314,"Background color of menu items.")),Bc=th("menu.selectionForeground",pc,Li(2315,"Foreground color of the selected menu item in menus.")),Uc=th("menu.selectionBackground",gc,Li(2316,"Background color of the selected menu item in menus.")),Hc=th("menu.selectionBorder",{dark:null,light:null,hcDark:vh,hcLight:vh},Li(2317,"Border color of the selected menu item in menus.")),Wc=th("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:mh,hcLight:mh},Li(2318,"Color of a separator menu item in menus.")),Vc=th("quickInput.background",Ih,Li(2346,"Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),zc=th("quickInput.foreground",xh,Li(2347,"Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),Kc=th("quickInputTitle.background",{dark:new Ir(new Er(255,255,255,.105)),light:new Ir(new Er(0,0,0,.06)),hcDark:"#000000",hcLight:Ir.white},Li(2348,"Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),qc=th("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:Ir.white,hcLight:"#0F4A85"},Li(2349,"Quick picker color for grouping labels.")),Gc=th("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:Ir.white,hcLight:"#0F4A85"},Li(2350,"Quick picker color for grouping borders.")),jc=th("quickInput.list.focusBackground",null,"",void 0,Li(2351,"Please use quickInputList.focusBackground instead")),Yc=th("quickInputList.focusForeground",pc,Li(2352,"Quick picker foreground color for the focused item.")),Qc=th("quickInputList.focusIconForeground",fc,Li(2353,"Quick picker icon foreground color for the focused item.")),$c=th("quickInputList.focusBackground",{dark:ah(jc,gc),light:ah(jc,gc),hcDark:null,hcLight:null},Li(2354,"Quick picker background color for the focused item."));th("search.resultsInfoForeground",{light:gh,dark:oh(gh,.65),hcDark:gh,hcLight:gh},Li(2355,"Color of the text in the search viewlet's completion message.")),th("searchEditor.findMatchBackground",{light:oh(Wh,.66),dark:oh(Wh,.66),hcDark:Wh,hcLight:Wh},Li(2356,"Color of the Search Editor query matches.")),th("searchEditor.findMatchBorder",{light:oh(zh,.66),dark:oh(zh,.66),hcDark:zh,hcLight:zh},Li(2357,"Border color of the Search Editor query matches."));var Xc=Object.create(null);function Zc(e,t){if($i(t)){let i=Xc[t];if(void 0===i)throw Error("".concat(e," references an unknown codicon: ").concat(t));t=i}return Xc[e]=t,{id:e}}function Jc(){return Xc}var eu,tu,iu={add:Zc("add",6e4),plus:Zc("plus",6e4),gistNew:Zc("gist-new",6e4),repoCreate:Zc("repo-create",6e4),lightbulb:Zc("lightbulb",60001),lightBulb:Zc("light-bulb",60001),repo:Zc("repo",60002),repoDelete:Zc("repo-delete",60002),gistFork:Zc("gist-fork",60003),repoForked:Zc("repo-forked",60003),gitPullRequest:Zc("git-pull-request",60004),gitPullRequestAbandoned:Zc("git-pull-request-abandoned",60004),recordKeys:Zc("record-keys",60005),keyboard:Zc("keyboard",60005),tag:Zc("tag",60006),gitPullRequestLabel:Zc("git-pull-request-label",60006),tagAdd:Zc("tag-add",60006),tagRemove:Zc("tag-remove",60006),person:Zc("person",60007),personFollow:Zc("person-follow",60007),personOutline:Zc("person-outline",60007),personFilled:Zc("person-filled",60007),sourceControl:Zc("source-control",60008),mirror:Zc("mirror",60009),mirrorPublic:Zc("mirror-public",60009),star:Zc("star",60010),starAdd:Zc("star-add",60010),starDelete:Zc("star-delete",60010),starEmpty:Zc("star-empty",60010),comment:Zc("comment",60011),commentAdd:Zc("comment-add",60011),alert:Zc("alert",60012),warning:Zc("warning",60012),search:Zc("search",60013),searchSave:Zc("search-save",60013),logOut:Zc("log-out",60014),signOut:Zc("sign-out",60014),logIn:Zc("log-in",60015),signIn:Zc("sign-in",60015),eye:Zc("eye",60016),eyeUnwatch:Zc("eye-unwatch",60016),eyeWatch:Zc("eye-watch",60016),circleFilled:Zc("circle-filled",60017),primitiveDot:Zc("primitive-dot",60017),closeDirty:Zc("close-dirty",60017),debugBreakpoint:Zc("debug-breakpoint",60017),debugBreakpointDisabled:Zc("debug-breakpoint-disabled",60017),debugHint:Zc("debug-hint",60017),terminalDecorationSuccess:Zc("terminal-decoration-success",60017),primitiveSquare:Zc("primitive-square",60018),edit:Zc("edit",60019),pencil:Zc("pencil",60019),info:Zc("info",60020),issueOpened:Zc("issue-opened",60020),gistPrivate:Zc("gist-private",60021),gitForkPrivate:Zc("git-fork-private",60021),lock:Zc("lock",60021),mirrorPrivate:Zc("mirror-private",60021),close:Zc("close",60022),removeClose:Zc("remove-close",60022),x:Zc("x",60022),repoSync:Zc("repo-sync",60023),sync:Zc("sync",60023),clone:Zc("clone",60024),desktopDownload:Zc("desktop-download",60024),beaker:Zc("beaker",60025),microscope:Zc("microscope",60025),vm:Zc("vm",60026),deviceDesktop:Zc("device-desktop",60026),file:Zc("file",60027),more:Zc("more",60028),ellipsis:Zc("ellipsis",60028),kebabHorizontal:Zc("kebab-horizontal",60028),mailReply:Zc("mail-reply",60029),reply:Zc("reply",60029),organization:Zc("organization",60030),organizationFilled:Zc("organization-filled",60030),organizationOutline:Zc("organization-outline",60030),newFile:Zc("new-file",60031),fileAdd:Zc("file-add",60031),newFolder:Zc("new-folder",60032),fileDirectoryCreate:Zc("file-directory-create",60032),trash:Zc("trash",60033),trashcan:Zc("trashcan",60033),history:Zc("history",60034),clock:Zc("clock",60034),folder:Zc("folder",60035),fileDirectory:Zc("file-directory",60035),symbolFolder:Zc("symbol-folder",60035),logoGithub:Zc("logo-github",60036),markGithub:Zc("mark-github",60036),github:Zc("github",60036),terminal:Zc("terminal",60037),console:Zc("console",60037),repl:Zc("repl",60037),zap:Zc("zap",60038),symbolEvent:Zc("symbol-event",60038),error:Zc("error",60039),stop:Zc("stop",60039),variable:Zc("variable",60040),symbolVariable:Zc("symbol-variable",60040),array:Zc("array",60042),symbolArray:Zc("symbol-array",60042),symbolModule:Zc("symbol-module",60043),symbolPackage:Zc("symbol-package",60043),symbolNamespace:Zc("symbol-namespace",60043),symbolObject:Zc("symbol-object",60043),symbolMethod:Zc("symbol-method",60044),symbolFunction:Zc("symbol-function",60044),symbolConstructor:Zc("symbol-constructor",60044),symbolBoolean:Zc("symbol-boolean",60047),symbolNull:Zc("symbol-null",60047),symbolNumeric:Zc("symbol-numeric",60048),symbolNumber:Zc("symbol-number",60048),symbolStructure:Zc("symbol-structure",60049),symbolStruct:Zc("symbol-struct",60049),symbolParameter:Zc("symbol-parameter",60050),symbolTypeParameter:Zc("symbol-type-parameter",60050),symbolKey:Zc("symbol-key",60051),symbolText:Zc("symbol-text",60051),symbolReference:Zc("symbol-reference",60052),goToFile:Zc("go-to-file",60052),symbolEnum:Zc("symbol-enum",60053),symbolValue:Zc("symbol-value",60053),symbolRuler:Zc("symbol-ruler",60054),symbolUnit:Zc("symbol-unit",60054),activateBreakpoints:Zc("activate-breakpoints",60055),archive:Zc("archive",60056),arrowBoth:Zc("arrow-both",60057),arrowDown:Zc("arrow-down",60058),arrowLeft:Zc("arrow-left",60059),arrowRight:Zc("arrow-right",60060),arrowSmallDown:Zc("arrow-small-down",60061),arrowSmallLeft:Zc("arrow-small-left",60062),arrowSmallRight:Zc("arrow-small-right",60063),arrowSmallUp:Zc("arrow-small-up",60064),arrowUp:Zc("arrow-up",60065),bell:Zc("bell",60066),bold:Zc("bold",60067),book:Zc("book",60068),bookmark:Zc("bookmark",60069),debugBreakpointConditionalUnverified:Zc("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:Zc("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:Zc("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:Zc("debug-breakpoint-data-unverified",60072),debugBreakpointData:Zc("debug-breakpoint-data",60073),debugBreakpointDataDisabled:Zc("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:Zc("debug-breakpoint-log-unverified",60074),debugBreakpointLog:Zc("debug-breakpoint-log",60075),debugBreakpointLogDisabled:Zc("debug-breakpoint-log-disabled",60075),briefcase:Zc("briefcase",60076),broadcast:Zc("broadcast",60077),browser:Zc("browser",60078),bug:Zc("bug",60079),calendar:Zc("calendar",60080),caseSensitive:Zc("case-sensitive",60081),check:Zc("check",60082),checklist:Zc("checklist",60083),chevronDown:Zc("chevron-down",60084),chevronLeft:Zc("chevron-left",60085),chevronRight:Zc("chevron-right",60086),chevronUp:Zc("chevron-up",60087),chromeClose:Zc("chrome-close",60088),chromeMaximize:Zc("chrome-maximize",60089),chromeMinimize:Zc("chrome-minimize",60090),chromeRestore:Zc("chrome-restore",60091),circleOutline:Zc("circle-outline",60092),circle:Zc("circle",60092),debugBreakpointUnverified:Zc("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:Zc("terminal-decoration-incomplete",60092),circleSlash:Zc("circle-slash",60093),circuitBoard:Zc("circuit-board",60094),clearAll:Zc("clear-all",60095),clippy:Zc("clippy",60096),closeAll:Zc("close-all",60097),cloudDownload:Zc("cloud-download",60098),cloudUpload:Zc("cloud-upload",60099),code:Zc("code",60100),collapseAll:Zc("collapse-all",60101),colorMode:Zc("color-mode",60102),commentDiscussion:Zc("comment-discussion",60103),creditCard:Zc("credit-card",60105),dash:Zc("dash",60108),dashboard:Zc("dashboard",60109),database:Zc("database",60110),debugContinue:Zc("debug-continue",60111),debugDisconnect:Zc("debug-disconnect",60112),debugPause:Zc("debug-pause",60113),debugRestart:Zc("debug-restart",60114),debugStart:Zc("debug-start",60115),debugStepInto:Zc("debug-step-into",60116),debugStepOut:Zc("debug-step-out",60117),debugStepOver:Zc("debug-step-over",60118),debugStop:Zc("debug-stop",60119),debug:Zc("debug",60120),deviceCameraVideo:Zc("device-camera-video",60121),deviceCamera:Zc("device-camera",60122),deviceMobile:Zc("device-mobile",60123),diffAdded:Zc("diff-added",60124),diffIgnored:Zc("diff-ignored",60125),diffModified:Zc("diff-modified",60126),diffRemoved:Zc("diff-removed",60127),diffRenamed:Zc("diff-renamed",60128),diff:Zc("diff",60129),diffSidebyside:Zc("diff-sidebyside",60129),discard:Zc("discard",60130),editorLayout:Zc("editor-layout",60131),emptyWindow:Zc("empty-window",60132),exclude:Zc("exclude",60133),extensions:Zc("extensions",60134),eyeClosed:Zc("eye-closed",60135),fileBinary:Zc("file-binary",60136),fileCode:Zc("file-code",60137),fileMedia:Zc("file-media",60138),filePdf:Zc("file-pdf",60139),fileSubmodule:Zc("file-submodule",60140),fileSymlinkDirectory:Zc("file-symlink-directory",60141),fileSymlinkFile:Zc("file-symlink-file",60142),fileZip:Zc("file-zip",60143),files:Zc("files",60144),filter:Zc("filter",60145),flame:Zc("flame",60146),foldDown:Zc("fold-down",60147),foldUp:Zc("fold-up",60148),fold:Zc("fold",60149),folderActive:Zc("folder-active",60150),folderOpened:Zc("folder-opened",60151),gear:Zc("gear",60152),gift:Zc("gift",60153),gistSecret:Zc("gist-secret",60154),gist:Zc("gist",60155),gitCommit:Zc("git-commit",60156),gitCompare:Zc("git-compare",60157),compareChanges:Zc("compare-changes",60157),gitMerge:Zc("git-merge",60158),githubAction:Zc("github-action",60159),githubAlt:Zc("github-alt",60160),globe:Zc("globe",60161),grabber:Zc("grabber",60162),graph:Zc("graph",60163),gripper:Zc("gripper",60164),heart:Zc("heart",60165),home:Zc("home",60166),horizontalRule:Zc("horizontal-rule",60167),hubot:Zc("hubot",60168),inbox:Zc("inbox",60169),issueReopened:Zc("issue-reopened",60171),issues:Zc("issues",60172),italic:Zc("italic",60173),jersey:Zc("jersey",60174),json:Zc("json",60175),kebabVertical:Zc("kebab-vertical",60176),key:Zc("key",60177),law:Zc("law",60178),lightbulbAutofix:Zc("lightbulb-autofix",60179),linkExternal:Zc("link-external",60180),link:Zc("link",60181),listOrdered:Zc("list-ordered",60182),listUnordered:Zc("list-unordered",60183),liveShare:Zc("live-share",60184),loading:Zc("loading",60185),location:Zc("location",60186),mailRead:Zc("mail-read",60187),mail:Zc("mail",60188),markdown:Zc("markdown",60189),megaphone:Zc("megaphone",60190),mention:Zc("mention",60191),milestone:Zc("milestone",60192),gitPullRequestMilestone:Zc("git-pull-request-milestone",60192),mortarBoard:Zc("mortar-board",60193),move:Zc("move",60194),multipleWindows:Zc("multiple-windows",60195),mute:Zc("mute",60196),noNewline:Zc("no-newline",60197),note:Zc("note",60198),octoface:Zc("octoface",60199),openPreview:Zc("open-preview",60200),package:Zc("package",60201),paintcan:Zc("paintcan",60202),pin:Zc("pin",60203),play:Zc("play",60204),run:Zc("run",60204),plug:Zc("plug",60205),preserveCase:Zc("preserve-case",60206),preview:Zc("preview",60207),project:Zc("project",60208),pulse:Zc("pulse",60209),question:Zc("question",60210),quote:Zc("quote",60211),radioTower:Zc("radio-tower",60212),reactions:Zc("reactions",60213),references:Zc("references",60214),refresh:Zc("refresh",60215),regex:Zc("regex",60216),remoteExplorer:Zc("remote-explorer",60217),remote:Zc("remote",60218),remove:Zc("remove",60219),replaceAll:Zc("replace-all",60220),replace:Zc("replace",60221),repoClone:Zc("repo-clone",60222),repoForcePush:Zc("repo-force-push",60223),repoPull:Zc("repo-pull",60224),repoPush:Zc("repo-push",60225),report:Zc("report",60226),requestChanges:Zc("request-changes",60227),rocket:Zc("rocket",60228),rootFolderOpened:Zc("root-folder-opened",60229),rootFolder:Zc("root-folder",60230),rss:Zc("rss",60231),ruby:Zc("ruby",60232),saveAll:Zc("save-all",60233),saveAs:Zc("save-as",60234),save:Zc("save",60235),screenFull:Zc("screen-full",60236),screenNormal:Zc("screen-normal",60237),searchStop:Zc("search-stop",60238),server:Zc("server",60240),settingsGear:Zc("settings-gear",60241),settings:Zc("settings",60242),shield:Zc("shield",60243),smiley:Zc("smiley",60244),sortPrecedence:Zc("sort-precedence",60245),splitHorizontal:Zc("split-horizontal",60246),splitVertical:Zc("split-vertical",60247),squirrel:Zc("squirrel",60248),starFull:Zc("star-full",60249),starHalf:Zc("star-half",60250),symbolClass:Zc("symbol-class",60251),symbolColor:Zc("symbol-color",60252),symbolConstant:Zc("symbol-constant",60253),symbolEnumMember:Zc("symbol-enum-member",60254),symbolField:Zc("symbol-field",60255),symbolFile:Zc("symbol-file",60256),symbolInterface:Zc("symbol-interface",60257),symbolKeyword:Zc("symbol-keyword",60258),symbolMisc:Zc("symbol-misc",60259),symbolOperator:Zc("symbol-operator",60260),symbolProperty:Zc("symbol-property",60261),wrench:Zc("wrench",60261),wrenchSubaction:Zc("wrench-subaction",60261),symbolSnippet:Zc("symbol-snippet",60262),tasklist:Zc("tasklist",60263),telescope:Zc("telescope",60264),textSize:Zc("text-size",60265),threeBars:Zc("three-bars",60266),thumbsdown:Zc("thumbsdown",60267),thumbsup:Zc("thumbsup",60268),tools:Zc("tools",60269),triangleDown:Zc("triangle-down",60270),triangleLeft:Zc("triangle-left",60271),triangleRight:Zc("triangle-right",60272),triangleUp:Zc("triangle-up",60273),twitter:Zc("twitter",60274),unfold:Zc("unfold",60275),unlock:Zc("unlock",60276),unmute:Zc("unmute",60277),unverified:Zc("unverified",60278),verified:Zc("verified",60279),versions:Zc("versions",60280),vmActive:Zc("vm-active",60281),vmOutline:Zc("vm-outline",60282),vmRunning:Zc("vm-running",60283),watch:Zc("watch",60284),whitespace:Zc("whitespace",60285),wholeWord:Zc("whole-word",60286),window:Zc("window",60287),wordWrap:Zc("word-wrap",60288),zoomIn:Zc("zoom-in",60289),zoomOut:Zc("zoom-out",60290),listFilter:Zc("list-filter",60291),listFlat:Zc("list-flat",60292),listSelection:Zc("list-selection",60293),selection:Zc("selection",60293),listTree:Zc("list-tree",60294),debugBreakpointFunctionUnverified:Zc("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:Zc("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:Zc("debug-breakpoint-function-disabled",60296),debugStackframeActive:Zc("debug-stackframe-active",60297),circleSmallFilled:Zc("circle-small-filled",60298),debugStackframeDot:Zc("debug-stackframe-dot",60298),terminalDecorationMark:Zc("terminal-decoration-mark",60298),debugStackframe:Zc("debug-stackframe",60299),debugStackframeFocused:Zc("debug-stackframe-focused",60299),debugBreakpointUnsupported:Zc("debug-breakpoint-unsupported",60300),symbolString:Zc("symbol-string",60301),debugReverseContinue:Zc("debug-reverse-continue",60302),debugStepBack:Zc("debug-step-back",60303),debugRestartFrame:Zc("debug-restart-frame",60304),debugAlt:Zc("debug-alt",60305),callIncoming:Zc("call-incoming",60306),callOutgoing:Zc("call-outgoing",60307),menu:Zc("menu",60308),expandAll:Zc("expand-all",60309),feedback:Zc("feedback",60310),gitPullRequestReviewer:Zc("git-pull-request-reviewer",60310),groupByRefType:Zc("group-by-ref-type",60311),ungroupByRefType:Zc("ungroup-by-ref-type",60312),account:Zc("account",60313),gitPullRequestAssignee:Zc("git-pull-request-assignee",60313),bellDot:Zc("bell-dot",60314),debugConsole:Zc("debug-console",60315),library:Zc("library",60316),output:Zc("output",60317),runAll:Zc("run-all",60318),syncIgnored:Zc("sync-ignored",60319),pinned:Zc("pinned",60320),githubInverted:Zc("github-inverted",60321),serverProcess:Zc("server-process",60322),serverEnvironment:Zc("server-environment",60323),pass:Zc("pass",60324),issueClosed:Zc("issue-closed",60324),stopCircle:Zc("stop-circle",60325),playCircle:Zc("play-circle",60326),record:Zc("record",60327),debugAltSmall:Zc("debug-alt-small",60328),vmConnect:Zc("vm-connect",60329),cloud:Zc("cloud",60330),merge:Zc("merge",60331),export:Zc("export",60332),graphLeft:Zc("graph-left",60333),magnet:Zc("magnet",60334),notebook:Zc("notebook",60335),redo:Zc("redo",60336),checkAll:Zc("check-all",60337),pinnedDirty:Zc("pinned-dirty",60338),passFilled:Zc("pass-filled",60339),circleLargeFilled:Zc("circle-large-filled",60340),circleLarge:Zc("circle-large",60341),circleLargeOutline:Zc("circle-large-outline",60341),combine:Zc("combine",60342),gather:Zc("gather",60342),table:Zc("table",60343),variableGroup:Zc("variable-group",60344),typeHierarchy:Zc("type-hierarchy",60345),typeHierarchySub:Zc("type-hierarchy-sub",60346),typeHierarchySuper:Zc("type-hierarchy-super",60347),gitPullRequestCreate:Zc("git-pull-request-create",60348),runAbove:Zc("run-above",60349),runBelow:Zc("run-below",60350),notebookTemplate:Zc("notebook-template",60351),debugRerun:Zc("debug-rerun",60352),workspaceTrusted:Zc("workspace-trusted",60353),workspaceUntrusted:Zc("workspace-untrusted",60354),workspaceUnknown:Zc("workspace-unknown",60355),terminalCmd:Zc("terminal-cmd",60356),terminalDebian:Zc("terminal-debian",60357),terminalLinux:Zc("terminal-linux",60358),terminalPowershell:Zc("terminal-powershell",60359),terminalTmux:Zc("terminal-tmux",60360),terminalUbuntu:Zc("terminal-ubuntu",60361),terminalBash:Zc("terminal-bash",60362),arrowSwap:Zc("arrow-swap",60363),copy:Zc("copy",60364),personAdd:Zc("person-add",60365),filterFilled:Zc("filter-filled",60366),wand:Zc("wand",60367),debugLineByLine:Zc("debug-line-by-line",60368),inspect:Zc("inspect",60369),layers:Zc("layers",60370),layersDot:Zc("layers-dot",60371),layersActive:Zc("layers-active",60372),compass:Zc("compass",60373),compassDot:Zc("compass-dot",60374),compassActive:Zc("compass-active",60375),azure:Zc("azure",60376),issueDraft:Zc("issue-draft",60377),gitPullRequestClosed:Zc("git-pull-request-closed",60378),gitPullRequestDraft:Zc("git-pull-request-draft",60379),debugAll:Zc("debug-all",60380),debugCoverage:Zc("debug-coverage",60381),runErrors:Zc("run-errors",60382),folderLibrary:Zc("folder-library",60383),debugContinueSmall:Zc("debug-continue-small",60384),beakerStop:Zc("beaker-stop",60385),graphLine:Zc("graph-line",60386),graphScatter:Zc("graph-scatter",60387),pieChart:Zc("pie-chart",60388),bracket:Zc("bracket",60175),bracketDot:Zc("bracket-dot",60389),bracketError:Zc("bracket-error",60390),lockSmall:Zc("lock-small",60391),azureDevops:Zc("azure-devops",60392),verifiedFilled:Zc("verified-filled",60393),newline:Zc("newline",60394),layout:Zc("layout",60395),layoutActivitybarLeft:Zc("layout-activitybar-left",60396),layoutActivitybarRight:Zc("layout-activitybar-right",60397),layoutPanelLeft:Zc("layout-panel-left",60398),layoutPanelCenter:Zc("layout-panel-center",60399),layoutPanelJustify:Zc("layout-panel-justify",60400),layoutPanelRight:Zc("layout-panel-right",60401),layoutPanel:Zc("layout-panel",60402),layoutSidebarLeft:Zc("layout-sidebar-left",60403),layoutSidebarRight:Zc("layout-sidebar-right",60404),layoutStatusbar:Zc("layout-statusbar",60405),layoutMenubar:Zc("layout-menubar",60406),layoutCentered:Zc("layout-centered",60407),target:Zc("target",60408),indent:Zc("indent",60409),recordSmall:Zc("record-small",60410),errorSmall:Zc("error-small",60411),terminalDecorationError:Zc("terminal-decoration-error",60411),arrowCircleDown:Zc("arrow-circle-down",60412),arrowCircleLeft:Zc("arrow-circle-left",60413),arrowCircleRight:Zc("arrow-circle-right",60414),arrowCircleUp:Zc("arrow-circle-up",60415),layoutSidebarRightOff:Zc("layout-sidebar-right-off",60416),layoutPanelOff:Zc("layout-panel-off",60417),layoutSidebarLeftOff:Zc("layout-sidebar-left-off",60418),blank:Zc("blank",60419),heartFilled:Zc("heart-filled",60420),map:Zc("map",60421),mapHorizontal:Zc("map-horizontal",60421),foldHorizontal:Zc("fold-horizontal",60421),mapFilled:Zc("map-filled",60422),mapHorizontalFilled:Zc("map-horizontal-filled",60422),foldHorizontalFilled:Zc("fold-horizontal-filled",60422),circleSmall:Zc("circle-small",60423),bellSlash:Zc("bell-slash",60424),bellSlashDot:Zc("bell-slash-dot",60425),commentUnresolved:Zc("comment-unresolved",60426),gitPullRequestGoToChanges:Zc("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:Zc("git-pull-request-new-changes",60428),searchFuzzy:Zc("search-fuzzy",60429),commentDraft:Zc("comment-draft",60430),send:Zc("send",60431),sparkle:Zc("sparkle",60432),insert:Zc("insert",60433),mic:Zc("mic",60434),thumbsdownFilled:Zc("thumbsdown-filled",60435),thumbsupFilled:Zc("thumbsup-filled",60436),coffee:Zc("coffee",60437),snake:Zc("snake",60438),game:Zc("game",60439),vr:Zc("vr",60440),chip:Zc("chip",60441),piano:Zc("piano",60442),music:Zc("music",60443),micFilled:Zc("mic-filled",60444),repoFetch:Zc("repo-fetch",60445),copilot:Zc("copilot",60446),lightbulbSparkle:Zc("lightbulb-sparkle",60447),robot:Zc("robot",60448),sparkleFilled:Zc("sparkle-filled",60449),diffSingle:Zc("diff-single",60450),diffMultiple:Zc("diff-multiple",60451),surroundWith:Zc("surround-with",60452),share:Zc("share",60453),gitStash:Zc("git-stash",60454),gitStashApply:Zc("git-stash-apply",60455),gitStashPop:Zc("git-stash-pop",60456),vscode:Zc("vscode",60457),vscodeInsiders:Zc("vscode-insiders",60458),codeOss:Zc("code-oss",60459),runCoverage:Zc("run-coverage",60460),runAllCoverage:Zc("run-all-coverage",60461),coverage:Zc("coverage",60462),githubProject:Zc("github-project",60463),mapVertical:Zc("map-vertical",60464),foldVertical:Zc("fold-vertical",60464),mapVerticalFilled:Zc("map-vertical-filled",60465),foldVerticalFilled:Zc("fold-vertical-filled",60465),goToSearch:Zc("go-to-search",60466),percentage:Zc("percentage",60467),sortPercentage:Zc("sort-percentage",60467),attach:Zc("attach",60468),goToEditingSession:Zc("go-to-editing-session",60469),editSession:Zc("edit-session",60470),codeReview:Zc("code-review",60471),copilotWarning:Zc("copilot-warning",60472),python:Zc("python",60473),copilotLarge:Zc("copilot-large",60474),copilotWarningLarge:Zc("copilot-warning-large",60475),keyboardTab:Zc("keyboard-tab",60476),copilotBlocked:Zc("copilot-blocked",60477),copilotNotConnected:Zc("copilot-not-connected",60478),flag:Zc("flag",60479),lightbulbEmpty:Zc("lightbulb-empty",60480),symbolMethodArrow:Zc("symbol-method-arrow",60481),copilotUnavailable:Zc("copilot-unavailable",60482),repoPinned:Zc("repo-pinned",60483),keyboardTabAbove:Zc("keyboard-tab-above",60484),keyboardTabBelow:Zc("keyboard-tab-below",60485),gitPullRequestDone:Zc("git-pull-request-done",60486),mcp:Zc("mcp",60487),extensionsLarge:Zc("extensions-large",60488),layoutPanelDock:Zc("layout-panel-dock",60489),layoutSidebarLeftDock:Zc("layout-sidebar-left-dock",60490),layoutSidebarRightDock:Zc("layout-sidebar-right-dock",60491),copilotInProgress:Zc("copilot-in-progress",60492),copilotError:Zc("copilot-error",60493),copilotSuccess:Zc("copilot-success",60494),chatSparkle:Zc("chat-sparkle",60495),searchSparkle:Zc("search-sparkle",60496),editSparkle:Zc("edit-sparkle",60497),copilotSnooze:Zc("copilot-snooze",60498),sendToRemoteAgent:Zc("send-to-remote-agent",60499),commentDiscussionSparkle:Zc("comment-discussion-sparkle",60500),chatSparkleWarning:Zc("chat-sparkle-warning",60501),chatSparkleError:Zc("chat-sparkle-error",60502),collection:Zc("collection",60503),newCollection:Zc("new-collection",60504),thinking:Zc("thinking",60505),build:Zc("build",60506),commentDiscussionQuote:Zc("comment-discussion-quote",60507),cursor:Zc("cursor",60508),eraser:Zc("eraser",60509),fileText:Zc("file-text",60510),gitLens:Zc("git-lens",60511),quotes:Zc("quotes",60512),rename:Zc("rename",60513),runWithDeps:Zc("run-with-deps",60514),debugConnected:Zc("debug-connected",60515),strikethrough:Zc("strikethrough",60516),openInProduct:Zc("open-in-product",60517),indexZero:Zc("index-zero",60518),agent:Zc("agent",60519),editCode:Zc("edit-code",60520),repoSelected:Zc("repo-selected",60521),skip:Zc("skip",60522),mergeInto:Zc("merge-into",60523),gitBranchChanges:Zc("git-branch-changes",60524),gitBranchStagedChanges:Zc("git-branch-staged-changes",60525),gitBranchConflicts:Zc("git-branch-conflicts",60526),gitBranch:Zc("git-branch",60527),gitBranchCreate:Zc("git-branch-create",60527),gitBranchDelete:Zc("git-branch-delete",60527),searchLarge:Zc("search-large",60528),terminalGitBash:Zc("terminal-git-bash",60529),windowActive:Zc("window-active",60530),forward:Zc("forward",60531),download:Zc("download",60532),clockface:Zc("clockface",60533),unarchive:Zc("unarchive",60534),sessionInProgress:Zc("session-in-progress",60535),collectionSmall:Zc("collection-small",60536),vmSmall:Zc("vm-small",60537),cloudSmall:Zc("cloud-small",60538)},nu={dialogError:Zc("dialog-error","error"),dialogWarning:Zc("dialog-warning","warning"),dialogInfo:Zc("dialog-info","info"),dialogClose:Zc("dialog-close","close"),treeItemExpanded:Zc("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:Zc("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:Zc("tree-filter-on-type-off","list-selection"),treeFilterClear:Zc("tree-filter-clear","close"),treeItemLoading:Zc("tree-item-loading","loading"),menuSelection:Zc("menu-selection","check"),menuSubmenu:Zc("menu-submenu","chevron-right"),menuBarMore:Zc("menubar-more","more"),scrollbarButtonLeft:Zc("scrollbar-button-left","triangle-left"),scrollbarButtonRight:Zc("scrollbar-button-right","triangle-right"),scrollbarButtonUp:Zc("scrollbar-button-up","triangle-up"),scrollbarButtonDown:Zc("scrollbar-button-down","triangle-down"),toolBarMore:Zc("toolbar-more","more"),quickInputBack:Zc("quick-input-back","arrow-left"),dropDownButton:Zc("drop-down-button",60084),symbolCustomColor:Zc("symbol-customcolor",60252),exportIcon:Zc("export",60332),workspaceUnspecified:Zc("workspace-unspecified",60355),newLine:Zc("newline",60394),thumbsDownFilled:Zc("thumbsdown-filled",60435),thumbsUpFilled:Zc("thumbsup-filled",60436),gitFetch:Zc("git-fetch",60445),lightbulbSparkleAutofix:Zc("lightbulb-sparkle-autofix",60447),debugBreakpointPending:Zc("debug-breakpoint-pending",60377)},su=(0,r.A)((0,r.A)({},iu),nu);function ru(e){return e===eu.HIGH_CONTRAST_DARK||e===eu.HIGH_CONTRAST_LIGHT}function ou(e){return e===eu.DARK||e===eu.HIGH_CONTRAST_DARK}function au(e){return{id:e}}!function(e){e.DARK="dark",e.LIGHT="light",e.HIGH_CONTRAST_DARK="hcDark",e.HIGH_CONTRAST_LIGHT="hcLight"}(eu||(eu={})),function(e){e.VS="vs",e.VS_DARK="vs-dark",e.HC_BLACK="hc-black",e.HC_LIGHT="hc-light"}(tu||(tu={})),su.file,su.folder;var lu="base.contributions.theming",hu=new class extends Co{constructor(){super(),this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=this._register(new Ro)}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),vo(()=>{let t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}get onThemingParticipantAdded(){return this.onThemingParticipantAddedEmitter.event}getThemingParticipants(){return this.themingParticipants}};function du(e){return hu.onColorThemeChange(e)}Tn.add(lu,hu);var cu=class extends Co{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(e=>this.onThemeChange(e)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}getColor(e,t){let i=this.theme.getColor(e);return i&&t&&(i=t(i,this.theme)),i?i.toString():null}},uu=th("editor.lineHighlightBackground",null,Li(677,"Background color for the highlight of line at the cursor position."));th("editor.inactiveLineHighlightBackground",uu,Li(678,"Background color for the highlight of line at the cursor position when the editor is not focused.")),th("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:mh},Li(679,"Background color for the border around the line at the cursor position."));var gu=th("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},Li(680,"Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0);th("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:vh,hcLight:vh},Li(681,"Background color of the border around highlighted ranges.")),th("editor.symbolHighlightBackground",{dark:Wh,light:Wh,hcDark:null,hcLight:null},Li(682,"Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),th("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:vh,hcLight:vh},Li(683,"Background color of the border around highlighted symbols."));var pu=th("editorCursor.foreground",{dark:"#AEAFAD",light:Ir.black,hcDark:Ir.white,hcLight:"#0F4A85"},Li(684,"Color of the editor cursor.")),fu=th("editorCursor.background",null,Li(685,"The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor."));th("editorMultiCursor.primary.foreground",pu,Li(686,"Color of the primary editor cursor when multiple cursors are present.")),th("editorMultiCursor.primary.background",fu,Li(687,"The background color of the primary editor cursor when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),th("editorMultiCursor.secondary.foreground",pu,Li(688,"Color of secondary editor cursors when multiple cursors are present.")),th("editorMultiCursor.secondary.background",fu,Li(689,"The background color of secondary editor cursors when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor."));var mu=th("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},Li(690,"Color of whitespace characters in the editor."));th("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:Ir.white,hcLight:"#292929"},Li(691,"Color of editor line numbers."));var vu=th("editorIndentGuide.background",mu,Li(692,"Color of the editor indentation guides."),!1,Li(693,"'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),_u=th("editorIndentGuide.activeBackground",mu,Li(694,"Color of the active editor indentation guides."),!1,Li(695,"'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),bu=th("editorIndentGuide.background1",vu,Li(696,"Color of the editor indentation guides (1)."));th("editorIndentGuide.background2","#00000000",Li(697,"Color of the editor indentation guides (2).")),th("editorIndentGuide.background3","#00000000",Li(698,"Color of the editor indentation guides (3).")),th("editorIndentGuide.background4","#00000000",Li(699,"Color of the editor indentation guides (4).")),th("editorIndentGuide.background5","#00000000",Li(700,"Color of the editor indentation guides (5).")),th("editorIndentGuide.background6","#00000000",Li(701,"Color of the editor indentation guides (6)."));var Cu=th("editorIndentGuide.activeBackground1",_u,Li(702,"Color of the active editor indentation guides (1)."));th("editorIndentGuide.activeBackground2","#00000000",Li(703,"Color of the active editor indentation guides (2).")),th("editorIndentGuide.activeBackground3","#00000000",Li(704,"Color of the active editor indentation guides (3).")),th("editorIndentGuide.activeBackground4","#00000000",Li(705,"Color of the active editor indentation guides (4).")),th("editorIndentGuide.activeBackground5","#00000000",Li(706,"Color of the active editor indentation guides (5).")),th("editorIndentGuide.activeBackground6","#00000000",Li(707,"Color of the active editor indentation guides (6).")),th("editorLineNumber.activeForeground",th("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:vh,hcLight:vh},Li(708,"Color of editor active line number"),!1,Li(709,"Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),Li(708,"Color of editor active line number")),th("editorLineNumber.dimmedForeground",null,Li(710,"Color of the final editor line when editor.renderFinalNewline is set to dimmed.")),th("editorRuler.foreground",{dark:"#5A5A5A",light:Ir.lightgrey,hcDark:Ir.white,hcLight:"#292929"},Li(711,"Color of the editor rulers.")),th("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},Li(712,"Foreground color of editor CodeLens")),th("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},Li(713,"Background color behind matching brackets")),th("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:mh,hcLight:mh},Li(714,"Color for matching brackets boxes")),th("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},Li(715,"Color of the overview ruler border.")),th("editorOverviewRuler.background",null,Li(716,"Background color of the editor overview ruler.")),th("editorGutter.background",Dh,Li(717,"Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),th("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:Ir.fromHex("#fff").transparent(.8),hcLight:mh},Li(718,"Border color of unnecessary (unused) source code in the editor.")),th("editorUnnecessaryCode.opacity",{dark:Ir.fromHex("#000a"),light:Ir.fromHex("#0007"),hcDark:null,hcLight:null},Li(719,"Opacity of unnecessary (unused) source code in the editor. For example, \"#000000c0\" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.")),th("editorGhostText.border",{dark:null,light:null,hcDark:Ir.fromHex("#fff").transparent(.8),hcLight:Ir.fromHex("#292929").transparent(.8)},Li(720,"Border color of ghost text in the editor.")),th("editorGhostText.foreground",{dark:Ir.fromHex("#ffffff56"),light:Ir.fromHex("#0007"),hcDark:null,hcLight:null},Li(721,"Foreground color of the ghost text in the editor.")),th("editorGhostText.background",null,Li(722,"Background color of the ghost text in the editor.")),th("editorOverviewRuler.rangeHighlightForeground",new Ir(new Er(0,122,204,.6)),Li(723,"Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0);var yu=th("editorOverviewRuler.errorForeground",{dark:new Ir(new Er(255,18,18,.7)),light:new Ir(new Er(255,18,18,.7)),hcDark:new Ir(new Er(255,50,50,1)),hcLight:"#B5200D"},Li(724,"Overview ruler marker color for errors.")),wu=th("editorOverviewRuler.warningForeground",{dark:Fh,light:Fh,hcDark:Oh,hcLight:Oh},Li(725,"Overview ruler marker color for warnings.")),Su=th("editorOverviewRuler.infoForeground",{dark:Rh,light:Rh,hcDark:Mh,hcLight:Mh},Li(726,"Overview ruler marker color for infos.")),ku=th("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},Li(727,"Foreground color of brackets (1). Requires enabling bracket pair colorization.")),Eu=th("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},Li(728,"Foreground color of brackets (2). Requires enabling bracket pair colorization.")),Du=th("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},Li(729,"Foreground color of brackets (3). Requires enabling bracket pair colorization.")),Tu=th("editorBracketHighlight.foreground4","#00000000",Li(730,"Foreground color of brackets (4). Requires enabling bracket pair colorization.")),Iu=th("editorBracketHighlight.foreground5","#00000000",Li(731,"Foreground color of brackets (5). Requires enabling bracket pair colorization.")),xu=th("editorBracketHighlight.foreground6","#00000000",Li(732,"Foreground color of brackets (6). Requires enabling bracket pair colorization.")),Lu=th("editorBracketHighlight.unexpectedBracket.foreground",{dark:new Ir(new Er(255,18,18,.8)),light:new Ir(new Er(255,18,18,.8)),hcDark:new Ir(new Er(255,50,50,1)),hcLight:"#B5200D"},Li(733,"Foreground color of unexpected brackets."));th("editorBracketPairGuide.background1","#00000000",Li(734,"Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),th("editorBracketPairGuide.background2","#00000000",Li(735,"Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),th("editorBracketPairGuide.background3","#00000000",Li(736,"Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),th("editorBracketPairGuide.background4","#00000000",Li(737,"Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),th("editorBracketPairGuide.background5","#00000000",Li(738,"Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),th("editorBracketPairGuide.background6","#00000000",Li(739,"Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),th("editorBracketPairGuide.activeBackground1","#00000000",Li(740,"Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),th("editorBracketPairGuide.activeBackground2","#00000000",Li(741,"Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),th("editorBracketPairGuide.activeBackground3","#00000000",Li(742,"Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),th("editorBracketPairGuide.activeBackground4","#00000000",Li(743,"Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),th("editorBracketPairGuide.activeBackground5","#00000000",Li(744,"Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),th("editorBracketPairGuide.activeBackground6","#00000000",Li(745,"Background color of active bracket pair guides (6). Requires enabling bracket pair guides.")),th("editorUnicodeHighlight.border",Fh,Li(746,"Border color used to highlight unicode characters.")),th("editorUnicodeHighlight.background",Nh,Li(747,"Background color used to highlight unicode characters.")),du((e,t)=>{let i=e.getColor(Dh),n=e.getColor(uu),s=n&&!n.isTransparent()?n:i;s&&t.addRule(".monaco-editor .inputarea.ime-input { background-color: ".concat(s,"; }"))});var Au,Nu,Fu={};function Ou(e,t){let i=Fu[e];i||(Fu[e]=i=[]),i.push(t)}function Ru(e,t){for(let i of e)if(t.textMateRules.push(i),!i.scope){let e=i.settings;if(e)for(let i in e){let n=i,s=Fu[n];if(s){let i=e[n];if("string"==typeof i){let e=Ir.fromHex(i);for(let i of s)t.colors[i]=e}}"foreground"!==n&&"background"!==n&&"fontStyle"!==n&&delete e[n]}else i.settings={}}}Ou("background",Dh),Ou("foreground",Th),Ou("selection",Ph),Ou("inactiveSelection",Bh),Ou("selectionHighlightColor",Uh),Ou("findMatchHighlight",Wh),Ou("currentFindMatchHighlight",Hh),Ou("hoverHighlight",Kh),Ou("wordHighlight","editor.wordHighlightBackground"),Ou("wordHighlightStrong","editor.wordHighlightStrongBackground"),Ou("findRangeHighlight",Vh),Ou("findMatchHighlight","peekViewResult.matchHighlightBackground"),Ou("referenceHighlight","peekViewEditor.matchHighlightBackground"),Ou("lineHighlight",uu),Ou("rangeHighlight",gu),Ou("caret",pu),Ou("invisibles",mu),Ou("guide",bu),Ou("activeGuide",Cu);for(let M$ of["ansiBlack","ansiRed","ansiGreen","ansiYellow","ansiBlue","ansiMagenta","ansiCyan","ansiWhite","ansiBrightBlack","ansiBrightRed","ansiBrightGreen","ansiBrightYellow","ansiBrightBlue","ansiBrightMagenta","ansiBrightCyan","ansiBrightWhite"])Ou(M$,"terminal."+M$);function Mu(e){switch(e){case ur.InvalidSymbol:return Li(109,"Invalid symbol");case ur.InvalidNumberFormat:return Li(110,"Invalid number format");case ur.PropertyNameExpected:return Li(111,"Property name expected");case ur.ValueExpected:return Li(112,"Value expected");case ur.ColonExpected:return Li(113,"Colon expected");case ur.CommaExpected:return Li(114,"Comma expected");case ur.CloseBraceExpected:return Li(115,"Closing brace expected");case ur.CloseBracketExpected:return Li(116,"Closing bracket expected");case ur.EndOfFileExpected:return Li(117,"End of file expected");default:return""}}function Pu(e){return function(e){let t=e.length,i=0;function n(e){i+=e}function s(e){i=e}function r(){for(;i<t;){let t=e.charCodeAt(i);if(t!==Au.SPACE&&t!==Au.TAB&&t!==Au.CARRIAGE_RETURN&&t!==Au.LINE_FEED)break;n(1)}}function o(t){return e.substr(i,t.length)===t&&(n(t.length),!0)}function a(n){let r=e.indexOf(n,i);s(-1===r?t:r+n.length)}function l(n){let r=e.indexOf(n,i);if(-1!==r){let t=e.substring(i,r);return s(r+n.length),t}{let n=e.substr(i);return s(t),n}}t>0&&e.charCodeAt(0)===Au.BOM&&(i=1);let h=Nu.ROOT_STATE,d=null,c=[],u=[],g=null;function p(e,t){c.push(h),u.push(d),h=e,d=t}function f(){if(0===c.length)return m("illegal state stack");h=c.pop(),d=u.pop()}function m(t){throw Error("Near offset "+i+": "+t+" ~~~"+e.substr(i,50)+"~~~")}let v={enterDict:function(){if(null===g)return m("missing <key>");let e={};d[g]=e,g=null,p(Nu.DICT_STATE,e)},enterArray:function(){if(null===g)return m("missing <key>");let e=[];d[g]=e,g=null,p(Nu.ARR_STATE,e)}},_={enterDict:function(){let e={};d.push(e),p(Nu.DICT_STATE,e)},enterArray:function(){let e=[];d.push(e),p(Nu.ARR_STATE,e)}};function b(){h===Nu.DICT_STATE?v.enterDict():h===Nu.ARR_STATE?_.enterDict():(d={},p(Nu.DICT_STATE,d))}function C(){if(h!==Nu.DICT_STATE)return Nu.ARR_STATE,m("unexpected </dict>");f()}function y(){h===Nu.DICT_STATE?v.enterArray():h===Nu.ARR_STATE?_.enterArray():(d=[],p(Nu.ARR_STATE,d))}function w(){return h===Nu.DICT_STATE||h!==Nu.ARR_STATE?m("unexpected </array>"):void f()}function S(e){return h!==Nu.DICT_STATE?(Nu.ARR_STATE,m("unexpected <key>")):null!==g?m("too many <key>"):void(g=e)}function k(e){if(h===Nu.DICT_STATE){if(null===g)return m("missing <key>");d[g]=e,g=null}else h===Nu.ARR_STATE?d.push(e):d=e}function E(e){if(isNaN(e))return m("cannot parse float");if(h===Nu.DICT_STATE){if(null===g)return m("missing <key>");d[g]=e,g=null}else h===Nu.ARR_STATE?d.push(e):d=e}function D(e){if(isNaN(e))return m("cannot parse integer");if(h===Nu.DICT_STATE){if(null===g)return m("missing <key>");d[g]=e,g=null}else h===Nu.ARR_STATE?d.push(e):d=e}function T(e){if(h===Nu.DICT_STATE){if(null===g)return m("missing <key>");d[g]=e,g=null}else h===Nu.ARR_STATE?d.push(e):d=e}function I(e){if(h===Nu.DICT_STATE){if(null===g)return m("missing <key>");d[g]=e,g=null}else h===Nu.ARR_STATE?d.push(e):d=e}function x(e){if(h===Nu.DICT_STATE){if(null===g)return m("missing <key>");d[g]=e,g=null}else h===Nu.ARR_STATE?d.push(e):d=e}function L(e){return e.replace(/&#([0-9]+);/g,function(e,t){return String.fromCodePoint(parseInt(t,10))}).replace(/&#x([0-9a-f]+);/g,function(e,t){return String.fromCodePoint(parseInt(t,16))}).replace(/&amp;|&lt;|&gt;|&quot;|&apos;/g,function(e){switch(e){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'"}return e})}function A(){let e=l(">"),t=!1;return e.charCodeAt(e.length-1)===Au.SLASH&&(t=!0,e=e.substring(0,e.length-1)),{name:e.trim(),isClosed:t}}function N(e){if(e.isClosed)return"";let t=l("</");return a(">"),L(t)}for(;i<t&&(r(),!(i>=t));){let s=e.charCodeAt(i);if(n(1),s!==Au.LESS_THAN)return m("expected <");if(i>=t)return m("unexpected end of input");let l=e.charCodeAt(i);if(l===Au.QUESTION_MARK){n(1),a("?>");continue}if(l===Au.EXCLAMATION_MARK){if(n(1),o("--")){a("--\x3e");continue}a(">");continue}if(l===Au.SLASH){if(n(1),r(),o("plist")){a(">");continue}if(o("dict")){a(">"),C();continue}if(o("array")){a(">"),w();continue}return m("unexpected closed tag")}let h=A();switch(h.name){case"dict":b(),h.isClosed&&C();continue;case"array":y(),h.isClosed&&w();continue;case"key":S(N(h));continue;case"string":k(N(h));continue;case"real":E(parseFloat(N(h)));continue;case"integer":D(parseInt(N(h),10));continue;case"date":T(new Date(N(h)));continue;case"data":I(N(h));continue;case"true":N(h),x(!0);continue;case"false":N(h),x(!1);continue}if(!/^plist/.test(h.name))return m("unexpected opened tag "+h.name)}return d}(e)}!function(e){e[e.BOM=65279]="BOM",e[e.SPACE=32]="SPACE",e[e.TAB=9]="TAB",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.SLASH=47]="SLASH",e[e.LESS_THAN=60]="LESS_THAN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK"}(Au||(Au={})),function(e){e[e.ROOT_STATE=0]="ROOT_STATE",e[e.DICT_STATE=1]="DICT_STATE",e[e.ARR_STATE=2]="ARR_STATE"}(Nu||(Nu={}));var Bu,Uu="\\w+[-_\\w+]*",Hu="^".concat(Uu,"$"),Wu="^(".concat(Uu,"|\\*)(\\").concat(".").concat(Uu,")*(").concat(":").concat(Uu,")?$"),Vu=class{constructor(e,t,i,n,s){this.foreground=e,this.bold=t,this.underline=i,this.strikethrough=n,this.italic=s}};!function(e){e.toJSONObject=function(e){return{_foreground:void 0===e.foreground?null:Ir.Format.CSS.formatHexA(e.foreground,!0),_bold:void 0===e.bold?null:e.bold,_underline:void 0===e.underline?null:e.underline,_italic:void 0===e.italic?null:e.italic,_strikethrough:void 0===e.strikethrough?null:e.strikethrough}},e.fromJSONObject=function(t){if(t){let i=e=>"boolean"==typeof e?e:void 0;return new e((e=>"string"==typeof e?Ir.fromHex(e):void 0)(t._foreground),i(t._bold),i(t._underline),i(t._strikethrough),i(t._italic))}},e.equals=function(e,t){return e===t||void 0!==e&&void 0!==t&&(e.foreground instanceof Ir?e.foreground.equals(t.foreground):void 0===t.foreground)&&e.bold===t.bold&&e.underline===t.underline&&e.strikethrough===t.strikethrough&&e.italic===t.italic},e.is=function(t){return t instanceof e},e.fromData=function(t){return new e(t.foreground,t.bold,t.underline,t.strikethrough,t.italic)},e.fromSettings=function(t,i,n,s,r,o){let a;if(void 0!==t&&(a=Ir.fromHex(t)),void 0!==i){n=o=s=r=!1;let e,t=/italic|bold|underline|strikethrough/g;for(;e=t.exec(i);)switch(e[0]){case"bold":n=!0;break;case"italic":o=!0;break;case"underline":s=!0;break;case"strikethrough":r=!0}}return new e(a,n,s,r,o)}}(Vu||(Vu={})),function(e){e.fromJSONObject=function(e,t){if(t&&"string"==typeof t._selector&&t._style){let n=Vu.fromJSONObject(t._style);if(n)try{return{selector:e.parseTokenSelector(t._selector),style:n}}catch(i){}}},e.toJSONObject=function(e){return{_selector:e.selector.id,_style:Vu.toJSONObject(e.style)}},e.equals=function(e,t){return e===t||void 0!==e&&void 0!==t&&e.selector&&t.selector&&e.selector.id===t.selector.id&&Vu.equals(e.style,t.style)},e.is=function(e){return e&&e.selector&&"string"==typeof e.selector.id&&Vu.is(e.style)}}(Bu||(Bu={}));var zu=class extends Co{constructor(){super(),this._onDidChangeSchema=this._register(new Ro),this.onDidChangeSchema=this._onDidChangeSchema.event,this.currentTypeNumber=0,this.currentModifierBit=1,this.tokenStylingDefaultRules=[],this.tokenStylingSchema={type:"object",properties:{},patternProperties:{[Wu]:Yu()},additionalProperties:!1,definitions:{style:{type:"object",description:Li(2364,"Colors and styles for the token."),properties:{foreground:{type:"string",description:Li(2365,"Foreground color for the token."),format:"color-hex",default:"#ff0000"},background:{type:"string",deprecationMessage:Li(2366,"Token background colors are currently not supported.")},fontStyle:{type:"string",description:Li(2367,"Sets the all font styles of the rule: 'italic', 'bold', 'underline' or 'strikethrough' or a combination. All styles that are not listed are unset. The empty string unsets all styles."),pattern:"^(\\s*(italic|bold|underline|strikethrough))*\\s*$",patternErrorMessage:Li(2368,"Font style must be 'italic', 'bold', 'underline' or 'strikethrough' or a combination. The empty string unsets all styles."),defaultSnippets:[{label:Li(2369,"None (clear inherited style)"),bodyText:'""'},{body:"italic"},{body:"bold"},{body:"underline"},{body:"strikethrough"},{body:"italic bold"},{body:"italic underline"},{body:"italic strikethrough"},{body:"bold underline"},{body:"bold strikethrough"},{body:"underline strikethrough"},{body:"italic bold underline"},{body:"italic bold strikethrough"},{body:"italic underline strikethrough"},{body:"bold underline strikethrough"},{body:"italic bold underline strikethrough"}]},bold:{type:"boolean",description:Li(2370,"Sets or unsets the font style to bold. Note, the presence of 'fontStyle' overrides this setting.")},italic:{type:"boolean",description:Li(2371,"Sets or unsets the font style to italic. Note, the presence of 'fontStyle' overrides this setting.")},underline:{type:"boolean",description:Li(2372,"Sets or unsets the font style to underline. Note, the presence of 'fontStyle' overrides this setting.")},strikethrough:{type:"boolean",description:Li(2373,"Sets or unsets the font style to strikethrough. Note, the presence of 'fontStyle' overrides this setting.")}},defaultSnippets:[{body:{foreground:"${1:#FF0000}",fontStyle:"${2:bold}"}}]}}},this.tokenTypeById=Object.create(null),this.tokenModifierById=Object.create(null),this.typeHierarchy=Object.create(null)}registerTokenType(e,t,i,n){if(!e.match(Hu))throw Error("Invalid token type id.");if(i&&!i.match(Hu))throw Error("Invalid token super type id.");let s={num:this.currentTypeNumber++,id:e,superType:i,description:t,deprecationMessage:n};this.tokenTypeById[e]=s;let r=Yu(t,n);this.tokenStylingSchema.properties[e]=r,this.typeHierarchy=Object.create(null)}registerTokenModifier(e,t,i){if(!e.match(Hu))throw Error("Invalid token modifier id.");let n=this.currentModifierBit;this.currentModifierBit*=2;let s={num:n,id:e,description:t,deprecationMessage:i};this.tokenModifierById[e]=s,this.tokenStylingSchema.properties["*.".concat(e)]=Yu(t,i)}parseTokenSelector(e,t){let i=Gu(e,t);return i.type?{match:(e,t,n)=>{let s=0;if(void 0!==i.language){if(i.language!==n)return-1;s+=10}if("*"!==i.type){let t=this.getTypeHierarchy(e).indexOf(i.type);if(-1===t)return-1;s+=100-t}for(let r of i.modifiers)if(-1===t.indexOf(r))return-1;return s+100*i.modifiers.length},id:"".concat([i.type,...i.modifiers.sort()].join(".")).concat(void 0===i.language?"":":"+i.language)}:{match:()=>-1,id:"$invalid"}}registerTokenStyleDefault(e,t){this.tokenStylingDefaultRules.push({selector:e,defaults:t})}deregisterTokenStyleDefault(e){let t=e.id;this.tokenStylingDefaultRules=this.tokenStylingDefaultRules.filter(e=>e.selector.id!==t)}deregisterTokenType(e){delete this.tokenTypeById[e],delete this.tokenStylingSchema.properties[e],this.typeHierarchy=Object.create(null)}deregisterTokenModifier(e){delete this.tokenModifierById[e],delete this.tokenStylingSchema.properties["*.".concat(e)]}getTokenTypes(){return Object.keys(this.tokenTypeById).map(e=>this.tokenTypeById[e])}getTokenModifiers(){return Object.keys(this.tokenModifierById).map(e=>this.tokenModifierById[e])}getTokenStylingSchema(){return this.tokenStylingSchema}getTokenStylingDefaultRules(){return this.tokenStylingDefaultRules}getTypeHierarchy(e){let t=this.typeHierarchy[e];if(!t){this.typeHierarchy[e]=t=[e];let i=this.tokenTypeById[e];for(;i&&i.superType;)t.push(i.superType),i=this.tokenTypeById[i.superType]}return t}toString(){return Object.keys(this.tokenTypeById).sort((e,t)=>{let i=-1===e.indexOf(".")?0:1,n=-1===t.indexOf(".")?0:1;return i===n?e.localeCompare(t):i-n}).map(e=>"- `".concat(e,"`: ").concat(this.tokenTypeById[e].description)).join("\n")}},Ku=":".charCodeAt(0),qu=".".charCodeAt(0);function Gu(e,t){let i=e.length,n=t,s=[];for(let r=i-1;r>=0;r--){let t=e.charCodeAt(r);if(t===Ku||t===qu){let o=e.substring(r+1,i);i=r,t===Ku?n=o:s.push(o)}}return{type:e.substring(0,i),modifiers:s,language:n}}var ju=function(){let e=new zu;function t(t,n){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;return e.registerTokenType(t,n,r,o),s&&i(t,s),t}function i(t,i){try{let n=e.parseTokenSelector(t);e.registerTokenStyleDefault(n,{scopesToProbe:i})}catch(e){console.log(e)}}return t("comment",Li(2374,"Style for comments."),[["comment"]]),t("string",Li(2375,"Style for strings."),[["string"]]),t("keyword",Li(2376,"Style for keywords."),[["keyword.control"]]),t("number",Li(2377,"Style for numbers."),[["constant.numeric"]]),t("regexp",Li(2378,"Style for expressions."),[["constant.regexp"]]),t("operator",Li(2379,"Style for operators."),[["keyword.operator"]]),t("namespace",Li(2380,"Style for namespaces."),[["entity.name.namespace"]]),t("type",Li(2381,"Style for types."),[["entity.name.type"],["support.type"]]),t("struct",Li(2382,"Style for structs."),[["entity.name.type.struct"]]),t("class",Li(2383,"Style for classes."),[["entity.name.type.class"],["support.class"]]),t("interface",Li(2384,"Style for interfaces."),[["entity.name.type.interface"]]),t("enum",Li(2385,"Style for enums."),[["entity.name.type.enum"]]),t("typeParameter",Li(2386,"Style for type parameters."),[["entity.name.type.parameter"]]),t("function",Li(2387,"Style for functions"),[["entity.name.function"],["support.function"]]),t("member",Li(2388,"Style for member functions"),[],"method","Deprecated use `method` instead"),t("method",Li(2389,"Style for method (member functions)"),[["entity.name.function.member"],["support.function"]]),t("macro",Li(2390,"Style for macros."),[["entity.name.function.preprocessor"]]),t("variable",Li(2391,"Style for variables."),[["variable.other.readwrite"],["entity.name.variable"]]),t("parameter",Li(2392,"Style for parameters."),[["variable.parameter"]]),t("property",Li(2393,"Style for properties."),[["variable.other.property"]]),t("enumMember",Li(2394,"Style for enum members."),[["variable.other.enummember"]]),t("event",Li(2395,"Style for events."),[["variable.other.event"]]),t("decorator",Li(2396,"Style for decorators & annotations."),[["entity.name.decorator"],["entity.name.function"]]),t("label",Li(2397,"Style for labels. "),void 0),e.registerTokenModifier("declaration",Li(2398,"Style for all symbol declarations."),void 0),e.registerTokenModifier("documentation",Li(2399,"Style to use for references in documentation."),void 0),e.registerTokenModifier("static",Li(2400,"Style to use for symbols that are static."),void 0),e.registerTokenModifier("abstract",Li(2401,"Style to use for symbols that are abstract."),void 0),e.registerTokenModifier("deprecated",Li(2402,"Style to use for symbols that are deprecated."),void 0),e.registerTokenModifier("modification",Li(2403,"Style to use for write accesses."),void 0),e.registerTokenModifier("async",Li(2404,"Style to use for symbols that are async."),void 0),e.registerTokenModifier("readonly",Li(2405,"Style to use for symbols that are read-only."),void 0),i("variable.readonly",[["variable.other.constant"]]),i("property.readonly",[["variable.other.constant.property"]]),i("type.defaultLibrary",[["support.type"]]),i("class.defaultLibrary",[["support.class"]]),i("interface.defaultLibrary",[["support.class"]]),i("variable.defaultLibrary",[["support.variable"],["support.other.variable"]]),i("variable.defaultLibrary.readonly",[["support.constant"]]),i("property.defaultLibrary",[["support.variable.property"]]),i("property.defaultLibrary.readonly",[["support.constant.property"]]),i("function.defaultLibrary",[["support.function"]]),i("member.defaultLibrary",[["support.function"]]),e}();function Yu(e,t){return{description:e,deprecationMessage:t,defaultSnippets:[{body:"${1:#ff0000}"}],anyOf:[{type:"string",format:"color-hex"},{$ref:"#/definitions/style"}]}}Tn.add("base.contributions.tokenClassification",ju);var Qu="vscode://schemas/token-styling",$u=Tn.as(Gl);$u.registerSchema(Qu,ju.getTokenStylingSchema());var Xu=new Rl(()=>$u.notifySchemaChanged(Qu),200);function Zu(e,t,i){let n=function(e){let t=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,i=t.exec(e);return{next:()=>{if(!i)return null;let n=i[0];return i=t.exec(e),n}}}(e),s=n.next();for(;null!==s;){let e=0;if(2===s.length&&":"===s.charAt(1)){switch(s.charAt(0)){case"R":e=1;break;case"L":e=-1;break;default:console.log("Unknown priority ".concat(s," in scope selector"))}s=n.next()}let t=o();if(t&&i.push({matcher:t,priority:e}),","!==s)break;s=n.next()}function r(){if("-"===s){s=n.next();let e=r();return e?t=>e(t)<0?0:-1:null}if("("===s){s=n.next();let e=function(){let e=o();if(!e)return null;let t=[];for(;e&&(t.push(e),"|"===s||","===s);){do{s=n.next()}while("|"===s||","===s);e=o()}return e=>{let i=t[0](e);for(let n=1;n<t.length;n++)i=Math.max(i,t[n](e));return i}}();return")"===s&&(s=n.next()),e}if(Ju(s)){let e=[];do{e.push(s),s=n.next()}while(Ju(s));return i=>t(e,i)}return null}function o(){let e=r();if(!e)return null;let t=[];for(;e;)t.push(e),e=r();return e=>{let i=t[0](e);for(let n=1;i>=0&&n<t.length;n++)i=Math.min(i,t[n](e));return i}}}function Ju(e){return!!e&&!!e.match(/[\w\.:]+/)}function eg(e){let t=[];return"number"==typeof e&&t.push("code/timeOrigin",e),{mark:function(e,i){var n;t.push(e,null!==(n=null===i||void 0===i?void 0:i.startTime)&&void 0!==n?n:Date.now())},getMarks:function(){let e=[];for(let i=0;i<t.length;i+=2)e.push({name:t[i],startTime:t[i+1]});return e}}}ju.onDidChangeSchema(()=>{Xu.isScheduled()||Xu.schedule()});var tg=function(e){return e.MonacoPerformanceMarks||(e.MonacoPerformanceMarks=function(){return"object"!=typeof performance||"function"!=typeof performance.mark||performance.nodeTiming?"object"==typeof process?eg(null===(e=performance)||void 0===e?void 0:e.timeOrigin):(console.trace("perf-util loaded in UNKNOWN environment"),eg()):"number"==typeof performance.timeOrigin||performance.timing?{mark(e,t){performance.mark(e,t)},getMarks(){var e;let t=performance.timeOrigin;"number"!=typeof t&&(t=null!==(e=performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart)&&void 0!==e?e:0);let i=[{name:"code/timeOrigin",startTime:Math.round(t)}];for(let n of performance.getEntriesByType("mark"))i.push({name:n.name,startTime:Math.round(t+n.startTime)});return i}}:eg();var e}()),e.MonacoPerformanceMarks}(globalThis),ig=tg.mark;function ng(e){let t=e;return!!t&&[t.on,t.pause,t.resume,t.destroy].every(e=>"function"==typeof e)}function sg(e){let t=e;return!!t&&(ng(t.stream)&&Array.isArray(t.buffer)&&"boolean"==typeof t.ended)}function rg(e,t){return new og(e,t)}tg.getMarks;var og=class{constructor(e,t){this.reducer=e,this.options=t,this.state={flowing:!1,ended:!1,destroyed:!1},this.buffer={data:[],error:[]},this.listeners={data:[],error:[],end:[]},this.pendingWritePromises=[]}pause(){this.state.destroyed||(this.state.flowing=!1)}resume(){this.state.destroyed||this.state.flowing||(this.state.flowing=!0,this.flowData(),this.flowErrors(),this.flowEnd())}write(e){var t;if(!this.state.destroyed)if(this.state.flowing)this.emitData(e);else if(this.buffer.data.push(e),"number"==typeof(null===(t=this.options)||void 0===t?void 0:t.highWaterMark)&&this.buffer.data.length>this.options.highWaterMark)return new Promise(e=>this.pendingWritePromises.push(e))}error(e){this.state.destroyed||(this.state.flowing?this.emitError(e):this.buffer.error.push(e))}end(e){this.state.destroyed||(void 0!==e&&this.write(e),this.state.flowing?(this.emitEnd(),this.destroy()):this.state.ended=!0)}emitData(e){this.listeners.data.slice(0).forEach(t=>t(e))}emitError(e){0===this.listeners.error.length?Ri(e):this.listeners.error.slice(0).forEach(t=>t(e))}emitEnd(){this.listeners.end.slice(0).forEach(e=>e())}on(e,t){if(!this.state.destroyed)switch(e){case"data":this.listeners.data.push(t),this.resume();break;case"end":this.listeners.end.push(t),this.state.flowing&&this.flowEnd()&&this.destroy();break;case"error":this.listeners.error.push(t),this.state.flowing&&this.flowErrors()}}removeListener(e,t){if(this.state.destroyed)return;let i;switch(e){case"data":i=this.listeners.data;break;case"end":i=this.listeners.end;break;case"error":i=this.listeners.error}if(i){let e=i.indexOf(t);e>=0&&i.splice(e,1)}}flowData(){if(0===this.buffer.data.length)return;if("function"==typeof this.reducer){let e=this.reducer(this.buffer.data);this.emitData(e)}else for(let t of this.buffer.data)this.emitData(t);this.buffer.data.length=0;let e=[...this.pendingWritePromises];this.pendingWritePromises.length=0,e.forEach(e=>e())}flowErrors(){if(this.listeners.error.length>0){for(let e of this.buffer.error)this.emitError(e);this.buffer.error.length=0}}flowEnd(){return!!this.state.ended&&(this.emitEnd(),this.listeners.end.length>0)}destroy(){this.state.destroyed||(this.state.destroyed=!0,this.state.ended=!0,this.buffer.data.length=0,this.buffer.error.length=0,this.listeners.data.length=0,this.listeners.error.length=0,this.listeners.end.length=0,this.pendingWritePromises.length=0)}};function ag(e,t){return new Promise((i,n)=>{let s=[];lg(e,{onData:e=>{t&&s.push(e)},onError:e=>{t?n(e):i(void 0)},onEnd:()=>{i(t?t(s):void 0)}})})}function lg(e,t,i){e.on("error",e=>{(null===i||void 0===i?void 0:i.isCancellationRequested)||t.onError(e)}),e.on("end",()=>{(null===i||void 0===i?void 0:i.isCancellationRequested)||t.onEnd()}),e.on("data",e=>{(null===i||void 0===i?void 0:i.isCancellationRequested)||t.onData(e)})}var hg,dg,cg=typeof Buffer<"u",ug=new Jo(()=>new Uint8Array(256)),gg=class e{static alloc(t){return new e(cg?Buffer.allocUnsafe(t):new Uint8Array(t))}static wrap(t){return cg&&!Buffer.isBuffer(t)&&(t=Buffer.from(t.buffer,t.byteOffset,t.byteLength)),new e(t)}static fromString(t,i){return null!==i&&void 0!==i&&i.dontUseNodeBuffer||!cg?(hg||(hg=new TextEncoder),new e(hg.encode(t))):new e(Buffer.from(t))}static fromByteArray(t){let i=e.alloc(t.length);for(let e=0,n=t.length;e<n;e++)i.buffer[e]=t[e];return i}static concat(t,i){if(void 0===i){i=0;for(let e=0,n=t.length;e<n;e++)i+=t[e].byteLength}let n=e.alloc(i),s=0;for(let e=0,r=t.length;e<r;e++){let i=t[e];n.set(i,s),s+=i.byteLength}return n}static isNativeBuffer(e){return cg&&Buffer.isBuffer(e)}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}clone(){let t=e.alloc(this.byteLength);return t.set(this),t}toString(){return cg?this.buffer.toString():(dg||(dg=new TextDecoder(void 0,{ignoreBOM:!0})),dg.decode(this.buffer))}slice(t,i){return new e(this.buffer.subarray(t,i))}set(t,i){if(t instanceof e)this.buffer.set(t.buffer,i);else if(t instanceof Uint8Array)this.buffer.set(t,i);else if(t instanceof ArrayBuffer)this.buffer.set(new Uint8Array(t),i);else{if(!ArrayBuffer.isView(t))throw Error("Unknown argument 'array'");this.buffer.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),i)}}readUInt32BE(e){return mg(this.buffer,e)}writeUInt32BE(e,t){vg(this.buffer,e,t)}readUInt32LE(e){return function(e,t){return(e[t+0]|0)>>>0|e[t+1]<<8>>>0|e[t+2]<<16>>>0|e[t+3]<<24>>>0}(this.buffer,e)}writeUInt32LE(e,t){!function(e,t,i){e[i+0]=255&t,t>>>=8,e[i+1]=255&t,t>>>=8,e[i+2]=255&t,t>>>=8,e[i+3]=255&t}(this.buffer,e,t)}readUInt8(e){return _g(this.buffer,e)}writeUInt8(e,t){bg(this.buffer,e,t)}indexOf(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=t.byteLength,s=e.byteLength;if(0===n)return 0;if(1===n)return e.indexOf(t[0]);if(n>s-i)return-1;let r=ug.value;r.fill(t.length);for(let h=0;h<t.length;h++)r[t[h]]=t.length-h-1;let o=i+t.length-1,a=o,l=-1;for(;o<s;)if(e[o]===t[a]){if(0===a){l=o;break}o--,a--}else o+=Math.max(t.length-a,r[e[o]]),a=t.length-1;return l}(this.buffer,t instanceof e?t.buffer:t,i)}equals(e){return this===e||this.byteLength===e.byteLength&&this.buffer.every((t,i)=>t===e.buffer[i])}};function pg(e,t){return(e[t+0]|0)>>>0|e[t+1]<<8>>>0}function fg(e,t,i){e[i+0]=255&t,t>>>=8,e[i+1]=255&t}function mg(e,t){return e[t]*2**24+65536*e[t+1]+256*e[t+2]+e[t+3]}function vg(e,t,i){e[i+3]=t,t>>>=8,e[i+2]=t,t>>>=8,e[i+1]=t,t>>>=8,e[i]=t}function _g(e,t){return e[t]}function bg(e,t,i){e[i]=t}function Cg(e){return function(e){let t=!1;return{read:()=>t?null:(t=!0,e)}}(e)}function yg(e){return ag(e,e=>gg.concat(e))}function wg(e){return function(e,t){let i=rg(t);return i.end(e),i}(e,e=>gg.concat(e))}var Sg,kg,Eg="0123456789abcdef";function Dg(e){let t=JSON.parse(e);return t=Ig(t),t}function Tg(e,t){return t instanceof RegExp?{$mid:Dn.Regexp,source:t.source,flags:t.flags}:t}function Ig(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e||t>200)return e;if("object"==typeof e){switch(e.$mid){case Dn.Uri:return Gs.revive(e);case Dn.Regexp:return new RegExp(e.source,e.flags);case Dn.Date:return new Date(e.source)}if(e instanceof gg||e instanceof Uint8Array)return e;if(Array.isArray(e))for(let i=0;i<e.length;++i)e[i]=Ig(e[i],t+1);else for(let i in e)Object.hasOwnProperty.call(e,i)&&(e[i]=Ig(e[i],t+1))}return e}!function(e){e[e.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",e[e.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"}(Sg||(Sg={})),function(e){e[e.None=0]="None",e[e.Initialized=1]="Initialized",e[e.Closed=2]="Closed"}(kg||(kg={}));var xg,Lg=(R=class e extends Co{constructor(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.create(null);super(),this.database=t,this.options=i,this._onDidChangeStorage=this._register(new Po),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=kg.None,this.cache=new Map,this.flushDelayer=this._register(new kl(e.DEFAULT_FLUSH_DELAY)),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.pendingClose=void 0,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){this._onDidChangeStorage.pause();try{var t,i;null!==(t=e.changed)&&void 0!==t&&t.forEach((e,t)=>this.acceptExternal(t,e)),null===(i=e.deleted)||void 0===i||i.forEach(e=>this.acceptExternal(e,void 0))}finally{this._onDidChangeStorage.resume()}}acceptExternal(e,t){if(this.state===kg.Closed)return;let i=!1;rn(t)?i=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),i=!0),i&&this._onDidChangeStorage.fire({key:e,external:!0})}get items(){return this.cache}get size(){return this.cache.size}async init(){this.state===kg.None&&(this.state=kg.Initialized,this.options.hint!==Sg.STORAGE_DOES_NOT_EXIST&&(this.cache=await this.database.getItems()))}get(e,t){let i=this.cache.get(e);return rn(i)?t:i}getBoolean(e,t){let i=this.get(e);return rn(i)?t:"true"===i}getNumber(e,t){let i=this.get(e);return rn(i)?t:parseInt(i,10)}getObject(e,t){let i=this.get(e);return rn(i)?t:Dg(i)}async set(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.state===kg.Closed)return;if(rn(t))return this.delete(e,i);let n=Xi(t)||Array.isArray(t)?function(e){return JSON.stringify(e,Tg)}(t):String(t);return this.cache.get(e)!==n?(this.cache.set(e,n),this.pendingInserts.set(e,n),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire({key:e,external:i}),this.doFlush()):void 0}async delete(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.state!==kg.Closed&&this.cache.delete(e))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire({key:e,external:t}),this.doFlush()}async optimize(){if(this.state!==kg.Closed)return await this.flush(0),this.database.optimize()}async close(){return this.pendingClose||(this.pendingClose=this.doClose()),this.pendingClose}async doClose(){this.state=kg.Closed;try{await this.doFlush(0)}catch(e){}await this.database.close(()=>this.cache)}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}async flushPending(){if(!this.hasPending)return;let e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{if(!this.hasPending)for(;this.whenFlushedCallbacks.length;){var e;null===(e=this.whenFlushedCallbacks.pop())||void 0===e||e()}})}async flush(e){if(this.state!==kg.Closed&&!this.pendingClose)return this.doFlush(e)}async doFlush(e){return this.options.hint===Sg.STORAGE_IN_MEMORY?this.flushPending():this.flushDelayer.trigger(()=>this.flushPending(),e)}async whenFlushed(){if(this.hasPending)return new Promise(e=>this.whenFlushedCallbacks.push(e))}isInMemory(){return this.options.hint===Sg.STORAGE_IN_MEMORY}},{_:R.DEFAULT_FLUSH_DELAY=100},R),Ag=class{constructor(){this.onDidChangeItemsExternal=_o.None,this.items=new Map}async getItems(){return this.items}async updateItems(e){var t,i;null!==(t=e.insert)&&void 0!==t&&t.forEach((e,t)=>this.items.set(t,e)),null===(i=e.delete)||void 0===i||i.forEach(e=>this.items.delete(e))}async optimize(){}async close(){}};function Ng(e){return Fg(e,0)}function Fg(e,t){switch(typeof e){case"object":return null===e?Og(349,t):Array.isArray(e)?function(e,t){return t=Og(104579,t),e.reduce((e,t)=>Fg(t,e),t)}(e,t):function(e,t){return t=Og(181387,t),Object.keys(e).sort().reduce((t,i)=>(t=Rg(i,t),Fg(e[i],t)),t)}(e,t);case"string":return Rg(e,t);case"boolean":return function(e,t){return Og(e?433:863,t)}(e,t);case"number":return Og(e,t);case"undefined":return Og(937,t);default:return Og(617,t)}}function Og(e,t){return(t<<5)-t+e|0}function Rg(e,t){t=Og(149417,t);for(let i=0,n=e.length;i<n;i++)t=Og(e.charCodeAt(i),t);return t}function Mg(e,t){let i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:32)-t;return(e<<t|(~((1<<i)-1)&e)>>>i)>>>0}function Pg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32;return e instanceof ArrayBuffer?function(e){let{buffer:t}=e,i="";for(let n=0;n<t.length;n++){let e=t[n];i+=Eg[e>>>4],i+=Eg[15&e]}return i}(gg.wrap(new Uint8Array(e))):(e>>>0).toString(16).padStart(t/4,"0")}!function(e){e[e.BLOCK_SIZE=64]="BLOCK_SIZE",e[e.UNICODE_REPLACEMENT=65533]="UNICODE_REPLACEMENT"}(xg||(xg={}));var Bg,Ug=(M=class e{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(xg.BLOCK_SIZE+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){let t=e.length;if(0===t)return;let i,n,s=this._buff,r=this._buffLen,o=this._leftoverHighSurrogate;for(0===o?(i=e.charCodeAt(0),n=0):(i=o,n=-1,o=0);;){let a=i;if(Ca(i)){if(!(n+1<t)){o=i;break}{let t=e.charCodeAt(n+1);ya(t)?(n++,a=wa(i,t)):a=xg.UNICODE_REPLACEMENT}}else ya(i)&&(a=xg.UNICODE_REPLACEMENT);if(r=this._push(s,r,a),n++,!(n<t))break;i=e.charCodeAt(n)}this._buffLen=r,this._leftoverHighSurrogate=o}_push(e,t,i){return i<128?e[t++]=i:i<2048?(e[t++]=192|(1984&i)>>>6,e[t++]=128|(63&i)>>>0):i<65536?(e[t++]=224|(61440&i)>>>12,e[t++]=128|(4032&i)>>>6,e[t++]=128|(63&i)>>>0):(e[t++]=240|(1835008&i)>>>18,e[t++]=128|(258048&i)>>>12,e[t++]=128|(4032&i)>>>6,e[t++]=128|(63&i)>>>0),t>=xg.BLOCK_SIZE&&(this._step(),t-=xg.BLOCK_SIZE,this._totalLen+=xg.BLOCK_SIZE,e[0]=e[xg.BLOCK_SIZE+0],e[1]=e[xg.BLOCK_SIZE+1],e[2]=e[xg.BLOCK_SIZE+2]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,xg.UNICODE_REPLACEMENT)),this._totalLen+=this._buffLen,this._wrapUp()),Pg(this._h0)+Pg(this._h1)+Pg(this._h2)+Pg(this._h3)+Pg(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,this._buff.subarray(this._buffLen).fill(0),this._buffLen>56&&(this._step(),this._buff.fill(0));let e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){let t=e._bigBlock32,i=this._buffDV;for(let e=0;e<64;e+=4)t.setUint32(e,i.getUint32(e,!1),!1);for(let e=64;e<320;e+=4)t.setUint32(e,Mg(t.getUint32(e-12,!1)^t.getUint32(e-32,!1)^t.getUint32(e-56,!1)^t.getUint32(e-64,!1),1),!1);let n,s,r,o=this._h0,a=this._h1,l=this._h2,h=this._h3,d=this._h4;for(let e=0;e<80;e++)e<20?(n=a&l|~a&h,s=1518500249):e<40?(n=a^l^h,s=1859775393):e<60?(n=a&l|a&h|l&h,s=2400959708):(n=a^l^h,s=3395469782),r=Mg(o,5)+n+d+s+t.getUint32(4*e,!1)&4294967295,d=h,h=l,l=Mg(a,30),a=o,o=r;this._h0=this._h0+o&4294967295,this._h1=this._h1+a&4294967295,this._h2=this._h2+l&4294967295,this._h3=this._h3+h&4294967295,this._h4=this._h4+d&4294967295}},{_:M._bigBlock32=new DataView(new ArrayBuffer(320))},M),Hg=fn("environmentService"),Wg=class{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){return e.charCodeAt(0)-this._value.charCodeAt(this._pos)}value(){return this._value[this._pos]}},Vg=class{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===En.Period){if(!e)break;this._from++}else e=!1;return this}cmp(e){return this._caseSensitive?ha(e,this._value,0,e.length,this._from,this._to):ca(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}},zg=class{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){let e=this._value.charCodeAt(t);if(!(e===En.Slash||this._splitOnBackslash&&e===En.Backslash))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){let t=this._value.charCodeAt(this._to);if(t===En.Slash||this._splitOnBackslash&&t===En.Backslash){if(!e)break;this._from++}else e=!1}return this}cmp(e){return this._caseSensitive?ha(e,this._value,0,e.length,this._from,this._to):ca(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}};!function(e){e[e.Scheme=1]="Scheme",e[e.Authority=2]="Authority",e[e.Path=3]="Path",e[e.Query=4]="Query",e[e.Fragment=5]="Fragment"}(Bg||(Bg={}));var Kg,qg=class{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(Bg.Scheme),this._value.authority&&this._states.push(Bg.Authority),this._value.path&&(this._pathIterator=new zg(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(Bg.Path)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(Bg.Query),this._value.fragment&&this._states.push(Bg.Fragment)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===Bg.Path&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===Bg.Path&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===Bg.Scheme)return da(e,this._value.scheme);if(this._states[this._stateIdx]===Bg.Authority)return da(e,this._value.authority);if(this._states[this._stateIdx]===Bg.Path)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===Bg.Query)return la(e,this._value.query);if(this._states[this._stateIdx]===Bg.Fragment)return la(e,this._value.fragment);throw Error()}value(){if(this._states[this._stateIdx]===Bg.Scheme)return this._value.scheme;if(this._states[this._stateIdx]===Bg.Authority)return this._value.authority;if(this._states[this._stateIdx]===Bg.Path)return this._pathIterator.value();if(this._states[this._stateIdx]===Bg.Query)return this._value.query;if(this._states[this._stateIdx]===Bg.Fragment)return this._value.fragment;throw Error()}},Gg=(P=class e{static wrap(t){return void 0===t?e.Val:t}static unwrap(t){return t===e.Val?void 0:t}},{_:P.Val=Symbol("undefined_placeholder")},P),jg=class{constructor(){this.height=1,this.value=void 0,this.key=void 0,this.left=void 0,this.mid=void 0,this.right=void 0}isEmpty(){return!this.left&&!this.mid&&!this.right&&void 0===this.value}rotateLeft(){let e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){let e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e,t;return null!==(e=null===(t=this.left)||void 0===t?void 0:t.height)&&void 0!==e?e:0}get heightRight(){var e,t;return null!==(e=null===(t=this.right)||void 0===t?void 0:t.height)&&void 0!==e?e:0}};!function(e){e[e.Left=-1]="Left",e[e.Mid=0]="Mid",e[e.Right=1]="Right"}(Kg||(Kg={}));var Yg,Qg,$g,Xg,Zg,Jg=class e{static forUris(){return new e(new qg(arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>!1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>!1))}static forPaths(){return new e(new zg(void 0,!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])))}static forStrings(){return new e(new Wg)}static forConfigKeys(){return new e(new Vg)}constructor(e){this._iter=e}clear(){this._root=void 0}fill(e,t){if(t){let i=t.slice(0);Wr(i);for(let t of i)this.set(t,e)}else{let t=e.slice(0);Wr(t);for(let e of t)this.set(e[0],e[1])}}set(e,t){let i,n=this._iter.reset(e);this._root||(this._root=new jg,this._root.segment=n.value());let s=[];for(i=this._root;;){let e=n.cmp(i.segment);if(e>0)i.left||(i.left=new jg,i.left.segment=n.value()),s.push([Kg.Left,i]),i=i.left;else if(e<0)i.right||(i.right=new jg,i.right.segment=n.value()),s.push([Kg.Right,i]),i=i.right;else{if(!n.hasNext())break;n.next(),i.mid||(i.mid=new jg,i.mid.segment=n.value()),s.push([Kg.Mid,i]),i=i.mid}}let r=Gg.unwrap(i.value);i.value=Gg.wrap(t),i.key=e;for(let o=s.length-1;o>=0;o--){let e=s[o][1];e.updateHeight();let t=e.balanceFactor();if(t<-1||t>1){let t=s[o][0],i=s[o+1][0];if(t===Kg.Right&&i===Kg.Right)s[o][1]=e.rotateLeft();else if(t===Kg.Left&&i===Kg.Left)s[o][1]=e.rotateRight();else if(t===Kg.Right&&i===Kg.Left)e.right=s[o+1][1]=s[o+1][1].rotateRight(),s[o][1]=e.rotateLeft();else{if(t!==Kg.Left||i!==Kg.Right)throw Error();e.left=s[o+1][1]=s[o+1][1].rotateLeft(),s[o][1]=e.rotateRight()}if(o>0)switch(s[o-1][0]){case Kg.Left:s[o-1][1].left=s[o][1];break;case Kg.Right:s[o-1][1].right=s[o][1];break;case Kg.Mid:s[o-1][1].mid=s[o][1]}else this._root=s[0][1]}}return r}get(e){var t;return Gg.unwrap(null===(t=this._getNode(e))||void 0===t?void 0:t.value)}_getNode(e){let t=this._iter.reset(e),i=this._root;for(;i;){let e=t.cmp(i.segment);if(e>0)i=i.left;else if(e<0)i=i.right;else{if(!t.hasNext())break;t.next(),i=i.mid}}return i}has(e){let t=this._getNode(e);return!(void 0===(null===t||void 0===t?void 0:t.value)&&void 0===(null===t||void 0===t?void 0:t.mid))}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){let i=this._iter.reset(e),n=[],s=this._root;for(;s;){let e=i.cmp(s.segment);if(e>0)n.push([Kg.Left,s]),s=s.left;else if(e<0)n.push([Kg.Right,s]),s=s.right;else{if(!i.hasNext())break;i.next(),n.push([Kg.Mid,s]),s=s.mid}}if(s){var r;if(t?(s.left=void 0,s.mid=void 0,s.right=void 0,s.height=1):(s.key=void 0,s.value=void 0),!s.mid&&!s.value)if(s.left&&s.right){let e=[[Kg.Right,s]],t=this._min(s.right,e);if(t.key){s.key=t.key,s.value=t.value,s.segment=t.segment;let i=t.right;if(e.length>1){let[t,n]=e[e.length-1];switch(t){case Kg.Left:n.left=i;break;case Kg.Mid:ji(!1);case Kg.Right:ji(!1)}}else s.right=i;let r=this._balanceByStack(e);if(n.length>0){let[e,t]=n[n.length-1];switch(e){case Kg.Left:t.left=r;break;case Kg.Mid:t.mid=r;break;case Kg.Right:t.right=r}}else this._root=r}}else{var o;let e=null!==(o=s.left)&&void 0!==o?o:s.right;if(n.length>0){let[t,i]=n[n.length-1];switch(t){case Kg.Left:i.left=e;break;case Kg.Mid:i.mid=e;break;case Kg.Right:i.right=e}}else this._root=e}this._root=null!==(r=this._balanceByStack(n))&&void 0!==r?r:this._root}}_min(e,t){for(;e.left;)t.push([Kg.Left,e]),e=e.left;return e}_balanceByStack(e){for(let t=e.length-1;t>=0;t--){let i=e[t][1];i.updateHeight();let n=i.balanceFactor();if(n>1?(i.right.balanceFactor()>=0||(i.right=i.right.rotateRight()),e[t][1]=i.rotateLeft()):n<-1&&(i.left.balanceFactor()<=0||(i.left=i.left.rotateLeft()),e[t][1]=i.rotateRight()),!(t>0))return e[0][1];switch(e[t-1][0]){case Kg.Left:e[t-1][1].left=e[t][1];break;case Kg.Right:e[t-1][1].right=e[t][1];break;case Kg.Mid:e[t-1][1].mid=e[t][1]}}}findSubstr(e){let t,i=this._iter.reset(e),n=this._root;for(;n;){let e=i.cmp(n.segment);if(e>0)n=n.left;else if(e<0)n=n.right;else{if(!i.hasNext())break;i.next(),t=Gg.unwrap(n.value)||t,n=n.mid}}return n&&Gg.unwrap(n.value)||t}findSuperstr(e){return this._findSuperstrOrElement(e,!1)}_findSuperstrOrElement(e,t){let i=this._iter.reset(e),n=this._root;for(;n;){let e=i.cmp(n.segment);if(e>0)n=n.left;else if(e<0)n=n.right;else{if(!i.hasNext())return n.mid?this._entries(n.mid):t?Gg.unwrap(n.value):void 0;i.next(),n=n.mid}}}hasElementOrSubtree(e){return void 0!==this._findSuperstrOrElement(e,!0)}forEach(e){for(let[t,i]of this)e(i,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){let t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),void 0!==e.value&&t.push([e.key,Gg.unwrap(e.value)]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}_isBalanced(){let e=t=>{if(!t)return!0;let i=t.balanceFactor();return!(i<-1||i>1)&&(e(t.left)&&e(t.right))};return e(this._root)}};function ep(e){return!!(e.capabilities&Xg.FileReadWrite)}function tp(e){return!!(e.capabilities&Xg.FileFolderCopy)}function ip(e){return!!(e.capabilities&Xg.FileOpenReadWriteClose)}function np(e){return!!(e.capabilities&Xg.FileReadStream)}function sp(e){return!!ep(e)&&!!(e.capabilities&Xg.FileAtomicRead)}function rp(e){return!!ep(e)&&!!(e.capabilities&Xg.FileAtomicWrite)}!function(e){e[e.Unknown=0]="Unknown",e[e.File=1]="File",e[e.Directory=2]="Directory",e[e.SymbolicLink=64]="SymbolicLink"}(Yg||(Yg={})),function(e){e[e.Readonly=1]="Readonly",e[e.Locked=2]="Locked"}(Qg||(Qg={})),function(e){e[e.UPDATED=2]="UPDATED",e[e.ADDED=4]="ADDED",e[e.DELETED=8]="DELETED"}($g||($g={})),function(e){e[e.None=0]="None",e[e.FileReadWrite=2]="FileReadWrite",e[e.FileOpenReadWriteClose=4]="FileOpenReadWriteClose",e[e.FileReadStream=16]="FileReadStream",e[e.FileFolderCopy=8]="FileFolderCopy",e[e.PathCaseSensitive=1024]="PathCaseSensitive",e[e.Readonly=2048]="Readonly",e[e.Trash=4096]="Trash",e[e.FileWriteUnlock=8192]="FileWriteUnlock",e[e.FileAtomicRead=16384]="FileAtomicRead",e[e.FileAtomicWrite=32768]="FileAtomicWrite",e[e.FileAtomicDelete=65536]="FileAtomicDelete",e[e.FileClone=131072]="FileClone",e[e.FileRealpath=262144]="FileRealpath"}(Xg||(Xg={})),function(e){e.FileExists="EntryExists",e.FileNotFound="EntryNotFound",e.FileNotADirectory="EntryNotADirectory",e.FileIsADirectory="EntryIsADirectory",e.FileExceedsStorageQuota="EntryExceedsStorageQuota",e.FileTooLarge="EntryTooLarge",e.FileWriteLocked="EntryWriteLocked",e.NoPermissions="NoPermissions",e.Unavailable="Unavailable",e.Unknown="Unknown"}(Zg||(Zg={}));var op,ap=class e extends Error{static create(t,i){let n=new e(t.toString(),i);return function(e,t){e.name=t?"".concat(t," (FileSystemError)"):"FileSystemError"}(n,i),n}constructor(e,t){super(e),this.code=t}};function lp(e,t){return ap.create(e,t)}function hp(e){return e||lp(Li(1932,"Unknown Error"),Zg.Unknown)}function dp(e){if(!e)return Zg.Unknown;if(e instanceof ap)return e.code;let t=/^(.+) \(FileSystemError\)$/.exec(e.name);if(!t)return Zg.Unknown;switch(t[1]){case Zg.FileExists:return Zg.FileExists;case Zg.FileIsADirectory:return Zg.FileIsADirectory;case Zg.FileNotADirectory:return Zg.FileNotADirectory;case Zg.FileNotFound:return Zg.FileNotFound;case Zg.FileTooLarge:return Zg.FileTooLarge;case Zg.FileWriteLocked:return Zg.FileWriteLocked;case Zg.NoPermissions:return Zg.NoPermissions;case Zg.Unavailable:return Zg.Unavailable}return Zg.Unknown}function cp(e){if(e instanceof mp)return e.fileOperationResult;switch(dp(e)){case Zg.FileNotFound:return pp.FILE_NOT_FOUND;case Zg.FileIsADirectory:return pp.FILE_IS_DIRECTORY;case Zg.FileNotADirectory:return pp.FILE_NOT_DIRECTORY;case Zg.FileWriteLocked:return pp.FILE_WRITE_LOCKED;case Zg.NoPermissions:return pp.FILE_PERMISSION_DENIED;case Zg.FileExists:return pp.FILE_MOVE_CONFLICT;case Zg.FileTooLarge:return pp.FILE_TOO_LARGE;default:return pp.FILE_OTHER_ERROR}}!function(e){e[e.CREATE=0]="CREATE",e[e.DELETE=1]="DELETE",e[e.MOVE=2]="MOVE",e[e.COPY=3]="COPY",e[e.WRITE=4]="WRITE"}(op||(op={}));var up,gp=class{constructor(e,t,i){this.resource=e,this.operation=t,this.target=i}isOperation(e){return this.operation===e}};!function(e){e[e.UPDATED=0]="UPDATED",e[e.ADDED=1]="ADDED",e[e.DELETED=2]="DELETED"}(up||(up={}));var pp,fp=(B=class e{constructor(t,i){this.ignorePathCasing=i,this.correlationId=void 0,this.added=new Jo(()=>{let e=Jg.forUris(()=>this.ignorePathCasing);return e.fill(this.rawAdded.map(e=>[e,!0])),e}),this.updated=new Jo(()=>{let e=Jg.forUris(()=>this.ignorePathCasing);return e.fill(this.rawUpdated.map(e=>[e,!0])),e}),this.deleted=new Jo(()=>{let e=Jg.forUris(()=>this.ignorePathCasing);return e.fill(this.rawDeleted.map(e=>[e,!0])),e}),this.rawAdded=[],this.rawUpdated=[],this.rawDeleted=[];for(let n of t){switch(n.type){case up.ADDED:this.rawAdded.push(n.resource);break;case up.UPDATED:this.rawUpdated.push(n.resource);break;case up.DELETED:this.rawDeleted.push(n.resource)}this.correlationId!==e.MIXED_CORRELATION&&("number"==typeof n.cId?void 0===this.correlationId?this.correlationId=n.cId:this.correlationId!==n.cId&&(this.correlationId=e.MIXED_CORRELATION):void 0!==this.correlationId&&(this.correlationId=e.MIXED_CORRELATION))}}contains(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return this.doContains(e,{includeChildren:!1},...i)}affects(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return this.doContains(e,{includeChildren:!0},...i)}doContains(e,t){if(!e)return!1;for(var i=arguments.length,n=new Array(i>2?i-2:0),s=2;s<i;s++)n[s-2]=arguments[s];let r=n.length>0;return!!((!r||n.includes(up.ADDED))&&(this.added.value.get(e)||t.includeChildren&&this.added.value.findSuperstr(e))||(!r||n.includes(up.UPDATED))&&(this.updated.value.get(e)||t.includeChildren&&this.updated.value.findSuperstr(e))||(!r||n.includes(up.DELETED))&&(this.deleted.value.findSubstr(e)||t.includeChildren&&this.deleted.value.findSuperstr(e)))}gotAdded(){return this.rawAdded.length>0}gotDeleted(){return this.rawDeleted.length>0}gotUpdated(){return this.rawUpdated.length>0}correlates(e){return this.correlationId===e}hasCorrelation(){return"number"==typeof this.correlationId}},{_:B.MIXED_CORRELATION=null},B),mp=class extends Error{constructor(e,t,i){super(e),this.fileOperationResult=t,this.options=i}},vp=class extends mp{constructor(e,t,i,n){super(e,t,n),this.fileOperationResult=t,this.size=i}},_p=class extends mp{constructor(e,t,i){super(e,pp.FILE_NOT_MODIFIED_SINCE,i),this.stat=t}};!function(e){e[e.FILE_IS_DIRECTORY=0]="FILE_IS_DIRECTORY",e[e.FILE_NOT_FOUND=1]="FILE_NOT_FOUND",e[e.FILE_NOT_MODIFIED_SINCE=2]="FILE_NOT_MODIFIED_SINCE",e[e.FILE_MODIFIED_SINCE=3]="FILE_MODIFIED_SINCE",e[e.FILE_MOVE_CONFLICT=4]="FILE_MOVE_CONFLICT",e[e.FILE_WRITE_LOCKED=5]="FILE_WRITE_LOCKED",e[e.FILE_PERMISSION_DENIED=6]="FILE_PERMISSION_DENIED",e[e.FILE_TOO_LARGE=7]="FILE_TOO_LARGE",e[e.FILE_INVALID_PATH=8]="FILE_INVALID_PATH",e[e.FILE_NOT_DIRECTORY=9]="FILE_NOT_DIRECTORY",e[e.FILE_OTHER_ERROR=10]="FILE_OTHER_ERROR"}(pp||(pp={}));var bp,Cp={OFF:"off",AFTER_DELAY:"afterDelay",ON_FOCUS_CHANGE:"onFocusChange",ON_WINDOW_CHANGE:"onWindowChange"},yp="off",wp="onExit",Sp="onExitAndWindowClose",kp="files.associations",Ep="files.exclude",Dp="files.readonlyInclude",Tp="files.readonlyExclude",Ip="files.readonlyFromPermissions";function xp(e){if("number"==typeof e.size&&"number"==typeof e.mtime)return e.mtime.toString(29)+e.size.toString(31)}!function(e){e[e.FILE=0]="FILE",e[e.FOLDER=1]="FOLDER",e[e.ROOT_FOLDER=2]="ROOT_FOLDER"}(bp||(bp={})),U=class e{static formatSize(t){return Ji(t)||(t=0),t<e.KB?Li(1933,"{0}B",t.toFixed(0)):t<e.MB?Li(1934,"{0}KB",(t/e.KB).toFixed(2)):t<e.GB?Li(1935,"{0}MB",(t/e.MB).toFixed(2)):t<e.TB?Li(1936,"{0}GB",(t/e.GB).toFixed(2)):Li(1937,"{0}TB",(t/e.TB).toFixed(2))}};U.KB=1024,U.MB=U.KB*U.KB,U.GB=U.MB*U.KB,U.TB=U.GB*U.KB;var Lp,Ap=fn("fileService"),Np=fn("logService"),Fp=fn("loggerService");!function(e){e[e.EMPTY=1]="EMPTY",e[e.FOLDER=2]="FOLDER",e[e.WORKSPACE=3]="WORKSPACE"}(Lp||(Lp={}));var Op=class{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toResource(e){return hl(this.uri,e)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}},Rp="code-workspace";"".concat(Rp),Li(2452,"Code Workspace");var Mp,Pp=fn("IUriIdentityService"),Bp=function(){if("function"==typeof crypto.randomUUID)return crypto.randomUUID.bind(crypto);let e=new Uint8Array(16),t=[];for(let i=0;i<256;i++)t.push(i.toString(16).padStart(2,"0"));return function(){crypto.getRandomValues(e),e[6]=15&e[6]|64,e[8]=63&e[8]|128;let i=0,n="";return n+=t[e[i++]],n+=t[e[i++]],n+=t[e[i++]],n+=t[e[i++]],n+="-",n+=t[e[i++]],n+=t[e[i++]],n+="-",n+=t[e[i++]],n+=t[e[i++]],n+="-",n+=t[e[i++]],n+=t[e[i++]],n+="-",n+=t[e[i++]],n+=t[e[i++]],n+=t[e[i++]],n+=t[e[i++]],n+=t[e[i++]],n+=t[e[i++]],n}}();function Up(e,t,i,n,s,r){var o,a,l,h,d,c,u,g;return{id:e,name:t,location:i,isDefault:!1,icon:null===s||void 0===s?void 0:s.icon,globalStorageHome:r&&null!==s&&void 0!==s&&null!==(o=s.useDefaultFlags)&&void 0!==o&&o.globalState?r.globalStorageHome:hl(i,"globalStorage"),settingsResource:r&&null!==s&&void 0!==s&&null!==(a=s.useDefaultFlags)&&void 0!==a&&a.settings?r.settingsResource:hl(i,"settings.json"),keybindingsResource:r&&null!==s&&void 0!==s&&null!==(l=s.useDefaultFlags)&&void 0!==l&&l.keybindings?r.keybindingsResource:hl(i,"keybindings.json"),tasksResource:r&&null!==s&&void 0!==s&&null!==(h=s.useDefaultFlags)&&void 0!==h&&h.tasks?r.tasksResource:hl(i,"tasks.json"),snippetsHome:r&&null!==s&&void 0!==s&&null!==(d=s.useDefaultFlags)&&void 0!==d&&d.snippets?r.snippetsHome:hl(i,"snippets"),promptsHome:r&&null!==s&&void 0!==s&&null!==(c=s.useDefaultFlags)&&void 0!==c&&c.prompts?r.promptsHome:hl(i,"prompts"),extensionsResource:r&&null!==s&&void 0!==s&&null!==(u=s.useDefaultFlags)&&void 0!==u&&u.extensions?r.extensionsResource:hl(i,"extensions.json"),mcpResource:r&&null!==s&&void 0!==s&&null!==(g=s.useDefaultFlags)&&void 0!==g&&g.mcp?r.mcpResource:hl(i,"mcp.json"),cacheHome:hl(n,e),useDefaultFlags:null===s||void 0===s?void 0:s.useDefaultFlags,isTransient:null===s||void 0===s?void 0:s.transient,workspaces:null===s||void 0===s?void 0:s.workspaces}}!function(e){e.Settings="settings",e.Keybindings="keybindings",e.Snippets="snippets",e.Prompts="prompts",e.Tasks="tasks",e.Extensions="extensions",e.GlobalState="globalState",e.Mcp="mcp"}(Mp||(Mp={}));var Hp=(H=class extends Co{get defaultProfile(){return this.profiles[0]}get profiles(){return[...this.profilesObject.profiles,...this.transientProfilesObject.profiles]}constructor(e,t,i,n){super(),this.environmentService=e,this.fileService=t,this.uriIdentityService=i,this.logService=n,this._onDidChangeProfiles=this._register(new Ro),this.onDidChangeProfiles=this._onDidChangeProfiles.event,this._onWillCreateProfile=this._register(new Ro),this.onWillCreateProfile=this._onWillCreateProfile.event,this._onWillRemoveProfile=this._register(new Ro),this.onWillRemoveProfile=this._onWillRemoveProfile.event,this._onDidResetWorkspaces=this._register(new Ro),this.onDidResetWorkspaces=this._onDidResetWorkspaces.event,this.profileCreationPromises=new Map,this.transientProfilesObject={profiles:[],emptyWindows:new Map},this.profilesHome=hl(this.environmentService.userRoamingDataHome,"profiles"),this.profilesCacheHome=hl(this.environmentService.cacheHome,"CachedProfilesData")}init(){this._profilesObject=void 0}get profilesObject(){if(!this._profilesObject){let e=this.createDefaultProfile(),t=[e];try{for(let i of this.getStoredProfiles())i.name&&$i(i.name)&&i.location?t.push(Up(ol(i.location),i.name,i.location,this.profilesCacheHome,{icon:i.icon,useDefaultFlags:i.useDefaultFlags},e)):this.logService.warn("Skipping the invalid stored profile",i.location||i.name)}catch(hn){this.logService.error(hn)}let i=new Map;if(t.length)try{let e=this.getStoredProfileAssociations();if(e.workspaces)for(let[i,n]of Object.entries(e.workspaces)){let e=Gs.parse(i),s=t.find(e=>e.id===n);if(s){let t=s.workspaces?s.workspaces.slice(0):[];t.push(e),s.workspaces=t}}if(e.emptyWindows)for(let[n,s]of Object.entries(e.emptyWindows)){let e=t.find(e=>e.id===s);e&&i.set(n,e)}}catch(hn){this.logService.error(hn)}this._profilesObject={profiles:t,emptyWindows:i}}return this._profilesObject}createDefaultProfile(){var e;let t=Up("__default__profile__",Li(2434,"Default"),this.environmentService.userRoamingDataHome,this.profilesCacheHome);return(0,r.A)((0,r.A)({},t),{},{extensionsResource:null!==(e=this.getDefaultProfileExtensionsLocation())&&void 0!==e?e:t.extensionsResource,isDefault:!0})}async createTransientProfile(e){let t="Temp",i=RegExp("".concat(sa(t),"\\s(\\d+)")),n=0;for(let r of this.profiles){let e=i.exec(r.name),t=e?parseInt(e[1]):0;n=t>n?t:n}let s="".concat(t," ").concat(n+1);return this.createProfile(Ng(Bp()).toString(16),s,{transient:!0},e)}async createNamedProfile(e,t,i){return this.createProfile(Ng(Bp()).toString(16),e,t,i)}async createProfile(e,t,i,n){return await this.doCreateProfile(e,t,i,n)}async doCreateProfile(e,t,i,n){if(!$i(t)||!t)throw Error("Name of the profile is mandatory and must be of type `string`");let s=this.profileCreationPromises.get(t);return s||(s=(async()=>{try{if(this.profiles.find(n=>{var s;return n.id===e||!n.isTransient&&!(null!==(s=i)&&void 0!==s&&s.transient)&&n.name===t}))throw Error("Profile with ".concat(t," name already exists"));let s=n?this.getWorkspace(n):void 0;Gs.isUri(s)&&(i=(0,r.A)((0,r.A)({},i),{},{workspaces:[s]}));let o=Up(e,t,hl(this.profilesHome,e),this.profilesCacheHome,i,this.defaultProfile);await this.fileService.createFolder(o.location);let a=[];return this._onWillCreateProfile.fire({profile:o,join(e){a.push(e)}}),await Hl.settled(a),s&&!Gs.isUri(s)&&this.updateEmptyWindowAssociation(s,o,!!o.isTransient),this.updateProfiles([o],[],[]),o}finally{this.profileCreationPromises.delete(t)}})(),this.profileCreationPromises.set(t,s)),s}async updateProfile(e,t){let i=[];for(let c of this.profiles){var n,s,r,o,a;let d;if(e.id===c.id)c.isDefault?t.workspaces&&(d=c,d.workspaces=t.workspaces):d=Up(c.id,null!==(n=t.name)&&void 0!==n?n:c.name,c.location,this.profilesCacheHome,{icon:null===t.icon?void 0:null!==(s=t.icon)&&void 0!==s?s:c.icon,transient:null!==(r=t.transient)&&void 0!==r?r:c.isTransient,useDefaultFlags:null!==(o=t.useDefaultFlags)&&void 0!==o?o:c.useDefaultFlags,workspaces:null!==(a=t.workspaces)&&void 0!==a?a:c.workspaces},this.defaultProfile);else if(t.workspaces){var l,h;let e=null===(l=c.workspaces)||void 0===l?void 0:l.filter(e=>{var i;return!(null!==(i=t.workspaces)&&void 0!==i&&i.some(t=>this.uriIdentityService.extUri.isEqual(e,t)))});(null===(h=c.workspaces)||void 0===h?void 0:h.length)!==(null===e||void 0===e?void 0:e.length)&&(d=c,d.workspaces=e)}d&&i.push(d)}if(!i.length)throw e.isDefault?Error("Cannot update default profile"):Error("Profile '".concat(e.name,"' does not exist"));this.updateProfiles([],[],i);let d=this.profiles.find(t=>t.id===e.id);if(!d)throw Error("Profile '".concat(e.name,"' was not updated"));return d}async removeProfile(e){if(e.isDefault)throw Error("Cannot remove default profile");let t=this.profiles.find(t=>t.id===e.id);if(!t)throw Error("Profile '".concat(e.name,"' does not exist"));let i=[];this._onWillRemoveProfile.fire({profile:t,join(e){i.push(e)}});try{await Promise.allSettled(i)}catch(e){this.logService.error(e)}this.updateProfiles([],[t],[]);try{await this.fileService.del(t.cacheHome,{recursive:!0})}catch(e){cp(e)!==pp.FILE_NOT_FOUND&&this.logService.error(e)}}async setProfileForWorkspace(e,t){let i=this.profiles.find(e=>e.id===t.id);if(!i)throw Error("Profile '".concat(t.name,"' does not exist"));let n=this.getWorkspace(e);if(Gs.isUri(n)){let e=i.workspaces?[...i.workspaces]:[];e.some(e=>this.uriIdentityService.extUri.isEqual(e,n))||(e.push(n),await this.updateProfile(i,{workspaces:e}))}else this.updateEmptyWindowAssociation(n,i,!1),this.updateStoredProfiles(this.profiles)}unsetWorkspace(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.getWorkspace(e);if(Gs.isUri(i)){var n;let t=this.getProfileForWorkspace(e);t&&this.updateProfile(t,{workspaces:null===(n=t.workspaces)||void 0===n?void 0:n.filter(e=>!this.uriIdentityService.extUri.isEqual(e,i))})}else this.updateEmptyWindowAssociation(i,void 0,t),this.updateStoredProfiles(this.profiles)}async resetWorkspaces(){this.transientProfilesObject.emptyWindows.clear(),this.profilesObject.emptyWindows.clear();for(let e of this.profiles)e.workspaces=void 0;this.updateProfiles([],[],this.profiles),this._onDidResetWorkspaces.fire()}async cleanUp(){if(await this.fileService.exists(this.profilesHome)){let e=await this.fileService.resolve(this.profilesHome);await Promise.all((e.children||[]).filter(e=>e.isDirectory&&this.profiles.every(t=>!this.uriIdentityService.extUri.isEqual(t.location,e.resource))).map(e=>this.fileService.del(e.resource,{recursive:!0})))}}async cleanUpTransientProfiles(){let e=this.transientProfilesObject.profiles.filter(e=>!this.isProfileAssociatedToWorkspace(e));await Promise.allSettled(e.map(e=>this.removeProfile(e)))}getProfileForWorkspace(e){var t;let i=this.getWorkspace(e);return Gs.isUri(i)?this.profiles.find(e=>{var t;return null===(t=e.workspaces)||void 0===t?void 0:t.some(e=>this.uriIdentityService.extUri.isEqual(e,i))}):null!==(t=this.profilesObject.emptyWindows.get(i))&&void 0!==t?t:this.transientProfilesObject.emptyWindows.get(i)}getWorkspace(e){return function(e){let t=e;return"string"==typeof(null===t||void 0===t?void 0:t.id)&&Gs.isUri(t.uri)}(e)?e.uri:function(e){let t=e;return"string"==typeof(null===t||void 0===t?void 0:t.id)&&Gs.isUri(t.configPath)}(e)?e.configPath:e.id}isProfileAssociatedToWorkspace(e){var t;return!!(null!==(t=e.workspaces)&&void 0!==t&&t.length||[...this.profilesObject.emptyWindows.values()].some(t=>this.uriIdentityService.extUri.isEqual(t.location,e.location))||[...this.transientProfilesObject.emptyWindows.values()].some(t=>this.uriIdentityService.extUri.isEqual(t.location,e.location)))}updateProfiles(e,t,i){let n=[...this.profiles,...e],s=this.transientProfilesObject.profiles;this.transientProfilesObject.profiles=[];let r=[];for(let h of n){var o;if(t.some(e=>h.id===e.id))for(let e of[...this.profilesObject.emptyWindows.keys()]){var a;h.id===(null===(a=this.profilesObject.emptyWindows.get(e))||void 0===a?void 0:a.id)&&this.profilesObject.emptyWindows.delete(e)}else{if(!h.isDefault){var l;h=null!==(l=i.find(e=>h.id===e.id))&&void 0!==l?l:h;let e=s.find(e=>h.id===e.id);if(h.isTransient)this.transientProfilesObject.profiles.push(h);else if(e)for(let[t,i]of this.transientProfilesObject.emptyWindows.entries())if(h.id===i.id){this.transientProfilesObject.emptyWindows.delete(t),this.profilesObject.emptyWindows.set(t,h);break}}0===(null===(o=h.workspaces)||void 0===o?void 0:o.length)&&(h.workspaces=void 0),r.push(h)}}this.updateStoredProfiles(r),this.triggerProfilesChanges(e,t,i)}triggerProfilesChanges(e,t,i){this._onDidChangeProfiles.fire({added:e,removed:t,updated:i,all:this.profiles})}updateEmptyWindowAssociation(e,t,i){(i=!(null===t||void 0===t||!t.isTransient)||i)?t?this.transientProfilesObject.emptyWindows.set(e,t):this.transientProfilesObject.emptyWindows.delete(e):(this.transientProfilesObject.emptyWindows.delete(e),t?this.profilesObject.emptyWindows.set(e,t):this.profilesObject.emptyWindows.delete(e))}updateStoredProfiles(e){let t=[],i={},n={};for(let s of e)if(!s.isTransient&&(s.isDefault||t.push({location:s.location,name:s.name,icon:s.icon,useDefaultFlags:s.useDefaultFlags}),s.workspaces))for(let e of s.workspaces)i[e.toString()]=s.id;for(let[s,r]of this.profilesObject.emptyWindows.entries())n[s.toString()]=r.id;this.saveStoredProfileAssociations({workspaces:i,emptyWindows:n}),this.saveStoredProfiles(t),this._profilesObject=void 0}getStoredProfiles(){return[]}saveStoredProfiles(e){throw Error("not implemented")}getStoredProfileAssociations(){return{}}saveStoredProfileAssociations(e){throw Error("not implemented")}getDefaultProfileExtensionsLocation(){}},{_:H.PROFILES_KEY="userDataProfiles"},{_:H.PROFILE_ASSOCIATIONS_KEY="profileAssociations"},H);Hp=ki([Ei(0,Hg),Ei(1,Ap),Ei(2,Pp),Ei(3,Np)],Hp);var Wp,Vp,zp,Kp="__$__targetStorageMarker";!function(e){e[e.NONE=0]="NONE",e[e.SHUTDOWN=1]="SHUTDOWN"}(Wp||(Wp={})),function(e){e[e.APPLICATION=-1]="APPLICATION",e[e.PROFILE=0]="PROFILE",e[e.WORKSPACE=1]="WORKSPACE"}(Vp||(Vp={})),function(e){e[e.USER=0]="USER",e[e.MACHINE=1]="MACHINE"}(zp||(zp={}));var qp=(W=class e extends Co{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{flushInterval:e.DEFAULT_FLUSH_INTERVAL};super(),this._onDidChangeValue=this._register(new Po),this._onDidChangeTarget=this._register(new Po),this.onDidChangeTarget=this._onDidChangeTarget.event,this._onWillSaveState=this._register(new Ro),this.onWillSaveState=this._onWillSaveState.event,this.runFlushWhenIdle=this._register(new yo),this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0,this.flushWhenIdleScheduler=this._register(new Rl(()=>this.doFlushWhenIdle(),t.flushInterval))}onDidChangeValue(e,t,i){return _o.filter(this._onDidChangeValue.event,i=>i.scope===e&&(void 0===t||i.key===t),i)}doFlushWhenIdle(){this.runFlushWhenIdle.value=Tl(()=>{this.shouldFlushWhenIdle()&&this.flush(),this.flushWhenIdleScheduler.schedule()})}shouldFlushWhenIdle(){return!0}stopFlushWhenIdle(){po([this.runFlushWhenIdle,this.flushWhenIdleScheduler])}initialize(){return this.initializationPromise||(this.initializationPromise=(async()=>{ig("code/willInitStorage");try{await this.doInitialize()}finally{ig("code/didInitStorage")}this.flushWhenIdleScheduler.schedule()})()),this.initializationPromise}emitDidChangeValue(e,t){let{key:i,external:n}=t;if("__$__targetStorageMarker"===i){switch(e){case Vp.APPLICATION:this._applicationKeyTargets=void 0;break;case Vp.PROFILE:this._profileKeyTargets=void 0;break;case Vp.WORKSPACE:this._workspaceKeyTargets=void 0}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:i,target:this.getKeyTargets(e)[i],external:n})}emitWillSaveState(e){this._onWillSaveState.fire({reason:e})}get(e,t,i){var n;return null===(n=this.getStorage(t))||void 0===n?void 0:n.get(e,i)}getBoolean(e,t,i){var n;return null===(n=this.getStorage(t))||void 0===n?void 0:n.getBoolean(e,i)}getNumber(e,t,i){var n;return null===(n=this.getStorage(t))||void 0===n?void 0:n.getNumber(e,i)}getObject(e,t,i){var n;return null===(n=this.getStorage(t))||void 0===n?void 0:n.getObject(e,i)}storeAll(e,t){this.withPausedEmitters(()=>{for(let i of e)this.store(i.key,i.value,i.scope,i.target,t)})}store(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];rn(t)?this.remove(e,i,s):this.withPausedEmitters(()=>{var r;this.updateKeyTarget(e,i,n),null===(r=this.getStorage(i))||void 0===r||r.set(e,t,s)})}remove(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.withPausedEmitters(()=>{var n;this.updateKeyTarget(e,t,void 0),null===(n=this.getStorage(t))||void 0===n||n.delete(e,i)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}keys(e,t){let i=[],n=this.getKeyTargets(e);for(let s of Object.keys(n))n[s]===t&&i.push(s);return i}updateKeyTarget(e,t,i){var n,s;let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.getKeyTargets(t);"number"==typeof i?o[e]!==i&&(o[e]=i,null===(n=this.getStorage(t))||void 0===n||n.set(Kp,JSON.stringify(o),r)):"number"==typeof o[e]&&(delete o[e],null===(s=this.getStorage(t))||void 0===s||s.set(Kp,JSON.stringify(o),r))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(Vp.WORKSPACE)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(Vp.PROFILE)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(Vp.APPLICATION)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case Vp.APPLICATION:return this.applicationKeyTargets;case Vp.PROFILE:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){let t=this.getStorage(e);return t?function(e){let t=e.get(Kp);if(t)try{return JSON.parse(t)}catch(i){}return Object.create(null)}(t):Object.create(null)}isNew(e){return!0===this.getBoolean("__$__isNewStorageMarker",e)}async flush(){var e,t,i,n,s,r;let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wp.NONE;this._onWillSaveState.fire({reason:o});let a=this.getStorage(Vp.APPLICATION),l=this.getStorage(Vp.PROFILE),h=this.getStorage(Vp.WORKSPACE);switch(o){case Wp.NONE:await Hl.settled([null!==(e=null===a||void 0===a?void 0:a.whenFlushed())&&void 0!==e?e:Promise.resolve(),null!==(t=null===l||void 0===l?void 0:l.whenFlushed())&&void 0!==t?t:Promise.resolve(),null!==(i=null===h||void 0===h?void 0:h.whenFlushed())&&void 0!==i?i:Promise.resolve()]);break;case Wp.SHUTDOWN:await Hl.settled([null!==(n=null===a||void 0===a?void 0:a.flush(0))&&void 0!==n?n:Promise.resolve(),null!==(s=null===l||void 0===l?void 0:l.flush(0))&&void 0!==s?s:Promise.resolve(),null!==(r=null===h||void 0===h?void 0:h.flush(0))&&void 0!==r?r:Promise.resolve()])}}async log(){var e,t,i,n,s,r,o,a,l;return async function(e,t,i,n,s,r){let o=e=>{try{return JSON.parse(e)}catch(t){return e}},a=new Map,l=new Map;e.forEach((e,t)=>{a.set(t,e),l.set(t,o(e))});let h=new Map,d=new Map;t.forEach((e,t)=>{h.set(t,e),d.set(t,o(e))});let c=new Map,u=new Map;i.forEach((e,t)=>{c.set(t,e),u.set(t,o(e))}),n===s?console.group("Storage: Application & Profile (path: ".concat(n,", default profile)")):console.group("Storage: Application (path: ".concat(n,")"));let g=[];if(a.forEach((e,t)=>{g.push({key:t,value:e})}),console.table(g),console.groupEnd(),console.log(l),n!==s){console.group("Storage: Profile (path: ".concat(s,", profile specific)"));let e=[];h.forEach((t,i)=>{e.push({key:i,value:t})}),console.table(e),console.groupEnd(),console.log(d)}console.group("Storage: Workspace (path: ".concat(r,")"));let p=[];c.forEach((e,t)=>{p.push({key:t,value:e})}),console.table(p),console.groupEnd(),console.log(u)}(null!==(e=null===(t=this.getStorage(Vp.APPLICATION))||void 0===t?void 0:t.items)&&void 0!==e?e:new Map,null!==(i=null===(n=this.getStorage(Vp.PROFILE))||void 0===n?void 0:n.items)&&void 0!==i?i:new Map,null!==(s=null===(r=this.getStorage(Vp.WORKSPACE))||void 0===r?void 0:r.items)&&void 0!==s?s:new Map,null!==(o=this.getLogDetails(Vp.APPLICATION))&&void 0!==o?o:"",null!==(a=this.getLogDetails(Vp.PROFILE))&&void 0!==a?a:"",null!==(l=this.getLogDetails(Vp.WORKSPACE))&&void 0!==l?l:"")}async optimize(e){var t;return await this.flush(),null===(t=this.getStorage(e))||void 0===t?void 0:t.optimize()}async switch(e,t){return this.emitWillSaveState(Wp.NONE),function(e){let t=e;return!!(t&&"object"==typeof t&&"string"==typeof t.id&&"boolean"==typeof t.isDefault&&"string"==typeof t.name&&Gs.isUri(t.location)&&Gs.isUri(t.globalStorageHome)&&Gs.isUri(t.settingsResource)&&Gs.isUri(t.keybindingsResource)&&Gs.isUri(t.tasksResource)&&Gs.isUri(t.snippetsHome)&&Gs.isUri(t.promptsHome)&&Gs.isUri(t.extensionsResource)&&Gs.isUri(t.mcpResource))}(e)?this.switchToProfile(e,t):this.switchToWorkspace(e,t)}canSwitchProfile(e,t){return!(e.id===t.id||Gp(t)&&Gp(e))}switchData(e,t,i){this.withPausedEmitters(()=>{let n=new Set;for(let[s,r]of e)n.add(s),t.get(s)!==r&&this.emitDidChangeValue(i,{key:s,external:!0});for(let[e]of t.items)n.has(e)||this.emitDidChangeValue(i,{key:e,external:!0})})}},{_:W.DEFAULT_FLUSH_INTERVAL=6e4},W);function Gp(e){var t;return e.isDefault||!(null===(t=e.useDefaultFlags)||void 0===t||!t.globalState)}var jp,Yp,Qp,$p,Xp;!function(e){e[e.Null=0]="Null",e[e.PlainText=1]="PlainText"}(jp||(jp={})),function(e){e[e.NotSet=-1]="NotSet",e[e.None=0]="None",e[e.Italic=1]="Italic",e[e.Bold=2]="Bold",e[e.Underline=4]="Underline",e[e.Strikethrough=8]="Strikethrough"}(Yp||(Yp={})),function(e){e[e.None=0]="None",e[e.DefaultForeground=1]="DefaultForeground",e[e.DefaultBackground=2]="DefaultBackground"}(Qp||(Qp={})),function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"}($p||($p={})),function(e){e[e.LANGUAGEID_MASK=255]="LANGUAGEID_MASK",e[e.TOKEN_TYPE_MASK=768]="TOKEN_TYPE_MASK",e[e.BALANCED_BRACKETS_MASK=1024]="BALANCED_BRACKETS_MASK",e[e.FONT_STYLE_MASK=30720]="FONT_STYLE_MASK",e[e.FOREGROUND_MASK=16744448]="FOREGROUND_MASK",e[e.BACKGROUND_MASK=4278190080]="BACKGROUND_MASK",e[e.ITALIC_MASK=2048]="ITALIC_MASK",e[e.BOLD_MASK=4096]="BOLD_MASK",e[e.UNDERLINE_MASK=8192]="UNDERLINE_MASK",e[e.STRIKETHROUGH_MASK=16384]="STRIKETHROUGH_MASK",e[e.SEMANTIC_USE_ITALIC=1]="SEMANTIC_USE_ITALIC",e[e.SEMANTIC_USE_BOLD=2]="SEMANTIC_USE_BOLD",e[e.SEMANTIC_USE_UNDERLINE=4]="SEMANTIC_USE_UNDERLINE",e[e.SEMANTIC_USE_STRIKETHROUGH=8]="SEMANTIC_USE_STRIKETHROUGH",e[e.SEMANTIC_USE_FOREGROUND=16]="SEMANTIC_USE_FOREGROUND",e[e.SEMANTIC_USE_BACKGROUND=32]="SEMANTIC_USE_BACKGROUND",e[e.LANGUAGEID_OFFSET=0]="LANGUAGEID_OFFSET",e[e.TOKEN_TYPE_OFFSET=8]="TOKEN_TYPE_OFFSET",e[e.BALANCED_BRACKETS_OFFSET=10]="BALANCED_BRACKETS_OFFSET",e[e.FONT_STYLE_OFFSET=11]="FONT_STYLE_OFFSET",e[e.FOREGROUND_OFFSET=15]="FOREGROUND_OFFSET",e[e.BACKGROUND_OFFSET=24]="BACKGROUND_OFFSET"}(Xp||(Xp={}));var Zp=class{static getLanguageId(e){return(e&Xp.LANGUAGEID_MASK)>>>Xp.LANGUAGEID_OFFSET}static getTokenType(e){return(e&Xp.TOKEN_TYPE_MASK)>>>Xp.TOKEN_TYPE_OFFSET}static containsBalancedBrackets(e){return 0!==(e&Xp.BALANCED_BRACKETS_MASK)}static getFontStyle(e){return(e&Xp.FONT_STYLE_MASK)>>>Xp.FONT_STYLE_OFFSET}static getForeground(e){return(e&Xp.FOREGROUND_MASK)>>>Xp.FOREGROUND_OFFSET}static getBackground(e){return(e&Xp.BACKGROUND_MASK)>>>Xp.BACKGROUND_OFFSET}static getClassNameFromMetadata(e){let t="mtk"+this.getForeground(e),i=this.getFontStyle(e);return i&Yp.Italic&&(t+=" mtki"),i&Yp.Bold&&(t+=" mtkb"),i&Yp.Underline&&(t+=" mtku"),i&Yp.Strikethrough&&(t+=" mtks"),t}static getInlineStyleFromMetadata(e,t){let i=this.getForeground(e),n=this.getFontStyle(e),s="color: ".concat(t[i],";");n&Yp.Italic&&(s+="font-style: italic;"),n&Yp.Bold&&(s+="font-weight: bold;");let r="";return n&Yp.Underline&&(r+=" underline"),n&Yp.Strikethrough&&(r+=" line-through"),r&&(s+="text-decoration:".concat(r,";")),s}static getPresentationFromMetadata(e){let t=this.getForeground(e),i=this.getFontStyle(e);return{foreground:t,italic:!!(i&Yp.Italic),bold:!!(i&Yp.Bold),underline:!!(i&Yp.Underline),strikethrough:!!(i&Yp.Strikethrough)}}},Jp=class{constructor(e,t,i,n,s){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=i,this.foreground=n,this.background=s}};var ef=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/,tf=class{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(null===e)return 0;let t=e.match(ef);if(!t)throw Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let i=this._color2id.get(e);return i||(i=++this._lastColorId,this._color2id.set(e,i),this._id2color[i]=Ir.fromHex("#"+e),i)}getColorMap(){return this._id2color.slice(0)}},nf=class{static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(function(e){if(!e||!Array.isArray(e))return[];let t=[],i=0;for(let n=0,s=e.length;n<s;n++){let s=e[n],r=Yp.NotSet;if("string"==typeof s.fontStyle){r=Yp.None;let e=s.fontStyle.split(" ");for(let t=0,i=e.length;t<i;t++)switch(e[t]){case"italic":r|=Yp.Italic;break;case"bold":r|=Yp.Bold;break;case"underline":r|=Yp.Underline;break;case"strikethrough":r|=Yp.Strikethrough}}let o=null;"string"==typeof s.foreground&&(o=s.foreground);let a=null;"string"==typeof s.background&&(a=s.background),t[i++]=new Jp(s.token||"",n,r,o,a)}return t}(e),t)}static createFromParsedTokenTheme(e,t){return function(e,t){e.sort((e,t)=>{let i=function(e,t){return e<t?-1:e>t?1:0}(e.token,t.token);return 0===i?e.index-t.index:i});let i=Yp.None,n="000000",s="ffffff";for(;e.length>=1&&""===e[0].token;){let t=e.shift();t.fontStyle!==Yp.NotSet&&(i=t.fontStyle),null!==t.foreground&&(n=t.foreground),null!==t.background&&(s=t.background)}let r=new tf;for(let h of t)r.getId(h);let o=r.getId(n),a=r.getId(s),l=new af(new rf(i,o,a));for(let h=0,d=e.length;h<d;h++){let t=e[h];l.insert(t.token,t.fontStyle,r.getId(t.foreground),r.getId(t.background))}return new nf(r,l)}(e,t)}constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}getColorMap(){return this._colorMap.getColorMap()}getThemeTrieElement(){return this._root.toExternalThemeTrieElement()}_match(e){return this._root.match(e)}match(e,t){let i=this._cache.get(t);if(void 0===i){let e=this._match(t),n=function(e){let t=e.match(sf);if(!t)return $p.Other;switch(t[1]){case"comment":return $p.Comment;case"string":return $p.String;case"regex":case"regexp":return $p.RegEx}throw Error("Unexpected match for standard token type!")}(t);i=(e.metadata|n<<Xp.TOKEN_TYPE_OFFSET)>>>0,this._cache.set(t,i)}return(i|e<<Xp.LANGUAGEID_OFFSET)>>>0}},sf=/\b(comment|string|regex|regexp)\b/;var rf=class e{constructor(e,t,i){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=i,this.metadata=(this._fontStyle<<Xp.FONT_STYLE_OFFSET|this._foreground<<Xp.FOREGROUND_OFFSET|this._background<<Xp.BACKGROUND_OFFSET)>>>0}clone(){return new e(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,i){e!==Yp.NotSet&&(this._fontStyle=e),t!==Qp.None&&(this._foreground=t),i!==Qp.None&&(this._background=i),this.metadata=(this._fontStyle<<Xp.FONT_STYLE_OFFSET|this._foreground<<Xp.FOREGROUND_OFFSET|this._background<<Xp.BACKGROUND_OFFSET)>>>0}},of=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;if(this.mainRule=e,t instanceof Map)this.children=t;else for(let i in this.children=new Map,t)this.children.set(i,t[i])}},af=class e{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}toExternalThemeTrieElement(){let e=new Map;return this._children.forEach((t,i)=>{e.set(i,t.toExternalThemeTrieElement())}),new of(this._mainRule,e)}match(e){if(""===e)return this._mainRule;let t,i,n=e.indexOf(".");-1===n?(t=e,i=""):(t=e.substring(0,n),i=e.substring(n+1));let s=this._children.get(t);return void 0===s?this._mainRule:s.match(i)}insert(t,i,n,s){if(""===t)return void this._mainRule.acceptOverwrite(i,n,s);let r,o,a=t.indexOf(".");-1===a?(r=t,o=""):(r=t.substring(0,a),o=t.substring(a+1));let l=this._children.get(r);void 0===l&&(l=new e(this._mainRule.clone()),this._children.set(r,l)),l.insert(o,i,n,s)}};var lf=Tn.as(Zl),hf=ju,df={comments:["comment","punctuation.definition.comment"],strings:["string","meta.embedded.assembly"],keywords:["keyword - keyword.operator","keyword.control","storage","storage.type"],numbers:["constant.numeric"],types:["entity.name.type","entity.name.class","support.type","support.class"],functions:["entity.name.function","support.function"],variables:["variable","entity.name.variable"]},cf=(V=class e{constructor(e,t,i){this.themeTokenColors=[],this.customTokenColors=[],this.colorMap={},this.customColorMap={},this.semanticTokenRules=[],this.customSemanticTokenRules=[],this.textMateThemingRules=void 0,this.tokenColorIndex=void 0,this.id=e,this.label=t,this.settingsId=i,this.isLoaded=!1}get semanticHighlighting(){return void 0===this.customSemanticHighlighting?void 0===this.customSemanticHighlightingDeprecated?!!this.themeSemanticHighlighting:this.customSemanticHighlightingDeprecated:this.customSemanticHighlighting}get tokenColors(){if(!this.textMateThemingRules){let e=[],t=this.getColor(Th)||this.getDefault(Th),i=this.getColor(Dh)||this.getDefault(Dh);e.push({settings:{foreground:Sf(t),background:Sf(i)}});let n=!1;function s(t){t.scope&&t.settings&&("token.info-token"===t.scope&&(n=!0),e.push({scope:t.scope,settings:{foreground:Sf(t.settings.foreground),background:Sf(t.settings.background),fontStyle:t.settings.fontStyle}}))}this.themeTokenColors.forEach(s),this.customTokenColors.forEach(s),n||pf[this.type].forEach(s),this.textMateThemingRules=e}return this.textMateThemingRules}getColor(e,t){let i=this.customColorMap[e];if(i instanceof Ir)return i;if(void 0===i){let t=this.colorMap[e];if(void 0!==t)return t}return!1!==t?this.getDefault(e):void 0}getTokenStyle(e,t,i){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r={foreground:void 0,bold:void 0,underline:void 0,strikethrough:void 0,italic:void 0},o={foreground:-1,bold:-1,underline:-1,strikethrough:-1,italic:-1};function a(e,t,i){t.foreground&&o.foreground<=e&&(o.foreground=e,r.foreground=t.foreground,s.foreground=i);for(let n of["bold","underline","strikethrough","italic"]){let a=n,l=t[a];void 0!==l&&o[a]<=e&&(o[a]=e,r[a]=l,s[a]=i)}}function l(n){let s=n.selector.match(e,t,i);s>=0&&a(s,n.style,n)}this.semanticTokenRules.forEach(l),this.customSemanticTokenRules.forEach(l);let h=!1;for(let d in o){let e=d;-1===o[e]?h=!0:o[e]=Number.MAX_VALUE}if(h)for(let d of hf.getTokenStylingDefaultRules()){let s=d.selector.match(e,t,i);if(s>=0){let e;if(d.defaults.scopesToProbe&&(e=this.resolveScopes(d.defaults.scopesToProbe),e&&a(s,e,d.defaults.scopesToProbe)),!e&&!1!==n){let t=d.defaults[this.type];e=this.resolveTokenStyleValue(t),e&&a(s,e,t)}}}return Vu.fromData(r)}resolveTokenStyleValue(e){if(void 0!==e){if("string"==typeof e){let{type:t,modifiers:i,language:n}=Gu(e,"");return this.getTokenStyle(t,i,n)}if("object"==typeof e)return e}}getTokenColorIndex(){if(!this.tokenColorIndex){let e=new wf;this.tokenColors.forEach(t=>{e.add(t.settings.foreground),e.add(t.settings.background)}),this.semanticTokenRules.forEach(t=>e.add(t.style.foreground)),hf.getTokenStylingDefaultRules().forEach(t=>{let i=t.defaults[this.type];i&&"object"==typeof i&&e.add(i.foreground)}),this.customSemanticTokenRules.forEach(t=>e.add(t.style.foreground)),this.tokenColorIndex=e}return this.tokenColorIndex}get tokenColorMap(){return this.getTokenColorIndex().asArray()}getTokenStyleMetadata(e,t,i){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},{type:r,language:o}=Gu(e,i),a=this.getTokenStyle(r,t,o,n,s);if(a)return{foreground:this.getTokenColorIndex().get(a.foreground),bold:a.bold,underline:a.underline,strikethrough:a.strikethrough,italic:a.italic}}getTokenStylingRuleScope(e){return-1!==this.customSemanticTokenRules.indexOf(e)?"setting":-1!==this.semanticTokenRules.indexOf(e)?"theme":void 0}getDefault(e){return lf.resolveDefaultColor(e,this)}resolveScopes(e,t){this.themeTokenScopeMatchers||(this.themeTokenScopeMatchers=this.themeTokenColors.map(_f)),this.customTokenScopeMatchers||(this.customTokenScopeMatchers=this.customTokenColors.map(_f));for(let i of e){let n,s,r,o,a=-1,l=-1;function h(e,t){for(let h=0;h<e.length;h++){let d=e[h](i);if(d>=0){let e=t[h],i=t[h].settings;d>=a&&i.foreground&&(n=i.foreground,a=d,o=e),d>=l&&$i(i.fontStyle)&&(s=i.fontStyle,l=d,r=e)}}}if(h(this.themeTokenScopeMatchers,this.themeTokenColors),h(this.customTokenScopeMatchers,this.customTokenColors),void 0!==n||void 0!==s)return t&&(t.foreground=o,t.bold=t.italic=t.underline=t.strikethrough=r,t.scope=i),Vu.fromSettings(n,s)}}defines(e){let t=this.customColorMap[e];return t instanceof Ir||void 0===t&&this.colorMap.hasOwnProperty(e)}setCustomizations(e){this.setCustomColors(e.colorCustomizations),this.setCustomTokenColors(e.tokenColorCustomizations),this.setCustomSemanticTokenColors(e.semanticTokenColorCustomizations)}setCustomColors(e){this.customColorMap={},this.overwriteCustomColors(e);let t=this.getThemeSpecificColors(e);Xi(t)&&this.overwriteCustomColors(t),this.tokenColorIndex=void 0,this.textMateThemingRules=void 0,this.customTokenScopeMatchers=void 0}overwriteCustomColors(e){for(let t in e){let i=e[t];"default"===i?this.customColorMap[t]=Jl:"string"==typeof i&&(this.customColorMap[t]=Ir.fromHex(i))}}setCustomTokenColors(e){this.customTokenColors=[],this.customSemanticHighlightingDeprecated=void 0,this.addCustomTokenColors(e);let t=this.getThemeSpecificColors(e);Xi(t)&&this.addCustomTokenColors(t),this.tokenColorIndex=void 0,this.textMateThemingRules=void 0,this.customTokenScopeMatchers=void 0}setCustomSemanticTokenColors(e){if(this.customSemanticTokenRules=[],this.customSemanticHighlighting=void 0,e){this.customSemanticHighlighting=e.enabled,e.rules&&this.readSemanticTokenRules(e.rules);let t=this.getThemeSpecificColors(e);Xi(t)&&(void 0!==t.enabled&&(this.customSemanticHighlighting=t.enabled),t.rules&&this.readSemanticTokenRules(t.rules))}this.tokenColorIndex=void 0,this.textMateThemingRules=void 0}isThemeScope(e){return"["===e.charAt(0)&&"]"===e.charAt(e.length-1)}isThemeScopeMatch(e){let t=e.charAt(0),i=e.charAt(e.length-1),n=e.slice(0,-1),s=e.slice(1,-1),r=e.slice(1);return e===this.settingsId||this.settingsId.includes(s)&&"*"===t&&"*"===i||this.settingsId.startsWith(n)&&"*"===i||this.settingsId.endsWith(r)&&"*"===t}getThemeSpecificColors(e){let t;for(let i in e){let n=e[i];if(this.isThemeScope(i)&&n instanceof Object&&!Array.isArray(n)){let e=i.match(bn)||[];for(let i of e){let e=i.substring(1,i.length-1);if(this.isThemeScopeMatch(e)){t||(t={});let e=n;for(let i in e){let n=t[i],s=e[i];Array.isArray(n)&&Array.isArray(s)?t[i]=n.concat(s):s&&(t[i]=s)}}}}}return t}readSemanticTokenRules(e){for(let i in e)if(!this.isThemeScope(i))try{let t=bf(i,e[i]);t&&this.customSemanticTokenRules.push(t)}catch(t){}}addCustomTokenColors(e){for(let t in df){let i=t,n=e[i];if(n){let e="string"==typeof n?{foreground:n}:n,t=df[i];for(let i of t)this.customTokenColors.push({scope:i,settings:e})}}if(Array.isArray(e.textMateRules))for(let t of e.textMateRules)t.scope&&t.settings&&this.customTokenColors.push(t);void 0!==e.semanticHighlighting&&(this.customSemanticHighlightingDeprecated=e.semanticHighlighting)}ensureLoaded(e){return this.isLoaded?Promise.resolve(void 0):this.load(e)}reload(e){return this.load(e)}load(e){if(!this.location)return Promise.resolve(void 0);this.themeTokenColors=[],this.clearCaches();let t={colors:{},textMateRules:[],semanticTokenRules:[],semanticHighlighting:!1};return uf(e,this.location,t).then(e=>{this.isLoaded=!0,this.semanticTokenRules=t.semanticTokenRules,this.colorMap=t.colors,this.themeTokenColors=t.textMateRules,this.themeSemanticHighlighting=t.semanticHighlighting})}clearCaches(){this.tokenColorIndex=void 0,this.textMateThemingRules=void 0,this.themeTokenScopeMatchers=void 0,this.customTokenScopeMatchers=void 0}toStorage(t){let i={};for(let e in this.colorMap)i[e]=Ir.Format.CSS.formatHexA(this.colorMap[e],!0);let n=JSON.stringify({id:this.id,label:this.label,settingsId:this.settingsId,themeTokenColors:this.themeTokenColors.map(e=>({settings:e.settings,scope:e.scope})),semanticTokenRules:this.semanticTokenRules.map(Bu.toJSONObject),extensionData:Cn.toJSONObject(this.extensionData),themeSemanticHighlighting:this.themeSemanticHighlighting,colorMap:i,watch:this.watch});t.store(e.STORAGE_KEY,n,Vp.PROFILE,zp.USER)}get themeTypeSelector(){return this.classNames[0]}get classNames(){return this.id.split(" ")}get type(){switch(this.themeTypeSelector){case tu.VS:return eu.LIGHT;case tu.HC_BLACK:return eu.HIGH_CONTRAST_DARK;case tu.HC_LIGHT:return eu.HIGH_CONTRAST_LIGHT;default:return eu.DARK}}static createUnloadedThemeForThemeType(t,i){return e.createUnloadedTheme(function(e){switch(e){case eu.DARK:return tu.VS_DARK;case eu.HIGH_CONTRAST_DARK:return tu.HC_BLACK;case eu.HIGH_CONTRAST_LIGHT:return tu.HC_LIGHT;default:return tu.VS}}(t),i)}static createUnloadedTheme(t,i){let n=new e(t,"","__"+t);if(n.isLoaded=!1,n.themeTokenColors=[],n.watch=!1,i)for(let e in i)n.colorMap[e]=Ir.fromHex(i[e]);return n}static createLoadedEmptyTheme(t,i){let n=new e(t,"",i);return n.isLoaded=!0,n.themeTokenColors=[],n.watch=!1,n}static fromStorageData(t){let i=t.get(e.STORAGE_KEY,Vp.PROFILE);if(i)try{let t=JSON.parse(i),n=new e("","","");for(let e in t)switch(e){case"colorMap":{let i=t[e];for(let e in i)n.colorMap[e]=Ir.fromHex(i[e]);break}case"themeTokenColors":case"id":case"label":case"settingsId":case"watch":case"themeSemanticHighlighting":n[e]=t[e];break;case"semanticTokenRules":{let i=t[e];if(Array.isArray(i))for(let e of i){let t=Bu.fromJSONObject(hf,e);t&&n.semanticTokenRules.push(t)}break}case"location":break;case"extensionData":n.extensionData=Cn.fromJSONObject(t.extensionData)}return n.id&&n.settingsId?n:void 0}catch(n){return}}static fromExtensionTheme(t,i,n){let s="".concat(t.uiTheme||"vs-dark"," ").concat(function(e,t){t.startsWith("./")&&(t=t.substr(2));let i="".concat(e,"-").concat(t);return i=i.replace(/[^_a-zA-Z0-9-]/g,"-"),i.charAt(0).match(/[0-9-]/)&&(i="_"+i),i}(n.extensionId,t.path)),r=t.label||Ps(t.path),o=new e(s,r,t.id||r);return o.description=t.description,o.watch=!0===t._watch,o.location=i,o.extensionData=n,o.isLoaded=!1,o}},{_:V.STORAGE_KEY="colorThemeData"},V);async function uf(e,t,i){if(".json"!==al(t))return gf(e,t,i);{let s=[],r=Cr(await e.readExtensionResource(t),s);if(s.length>0)return Promise.reject(Error(Li(14297,"Problems parsing JSON theme file: {0}",s.map(e=>Mu(e.error)).join(", "))));if("object"!==wr(r))return Promise.reject(Error(Li(14298,"Invalid format for JSON theme file: Object expected.")));if(r.include&&await uf(e,hl(ll(t),r.include),i),Array.isArray(r.settings))return Ru(r.settings,i),null;i.semanticHighlighting=i.semanticHighlighting||r.semanticHighlighting;let o=r.colors;if(o){if("object"!=typeof o)return Promise.reject(Error(Li(14299,"Problem parsing color theme file: {0}. Property 'colors' is not of type 'object'.",t.toString())));for(let e in o){let t=o[e];"default"===t?delete i.colors[e]:"string"==typeof t&&(i.colors[e]=Ir.fromHex(o[e]))}}let a=r.tokenColors;if(a)if(Array.isArray(a))i.textMateRules.push(...a);else{if("string"!=typeof a)return Promise.reject(Error(Li(14300,"Problem parsing color theme file: {0}. Property 'tokenColors' should be either an array specifying colors or a path to a TextMate theme file",t.toString())));await gf(e,hl(ll(t),a),i)}let l=r.semanticTokenColors;if(l&&"object"==typeof l)for(let e in l)try{let t=bf(e,l[e]);t&&i.semanticTokenRules.push(t)}catch(n){return Promise.reject(Error(Li(14301,"Problem parsing color theme file: {0}. Property 'semanticTokenColors' contains a invalid selector",t.toString())))}}}function gf(e,t,i){return e.readExtensionResource(t).then(e=>{try{let t=Pu(e).settings;return Array.isArray(t)?(Ru(t,i),Promise.resolve(null)):Promise.reject(Error(Li(14302,"Problem parsing tmTheme file: {0}. 'settings' is not array.")))}catch(e){return Promise.reject(Error(Li(14303,"Problems parsing tmTheme file: {0}",e.message)))}},e=>Promise.reject(Error(Li(14304,"Problems loading tmTheme file {0}: {1}",t.toString(),e.message))))}var pf={light:[{scope:"token.info-token",settings:{foreground:"#316bcd"}},{scope:"token.warn-token",settings:{foreground:"#cd9731"}},{scope:"token.error-token",settings:{foreground:"#cd3131"}},{scope:"token.debug-token",settings:{foreground:"#800080"}}],dark:[{scope:"token.info-token",settings:{foreground:"#6796e6"}},{scope:"token.warn-token",settings:{foreground:"#cd9731"}},{scope:"token.error-token",settings:{foreground:"#f44747"}},{scope:"token.debug-token",settings:{foreground:"#b267e6"}}],hcLight:[{scope:"token.info-token",settings:{foreground:"#316bcd"}},{scope:"token.warn-token",settings:{foreground:"#cd9731"}},{scope:"token.error-token",settings:{foreground:"#cd3131"}},{scope:"token.debug-token",settings:{foreground:"#800080"}}],hcDark:[{scope:"token.info-token",settings:{foreground:"#6796e6"}},{scope:"token.warn-token",settings:{foreground:"#008000"}},{scope:"token.error-token",settings:{foreground:"#FF0000"}},{scope:"token.debug-token",settings:{foreground:"#b267e6"}}]},ff=e=>-1;function mf(e,t){if(t.length<e.length)return-1;let i;return e.every(e=>{for(let n=t.length-1;n>=0;n--)if(vf(t[n],e))return i=65536*(n+1)+e.length,!0;return!1})&&void 0!==i?i:-1}function vf(e,t){if(!e)return!1;if(e===t)return!0;let i=t.length;return e.length>i&&e.substr(0,i)===t&&"."===e[i]}function _f(e){let t=e.scope;if(!t||!e.settings)return ff;let i=[];if(Array.isArray(t))for(let n of t)Zu(n,mf,i);else Zu(t,mf,i);return 0===i.length?ff:e=>{let t=i[0].matcher(e);for(let n=1;n<i.length;n++)t=Math.max(t,i[n].matcher(e));return t}}function bf(e,t){let i,n=hf.parseTokenSelector(e);if("string"==typeof t?i=Vu.fromSettings(t,void 0):function(e){return e&&($i(e.foreground)||$i(e.fontStyle)||tn(e.italic)||tn(e.underline)||tn(e.strikethrough)||tn(e.bold))}(t)&&(i=Vu.fromSettings(t.foreground,t.fontStyle,t.bold,t.underline,t.strikethrough,t.italic)),i)return{selector:n,style:i}}var Cf,yf,wf=class{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null)}add(e){if(void 0===(e=Sf(e)))return 0;let t=this._color2id[e];return t||(t=++this._lastColorId,this._color2id[e]=t,this._id2color[t]=e,t)}get(e){return void 0===(e=Sf(e))?0:this._color2id[e]||(console.log("Color ".concat(e," not in index.")),0)}asArray(){return this._id2color.slice(0)}};function Sf(e){if(!e)return;"string"!=typeof e&&(e=Ir.Format.CSS.formatHexA(e,!0));let t=e.length;if(e.charCodeAt(0)!==En.Hash||4!==t&&5!==t&&7!==t&&9!==t)return;let i=[En.Hash];for(let n=1;n<t;n++){let s=kf(e.charCodeAt(n));if(!s)return;i.push(s),(4===t||5===t)&&i.push(s)}return 9===i.length&&i[7]===En.F&&i[8]===En.F&&(i.length=7),String.fromCharCode(...i)}function kf(e){return e>=En.Digit0&&e<=En.Digit9||e>=En.A&&e<=En.F?e:e>=En.a&&e<=En.f?e-En.a+En.A:0}!function(e){e.isThemeColor=function(e){return!!e&&"object"==typeof e&&"string"==typeof e.id}}(Cf||(Cf={})),function(e){e.iconNameSegment="[A-Za-z0-9]+",e.iconNameExpression="[A-Za-z0-9-]+",e.iconModifierExpression="~[A-Za-z]+",e.iconNameCharacter="[A-Za-z0-9~-]";let t=RegExp("^(".concat(e.iconNameExpression,")(").concat(e.iconModifierExpression,")?$"));function i(e){let n=t.exec(e.id);if(!n)return i(su.error);let[,s,r]=n,o=["codicon","codicon-"+s];return r&&o.push("codicon-modifier-"+r.substring(1)),o}e.asClassNameArray=i,e.asClassName=function(e){return i(e).join(" ")},e.asCSSSelector=function(e){return"."+i(e).join(".")},e.isThemeIcon=function(e){return!!e&&"object"==typeof e&&"string"==typeof e.id&&(void 0===e.color||Cf.isThemeColor(e.color))};let n=RegExp("^\\$\\((".concat(e.iconNameExpression,"(?:").concat(e.iconModifierExpression,")?)\\)$"));e.fromString=function(e){let t=n.exec(e);if(!t)return;let[,i]=t;return{id:i}},e.fromId=function(e){return{id:e}},e.modify=function(e,t){let i=e.id,n=i.lastIndexOf("~");return-1!==n&&(i=i.substring(0,n)),t&&(i="".concat(i,"~").concat(t)),{id:i}},e.getModifier=function(e){let t=e.id.lastIndexOf("~");if(-1!==t)return e.id.substring(t+1)},e.isEqual=function(e,t){var i,n;return e.id===t.id&&(null===(i=e.color)||void 0===i?void 0:i.id)===(null===(n=t.color)||void 0===n?void 0:n.id)},e.isFile=function(e){return(null===e||void 0===e?void 0:e.id)===su.file.id},e.isFolder=function(e){return(null===e||void 0===e?void 0:e.id)===su.folder.id}}(yf||(yf={}));var Ef,Df;!function(e){e.getDefinition=function(e,t){let i=e.defaults;for(;yf.isThemeIcon(i);){let e=Of.getIcon(i.id);if(!e)return;i=e.defaults}return i}}(Ef||(Ef={})),function(e){e.toJSONObject=function(e){return{weight:e.weight,style:e.style,src:e.src.map(e=>({format:e.format,location:e.location.toString()}))}},e.fromJSONObject=function(e){let t=e=>$i(e)?e:void 0;if(e&&Array.isArray(e.src)&&e.src.every(e=>$i(e.format)&&$i(e.location)))return{weight:t(e.weight),style:t(e.style),src:e.src.map(e=>({format:e.format,location:Gs.parse(e.location)}))}}}(Df||(Df={}));var Tf=/^([\w_-]+)$/,If=/^(normal|italic|(oblique[ \w\s-]+))$/,xf=/^(normal|bold|lighter|bolder|(\d{0-1000}))$/,Lf=/^([\w_.%+-]+)$/,Af=/^woff|woff2|truetype|opentype|embedded-opentype|svg$/,Nf=/^#[0-9a-fA-F]{0,6}$/,Ff=Li(2358,"The font ID must only contain letters, numbers, underscores and dashes."),Of=new class extends Co{constructor(){super(),this._onDidChange=this._register(new Ro),this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:Li(2359,"The id of the font to use. If not set, the font that is defined first is used."),pattern:Tf.source,patternErrorMessage:Ff},fontCharacter:{type:"string",description:Li(2360,"The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:"^".concat(yf.iconNameExpression,"$"),enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,i,n){let s=this.iconsById[e];if(s){if(i&&!s.description){s.description=i,this.iconSchema.properties[e].markdownDescription="".concat(i," $(").concat(e,")");let t=this.iconReferenceSchema.enum.indexOf(e);-1!==t&&(this.iconReferenceSchema.enumDescriptions[t]=i),this._onDidChange.fire()}return s}let r={id:e,description:i,defaults:t,deprecationMessage:n};this.iconsById[e]=r;let o={$ref:"#/definitions/icons"};return n&&(o.deprecationMessage=n),i&&(o.markdownDescription="".concat(i,": $(").concat(e,")")),this.iconSchema.properties[e]=o,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(i||""),this._onDidChange.fire(),{id:e}}deregisterIcon(e){delete this.iconsById[e],delete this.iconSchema.properties[e];let t=this.iconReferenceSchema.enum.indexOf(e);-1!==t&&(this.iconReferenceSchema.enum.splice(t,1),this.iconReferenceSchema.enumDescriptions.splice(t,1)),this._onDidChange.fire()}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}getIconReferenceSchema(){return this.iconReferenceSchema}registerIconFont(e,t){return this.iconFontsById[e]||(this.iconFontsById[e]=t,this._onDidChange.fire(),t)}deregisterIconFont(e){delete this.iconFontsById[e]}getIconFont(e){return this.iconFontsById[e]}toString(){let e=(e,t)=>e.id.localeCompare(t.id),t=e=>{for(;yf.isThemeIcon(e.defaults);)e=this.iconsById[e.defaults.id];return"codicon codicon-".concat(e?e.id:"")},i=[];i.push("| preview     | identifier                        | default codicon ID                | description"),i.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");let n=Object.keys(this.iconsById).map(e=>this.iconsById[e]);for(let s of n.filter(e=>!!e.description).sort(e))i.push('|<i class="'.concat(t(s),'"></i>|').concat(s.id,"|").concat(yf.isThemeIcon(s.defaults)?s.defaults.id:s.id,"|").concat(s.description||"","|"));i.push("| preview     | identifier                        "),i.push("| ----------- | --------------------------------- |");for(let s of n.filter(e=>!yf.isThemeIcon(e.defaults)).sort(e))i.push('|<i class="'.concat(t(s),'"></i>|').concat(s.id,"|"));return i.join("\n")}};function Rf(e,t,i,n){return Of.registerIcon(e,t,i,n)}function Mf(){return Of}Tn.add("base.contributions.icons",Of),function(){let e=Jc();for(let t in e){let i="\\"+e[t].toString(16);Of.registerIcon(t,{fontCharacter:i})}}();var Pf="vscode://schemas/icons",Bf=Tn.as(Gl);Bf.registerSchema(Pf,Of.getIconSchema());var Uf=new Rl(()=>Bf.notifySchemaChanged(Pf),200);Of.onDidChange(()=>{Uf.isScheduled()||Uf.schedule()}),Rf("widget-close",su.close,Li(2361,"Icon for the close action in widgets.")),Rf("goto-previous-location",su.arrowUp,Li(2362,"Icon for goto previous editor location.")),Rf("goto-next-location",su.arrowDown,Li(2363,"Icon for goto next editor location.")),yf.modify(su.sync,"spin"),yf.modify(su.loading,"spin");var Hf={type:"object",allowComments:!0,allowTrailingCommas:!0,definitions:{folderExpanded:{type:"string",description:Li(14318,"The folder icon for expanded folders. The expanded folder icon is optional. If not set, the icon defined for folder will be shown.")},folder:{type:"string",description:Li(14319,"The folder icon for collapsed folders, and if folderExpanded is not set, also for expanded folders.")},file:{type:"string",description:Li(14320,"The default file icon, shown for all files that don't match any extension, filename or language id.")},rootFolder:{type:"string",description:Li(14321,"The folder icon for collapsed root folders, and if rootFolderExpanded is not set, also for expanded root folders.")},rootFolderExpanded:{type:"string",description:Li(14322,"The folder icon for expanded root folders. The expanded root folder icon is optional. If not set, the icon defined for root folder will be shown.")},rootFolderNames:{type:"object",description:Li(14323,"Associates root folder names to icons. The object key is the root folder name. No patterns or wildcards are allowed. Root folder name matching is case insensitive."),additionalProperties:{type:"string",description:Li(14324,"The ID of the icon definition for the association.")}},rootFolderNamesExpanded:{type:"object",description:Li(14325,"Associates root folder names to icons for expanded root folders. The object key is the root folder name. No patterns or wildcards are allowed. Root folder name matching is case insensitive."),additionalProperties:{type:"string",description:Li(14326,"The ID of the icon definition for the association.")}},folderNames:{type:"object",description:Li(14327,"Associates folder names to icons. The object key is the folder name, not including any path segments. No patterns or wildcards are allowed. Folder name matching is case insensitive."),additionalProperties:{type:"string",description:Li(14324,"The ID of the icon definition for the association.")}},folderNamesExpanded:{type:"object",description:Li(14328,"Associates folder names to icons for expanded folders. The object key is the folder name, not including any path segments. No patterns or wildcards are allowed. Folder name matching is case insensitive."),additionalProperties:{type:"string",description:Li(14329,"The ID of the icon definition for the association.")}},fileExtensions:{type:"object",description:Li(14330,"Associates file extensions to icons. The object key is the file extension name. The extension name is the last segment of a file name after the last dot (not including the dot). Extensions are compared case insensitive."),additionalProperties:{type:"string",description:Li(14331,"The ID of the icon definition for the association.")}},fileNames:{type:"object",description:Li(14332,"Associates file names to icons. The object key is the full file name, but not including any path segments. File name can include dots and a possible file extension. No patterns or wildcards are allowed. File name matching is case insensitive."),additionalProperties:{type:"string",description:Li(14333,"The ID of the icon definition for the association.")}},languageIds:{type:"object",description:Li(14334,"Associates languages to icons. The object key is the language id as defined in the language contribution point."),additionalProperties:{type:"string",description:Li(14335,"The ID of the icon definition for the association.")}},associations:{type:"object",properties:{folderExpanded:{$ref:"#/definitions/folderExpanded"},folder:{$ref:"#/definitions/folder"},file:{$ref:"#/definitions/file"},folderNames:{$ref:"#/definitions/folderNames"},folderNamesExpanded:{$ref:"#/definitions/folderNamesExpanded"},rootFolder:{$ref:"#/definitions/rootFolder"},rootFolderExpanded:{$ref:"#/definitions/rootFolderExpanded"},rootFolderNames:{$ref:"#/definitions/rootFolderNames"},rootFolderNamesExpanded:{$ref:"#/definitions/rootFolderNamesExpanded"},fileExtensions:{$ref:"#/definitions/fileExtensions"},fileNames:{$ref:"#/definitions/fileNames"},languageIds:{$ref:"#/definitions/languageIds"}}}},properties:{fonts:{type:"array",description:Li(14336,"Fonts that are used in the icon definitions."),items:{type:"object",properties:{id:{type:"string",description:Li(14337,"The ID of the font."),pattern:Tf.source,patternErrorMessage:Ff},src:{type:"array",description:Li(14338,"The location of the font."),items:{type:"object",properties:{path:{type:"string",description:Li(14339,"The font path, relative to the current file icon theme file.")},format:{type:"string",description:Li(14340,"The format of the font."),enum:["woff","woff2","truetype","opentype","embedded-opentype","svg"]}},required:["path","format"]}},weight:{type:"string",description:Li(14341,"The weight of the font. See https://developer.mozilla.org/en-US/docs/Web/CSS/font-weight for valid values."),pattern:xf.source},style:{type:"string",description:Li(14342,"The style of the font. See https://developer.mozilla.org/en-US/docs/Web/CSS/font-style for valid values."),pattern:If.source},size:{type:"string",description:Li(14343,"The default size of the font. We strongly recommend using a percentage value, for example: 125%."),pattern:Lf.source}},required:["id","src"]}},iconDefinitions:{type:"object",description:Li(14344,"Description of all icons that can be used when associating files to icons."),additionalProperties:{type:"object",description:Li(14345,"An icon definition. The object key is the ID of the definition."),properties:{iconPath:{type:"string",description:Li(14346,"When using a SVG or PNG: The path to the image. The path is relative to the icon set file.")},fontCharacter:{type:"string",description:Li(14347,"When using a glyph font: The character in the font to use.")},fontColor:{type:"string",format:"color-hex",description:Li(14348,"When using a glyph font: The color to use."),pattern:Nf.source},fontSize:{type:"string",description:Li(14349,"When using a font: The font size in percentage to the text font. If not set, defaults to the size in the font definition."),pattern:Lf.source},fontId:{type:"string",description:Li(14350,"When using a font: The id of the font. If not set, defaults to the first font definition."),pattern:Tf.source,patternErrorMessage:Ff}}}},folderExpanded:{$ref:"#/definitions/folderExpanded"},folder:{$ref:"#/definitions/folder"},file:{$ref:"#/definitions/file"},folderNames:{$ref:"#/definitions/folderNames"},folderNamesExpanded:{$ref:"#/definitions/folderNamesExpanded"},rootFolder:{$ref:"#/definitions/rootFolder"},rootFolderExpanded:{$ref:"#/definitions/rootFolderExpanded"},rootFolderNames:{$ref:"#/definitions/rootFolderNames"},rootFolderNamesExpanded:{$ref:"#/definitions/rootFolderNamesExpanded"},fileExtensions:{$ref:"#/definitions/fileExtensions"},fileNames:{$ref:"#/definitions/fileNames"},languageIds:{$ref:"#/definitions/languageIds"},light:{$ref:"#/definitions/associations",description:Li(14351,"Optional associations for file icons in light color themes.")},highContrast:{$ref:"#/definitions/associations",description:Li(14352,"Optional associations for file icons in high contrast color themes.")},hidesExplorerArrows:{type:"boolean",description:Li(14353,"Configures whether the file explorer's arrows should be hidden when this theme is active.")},showLanguageModeIcons:{type:"boolean",description:Li(14354,"Configures whether the default language icons should be used if the theme does not define an icon for a language.")}}};function Wf(e,t){if(void 0!==e){let i=e.match(/^\s*var\((.+)\)$/);if(i){let e=i[1].split(",",2);return 2===e.length&&(t=Wf(e[1].trim(),t)),"var(".concat(e[0],", ").concat(t,")")}return e}return t}function Vf(e){let t=e.replaceAll(/[^\w.%+-]/gi,"");return t!==e&&console.warn("CSS size ".concat(e," modified to ").concat(t," to be safe for CSS")),t}function zf(e){let t=e.replaceAll(/[^[0-9a-fA-F#]]/gi,"");return t!==e&&console.warn("CSS hex color ".concat(e," modified to ").concat(t," to be safe for CSS")),t}function Kf(e){let t=e.replaceAll(/[^_\-a-z0-9]/gi,"");return t!==e&&console.warn("CSS ident value ".concat(e," modified to ").concat(t," to be safe for CSS")),t}function qf(e){return"'".concat(e.replaceAll(/'/g,"\\000027"),"'")}function Gf(e){return e?Yf(z||(z=(0,s.A)(["url('","')"])),CSS.escape(Za.uriToBrowserUri(e).toString(!0))):"url('')"}function jf(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=CSS.escape(e);return!t&&i!==e&&console.warn("CSS class name ".concat(e," modified to ").concat(i," to be safe for CSS")),i}function Yf(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return e.reduce((e,t,n)=>e+t+(i[n]||""),"")}var Qf,$f=class{constructor(){this._parts=[]}push(){this._parts.push(...arguments)}join(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\n";return this._parts.join(e)}},Xf=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list",html:"text/html"}),Zf=(0,r.A)({nameShort:"Code - OSS",nameLong:"Code - OSS",applicationName:"code-oss",dataFolderName:".vscode-oss",win32MutexName:"vscodeoss",licenseName:"MIT",licenseUrl:"https://github.com/microsoft/vscode/blob/main/LICENSE.txt",serverLicenseUrl:"https://github.com/microsoft/vscode/blob/main/LICENSE.txt",serverGreeting:[],serverLicense:[],serverLicensePrompt:"",serverApplicationName:"code-server-oss",serverDataFolderName:".vscode-server-oss",tunnelApplicationName:"code-tunnel-oss",win32DirName:"Microsoft Code OSS",win32NameVersion:"Microsoft Code OSS",win32RegValueName:"CodeOSS",win32x64AppId:"{{D77B7E06-80BA-4137-BCF4-654B95CCEBC5}",win32arm64AppId:"{{D1ACE434-89C5-48D1-88D3-E2991DF85475}",win32x64UserAppId:"{{CC6B787D-37A0-49E8-AE24-8559A032BE0C}",win32arm64UserAppId:"{{3AEBF0C8-F733-4AD4-BADE-FDB816D53D7B}",win32AppUserModelId:"Microsoft.CodeOSS",win32ShellNameShort:"C&ode - OSS",win32TunnelServiceMutex:"vscodeoss-tunnelservice",win32TunnelMutex:"vscodeoss-tunnel",darwinBundleIdentifier:"com.visualstudio.code.oss",darwinProfileUUID:"47827DD9-4734-49A0-AF80-7E19B11495CC",darwinProfilePayloadUUID:"CF808BE7-53F3-46C6-A7E2-7EDB98A5E959",linuxIconName:"code-oss",licenseFileName:"LICENSE.txt",reportIssueUrl:"https://github.com/microsoft/vscode/issues/new",nodejsRepository:"https://nodejs.org",urlProtocol:"code-oss",webviewContentExternalBaseUrlTemplate:"https://{{uuid}}.vscode-cdn.net/insider/ef65ac1ba57f57f2a3961bfe94aa20481caca4c6/out/vs/workbench/contrib/webview/browser/pre/",builtInExtensions:[{name:"ms-vscode.js-debug-companion",version:"1.1.3",sha256:"7380a890787452f14b2db7835dfa94de538caf358ebc263f9d46dd68ac52de93",repo:"https://github.com/microsoft/vscode-js-debug-companion",metadata:{id:"99cb0b7f-7354-4278-b8da-6cc79972169d",publisherId:{publisherId:"5f5636e7-69ed-4afe-b5d6-8d231fb3d3ee",publisherName:"ms-vscode",displayName:"Microsoft",flags:"verified"},publisherDisplayName:"Microsoft"}},{name:"ms-vscode.js-debug",version:"1.105.0",sha256:"0c45b90342e8aafd4ff2963b4006de64208ca58c2fd01fea7a710fe61dcfd12a",repo:"https://github.com/microsoft/vscode-js-debug",metadata:{id:"25629058-ddac-4e17-abba-74678e126c5d",publisherId:{publisherId:"5f5636e7-69ed-4afe-b5d6-8d231fb3d3ee",publisherName:"ms-vscode",displayName:"Microsoft",flags:"verified"},publisherDisplayName:"Microsoft"}},{name:"ms-vscode.vscode-js-profile-table",version:"1.0.10",sha256:"7361748ddf9fd09d8a2ed1f2a2d7376a2cf9aae708692820b799708385c38e08",repo:"https://github.com/microsoft/vscode-js-profile-visualizer",metadata:{id:"7e52b41b-71ad-457b-ab7e-0620f1fc4feb",publisherId:{publisherId:"5f5636e7-69ed-4afe-b5d6-8d231fb3d3ee",publisherName:"ms-vscode",displayName:"Microsoft",flags:"verified"},publisherDisplayName:"Microsoft"}}],defaultChatAgent:{extensionId:"GitHub.copilot",chatExtensionId:"GitHub.copilot-chat",documentationUrl:"https://aka.ms/github-copilot-overview",termsStatementUrl:"https://aka.ms/github-copilot-terms-statement",privacyStatementUrl:"https://aka.ms/github-copilot-privacy-statement",skusDocumentationUrl:"https://aka.ms/github-copilot-plans",publicCodeMatchesUrl:"https://aka.ms/github-copilot-match-public-code",manageSettingsUrl:"https://aka.ms/github-copilot-settings",managePlanUrl:"https://aka.ms/github-copilot-manage-plan",manageOverageUrl:"https://aka.ms/github-copilot-manage-overage",upgradePlanUrl:"https://aka.ms/github-copilot-upgrade-plan",signUpUrl:"https://aka.ms/github-sign-up",provider:{default:{id:"github",name:"GitHub"},enterprise:{id:"github-enterprise",name:"GHE.com"},google:{id:"google",name:"Google"},apple:{id:"apple",name:"Apple"}},providerUriSetting:"github-enterprise.uri",providerScopes:[["read:user","user:email","repo","workflow"],["user:email"],["read:user"]],entitlementUrl:"https://api.github.com/copilot_internal/user",entitlementSignupLimitedUrl:"https://api.github.com/copilot_internal/subscribe_limited_user",chatQuotaExceededContext:"github.copilot.chat.quotaExceeded",completionsQuotaExceededContext:"github.copilot.completions.quotaExceeded",walkthroughCommand:"github.copilot.open.walkthrough",completionsMenuCommand:"github.copilot.toggleStatusMenu",completionsRefreshTokenCommand:"github.copilot.signIn",chatRefreshTokenCommand:"github.copilot.refreshToken",generateCommitMessageCommand:"github.copilot.git.generateCommitMessage",resolveMergeConflictsCommand:"github.copilot.git.resolveMergeConflicts",completionsAdvancedSetting:"github.copilot.advanced",completionsEnablementSetting:"github.copilot.enable",nextEditSuggestionsSetting:"github.copilot.nextEditSuggestions.enabled"},quality:"stable",version:"1.107.1",commit:"994fd12f8d3a5aa16f17d42c041e5809167e845a",date:"2026-01-07T13:36:47.418Z"},null!==(K=globalThis._VSCODE_PRODUCT_JSON)&&void 0!==K?K:{});!function(e){e.Multiline="multilineText",e.Singleline="singlelineText"}(Qf||(Qf={}));var Jf,em="base.contributions.configuration";!function(e){e[e.APPLICATION=1]="APPLICATION",e[e.MACHINE=2]="MACHINE",e[e.APPLICATION_MACHINE=3]="APPLICATION_MACHINE",e[e.WINDOW=4]="WINDOW",e[e.RESOURCE=5]="RESOURCE",e[e.LANGUAGE_OVERRIDABLE=6]="LANGUAGE_OVERRIDABLE",e[e.MACHINE_OVERRIDABLE=7]="MACHINE_OVERRIDABLE"}(Jf||(Jf={}));var tm={properties:{},patternProperties:{}},im={properties:{},patternProperties:{}},nm={properties:{},patternProperties:{}},sm={properties:{},patternProperties:{}},rm={properties:{},patternProperties:{}},om={properties:{},patternProperties:{}},am={properties:{},patternProperties:{}},lm="vscode://schemas/settings/resourceLanguage",hm=Tn.as(Gl),dm="\\[([^\\]]+)\\]",cm=new RegExp(dm,"g"),um="^(".concat(dm,")+$"),gm=new RegExp(um);function pm(e){let t=[];if(gm.test(e)){let n=cm.exec(e);for(;null!==(i=n)&&void 0!==i&&i.length;){var i;let s=n[1].trim();s&&t.push(s),n=cm.exec(e)}}return Br(t)}var fm=new class extends Co{constructor(){super(),this.registeredConfigurationDefaults=[],this.overrideIdentifiers=new Set,this._onDidSchemaChange=this._register(new Ro),this.onDidSchemaChange=this._onDidSchemaChange.event,this._onDidUpdateConfiguration=this._register(new Ro),this.onDidUpdateConfiguration=this._onDidUpdateConfiguration.event,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:Li(1761,"Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},hm.registerSchema(lm,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.registerConfigurations([e],t),e}registerConfigurations(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=new Set;this.doRegisterConfigurations(e,t,i),hm.registerSchema(lm,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:i})}deregisterConfigurations(e){let t=new Set;this.doDeregisterConfigurations(e,t),hm.registerSchema(lm,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t})}updateConfigurations(e){let{add:t,remove:i}=e,n=new Set;this.doDeregisterConfigurations(i,n),this.doRegisterConfigurations(t,!1,n),hm.registerSchema(lm,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}registerDefaultConfigurations(e){let t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){this.registeredConfigurationDefaults.push(...e);let i=[];for(let{overrides:s,source:r}of e)for(let e in s){var n;t.add(e);let o=null!==(n=this.configurationDefaultsOverrides.get(e))&&void 0!==n?n:this.configurationDefaultsOverrides.set(e,{configurationDefaultOverrides:[]}).get(e),a=s[e];if(o.configurationDefaultOverrides.push({value:a,source:r}),gm.test(e)){let t=this.mergeDefaultConfigurationsForOverrideIdentifier(e,a,r,o.configurationDefaultOverrideValue);if(!t)continue;o.configurationDefaultOverrideValue=t,this.updateDefaultOverrideProperty(e,t,r),i.push(...pm(e))}else{let t=this.mergeDefaultConfigurationsForConfigurationProperty(e,a,r,o.configurationDefaultOverrideValue);if(!t)continue;o.configurationDefaultOverrideValue=t;let i=this.configurationProperties[e];i&&(this.updatePropertyDefaultValue(e,i),this.updateSchema(e,i))}}this.doRegisterOverrideIdentifiers(i)}deregisterDefaultConfigurations(e){let t=new Set;this.doDeregisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doDeregisterDefaultConfigurations(e,t){for(let i of e){let e=this.registeredConfigurationDefaults.indexOf(i);-1!==e&&this.registeredConfigurationDefaults.splice(e,1)}for(let{overrides:i,source:n}of e)for(let e in i){let s=this.configurationDefaultsOverrides.get(e);if(!s)continue;let r=s.configurationDefaultOverrides.findIndex(t=>{var s;return n?(null===(s=t.source)||void 0===s?void 0:s.id)===n.id:t.value===i[e]});if(-1!==r){if(s.configurationDefaultOverrides.splice(r,1),0===s.configurationDefaultOverrides.length&&this.configurationDefaultsOverrides.delete(e),gm.test(e)){let t;for(let i of s.configurationDefaultOverrides)t=this.mergeDefaultConfigurationsForOverrideIdentifier(e,i.value,i.source,t);t&&!cn(t.value)?(s.configurationDefaultOverrideValue=t,this.updateDefaultOverrideProperty(e,t,n)):(this.configurationDefaultsOverrides.delete(e),delete this.configurationProperties[e],delete this.defaultLanguageConfigurationOverridesNode.properties[e])}else{let t;for(let n of s.configurationDefaultOverrides)t=this.mergeDefaultConfigurationsForConfigurationProperty(e,n.value,n.source,t);s.configurationDefaultOverrideValue=t;let i=this.configurationProperties[e];i&&(this.updatePropertyDefaultValue(e,i),this.updateSchema(e,i))}t.add(e)}}this.updateOverridePropertyPatternKey()}updateDefaultOverrideProperty(e,t,i){let n={section:{id:this.defaultLanguageConfigurationOverridesNode.id,title:this.defaultLanguageConfigurationOverridesNode.title,order:this.defaultLanguageConfigurationOverridesNode.order,extensionInfo:this.defaultLanguageConfigurationOverridesNode.extensionInfo},type:"object",default:t.value,description:Li(1762,"Configure settings to be overridden for {0}.",hr(e)),$ref:lm,defaultDefaultValue:t.value,source:i,defaultValueSource:i};this.configurationProperties[e]=n,this.defaultLanguageConfigurationOverridesNode.properties[e]=n}mergeDefaultConfigurationsForOverrideIdentifier(e,t,i,n){var s;let o=(null===n||void 0===n?void 0:n.value)||{},a=null!==(s=null===n||void 0===n?void 0:n.source)&&void 0!==s?s:new Map;if(a instanceof Map){for(let e of Object.keys(t)){let n=t[e];var l;if(Xi(n)&&(nn(o[e])||Xi(o[e]))){if(o[e]=(0,r.A)((0,r.A)({},null!==(l=o[e])&&void 0!==l?l:{}),n),i)for(let t in n)a.set("".concat(e,".").concat(t),i)}else o[e]=n,i?a.set(e,i):a.delete(e)}return{value:o,source:a}}console.error("objectConfigurationSources is not a Map")}mergeDefaultConfigurationsForConfigurationProperty(e,t,i,n){var s;let o=this.configurationProperties[e],a=null!==(s=null===n||void 0===n?void 0:n.value)&&void 0!==s?s:null===o||void 0===o?void 0:o.defaultDefaultValue,l=i;if(Xi(t)&&(void 0!==o&&"object"===o.type||void 0===o&&(nn(a)||Xi(a)))){var h;if(l=null!==(h=null===n||void 0===n?void 0:n.source)&&void 0!==h?h:new Map,!(l instanceof Map))return void console.error("defaultValueSource is not a Map");for(let n in t)i&&l.set("".concat(e,".").concat(n),i);t=(0,r.A)((0,r.A)({},Xi(a)?a:{}),t)}return{value:t,source:l}}deltaConfiguration(e){let t=!1,i=new Set;e.removedDefaults&&(this.doDeregisterDefaultConfigurations(e.removedDefaults,i),t=!0),e.addedDefaults&&(this.doRegisterDefaultConfigurations(e.addedDefaults,i),t=!0),e.removedConfigurations&&this.doDeregisterConfigurations(e.removedConfigurations,i),e.addedConfigurations&&this.doRegisterConfigurations(e.addedConfigurations,!1,i),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:i,defaultsOverrides:t})}notifyConfigurationSchemaUpdated(){this._onDidSchemaChange.fire()}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(let t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,i){e.forEach(e=>{this.validateAndRegisterProperties(e,t,e.extensionInfo,e.restrictedProperties,void 0,i),this.configurationContributors.push(e),this.registerJSONConfiguration(e)})}doDeregisterConfigurations(e,t){let i=e=>{var n;if(e.properties)for(let i in e.properties){var s;t.add(i);let n=this.configurationProperties[i];null!==n&&void 0!==n&&null!==(s=n.policy)&&void 0!==s&&s.name&&this.policyConfigurations.delete(n.policy.name),delete this.configurationProperties[i],this.removeFromSchema(i,e.properties[i])}null===(n=e.allOf)||void 0===n||n.forEach(e=>i(e))};for(let n of e){i(n);let e=this.configurationContributors.indexOf(n);-1!==e&&this.configurationContributors.splice(e,1)}}validateAndRegisterProperties(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Jf.WINDOW,r=arguments.length>5?arguments[5]:void 0;s=rn(e.scope)?s:e.scope;let o=e.properties;if(o)for(let u in o){var a,l,h,d;let c=o[u];if(c.section={id:e.id,title:e.title,order:e.order,extensionInfo:e.extensionInfo},t&&mm(u,c,null===i||void 0===i?void 0:i.id)){delete o[u];continue}c.source=i,c.defaultDefaultValue=o[u].default,this.updatePropertyDefaultValue(u,c),gm.test(u)?c.scope=void 0:(c.scope=rn(c.scope)?s:c.scope,c.restricted=rn(c.restricted)?!(null===n||void 0===n||!n.includes(u)):c.restricted),c.experiment?(null===(a=c.tags)||void 0===a?void 0:a.some(e=>"onexp"===e.toLowerCase()))||(c.tags=null!==(l=c.tags)&&void 0!==l?l:[],c.tags.push("onExP")):(null===(h=c.tags)||void 0===h?void 0:h.some(e=>"onexp"===e.toLowerCase()))&&(console.error("Invalid tag 'onExP' found for property '".concat(u,"'. Please use 'experiment' property instead.")),c.experiment={mode:"startup"});let g=o[u].hasOwnProperty("included")&&!o[u].included,p=null===(d=o[u].policy)||void 0===d?void 0:d.name;g?(this.excludedConfigurationProperties[u]=o[u],p&&(this.policyConfigurations.set(p,u),r.add(u)),delete o[u]):(r.add(u),p&&this.policyConfigurations.set(p,u),this.configurationProperties[u]=o[u],!o[u].deprecationMessage&&o[u].markdownDeprecationMessage&&(o[u].deprecationMessage=o[u].markdownDeprecationMessage))}let c=e.allOf;if(c)for(let u of c)this.validateAndRegisterProperties(u,t,i,n,s,r)}getConfigurations(){return this.configurationContributors}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}getExcludedConfigurationProperties(){return this.excludedConfigurationProperties}getRegisteredDefaultConfigurations(){return[...this.registeredConfigurationDefaults]}getConfigurationDefaultsOverrides(){let e=new Map;for(let[t,i]of this.configurationDefaultsOverrides)i.configurationDefaultOverrideValue&&e.set(t,i.configurationDefaultOverrideValue);return e}registerJSONConfiguration(e){let t=e=>{var i;let n=e.properties;if(n)for(let t in n)this.updateSchema(t,n[t]);null===(i=e.allOf)||void 0===i||i.forEach(t)};t(e)}updateSchema(e,t){switch(tm.properties[e]=t,t.scope){case Jf.APPLICATION:im.properties[e]=t;break;case Jf.MACHINE:sm.properties[e]=t;break;case Jf.APPLICATION_MACHINE:nm.properties[e]=t;break;case Jf.MACHINE_OVERRIDABLE:rm.properties[e]=t;break;case Jf.WINDOW:om.properties[e]=t;break;case Jf.RESOURCE:am.properties[e]=t;break;case Jf.LANGUAGE_OVERRIDABLE:am.properties[e]=t,this.resourceLanguageSettingsSchema.properties[e]=t}}removeFromSchema(e,t){switch(delete tm.properties[e],t.scope){case Jf.APPLICATION:delete im.properties[e];break;case Jf.MACHINE:delete sm.properties[e];break;case Jf.APPLICATION_MACHINE:delete nm.properties[e];break;case Jf.MACHINE_OVERRIDABLE:delete rm.properties[e];break;case Jf.WINDOW:delete om.properties[e];break;case Jf.RESOURCE:case Jf.LANGUAGE_OVERRIDABLE:delete am.properties[e],delete this.resourceLanguageSettingsSchema.properties[e]}}updateOverridePropertyPatternKey(){for(let e of this.overrideIdentifiers.values()){let t="[".concat(e,"]"),i={type:"object",description:Li(1763,"Configure editor settings to be overridden for a language."),errorMessage:Li(1764,"This setting does not support per-language configuration."),$ref:lm};this.updatePropertyDefaultValue(t,i),tm.properties[t]=i,im.properties[t]=i,nm.properties[t]=i,sm.properties[t]=i,rm.properties[t]=i,om.properties[t]=i,am.properties[t]=i}}registerOverridePropertyPatternKey(){let e={type:"object",description:Li(1763,"Configure editor settings to be overridden for a language."),errorMessage:Li(1764,"This setting does not support per-language configuration."),$ref:lm};tm.patternProperties[um]=e,im.patternProperties[um]=e,nm.patternProperties[um]=e,sm.patternProperties[um]=e,rm.patternProperties[um]=e,om.patternProperties[um]=e,am.patternProperties[um]=e,this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){var i;let n,s,r=null===(i=this.configurationDefaultsOverrides.get(e))||void 0===i?void 0:i.configurationDefaultOverrideValue;r&&(!t.disallowConfigurationDefault||!r.source)&&(n=r.value,s=r.source),nn(n)&&(n=t.defaultDefaultValue,s=void 0),nn(n)&&(n=function(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}(t.type)),t.default=n,t.defaultValueSource=s}};function mm(e,t,i){var n,s,r,o;return e.trim()?gm.test(e)?Li(1766,"Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",e):void 0===fm.getConfigurationProperties()[e]||i&&vm.has(i.toLowerCase())?null!==(n=t.policy)&&void 0!==n&&n.name&&void 0!==fm.getPolicyConfigurations().get(null===(s=t.policy)||void 0===s?void 0:s.name)?Li(1768,"Cannot register '{0}'. The associated policy {1} is already registered with {2}.",e,null===(r=t.policy)||void 0===r?void 0:r.name,fm.getPolicyConfigurations().get(null===(o=t.policy)||void 0===o?void 0:o.name)):null:Li(1767,"Cannot register '{0}'. This property is already registered.",e):Li(1765,"Cannot register an empty property")}Tn.add(em,fm);var vm=new Set(Zf.defaultChatAgent?[Zf.defaultChatAgent.extensionId,Zf.defaultChatAgent.chatExtensionId].map(e=>e.toLowerCase()):[]),_m=new class extends Co{constructor(){super(),this._onDidChangeLanguages=this._register(new Ro),this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,i=this._languages.length;t<i;t++)if(this._languages[t]===e)return void this._languages.splice(t,1)}}}getLanguages(){return this._languages}};Tn.add("editor.modesRegistry",_m);var bm="plaintext";_m.registerLanguage({id:bm,extensions:[".txt"],aliases:[Li(851,"Plain Text"),"text"],mimetypes:[Xf.text]}),Tn.as(em).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1},"[go]":{"editor.insertSpaces":!1},"[makefile]":{"editor.insertSpaces":!1},"[shellscript]":{"files.eol":"\n"},"[yaml]":{"editor.insertSpaces":!0,"editor.tabSize":2}}}]);var Cm,ym=(q=class e{constructor(e,t,i){this.id=e,this.label=t,this.settingsId=i,this.isLoaded=!1,this.hasFileIcons=!1,this.hasFolderIcons=!1,this.hidesExplorerArrows=!1}ensureLoaded(e){return this.isLoaded?Promise.resolve(this.styleSheetContent):this.load(e)}reload(e){return this.load(e)}load(e){return e.load(this)}static fromExtensionTheme(t,i,n){let s=n.extensionId+"-"+t.id,r=t.label||Ps(t.path),o=t.id,a=new e(s,r,o);return a.description=t.description,a.location=i,a.extensionData=n,a.watch=t._watch,a.isLoaded=!1,a}static get noIconTheme(){let t=e._noIconTheme;return t||(t=e._noIconTheme=new e("","",null),t.hasFileIcons=!1,t.hasFolderIcons=!1,t.hidesExplorerArrows=!1,t.isLoaded=!0,t.extensionData=void 0,t.watch=!1),t}static createUnloadedTheme(t){let i=new e(t,"","__"+t);return i.isLoaded=!1,i.hasFileIcons=!1,i.hasFolderIcons=!1,i.hidesExplorerArrows=!1,i.extensionData=void 0,i.watch=!1,i}static fromStorageData(t){let i=t.get(e.STORAGE_KEY,Vp.PROFILE);if(i)try{let t=JSON.parse(i),n=new e("","",null);for(let e in t)switch(e){case"id":case"label":case"description":case"settingsId":case"styleSheetContent":case"hasFileIcons":case"hidesExplorerArrows":case"hasFolderIcons":case"watch":n[e]=t[e];break;case"location":break;case"extensionData":n.extensionData=Cn.fromJSONObject(t.extensionData)}return n}catch(n){return}}toStorage(t){let i=JSON.stringify({id:this.id,label:this.label,description:this.description,settingsId:this.settingsId,styleSheetContent:this.styleSheetContent,hasFileIcons:this.hasFileIcons,hasFolderIcons:this.hasFolderIcons,hidesExplorerArrows:this.hidesExplorerArrows,extensionData:Cn.toJSONObject(this.extensionData),watch:this.watch});t.store(e.STORAGE_KEY,i,Vp.PROFILE,zp.MACHINE)}},{_:q.STORAGE_KEY="iconThemeData"},{_:q._noIconTheme=null},q),wm=class{constructor(e,t){this.fileService=e,this.languageService=t}load(e){return e.location?this.loadIconThemeDocument(e.location).then(t=>{let i=this.processIconThemeDocument(e.id,e.location,t);return e.styleSheetContent=i.content,e.hasFileIcons=i.hasFileIcons,e.hasFolderIcons=i.hasFolderIcons,e.hidesExplorerArrows=i.hidesExplorerArrows,e.isLoaded=!0,e.styleSheetContent}):Promise.resolve(e.styleSheetContent)}loadIconThemeDocument(e){return this.fileService.readExtensionResource(e).then(e=>{let t=[],i=Cr(e,t);return t.length>0?Promise.reject(Error(Li(14260,"Problems parsing file icons file: {0}",t.map(e=>Mu(e.error)).join(", ")))):"object"===wr(i)?Promise.resolve(i):Promise.reject(Error(Li(14261,"Invalid format for file icons theme file: Object expected.")))})}processIconThemeDocument(e,t,i){let n={content:"",hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!!i.hidesExplorerArrows},r=!1;if(!i.iconDefinitions)return n;let o={},a={},l=ll(t);function h(e){return hl(l,e)}function d(e,t){function i(e,t){if(t){let i=o[t];i||(i=o[t]=new $f),i.push(e)}}if(e){let o=Yf(G||(G=(0,s.A)([".show-file-icons"])));t&&(o=Yf(j||(j=(0,s.A)([""," ",""])),t,o));let l=Yf(Y||(Y=(0,s.A)([".monaco-tl-twistie.collapsible:not(.collapsed) + .monaco-tl-contents"])));e.folder&&(i(Yf(Q||(Q=(0,s.A)([""," .folder-icon::before"])),o),e.folder),n.hasFolderIcons=!0),e.folderExpanded&&(i(Yf($||($=(0,s.A)([""," "," .folder-icon::before"])),o,l),e.folderExpanded),n.hasFolderIcons=!0);let h=e.rootFolder||e.folder,d=e.rootFolderExpanded||e.folderExpanded;h&&(i(Yf(X||(X=(0,s.A)([""," .rootfolder-icon::before"])),o),h),n.hasFolderIcons=!0),d&&(i(Yf(Z||(Z=(0,s.A)([""," "," .rootfolder-icon::before"])),o,l),d),n.hasFolderIcons=!0),e.file&&(i(Yf(J||(J=(0,s.A)([""," .file-icon::before"])),o),e.file),n.hasFileIcons=!0);let c=e.folderNames;if(c)for(let e in c){let t=new $f,r=Sm(e.toLowerCase(),t);t.push(Yf(ee||(ee=(0,s.A)([".","-name-folder-icon"])),km(r))),i(Yf(te||(te=(0,s.A)([""," ",".folder-icon::before"])),o,t.join("")),c[e]),n.hasFolderIcons=!0}let u=e.folderNamesExpanded;if(u)for(let e in u){let t=new $f,r=Sm(e.toLowerCase(),t);t.push(Yf(ie||(ie=(0,s.A)([".","-name-folder-icon"])),km(r))),i(Yf(ne||(ne=(0,s.A)([""," "," ",".folder-icon::before"])),o,l,t.join("")),u[e]),n.hasFolderIcons=!0}let g=e.rootFolderNames;if(g)for(let e in g){let t=e.toLowerCase();i(Yf(se||(se=(0,s.A)([""," .","-root-name-folder-icon.rootfolder-icon::before"])),o,km(t)),g[e]),n.hasFolderIcons=!0}let p=e.rootFolderNamesExpanded;if(p)for(let e in p){let t=e.toLowerCase();i(Yf(re||(re=(0,s.A)([""," "," .","-root-name-folder-icon.rootfolder-icon::before"])),o,l,km(t)),p[e]),n.hasFolderIcons=!0}let f=e.languageIds;if(f)for(let e in!f.jsonc&&f.json&&(f.jsonc=f.json),f)i(Yf(oe||(oe=(0,s.A)([""," .","-lang-file-icon.file-icon::before"])),o,km(e)),f[e]),n.hasFileIcons=!0,r=!0,a[e]=!0;let m=e.fileExtensions;if(m)for(let e in m){let t=new $f,a=Sm(e.toLowerCase(),t).split(".");if(a.length){for(let e=0;e<a.length;e++)t.push(Yf(ae||(ae=(0,s.A)([".","-ext-file-icon"])),km(a.slice(e).join("."))));t.push(Yf(le||(le=(0,s.A)([".ext-file-icon"]))))}i(Yf(he||(he=(0,s.A)([""," ",".file-icon::before"])),o,t.join("")),m[e]),n.hasFileIcons=!0,r=!0}let v=e.fileNames;if(v)for(let e in v){let t=new $f,a=Sm(e.toLowerCase(),t);t.push(Yf(de||(de=(0,s.A)([".","-name-file-icon"])),km(a))),t.push(Yf(ce||(ce=(0,s.A)([".name-file-icon"]))));let l=a.split(".");if(l.length){for(let e=1;e<l.length;e++)t.push(Yf(ue||(ue=(0,s.A)([".","-ext-file-icon"])),km(l.slice(e).join("."))));t.push(Yf(ge||(ge=(0,s.A)([".ext-file-icon"]))))}i(Yf(pe||(pe=(0,s.A)([""," ",".file-icon::before"])),o,t.join("")),v[e]),n.hasFileIcons=!0,r=!0}}}if(d(i),d(i.light,Yf(fe||(fe=(0,s.A)([".vs"])))),d(i.highContrast,Yf(me||(me=(0,s.A)([".hc-black"])))),d(i.highContrast,Yf(ve||(ve=(0,s.A)([".hc-light"])))),!n.hasFileIcons&&!n.hasFolderIcons)return n;let c=!0===i.showLanguageModeIcons||r&&!1!==i.showLanguageModeIcons,u=new $f,g=i.fonts,p=new Map;if(Array.isArray(g)){let e=this.tryNormalizeFontSize(g[0].size)||"150%";g.forEach(t=>{let i=new $f;i.push(...t.src.map(e=>Yf(_e||(_e=(0,s.A)([""," format(",")"])),Gf(h(e.path)),qf(e.format)))),u.push(Yf(be||(be=(0,s.A)(["@font-face { src: ","; font-family: ","; font-weight: ","; font-style: ","; font-display: block; }"])),i.join(", "),qf(t.id),Kf(t.weight),Kf(t.style)));let n=this.tryNormalizeFontSize(t.size);void 0!==n&&n!==e&&p.set(t.id,n)}),u.push(Yf(Ce||(Ce=(0,s.A)([".show-file-icons .file-icon::before, .show-file-icons .folder-icon::before, .show-file-icons .rootfolder-icon::before { font-family: ","; font-size: ","; }"])),qf(g[0].id),Vf(e)))}let f=qf("\\2001");for(let v in o){let e=o[v],t=i.iconDefinitions[v];if(t)if(t.iconPath)u.push(Yf(ye||(ye=(0,s.A)([""," { content: ","; background-image: ","; }"])),e.join(", "),f,Gf(h(t.iconPath))));else if(t.fontCharacter||t.fontColor){var m;let i=new $f;t.fontColor&&t.fontColor.match(Nf)&&i.push(Yf(we||(we=(0,s.A)(["color: ",";"])),zf(t.fontColor))),t.fontCharacter&&i.push(Yf(Se||(Se=(0,s.A)(["content: ",";"])),qf(t.fontCharacter)));let n=null!==(m=t.fontSize)&&void 0!==m?m:t.fontId?p.get(t.fontId):void 0;n&&n.match(Lf)&&i.push(Yf(ke||(ke=(0,s.A)(["font-size: ",";"])),Vf(n))),t.fontId&&i.push(Yf(Ee||(Ee=(0,s.A)(["font-family: ",";"])),qf(t.fontId))),c&&i.push(Yf(De||(De=(0,s.A)(["background-image: unset;"])))),u.push(Yf(Te||(Te=(0,s.A)([""," { "," }"])),e.join(", "),i.join(" ")))}}if(c)for(let v of this.languageService.getRegisteredLanguageIds())if(!a[v]){let e=this.languageService.getIcon(v);if(e){let t=Yf(Ie||(Ie=(0,s.A)([".show-file-icons .","-lang-file-icon.file-icon::before"])),km(v));u.push(Yf(xe||(xe=(0,s.A)([""," { content: ","; background-image: ","; }"])),t,f,Gf(e.dark))),u.push(Yf(Le||(Le=(0,s.A)([".vs "," { content: ","; background-image: ","; }"])),t,f,Gf(e.light)))}}return n.content=u.join("\n"),n}tryNormalizeFontSize(e){if(e){if(e.endsWith("px")){let t=parseInt(e,10);if(!isNaN(t))return Math.round(t/13*100)+"%"}return e}}};function Sm(e,t){let i=e.lastIndexOf("/");if(i>=0){let n=e.substring(0,i);return t.push(Yf(Ae||(Ae=(0,s.A)([".","-name-dir-icon"])),km(n))),e.substring(i+1)}return e}function km(e){return jf(e=function(e){return e.replace(/[\s]/g,"/")}(e),!0)}function Em(e){Cm?Cm instanceof xm?Cm.loggers.push(e):Cm=new xm([Cm,e]):Cm=e}function Dm(){return Cm}var Tm=void 0;var Im,xm=class{constructor(e){this.loggers=e}handleObservableCreated(e,t){for(let i of this.loggers)i.handleObservableCreated(e,t)}handleOnListenerCountChanged(e,t){for(let i of this.loggers)i.handleOnListenerCountChanged(e,t)}handleObservableUpdated(e,t){for(let i of this.loggers)i.handleObservableUpdated(e,t)}handleAutorunCreated(e,t){for(let i of this.loggers)i.handleAutorunCreated(e,t)}handleAutorunDisposed(e){for(let t of this.loggers)t.handleAutorunDisposed(e)}handleAutorunDependencyChanged(e,t,i){for(let n of this.loggers)n.handleAutorunDependencyChanged(e,t,i)}handleAutorunStarted(e){for(let t of this.loggers)t.handleAutorunStarted(e)}handleAutorunFinished(e){for(let t of this.loggers)t.handleAutorunFinished(e)}handleDerivedDependencyChanged(e,t,i){for(let n of this.loggers)n.handleDerivedDependencyChanged(e,t,i)}handleDerivedCleared(e){for(let t of this.loggers)t.handleDerivedCleared(e)}handleBeginTransaction(e){for(let t of this.loggers)t.handleBeginTransaction(e)}handleEndTransaction(e){for(let t of this.loggers)t.handleEndTransaction(e)}};!function(e){let t=!1;e.enable=function(){t=!0},e.ofCaller=function(){if(!t)return;let e=Error,i=e.stackTraceLimit;e.stackTraceLimit=3;let n=Error().stack;return e.stackTraceLimit=i,Lm.fromStack(n,2)}}(Im||(Im={}));var Lm=class e{static fromStack(t,i){let n=function(e){let t=e.match(/\((.*):(\d+):(\d+)\)/);if(t)return{fileName:t[1],line:parseInt(t[2]),column:parseInt(t[3]),id:e};let i=e.match(/at ([^\(\)]*):(\d+):(\d+)/);if(i)return{fileName:i[1],line:parseInt(i[2]),column:parseInt(i[3]),id:e}}(t.split("\n")[i+1]);if(n)return new e(n.fileName,n.line,n.column,n.id)}constructor(e,t,i,n){this.fileName=e,this.line=t,this.column=i,this.id=n}};var Am=class{constructor(e,t,i){this.owner=e,this.debugNameSource=t,this.referenceFn=i}getDebugName(e){return function(e,t){let i=Fm.get(e);if(i)return i;let n=function(e,t){let i=Fm.get(e);if(i)return i;let n,s=t.owner?function(e){var t,i;let n=Um.get(e);if(n)return n;let s=null!==(t=Hm(e))&&void 0!==t?t:"Object",r=null!==(i=Bm.get(s))&&void 0!==i?i:0;r++,Bm.set(s,r);let o=1===r?s:"".concat(s,"#").concat(r);return Um.set(e,o),o}(t.owner)+".":"",r=t.debugNameSource;if(void 0!==r){if("function"!=typeof r)return s+r;if(n=r(),void 0!==n)return s+n}let o=t.referenceFn;if(void 0!==o&&(n=Wm(o),void 0!==n))return s+n;if(void 0!==t.owner){let i=function(e,t){for(let i in e)if(e[i]===t)return i}(t.owner,e);if(void 0!==i)return s+i}}(e,t);if(n){var s;let t=null!==(s=Nm.get(n))&&void 0!==s?s:0;t++,Nm.set(n,t);let i=1===t?n:"".concat(n,"#").concat(t);return Fm.set(e,i),i}}(e,this)}},Nm=new Map,Fm=new WeakMap;var Om,Rm,Mm,Pm,Bm=new Map,Um=new WeakMap;function Hm(e){let t=e.constructor;if(t)return"Object"===t.name?void 0:t.name}function Wm(e){var t;let i=e.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(i);return null===(t=n?n[1]:void 0)||void 0===t?void 0:t.trim()}var Vm,zm=class{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Im.ofCaller(),n=void 0===t?void 0:e,s=void 0===t?e:t;return Om({owner:n,debugName:()=>{let e=Wm(s);if(void 0!==e)return e;let t=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(s.toString());return t?"".concat(this.debugName,".").concat(t[2]):n?void 0:"".concat(this.debugName," (mapped)")},debugReferenceFn:s},e=>s(this.read(e),e),i)}flatten(){return Om({owner:void 0,debugName:()=>"".concat(this.debugName," (flattened)")},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(Rm(this,t)),this}keepObserved(e){return e.add(Mm(this)),this}get debugValue(){return this.get()}get debug(){return new Km(this)}},Km=class{constructor(e){this.observable=e}getDependencyGraph(){return Pm(this.observable,{type:"dependencies"})}getObserverGraph(){return Pm(this.observable,{type:"observers"})}},qm=class extends zm{constructor(e){var t;super(),this._observers=new Set,null===(t=Dm())||void 0===t||t.handleObservableCreated(this,e)}addObserver(e){var t;let i=this._observers.size;this._observers.add(e),0===i&&this.onFirstObserverAdded(),i!==this._observers.size&&(null===(t=Dm())||void 0===t||t.handleOnListenerCountChanged(this,this._observers.size))}removeObserver(e){var t;let i=this._observers.delete(e);i&&0===this._observers.size&&this.onLastObserverRemoved(),i&&(null===(t=Dm())||void 0===t||t.handleOnListenerCountChanged(this,this._observers.size))}onFirstObserverAdded(){}onLastObserverRemoved(){}log(){var e;let t=!!Dm();return function(e){Tm&&Tm(e)}(this),t||null!==(e=Dm())&&void 0!==e&&e.handleObservableCreated(this,Im.ofCaller()),this}debugGetObservers(){return this._observers}};function Gm(e){switch(e){case Vm.dependenciesMightHaveChanged:return"dependenciesMightHaveChanged";case Vm.stale:return"stale";case Vm.upToDate:return"upToDate";default:return"<unknown>"}}!function(e){e[e.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",e[e.stale=2]="stale",e[e.upToDate=3]="upToDate"}(Vm||(Vm={}));var jm,Ym=class{get debugName(){var e;return null!==(e=this._debugNameData.getDebugName(this))&&void 0!==e?e:"(anonymous)"}constructor(e,t,i,n){var s,r;this._debugNameData=e,this._runFn=t,this._changeTracker=i,this._state=Vm.stale,this._updateCount=0,this._disposed=!1,this._dependencies=new Set,this._dependenciesToBeRemoved=new Set,this._isRunning=!1,this._store=void 0,this._delayedStore=void 0,this._changeSummary=null===(s=this._changeTracker)||void 0===s?void 0:s.createChangeSummary(void 0),null!==(r=Dm())&&void 0!==r&&r.handleAutorunCreated(this,n),this._run()}dispose(){if(!this._disposed){var e;this._disposed=!0;for(let e of this._dependencies)e.removeObserver(this);this._dependencies.clear(),void 0!==this._store&&this._store.dispose(),void 0!==this._delayedStore&&this._delayedStore.dispose(),null!==(e=Dm())&&void 0!==e&&e.handleAutorunDisposed(this)}}_run(){let e=this._dependenciesToBeRemoved;this._dependenciesToBeRemoved=this._dependencies,this._dependencies=e,this._state=Vm.upToDate;try{if(!this._disposed){var t;null===(t=Dm())||void 0===t||t.handleAutorunStarted(this);let s=this._changeSummary,r=this._delayedStore;void 0!==r&&(this._delayedStore=void 0);try{var i,n;this._isRunning=!0,this._changeTracker&&(null!==(i=(n=this._changeTracker).beforeUpdate)&&void 0!==i&&i.call(n,this,s),this._changeSummary=this._changeTracker.createChangeSummary(s)),void 0!==this._store&&(this._store.dispose(),this._store=void 0),this._runFn(this,s)}catch(e){Oi(e)}finally{this._isRunning=!1,void 0!==r&&r.dispose()}}}finally{var s;this._disposed||null===(s=Dm())||void 0===s||s.handleAutorunFinished(this);for(let e of this._dependenciesToBeRemoved)e.removeObserver(this);this._dependenciesToBeRemoved.clear()}}toString(){return"Autorun<".concat(this.debugName,">")}beginUpdate(e){this._state===Vm.upToDate&&(this._state=Vm.dependenciesMightHaveChanged),this._updateCount++}endUpdate(e){try{if(1===this._updateCount)do{if(this._state===Vm.dependenciesMightHaveChanged){this._state=Vm.upToDate;for(let e of this._dependencies)if(e.reportChanges(),this._state===Vm.stale)break}this._state!==Vm.upToDate&&this._run()}while(this._state!==Vm.upToDate)}finally{this._updateCount--}Yi(()=>this._updateCount>=0)}handlePossibleChange(e){this._state===Vm.upToDate&&this._isDependency(e)&&(this._state=Vm.dependenciesMightHaveChanged)}handleChange(e,t){if(this._isDependency(e)){var i;null===(i=Dm())||void 0===i||i.handleAutorunDependencyChanged(this,e,t);try{(!this._changeTracker||this._changeTracker.handleChange({changedObservable:e,change:t,didChange:t=>t===e},this._changeSummary))&&(this._state=Vm.stale)}catch(e){Oi(e)}}}_isDependency(e){return this._dependencies.has(e)&&!this._dependenciesToBeRemoved.has(e)}_ensureNoRunning(){if(!this._isRunning)throw new qi("The reader object cannot be used outside its compute function!")}readObservable(e){if(this._ensureNoRunning(),this._disposed)return e.get();e.addObserver(this);let t=e.get();return this._dependencies.add(e),this._dependenciesToBeRemoved.delete(e),t}get store(){if(this._ensureNoRunning(),this._disposed)throw new qi("Cannot access store after dispose");return void 0===this._store&&(this._store=new bo),this._store}get delayedStore(){if(this._ensureNoRunning(),this._disposed)throw new qi("Cannot access store after dispose");return void 0===this._delayedStore&&(this._delayedStore=new bo),this._delayedStore}debugGetState(){return{isRunning:this._isRunning,updateCount:this._updateCount,dependencies:this._dependencies,state:this._state,stateStr:Gm(this._state)}}debugRerun(){this._isRunning?this._state=Vm.stale:this._run()}},Qm=(e,t)=>e===t;function $m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qm;return(t,i)=>Mr(t,i,e)}function Xm(e,t,i){if(void 0!==i){return null==e||null==t?t===e:i(e,t)}{let t=e;return(e,i)=>null==e||null==i?i===e:t(e,i)}}function Zm(e){switch(e){case jm.initial:return"initial";case jm.dependenciesMightHaveChanged:return"dependenciesMightHaveChanged";case jm.stale:return"stale";case jm.upToDate:return"upToDate";default:return"<unknown>"}}!function(e){e[e.initial=0]="initial",e[e.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",e[e.stale=2]="stale",e[e.upToDate=3]="upToDate"}(jm||(jm={}));var Jm=class extends qm{get debugName(){var e;return null!==(e=this._debugNameData.getDebugName(this))&&void 0!==e?e:"(anonymous)"}constructor(e,t,i){var n;let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;super(arguments.length>5?arguments[5]:void 0),this._debugNameData=e,this._computeFn=t,this._changeTracker=i,this._handleLastObserverRemoved=s,this._equalityComparator=r,this._state=jm.initial,this._value=void 0,this._updateCount=0,this._dependencies=new Set,this._dependenciesToBeRemoved=new Set,this._changeSummary=void 0,this._isUpdating=!1,this._isComputing=!1,this._didReportChange=!1,this._isInBeforeUpdate=!1,this._isReaderValid=!1,this._store=void 0,this._delayedStore=void 0,this._removedObserverToCallEndUpdateOn=null,this._changeSummary=null===(n=this._changeTracker)||void 0===n?void 0:n.createChangeSummary(void 0)}onLastObserverRemoved(){var e,t;this._state=jm.initial,this._value=void 0,null===(e=Dm())||void 0===e||e.handleDerivedCleared(this);for(let i of this._dependencies)i.removeObserver(this);this._dependencies.clear(),void 0!==this._store&&(this._store.dispose(),this._store=void 0),void 0!==this._delayedStore&&(this._delayedStore.dispose(),this._delayedStore=void 0),null===(t=this._handleLastObserverRemoved)||void 0===t||t.call(this)}get(){if(0===this._observers.size){let i;try{var e,t;let n;this._isReaderValid=!0,this._changeTracker&&(n=this._changeTracker.createChangeSummary(void 0),null!==(e=(t=this._changeTracker).beforeUpdate)&&void 0!==e&&e.call(t,this,n)),i=this._computeFn(this,n)}finally{this._isReaderValid=!1}return this.onLastObserverRemoved(),i}do{if(this._state===jm.dependenciesMightHaveChanged)for(let e of this._dependencies)if(e.reportChanges(),this._state===jm.stale)break;this._state===jm.dependenciesMightHaveChanged&&(this._state=jm.upToDate),this._state!==jm.upToDate&&this._recompute()}while(this._state!==jm.upToDate);return this._value}_recompute(){let e=!1;this._isComputing=!0,this._didReportChange=!1;let t=this._dependenciesToBeRemoved;this._dependenciesToBeRemoved=this._dependencies,this._dependencies=t;try{var i,n,s,r;let t=this._changeSummary;this._isReaderValid=!0,this._changeTracker&&(this._isInBeforeUpdate=!0,null!==(i=(n=this._changeTracker).beforeUpdate)&&void 0!==i&&i.call(n,this,t),this._isInBeforeUpdate=!1,this._changeSummary=null===(s=this._changeTracker)||void 0===s?void 0:s.createChangeSummary(t));let o=this._state!==jm.initial,a=this._value;this._state=jm.upToDate;let l=this._delayedStore;void 0!==l&&(this._delayedStore=void 0);try{void 0!==this._store&&(this._store.dispose(),this._store=void 0),this._value=this._computeFn(this,t)}finally{this._isReaderValid=!1;for(let e of this._dependenciesToBeRemoved)e.removeObserver(this);this._dependenciesToBeRemoved.clear(),void 0!==l&&l.dispose()}e=this._didReportChange||o&&!this._equalityComparator(a,this._value),null===(r=Dm())||void 0===r||r.handleObservableUpdated(this,{oldValue:a,newValue:this._value,change:void 0,didChange:e,hadValue:o})}catch(e){Oi(e)}if(this._isComputing=!1,!this._didReportChange&&e)for(let o of this._observers)o.handleChange(this,void 0);else this._didReportChange=!1}toString(){return"LazyDerived<".concat(this.debugName,">")}beginUpdate(e){if(this._isUpdating)throw new qi("Cyclic deriveds are not supported yet!");this._updateCount++,this._isUpdating=!0;try{let e=1===this._updateCount;if(this._state===jm.upToDate&&(this._state=jm.dependenciesMightHaveChanged,!e))for(let t of this._observers)t.handlePossibleChange(this);if(e)for(let t of this._observers)t.beginUpdate(this)}finally{this._isUpdating=!1}}endUpdate(e){if(this._updateCount--,0===this._updateCount){let e=[...this._observers];for(let t of e)t.endUpdate(this);if(this._removedObserverToCallEndUpdateOn){let e=[...this._removedObserverToCallEndUpdateOn];this._removedObserverToCallEndUpdateOn=null;for(let t of e)t.endUpdate(this)}}Yi(()=>this._updateCount>=0)}handlePossibleChange(e){if(this._state===jm.upToDate&&this._dependencies.has(e)&&!this._dependenciesToBeRemoved.has(e)){this._state=jm.dependenciesMightHaveChanged;for(let e of this._observers)e.handlePossibleChange(this)}}handleChange(e,t){if(this._dependencies.has(e)&&!this._dependenciesToBeRemoved.has(e)||this._isInBeforeUpdate){var i;null===(i=Dm())||void 0===i||i.handleDerivedDependencyChanged(this,e,t);let n=!1;try{n=!this._changeTracker||this._changeTracker.handleChange({changedObservable:e,change:t,didChange:t=>t===e},this._changeSummary)}catch(e){Oi(e)}let s=this._state===jm.upToDate;if(n&&(this._state===jm.dependenciesMightHaveChanged||s)&&(this._state=jm.stale,s))for(let e of this._observers)e.handlePossibleChange(this)}}_ensureReaderValid(){if(!this._isReaderValid)throw new qi("The reader object cannot be used outside its compute function!")}readObservable(e){this._ensureReaderValid(),e.addObserver(this);let t=e.get();return this._dependencies.add(e),this._dependenciesToBeRemoved.delete(e),t}reportChange(e){this._ensureReaderValid(),this._didReportChange=!0;for(let t of this._observers)t.handleChange(this,e)}get store(){return this._ensureReaderValid(),void 0===this._store&&(this._store=new bo),this._store}get delayedStore(){return this._ensureReaderValid(),void 0===this._delayedStore&&(this._delayedStore=new bo),this._delayedStore}addObserver(e){var t;let i=!this._observers.has(e)&&this._updateCount>0;super.addObserver(e),i&&((null===(t=this._removedObserverToCallEndUpdateOn)||void 0===t?void 0:t.delete(e))||e.beginUpdate(this))}removeObserver(e){this._observers.has(e)&&this._updateCount>0&&(this._removedObserverToCallEndUpdateOn||(this._removedObserverToCallEndUpdateOn=new Set),this._removedObserverToCallEndUpdateOn.add(e)),super.removeObserver(e)}debugGetState(){return{state:this._state,stateStr:Zm(this._state),updateCount:this._updateCount,isComputing:this._isComputing,dependencies:this._dependencies,value:this._value}}debugSetValue(e){this._value=e}debugRecompute(){this._isComputing?this._state=jm.stale:this._recompute()}setValue(e,t,i){this._value=e;let n=this._observers;t.updateObserver(this,this);for(let s of n)s.handleChange(this,i)}};function ev(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Im.ofCaller();return void 0===t?new Jm(new Am(void 0,void 0,e),e,void 0,void 0,Qm,i):new Jm(new Am(e,void 0,t),t,void 0,void 0,Qm,i)}function tv(e,t){var i;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Im.ofCaller();return new Jm(new Am(e.owner,e.debugName,e.debugReferenceFn),t,void 0,e.onLastObserverRemoved,null!==(i=e.equalsFn)&&void 0!==i?i:Qm,n)}function iv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Im.ofCaller();return new Ym(new Am(void 0,void 0,e),e,void 0,t)}function nv(e,t){var i;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Im.ofCaller();return new Ym(new Am(e.owner,e.debugName,null!==(i=e.debugReferenceFn)&&void 0!==i?i:t),t,e.changeTracker,n)}function sv(e){let t=Error("BugIndicatingErrorRecovery: "+e);Ri(t),console.error("recovered from an error that indicates a bug",t)}function rv(e,t){let i=new ov(e,t);try{e(i)}finally{i.finish()}}!function(e){Om=e}(tv);var ov=class{constructor(e,t){var i;this._fn=e,this._getDebugName=t,this._updatingObservers=[],null===(i=Dm())||void 0===i||i.handleBeginTransaction(this)}getDebugName(){return this._getDebugName?this._getDebugName():Wm(this._fn)}updateObserver(e,t){if(!this._updatingObservers)return sv("Transaction already finished!"),void rv(i=>{i.updateObserver(e,t)});this._updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){var e;let t=this._updatingObservers;if(t){for(let e=0;e<t.length;e++){let{observer:i,observable:n}=t[e];i.endUpdate(n)}this._updatingObservers=null,null===(e=Dm())||void 0===e||e.handleEndTransaction(this)}else sv("transaction.finish() has already been called!")}debugGetUpdatingObservers(){return this._updatingObservers}};function av(e,t){let i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Im.ofCaller();return i="string"==typeof e?new Am(void 0,e,void 0):new Am(e,void 0,void 0),new lv(i,t,Qm,n)}var lv=class extends qm{get debugName(){var e;return null!==(e=this._debugNameData.getDebugName(this))&&void 0!==e?e:"ObservableValue"}constructor(e,t,i,n){var s;super(n),this._debugNameData=e,this._equalityComparator=i,this._value=t,null===(s=Dm())||void 0===s||s.handleObservableUpdated(this,{hadValue:!1,newValue:t,change:void 0,didChange:!0,oldValue:void 0})}get(){return this._value}set(e,t,i){if(void 0===i&&this._equalityComparator(this._value,e))return;let n;t||(t=n=new ov(()=>{},()=>"Setting ".concat(this.debugName)));try{var s;let n=this._value;this._setValue(e),null===(s=Dm())||void 0===s||s.handleObservableUpdated(this,{oldValue:n,newValue:e,change:i,didChange:!0,hadValue:!0});for(let e of this._observers)t.updateObserver(e,this),e.handleChange(this,i)}finally{n&&n.finish()}}toString(){return"".concat(this.debugName,": ").concat(this._value)}_setValue(e){this._value=e}debugGetState(){return{value:this._value}}debugSetValue(e){this._value=e}};function hv(){let e,t,i,n;for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return 2===r.length?[t,i]=r:[e,t,i,n]=r,new dv(new Am(e,void 0,i),t,i,()=>dv.globalTransaction,Qm,null!==n&&void 0!==n?n:Im.ofCaller())}var dv=class extends qm{constructor(e,t,i,n,s,r){super(r),this._debugNameData=e,this.event=t,this._getValue=i,this._getTransaction=n,this._equalityComparator=s,this._hasValue=!1,this.handleEvent=e=>{var t;let i=this._getValue(e),n=this._value,s=!this._hasValue||!this._equalityComparator(n,i),r=!1;s&&(this._value=i,this._hasValue&&(r=!0,function(e,t,i){e?t(e):rv(t,i)}(this._getTransaction(),e=>{var t;null===(t=Dm())||void 0===t||t.handleObservableUpdated(this,{oldValue:n,newValue:i,change:void 0,didChange:s,hadValue:this._hasValue});for(let i of this._observers)e.updateObserver(i,this),i.handleChange(this,void 0)},()=>{let e=this.getDebugName();return"Event fired"+(e?": ".concat(e):"")})),this._hasValue=!0),r||null===(t=Dm())||void 0===t||t.handleObservableUpdated(this,{oldValue:n,newValue:i,change:void 0,didChange:s,hadValue:this._hasValue})}}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){let e=this.getDebugName();return"From Event"+(e?": ".concat(e):"")}onFirstObserverAdded(){this._subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this._subscription.dispose(),this._subscription=void 0,this._hasValue=!1,this._value=void 0}get(){return this._subscription?(this._hasValue||this.handleEvent(void 0),this._value):this._getValue(void 0)}debugSetValue(e){this._value=e}debugGetState(){return{value:this._value,hasValue:this._hasValue}}};!function(e){e.Observer=dv,e.batchEventsGlobally=function(e,t){let i=!1;void 0===dv.globalTransaction&&(dv.globalTransaction=e,i=!0);try{t()}finally{i&&(dv.globalTransaction=void 0)}}}(hv||(hv={}));var cv=class extends qm{get debugName(){var e;return null!==(e=new Am(this._owner,this._debugName,void 0).getDebugName(this))&&void 0!==e?e:"Observable Signal"}toString(){return this.debugName}constructor(e,t,i){super(i),this._debugName=e,this._owner=t}trigger(e,t){if(e)for(let i of this._observers)e.updateObserver(i,this),i.handleChange(this,t);else rv(e=>{this.trigger(e,t)},()=>"Trigger signal ".concat(this.debugName))}get(){}};!function(e){Mm=e}(function(e){let t=new gv(!1,void 0);return e.addObserver(t),vo(()=>{e.removeObserver(t)})}),function(e){Rm=e}(function(e,t){let i=new gv(!0,t);e.addObserver(i);try{i.beginUpdate(e)}finally{i.endUpdate(e)}return vo(()=>{e.removeObserver(i)})});var uv,gv=class{constructor(e,t){this._forceRecompute=e,this._handleValue=t,this._counter=0}beginUpdate(e){this._counter++}endUpdate(e){1===this._counter&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges()),this._counter--}handlePossibleChange(e){}handleChange(e,t){}};function pv(e){return!!e&&void 0!==e.read&&void 0!==e.reportChanges}var fv=class{constructor(){this.indentation=0,this.changedObservablesSets=new WeakMap}addFilteredObj(e){this._filteredObjects||(this._filteredObjects=new Set),this._filteredObjects.add(e)}_isIncluded(e){var t,i;return null===(t=null===(i=this._filteredObjects)||void 0===i?void 0:i.has(e))||void 0===t||t}textToConsoleArgs(e){return function(e){let t=[],i=[],n="";function s(e){if("length"in e)for(let t of e)t&&s(t);else"text"in e?(n+="%c".concat(e.text),t.push(e.style),e.data&&i.push(...e.data)):"data"in e&&i.push(...e.data)}s(e);let r=[n,...t];return r.push(...i),r}([mv(Cv("|  ",this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[mv(" "),_v(bv(e.oldValue,70),{color:"red",strikeThrough:!0}),mv(" "),_v(bv(e.newValue,60),{color:"green"})]:[mv(" (unchanged)")]:[mv(" "),_v(bv(e.newValue,60),{color:"green"}),mv(" (initial)")]}handleObservableCreated(e){if(e instanceof Jm){let t=e;this.changedObservablesSets.set(t,new Set)}}handleOnListenerCountChanged(e,t){}handleObservableUpdated(e,t){if(this._isIncluded(e)){if(e instanceof Jm)return void this._handleDerivedRecomputed(e,t);console.log(...this.textToConsoleArgs([vv("observable value changed"),_v(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t)]))}}formatChanges(e){if(0!==e.size)return _v(" (changed deps: "+[...e].map(e=>e.debugName).join(", ")+")",{color:"gray"})}handleDerivedDependencyChanged(e,t,i){var n;this._isIncluded(e)&&(null===(n=this.changedObservablesSets.get(e))||void 0===n||n.add(t))}_handleDerivedRecomputed(e,t){var i;if(!this._isIncluded(e))return;let n=this.changedObservablesSets.get(e);n&&(console.log(...this.textToConsoleArgs([vv("derived recomputed"),_v(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t),this.formatChanges(n),{data:[{fn:null!==(i=e._debugNameData.referenceFn)&&void 0!==i?i:e._computeFn}]}])),n.clear())}handleDerivedCleared(e){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([vv("derived cleared"),_v(e.debugName,{color:"BlueViolet"})]))}handleFromEventObservableTriggered(e,t){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([vv("observable from event triggered"),_v(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){this._isIncluded(e)&&this.changedObservablesSets.set(e,new Set)}handleAutorunDisposed(e){}handleAutorunDependencyChanged(e,t,i){this._isIncluded(e)&&this.changedObservablesSets.get(e).add(t)}handleAutorunStarted(e){var t;let i=this.changedObservablesSets.get(e);i&&(this._isIncluded(e)&&console.log(...this.textToConsoleArgs([vv("autorun"),_v(e.debugName,{color:"BlueViolet"}),this.formatChanges(i),{data:[{fn:null!==(t=e._debugNameData.referenceFn)&&void 0!==t?t:e._runFn}]}])),i.clear(),this.indentation++)}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let t=e.getDebugName();void 0===t&&(t=""),this._isIncluded(e)&&console.log(...this.textToConsoleArgs([vv("transaction"),_v(t,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}};function mv(e){return _v(e,{color:"black"})}function vv(e){return _v(function(e,t){for(;e.length<t;)e+=" ";return e}("".concat(e,": "),10),{color:"black",bold:!0})}function _v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{color:"black"};let i={color:t.color};return t.strikeThrough&&(i["text-decoration"]="line-through"),t.bold&&(i["font-weight"]="bold"),{text:e,style:function(e){return Object.entries(e).reduce((e,t)=>{let[i,n]=t;return"".concat(e).concat(i,":").concat(n,";")},"")}(i)}}function bv(e,t){switch(typeof e){case"number":default:return""+e;case"string":return e.length+2<=t?'"'.concat(e,'"'):'"'.concat(e.substr(0,t-7),'"+...');case"boolean":return e?"true":"false";case"undefined":return"undefined";case"object":return null===e?"null":Array.isArray(e)?function(e,t){let i="[ ",n=!0;for(let s of e){if(n||(i+=", "),i.length-5>t){i+="...";break}n=!1,i+="".concat(bv(s,t-i.length))}return i+=" ]",i}(e,t):function(e,t){if("function"==typeof e.toString&&e.toString!==Object.prototype.toString){let i=e.toString();return i.length<=t?i:i.substring(0,t-3)+"..."}let i=Hm(e),n=i?i+"(":"{ ",s=!0;for(let[r,o]of Object.entries(e)){if(s||(n+=", "),n.length-5>t){n+="...";break}s=!1,n+="".concat(r,": ").concat(bv(o,t-n.length))}return n+=i?")":" }",n}(e,t);case"symbol":return e.toString();case"function":return"[[Function".concat(e.name?" "+e.name:"","]]")}}function Cv(e,t){let i="";for(let n=1;n<=t;n++)i+=e;return i}var yv=class e{static createHost(t,i){return new e(t,i)}static createClient(t,i){return new e(t,i)}constructor(e,t){var i=this;this._channelFactory=e,this._getHandler=t,this._channel=this._channelFactory({handleNotification:e=>{let t=e,i=this._getHandler().notifications[t[0]];if(!i)throw Error('Unknown notification "'.concat(t[0],'"!'));i(...t[1])},handleRequest:e=>{let t=e;try{return{type:"result",value:this._getHandler().requests[t[0]](...t[1])}}catch(e){return{type:"error",value:e}}}});let n=new Proxy({},{get:(e,t)=>async function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];let r=await i._channel.sendRequest([t,n]);if("error"===r.type)throw r.value;return r.value}});this.api={notifications:new Proxy({},{get:(e,t)=>function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];i._channel.sendNotification([t,n])}}),requests:n}}};function wv(e,t){var i;let n,s,r=globalThis,o=[],{channel:a,handler:l}=function(e){let t;return{channel:i=>(t=i,{sendNotification:t=>{e.sendNotification(t)},sendRequest:e=>{throw Error("not supported")}}),handler:{handleRequest:e=>{var i,n;return"notification"===e.type?null===(i=t)||void 0===i?void 0:i.handleNotification(e.data):null===(n=t)||void 0===n?void 0:n.handleRequest(e.data)}}}}({sendNotification:e=>{n?n.sendNotification(e):o.push(e)}});return(null!==(i=r.$$debugValueEditor_debugChannels)&&void 0!==i?i:r.$$debugValueEditor_debugChannels={})[e]=e=>{s=t(),n=e;for(let t of o)e.sendNotification(t);return o=[],l},yv.createClient(a,()=>{if(!s)throw Error("Not supported");return s})}var Sv=class{constructor(){this._timeout=void 0}throttle(e,t){void 0===this._timeout&&(this._timeout=setTimeout(()=>{this._timeout=void 0,e()},t))}dispose(){void 0!==this._timeout&&clearTimeout(this._timeout)}};function kv(e,t){for(let i in t)e[i]&&"object"==typeof e[i]&&t[i]&&"object"==typeof t[i]?kv(e[i],t[i]):e[i]=t[i]}function Ev(e,t){for(let i in t)null===t[i]?delete e[i]:e[i]&&"object"==typeof e[i]&&t[i]&&"object"==typeof t[i]?Ev(e[i],t[i]):e[i]=t[i]}var Dv=(Ne=class e{static getInstance(){return void 0===e._instance&&(e._instance=new e),e._instance}getTransactionState(){let e=[],t=[...this._activeTransactions];if(0===t.length)return;let i=t.flatMap(e=>{var t;return null!==(t=e.debugGetUpdatingObservers())&&void 0!==t?t:[]}).map(e=>e.observer),n=new Set;for(;i.length>0;){let t=i.shift();if(n.has(t))continue;n.add(t);let s=this._getInfo(t,e=>{n.has(e)||i.push(e)});s&&e.push(s)}return{names:t.map(e=>{var t;return null!==(t=e.getDebugName())&&void 0!==t?t:"tx"}),affected:e}}_getObservableInfo(e){let t=this._instanceInfos.get(e);if(t)return t;Ri(new qi("No info found"))}_getAutorunInfo(e){let t=this._instanceInfos.get(e);if(t)return t;Ri(new qi("No info found"))}_getInfo(e,t){if(e instanceof Jm){let i=[...e.debugGetObservers()];for(let e of i)t(e);let n=this._getObservableInfo(e);if(!n)return;let s=e.debugGetState(),o={name:e.debugName,instanceId:n.instanceId,updateCount:s.updateCount},a=[...n.changedObservables].map(e=>{var t;return null===(t=this._instanceInfos.get(e))||void 0===t?void 0:t.instanceId}).filter(sn);if(s.isComputing)return(0,r.A)((0,r.A)({},o),{},{type:"observable/derived",state:"updating",changedDependencies:a,initialComputation:!1});switch(s.state){case jm.initial:return(0,r.A)((0,r.A)({},o),{},{type:"observable/derived",state:"noValue"});case jm.upToDate:return(0,r.A)((0,r.A)({},o),{},{type:"observable/derived",state:"upToDate"});case jm.stale:return(0,r.A)((0,r.A)({},o),{},{type:"observable/derived",state:"stale",changedDependencies:a});case jm.dependenciesMightHaveChanged:return(0,r.A)((0,r.A)({},o),{},{type:"observable/derived",state:"possiblyStale"})}}else if(e instanceof Ym){let t=this._getAutorunInfo(e);if(!t)return;let i={name:e.debugName,instanceId:t.instanceId,updateCount:t.updateCount},n=[...t.changedObservables].map(e=>this._instanceInfos.get(e).instanceId);if(e.debugGetState().isRunning)return(0,r.A)((0,r.A)({},i),{},{type:"autorun",state:"updating",changedDependencies:n});switch(e.debugGetState().state){case Vm.upToDate:return(0,r.A)((0,r.A)({},i),{},{type:"autorun",state:"upToDate"});case Vm.stale:return(0,r.A)((0,r.A)({},i),{},{type:"autorun",state:"stale",changedDependencies:n});case Vm.dependenciesMightHaveChanged:return(0,r.A)((0,r.A)({},i),{},{type:"autorun",state:"possiblyStale"})}}}_formatObservable(e){let t=this._getObservableInfo(e);if(t)return{name:e.debugName,instanceId:t.instanceId}}_formatObserver(e){var t;if(e instanceof Jm)return{name:e.toString(),instanceId:null===(t=this._getObservableInfo(e))||void 0===t?void 0:t.instanceId};let i=this._getAutorunInfo(e);return i?{name:e.toString(),instanceId:i.instanceId}:void 0}constructor(){this._declarationId=0,this._instanceId=0,this._declarations=new Map,this._instanceInfos=new WeakMap,this._aliveInstances=new Map,this._activeTransactions=new Set,this._channel=wv("observableDevTools",()=>({notifications:{setDeclarationIdFilter:e=>{},logObservableValue:e=>{console.log("logObservableValue",e)},flushUpdates:()=>{this._flushUpdates()},resetUpdates:()=>{this._pendingChanges=null,this._channel.api.notifications.handleChange(this._fullState,!0)}},requests:{getDeclarations:()=>{let e={};for(let t of this._declarations.values())e[t.id]=t;return{decls:e}},getSummarizedInstances:()=>null,getObservableValueInfo:e=>({observers:[...this._aliveInstances.get(e).debugGetObservers()].map(e=>this._formatObserver(e)).filter(sn)}),getDerivedInfo:e=>{let t=this._aliveInstances.get(e);return{dependencies:[...t.debugGetState().dependencies].map(e=>this._formatObservable(e)).filter(sn),observers:[...t.debugGetObservers()].map(e=>this._formatObserver(e)).filter(sn)}},getAutorunInfo:e=>({dependencies:[...this._aliveInstances.get(e).debugGetState().dependencies].map(e=>this._formatObservable(e)).filter(sn)}),getTransactionState:()=>this.getTransactionState(),setValue:(e,t)=>{let i=this._aliveInstances.get(e);if(i instanceof Jm)i.debugSetValue(t);else if(i instanceof lv)i.debugSetValue(t);else{if(!(i instanceof dv))throw new qi("Observable is not supported");i.debugSetValue(t)}let n=[...i.debugGetObservers()];for(let s of n)s.beginUpdate(i);for(let s of n)s.handleChange(i,void 0);for(let s of n)s.endUpdate(i)},getValue:e=>{let t=this._aliveInstances.get(e);if(t instanceof Jm||t instanceof lv)return bv(t.debugGetState().value,200)},logValue:e=>{let t=this._aliveInstances.get(e);if(!t||!("get"in t))throw new qi("Observable is not supported");console.log("Logged Value:",t.get())},rerun:e=>{let t=this._aliveInstances.get(e);if(t instanceof Jm)t.debugRecompute();else{if(!(t instanceof Ym))throw new qi("Observable is not supported");t.debugRerun()}}}})),this._pendingChanges=null,this._changeThrottler=new Sv,this._fullState={},this._flushUpdates=()=>{null!==this._pendingChanges&&(this._channel.api.notifications.handleChange(this._pendingChanges,!1),this._pendingChanges=null)},Im.enable()}_handleChange(e){Ev(this._fullState,e),null===this._pendingChanges?this._pendingChanges=e:kv(this._pendingChanges,e),this._changeThrottler.throttle(this._flushUpdates,10)}_getDeclarationId(e,t){if(!t)return-1;let i=this._declarations.get(t.id);return void 0===i&&(i={id:this._declarationId++,type:e,url:t.fileName,line:t.line,column:t.column},this._declarations.set(t.id,i),this._handleChange({decls:{[i.id]:i}})),i.id}handleObservableCreated(e,t){let i={declarationId:this._getDeclarationId("observable/value",t),instanceId:this._instanceId++,listenerCount:0,lastValue:void 0,updateCount:0,changedObservables:new Set};this._instanceInfos.set(e,i)}handleOnListenerCountChanged(e,t){let i=this._getObservableInfo(e);if(i){if(0===i.listenerCount&&t>0){let t=e instanceof Jm?"observable/derived":"observable/value";this._aliveInstances.set(i.instanceId,e),this._handleChange({instances:{[i.instanceId]:{instanceId:i.instanceId,declarationId:i.declarationId,formattedValue:i.lastValue,type:t,name:e.debugName}}})}else i.listenerCount>0&&0===t&&(this._handleChange({instances:{[i.instanceId]:null}}),this._aliveInstances.delete(i.instanceId));i.listenerCount=t}}handleObservableUpdated(e,t){if(e instanceof Jm)return void this._handleDerivedRecomputed(e,t);let i=this._getObservableInfo(e);i&&t.didChange&&(i.lastValue=bv(t.newValue,30),i.listenerCount>0&&this._handleChange({instances:{[i.instanceId]:{formattedValue:i.lastValue}}}))}handleAutorunCreated(e,t){let i={declarationId:this._getDeclarationId("autorun",t),instanceId:this._instanceId++,updateCount:0,changedObservables:new Set};this._instanceInfos.set(e,i),this._aliveInstances.set(i.instanceId,e),i&&this._handleChange({instances:{[i.instanceId]:{instanceId:i.instanceId,declarationId:i.declarationId,runCount:0,type:"autorun",name:e.debugName}}})}handleAutorunDisposed(e){let t=this._getAutorunInfo(e);t&&(this._handleChange({instances:{[t.instanceId]:null}}),this._instanceInfos.delete(e),this._aliveInstances.delete(t.instanceId))}handleAutorunDependencyChanged(e,t,i){let n=this._getAutorunInfo(e);n&&n.changedObservables.add(t)}handleAutorunStarted(e){}handleAutorunFinished(e){let t=this._getAutorunInfo(e);t&&(t.changedObservables.clear(),t.updateCount++,this._handleChange({instances:{[t.instanceId]:{runCount:t.updateCount}}}))}handleDerivedDependencyChanged(e,t,i){let n=this._getObservableInfo(e);n&&n.changedObservables.add(t)}_handleDerivedRecomputed(e,t){let i=this._getObservableInfo(e);if(!i)return;let n=bv(t.newValue,30);i.updateCount++,i.changedObservables.clear(),i.lastValue=n,i.listenerCount>0&&this._handleChange({instances:{[i.instanceId]:{formattedValue:n,recomputationCount:i.updateCount}}})}handleDerivedCleared(e){let t=this._getObservableInfo(e);t&&(t.lastValue=void 0,t.changedObservables.clear(),t.listenerCount>0&&this._handleChange({instances:{[t.instanceId]:{formattedValue:void 0}}}))}handleBeginTransaction(e){this._activeTransactions.add(e)}handleEndTransaction(e){this._activeTransactions.delete(e)}},{_:Ne._instance=void 0},Ne);function Tv(e,t,i,n){let s="\t\t".repeat(t),r=[];if(i.has(e.sourceObj))return r.push("".concat(s,"* ").concat(e.type," ").concat(e.name," (already listed)")),r.join("\n");if(i.add(e.sourceObj),r.push("".concat(s,"* ").concat(e.type," ").concat(e.name,":")),r.push("".concat(s,"  value: ").concat(bv(e.value,50))),r.push("".concat(s,"  state: ").concat(e.state)),e.dependencies.length>0){r.push("".concat(s,"  dependencies:"));for(let s of e.dependencies){var o,a;let e=null!==(o=xv.from(s,null!==(a=n.debugNamePostProcessor)&&void 0!==a?a:e=>e))&&void 0!==o?o:xv.unknown(s);r.push(Tv(e,t+1,i,n))}}return r.join("\n")}function Iv(e,t,i,n){let s="\t\t".repeat(t),r=[];if(i.has(e.sourceObj))return r.push("".concat(s,"* ").concat(e.type," ").concat(e.name," (already listed)")),r.join("\n");if(i.add(e.sourceObj),r.push("".concat(s,"* ").concat(e.type," ").concat(e.name,":")),r.push("".concat(s,"  value: ").concat(bv(e.value,50))),r.push("".concat(s,"  state: ").concat(e.state)),e.observers.length>0){r.push("".concat(s,"  observers:"));for(let s of e.observers){var o,a;let e=null!==(o=xv.from(s,null!==(a=n.debugNamePostProcessor)&&void 0!==a?a:e=>e))&&void 0!==o?o:xv.unknown(s);r.push(Iv(e,t+1,i,n))}}return r.join("\n")}var xv=class e{static from(t,i){if(t instanceof Ym){let n=t.debugGetState();return new e(t,i(t.debugName),"autorun",void 0,n.stateStr,Array.from(n.dependencies),[])}if(t instanceof Jm){let n=t.debugGetState();return new e(t,i(t.debugName),"derived",n.value,n.stateStr,Array.from(n.dependencies),Array.from(t.debugGetObservers()))}if(t instanceof lv){let n=t.debugGetState();return new e(t,i(t.debugName),"observableValue",n.value,"upToDate",[],Array.from(t.debugGetObservers()))}if(t instanceof dv){let n=t.debugGetState();return new e(t,i(t.debugName),"fromEvent",n.value,n.hasValue?"upToDate":"initial",[],Array.from(t.debugGetObservers()))}}static unknown(t){return new e(t,"(unknown)","unknown",void 0,"unknown",[],[])}constructor(e,t,i,n,s,r,o){this.sourceObj=e,this.name=t,this.type=i,this.value=n,this.state=s,this.dependencies=r,this.observers=o}};(function(e){Pm=e})(function(e,t){var i;let n=null!==(i=null===t||void 0===t?void 0:t.debugNamePostProcessor)&&void 0!==i?i:e=>e,s=xv.from(e,n);if(!s)return"";let r=new Set;return"observers"===t.type?Iv(s,0,r,t).trim():Tv(s,0,r,t).trim()}),function(e){Tm=e}(function(e){uv||Em(uv=new fv),uv.addFilteredObj(e)}),ps&&ps.VSCODE_DEV_DEBUG_OBSERVABLES&&Em(Dv.getInstance());var Lv=null!==(Fe=window.vscodeWindow)&&void 0!==Fe?Fe:window,Av=(Oe=class{constructor(){this.mapWindowIdToZoomLevel=new Map,this._onDidChangeZoomLevel=new Ro,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this.mapWindowIdToZoomFactor=new Map,this._onDidChangeFullscreen=new Ro,this.onDidChangeFullscreen=this._onDidChangeFullscreen.event,this.mapWindowIdToFullScreen=new Map}getZoomLevel(e){var t;return null!==(t=this.mapWindowIdToZoomLevel.get(this.getWindowId(e)))&&void 0!==t?t:0}setZoomLevel(e,t){if(this.getZoomLevel(t)===e)return;let i=this.getWindowId(t);this.mapWindowIdToZoomLevel.set(i,e),this._onDidChangeZoomLevel.fire(i)}getZoomFactor(e){var t;return null!==(t=this.mapWindowIdToZoomFactor.get(this.getWindowId(e)))&&void 0!==t?t:1}setZoomFactor(e,t){this.mapWindowIdToZoomFactor.set(this.getWindowId(t),e)}setFullscreen(e,t){if(this.isFullscreen(t)===e)return;let i=this.getWindowId(t);this.mapWindowIdToFullScreen.set(i,e),this._onDidChangeFullscreen.fire(i)}isFullscreen(e){return!!this.mapWindowIdToFullScreen.get(this.getWindowId(e))}getWindowId(e){return e.vscodeWindowId}},{_:Oe.INSTANCE=new Oe},Oe);function Nv(e,t,i){"string"==typeof t&&(t=e.matchMedia(t)),t.addEventListener("change",i)}function Fv(e){return Av.INSTANCE.getZoomFactor(e)}var Ov=Av.INSTANCE.onDidChangeFullscreen,Rv=Lv.navigator.userAgent,Mv=Rv.indexOf("Firefox")>=0,Pv=Rv.indexOf("AppleWebKit")>=0,Bv=Rv.indexOf("Chrome")>=0,Uv=!Bv&&Rv.indexOf("Safari")>=0,Hv=!Bv&&!Uv&&Pv;Rv.indexOf("Electron/"),Rv.indexOf("Android");var Wv,Vv=!1;if("function"==typeof Lv.matchMedia){let e=Lv.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),t=Lv.matchMedia("(display-mode: fullscreen)");Vv=e.matches,Nv(Lv,e,e=>{let{matches:i}=e;Vv&&t.matches||(Vv=i)})}function zv(){return globalThis.MonacoEnvironment}!function(e){e[e.Always=0]="Always",e[e.FullScreen=1]="FullScreen",e[e.None=2]="None"}(Wv||(Wv={}));jn||Lv.document.queryCommandSupported&&Lv.document.queryCommandSupported("copy")||Lv.navigator&&Lv.navigator.clipboard&&Lv.navigator.clipboard.writeText,jn||Lv.navigator&&Lv.navigator.clipboard&&Lv.navigator.clipboard.readText,jn||Vv?Wv.Always:Lv.navigator.keyboard||Uv?Wv.FullScreen:Wv.None;var Kv,qv,Gv=Lv.PointerEvent&&("ontouchstart"in Lv||Lv.navigator.maxTouchPoints>0);!function(e){e[e.DependsOnKbLayout=-1]="DependsOnKbLayout",e[e.Unknown=0]="Unknown",e[e.Backspace=1]="Backspace",e[e.Tab=2]="Tab",e[e.Enter=3]="Enter",e[e.Shift=4]="Shift",e[e.Ctrl=5]="Ctrl",e[e.Alt=6]="Alt",e[e.PauseBreak=7]="PauseBreak",e[e.CapsLock=8]="CapsLock",e[e.Escape=9]="Escape",e[e.Space=10]="Space",e[e.PageUp=11]="PageUp",e[e.PageDown=12]="PageDown",e[e.End=13]="End",e[e.Home=14]="Home",e[e.LeftArrow=15]="LeftArrow",e[e.UpArrow=16]="UpArrow",e[e.RightArrow=17]="RightArrow",e[e.DownArrow=18]="DownArrow",e[e.Insert=19]="Insert",e[e.Delete=20]="Delete",e[e.Digit0=21]="Digit0",e[e.Digit1=22]="Digit1",e[e.Digit2=23]="Digit2",e[e.Digit3=24]="Digit3",e[e.Digit4=25]="Digit4",e[e.Digit5=26]="Digit5",e[e.Digit6=27]="Digit6",e[e.Digit7=28]="Digit7",e[e.Digit8=29]="Digit8",e[e.Digit9=30]="Digit9",e[e.KeyA=31]="KeyA",e[e.KeyB=32]="KeyB",e[e.KeyC=33]="KeyC",e[e.KeyD=34]="KeyD",e[e.KeyE=35]="KeyE",e[e.KeyF=36]="KeyF",e[e.KeyG=37]="KeyG",e[e.KeyH=38]="KeyH",e[e.KeyI=39]="KeyI",e[e.KeyJ=40]="KeyJ",e[e.KeyK=41]="KeyK",e[e.KeyL=42]="KeyL",e[e.KeyM=43]="KeyM",e[e.KeyN=44]="KeyN",e[e.KeyO=45]="KeyO",e[e.KeyP=46]="KeyP",e[e.KeyQ=47]="KeyQ",e[e.KeyR=48]="KeyR",e[e.KeyS=49]="KeyS",e[e.KeyT=50]="KeyT",e[e.KeyU=51]="KeyU",e[e.KeyV=52]="KeyV",e[e.KeyW=53]="KeyW",e[e.KeyX=54]="KeyX",e[e.KeyY=55]="KeyY",e[e.KeyZ=56]="KeyZ",e[e.Meta=57]="Meta",e[e.ContextMenu=58]="ContextMenu",e[e.F1=59]="F1",e[e.F2=60]="F2",e[e.F3=61]="F3",e[e.F4=62]="F4",e[e.F5=63]="F5",e[e.F6=64]="F6",e[e.F7=65]="F7",e[e.F8=66]="F8",e[e.F9=67]="F9",e[e.F10=68]="F10",e[e.F11=69]="F11",e[e.F12=70]="F12",e[e.F13=71]="F13",e[e.F14=72]="F14",e[e.F15=73]="F15",e[e.F16=74]="F16",e[e.F17=75]="F17",e[e.F18=76]="F18",e[e.F19=77]="F19",e[e.F20=78]="F20",e[e.F21=79]="F21",e[e.F22=80]="F22",e[e.F23=81]="F23",e[e.F24=82]="F24",e[e.NumLock=83]="NumLock",e[e.ScrollLock=84]="ScrollLock",e[e.Semicolon=85]="Semicolon",e[e.Equal=86]="Equal",e[e.Comma=87]="Comma",e[e.Minus=88]="Minus",e[e.Period=89]="Period",e[e.Slash=90]="Slash",e[e.Backquote=91]="Backquote",e[e.BracketLeft=92]="BracketLeft",e[e.Backslash=93]="Backslash",e[e.BracketRight=94]="BracketRight",e[e.Quote=95]="Quote",e[e.OEM_8=96]="OEM_8",e[e.IntlBackslash=97]="IntlBackslash",e[e.Numpad0=98]="Numpad0",e[e.Numpad1=99]="Numpad1",e[e.Numpad2=100]="Numpad2",e[e.Numpad3=101]="Numpad3",e[e.Numpad4=102]="Numpad4",e[e.Numpad5=103]="Numpad5",e[e.Numpad6=104]="Numpad6",e[e.Numpad7=105]="Numpad7",e[e.Numpad8=106]="Numpad8",e[e.Numpad9=107]="Numpad9",e[e.NumpadMultiply=108]="NumpadMultiply",e[e.NumpadAdd=109]="NumpadAdd",e[e.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",e[e.NumpadSubtract=111]="NumpadSubtract",e[e.NumpadDecimal=112]="NumpadDecimal",e[e.NumpadDivide=113]="NumpadDivide",e[e.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",e[e.ABNT_C1=115]="ABNT_C1",e[e.ABNT_C2=116]="ABNT_C2",e[e.AudioVolumeMute=117]="AudioVolumeMute",e[e.AudioVolumeUp=118]="AudioVolumeUp",e[e.AudioVolumeDown=119]="AudioVolumeDown",e[e.BrowserSearch=120]="BrowserSearch",e[e.BrowserHome=121]="BrowserHome",e[e.BrowserBack=122]="BrowserBack",e[e.BrowserForward=123]="BrowserForward",e[e.MediaTrackNext=124]="MediaTrackNext",e[e.MediaTrackPrevious=125]="MediaTrackPrevious",e[e.MediaStop=126]="MediaStop",e[e.MediaPlayPause=127]="MediaPlayPause",e[e.LaunchMediaPlayer=128]="LaunchMediaPlayer",e[e.LaunchMail=129]="LaunchMail",e[e.LaunchApp2=130]="LaunchApp2",e[e.Clear=131]="Clear",e[e.MAX_VALUE=132]="MAX_VALUE"}(Kv||(Kv={})),function(e){e[e.DependsOnKbLayout=-1]="DependsOnKbLayout",e[e.None=0]="None",e[e.Hyper=1]="Hyper",e[e.Super=2]="Super",e[e.Fn=3]="Fn",e[e.FnLock=4]="FnLock",e[e.Suspend=5]="Suspend",e[e.Resume=6]="Resume",e[e.Turbo=7]="Turbo",e[e.Sleep=8]="Sleep",e[e.WakeUp=9]="WakeUp",e[e.KeyA=10]="KeyA",e[e.KeyB=11]="KeyB",e[e.KeyC=12]="KeyC",e[e.KeyD=13]="KeyD",e[e.KeyE=14]="KeyE",e[e.KeyF=15]="KeyF",e[e.KeyG=16]="KeyG",e[e.KeyH=17]="KeyH",e[e.KeyI=18]="KeyI",e[e.KeyJ=19]="KeyJ",e[e.KeyK=20]="KeyK",e[e.KeyL=21]="KeyL",e[e.KeyM=22]="KeyM",e[e.KeyN=23]="KeyN",e[e.KeyO=24]="KeyO",e[e.KeyP=25]="KeyP",e[e.KeyQ=26]="KeyQ",e[e.KeyR=27]="KeyR",e[e.KeyS=28]="KeyS",e[e.KeyT=29]="KeyT",e[e.KeyU=30]="KeyU",e[e.KeyV=31]="KeyV",e[e.KeyW=32]="KeyW",e[e.KeyX=33]="KeyX",e[e.KeyY=34]="KeyY",e[e.KeyZ=35]="KeyZ",e[e.Digit1=36]="Digit1",e[e.Digit2=37]="Digit2",e[e.Digit3=38]="Digit3",e[e.Digit4=39]="Digit4",e[e.Digit5=40]="Digit5",e[e.Digit6=41]="Digit6",e[e.Digit7=42]="Digit7",e[e.Digit8=43]="Digit8",e[e.Digit9=44]="Digit9",e[e.Digit0=45]="Digit0",e[e.Enter=46]="Enter",e[e.Escape=47]="Escape",e[e.Backspace=48]="Backspace",e[e.Tab=49]="Tab",e[e.Space=50]="Space",e[e.Minus=51]="Minus",e[e.Equal=52]="Equal",e[e.BracketLeft=53]="BracketLeft",e[e.BracketRight=54]="BracketRight",e[e.Backslash=55]="Backslash",e[e.IntlHash=56]="IntlHash",e[e.Semicolon=57]="Semicolon",e[e.Quote=58]="Quote",e[e.Backquote=59]="Backquote",e[e.Comma=60]="Comma",e[e.Period=61]="Period",e[e.Slash=62]="Slash",e[e.CapsLock=63]="CapsLock",e[e.F1=64]="F1",e[e.F2=65]="F2",e[e.F3=66]="F3",e[e.F4=67]="F4",e[e.F5=68]="F5",e[e.F6=69]="F6",e[e.F7=70]="F7",e[e.F8=71]="F8",e[e.F9=72]="F9",e[e.F10=73]="F10",e[e.F11=74]="F11",e[e.F12=75]="F12",e[e.PrintScreen=76]="PrintScreen",e[e.ScrollLock=77]="ScrollLock",e[e.Pause=78]="Pause",e[e.Insert=79]="Insert",e[e.Home=80]="Home",e[e.PageUp=81]="PageUp",e[e.Delete=82]="Delete",e[e.End=83]="End",e[e.PageDown=84]="PageDown",e[e.ArrowRight=85]="ArrowRight",e[e.ArrowLeft=86]="ArrowLeft",e[e.ArrowDown=87]="ArrowDown",e[e.ArrowUp=88]="ArrowUp",e[e.NumLock=89]="NumLock",e[e.NumpadDivide=90]="NumpadDivide",e[e.NumpadMultiply=91]="NumpadMultiply",e[e.NumpadSubtract=92]="NumpadSubtract",e[e.NumpadAdd=93]="NumpadAdd",e[e.NumpadEnter=94]="NumpadEnter",e[e.Numpad1=95]="Numpad1",e[e.Numpad2=96]="Numpad2",e[e.Numpad3=97]="Numpad3",e[e.Numpad4=98]="Numpad4",e[e.Numpad5=99]="Numpad5",e[e.Numpad6=100]="Numpad6",e[e.Numpad7=101]="Numpad7",e[e.Numpad8=102]="Numpad8",e[e.Numpad9=103]="Numpad9",e[e.Numpad0=104]="Numpad0",e[e.NumpadDecimal=105]="NumpadDecimal",e[e.IntlBackslash=106]="IntlBackslash",e[e.ContextMenu=107]="ContextMenu",e[e.Power=108]="Power",e[e.NumpadEqual=109]="NumpadEqual",e[e.F13=110]="F13",e[e.F14=111]="F14",e[e.F15=112]="F15",e[e.F16=113]="F16",e[e.F17=114]="F17",e[e.F18=115]="F18",e[e.F19=116]="F19",e[e.F20=117]="F20",e[e.F21=118]="F21",e[e.F22=119]="F22",e[e.F23=120]="F23",e[e.F24=121]="F24",e[e.Open=122]="Open",e[e.Help=123]="Help",e[e.Select=124]="Select",e[e.Again=125]="Again",e[e.Undo=126]="Undo",e[e.Cut=127]="Cut",e[e.Copy=128]="Copy",e[e.Paste=129]="Paste",e[e.Find=130]="Find",e[e.AudioVolumeMute=131]="AudioVolumeMute",e[e.AudioVolumeUp=132]="AudioVolumeUp",e[e.AudioVolumeDown=133]="AudioVolumeDown",e[e.NumpadComma=134]="NumpadComma",e[e.IntlRo=135]="IntlRo",e[e.KanaMode=136]="KanaMode",e[e.IntlYen=137]="IntlYen",e[e.Convert=138]="Convert",e[e.NonConvert=139]="NonConvert",e[e.Lang1=140]="Lang1",e[e.Lang2=141]="Lang2",e[e.Lang3=142]="Lang3",e[e.Lang4=143]="Lang4",e[e.Lang5=144]="Lang5",e[e.Abort=145]="Abort",e[e.Props=146]="Props",e[e.NumpadParenLeft=147]="NumpadParenLeft",e[e.NumpadParenRight=148]="NumpadParenRight",e[e.NumpadBackspace=149]="NumpadBackspace",e[e.NumpadMemoryStore=150]="NumpadMemoryStore",e[e.NumpadMemoryRecall=151]="NumpadMemoryRecall",e[e.NumpadMemoryClear=152]="NumpadMemoryClear",e[e.NumpadMemoryAdd=153]="NumpadMemoryAdd",e[e.NumpadMemorySubtract=154]="NumpadMemorySubtract",e[e.NumpadClear=155]="NumpadClear",e[e.NumpadClearEntry=156]="NumpadClearEntry",e[e.ControlLeft=157]="ControlLeft",e[e.ShiftLeft=158]="ShiftLeft",e[e.AltLeft=159]="AltLeft",e[e.MetaLeft=160]="MetaLeft",e[e.ControlRight=161]="ControlRight",e[e.ShiftRight=162]="ShiftRight",e[e.AltRight=163]="AltRight",e[e.MetaRight=164]="MetaRight",e[e.BrightnessUp=165]="BrightnessUp",e[e.BrightnessDown=166]="BrightnessDown",e[e.MediaPlay=167]="MediaPlay",e[e.MediaRecord=168]="MediaRecord",e[e.MediaFastForward=169]="MediaFastForward",e[e.MediaRewind=170]="MediaRewind",e[e.MediaTrackNext=171]="MediaTrackNext",e[e.MediaTrackPrevious=172]="MediaTrackPrevious",e[e.MediaStop=173]="MediaStop",e[e.Eject=174]="Eject",e[e.MediaPlayPause=175]="MediaPlayPause",e[e.MediaSelect=176]="MediaSelect",e[e.LaunchMail=177]="LaunchMail",e[e.LaunchApp2=178]="LaunchApp2",e[e.LaunchApp1=179]="LaunchApp1",e[e.SelectTask=180]="SelectTask",e[e.LaunchScreenSaver=181]="LaunchScreenSaver",e[e.BrowserSearch=182]="BrowserSearch",e[e.BrowserHome=183]="BrowserHome",e[e.BrowserBack=184]="BrowserBack",e[e.BrowserForward=185]="BrowserForward",e[e.BrowserStop=186]="BrowserStop",e[e.BrowserRefresh=187]="BrowserRefresh",e[e.BrowserFavorites=188]="BrowserFavorites",e[e.ZoomToggle=189]="ZoomToggle",e[e.MailReply=190]="MailReply",e[e.MailForward=191]="MailForward",e[e.MailSend=192]="MailSend",e[e.MAX_VALUE=193]="MAX_VALUE"}(qv||(qv={}));var jv,Yv,Qv,$v=class{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||Kv.Unknown}},Xv=new $v,Zv=new $v,Jv=new $v,e_=Array(230),t_={},i_=[],n_=Object.create(null),s_=Object.create(null),r_=[],o_=[];for(let M$=0;M$<=qv.MAX_VALUE;M$++)r_[M$]=Kv.DependsOnKbLayout;for(let M$=0;M$<=Kv.MAX_VALUE;M$++)o_[M$]=qv.DependsOnKbLayout;function a_(e,t){return(e|(65535&t)<<16>>>0)>>>0}function l_(e){return e===Kv.Ctrl||e===Kv.Shift||e===Kv.Alt||e===Kv.Meta}function h_(e,t){if("number"==typeof e){if(0===e)return null;let i=(65535&e)>>>0,n=(4294901760&e)>>>16;return new u_(0===n?[d_(i,t)]:[d_(i,t),d_(n,t)])}{let i=[];for(let n=0;n<e.length;n++)i.push(d_(e[n],t));return new u_(i)}}function d_(e,t){let i=!!(e&Qv.CtrlCmd),n=!!(e&Qv.WinCtrl);return new c_(t===ts.Macintosh?n:i,!!(e&Qv.Shift),!!(e&Qv.Alt),t===ts.Macintosh?i:n,e&Qv.KeyCode)}!function(){let e=[[1,qv.None,"None",Kv.Unknown,"unknown",0,"VK_UNKNOWN","",""],[1,qv.Hyper,"Hyper",Kv.Unknown,"",0,"","",""],[1,qv.Super,"Super",Kv.Unknown,"",0,"","",""],[1,qv.Fn,"Fn",Kv.Unknown,"",0,"","",""],[1,qv.FnLock,"FnLock",Kv.Unknown,"",0,"","",""],[1,qv.Suspend,"Suspend",Kv.Unknown,"",0,"","",""],[1,qv.Resume,"Resume",Kv.Unknown,"",0,"","",""],[1,qv.Turbo,"Turbo",Kv.Unknown,"",0,"","",""],[1,qv.Sleep,"Sleep",Kv.Unknown,"",0,"VK_SLEEP","",""],[1,qv.WakeUp,"WakeUp",Kv.Unknown,"",0,"","",""],[0,qv.KeyA,"KeyA",Kv.KeyA,"A",65,"VK_A","",""],[0,qv.KeyB,"KeyB",Kv.KeyB,"B",66,"VK_B","",""],[0,qv.KeyC,"KeyC",Kv.KeyC,"C",67,"VK_C","",""],[0,qv.KeyD,"KeyD",Kv.KeyD,"D",68,"VK_D","",""],[0,qv.KeyE,"KeyE",Kv.KeyE,"E",69,"VK_E","",""],[0,qv.KeyF,"KeyF",Kv.KeyF,"F",70,"VK_F","",""],[0,qv.KeyG,"KeyG",Kv.KeyG,"G",71,"VK_G","",""],[0,qv.KeyH,"KeyH",Kv.KeyH,"H",72,"VK_H","",""],[0,qv.KeyI,"KeyI",Kv.KeyI,"I",73,"VK_I","",""],[0,qv.KeyJ,"KeyJ",Kv.KeyJ,"J",74,"VK_J","",""],[0,qv.KeyK,"KeyK",Kv.KeyK,"K",75,"VK_K","",""],[0,qv.KeyL,"KeyL",Kv.KeyL,"L",76,"VK_L","",""],[0,qv.KeyM,"KeyM",Kv.KeyM,"M",77,"VK_M","",""],[0,qv.KeyN,"KeyN",Kv.KeyN,"N",78,"VK_N","",""],[0,qv.KeyO,"KeyO",Kv.KeyO,"O",79,"VK_O","",""],[0,qv.KeyP,"KeyP",Kv.KeyP,"P",80,"VK_P","",""],[0,qv.KeyQ,"KeyQ",Kv.KeyQ,"Q",81,"VK_Q","",""],[0,qv.KeyR,"KeyR",Kv.KeyR,"R",82,"VK_R","",""],[0,qv.KeyS,"KeyS",Kv.KeyS,"S",83,"VK_S","",""],[0,qv.KeyT,"KeyT",Kv.KeyT,"T",84,"VK_T","",""],[0,qv.KeyU,"KeyU",Kv.KeyU,"U",85,"VK_U","",""],[0,qv.KeyV,"KeyV",Kv.KeyV,"V",86,"VK_V","",""],[0,qv.KeyW,"KeyW",Kv.KeyW,"W",87,"VK_W","",""],[0,qv.KeyX,"KeyX",Kv.KeyX,"X",88,"VK_X","",""],[0,qv.KeyY,"KeyY",Kv.KeyY,"Y",89,"VK_Y","",""],[0,qv.KeyZ,"KeyZ",Kv.KeyZ,"Z",90,"VK_Z","",""],[0,qv.Digit1,"Digit1",Kv.Digit1,"1",49,"VK_1","",""],[0,qv.Digit2,"Digit2",Kv.Digit2,"2",50,"VK_2","",""],[0,qv.Digit3,"Digit3",Kv.Digit3,"3",51,"VK_3","",""],[0,qv.Digit4,"Digit4",Kv.Digit4,"4",52,"VK_4","",""],[0,qv.Digit5,"Digit5",Kv.Digit5,"5",53,"VK_5","",""],[0,qv.Digit6,"Digit6",Kv.Digit6,"6",54,"VK_6","",""],[0,qv.Digit7,"Digit7",Kv.Digit7,"7",55,"VK_7","",""],[0,qv.Digit8,"Digit8",Kv.Digit8,"8",56,"VK_8","",""],[0,qv.Digit9,"Digit9",Kv.Digit9,"9",57,"VK_9","",""],[0,qv.Digit0,"Digit0",Kv.Digit0,"0",48,"VK_0","",""],[1,qv.Enter,"Enter",Kv.Enter,"Enter",13,"VK_RETURN","",""],[1,qv.Escape,"Escape",Kv.Escape,"Escape",27,"VK_ESCAPE","",""],[1,qv.Backspace,"Backspace",Kv.Backspace,"Backspace",8,"VK_BACK","",""],[1,qv.Tab,"Tab",Kv.Tab,"Tab",9,"VK_TAB","",""],[1,qv.Space,"Space",Kv.Space,"Space",32,"VK_SPACE","",""],[0,qv.Minus,"Minus",Kv.Minus,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,qv.Equal,"Equal",Kv.Equal,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,qv.BracketLeft,"BracketLeft",Kv.BracketLeft,"[",219,"VK_OEM_4","[","OEM_4"],[0,qv.BracketRight,"BracketRight",Kv.BracketRight,"]",221,"VK_OEM_6","]","OEM_6"],[0,qv.Backslash,"Backslash",Kv.Backslash,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,qv.IntlHash,"IntlHash",Kv.Unknown,"",0,"","",""],[0,qv.Semicolon,"Semicolon",Kv.Semicolon,";",186,"VK_OEM_1",";","OEM_1"],[0,qv.Quote,"Quote",Kv.Quote,"'",222,"VK_OEM_7","'","OEM_7"],[0,qv.Backquote,"Backquote",Kv.Backquote,"`",192,"VK_OEM_3","`","OEM_3"],[0,qv.Comma,"Comma",Kv.Comma,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,qv.Period,"Period",Kv.Period,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,qv.Slash,"Slash",Kv.Slash,"/",191,"VK_OEM_2","/","OEM_2"],[1,qv.CapsLock,"CapsLock",Kv.CapsLock,"CapsLock",20,"VK_CAPITAL","",""],[1,qv.F1,"F1",Kv.F1,"F1",112,"VK_F1","",""],[1,qv.F2,"F2",Kv.F2,"F2",113,"VK_F2","",""],[1,qv.F3,"F3",Kv.F3,"F3",114,"VK_F3","",""],[1,qv.F4,"F4",Kv.F4,"F4",115,"VK_F4","",""],[1,qv.F5,"F5",Kv.F5,"F5",116,"VK_F5","",""],[1,qv.F6,"F6",Kv.F6,"F6",117,"VK_F6","",""],[1,qv.F7,"F7",Kv.F7,"F7",118,"VK_F7","",""],[1,qv.F8,"F8",Kv.F8,"F8",119,"VK_F8","",""],[1,qv.F9,"F9",Kv.F9,"F9",120,"VK_F9","",""],[1,qv.F10,"F10",Kv.F10,"F10",121,"VK_F10","",""],[1,qv.F11,"F11",Kv.F11,"F11",122,"VK_F11","",""],[1,qv.F12,"F12",Kv.F12,"F12",123,"VK_F12","",""],[1,qv.PrintScreen,"PrintScreen",Kv.Unknown,"",0,"","",""],[1,qv.ScrollLock,"ScrollLock",Kv.ScrollLock,"ScrollLock",145,"VK_SCROLL","",""],[1,qv.Pause,"Pause",Kv.PauseBreak,"PauseBreak",19,"VK_PAUSE","",""],[1,qv.Insert,"Insert",Kv.Insert,"Insert",45,"VK_INSERT","",""],[1,qv.Home,"Home",Kv.Home,"Home",36,"VK_HOME","",""],[1,qv.PageUp,"PageUp",Kv.PageUp,"PageUp",33,"VK_PRIOR","",""],[1,qv.Delete,"Delete",Kv.Delete,"Delete",46,"VK_DELETE","",""],[1,qv.End,"End",Kv.End,"End",35,"VK_END","",""],[1,qv.PageDown,"PageDown",Kv.PageDown,"PageDown",34,"VK_NEXT","",""],[1,qv.ArrowRight,"ArrowRight",Kv.RightArrow,"RightArrow",39,"VK_RIGHT","Right",""],[1,qv.ArrowLeft,"ArrowLeft",Kv.LeftArrow,"LeftArrow",37,"VK_LEFT","Left",""],[1,qv.ArrowDown,"ArrowDown",Kv.DownArrow,"DownArrow",40,"VK_DOWN","Down",""],[1,qv.ArrowUp,"ArrowUp",Kv.UpArrow,"UpArrow",38,"VK_UP","Up",""],[1,qv.NumLock,"NumLock",Kv.NumLock,"NumLock",144,"VK_NUMLOCK","",""],[1,qv.NumpadDivide,"NumpadDivide",Kv.NumpadDivide,"NumPad_Divide",111,"VK_DIVIDE","",""],[1,qv.NumpadMultiply,"NumpadMultiply",Kv.NumpadMultiply,"NumPad_Multiply",106,"VK_MULTIPLY","",""],[1,qv.NumpadSubtract,"NumpadSubtract",Kv.NumpadSubtract,"NumPad_Subtract",109,"VK_SUBTRACT","",""],[1,qv.NumpadAdd,"NumpadAdd",Kv.NumpadAdd,"NumPad_Add",107,"VK_ADD","",""],[1,qv.NumpadEnter,"NumpadEnter",Kv.Enter,"",0,"","",""],[1,qv.Numpad1,"Numpad1",Kv.Numpad1,"NumPad1",97,"VK_NUMPAD1","",""],[1,qv.Numpad2,"Numpad2",Kv.Numpad2,"NumPad2",98,"VK_NUMPAD2","",""],[1,qv.Numpad3,"Numpad3",Kv.Numpad3,"NumPad3",99,"VK_NUMPAD3","",""],[1,qv.Numpad4,"Numpad4",Kv.Numpad4,"NumPad4",100,"VK_NUMPAD4","",""],[1,qv.Numpad5,"Numpad5",Kv.Numpad5,"NumPad5",101,"VK_NUMPAD5","",""],[1,qv.Numpad6,"Numpad6",Kv.Numpad6,"NumPad6",102,"VK_NUMPAD6","",""],[1,qv.Numpad7,"Numpad7",Kv.Numpad7,"NumPad7",103,"VK_NUMPAD7","",""],[1,qv.Numpad8,"Numpad8",Kv.Numpad8,"NumPad8",104,"VK_NUMPAD8","",""],[1,qv.Numpad9,"Numpad9",Kv.Numpad9,"NumPad9",105,"VK_NUMPAD9","",""],[1,qv.Numpad0,"Numpad0",Kv.Numpad0,"NumPad0",96,"VK_NUMPAD0","",""],[1,qv.NumpadDecimal,"NumpadDecimal",Kv.NumpadDecimal,"NumPad_Decimal",110,"VK_DECIMAL","",""],[0,qv.IntlBackslash,"IntlBackslash",Kv.IntlBackslash,"OEM_102",226,"VK_OEM_102","",""],[1,qv.ContextMenu,"ContextMenu",Kv.ContextMenu,"ContextMenu",93,"","",""],[1,qv.Power,"Power",Kv.Unknown,"",0,"","",""],[1,qv.NumpadEqual,"NumpadEqual",Kv.Unknown,"",0,"","",""],[1,qv.F13,"F13",Kv.F13,"F13",124,"VK_F13","",""],[1,qv.F14,"F14",Kv.F14,"F14",125,"VK_F14","",""],[1,qv.F15,"F15",Kv.F15,"F15",126,"VK_F15","",""],[1,qv.F16,"F16",Kv.F16,"F16",127,"VK_F16","",""],[1,qv.F17,"F17",Kv.F17,"F17",128,"VK_F17","",""],[1,qv.F18,"F18",Kv.F18,"F18",129,"VK_F18","",""],[1,qv.F19,"F19",Kv.F19,"F19",130,"VK_F19","",""],[1,qv.F20,"F20",Kv.F20,"F20",131,"VK_F20","",""],[1,qv.F21,"F21",Kv.F21,"F21",132,"VK_F21","",""],[1,qv.F22,"F22",Kv.F22,"F22",133,"VK_F22","",""],[1,qv.F23,"F23",Kv.F23,"F23",134,"VK_F23","",""],[1,qv.F24,"F24",Kv.F24,"F24",135,"VK_F24","",""],[1,qv.Open,"Open",Kv.Unknown,"",0,"","",""],[1,qv.Help,"Help",Kv.Unknown,"",0,"","",""],[1,qv.Select,"Select",Kv.Unknown,"",0,"","",""],[1,qv.Again,"Again",Kv.Unknown,"",0,"","",""],[1,qv.Undo,"Undo",Kv.Unknown,"",0,"","",""],[1,qv.Cut,"Cut",Kv.Unknown,"",0,"","",""],[1,qv.Copy,"Copy",Kv.Unknown,"",0,"","",""],[1,qv.Paste,"Paste",Kv.Unknown,"",0,"","",""],[1,qv.Find,"Find",Kv.Unknown,"",0,"","",""],[1,qv.AudioVolumeMute,"AudioVolumeMute",Kv.AudioVolumeMute,"AudioVolumeMute",173,"VK_VOLUME_MUTE","",""],[1,qv.AudioVolumeUp,"AudioVolumeUp",Kv.AudioVolumeUp,"AudioVolumeUp",175,"VK_VOLUME_UP","",""],[1,qv.AudioVolumeDown,"AudioVolumeDown",Kv.AudioVolumeDown,"AudioVolumeDown",174,"VK_VOLUME_DOWN","",""],[1,qv.NumpadComma,"NumpadComma",Kv.NUMPAD_SEPARATOR,"NumPad_Separator",108,"VK_SEPARATOR","",""],[0,qv.IntlRo,"IntlRo",Kv.ABNT_C1,"ABNT_C1",193,"VK_ABNT_C1","",""],[1,qv.KanaMode,"KanaMode",Kv.Unknown,"",0,"","",""],[0,qv.IntlYen,"IntlYen",Kv.Unknown,"",0,"","",""],[1,qv.Convert,"Convert",Kv.Unknown,"",0,"","",""],[1,qv.NonConvert,"NonConvert",Kv.Unknown,"",0,"","",""],[1,qv.Lang1,"Lang1",Kv.Unknown,"",0,"","",""],[1,qv.Lang2,"Lang2",Kv.Unknown,"",0,"","",""],[1,qv.Lang3,"Lang3",Kv.Unknown,"",0,"","",""],[1,qv.Lang4,"Lang4",Kv.Unknown,"",0,"","",""],[1,qv.Lang5,"Lang5",Kv.Unknown,"",0,"","",""],[1,qv.Abort,"Abort",Kv.Unknown,"",0,"","",""],[1,qv.Props,"Props",Kv.Unknown,"",0,"","",""],[1,qv.NumpadParenLeft,"NumpadParenLeft",Kv.Unknown,"",0,"","",""],[1,qv.NumpadParenRight,"NumpadParenRight",Kv.Unknown,"",0,"","",""],[1,qv.NumpadBackspace,"NumpadBackspace",Kv.Unknown,"",0,"","",""],[1,qv.NumpadMemoryStore,"NumpadMemoryStore",Kv.Unknown,"",0,"","",""],[1,qv.NumpadMemoryRecall,"NumpadMemoryRecall",Kv.Unknown,"",0,"","",""],[1,qv.NumpadMemoryClear,"NumpadMemoryClear",Kv.Unknown,"",0,"","",""],[1,qv.NumpadMemoryAdd,"NumpadMemoryAdd",Kv.Unknown,"",0,"","",""],[1,qv.NumpadMemorySubtract,"NumpadMemorySubtract",Kv.Unknown,"",0,"","",""],[1,qv.NumpadClear,"NumpadClear",Kv.Clear,"Clear",12,"VK_CLEAR","",""],[1,qv.NumpadClearEntry,"NumpadClearEntry",Kv.Unknown,"",0,"","",""],[1,qv.None,"",Kv.Ctrl,"Ctrl",17,"VK_CONTROL","",""],[1,qv.None,"",Kv.Shift,"Shift",16,"VK_SHIFT","",""],[1,qv.None,"",Kv.Alt,"Alt",18,"VK_MENU","",""],[1,qv.None,"",Kv.Meta,"Meta",91,"VK_COMMAND","",""],[1,qv.ControlLeft,"ControlLeft",Kv.Ctrl,"",0,"VK_LCONTROL","",""],[1,qv.ShiftLeft,"ShiftLeft",Kv.Shift,"",0,"VK_LSHIFT","",""],[1,qv.AltLeft,"AltLeft",Kv.Alt,"",0,"VK_LMENU","",""],[1,qv.MetaLeft,"MetaLeft",Kv.Meta,"",0,"VK_LWIN","",""],[1,qv.ControlRight,"ControlRight",Kv.Ctrl,"",0,"VK_RCONTROL","",""],[1,qv.ShiftRight,"ShiftRight",Kv.Shift,"",0,"VK_RSHIFT","",""],[1,qv.AltRight,"AltRight",Kv.Alt,"",0,"VK_RMENU","",""],[1,qv.MetaRight,"MetaRight",Kv.Meta,"",0,"VK_RWIN","",""],[1,qv.BrightnessUp,"BrightnessUp",Kv.Unknown,"",0,"","",""],[1,qv.BrightnessDown,"BrightnessDown",Kv.Unknown,"",0,"","",""],[1,qv.MediaPlay,"MediaPlay",Kv.Unknown,"",0,"","",""],[1,qv.MediaRecord,"MediaRecord",Kv.Unknown,"",0,"","",""],[1,qv.MediaFastForward,"MediaFastForward",Kv.Unknown,"",0,"","",""],[1,qv.MediaRewind,"MediaRewind",Kv.Unknown,"",0,"","",""],[1,qv.MediaTrackNext,"MediaTrackNext",Kv.MediaTrackNext,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK","",""],[1,qv.MediaTrackPrevious,"MediaTrackPrevious",Kv.MediaTrackPrevious,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK","",""],[1,qv.MediaStop,"MediaStop",Kv.MediaStop,"MediaStop",178,"VK_MEDIA_STOP","",""],[1,qv.Eject,"Eject",Kv.Unknown,"",0,"","",""],[1,qv.MediaPlayPause,"MediaPlayPause",Kv.MediaPlayPause,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE","",""],[1,qv.MediaSelect,"MediaSelect",Kv.LaunchMediaPlayer,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT","",""],[1,qv.LaunchMail,"LaunchMail",Kv.LaunchMail,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL","",""],[1,qv.LaunchApp2,"LaunchApp2",Kv.LaunchApp2,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2","",""],[1,qv.LaunchApp1,"LaunchApp1",Kv.Unknown,"",0,"VK_MEDIA_LAUNCH_APP1","",""],[1,qv.SelectTask,"SelectTask",Kv.Unknown,"",0,"","",""],[1,qv.LaunchScreenSaver,"LaunchScreenSaver",Kv.Unknown,"",0,"","",""],[1,qv.BrowserSearch,"BrowserSearch",Kv.BrowserSearch,"BrowserSearch",170,"VK_BROWSER_SEARCH","",""],[1,qv.BrowserHome,"BrowserHome",Kv.BrowserHome,"BrowserHome",172,"VK_BROWSER_HOME","",""],[1,qv.BrowserBack,"BrowserBack",Kv.BrowserBack,"BrowserBack",166,"VK_BROWSER_BACK","",""],[1,qv.BrowserForward,"BrowserForward",Kv.BrowserForward,"BrowserForward",167,"VK_BROWSER_FORWARD","",""],[1,qv.BrowserStop,"BrowserStop",Kv.Unknown,"",0,"VK_BROWSER_STOP","",""],[1,qv.BrowserRefresh,"BrowserRefresh",Kv.Unknown,"",0,"VK_BROWSER_REFRESH","",""],[1,qv.BrowserFavorites,"BrowserFavorites",Kv.Unknown,"",0,"VK_BROWSER_FAVORITES","",""],[1,qv.ZoomToggle,"ZoomToggle",Kv.Unknown,"",0,"","",""],[1,qv.MailReply,"MailReply",Kv.Unknown,"",0,"","",""],[1,qv.MailForward,"MailForward",Kv.Unknown,"",0,"","",""],[1,qv.MailSend,"MailSend",Kv.Unknown,"",0,"","",""],[1,qv.None,"",Kv.KEY_IN_COMPOSITION,"KeyInComposition",229,"","",""],[1,qv.None,"",Kv.ABNT_C2,"ABNT_C2",194,"VK_ABNT_C2","",""],[1,qv.None,"",Kv.OEM_8,"OEM_8",223,"VK_OEM_8","",""],[1,qv.None,"",Kv.Unknown,"",0,"VK_KANA","",""],[1,qv.None,"",Kv.Unknown,"",0,"VK_HANGUL","",""],[1,qv.None,"",Kv.Unknown,"",0,"VK_JUNJA","",""],[1,qv.None,"",Kv.Unknown,"",0,"VK_FINAL","",""],[1,qv.None,"",Kv.Unknown,"",0,"VK_HANJA","",""],[1,qv.None,"",Kv.Unknown,"",0,"VK_KANJI","",""],[1,qv.None,"",Kv.Unknown,"",0,"VK_CONVERT","",""],[1,qv.None,"",Kv.Unknown,"",0,"VK_NONCONVERT","",""],[1,qv.None,"",Kv.Unknown,"",0,"VK_ACCEPT","",""],[1,qv.None,"",Kv.Unknown,"",0,"VK_MODECHANGE","",""],[1,qv.None,"",Kv.Unknown,"",0,"VK_SELECT","",""],[1,qv.None,"",Kv.Unknown,"",0,"VK_PRINT","",""],[1,qv.None,"",Kv.Unknown,"",0,"VK_EXECUTE","",""],[1,qv.None,"",Kv.Unknown,"",0,"VK_SNAPSHOT","",""],[1,qv.None,"",Kv.Unknown,"",0,"VK_HELP","",""],[1,qv.None,"",Kv.Unknown,"",0,"VK_APPS","",""],[1,qv.None,"",Kv.Unknown,"",0,"VK_PROCESSKEY","",""],[1,qv.None,"",Kv.Unknown,"",0,"VK_PACKET","",""],[1,qv.None,"",Kv.Unknown,"",0,"VK_DBE_SBCSCHAR","",""],[1,qv.None,"",Kv.Unknown,"",0,"VK_DBE_DBCSCHAR","",""],[1,qv.None,"",Kv.Unknown,"",0,"VK_ATTN","",""],[1,qv.None,"",Kv.Unknown,"",0,"VK_CRSEL","",""],[1,qv.None,"",Kv.Unknown,"",0,"VK_EXSEL","",""],[1,qv.None,"",Kv.Unknown,"",0,"VK_EREOF","",""],[1,qv.None,"",Kv.Unknown,"",0,"VK_PLAY","",""],[1,qv.None,"",Kv.Unknown,"",0,"VK_ZOOM","",""],[1,qv.None,"",Kv.Unknown,"",0,"VK_NONAME","",""],[1,qv.None,"",Kv.Unknown,"",0,"VK_PA1","",""],[1,qv.None,"",Kv.Unknown,"",0,"VK_OEM_CLEAR","",""]],t=[],i=[];for(let n of e){let[e,s,r,o,a,l,h,d,c]=n;if(i[s]||(i[s]=!0,i_[s]=r,n_[r]=s,s_[r.toLowerCase()]=s,e&&(r_[s]=o,o!==Kv.Unknown&&o!==Kv.Enter&&!l_(o)&&(o_[o]=s))),!t[o]){if(t[o]=!0,!a)throw Error("String representation missing for key code ".concat(o," around scan code ").concat(r));Xv.define(o,a),Zv.define(o,d||a),Jv.define(o,c||d||a)}l&&(e_[l]=o),h&&(t_[h]=o)}o_[Kv.Enter]=qv.Enter}(),function(e){e.toString=function(e){return Xv.keyCodeToStr(e)},e.fromString=function(e){return Xv.strToKeyCode(e)},e.toUserSettingsUS=function(e){return Zv.keyCodeToStr(e)},e.toUserSettingsGeneral=function(e){return Jv.keyCodeToStr(e)},e.fromUserSettings=function(e){return Zv.strToKeyCode(e)||Jv.strToKeyCode(e)},e.toElectronAccelerator=function(e){if(e>=Kv.Numpad0&&e<=Kv.NumpadDivide)return null;switch(e){case Kv.UpArrow:return"Up";case Kv.DownArrow:return"Down";case Kv.LeftArrow:return"Left";case Kv.RightArrow:return"Right"}return Xv.keyCodeToStr(e)}}(jv||(jv={})),function(e){e[e.CtrlCmd=2048]="CtrlCmd",e[e.Shift=1024]="Shift",e[e.Alt=512]="Alt",e[e.WinCtrl=256]="WinCtrl"}(Yv||(Yv={})),function(e){e[e.CtrlCmd=2048]="CtrlCmd",e[e.Shift=1024]="Shift",e[e.Alt=512]="Alt",e[e.WinCtrl=256]="WinCtrl",e[e.KeyCode=255]="KeyCode"}(Qv||(Qv={}));var c_=class e{constructor(e,t,i,n,s){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=n,this.keyCode=s}equals(t){return t instanceof e&&this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.keyCode===t.keyCode}getHashCode(){return"K".concat(this.ctrlKey?"1":"0").concat(this.shiftKey?"1":"0").concat(this.altKey?"1":"0").concat(this.metaKey?"1":"0").concat(this.keyCode)}isModifierKey(){return this.keyCode===Kv.Unknown||this.keyCode===Kv.Ctrl||this.keyCode===Kv.Meta||this.keyCode===Kv.Alt||this.keyCode===Kv.Shift}toKeybinding(){return new u_([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===Kv.Ctrl||this.shiftKey&&this.keyCode===Kv.Shift||this.altKey&&this.keyCode===Kv.Alt||this.metaKey&&this.keyCode===Kv.Meta}},u_=class{constructor(e){if(0===e.length)throw Hi("chords");this.chords=e}getHashCode(){let e="";for(let t=0,i=this.chords.length;t<i;t++)0!==t&&(e+=";"),e+=this.chords[t].getHashCode();return e}equals(e){if(null===e||this.chords.length!==e.chords.length)return!1;for(let t=0;t<this.chords.length;t++)if(!this.chords[t].equals(e.chords[t]))return!1;return!0}},g_=class{constructor(e,t,i,n,s,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=n,this.keyLabel=s,this.keyAriaLabel=r}},p_=class{};var f_=qn?Yv.WinCtrl:Yv.CtrlCmd,m_=Yv.Alt,v_=Yv.Shift,__=qn?Yv.CtrlCmd:Yv.WinCtrl;function b_(e){var t;return function(e){return e instanceof Lv.HTMLIFrameElement||e instanceof L_(e).HTMLIFrameElement}(e.target)?e.target:null!==(t=e.composedPath()[0])&&void 0!==t?t:e.target}var C_=class{constructor(e){var t;this._standardKeyboardEventBrand=!0;let i=e;this.browserEvent=i,this.target=b_(i),this.ctrlKey=i.ctrlKey,this.shiftKey=i.shiftKey,this.altKey=i.altKey,this.metaKey=i.metaKey,this.altGraphKey=null===(t=i.getModifierState)||void 0===t?void 0:t.call(i,"AltGraph"),this.keyCode=function(e){if(e.charCode){let t=String.fromCharCode(e.charCode).toUpperCase();return jv.fromString(t)}let t=e.keyCode;if(3===t)return Kv.PauseBreak;if(Mv)switch(t){case 59:return Kv.Semicolon;case 60:if(Gn)return Kv.IntlBackslash;break;case 61:return Kv.Equal;case 107:return Kv.NumpadAdd;case 109:return Kv.NumpadSubtract;case 173:return Kv.Minus;case 224:if(qn)return Kv.Meta}else if(Pv&&(qn&&93===t||!qn&&92===t))return Kv.Meta;return e_[t]||Kv.Unknown}(i),this.code=i.code,this.ctrlKey=this.ctrlKey||this.keyCode===Kv.Ctrl,this.altKey=this.altKey||this.keyCode===Kv.Alt,this.shiftKey=this.shiftKey||this.keyCode===Kv.Shift,this.metaKey=this.metaKey||this.keyCode===Kv.Meta,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=Kv.Unknown;l_(this.keyCode)||(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=f_),this.altKey&&(t|=m_),this.shiftKey&&(t|=v_),this.metaKey&&(t|=__),t|=e,t}_computeKeyCodeChord(){let e=Kv.Unknown;return l_(this.keyCode)||(e=this.keyCode),new c_(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}},y_=new WeakMap;function w_(e){if(!e.parent||e.parent===e)return null;try{let t=e.location,i=e.parent.location;if("null"!==t.origin&&"null"!==i.origin&&t.origin!==i.origin)return null}catch(t){return null}return e.parent}var S_=class{static getSameOriginWindowChain(e){let t=y_.get(e);if(!t){t=[],y_.set(e,t);let i,n=e;do{i=w_(n),i?t.push({window:new WeakRef(n),iframeElement:n.frameElement||null}):t.push({window:new WeakRef(n),iframeElement:null}),n=i}while(n)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let i=0,n=0,s=this.getSameOriginWindowChain(e);for(let a of s){var r,o;let e=a.window.deref();if(i+=null!==(r=null===e||void 0===e?void 0:e.scrollY)&&void 0!==r?r:0,n+=null!==(o=null===e||void 0===e?void 0:e.scrollX)&&void 0!==o?o:0,e===t||!a.iframeElement)break;let s=a.iframeElement.getBoundingClientRect();i+=s.top,n+=s.left}return{top:i,left:n}}},k_=class{constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=0===t.button,this.middleButton=1===t.button,this.rightButton=2===t.button,this.buttons=t.buttons,this.defaultPrevented=t.defaultPrevented,this.target=t.target,this.detail=t.detail||1,"dblclick"===t.type&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,"number"==typeof t.pageX?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);let i=S_.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=i.left,this.posy-=i.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}},E_=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=i,this.deltaX=t;let n=!1;if(Bv){let e=Lv.navigator.userAgent.match(/Chrome\/(\d+)/);n=(e?parseInt(e[1]):123)<=122}if(e){var s;let t=e,i=e,r=(null===(s=e.view)||void 0===s?void 0:s.devicePixelRatio)||1;if(void 0!==t.wheelDeltaY)this.deltaY=n?t.wheelDeltaY/(120*r):t.wheelDeltaY/120;else if(void 0!==i.VERTICAL_AXIS&&i.axis===i.VERTICAL_AXIS)this.deltaY=-i.detail/3;else if("wheel"===e.type){let t=e;t.deltaMode===t.DOM_DELTA_LINE?this.deltaY=Mv&&!qn?-e.deltaY/3:-e.deltaY:this.deltaY=-e.deltaY/40}if(void 0!==t.wheelDeltaX)this.deltaX=Uv&&Kn?-t.wheelDeltaX/120:n?t.wheelDeltaX/(120*r):t.wheelDeltaX/120;else if(void 0!==i.HORIZONTAL_AXIS&&i.axis===i.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if("wheel"===e.type){let t=e;t.deltaMode===t.DOM_DELTA_LINE?this.deltaX=Mv&&!qn?-e.deltaX/3:-e.deltaX:this.deltaX=-e.deltaX/40}0===this.deltaY&&0===this.deltaX&&e.wheelDelta&&(this.deltaY=n?e.wheelDelta/(120*r):e.wheelDelta/120)}}preventDefault(){var e;null===(e=this.browserEvent)||void 0===e||e.preventDefault()}stopPropagation(){var e;null===(e=this.browserEvent)||void 0===e||e.stopPropagation()}};function D_(e,t,i){return Math.min(Math.max(e,t),i)}var T_=class{constructor(){this._n=1,this._val=0}update(e){return this._val+=(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}},I_=class{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=Array(e),this._values.fill(0,0,e)}update(e){let t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}},{registerWindow:x_,getWindow:L_,getDocument:A_,getWindows:N_,getWindowsCount:F_,getWindowId:O_,getWindowById:R_,onDidRegisterWindow:M_,onWillUnregisterWindow:P_,onDidUnregisterWindow:B_}=function(){let e=new Map;!function(e,t){let i=e;"number"!=typeof i.vscodeWindowId&&Object.defineProperty(i,"vscodeWindowId",{get:()=>t})}(Lv,1);let t={window:Lv,disposables:new bo};e.set(Lv.vscodeWindowId,t);let i=new Ro,n=new Ro,s=new Ro;return{onDidRegisterWindow:i.event,onWillUnregisterWindow:s.event,onDidUnregisterWindow:n.event,registerWindow(t){if(e.has(t.vscodeWindowId))return Co.None;let r=new bo,o={window:t,disposables:r.add(new bo)};return e.set(t.vscodeWindowId,o),r.add(vo(()=>{e.delete(t.vscodeWindowId),n.fire(t)})),r.add(W_(t,kb.BEFORE_UNLOAD,()=>{s.fire(t)})),i.fire(o),r},getWindows:()=>e.values(),getWindowsCount:()=>e.size,getWindowId:e=>e.vscodeWindowId,hasWindow:t=>e.has(t),getWindowById:function(i,n){var s;return null!==(s="number"==typeof i?e.get(i):void 0)&&void 0!==s?s:n?t:void 0},getWindow(e){var t;let i=e;if(null!==i&&void 0!==i&&null!==(t=i.ownerDocument)&&void 0!==t&&t.defaultView)return i.ownerDocument.defaultView.window;let n=e;return null!==n&&void 0!==n&&n.view?n.view.window:Lv},getDocument:e=>L_(e).document}}();function U_(e){for(;e.firstChild;)e.firstChild.remove()}var H_=class{constructor(e,t,i,n){this._node=e,this._type=t,this._handler=i,this._options=n||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._handler=(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,null))}};function W_(e,t,i,n){return new H_(e,t,i,n)}var V_=class extends Co{get onDidChangeActiveElement(){return this._onDidChangeActiveElement.event}constructor(e){super(),this.window=e,this.activeElement=null,this._onDidChangeActiveElement=this._register(new Ro),this._onFocusIn=e=>{if(this.activeElement=hb(this.window.document),this._onDidChangeActiveElement.fire(this.activeElement),_b(e.target)&&e.target.shadowRoot){let t=new bo;t.add(W_(e.target.shadowRoot,kb.FOCUS_IN,this._onFocusIn)),t.add(W_(e.target,kb.FOCUS_OUT,()=>{t.dispose()}))}},this._register(W_(this.window,kb.FOCUS_IN,this._onFocusIn))}};var z_=function(e,t,i,n){let s=i;return"click"===t||"mousedown"===t||"contextmenu"===t?s=function(e,t){return function(i){return t(new k_(e,i))}}(L_(e),i):("keydown"===t||"keypress"===t||"keyup"===t)&&(s=function(e){return function(t){return e(new C_(t))}}(i)),W_(e,t,s,n)};function K_(e,t,i){return W_(e,$n&&Gv?kb.POINTER_UP:kb.MOUSE_UP,t,i)}var q_,G_=class extends Ol{constructor(e){super(),this.defaultTarget=e&&L_(e)}cancelAndSet(e,t,i){return super.cancelAndSet(e,t,null!==i&&void 0!==i?i:this.defaultTarget)}},j_=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(hn){Ri(hn)}}static sort(e,t){return t.priority-e.priority}};function Y_(e){return L_(e).getComputedStyle(e,null)}function Q_(e,t,i){let n=L_(e),s=n.document;if(e!==s.body)return new X_(e.clientWidth,e.clientHeight);if($n&&null!==n&&void 0!==n&&n.visualViewport)return new X_(n.visualViewport.width,n.visualViewport.height);if(null!==n&&void 0!==n&&n.innerWidth&&n.innerHeight)return new X_(n.innerWidth,n.innerHeight);if(s.body&&s.body.clientWidth&&s.body.clientHeight)return new X_(s.body.clientWidth,s.body.clientHeight);if(s.documentElement&&s.documentElement.clientWidth&&s.documentElement.clientHeight)return new X_(s.documentElement.clientWidth,s.documentElement.clientHeight);if(i)return Q_(i,t);if(t)return t;throw Error("Unable to figure out browser width and height")}!function(){let e=new Map,t=new Map,i=new Map,n=new Map,s=s=>{var r;i.set(s,!1);let o=null!==(r=e.get(s))&&void 0!==r?r:[];for(t.set(s,o),e.set(s,[]),n.set(s,!0);o.length>0;)o.sort(j_.sort),o.shift().execute();n.set(s,!1)};q_=function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=O_(t),a=new j_(n,r),l=e.get(o);return l||(l=[],e.set(o,l)),l.push(a),i.get(o)||(i.set(o,!0),t.requestAnimationFrame(()=>s(o))),a}}();var $_=class e{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(t,i){let n=Y_(t),s=n?n.getPropertyValue(i):"0";return e.convertToPixels(t,s)}static getBorderLeftWidth(t){return e.getDimension(t,"border-left-width")}static getBorderRightWidth(t){return e.getDimension(t,"border-right-width")}static getBorderTopWidth(t){return e.getDimension(t,"border-top-width")}static getBorderBottomWidth(t){return e.getDimension(t,"border-bottom-width")}static getPaddingLeft(t){return e.getDimension(t,"padding-left")}static getPaddingRight(t){return e.getDimension(t,"padding-right")}static getPaddingTop(t){return e.getDimension(t,"padding-top")}static getPaddingBottom(t){return e.getDimension(t,"padding-bottom")}static getMarginLeft(t){return e.getDimension(t,"margin-left")}static getMarginTop(t){return e.getDimension(t,"margin-top")}static getMarginRight(t){return e.getDimension(t,"margin-right")}static getMarginBottom(t){return e.getDimension(t,"margin-bottom")}},X_=(Re=class e{constructor(e,t){this.width=e,this.height=t}with(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.width,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.height;return t!==this.width||i!==this.height?new e(t,i):this}static is(e){return"object"==typeof e&&"number"==typeof e.height&&"number"==typeof e.width}static lift(t){return t instanceof e?t:new e(t.width,t.height)}static equals(e,t){return e===t||!(!e||!t)&&(e.width===t.width&&e.height===t.height)}},{_:Re.None=new Re(0,0)},Re);function Z_(e){let t=e.getBoundingClientRect(),i=L_(e);return{left:t.left+i.scrollX,top:t.top+i.scrollY,width:t.width,height:t.height}}function J_(e){let t=e,i=1;do{let e=Y_(t).zoom;null!=e&&"1"!==e&&(i*=e),t=t.parentElement}while(null!==t&&t!==t.getRootNode());return i}function eb(e){let t=$_.getMarginLeft(e)+$_.getMarginRight(e);return e.offsetWidth+t}function tb(e){let t=$_.getBorderLeftWidth(e)+$_.getBorderRightWidth(e),i=$_.getPaddingLeft(e)+$_.getPaddingRight(e);return e.offsetWidth-t-i}function ib(e){let t=$_.getBorderTopWidth(e)+$_.getBorderBottomWidth(e),i=$_.getPaddingTop(e)+$_.getPaddingBottom(e);return e.offsetHeight-t-i}function nb(e){let t=$_.getMarginTop(e)+$_.getMarginBottom(e);return e.offsetHeight+t}function sb(e,t){return!(null===t||void 0===t||!t.contains(e))}function rb(e,t,i){return!!function(e,t,i){for(;e&&e.nodeType===e.ELEMENT_NODE;){if(e.classList.contains(t))return e;if(i)if("string"==typeof i){if(e.classList.contains(i))return null}else if(e===i)return null;e=e.parentNode}return null}(e,t,i)}function ob(e){return e&&!!e.host&&!!e.mode}function ab(e){return!!lb(e)}function lb(e){for(;e.parentNode;){var t;if(e===(null===(t=e.ownerDocument)||void 0===t?void 0:t.body))return null;e=e.parentNode}return ob(e)?e:null}function hb(){let e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:gb()).activeElement;for(;null!==(t=e)&&void 0!==t&&t.shadowRoot;){var t;e=e.shadowRoot.activeElement}return e}function db(e){let t=e.getRootNode();return t instanceof Document&&(t=t.body),t}function cb(e){return hb()===e}function ub(e){return sb(hb(),e)}function gb(){var e;return F_()<=1?Lv.document:null!==(e=Array.from(N_()).map(e=>{let{window:t}=e;return t.document}).find(e=>e.hasFocus()))&&void 0!==e?e:Lv.document}function pb(){var e,t;return null!==(e=null===(t=gb().defaultView)||void 0===t?void 0:t.window)&&void 0!==e?e:Lv}var fb=new class{constructor(){this.mutationObservers=new Map}observe(e,t,i){let n=this.mutationObservers.get(e);n||(n=new Map,this.mutationObservers.set(e,n));let s=Ng(i),r=n.get(s);if(r)r.users+=1;else{let o=new Ro,a=new MutationObserver(e=>o.fire(e));a.observe(e,i);let l=r={users:1,observer:a,onDidMutate:o.event};t.add(vo(()=>{var t,i;--l.users,0===l.users&&(o.dispose(),a.disconnect(),null!==(t=n)&&void 0!==t&&t.delete(s),0===(null===(i=n)||void 0===i?void 0:i.size)&&this.mutationObservers.delete(e))})),n.set(s,r)}return r.onDidMutate}};function mb(e,t){return Lv.document.createElement(e,t)}function vb(e,t,i){return Lv.document.createElementNS(e,t,i)}function _b(e){return e instanceof Lv.Element||e instanceof L_(e).Element}function bb(e){return e instanceof Lv.HTMLElement||e instanceof L_(e).HTMLElement}function Cb(e){return e instanceof Lv.HTMLAnchorElement||e instanceof L_(e).HTMLAnchorElement}function yb(e){return e instanceof Lv.SVGElement||e instanceof L_(e).SVGElement}function wb(e){return e instanceof Lv.MouseEvent||e instanceof L_(e).MouseEvent}function Sb(e){return e instanceof Lv.KeyboardEvent||e instanceof L_(e).KeyboardEvent}var kb={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_UP:"keyup",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",PASTE:"paste",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",CHANGE:"change",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend"};function Eb(e){let t=e;return!(!t||"function"!=typeof t.preventDefault||"function"!=typeof t.stopPropagation)}var Db=(e,t)=>(e.preventDefault(),t&&e.stopPropagation(),e),Tb=class e extends Co{get onDidFocus(){return this._onDidFocus.event}get onDidBlur(){return this._onDidBlur.event}static hasFocusWithin(e){if(bb(e)){let t=lb(e);return sb(t?t.activeElement:e.getRootNode().activeElement,e)}{let t=e;return sb(t.document.activeElement,t.document)}}constructor(t){super(),this._onDidFocus=this._register(new Ro),this._onDidBlur=this._register(new Ro);let i=e.hasFocusWithin(t),n=!1,s=()=>{n=!1,i||(i=!0,this._onDidFocus.fire())},r=()=>{i&&(n=!0,(bb(t)?L_(t):t).setTimeout(()=>{n&&(n=!1,i=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{e.hasFocusWithin(t)!==i&&(i?r():s())},this._register(W_(t,kb.FOCUS,s,!0)),this._register(W_(t,kb.BLUR,r,!0)),bb(t)&&(this._register(W_(t,kb.FOCUS_IN,()=>this._refreshStateHandler())),this._register(W_(t,kb.FOCUS_OUT,()=>this._refreshStateHandler())))}refreshState(){this._refreshStateHandler()}};function Ib(e){return new Tb(e)}function xb(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];if(e.append(...i),1===i.length&&"string"!=typeof i[0])return i[0]}function Lb(e,t){return e.insertBefore(t,e.firstChild),t}function Ab(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];e.textContent="",xb(e,...i)}var Nb,Fb,Ob=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;function Rb(e,t,i){let n=Ob.exec(t);if(!n)throw Error("Bad use of emmet");let s,r=n[1]||"div";for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s=e===Nb.HTML?mb(r):vb(e,r),n[3]&&(s.id=n[3]),n[4]&&(s.className=n[4].replace(/\./g," ").trim()),i&&Object.entries(i).forEach(e=>{let[t,i]=e;void 0!==i&&(/^on\w+$/.test(t)?s[t]=i:"selected"===t?i&&s.setAttribute(t,"true"):s.setAttribute(t,i))}),s.append(...a),s}function Mb(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),s=2;s<i;s++)n[s-2]=arguments[s];return Rb(Nb.HTML,e,t,...n)}function Pb(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(let n of t)n.style.display="",n.removeAttribute("aria-hidden")}function Bb(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(let n of t)n.style.display="none",n.setAttribute("aria-hidden","true")}function Ub(e){Lv.open(e,"_blank","noopener")}!function(e){e.HTML="http://www.w3.org/1999/xhtml",e.SVG="http://www.w3.org/2000/svg"}(Nb||(Nb={})),Mb.SVG=function(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),s=2;s<i;s++)n[s-2]=arguments[s];return Rb(Nb.SVG,e,t,...n)},$a.setPreferredWebSchema(/^https:/.test(Lv.location.href)?"https":"http"),function(e){e[e.DOCUMENT=1]="DOCUMENT",e[e.BROWSER=2]="BROWSER"}(Fb||(Fb={}));var Hb,Wb=class e extends Ro{constructor(){super(),this._subscriptions=new bo,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(_o.runAndSubscribe(M_,e=>{let{window:t,disposables:i}=e;return this.registerListeners(t,i)},{window:Lv,disposables:this._subscriptions}))}registerListeners(e,t){t.add(W_(e,"keydown",e=>{if(e.defaultPrevented)return;let t=new C_(e);if(t.keyCode!==Kv.Alt||!e.repeat){if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(e.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else{if(t.keyCode===Kv.Alt)return;this._keyStatus.lastKeyPressed=void 0}this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=e,this.fire(this._keyStatus))}},!0)),t.add(W_(e,"keyup",e=>{e.defaultPrevented||(!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!e.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=e,this.fire(this._keyStatus)))},!0)),t.add(W_(e.document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(W_(e.document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(W_(e.document.body,"mousemove",e=>{e.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),t.add(W_(e,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}get isModifierPressed(){return function(e){return e.ctrlKey||e.shiftKey||e.altKey||e.metaKey}(this._keyStatus)}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return e.instance||(e.instance=new e),e.instance}static disposeInstance(){e.instance&&(e.instance=void e.instance.dispose())}dispose(){super.dispose(),this._subscriptions.dispose()}},Vb=(0,o.A)(/([\w\-]+)?(?:#([\w\-]+))?((?:\.(?:[\w\-]+))*)(?:@((?:[\w\_])+))?/,{tag:1,id:2,class:3,name:4});function zb(e){let t,i;Array.isArray(arguments.length<=1?void 0:arguments[1])?(t={},i=arguments.length<=1?void 0:arguments[1]):(t=(arguments.length<=1?void 0:arguments[1])||{},i=arguments.length<=2?void 0:arguments[2]);let n=Vb.exec(e);if(!n||!n.groups)throw Error("Bad use of h");let s=mb(n.groups.tag||"div");n.groups.id&&(s.id=n.groups.id);let r=[];if(n.groups.class)for(let a of n.groups.class.split("."))""!==a&&r.push(a);if(void 0!==t.className)for(let a of t.className.split("."))""!==a&&r.push(a);r.length>0&&(s.className=r.join(" "));let o={};if(n.groups.name&&(o[n.groups.name]=s),i)for(let a of i)bb(a)?s.appendChild(a):"string"==typeof a?s.append(a):"root"in a&&(Object.assign(o,a),s.appendChild(a.root));for(let[a,l]of Object.entries(t)){if("className"===a)continue;if("style"===a)for(let[e,t]of Object.entries(l))s.style.setProperty(Kb(e),"number"==typeof t?t+"px":""+t);else"tabIndex"===a?s.tabIndex=l:s.setAttribute(Kb(a),l.toString())}return o.root=s,o}function Kb(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function qb(e){return"input"===e.tagName.toLowerCase()||"textarea"===e.tagName.toLowerCase()||bb(e)&&!!e.editContext}!function(e){function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return(t,i,n)=>{let s=i.class;delete i.class;let r=i.ref;delete i.ref;let o=i.obsRef;return delete i.obsRef,new eC(t,r,o,e,s,i,n)}}function i(e){let i=t(arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0);return(t,n)=>i(e,t,n)}e.div=i("div"),e.elem=t(void 0),e.svg=i("svg","http://www.w3.org/2000/svg"),e.svgElem=t("http://www.w3.org/2000/svg"),e.ref=function(){let e,t=function(t){e=t};return Object.defineProperty(t,"element",{get(){if(!e)throw new qi("Make sure the ref is set before accessing the element. Maybe wrong initialization order?");return e}}),t}}(Hb||(Hb={}));var Gb=class e{constructor(t,i,n,s,r,o,a){this._deriveds=[],this._isHovered=void 0,this._didMouseMoveDuringHover=void 0,this._element=s?vb(s,t):mb(t),i&&i(this._element),n&&this._deriveds.push(ev(e=>{n(this),e.store.add({dispose:()=>{n(null)}})})),r&&($b(r)?this._deriveds.push(ev(this,e=>{jb(this._element,Qb(r,e))})):jb(this._element,Qb(r,void 0)));for(let[l,h]of Object.entries(o))if("style"===l)for(let[d,c]of Object.entries(h)){let u=Kb(d);pv(c)?this._deriveds.push(tv({owner:this,debugName:()=>"set.style.".concat(u)},e=>{this._element.style.setProperty(u,Xb(c.read(e)))})):this._element.style.setProperty(u,Xb(c))}else"tabIndex"===l?pv(h)?this._deriveds.push(ev(this,e=>{this._element.tabIndex=h.read(e)})):this._element.tabIndex=h:l.startsWith("on")?this._element[l]=h:pv(h)?this._deriveds.push(tv({owner:this,debugName:()=>"set.".concat(l)},e=>{tC(this._element,l,h.read(e))})):tC(this._element,l,h);if(a){function g(t,i){return pv(i)?g(t,i.read(t)):Array.isArray(i)?i.flatMap(e=>g(t,e)):i instanceof e?(t&&i.readEffect(t),[i._element]):i?[i]:[]}let p=ev(this,e=>{this._element.replaceChildren(...g(e,a))});this._deriveds.push(p),Zb(a)||p.get()}}readEffect(e){for(let t of this._deriveds)t.read(e)}keepUpdated(e){return ev(e=>{this.readEffect(e)}).recomputeInitiallyAndOnChange(e),this}toDisposableLiveElement(){let e=new bo;return this.keepUpdated(e),new Jb(this._element,e)}get isHovered(){if(!this._isHovered){let e=av("hovered",!1);this._element.addEventListener("mouseenter",t=>e.set(!0,void 0)),this._element.addEventListener("mouseleave",t=>e.set(!1,void 0)),this._isHovered=e}return this._isHovered}get didMouseMoveDuringHover(){if(!this._didMouseMoveDuringHover){let e=!1,t=av("didMouseMoveDuringHover",!1);this._element.addEventListener("mouseenter",t=>{e=!0}),this._element.addEventListener("mousemove",i=>{e&&t.set(!0,void 0)}),this._element.addEventListener("mouseleave",i=>{e=!1,t.set(!1,void 0)}),this._didMouseMoveDuringHover=t}return this._didMouseMoveDuringHover}};function jb(e,t){yb(e)?e.setAttribute("class",t):e.className=t}function Yb(e,t,i){if(pv(e))i(e.read(t));else if(Array.isArray(e))for(let n of e)Yb(n,t,i);else i(e)}function Qb(e,t){let i="";return Yb(e,t,e=>{e&&(0===i.length?i=e:i+=" "+e)}),i}function $b(e){return!!pv(e)||!!Array.isArray(e)&&e.some(e=>$b(e))}function Xb(e){return"number"==typeof e?e+"px":e}function Zb(e){return!!pv(e)||!!Array.isArray(e)&&e.some(e=>Zb(e))}var Jb=class{constructor(e,t){this.element=e,this._disposable=t}dispose(){this._disposable.dispose()}},eC=class extends Gb{get element(){return this._element}};function tC(e,t,i){null==i?e.removeAttribute(Kb(t)):e.setAttribute(Kb(t),String(i))}var iC=new Map;function nC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lv.document.head,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,n=mb("style");if(n.type="text/css",n.media="screen",n.setAttribute("data-vscode","true"),null!==t&&void 0!==t&&t(n),e.appendChild(n),i&&i.add(vo(()=>n.remove())),e===Lv.document.head){let e=new Set;iC.set(n,e),i&&i.add(vo(()=>iC.delete(n)));for(let{window:t,disposables:s}of N_()){if(t===Lv)continue;let r=s.add(sC(n,e,t.document.head));null===i||void 0===i||i.add(r)}0}return n}function sC(e,t,i){let n=new bo,s=e.cloneNode(!0);i.appendChild(s),n.add(vo(()=>s.remove()));for(let a of aC(e)){var r,o;null===(r=s.sheet)||void 0===r||r.insertRule(a.cssText,null===(o=s.sheet)||void 0===o?void 0:o.cssRules.length)}return n.add(fb.observe(e,n,{childList:!0,subtree:Mv,characterData:Mv})(()=>{s.textContent=e.textContent})),t.add(s),n.add(vo(()=>t.delete(s))),n}var rC=null;function oC(){return rC||(rC=nC()),rC}function aC(e){var t,i;return null!==e&&void 0!==e&&null!==(t=e.sheet)&&void 0!==t&&t.rules?e.sheet.rules:null!==e&&void 0!==e&&null!==(i=e.sheet)&&void 0!==i&&i.cssRules?e.sheet.cssRules:[]}function lC(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oC();if(i&&t){var n;null===(n=i.sheet)||void 0===n||n.insertRule("".concat(e," {").concat(t,"}"),0);for(let n of null!==(s=iC.get(i))&&void 0!==s?s:[]){var s;lC(e,t,n)}}}function hC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oC();if(!t)return;let i=aC(t),n=[];for(let o=0;o<i.length;o++){let t=i[o];dC(t)&&-1!==t.selectorText.indexOf(e)&&n.push(o)}for(let o=n.length-1;o>=0;o--){var s;null===(s=t.sheet)||void 0===s||s.deleteRule(n[o])}for(let o of null!==(r=iC.get(t))&&void 0!==r?r:[]){var r;hC(e,o)}}function dC(e){return"string"==typeof e.selectorText}var cC=Hg,uC="comment,comment.block,comment.block.documentation,comment.line,constant,constant.character,constant.character.escape,constant.numeric,constant.numeric.integer,constant.numeric.float,constant.numeric.hex,constant.numeric.octal,constant.other,constant.regexp,constant.rgb-value,emphasis,entity,entity.name,entity.name.class,entity.name.function,entity.name.method,entity.name.section,entity.name.selector,entity.name.tag,entity.name.type,entity.other,entity.other.attribute-name,entity.other.inherited-class,invalid,invalid.deprecated,invalid.illegal,keyword,keyword.control,keyword.operator,keyword.operator.new,keyword.operator.assignment,keyword.operator.arithmetic,keyword.operator.logical,keyword.other,markup,markup.bold,markup.changed,markup.deleted,markup.heading,markup.inline.raw,markup.inserted,markup.italic,markup.list,markup.list.numbered,markup.list.unnumbered,markup.other,markup.quote,markup.raw,markup.underline,markup.underline.link,meta,meta.block,meta.cast,meta.class,meta.function,meta.function-call,meta.preprocessor,meta.return-type,meta.selector,meta.tag,meta.type.annotation,meta.type,punctuation.definition.string.begin,punctuation.definition.string.end,punctuation.separator,punctuation.separator.continuation,punctuation.terminator,storage,storage.modifier,storage.type,string,string.interpolated,string.other,string.quoted,string.quoted.double,string.quoted.other,string.quoted.single,string.quoted.triple,string.regexp,string.unquoted,strong,support,support.class,support.constant,support.function,support.other,support.type,support.type.property-name,support.variable,variable,variable.language,variable.name,variable.other,variable.other.readwrite,variable.parameter".split(","),gC="vscode://schemas/textmate-colors",pC="".concat(gC,"#/definitions/colorGroup"),fC={type:"array",definitions:{colorGroup:{default:"#FF0000",anyOf:[{type:"string",format:"color-hex"},{$ref:"#/definitions/settings"}]},settings:{type:"object",description:Li(14305,"Colors and styles for the token."),properties:{foreground:{type:"string",description:Li(14306,"Foreground color for the token."),format:"color-hex",default:"#ff0000"},background:{type:"string",deprecationMessage:Li(14307,"Token background colors are currently not supported.")},fontStyle:{type:"string",description:Li(14308,"Font style of the rule: 'italic', 'bold', 'underline', 'strikethrough' or a combination. The empty string unsets inherited settings."),pattern:"^(\\s*\\b(italic|bold|underline|strikethrough))*\\s*$",patternErrorMessage:Li(14309,"Font style must be 'italic', 'bold', 'underline', 'strikethrough' or a combination or the empty string."),defaultSnippets:[{label:Li(14310,"None (clear inherited style)"),bodyText:'""'},{body:"italic"},{body:"bold"},{body:"underline"},{body:"strikethrough"},{body:"italic bold"},{body:"italic underline"},{body:"italic strikethrough"},{body:"bold underline"},{body:"bold strikethrough"},{body:"underline strikethrough"},{body:"italic bold underline"},{body:"italic bold strikethrough"},{body:"italic underline strikethrough"},{body:"bold underline strikethrough"},{body:"italic bold underline strikethrough"}]}},additionalProperties:!1,defaultSnippets:[{body:{foreground:"${1:#FF0000}",fontStyle:"${2:bold}"}}]}},items:{type:"object",defaultSnippets:[{body:{scope:"${1:keyword.operator}",settings:{foreground:"${2:#FF0000}"}}}],properties:{name:{type:"string",description:Li(14311,"Description of the rule.")},scope:{description:Li(14312,"Scope selector against which this rule matches."),anyOf:[{enum:uC},{type:"string"},{type:"array",items:{enum:uC}},{type:"array",items:{type:"string"}}]},settings:{$ref:"#/definitions/settings"}},required:["settings"],additionalProperties:!1}},mC="vscode://schemas/color-theme",vC={type:"object",allowComments:!0,allowTrailingCommas:!0,properties:{colors:{description:Li(14313,"Colors in the workbench"),$ref:dh,additionalProperties:!1},tokenColors:{anyOf:[{type:"string",description:Li(14314,"Path to a tmTheme file (relative to the current file).")},{description:Li(14315,"Colors for syntax highlighting"),$ref:gC}]},semanticHighlighting:{type:"boolean",description:Li(14316,"Whether semantic highlighting should be enabled for this theme.")},semanticTokenColors:{type:"object",description:Li(14317,"Colors for semantic tokens"),$ref:Qu}}};var _C,bC=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}},CC=[];function yC(e,t,i){t instanceof bC||(t=new bC(t,[],!!i)),CC.push([e,t])}function wC(){return CC}function SC(e){return e.scheme===Ha.vscodeRemote?e.authority:void 0}!function(e){e[e.Eager=0]="Eager",e[e.Delayed=1]="Delayed"}(_C||(_C={}));var kC,EC=fn("layoutService"),DC=EC,TC=fn("extensionResourceLoaderService");(function(e){e[e.Ignore=0]="Ignore",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"})(kC||(kC={})),function(e){let t="error",i="warning",n="info";e.fromValue=function(s){return s?pa(t,s)?e.Error:pa(i,s)||pa("warn",s)?e.Warning:pa(n,s)?e.Info:e.Ignore:e.Ignore},e.toString=function(s){switch(s){case e.Error:return t;case e.Warning:return i;case e.Info:return n;default:return"ignore"}}}(kC||(kC={}));var IC,xC=kC;!function(e){e.Extensions="Extensions",e.IntegratedTerminal="IntegratedTerminal",e.InteractiveSession="InteractiveSession",e.Telemetry="Telemetry",e.Update="Update"}(IC||(IC={}));var LC,AC;!function(e){e[e.System=0]="System",e[e.User=1]="User"}(LC||(LC={})),function(e){e.WIN32_X64="win32-x64",e.WIN32_ARM64="win32-arm64",e.LINUX_X64="linux-x64",e.LINUX_ARM64="linux-arm64",e.LINUX_ARMHF="linux-armhf",e.ALPINE_X64="alpine-x64",e.ALPINE_ARM64="alpine-arm64",e.DARWIN_X64="darwin-x64",e.DARWIN_ARM64="darwin-arm64",e.WEB="web",e.UNIVERSAL="universal",e.UNKNOWN="unknown",e.UNDEFINED="undefined"}(AC||(AC={}));var NC,FC,OC,RC,MC,PC,BC,UC,HC,WC=class{constructor(e){this.value=e,this._lower=e.toLowerCase()}static equals(e,t){return null==e?null==t:null!=t&&("string"==typeof e||"string"==typeof t?pa("string"==typeof e?e:e.value,"string"==typeof t?t:t.value):e._lower===t._lower)}static toKey(e){return"string"==typeof e?e.toLowerCase():e._lower}},VC=class{get size(){return this._set.size}constructor(e){if(this._set=new Set,e)for(let t of e)this.add(t)}add(e){this._set.add(WC.toKey(e))}delete(e){return this._set.delete(WC.toKey(e))}has(e){return this._set.has(WC.toKey(e))}},zC="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$";!function(e){e.COMMAND="command",e.SETTINGS_SYNC="settingsSync"}(NC||(NC={})),function(e){e.NoneOrRelevance="NoneOrRelevance",e.LastUpdatedDate="LastUpdatedDate",e.Title="Title",e.PublisherName="PublisherName",e.InstallCount="InstallCount",e.PublishedDate="PublishedDate",e.AverageRating="AverageRating",e.WeightedRating="WeightedRating"}(FC||(FC={})),function(e){e[e.Default=0]="Default",e[e.Ascending=1]="Ascending",e[e.Descending=2]="Descending"}(OC||(OC={})),function(e){e.Category="Category",e.ExtensionId="ExtensionId",e.ExtensionName="ExtensionName",e.ExcludeWithFlags="ExcludeWithFlags",e.Featured="Featured",e.SearchText="SearchText",e.Tag="Tag",e.Target="Target"}(RC||(RC={})),function(e){e.Install="install",e.Uninstall="uninstall"}(MC||(MC={})),function(e){e[e.None=1]="None",e[e.Install=2]="Install",e[e.Update=3]="Update",e[e.Migrate=4]="Migrate"}(PC||(PC={})),function(e){e.Timeout="Timeout",e.Cancelled="Cancelled",e.ClientError="ClientError",e.ServerError="ServerError",e.Failed="Failed",e.DownloadFailedWriting="DownloadFailedWriting",e.Offline="Offline"}(BC||(BC={})),function(e){e.NotFound="NotFound",e.Unsupported="Unsupported",e.Deprecated="Deprecated",e.Malicious="Malicious",e.Incompatible="Incompatible",e.IncompatibleApi="IncompatibleApi",e.IncompatibleTargetPlatform="IncompatibleTargetPlatform",e.ReleaseVersionNotFound="ReleaseVersionNotFound",e.Invalid="Invalid",e.Download="Download",e.DownloadSignature="DownloadSignature",e.DownloadFailedWriting="DownloadFailedWriting",e.UpdateMetadata="UpdateMetadata",e.Extract="Extract",e.Scanning="Scanning",e.ScanningExtension="ScanningExtension",e.ReadRemoved="ReadRemoved",e.UnsetRemoved="UnsetRemoved",e.Delete="Delete",e.Rename="Rename",e.IntializeDefaultProfile="IntializeDefaultProfile",e.AddToProfile="AddToProfile",e.InstalledExtensionNotFound="InstalledExtensionNotFound",e.PostInstall="PostInstall",e.CorruptZip="CorruptZip",e.IncompleteZip="IncompleteZip",e.PackageNotSigned="PackageNotSigned",e.SignatureVerificationInternal="SignatureVerificationInternal",e.SignatureVerificationFailed="SignatureVerificationFailed",e.NotAllowed="NotAllowed",e.Gallery="Gallery",e.Cancelled="Cancelled",e.Unknown="Unknown",e.Internal="Internal"}(UC||(UC={})),function(e){e.NotSigned="NotSigned",e.Success="Success",e.RequiredArgumentMissing="RequiredArgumentMissing",e.InvalidArgument="InvalidArgument",e.PackageIsUnreadable="PackageIsUnreadable",e.UnhandledException="UnhandledException",e.SignatureManifestIsMissing="SignatureManifestIsMissing",e.SignatureManifestIsUnreadable="SignatureManifestIsUnreadable",e.SignatureIsMissing="SignatureIsMissing",e.SignatureIsUnreadable="SignatureIsUnreadable",e.CertificateIsUnreadable="CertificateIsUnreadable",e.SignatureArchiveIsUnreadable="SignatureArchiveIsUnreadable",e.FileAlreadyExists="FileAlreadyExists",e.SignatureArchiveIsInvalidZip="SignatureArchiveIsInvalidZip",e.SignatureArchiveHasSameSignatureFile="SignatureArchiveHasSameSignatureFile",e.PackageIntegrityCheckFailed="PackageIntegrityCheckFailed",e.SignatureIsInvalid="SignatureIsInvalid",e.SignatureManifestIsInvalid="SignatureManifestIsInvalid",e.SignatureIntegrityCheckFailed="SignatureIntegrityCheckFailed",e.EntryIsMissing="EntryIsMissing",e.EntryIsTampered="EntryIsTampered",e.Untrusted="Untrusted",e.CertificateRevoked="CertificateRevoked",e.SignatureIsNotValid="SignatureIsNotValid",e.UnknownError="UnknownError",e.PackageIsInvalidZip="PackageIsInvalidZip",e.SignatureArchiveHasTooManyEntries="SignatureArchiveHasTooManyEntries"}(HC||(HC={})),Ni(1822,"Extensions"),Ni(1823,"Preferences"),Tn.as(em).registerConfiguration({id:"extensions",order:30,title:Li(1824,"Extensions"),type:"object",properties:{"extensions.allowed":{type:"object",markdownDescription:Li(1825,"Specify a list of extensions that are allowed to use. This helps maintain a secure and consistent development environment by restricting the use of unauthorized extensions. For more information on how to configure this setting, please visit the [Configure Allowed Extensions](https://code.visualstudio.com/docs/setup/enterprise#_configure-allowed-extensions) section."),default:"*",defaultSnippets:[{body:{},description:Li(1826,"No extensions are allowed.")},{body:{"*":!0},description:Li(1827,"All extensions are allowed.")}],scope:Jf.APPLICATION,policy:{name:"AllowedExtensions",category:IC.Extensions,minimumVersion:"1.96",localization:{description:{key:"extensions.allowed.policy",value:Li(1828,"Specify a list of extensions that are allowed to use. This helps maintain a secure and consistent development environment by restricting the use of unauthorized extensions. More information: https://code.visualstudio.com/docs/setup/enterprise#_configure-allowed-extensions")}}},additionalProperties:!1,patternProperties:{"([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$":{anyOf:[{type:["boolean","string"],enum:[!0,!1,"stable"],description:Li(1829,"Allow or disallow the extension."),enumDescriptions:[Li(1830,"Extension is allowed."),Li(1831,"Extension is not allowed."),Li(1832,"Allow only stable versions of the extension.")]},{type:"array",items:{type:"string"},description:Li(1833,"Allow or disallow specific versions of the extension. To specifcy a platform specific version, use the format `platform@1.2.3`, e.g. `win32-x64@1.2.3`. Supported platforms are `win32-x64`, `win32-arm64`, `linux-x64`, `linux-arm64`, `linux-armhf`, `alpine-x64`, `alpine-arm64`, `darwin-x64`, `darwin-arm64`")}]},"([a-z0-9A-Z][a-z0-9-A-Z]*)$":{type:["boolean","string"],enum:[!0,!1,"stable"],description:Li(1834,"Allow or disallow all extensions from the publisher."),enumDescriptions:[Li(1835,"All extensions from the publisher are allowed."),Li(1836,"All extensions from the publisher are not allowed."),Li(1837,"Allow only stable versions of the extensions from the publisher.")]},"\\*":{type:"boolean",enum:[!0,!1],description:Li(1838,"Allow or disallow all extensions."),enumDescriptions:[Li(1839,"Allow all extensions."),Li(1840,"Disallow all extensions.")]}}}}});var KC=new class{constructor(){this._generators=new Map,this._cache=new WeakMap}register(e,t){this._generators.set(e,t)}readActivationEvents(e){return this._cache.has(e)||this._cache.set(e,this._readActivationEvents(e)),this._cache.get(e)}createActivationEventsMap(e){let t=Object.create(null);for(let i of e){let e=this.readActivationEvents(i);e.length>0&&(t[WC.toKey(i.identifier)]=e)}return t}_readActivationEvents(e){if(void 0===e.main&&void 0===e.browser)return[];let t=Array.isArray(e.activationEvents)?e.activationEvents.slice(0):[];for(let i=0;i<t.length;i++)"onUri"===t[i]&&(t[i]="onUri:".concat(WC.toKey(e.identifier)));if(!e.contributes)return t;for(let i in e.contributes){let n=this._generators.get(i);if(!n)continue;let s=e.contributes[i],r=Array.isArray(s)?s:[s];try{t.push(...n(r))}catch(e){Ri(e)}}return t}},qC=Object.freeze({activeComment:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.activeComment.d.ts"},aiRelatedInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiRelatedInformation.d.ts"},aiSettingsSearch:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiSettingsSearch.d.ts"},aiTextSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProvider.d.ts",version:2},authIssuers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authIssuers.d.ts"},authLearnMore:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authLearnMore.d.ts"},authProviderSpecific:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authProviderSpecific.d.ts"},authSession:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authSession.d.ts"},authenticationChallenges:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authenticationChallenges.d.ts"},canonicalUriProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.canonicalUriProvider.d.ts"},chatContextProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatContextProvider.d.ts"},chatEditing:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatEditing.d.ts"},chatOutputRenderer:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatOutputRenderer.d.ts"},chatParticipantAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantAdditions.d.ts"},chatParticipantPrivate:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantPrivate.d.ts",version:11},chatProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatProvider.d.ts",version:4},chatReferenceBinaryData:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatReferenceBinaryData.d.ts"},chatReferenceDiagnostic:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatReferenceDiagnostic.d.ts"},chatSessionsProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatSessionsProvider.d.ts",version:3},chatStatusItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatStatusItem.d.ts"},chatTab:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatTab.d.ts"},codeActionAI:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionAI.d.ts"},codeActionRanges:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionRanges.d.ts"},codiconDecoration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codiconDecoration.d.ts"},commentReactor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReactor.d.ts"},commentReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReveal.d.ts"},commentThreadApplicability:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentThreadApplicability.d.ts"},commentingRangeHint:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentingRangeHint.d.ts"},commentsDraftState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentsDraftState.d.ts"},contribAccessibilityHelpContent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribAccessibilityHelpContent.d.ts"},contribCommentEditorActionsMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentEditorActionsMenu.d.ts"},contribCommentPeekContext:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentPeekContext.d.ts"},contribCommentThreadAdditionalMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentThreadAdditionalMenu.d.ts"},contribCommentsViewThreadMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentsViewThreadMenus.d.ts"},contribDebugCreateConfiguration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDebugCreateConfiguration.d.ts"},contribDiffEditorGutterToolBarMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDiffEditorGutterToolBarMenus.d.ts"},contribEditSessions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditSessions.d.ts"},contribEditorContentMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditorContentMenu.d.ts"},contribLabelFormatterWorkspaceTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLabelFormatterWorkspaceTooltip.d.ts"},contribLanguageModelToolSets:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLanguageModelToolSets.d.ts"},contribMenuBarHome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMenuBarHome.d.ts"},contribMergeEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMergeEditorMenus.d.ts"},contribMultiDiffEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMultiDiffEditorMenus.d.ts"},contribNotebookStaticPreloads:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribNotebookStaticPreloads.d.ts"},contribRemoteHelp:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribRemoteHelp.d.ts"},contribShareMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribShareMenu.d.ts"},contribSourceControlArtifactGroupMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlArtifactGroupMenu.d.ts"},contribSourceControlArtifactMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlArtifactMenu.d.ts"},contribSourceControlHistoryItemMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryItemMenu.d.ts"},contribSourceControlHistoryTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryTitleMenu.d.ts"},contribSourceControlInputBoxMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlInputBoxMenu.d.ts"},contribSourceControlTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlTitleMenu.d.ts"},contribStatusBarItems:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribStatusBarItems.d.ts"},contribViewContainerTitle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewContainerTitle.d.ts"},contribViewsRemote:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsRemote.d.ts"},contribViewsWelcome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsWelcome.d.ts"},customEditorMove:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.customEditorMove.d.ts"},dataChannels:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.dataChannels.d.ts"},debugVisualization:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.debugVisualization.d.ts"},defaultChatParticipant:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.defaultChatParticipant.d.ts",version:4},devDeviceId:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.devDeviceId.d.ts"},diffCommand:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffCommand.d.ts"},diffContentOptions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffContentOptions.d.ts"},documentFiltersExclusive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentFiltersExclusive.d.ts"},editSessionIdentityProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editSessionIdentityProvider.d.ts"},editorHoverVerbosityLevel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorHoverVerbosityLevel.d.ts"},editorInsets:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorInsets.d.ts"},embeddings:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.embeddings.d.ts"},extensionRuntime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionRuntime.d.ts"},extensionsAny:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionsAny.d.ts"},externalUriOpener:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.externalUriOpener.d.ts"},fileSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider.d.ts"},fileSearchProvider2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider2.d.ts"},findFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2.d.ts",version:2},findTextInFiles:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles.d.ts"},findTextInFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles2.d.ts"},fsChunks:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fsChunks.d.ts"},inlineCompletionsAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineCompletionsAdditions.d.ts"},interactive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactive.d.ts"},interactiveWindow:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactiveWindow.d.ts"},ipc:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.ipc.d.ts"},languageModelCapabilities:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelCapabilities.d.ts"},languageModelProxy:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelProxy.d.ts"},languageModelSystem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelSystem.d.ts"},languageModelThinkingPart:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelThinkingPart.d.ts",version:1},languageModelToolResultAudience:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelToolResultAudience.d.ts"},languageStatusText:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageStatusText.d.ts"},mappedEditsProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.mappedEditsProvider.d.ts"},markdownAlertSyntax:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.markdownAlertSyntax.d.ts"},mcpToolDefinitions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.mcpToolDefinitions.d.ts"},multiDocumentHighlightProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.multiDocumentHighlightProvider.d.ts"},nativeWindowHandle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.nativeWindowHandle.d.ts"},newSymbolNamesProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.newSymbolNamesProvider.d.ts"},notebookCellExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecution.d.ts"},notebookControllerAffinityHidden:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookControllerAffinityHidden.d.ts"},notebookDeprecated:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookDeprecated.d.ts"},notebookExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookExecution.d.ts"},notebookKernelSource:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookKernelSource.d.ts"},notebookLiveShare:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookLiveShare.d.ts"},notebookMessaging:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMessaging.d.ts"},notebookMime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMime.d.ts"},notebookReplDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookReplDocument.d.ts"},notebookVariableProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookVariableProvider.d.ts"},portsAttributes:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.portsAttributes.d.ts"},profileContentHandlers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.profileContentHandlers.d.ts"},quickDiffProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickDiffProvider.d.ts"},quickInputButtonLocation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickInputButtonLocation.d.ts"},quickPickItemResource:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickItemResource.d.ts"},quickPickItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickItemTooltip.d.ts"},quickPickPrompt:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickPrompt.d.ts"},quickPickSortByLabel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickSortByLabel.d.ts"},remoteCodingAgents:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.remoteCodingAgents.d.ts"},resolvers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.resolvers.d.ts"},scmActionButton:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmActionButton.d.ts"},scmArtifactProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmArtifactProvider.d.ts"},scmHistoryProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmHistoryProvider.d.ts"},scmMultiDiffEditor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmMultiDiffEditor.d.ts"},scmProviderOptions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmProviderOptions.d.ts"},scmSelectedProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmSelectedProvider.d.ts"},scmTextDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmTextDocument.d.ts"},scmValidation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmValidation.d.ts"},shareProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.shareProvider.d.ts"},speech:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.speech.d.ts"},statusBarItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.statusBarItemTooltip.d.ts"},tabInputMultiDiff:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputMultiDiff.d.ts"},tabInputTextMerge:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputTextMerge.d.ts"},taskExecutionTerminal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskExecutionTerminal.d.ts"},taskPresentationGroup:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskPresentationGroup.d.ts"},taskProblemMatcherStatus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskProblemMatcherStatus.d.ts"},telemetry:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.telemetry.d.ts"},terminalCompletionProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalCompletionProvider.d.ts"},terminalDataWriteEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDataWriteEvent.d.ts"},terminalDimensions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDimensions.d.ts"},terminalExecuteCommandEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalExecuteCommandEvent.d.ts"},terminalQuickFixProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalQuickFixProvider.d.ts"},terminalSelection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalSelection.d.ts"},terminalShellEnv:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalShellEnv.d.ts"},testObserver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testObserver.d.ts"},testRelatedCode:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testRelatedCode.d.ts"},textDocumentChangeReason:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textDocumentChangeReason.d.ts"},textEditorDiffInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textEditorDiffInformation.d.ts"},textSearchComplete2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchComplete2.d.ts"},textSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider.d.ts"},textSearchProvider2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider2.d.ts"},timeline:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.timeline.d.ts"},tokenInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tokenInformation.d.ts"},toolProgress:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.toolProgress.d.ts"},treeItemMarkdownLabel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeItemMarkdownLabel.d.ts"},treeViewActiveItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewActiveItem.d.ts"},treeViewMarkdownMessage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewMarkdownMessage.d.ts"},treeViewReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewReveal.d.ts"},tunnelFactory:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnelFactory.d.ts"},tunnels:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnels.d.ts"},valueSelectionInQuickPick:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.valueSelectionInQuickPick.d.ts"},workspaceTrust:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.workspaceTrust.d.ts"}}),GC=Tn.as(Gl),jC=class e{static _toSet(e){let t=new VC;for(let i=0,n=e.length;i<n;i++)t.add(e[i].description.identifier);return t}static compute(t,i){if(!t||!t.length)return new e(i,[]);if(!i||!i.length)return new e([],t);let n=this._toSet(t),s=this._toSet(i);return new e(i.filter(e=>!n.has(e.description.identifier)),t.filter(e=>!s.has(e.description.identifier)))}constructor(e,t){this.added=e,this.removed=t}},YC=class{constructor(e,t,i){this.name=e,this.defaultExtensionKind=t,this.canHandleResolver=i,this._handler=null,this._users=null,this._delta=null}setHandler(e){if(null!==this._handler)throw Error("Handler already set!");return this._handler=e,this._handle(),{dispose:()=>{this._handler=null}}}acceptUsers(e){this._delta=jC.compute(this._users,e),this._users=e,this._handle()}_handle(){if(null!==this._handler&&null!==this._users&&null!==this._delta)try{this._handler(this._users,this._delta)}catch(hn){Ri(hn)}}},QC={type:"string",enum:["ui","workspace"],enumDescriptions:[Li(13953,"UI extension kind. In a remote window, such extensions are enabled only when available on the local machine."),Li(13954,"Workspace extension kind. In a remote window, such extensions are enabled only when available on the remote.")]},$C="vscode://schemas/vscode-extensions",XC={properties:{engines:{type:"object",description:Li(13955,"Engine compatibility."),properties:{vscode:{type:"string",description:Li(13956,"For VS Code extensions, specifies the VS Code version that the extension is compatible with. Cannot be *. For example: ^0.10.5 indicates compatibility with a minimum VS Code version of 0.10.5."),default:"^1.22.0"}}},publisher:{description:Li(13957,"The publisher of the VS Code extension."),type:"string"},displayName:{description:Li(13958,"The display name for the extension used in the VS Code gallery."),type:"string"},categories:{description:Li(13959,"The categories used by the VS Code gallery to categorize the extension."),type:"array",uniqueItems:!0,items:{oneOf:[{type:"string",enum:["AI","Azure","Chat","Data Science","Debuggers","Extension Packs","Education","Formatters","Keymaps","Language Packs","Linters","Machine Learning","Notebooks","Programming Languages","SCM Providers","Snippets","Testing","Themes","Visualization","Other"]},{type:"string",const:"Languages",deprecationMessage:Li(13960,"Use 'Programming  Languages' instead")}]}},galleryBanner:{type:"object",description:Li(13961,"Banner used in the VS Code marketplace."),properties:{color:{description:Li(13962,"The banner color on the VS Code marketplace page header."),type:"string"},theme:{description:Li(13963,"The color theme for the font used in the banner."),type:"string",enum:["dark","light"]}}},contributes:{description:Li(13964,"All contributions of the VS Code extension represented by this package."),type:"object",properties:{},default:{}},preview:{type:"boolean",description:Li(13965,"Sets the extension to be flagged as a Preview in the Marketplace.")},enableProposedApi:{type:"boolean",deprecationMessage:Li(13966,"Use `enabledApiProposals` instead.")},enabledApiProposals:{markdownDescription:Li(13967,"Enable API proposals to try them out. Only valid **during development**. Extensions **cannot be published** with this property. For more details visit: https://code.visualstudio.com/api/advanced-topics/using-proposed-api"),type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(qC).map(e=>e),markdownEnumDescriptions:Object.values(qC).map(e=>e.proposal)}},api:{markdownDescription:Li(13968,"Describe the API provided by this extension. For more details visit: https://code.visualstudio.com/api/advanced-topics/remote-extensions#handling-dependencies-with-remote-extensions"),type:"string",enum:["none"],enumDescriptions:[Li(13969,"Give up entirely the ability to export any APIs. This allows other extensions that depend on this extension to run in a separate extension host process or in a remote machine.")]},activationEvents:{description:Li(13970,"Activation events for the VS Code extension."),type:"array",items:{type:"string",defaultSnippets:[{label:"onWebviewPanel",description:Li(13971,"An activation event emmited when a webview is loaded of a certain viewType"),body:"onWebviewPanel:viewType"},{label:"onLanguage",description:Li(13972,"An activation event emitted whenever a file that resolves to the specified language gets opened."),body:"onLanguage:${1:languageId}"},{label:"onCommand",description:Li(13973,"An activation event emitted whenever the specified command gets invoked."),body:"onCommand:${2:commandId}"},{label:"onDebug",description:Li(13974,"An activation event emitted whenever a user is about to start debugging or about to setup debug configurations."),body:"onDebug"},{label:"onDebugInitialConfigurations",description:Li(13975,'An activation event emitted whenever a "launch.json" needs to be created (and all provideDebugConfigurations methods need to be called).'),body:"onDebugInitialConfigurations"},{label:"onDebugDynamicConfigurations",description:Li(13976,'An activation event emitted whenever a list of all debug configurations needs to be created (and all provideDebugConfigurations methods for the "dynamic" scope need to be called).'),body:"onDebugDynamicConfigurations"},{label:"onDebugResolve",description:Li(13977,"An activation event emitted whenever a debug session with the specific type is about to be launched (and a corresponding resolveDebugConfiguration method needs to be called)."),body:"onDebugResolve:${6:type}"},{label:"onDebugAdapterProtocolTracker",description:Li(13978,"An activation event emitted whenever a debug session with the specific type is about to be launched and a debug protocol tracker might be needed."),body:"onDebugAdapterProtocolTracker:${6:type}"},{label:"workspaceContains",description:Li(13979,"An activation event emitted whenever a folder is opened that contains at least a file matching the specified glob pattern."),body:"workspaceContains:${4:filePattern}"},{label:"onStartupFinished",description:Li(13980,"An activation event emitted after the start-up finished (after all `*` activated extensions have finished activating)."),body:"onStartupFinished"},{label:"onTaskType",description:Li(13981,"An activation event emitted whenever tasks of a certain type need to be listed or resolved."),body:"onTaskType:${1:taskType}"},{label:"onFileSystem",description:Li(13982,"An activation event emitted whenever a file or folder is accessed with the given scheme."),body:"onFileSystem:${1:scheme}"},{label:"onEditSession",description:Li(13983,"An activation event emitted whenever an edit session is accessed with the given scheme."),body:"onEditSession:${1:scheme}"},{label:"onSearch",description:Li(13984,"An activation event emitted whenever a search is started in the folder with the given scheme."),body:"onSearch:${7:scheme}"},{label:"onView",body:"onView:${5:viewId}",description:Li(13985,"An activation event emitted whenever the specified view is expanded.")},{label:"onUri",body:"onUri",description:Li(13986,"An activation event emitted whenever a system-wide Uri directed towards this extension is open.")},{label:"onOpenExternalUri",body:"onOpenExternalUri",description:Li(13987,"An activation event emitted whenever a external uri (such as an http or https link) is being opened.")},{label:"onCustomEditor",body:"onCustomEditor:${9:viewType}",description:Li(13988,"An activation event emitted whenever the specified custom editor becomes visible.")},{label:"onNotebook",body:"onNotebook:${1:type}",description:Li(13989,"An activation event emitted whenever the specified notebook document is opened.")},{label:"onAuthenticationRequest",body:"onAuthenticationRequest:${11:authenticationProviderId}",description:Li(13990,"An activation event emitted whenever sessions are requested from the specified authentication provider.")},{label:"onRenderer",description:Li(13991,"An activation event emitted whenever a notebook output renderer is used."),body:"onRenderer:${11:rendererId}"},{label:"onTerminalProfile",body:"onTerminalProfile:${1:terminalId}",description:Li(13992,"An activation event emitted when a specific terminal profile is launched.")},{label:"onTerminalQuickFixRequest",body:"onTerminalQuickFixRequest:${1:quickFixId}",description:Li(13993,"An activation event emitted when a command matches the selector associated with this ID")},{label:"onWalkthrough",body:"onWalkthrough:${1:walkthroughID}",description:Li(13994,"An activation event emitted when a specified walkthrough is opened.")},{label:"onIssueReporterOpened",body:"onIssueReporterOpened",description:Li(13995,"An activation event emitted when the issue reporter is opened.")},{label:"onChatParticipant",body:"onChatParticipant:${1:participantId}",description:Li(13996,"An activation event emitted when the specified chat participant is invoked.")},{label:"onLanguageModelChatProvider",body:"onLanguageModelChatProvider:${1:vendor}",description:Li(13997,"An activation event emitted when a chat model provider for the given vendor is requested.")},{label:"onLanguageModelTool",body:"onLanguageModelTool:${1:toolId}",description:Li(13998,"An activation event emitted when the specified language model tool is invoked.")},{label:"onTerminal",body:"onTerminal:{1:shellType}",description:Li(13999,"An activation event emitted when a terminal of the given shell type is opened.")},{label:"onTerminalShellIntegration",body:"onTerminalShellIntegration:${1:shellType}",description:Li(14e3,"An activation event emitted when terminal shell integration is activated for the given shell type.")},{label:"onMcpCollection",description:Li(14001,"An activation event emitted whenver a tool from the MCP server is requested."),body:"onMcpCollection:${2:collectionId}"},{label:"*",description:Li(14002,"An activation event emitted on VS Code startup. To ensure a great end user experience, please use this activation event in your extension only when no other activation events combination works in your use-case."),body:"*"}]}},badges:{type:"array",description:Li(14003,"Array of badges to display in the sidebar of the Marketplace's extension page."),items:{type:"object",required:["url","href","description"],properties:{url:{type:"string",description:Li(14004,"Badge image URL.")},href:{type:"string",description:Li(14005,"Badge link.")},description:{type:"string",description:Li(14006,"Badge description.")}}}},markdown:{type:"string",description:Li(14007,"Controls the Markdown rendering engine used in the Marketplace. Either github (default) or standard."),enum:["github","standard"],default:"github"},qna:{default:"marketplace",description:Li(14008,"Controls the Q&A link in the Marketplace. Set to marketplace to enable the default Marketplace Q & A site. Set to a string to provide the URL of a custom Q & A site. Set to false to disable Q & A altogether."),anyOf:[{type:["string","boolean"],enum:["marketplace",!1]},{type:"string"}]},extensionDependencies:{description:Li(14009,"Dependencies to other extensions. The identifier of an extension is always ${publisher}.${name}. For example: vscode.csharp."),type:"array",uniqueItems:!0,items:{type:"string",pattern:zC}},extensionPack:{description:Li(14010,"A set of extensions that can be installed together. The identifier of an extension is always ${publisher}.${name}. For example: vscode.csharp."),type:"array",uniqueItems:!0,items:{type:"string",pattern:zC}},extensionKind:{description:Li(14011,"Define the kind of an extension. `ui` extensions are installed and run on the local machine while `workspace` extensions run on the remote."),type:"array",items:QC,default:["workspace"],defaultSnippets:[{body:["ui"],description:Li(14012,"Define an extension which can run only on the local machine when connected to remote window.")},{body:["workspace"],description:Li(14013,"Define an extension which can run only on the remote machine when connected remote window.")},{body:["ui","workspace"],description:Li(14014,"Define an extension which can run on either side, with a preference towards running on the local machine.")},{body:["workspace","ui"],description:Li(14015,"Define an extension which can run on either side, with a preference towards running on the remote machine.")},{body:[],description:Li(14016,"Define an extension which cannot run in a remote context, neither on the local, nor on the remote machine.")}]},capabilities:{description:Li(14017,"Declare the set of supported capabilities by the extension."),type:"object",properties:{virtualWorkspaces:{description:Li(14018,"Declares whether the extension should be enabled in virtual workspaces. A virtual workspace is a workspace which is not backed by any on-disk resources. When false, this extension will be automatically disabled in virtual workspaces. Default is true."),type:["boolean","object"],defaultSnippets:[{label:"limited",body:{supported:"${1:limited}",description:"${2}"}},{label:"false",body:{supported:!1,description:"${2}"}}],default:(!0).valueOf,properties:{supported:{markdownDescription:Li(14019,"Declares the level of support for virtual workspaces by the extension."),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[Li(14020,"The extension will be enabled in virtual workspaces with some functionality disabled."),Li(14021,"The extension will be enabled in virtual workspaces with all functionality enabled."),Li(14022,"The extension will not be enabled in virtual workspaces.")]},description:{type:"string",markdownDescription:Li(14023,"A description of how virtual workspaces affects the extensions behavior and why it is needed. This only applies when `supported` is not `true`.")}}},untrustedWorkspaces:{description:Li(14024,"Declares how the extension should be handled in untrusted workspaces."),type:"object",required:["supported"],defaultSnippets:[{body:{supported:"${1:limited}",description:"${2}"}}],properties:{supported:{markdownDescription:Li(14025,"Declares the level of support for untrusted workspaces by the extension."),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[Li(14026,"The extension will be enabled in untrusted workspaces with some functionality disabled."),Li(14027,"The extension will be enabled in untrusted workspaces with all functionality enabled."),Li(14028,"The extension will not be enabled in untrusted workspaces.")]},restrictedConfigurations:{description:Li(14029,"A list of configuration keys contributed by the extension that should not use workspace values in untrusted workspaces."),type:"array",items:{type:"string"}},description:{type:"string",markdownDescription:Li(14030,"A description of how workspace trust affects the extensions behavior and why it is needed. This only applies when `supported` is not `true`.")}}}}},sponsor:{description:Li(14031,"Specify the location from where users can sponsor your extension."),type:"object",defaultSnippets:[{body:{url:"${1:https:}"}}],properties:{url:{description:Li(14032,"URL from where users can sponsor your extension. It must be a valid URL with a HTTP or HTTPS protocol. Example value: https://github.com/sponsors/nvaccess"),type:"string"}}},scripts:{type:"object",properties:{"vscode:prepublish":{description:Li(14033,"Script executed before the package is published as a VS Code extension."),type:"string"},"vscode:uninstall":{description:Li(14034,"Uninstall hook for VS Code extension. Script that gets executed when the extension is completely uninstalled from VS Code which is when VS Code is restarted (shutdown and start) after the extension is uninstalled. Only Node scripts are supported."),type:"string"}}},icon:{type:"string",description:Li(14035,"The path to a 128x128 pixel icon.")},l10n:{type:"string",description:Li(14036,"The relative path to a folder containing localization (bundle.l10n.*.json) files. Must be specified if you are using the vscode.l10n API.")},pricing:{type:"string",markdownDescription:Li(14037,"The pricing information for the extension. Can be Free (default) or Trial. For more details visit: https://code.visualstudio.com/api/working-with-extensions/publishing-extension#extension-pricing-label"),enum:["Free","Trial"],default:"Free"}}},ZC="ExtensionsRegistry";Tn.add(ZC,new class{constructor(){this._extensionPoints=new Map}registerExtensionPoint(e){if(this._extensionPoints.has(e.extensionPoint))throw Error("Duplicate extension point: "+e.extensionPoint);let t=new YC(e.extensionPoint,e.defaultExtensionKind,e.canHandleResolver);return this._extensionPoints.set(e.extensionPoint,t),e.activationEventsGenerator&&KC.register(e.extensionPoint,e.activationEventsGenerator),XC.properties.contributes.properties[e.extensionPoint]=e.jsonSchema,GC.registerSchema($C,XC),t}getExtensionPoints(){return Array.from(this._extensionPoints.values())}});var JC,ey=Tn.as(ZC);GC.registerSchema($C,XC),GC.registerSchema("vscode://schemas/vscode-product",{properties:{extensionEnabledApiProposals:{description:Li(14038,"API proposals that the respective extensions can freely use."),type:"object",properties:{},additionalProperties:{anyOf:[{type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(qC),markdownEnumDescriptions:Object.values(qC).map(e=>e.proposal)}}]}}}}),function(e){e.ExtensionFeaturesRegistry="workbench.registry.extensionFeatures"}(JC||(JC={}));var ty,iy,ny;Tn.add(JC.ExtensionFeaturesRegistry,new class{constructor(){this.extensionFeatures=new Map}registerExtensionFeature(e){if(this.extensionFeatures.has(e.id))throw Error("Extension feature with id '".concat(e.id,"' already exists"));return this.extensionFeatures.set(e.id,e),{dispose:()=>this.extensionFeatures.delete(e.id)}}getExtensionFeature(e){return this.extensionFeatures.get(e)}getExtensionFeatures(){return Array.from(this.extensionFeatures.values())}}),new Uint32Array(10),function(e){e[e.InitialConsonant=4352]="InitialConsonant",e[e.Vowel=4449]="Vowel",e[e.FinalConsonant=4520]="FinalConsonant",e[e.CompatibilityJamo=12593]="CompatibilityJamo"}(ty||(ty={})),function(e){e[e.NUL=0]="NUL",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z"}(iy||(iy={})),function(e){e[e.fa=24934]="fa",e[e.fg=26470]="fg",e[e.fq=29030]="fq",e[e.fr=29286]="fr",e[e.ft=29798]="ft",e[e.fv=30310]="fv",e[e.fx=30822]="fx",e[e.hk=27496]="hk",e[e.hl=27752]="hl",e[e.ho=28520]="ho",e[e.ml=27757]="ml",e[e.nj=27246]="nj",e[e.nl=27758]="nl",e[e.np=28782]="np",e[e.qt=29809]="qt",e[e.rt=29810]="rt",e[e.sg=26483]="sg",e[e.sw=30579]="sw"}(ny||(ny={})),new Uint8Array([iy.r,iy.R,iy.s,iy.e,iy.E,iy.f,iy.a,iy.q,iy.Q,iy.t,iy.T,iy.d,iy.w,iy.W,iy.c,iy.z,iy.x,iy.v,iy.g]),new Uint16Array([iy.k,iy.o,iy.i,iy.O,iy.j,iy.p,iy.u,iy.P,iy.h,ny.hk,ny.ho,ny.hl,iy.y,iy.n,ny.nj,ny.np,ny.nl,iy.b,iy.m,ny.ml,iy.l]),new Uint16Array([iy.r,iy.R,ny.rt,iy.s,ny.sw,ny.sg,iy.e,iy.f,ny.fr,ny.fa,ny.fq,ny.ft,ny.fx,ny.fv,ny.fg,iy.a,iy.q,ny.qt,iy.t,iy.T,iy.d,iy.w,iy.c,iy.z,iy.x,iy.v,iy.g]),new Uint16Array([iy.r,iy.R,ny.rt,iy.s,ny.sw,ny.sg,iy.e,iy.E,iy.f,ny.fr,ny.fa,ny.fq,ny.ft,ny.fx,ny.fv,ny.fg,iy.a,iy.q,iy.Q,ny.qt,iy.t,iy.T,iy.d,iy.w,iy.W,iy.c,iy.z,iy.x,iy.v,iy.g,iy.k,iy.o,iy.i,iy.O,iy.j,iy.p,iy.u,iy.P,iy.h,ny.hk,ny.ho,ny.hl,iy.y,iy.n,ny.nj,ny.np,ny.nl,iy.b,iy.m,ny.ml,iy.l]);new ho(1e4);function sy(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e,i){for(let n=0,s=t.length;n<s;n++){let s=t[n](e,i);if(s)return s}return null}}!function(){let e=new ho(1e4),t=/[\u0300-\u036f]/g}(),oy.bind(void 0,!1);var ry=oy.bind(void 0,!0);function oy(e,t,i){if(!i||i.length<t.length)return null;let n;return n=e?ma(i,t):0===i.indexOf(t),n?t.length>0?[{start:0,end:t.length}]:[]:null}function ay(e,t,i,n){if(i===e.length)return[];if(n===t.length)return null;if(e[i]===t[n]){let s=null;return(s=ay(e,t,i+1,n+1))?py({start:n,end:n+1},s):null}return ay(e,t,i,n+1)}function ly(e){return En.a<=e&&e<=En.z}function hy(e){return En.A<=e&&e<=En.Z}function dy(e){return En.Digit0<=e&&e<=En.Digit9}function cy(e){return e===En.Space||e===En.Tab||e===En.LineFeed||e===En.CarriageReturn}var uy=new Set;function gy(e){return ly(e)||hy(e)||dy(e)}function py(e,t){return 0===t.length?t=[e]:e.end===t[0].start?t[0].start=e.start:t.unshift(e),t}function fy(e,t){for(let i=t;i<e.length;i++){let t=e.charCodeAt(i);if(hy(t)||dy(t)||i>0&&!gy(e.charCodeAt(i-1)))return i}return e.length}function my(e,t,i,n){if(i===e.length)return[];if(n===t.length||e[i]!==t[n].toLowerCase())return null;{let s=null,r=n+1;for(s=my(e,t,i+1,n+1);!s&&(r=fy(t,r))<t.length;)s=my(e,t,i+1,r),r++;return null===s?null:py({start:n,end:n+1},s)}}function vy(e,t){if(!t||0===(t=t.trim()).length||!function(e){let t=0,i=0,n=0,s=0;for(let r=0;r<e.length;r++)n=e.charCodeAt(r),hy(n)&&t++,ly(n)&&i++,cy(n)&&s++;return 0!==t&&0!==i||0!==s?t<=5:e.length<=30}(e))return null;t.length>60&&(t=t.substring(0,60));let i=function(e){let t=0,i=0,n=0,s=0,r=0;for(let o=0;o<e.length;o++)r=e.charCodeAt(o),hy(r)&&t++,ly(r)&&i++,gy(r)&&n++,dy(r)&&s++;return{upperPercent:t/e.length,lowerPercent:i/e.length,alphaPercent:n/e.length,numericPercent:s/e.length}}(t);if(!function(e){let{upperPercent:t,lowerPercent:i,alphaPercent:n,numericPercent:s}=e;return i>.2&&t<.8&&n>.6&&s<.2}(i)){if(!function(e){let{upperPercent:t,lowerPercent:i}=e;return 0===i&&t>.6}(i))return null;t=t.toLowerCase()}let n=null,s=0;for(e=e.toLowerCase();s<t.length&&null===(n=my(e,t,0,s));)s=fy(t,s+1);return n}"()[]{}<>`'\"-/;:,.?!".split("").forEach(e=>uy.add(e.charCodeAt(0)));var _y=sy(ry,vy,function(e,t){if(e.length>t.length)return null;let i=t.toLowerCase().indexOf(e.toLowerCase());return-1===i?null:[{start:i,end:i+e.length}]}),by=sy(ry,vy,function(e,t){return e.length>t.length?null:ay(e.toLowerCase(),t.toLowerCase(),0,0)}),Cy=new ho(1e4);function yy(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof e||"string"!=typeof t)return null;let n=Cy.get(e);n||(n=new RegExp(function(e){return e.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}(e),"i"),Cy.set(e,n));let s=n.exec(t);return s?[{start:s.index,end:s.index+s[0].length}]:i?by(e,t):_y(e,t)}function wy(e,t){let i=Py(e,e.toLowerCase(),0,t,t.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return i?function(e){if(void 0===e)return[];let t=[],i=e[1];for(let n=e.length-1;n>1;n--){let s=e[n]+i,r=t[t.length-1];r&&r.end===s?r.end=s+1:t.push({start:s,end:s+1})}return t}(i):null}var Sy=128;function ky(){let e=[],t=[];for(let i=0;i<=Sy;i++)t[i]=0;for(let i=0;i<=Sy;i++)e.push(t.slice(0));return e}function Ey(e){let t=[];for(let i=0;i<=e;i++)t[i]=0;return t}var Dy,Ty,Iy=Ey(2*Sy),xy=Ey(2*Sy),Ly=ky(),Ay=ky(),Ny=ky();function Fy(e,t){if(t<0||t>=e.length)return!1;let i=e.codePointAt(t);switch(i){case En.Underline:case En.Dash:case En.Period:case En.Space:case En.Slash:case En.Backslash:case En.SingleQuote:case En.DoubleQuote:case En.Colon:case En.DollarSign:case En.LessThan:case En.GreaterThan:case En.OpenParen:case En.CloseParen:case En.OpenSquareBracket:case En.CloseSquareBracket:case En.OpenCurlyBrace:case En.CloseCurlyBrace:return!0;case void 0:return!1;default:return!!Oa(i)}}function Oy(e,t){if(t<0||t>=e.length)return!1;switch(e.charCodeAt(t)){case En.Space:case En.Tab:return!0;default:return!1}}function Ry(e,t,i){return t[e]!==i[e]}!function(e){e[e.Diag=1]="Diag",e[e.Left=2]="Left",e[e.LeftLeft=3]="LeftLeft"}(Dy||(Dy={})),function(e){e.Default=[-100,0],e.isDefault=function(e){return!e||2===e.length&&-100===e[0]&&0===e[1]}}(Ty||(Ty={}));var My=(Me=class{constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}},{_:Me.default={boostFullMatch:!0,firstMatchCanBeWeak:!1}},Me);function Py(e,t,i,n,s,r){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:My.default,a=e.length>Sy?Sy:e.length,l=n.length>Sy?Sy:n.length;if(i>=a||r>=l||a-i>l-r||!function(e,t,i,n,s,r){let o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];for(;t<i&&s<r;)e[t]===n[s]&&(o&&(Iy[t]=s),t+=1),s+=1;return t===i}(t,i,a,s,r,l,!0))return;!function(e,t,i,n,s,r){let o=e-1,a=t-1;for(;o>=i&&a>=n;)s[o]===r[a]&&(xy[o]=a,o--),a--}(a,l,i,r,t,s);let h=1,d=1,c=i,u=r,g=[!1];for(h=1,c=i;c<a;h++,c++){let o=Iy[c],p=xy[c],f=c+1<a?xy[c+1]:l;for(d=o-r+1,u=o;u<f;d++,u++){let a=-(2**53-1),f=!1;u<=p&&(a=By(e,t,c,i,n,s,u,l,r,0===Ly[h-1][d-1],g));let m=0;a!==-(2**53-1)&&(f=!0,m=a+Ay[h-1][d-1]);let v=u>o,_=v?Ay[h][d-1]+(Ly[h][d-1]>0?-5:0):0,b=u>o+1&&Ly[h][d-1]>0,C=b?Ay[h][d-2]+(Ly[h][d-2]>0?-5:0):0;if(b&&(!v||C>=_)&&(!f||C>=m))Ay[h][d]=C,Ny[h][d]=Dy.LeftLeft,Ly[h][d]=0;else if(v&&(!f||_>=m))Ay[h][d]=_,Ny[h][d]=Dy.Left,Ly[h][d]=0;else{if(!f)throw Error("not possible");Ay[h][d]=m,Ny[h][d]=Dy.Diag,Ly[h][d]=Ly[h-1][d-1]+1}}}if(!g[0]&&!o.firstMatchCanBeWeak)return;h--,d--;let p=[Ay[h][d],r],f=0,m=0;for(;h>=1;){let e=d;do{let t=Ny[h][e];if(t===Dy.LeftLeft)e-=2;else{if(t!==Dy.Left)break;--e}}while(e>=1);f>1&&t[i+h-1]===s[r+d-1]&&!Ry(e+r-1,n,s)&&f+1>Ly[h][e]&&(e=d),e===d?f++:f=1,m||(m=e),h--,d=e-1,p.push(d)}l-r===a&&o.boostFullMatch&&(p[0]+=2);let v=m-a;return p[0]-=v,p}function By(e,t,i,n,s,r,o,a,l,h,d){if(t[i]!==r[o])return-(2**53-1);let c=1,u=!1;return o===i-n?c=e[i]===s[o]?7:5:!Ry(o,s,r)||0!==o&&Ry(o-1,s,r)?!Fy(r,o)||0!==o&&Fy(r,o-1)?(Fy(r,o-1)||Oy(r,o-1))&&(c=5,u=!0):c=5:(c=e[i]===s[o]?7:5,u=!0),c>1&&i===n&&(d[0]=!0),u||(u=Ry(o,s,r)||Fy(r,o-1)||Oy(r,o-1)),i===n?o>l&&(c-=u?3:5):c+=h?u?2:0:u?0:1,o+1===a&&(c-=u?3:5),c}var Uy=RegExp("\\$\\(".concat(yf.iconNameExpression,"(?:").concat(yf.iconModifierExpression,")?\\)"),"g"),Hy=RegExp("(\\\\)?".concat(Uy.source),"g");var Wy=RegExp("\\\\".concat(Uy.source),"g");var Vy=RegExp("(\\s)?(\\\\)?".concat(Uy.source,"(\\s)?"),"g");function zy(e){return-1===e.indexOf("$(")?e:e.replace(Vy,(e,t,i,n)=>i?e:t||n||"")}function Ky(e){return e?e.replace(/\$\((.*?)\)/g,(e,t)=>" ".concat(t," ")).trim():""}var qy,Gy=RegExp("\\$\\(".concat(yf.iconNameCharacter,"+\\)"),"g");function jy(e){Gy.lastIndex=0;let t="",i=[],n=0;for(;;){let s=Gy.lastIndex,r=Gy.exec(e),o=e.substring(s,null===r||void 0===r?void 0:r.index);if(o.length>0){t+=o;for(let e=0;e<o.length;e++)i.push(n)}if(!r)break;n+=r[0].length}return{text:t,iconOffsets:i}}function Yy(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{text:n,iconOffsets:s}=t;if(!s||0===s.length)return yy(e,n,i);let r=ra(n," "),o=n.length-r.length,a=yy(e,r,i);if(a)for(let l of a){let e=s[l.start+o]+o;l.start+=e,l.end+=e}return a}!function(e){e[e.Paragraph=0]="Paragraph",e[e.Break=1]="Break"}(qy||(qy={}));var Qy=class e{static lift(t){let i=new e(t.value,t);return i.uris=t.uris,i.baseUri=t.baseUri?Gs.revive(t.baseUri):void 0,i}constructor(){var e,t,i,n;let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.value=s,"string"!=typeof this.value)throw Hi("value");"boolean"==typeof r?(this.isTrusted=r,this.supportThemeIcons=!1,this.supportHtml=!1,this.supportAlertSyntax=!1):(this.isTrusted=null!==(e=r.isTrusted)&&void 0!==e?e:void 0,this.supportThemeIcons=null!==(t=r.supportThemeIcons)&&void 0!==t&&t,this.supportHtml=null!==(i=r.supportHtml)&&void 0!==i&&i,this.supportAlertSyntax=null!==(n=r.supportAlertSyntax)&&void 0!==n&&n)}appendText(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qy.Paragraph;return this.value+=function(e){return e.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}(this.supportThemeIcons?function(e){return e.replace(Hy,(e,t)=>t?e:"\\".concat(e))}(e):e).replace(/([ \t]+)/g,(e,t)=>"&nbsp;".repeat(t.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===qy.Break?"\\\n":"\n\n"),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+="\n".concat(function(e,t){var i,n;let s=null!==(i=null===(n=e.match(/^`+/gm))||void 0===n?void 0:n.reduce((e,t)=>e.length>t.length?e:t).length)&&void 0!==i?i:0,r=s>=3?s+1:3;return["".concat("`".repeat(r)).concat(t),e,"".concat("`".repeat(r))].join("\n")}(t,e),"\n"),this}appendLink(e,t,i){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),i&&(this.value+=' "'.concat(this._escape(this._escape(i,'"'),")"),'"')),this.value+=")",this}_escape(e,t){let i=new RegExp(sa(t),"g");return e.replace(i,(t,i)=>"\\"===e.charAt(i-1)?t:"\\".concat(t))}};function $y(e){return e instanceof Qy||!(!e||"object"!=typeof e)&&("string"==typeof e.value&&("boolean"==typeof e.isTrusted||"object"==typeof e.isTrusted||void 0===e.isTrusted)&&("boolean"==typeof e.supportThemeIcons||void 0===e.supportThemeIcons)&&("boolean"==typeof e.supportAlertSyntax||void 0===e.supportAlertSyntax))}function Xy(e){return e.replace(/"/g,"&quot;")}function Zy(e){return e&&e.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}Tn.as(JC.ExtensionFeaturesRegistry).registerExtensionFeature({id:"themes",label:Li(14423,"Themes"),access:{canToggle:!1},renderer:new bC(class extends Co{constructor(){super(...arguments),this.type="markdown"}shouldRender(e){var t,i,n;return!(null===(t=e.contributes)||void 0===t||!t.themes)||!(null===(i=e.contributes)||void 0===i||!i.iconThemes)||!(null===(n=e.contributes)||void 0===n||!n.productIconThemes)}render(e){var t,i,n;let s=new Qy;if(null!==(t=e.contributes)&&void 0!==t&&t.themes){s.appendMarkdown("### ".concat(Li(14420,"Color Themes"),"\n\n"));for(let t of e.contributes.themes)s.appendMarkdown("- ".concat(t.label,"\n"))}if(null!==(i=e.contributes)&&void 0!==i&&i.iconThemes){s.appendMarkdown("### ".concat(Li(14421,"File Icon Themes"),"\n\n"));for(let t of e.contributes.iconThemes)s.appendMarkdown("- ".concat(t.label,"\n"))}if(null!==(n=e.contributes)&&void 0!==n&&n.productIconThemes){s.appendMarkdown("### ".concat(Li(14422,"Product Icon Themes"),"\n\n"));for(let t of e.contributes.productIconThemes)s.appendMarkdown("- ".concat(t.label,"\n"))}return{data:s,dispose:()=>{}}}})});var Jy=class{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;this.themesExtPoint=e,this.create=t,this.idRequired=i,this.builtInTheme=n,this.onDidChangeEmitter=new Ro,this.onDidChange=this.onDidChangeEmitter.event,this.extensionThemes=[],this.initialize()}dispose(){this.themesExtPoint.setHandler(()=>{})}initialize(){this.themesExtPoint.setHandler((e,t)=>{let i={},n=[];for(let r of this.extensionThemes)i[r.id]=r;this.extensionThemes.length=0;for(let r of e){let e=Cn.fromName(r.description.publisher,r.description.name,r.description.isBuiltin);this.onThemes(e,r.description.extensionLocation,r.value,this.extensionThemes,r.collector)}for(let r of this.extensionThemes)i[r.id]?delete i[r.id]:n.push(r);let s=Object.values(i);this.onDidChangeEmitter.fire({themes:this.extensionThemes,added:n,removed:s})})}onThemes(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4?arguments[4]:void 0;return Array.isArray(i)?(i.forEach(i=>{if(!i.path||!$i(i.path))return void(null===s||void 0===s||s.error(Li(14425,"Expected string in `contributes.{0}.path`. Provided value: {1}",this.themesExtPoint.name,String(i.path))));if(this.idRequired&&(!i.id||!$i(i.id)))return void(null===s||void 0===s||s.error(Li(14426,"Expected string in `contributes.{0}.id`. Provided value: {1}",this.themesExtPoint.name,String(i.id))));let r=hl(t,i.path);sl(r,t)||null===s||void 0===s||s.warn(Li(14427,"Expected `contributes.{0}.path` ({1}) to be included inside extension's folder ({2}). This might make the extension non-portable.",this.themesExtPoint.name,r.path,t.path));let o=this.create(i,r,e);n.push(o)}),n):(null!==s&&void 0!==s&&s.error(Li(14424,"Extension point `{0}` must be an array.",this.themesExtPoint.name)),n)}findThemeById(e){if(this.builtInTheme&&this.builtInTheme.id===e)return this.builtInTheme;let t=this.getThemes();for(let i of t)if(i.id===e)return i}findThemeBySettingsId(e,t){if(this.builtInTheme&&this.builtInTheme.settingsId===e)return this.builtInTheme;let i,n=this.getThemes();for(let s of n){if(s.settingsId===e)return s;s.settingsId===t&&(i=s)}return i}findThemeByExtensionLocation(e){return e?this.getThemes().filter(t=>t.location&&sl(t.location,e)):[]}getThemes(){return this.extensionThemes}getMarketplaceThemes(e,t,i){var n;let s=null===e||void 0===e||null===(n=e.contributes)||void 0===n?void 0:n[this.themesExtPoint.name];return Array.isArray(s)?this.onThemes(i,t,s):[]}},ew=Tn.as(em),tw=[],iw=[],nw=[];function sw(e){return"`#".concat(e,"#`")}var rw="colorThemeConfiguration",ow={type:"string",markdownDescription:Li(14375,"Specifies the color theme used in the workbench when {0} is not enabled.",sw(mn.DETECT_COLOR_SCHEME)),default:Yn?vn.COLOR_THEME_LIGHT:vn.COLOR_THEME_DARK,tags:[rw],enum:tw,enumDescriptions:nw,enumItemLabels:iw,errorMessage:Li(14376,"Theme is unknown or not installed.")},aw={type:"string",markdownDescription:Li(14377,"Specifies the color theme when system color mode is dark and {0} is enabled.",sw(mn.DETECT_COLOR_SCHEME)),default:vn.COLOR_THEME_DARK,tags:[rw],enum:tw,enumDescriptions:nw,enumItemLabels:iw,errorMessage:Li(14376,"Theme is unknown or not installed.")},lw={type:"string",markdownDescription:Li(14378,"Specifies the color theme when system color mode is light and {0} is enabled.",sw(mn.DETECT_COLOR_SCHEME)),default:vn.COLOR_THEME_LIGHT,tags:[rw],enum:tw,enumDescriptions:nw,enumItemLabels:iw,errorMessage:Li(14376,"Theme is unknown or not installed.")},hw={type:"string",markdownDescription:Li(14379,"Specifies the color theme when in high contrast dark mode and {0} is enabled.",sw(mn.DETECT_HC)),default:vn.COLOR_THEME_HC_DARK,tags:[rw],enum:tw,enumDescriptions:nw,enumItemLabels:iw,errorMessage:Li(14376,"Theme is unknown or not installed.")},dw={type:"string",markdownDescription:Li(14380,"Specifies the color theme when in high contrast light mode and {0} is enabled.",sw(mn.DETECT_HC)),default:vn.COLOR_THEME_HC_LIGHT,tags:[rw],enum:tw,enumDescriptions:nw,enumItemLabels:iw,errorMessage:Li(14376,"Theme is unknown or not installed.")},cw={type:"boolean",markdownDescription:Li(14381,"If enabled, will automatically select a color theme based on the system color mode. If the system color mode is dark, {0} is used, else {1}.",sw(mn.PREFERRED_DARK_THEME),sw(mn.PREFERRED_LIGHT_THEME)),default:!1,tags:[rw]},uw={type:"object",description:Li(14382,"Overrides colors from the currently selected color theme."),allOf:[{$ref:dh}],default:{},defaultSnippets:[{body:{}}]},gw={type:["string","null"],default:vn.FILE_ICON_THEME,description:Li(14383,"Specifies the file icon theme used in the workbench or 'null' to not show any file icons."),enum:[null],enumItemLabels:[Li(14384,"None")],enumDescriptions:[Li(14385,"No file icons")],errorMessage:Li(14386,"File icon theme is unknown or not installed.")},pw={type:["string","null"],default:vn.PRODUCT_ICON_THEME,description:Li(14387,"Specifies the product icon theme used."),enum:[vn.PRODUCT_ICON_THEME],enumItemLabels:[Li(14388,"Default")],enumDescriptions:[Li(14389,"Default")],errorMessage:Li(14390,"Product icon theme is unknown or not installed.")},fw={type:"boolean",default:!0,markdownDescription:Li(14391,"If enabled, will automatically change to high contrast theme if the OS is using a high contrast theme. The high contrast theme to use is specified by {0} and {1}.",sw(mn.PREFERRED_HC_DARK_THEME),sw(mn.PREFERRED_HC_LIGHT_THEME)),scope:Jf.APPLICATION,tags:[rw]},mw={id:"workbench",order:7.1,type:"object",properties:{[mn.COLOR_THEME]:ow,[mn.PREFERRED_DARK_THEME]:aw,[mn.PREFERRED_LIGHT_THEME]:lw,[mn.PREFERRED_HC_DARK_THEME]:hw,[mn.PREFERRED_HC_LIGHT_THEME]:dw,[mn.FILE_ICON_THEME]:gw,[mn.COLOR_CUSTOMIZATIONS]:uw,[mn.PRODUCT_ICON_THEME]:pw}};ew.registerConfiguration(mw);var vw={id:"window",order:8.1,type:"object",properties:{[mn.DETECT_HC]:fw,[mn.DETECT_COLOR_SCHEME]:cw}};function _w(e){return{description:e,$ref:pC}}ew.registerConfiguration(vw);var bw="^\\[[^\\]]*(\\]\\s*\\[[^\\]]*)*\\]$",Cw={type:"object",properties:{comments:_w(Li(14392,"Sets the colors and styles for comments")),strings:_w(Li(14393,"Sets the colors and styles for strings literals.")),keywords:_w(Li(14394,"Sets the colors and styles for keywords.")),numbers:_w(Li(14395,"Sets the colors and styles for number literals.")),types:_w(Li(14396,"Sets the colors and styles for type declarations and references.")),functions:_w(Li(14397,"Sets the colors and styles for functions declarations and references.")),variables:_w(Li(14398,"Sets the colors and styles for variables declarations and references.")),textMateRules:{description:Li(14399,"Sets colors and styles using textmate theming rules (advanced)."),$ref:gC},semanticHighlighting:{description:Li(14400,"Whether semantic highlighting should be enabled for this theme."),deprecationMessage:Li(14401,"Use `enabled` in `editor.semanticTokenColorCustomizations` setting instead."),markdownDeprecationMessage:Li(14402,"Use `enabled` in {0} setting instead.",sw("editor.semanticTokenColorCustomizations")),type:"boolean"}},additionalProperties:!1},yw={description:Li(14403,"Overrides editor syntax colors and font style from the currently selected color theme."),default:{},allOf:[(0,r.A)((0,r.A)({},Cw),{},{patternProperties:{"^\\[":{}}})]},ww={type:"object",properties:{enabled:{type:"boolean",description:Li(14404,"Whether semantic highlighting is enabled or disabled for this theme"),suggestSortText:"0_enabled"},rules:{$ref:Qu,description:Li(14405,"Semantic token styling rules for this theme."),suggestSortText:"0_rules"}},additionalProperties:!1},Sw={description:Li(14406,"Overrides editor semantic token color and styles from the currently selected color theme."),default:{},allOf:[(0,r.A)((0,r.A)({},ww),{},{patternProperties:{"^\\[":{}}})]},kw={id:"editor",order:7.2,type:"object",properties:{[mn.TOKEN_COLOR_CUSTOMIZATIONS]:yw,[mn.SEMANTIC_TOKEN_COLOR_CUSTOMIZATIONS]:Sw}};function Ew(e){e.sort((e,t)=>e.label.localeCompare(t.label)),tw.splice(0,tw.length,...e.map(e=>e.settingsId)),nw.splice(0,nw.length,...e.map(e=>e.description||"")),iw.splice(0,iw.length,...e.map(e=>e.label||""));let t={properties:{}},i={properties:{}},n={properties:{}},s={$ref:dh,additionalProperties:!1},r={properties:Cw.properties,additionalProperties:!1};for(let o of e){let e="[".concat(o.settingsId,"]");t.properties[e]=s,i.properties[e]=r,n.properties[e]=ww}t.patternProperties={[bw]:s},i.patternProperties={[bw]:r},n.patternProperties={[bw]:ww},uw.allOf[1]=t,yw.allOf[1]=i,Sw.allOf[1]=n,ew.notifyConfigurationSchemaUpdated(mw,kw)}function Dw(e){gw.enum.splice(1,Number.MAX_VALUE,...e.map(e=>e.settingsId)),gw.enumItemLabels.splice(1,Number.MAX_VALUE,...e.map(e=>e.label)),gw.enumDescriptions.splice(1,Number.MAX_VALUE,...e.map(e=>e.description||"")),ew.notifyConfigurationSchemaUpdated(mw)}function Tw(e){pw.enum.splice(1,Number.MAX_VALUE,...e.map(e=>e.settingsId)),pw.enumItemLabels.splice(1,Number.MAX_VALUE,...e.map(e=>e.label)),pw.enumDescriptions.splice(1,Number.MAX_VALUE,...e.map(e=>e.description||"")),ew.notifyConfigurationSchemaUpdated(mw)}ew.registerConfiguration(kw);var Iw={[eu.DARK]:mn.PREFERRED_DARK_THEME,[eu.LIGHT]:mn.PREFERRED_LIGHT_THEME,[eu.HIGH_CONTRAST_DARK]:mn.PREFERRED_HC_DARK_THEME,[eu.HIGH_CONTRAST_LIGHT]:mn.PREFERRED_HC_LIGHT_THEME},xw=class{constructor(e,t){this.configurationService=e,this.hostColorService=t}get colorTheme(){return this.configurationService.getValue(this.getColorThemeSettingId())}get fileIconTheme(){return this.configurationService.getValue(mn.FILE_ICON_THEME)}get productIconTheme(){return this.configurationService.getValue(mn.PRODUCT_ICON_THEME)}get colorCustomizations(){return this.configurationService.getValue(mn.COLOR_CUSTOMIZATIONS)||{}}get tokenColorCustomizations(){return this.configurationService.getValue(mn.TOKEN_COLOR_CUSTOMIZATIONS)||{}}get semanticTokenColorCustomizations(){return this.configurationService.getValue(mn.SEMANTIC_TOKEN_COLOR_CUSTOMIZATIONS)}getPreferredColorScheme(){return this.configurationService.getValue(mn.DETECT_HC)&&this.hostColorService.highContrast?this.hostColorService.dark?eu.HIGH_CONTRAST_DARK:eu.HIGH_CONTRAST_LIGHT:this.configurationService.getValue(mn.DETECT_COLOR_SCHEME)?this.hostColorService.dark?eu.DARK:eu.LIGHT:void 0}isDetectingColorScheme(){return this.configurationService.getValue(mn.DETECT_COLOR_SCHEME)}getColorThemeSettingId(){let e=this.getPreferredColorScheme();return e?Iw[e]:mn.COLOR_THEME}async setColorTheme(e,t){return await this.writeConfiguration(this.getColorThemeSettingId(),e.settingsId,t),e}async setFileIconTheme(e,t){return await this.writeConfiguration(mn.FILE_ICON_THEME,e.settingsId,t),e}async setProductIconTheme(e,t){return await this.writeConfiguration(mn.PRODUCT_ICON_THEME,e.settingsId,t),e}isDefaultColorTheme(){var e;let t=this.configurationService.inspect(this.getColorThemeSettingId());return t&&(null===(e=t.default)||void 0===e?void 0:e.value)===t.value}findAutoConfigurationTarget(e){let t=this.configurationService.inspect(e);return nn(t.workspaceFolderValue)?nn(t.workspaceValue)?nn(t.userRemote)?tr.USER:tr.USER_REMOTE:tr.WORKSPACE:tr.WORKSPACE_FOLDER}async writeConfiguration(e,t,i){if(void 0===i||"preview"===i)return;let n=this.configurationService.inspect(e);if("auto"===i)return this.configurationService.updateValue(e,t);if(i===tr.USER){if(t===n.userValue)return Promise.resolve(void 0);if(t===n.defaultValue){if(nn(n.userValue))return Promise.resolve(void 0);t=void 0}}else if((i===tr.WORKSPACE||i===tr.WORKSPACE_FOLDER||i===tr.USER_REMOTE)&&t===n.value)return Promise.resolve(void 0);return this.configurationService.updateValue(e,t,i)}},Lw=(Pe=class e{constructor(e,t,i){this.iconThemeDocument={iconDefinitions:new Map},this.id=e,this.label=t,this.settingsId=i,this.isLoaded=!1}getIcon(e){return function(e,t){let i=t.iconDefinitions,n=i.get(e.id),s=e.defaults;for(;!n&&yf.isThemeIcon(s);){let e=Aw.getIcon(s.id);if(!e)return;n=i.get(e.id),s=e.defaults}if(n)return n;if(!yf.isThemeIcon(s))return s}(e,this.iconThemeDocument)}ensureLoaded(e,t){return this.isLoaded?Promise.resolve(this.styleSheetContent):this.load(e,t)}reload(e,t){return this.load(e,t)}async load(e,t){let i=this.location;if(!i)return Promise.resolve(this.styleSheetContent);let n=[];return this.iconThemeDocument=await function(e,t,i){return e.readExtensionResource(t).then(e=>{let n=[],s=Cr(e,n);if(n.length>0)return Promise.reject(Error(Li(14264,"Problems parsing product icons file: {0}",n.map(e=>Mu(e.error)).join(", "))));if("object"!==wr(s))return Promise.reject(Error(Li(14265,"Invalid format for product icons theme file: Object expected.")));if(!s.iconDefinitions||!Array.isArray(s.fonts)||!s.fonts.length)return Promise.reject(Error(Li(14266,"Invalid format for product icons theme file: Must contain iconDefinitions and fonts.")));let r=ll(t),o=new Map;for(let t of s.fonts){let e=t.id;if($i(e)&&e.match(Tf)){let n,s;$i(t.weight)&&t.weight.match(xf)?n=t.weight:i.push(Li(14267,"Invalid font weight in font '{0}'. Ignoring setting.",t.id)),$i(t.style)&&t.style.match(If)?s=t.style:i.push(Li(14268,"Invalid font style in font '{0}'. Ignoring setting.",t.id));let a=[];if(Array.isArray(t.src))for(let e of t.src)if($i(e.path)&&$i(e.format)&&e.format.match(Af)){let t=hl(r,e.path);a.push({location:t,format:e.format})}else i.push(Li(14269,"Invalid font source in font '{0}'. Ignoring source.",t.id));a.length?o.set(e,{weight:n,style:s,src:a}):i.push(Li(14270,"No valid font source in font '{0}'. Ignoring font definition.",t.id))}else i.push(Li(14271,"Missing or invalid font id '{0}'. Skipping font definition.",t.id))}let a=new Map,l=s.fonts[0].id;for(let t in s.iconDefinitions){let e=s.iconDefinitions[t];if($i(e.fontCharacter)){var h;let n=null!==(h=e.fontId)&&void 0!==h?h:l,s=o.get(n);if(s){let i={id:"pi-".concat(n),definition:s};a.set(t,{fontCharacter:e.fontCharacter,font:i})}else i.push(Li(14272,"Skipping icon definition '{0}'. Unknown font.",t))}else i.push(Li(14273,"Skipping icon definition '{0}': Needs to be defined",t))}return{iconDefinitions:a}})}(e,i,n),this.isLoaded=!0,n.length&&t.error(Li(14262,"Problems processing product icons definitions in {0}:\n{1}",i.toString(),n.join("\n"))),this.styleSheetContent}static fromExtensionTheme(t,i,n){let s=n.extensionId+"-"+t.id,r=t.label||Ps(t.path),o=t.id,a=new e(s,r,o);return a.description=t.description,a.location=i,a.extensionData=n,a.watch=t._watch,a.isLoaded=!1,a}static createUnloadedTheme(t){let i=new e(t,"","__"+t);return i.isLoaded=!1,i.extensionData=void 0,i.watch=!1,i}static get defaultTheme(){let t=e._defaultProductIconTheme;return t||(t=e._defaultProductIconTheme=new e("",Li(14263,"Default"),vn.PRODUCT_ICON_THEME),t.isLoaded=!0,t.extensionData=void 0,t.watch=!1),t}static fromStorageData(t){let i=t.get(e.STORAGE_KEY,Vp.PROFILE);if(i)try{let t=JSON.parse(i),n=new e("","","");for(let e in t)switch(e){case"id":case"label":case"description":case"settingsId":case"styleSheetContent":case"watch":n[e]=t[e];break;case"location":break;case"extensionData":n.extensionData=Cn.fromJSONObject(t.extensionData)}let{iconDefinitions:s,iconFontDefinitions:r}=t;if(Array.isArray(s)&&Xi(r)){let e=new Map;for(let t of s){let{id:i,fontCharacter:n,fontId:s}=t;if($i(i)&&$i(n))if($i(s)){let t=Df.fromJSONObject(r[s]);t&&e.set(i,{fontCharacter:n,font:{id:s,definition:t}})}else e.set(i,{fontCharacter:n})}n.iconThemeDocument={iconDefinitions:e}}return n}catch(n){return}}toStorage(t){let i=[],n={};for(let e of this.iconThemeDocument.iconDefinitions.entries()){let t=e[1].font;i.push({id:e[0],fontCharacter:e[1].fontCharacter,fontId:null===t||void 0===t?void 0:t.id}),t&&void 0===n[t.id]&&(n[t.id]=Df.toJSONObject(t.definition))}let s=JSON.stringify({id:this.id,label:this.label,description:this.description,settingsId:this.settingsId,styleSheetContent:this.styleSheetContent,watch:this.watch,extensionData:Cn.toJSONObject(this.extensionData),iconDefinitions:i,iconFontDefinitions:n});t.store(e.STORAGE_KEY,s,Vp.PROFILE,zp.MACHINE)}},{_:Pe.STORAGE_KEY="productIconThemeData"},{_:Pe._defaultProductIconTheme=null},Pe);var Aw=Mf();var Nw={type:"object",allowComments:!0,allowTrailingCommas:!0,properties:{fonts:{type:"array",items:{type:"object",properties:{id:{type:"string",description:Li(14368,"The ID of the font."),pattern:Tf.source,patternErrorMessage:Ff},src:{type:"array",description:Li(14369,"The location of the font."),items:{type:"object",properties:{path:{type:"string",description:Li(14370,"The font path, relative to the current product icon theme file.")},format:{type:"string",description:Li(14371,"The format of the font."),enum:["woff","woff2","truetype","opentype","embedded-opentype","svg"]}},required:["path","format"]}},weight:{type:"string",description:Li(14372,"The weight of the font. See https://developer.mozilla.org/en-US/docs/Web/CSS/font-weight for valid values."),anyOf:[{enum:["normal","bold","lighter","bolder"]},{type:"string",pattern:xf.source}]},style:{type:"string",description:Li(14373,"The style of the font. See https://developer.mozilla.org/en-US/docs/Web/CSS/font-style for valid values."),anyOf:[{enum:["normal","italic","oblique"]},{type:"string",pattern:If.source}]}},required:["id","src"]}},iconDefinitions:{description:Li(14374,"Association of icon name to a font character."),$ref:Pf}}};var Fw=fn("hostColorSchemeService"),Ow=fn("IUserDataInitializationService");function Rw(e){let t=new bo,i=t.add(new Ro),n=Mf();return t.add(n.onDidChange(()=>i.fire())),e&&t.add(e.onDidProductIconThemeChange(()=>i.fire())),{dispose:()=>t.dispose(),onDidChange:i.event,getCSS(){let t=e?e.getProductIconTheme():new Mw,i={},r=new $f,o=new $f;for(let e of n.getIcons()){let n=t.getIcon(e);if(!n)continue;let a=n.font,l=Yf(Be||(Be=(0,s.A)(["--vscode-icon-","-font-family"])),jf(e.id)),h=Yf(Ue||(Ue=(0,s.A)(["--vscode-icon-","-content"])),jf(e.id));a?(i[a.id]=a.definition,o.push(Yf(He||(He=(0,s.A)(["",": ",";"])),l,qf(a.id)),Yf(We||(We=(0,s.A)(["",": ",";"])),h,qf(n.fontCharacter))),r.push(Yf(Ve||(Ve=(0,s.A)([".codicon-",":before { content: ","; font-family: ","; }"])),jf(e.id),qf(n.fontCharacter),qf(a.id)))):(o.push(Yf(ze||(ze=(0,s.A)(["",": ","; ",": 'codicon';"])),h,qf(n.fontCharacter),l)),r.push(Yf(Ke||(Ke=(0,s.A)([".codicon-",":before { content: ","; }"])),jf(e.id),qf(n.fontCharacter))))}for(let e in i){let t=i[e],n=t.weight?Yf(qe||(qe=(0,s.A)(["font-weight: ",";"])),Kf(t.weight)):Yf(Ge||(Ge=(0,s.A)([""]))),o=t.style?Yf(je||(je=(0,s.A)(["font-style: ",";"])),Kf(t.style)):Yf(Ye||(Ye=(0,s.A)([""]))),a=new $f;for(let e of t.src)a.push(Yf(Qe||(Qe=(0,s.A)([""," format(",")"])),Gf(e.location),qf(e.format)));r.push(Yf($e||($e=(0,s.A)(["@font-face { src: ","; font-family: ",";",""," font-display: block; }"])),a.join(", "),qf(e),n,o))}return r.push(Yf(Xe||(Xe=(0,s.A)([":root { "," }"])),o.join(" "))),r.join("\n")}}}var Mw=class{getIcon(e){let t=Mf(),i=e.defaults;for(;yf.isThemeIcon(i);){let e=t.getIcon(i.id);if(!e)return;i=e.defaults}return i}},Pw=fn("languageService"),Bw="vscode-theme-defaults",Uw="vscode.vscode-theme-seti-vs-seti",Hw="file-icons-enabled",Ww=Tn.as(lu);var Vw=ey.registerExtensionPoint({extensionPoint:"themes",jsonSchema:{description:Li(14407,"Contributes textmate color themes."),type:"array",items:{type:"object",defaultSnippets:[{body:{label:"${1:label}",id:"${2:id}",uiTheme:tu.VS_DARK,path:"./themes/${3:id}.tmTheme."}}],properties:{id:{description:Li(14408,"Id of the color theme as used in the user settings."),type:"string"},label:{description:Li(14409,"Label of the color theme as shown in the UI."),type:"string"},uiTheme:{description:Li(14410,"Base theme defining the colors around the editor: 'vs' is the light color theme, 'vs-dark' is the dark color theme. 'hc-black' is the dark high contrast theme, 'hc-light' is the light high contrast theme."),enum:[tu.VS,tu.VS_DARK,tu.HC_BLACK,tu.HC_LIGHT]},path:{description:Li(14411,"Path of the tmTheme file. The path is relative to the extension folder and is typically './colorthemes/awesome-color-theme.json'."),type:"string"}},required:["path","uiTheme"]}}}),zw=ey.registerExtensionPoint({extensionPoint:"iconThemes",jsonSchema:{description:Li(14412,"Contributes file icon themes."),type:"array",items:{type:"object",defaultSnippets:[{body:{id:"${1:id}",label:"${2:label}",path:"./fileicons/${3:id}-icon-theme.json"}}],properties:{id:{description:Li(14413,"Id of the file icon theme as used in the user settings."),type:"string"},label:{description:Li(14414,"Label of the file icon theme as shown in the UI."),type:"string"},path:{description:Li(14415,"Path of the file icon theme definition file. The path is relative to the extension folder and is typically './fileicons/awesome-icon-theme.json'."),type:"string"}},required:["path","id"]}}}),Kw=ey.registerExtensionPoint({extensionPoint:"productIconThemes",jsonSchema:{description:Li(14416,"Contributes product icon themes."),type:"array",items:{type:"object",defaultSnippets:[{body:{id:"${1:id}",label:"${2:label}",path:"./producticons/${3:id}-product-icon-theme.json"}}],properties:{id:{description:Li(14417,"Id of the product icon theme as used in the user settings."),type:"string"},label:{description:Li(14418,"Label of the product icon theme as shown in the UI."),type:"string"},path:{description:Li(14419,"Path of the product icon theme definition file. The path is relative to the extension folder and is typically './producticons/awesome-product-icon-theme.json'."),type:"string"}},required:["path","id"]}}}),qw=class extends Co{constructor(e,t,i,n,s,r,o,a,l,h,d,c){super(),this.storageService=t,this.configurationService=i,this.telemetryService=n,this.environmentService=s,this.extensionResourceLoaderService=o,this.logService=l,this.hostColorService=h,this.userDataInitializationService=d,this.languageService=c,this.themeExtensionsActivated=new Map,this.container=a.mainContainer,this.settings=new xw(i,h),this.colorThemeRegistry=this._register(new Jy(Vw,cf.fromExtensionTheme)),this.colorThemeWatcher=this._register(new Gw(r,s,this.reloadCurrentColorTheme.bind(this))),this.onColorThemeChange=new Ro({leakWarningThreshold:400}),this.currentColorTheme=cf.createUnloadedTheme(""),this.colorThemeSequencer=new wl,this.fileIconThemeWatcher=this._register(new Gw(r,s,this.reloadCurrentFileIconTheme.bind(this))),this.fileIconThemeRegistry=this._register(new Jy(zw,ym.fromExtensionTheme,!0,ym.noIconTheme)),this.fileIconThemeLoader=new wm(o,c),this.onFileIconThemeChange=new Ro({leakWarningThreshold:400}),this.currentFileIconTheme=ym.createUnloadedTheme(""),this.fileIconThemeSequencer=new wl,this.productIconThemeWatcher=this._register(new Gw(r,s,this.reloadCurrentProductIconTheme.bind(this))),this.productIconThemeRegistry=this._register(new Jy(Kw,Lw.fromExtensionTheme,!0,Lw.defaultTheme)),this.onProductIconThemeChange=new Ro,this.currentProductIconTheme=Lw.createUnloadedTheme(""),this.productIconThemeSequencer=new wl,this._register(this.onDidColorThemeChange(e=>ih().notifyThemeUpdate(e)));let u=cf.fromStorageData(this.storageService),g=this.settings.colorTheme;u&&g!==u.settingsId&&(u=void 0);let p=g===vn.COLOR_THEME_LIGHT?wn:g===vn.COLOR_THEME_DARK?yn:void 0;if(!u){var f,m;let e=null===(f=s.options)||void 0===f?void 0:f.initialColorTheme;e&&(u=cf.createUnloadedThemeForThemeType(e.themeType,null!==(m=e.colors)&&void 0!==m?m:p))}if(!u){var v;let e=null!==(v=this.settings.getPreferredColorScheme())&&void 0!==v?v:Yn?eu.LIGHT:eu.DARK;u=cf.createUnloadedThemeForThemeType(e,p)}u.setCustomizations(this.settings),this.applyTheme(u,void 0,!0);let _=ym.fromStorageData(this.storageService);_&&this.applyAndSetFileIconTheme(_,!0);let b=Lw.fromStorageData(this.storageService);b&&this.applyAndSetProductIconTheme(b,!0),e.whenInstalledExtensionsRegistered().then(e=>{this.installConfigurationListener(),this.installPreferredSchemeListener(),this.installRegistryListeners(),this.initialize().catch(Ri)});let C=nC();C.id="codiconStyles";let y=this._register(Rw(this));let w=this._register(new Rl(function(){C.textContent=y.getCSS()},0));this._register(y.onDidChange(()=>w.schedule())),w.schedule()}initialize(){let e=this.environmentService.extensionDevelopmentLocationURI,t=e&&1===e.length?e[0]:void 0;return Promise.all([(async()=>{let e=this.colorThemeRegistry.findThemeByExtensionLocation(t);if(e.length){let t=e.find(e=>e.type===this.currentColorTheme.type);return this.setColorTheme(t?t.id:e[0].id,void 0)}let i=this.colorThemeRegistry.findThemeBySettingsId(this.settings.colorTheme,void 0);if(!i){await this.userDataInitializationService.whenInitializationFinished();let e=this.currentColorTheme.type===eu.LIGHT?vn.COLOR_THEME_LIGHT:vn.COLOR_THEME_DARK;i=this.colorThemeRegistry.findThemeBySettingsId(this.settings.colorTheme,e)}return this.setColorTheme(i&&i.id,void 0)})(),(async()=>{let e=this.fileIconThemeRegistry.findThemeByExtensionLocation(t);if(e.length)return this.setFileIconTheme(e[0].id,tr.MEMORY);let i=this.fileIconThemeRegistry.findThemeBySettingsId(this.settings.fileIconTheme);return i||(await this.userDataInitializationService.whenInitializationFinished(),i=this.fileIconThemeRegistry.findThemeBySettingsId(this.settings.fileIconTheme)),this.setFileIconTheme(i?i.id:Uw,void 0)})(),(async()=>{let e=this.productIconThemeRegistry.findThemeByExtensionLocation(t);if(e.length)return this.setProductIconTheme(e[0].id,tr.MEMORY);let i=this.productIconThemeRegistry.findThemeBySettingsId(this.settings.productIconTheme);return i||(await this.userDataInitializationService.whenInitializationFinished(),i=this.productIconThemeRegistry.findThemeBySettingsId(this.settings.productIconTheme)),this.setProductIconTheme(i?i.id:"",void 0)})()])}installConfigurationListener(){this._register(this.configurationService.onDidChangeConfiguration(e=>{if((e.affectsConfiguration(mn.COLOR_THEME)||e.affectsConfiguration(mn.PREFERRED_DARK_THEME)||e.affectsConfiguration(mn.PREFERRED_LIGHT_THEME)||e.affectsConfiguration(mn.PREFERRED_HC_DARK_THEME)||e.affectsConfiguration(mn.PREFERRED_HC_LIGHT_THEME)||e.affectsConfiguration(mn.DETECT_COLOR_SCHEME)||e.affectsConfiguration(mn.DETECT_HC)||e.affectsConfiguration(mn.SYSTEM_COLOR_THEME))&&this.restoreColorTheme(),e.affectsConfiguration(mn.FILE_ICON_THEME)&&this.restoreFileIconTheme(),e.affectsConfiguration(mn.PRODUCT_ICON_THEME)&&this.restoreProductIconTheme(),this.currentColorTheme){let t=!1;e.affectsConfiguration(mn.COLOR_CUSTOMIZATIONS)&&(this.currentColorTheme.setCustomColors(this.settings.colorCustomizations),t=!0),e.affectsConfiguration(mn.TOKEN_COLOR_CUSTOMIZATIONS)&&(this.currentColorTheme.setCustomTokenColors(this.settings.tokenColorCustomizations),t=!0),e.affectsConfiguration(mn.SEMANTIC_TOKEN_COLOR_CUSTOMIZATIONS)&&(this.currentColorTheme.setCustomSemanticTokenColors(this.settings.semanticTokenColorCustomizations),t=!0),t&&(this.updateDynamicCSSRules(this.currentColorTheme),this.onColorThemeChange.fire(this.currentColorTheme))}}))}installRegistryListeners(){let e,t,i;return this._register(this.colorThemeRegistry.onDidChange(async t=>{if(Ew(t.themes),await this.restoreColorTheme())this.currentColorTheme.settingsId===vn.COLOR_THEME_DARK&&!nn(e)&&await this.colorThemeRegistry.findThemeById(e)?(await this.setColorTheme(e,"auto"),e=void 0):t.added.some(e=>e.settingsId===this.currentColorTheme.settingsId)&&await this.reloadCurrentColorTheme();else if(t.removed.some(e=>e.settingsId===this.currentColorTheme.settingsId)){e=this.currentColorTheme.id;let t=this.colorThemeRegistry.findThemeBySettingsId(vn.COLOR_THEME_DARK);await this.setColorTheme(t,"auto")}})),this._register(this._register(this.fileIconThemeRegistry.onDidChange(async e=>{Dw(e.themes),await this.restoreFileIconTheme()?this.currentFileIconTheme.id===Uw&&!nn(t)&&this.fileIconThemeRegistry.findThemeById(t)?(await this.setFileIconTheme(t,"auto"),t=void 0):e.added.some(e=>e.settingsId===this.currentFileIconTheme.settingsId)&&await this.reloadCurrentFileIconTheme():e.removed.some(e=>e.settingsId===this.currentFileIconTheme.settingsId)&&(t=this.currentFileIconTheme.id,await this.setFileIconTheme(Uw,"auto"))}))),this._register(this.productIconThemeRegistry.onDidChange(async e=>{Tw(e.themes),await this.restoreProductIconTheme()?""===this.currentProductIconTheme.id&&!nn(i)&&this.productIconThemeRegistry.findThemeById(i)?(await this.setProductIconTheme(i,"auto"),i=void 0):e.added.some(e=>e.settingsId===this.currentProductIconTheme.settingsId)&&await this.reloadCurrentProductIconTheme():e.removed.some(e=>e.settingsId===this.currentProductIconTheme.settingsId)&&(i=this.currentProductIconTheme.id,await this.setProductIconTheme("","auto"))})),this._register(this.languageService.onDidChange(()=>this.reloadCurrentFileIconTheme())),Promise.all([this.getColorThemes(),this.getFileIconThemes(),this.getProductIconThemes()]).then(e=>{let[t,i,n]=e;Ew(t),Dw(i),Tw(n)})}installPreferredSchemeListener(){this._register(this.hostColorService.onDidChangeColorScheme(()=>{this.settings.isDetectingColorScheme()&&this.restoreColorTheme()}))}getColorTheme(){return this.currentColorTheme}async getColorThemes(){return this.colorThemeRegistry.getThemes()}getPreferredColorScheme(){return this.settings.getPreferredColorScheme()}async getMarketplaceColorThemes(e,t,i){let n=await this.extensionResourceLoaderService.getExtensionGalleryResourceURL({publisher:e,name:t,version:i},"extension");if(n)try{let i=await this.extensionResourceLoaderService.readExtensionResource(hl(n,"package.json"));return this.colorThemeRegistry.getMarketplaceThemes(JSON.parse(i),n,Cn.fromName(e,t))}catch(e){this.logService.error("Problem loading themes from marketplace",e)}return[]}get onDidColorThemeChange(){return this.onColorThemeChange.event}setColorTheme(e,t){return this.colorThemeSequencer.queue(async()=>this.internalSetColorTheme(e,t))}async internalSetColorTheme(e,t){if(!e)return null;let i=$i(e)?function(e){switch(e){case tu.VS:return"vs ".concat(Bw,"-themes-light_vs-json");case tu.VS_DARK:return"vs-dark ".concat(Bw,"-themes-dark_vs-json");case tu.HC_BLACK:return"hc-black ".concat(Bw,"-themes-hc_black-json");case tu.HC_LIGHT:return"hc-light ".concat(Bw,"-themes-hc_light-json")}return e}(e):e.id;if(this.currentColorTheme.isLoaded&&i===this.currentColorTheme.id)return"preview"!==t&&this.currentColorTheme.toStorage(this.storageService),this.settings.setColorTheme(this.currentColorTheme,t);let n=this.colorThemeRegistry.findThemeById(i);if(!n){if(!(e instanceof cf))return null;n=e}try{return await n.ensureLoaded(this.extensionResourceLoaderService),n.setCustomizations(this.settings),this.applyTheme(n,t)}catch(e){var s;throw Error(Li(14274,"Unable to load {0}: {1}",null===(s=n.location)||void 0===s?void 0:s.toString(),e.message))}}reloadCurrentColorTheme(){return this.colorThemeSequencer.queue(async()=>{try{let e=this.colorThemeRegistry.findThemeBySettingsId(this.currentColorTheme.settingsId)||this.currentColorTheme;await e.reload(this.extensionResourceLoaderService),e.setCustomizations(this.settings),await this.applyTheme(e,void 0,!1)}catch(t){var e;this.logService.info("Unable to reload {0}: {1}",null===(e=this.currentColorTheme.location)||void 0===e?void 0:e.toString())}})}async restoreColorTheme(){return this.colorThemeSequencer.queue(async()=>{let e=this.settings.colorTheme,t=this.colorThemeRegistry.findThemeBySettingsId(e);return!!t&&(e===this.currentColorTheme.settingsId?t!==this.currentColorTheme&&(await t.ensureLoaded(this.extensionResourceLoaderService),t.setCustomizations(this.settings),await this.applyTheme(t,void 0,!0)):await this.internalSetColorTheme(t.id,void 0),!0)})}updateDynamicCSSRules(e){let t=new Set,i={addRule:e=>{t.has(e)||t.add(e)}};i.addRule(".monaco-workbench { forced-color-adjust: none; }"),Ww.getThemingParticipants().forEach(t=>t(e,i,this.environmentService));let n=[];for(let s of ih().getColors()){let t=e.getColor(s.id,!0);t&&n.push("".concat($l(s.id),": ").concat(t.toString(),";"))}i.addRule(".monaco-workbench { ".concat(n.join("\n")," }")),jw([...t].join("\n"),"contributedColorTheme")}applyTheme(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.updateDynamicCSSRules(e),this.currentColorTheme.id?this.container.classList.remove(...this.currentColorTheme.classNames):this.container.classList.remove(tu.VS,tu.VS_DARK,tu.HC_BLACK,tu.HC_LIGHT),this.container.classList.add(...e.classNames),this.currentColorTheme.clearCaches(),this.currentColorTheme=e,this.colorThemingParticipantChangeListener||(this.colorThemingParticipantChangeListener=Ww.onThemingParticipantAdded(e=>this.updateDynamicCSSRules(this.currentColorTheme))),this.colorThemeWatcher.update(e),this.sendTelemetry(e.id,e.extensionData,"color"),i?Promise.resolve(null):(this.onColorThemeChange.fire(this.currentColorTheme),e.isLoaded&&"preview"!==t&&e.toStorage(this.storageService),this.settings.setColorTheme(this.currentColorTheme,t))}sendTelemetry(e,t,i){if(t){let n=i+t.extensionId;this.themeExtensionsActivated.get(n)||(this.telemetryService.publicLog2("activatePlugin",{id:t.extensionId,name:t.extensionName,isBuiltin:t.extensionIsBuiltin,publisherDisplayName:t.extensionPublisher,themeId:e}),this.themeExtensionsActivated.set(n,!0))}}async getFileIconThemes(){return this.fileIconThemeRegistry.getThemes()}getFileIconTheme(){return this.currentFileIconTheme}get onDidFileIconThemeChange(){return this.onFileIconThemeChange.event}async setFileIconTheme(e,t){return this.fileIconThemeSequencer.queue(async()=>this.internalSetFileIconTheme(e,t))}async internalSetFileIconTheme(e,t){void 0===e&&(e="");let i=$i(e)?e:e.id;if(i!==this.currentFileIconTheme.id||!this.currentFileIconTheme.isLoaded){let t=this.fileIconThemeRegistry.findThemeById(i);!t&&e instanceof ym&&(t=e),t||(t=ym.noIconTheme),await t.ensureLoaded(this.fileIconThemeLoader),this.applyAndSetFileIconTheme(t)}let n=this.currentFileIconTheme;return n.isLoaded&&"preview"!==t&&(!n.location||!SC(n.location))&&n.toStorage(this.storageService),await this.settings.setFileIconTheme(this.currentFileIconTheme,t),n}async getMarketplaceFileIconThemes(e,t,i){let n=await this.extensionResourceLoaderService.getExtensionGalleryResourceURL({publisher:e,name:t,version:i},"extension");if(n)try{let i=await this.extensionResourceLoaderService.readExtensionResource(hl(n,"package.json"));return this.fileIconThemeRegistry.getMarketplaceThemes(JSON.parse(i),n,Cn.fromName(e,t))}catch(e){this.logService.error("Problem loading themes from marketplace",e)}return[]}async reloadCurrentFileIconTheme(){return this.fileIconThemeSequencer.queue(async()=>{await this.currentFileIconTheme.reload(this.fileIconThemeLoader),this.applyAndSetFileIconTheme(this.currentFileIconTheme)})}async restoreFileIconTheme(){return this.fileIconThemeSequencer.queue(async()=>{let e=this.settings.fileIconTheme,t=this.fileIconThemeRegistry.findThemeBySettingsId(e);return!!t&&(e===this.currentFileIconTheme.settingsId?t!==this.currentFileIconTheme&&(await t.ensureLoaded(this.fileIconThemeLoader),this.applyAndSetFileIconTheme(t,!0)):await this.internalSetFileIconTheme(t.id,void 0),!0)})}applyAndSetFileIconTheme(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.currentFileIconTheme=e,jw(e.styleSheetContent,"contributedFileIconTheme"),e.id?this.container.classList.add(Hw):this.container.classList.remove(Hw),this.fileIconThemeWatcher.update(e),e.id&&this.sendTelemetry(e.id,e.extensionData,"fileIcon"),t||this.onFileIconThemeChange.fire(this.currentFileIconTheme)}async getProductIconThemes(){return this.productIconThemeRegistry.getThemes()}getProductIconTheme(){return this.currentProductIconTheme}get onDidProductIconThemeChange(){return this.onProductIconThemeChange.event}async setProductIconTheme(e,t){return this.productIconThemeSequencer.queue(async()=>this.internalSetProductIconTheme(e,t))}async internalSetProductIconTheme(e,t){void 0===e&&(e="");let i=$i(e)?e:e.id;if(i!==this.currentProductIconTheme.id||!this.currentProductIconTheme.isLoaded){let t=this.productIconThemeRegistry.findThemeById(i);!t&&e instanceof Lw&&(t=e),t||(t=Lw.defaultTheme),await t.ensureLoaded(this.extensionResourceLoaderService,this.logService),this.applyAndSetProductIconTheme(t)}let n=this.currentProductIconTheme;return n.isLoaded&&"preview"!==t&&(!n.location||!SC(n.location))&&n.toStorage(this.storageService),await this.settings.setProductIconTheme(this.currentProductIconTheme,t),n}async getMarketplaceProductIconThemes(e,t,i){let n=await this.extensionResourceLoaderService.getExtensionGalleryResourceURL({publisher:e,name:t,version:i},"extension");if(n)try{let i=await this.extensionResourceLoaderService.readExtensionResource(hl(n,"package.json"));return this.productIconThemeRegistry.getMarketplaceThemes(JSON.parse(i),n,Cn.fromName(e,t))}catch(e){this.logService.error("Problem loading themes from marketplace",e)}return[]}async reloadCurrentProductIconTheme(){return this.productIconThemeSequencer.queue(async()=>{await this.currentProductIconTheme.reload(this.extensionResourceLoaderService,this.logService),this.applyAndSetProductIconTheme(this.currentProductIconTheme)})}async restoreProductIconTheme(){return this.productIconThemeSequencer.queue(async()=>{let e=this.settings.productIconTheme,t=this.productIconThemeRegistry.findThemeBySettingsId(e);return!!t&&(e===this.currentProductIconTheme.settingsId?t!==this.currentProductIconTheme&&(await t.ensureLoaded(this.extensionResourceLoaderService,this.logService),this.applyAndSetProductIconTheme(t,!0)):await this.internalSetProductIconTheme(t.id,void 0),!0)})}applyAndSetProductIconTheme(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.currentProductIconTheme=e,jw(e.styleSheetContent,"contributedProductIconTheme"),this.productIconThemeWatcher.update(e),e.id&&this.sendTelemetry(e.id,e.extensionData,"productIcon"),t||this.onProductIconThemeChange.fire(this.currentProductIconTheme)}};qw=ki([Ei(0,_n),Ei(1,Sn),Ei(2,fr),Ei(3,kn),Ei(4,cC),Ei(5,Ap),Ei(6,TC),Ei(7,DC),Ei(8,Np),Ei(9,Fw),Ei(10,Ow),Ei(11,Pw)],qw);var Gw=class{constructor(e,t,i){this.fileService=e,this.environmentService=t,this.onUpdate=i,this.watcherDisposables=new bo}update(e){nl(e.location,this.watchedLocation)||(this.watchedLocation=void 0,this.watcherDisposables.clear(),e.location&&(e.watch||this.environmentService.isExtensionDevelopment)&&(this.watchedLocation=e.location,this.watcherDisposables.add(this.fileService.watch(e.location)),this.watcherDisposables.add(this.fileService.onDidFilesChange(e=>{this.watchedLocation&&e.contains(this.watchedLocation,up.UPDATED)&&this.onUpdate()}))))}dispose(){this.watcherDisposables.dispose(),this.watchedLocation=void 0}};function jw(e,t){let i=Lv.document.head.querySelectorAll(".".concat(t));if(0===i.length){let i=nC();i.className=t,i.textContent=e}else i[0].textContent=e}(function(){let e=Tn.as(Gl);e.registerSchema(mC,vC),e.registerSchema(gC,fC)})(),Tn.as(Gl).registerSchema("vscode://schemas/icon-theme",Hf),Tn.as(Gl).registerSchema("vscode://schemas/product-icon-theme",Nw);var Yw,Qw,$w=fn("themeService");function Xw(e){if(!e||"object"!=typeof e||e instanceof RegExp)return e;let t=Array.isArray(e)?[]:{};return Object.entries(e).forEach(e=>{let[i,n]=e;t[i]=n&&"object"==typeof n?Xw(n):n}),t}!function(e){e[e.Smooth=0]="Smooth",e[e.Immediate=1]="Immediate"}(Yw||(Yw={})),function(e){e.CompositionStart="compositionStart",e.CompositionEnd="compositionEnd",e.Type="type",e.ReplacePreviousChar="replacePreviousChar",e.CompositionType="compositionType",e.Paste="paste",e.Cut="cut"}(Qw||(Qw={}));var Zw,Jw,eS,tS,iS,nS,sS,rS,oS,aS=Object.prototype.hasOwnProperty;function lS(e,t){return hS(e,t,new Set)}function hS(e,t,i){if(rn(e))return e;let n=t(e);if(void 0!==n)return n;if(Array.isArray(e)){let n=[];for(let s of e)n.push(hS(s,t,i));return n}if(Xi(e)){if(i.has(e))throw Error("Cannot clone recursive data-structure");i.add(e);let n={};for(let s in e)aS.call(e,s)&&(n[s]=hS(e[s],t,i));return i.delete(e),n}return e}function dS(e,t){if(e===t)return!0;if(null==e||null==t||typeof e!=typeof t||"object"!=typeof e||Array.isArray(e)!==Array.isArray(t))return!1;let i,n;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(!dS(e[i],t[i]))return!1}else{let s=[];for(n in e)s.push(n);s.sort();let r=[];for(n in t)r.push(n);if(r.sort(),!dS(s,r))return!1;for(i=0;i<s.length;i++)if(!dS(e[s[i]],t[s[i]]))return!1}return!0}function cS(e,t){let i=Object.create(null);return!e||!t||Object.keys(t).forEach(n=>{let s=e[n],r=t[n];dS(s,r)||(i[n]=r)}),i}!function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=4]="Right",e[e.Full=7]="Full"}(Zw||(Zw={})),function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=3]="Right"}(Jw||(Jw={})),function(e){e[e.Inline=1]="Inline",e[e.Gutter=2]="Gutter"}(eS||(eS={})),function(e){e[e.Normal=1]="Normal",e[e.Underlined=2]="Underlined"}(tS||(tS={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(iS||(iS={})),function(e){e[e.Both=0]="Both",e[e.Right=1]="Right",e[e.Left=2]="Left",e[e.None=3]="None"}(nS||(nS={})),function(e){e[e.TextDefined=0]="TextDefined",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"}(sS||(sS={})),function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"}(rS||(rS={})),function(e){e[e.LF=0]="LF",e[e.CRLF=1]="CRLF"}(oS||(oS={}));var uS,gS,pS,fS=class{get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,0|e.tabSize),"tabSize"===e.indentSize?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,0|e.indentSize),this._indentSizeIsTabSize=!1),this.insertSpaces=!!e.insertSpaces,this.defaultEOL=0|e.defaultEOL,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&dS(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}},mS=class{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}};!function(e){e[e.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",e[e.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",e[e.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",e[e.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"}(uS||(uS={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.None=2]="None",e[e.LeftOfInjectedText=3]="LeftOfInjectedText",e[e.RightOfInjectedText=4]="RightOfInjectedText"}(gS||(gS={})),function(e){e[e.FIRST_LINE_DETECTION_LENGTH_LIMIT=1e3]="FIRST_LINE_DETECTION_LENGTH_LIMIT"}(pS||(pS={}));var vS=class{constructor(e,t,i,n,s,r){this.identifier=e,this.range=t,this.text=i,this.forceMoveMarkers=n,this.isAutoWhitespaceEdit=s,this._isTracked=r}},_S=class{constructor(e,t,i){this.regex=e,this.wordSeparators=t,this.simpleSearch=i}},bS=class{constructor(e,t,i){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=i}},CS=class extends Co{constructor(e){super(),this._themeService=e,this._onWillCreateCodeEditor=this._register(new Ro),this.onWillCreateCodeEditor=this._onWillCreateCodeEditor.event,this._onCodeEditorAdd=this._register(new Ro),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new Ro),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new Ro),this.onWillCreateDiffEditor=this._onWillCreateDiffEditor.event,this._onDiffEditorAdd=this._register(new Ro),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new Ro),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._onDidChangeTransientModelProperty=this._register(new Ro),this.onDidChangeTransientModelProperty=this._onDidChangeTransientModelProperty.event,this._onDecorationTypeRegistered=this._register(new Ro),this.onDecorationTypeRegistered=this._onDecorationTypeRegistered.event,this._decorationOptionProviders=new Map,this._editorStyleSheets=new Map,this._codeEditorOpenHandlers=new Eo,this._transientWatchers=this._register(new So),this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}removeDiffEditor(e){delete this._diffEditors[e.getId()]&&this._onDiffEditorRemove.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null,t=this.listCodeEditors();for(let i of t){if(i.hasTextFocus())return i;i.hasWidgetFocus()&&(e=i)}return e}_getOrCreateGlobalStyleSheet(){return this._globalStyleSheet||(this._globalStyleSheet=this._createGlobalStyleSheet()),this._globalStyleSheet}_createGlobalStyleSheet(){return new kS(nC())}_getOrCreateStyleSheet(e){if(!e)return this._getOrCreateGlobalStyleSheet();let t=e.getContainerDomNode();if(!ab(t))return this._getOrCreateGlobalStyleSheet();let i=e.getId();if(!this._editorStyleSheets.has(i)){let e=new SS(this,i,nC(t));this._editorStyleSheets.set(i,e)}return this._editorStyleSheets.get(i)}_removeEditorStyleSheets(e){this._editorStyleSheets.delete(e)}registerDecorationType(e,t,i,n,s){let r=this._decorationOptionProviders.get(t);if(!r){let o=this._getOrCreateStyleSheet(s),a={styleSheet:o,key:t,parentTypeKey:n,options:i||Object.create(null)};r=n?new ES(this._themeService,o,a):new DS(e,this._themeService,o,a),this._decorationOptionProviders.set(t,r),this._onDecorationTypeRegistered.fire(t)}return r.refCount++,{dispose:()=>{this.removeDecorationType(t)}}}listDecorationTypes(){return Array.from(this._decorationOptionProviders.keys())}removeDecorationType(e){let t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(t=>t.removeDecorationsByType(e))))}resolveDecorationOptions(e,t){let i=this._decorationOptionProviders.get(e);if(!i)throw Error("Unknown decoration type key: "+e);return i.getOptions(this,t)}resolveDecorationCSSRules(e){let t=this._decorationOptionProviders.get(e);return t?t.resolveDecorationCSSRules():null}setModelProperty(e,t,i){let n,s=e.toString();this._modelProperties.has(s)?n=this._modelProperties.get(s):(n=new Map,this._modelProperties.set(s,n)),n.set(t,i)}getModelProperty(e,t){let i=e.toString();if(this._modelProperties.has(i))return this._modelProperties.get(i).get(t)}setTransientModelProperty(e,t,i){let n=e.uri.toString(),s=this._transientWatchers.get(n);s||(s=new wS(n,e,this),this._transientWatchers.set(n,s)),s.get(t)!==i&&(s.set(t,i),this._onDidChangeTransientModelProperty.fire(e))}getTransientModelProperty(e,t){let i=e.uri.toString(),n=this._transientWatchers.get(i);if(n)return n.get(t)}getTransientModelProperties(e){let t=e.uri.toString(),i=this._transientWatchers.get(t);if(i)return i.keys().map(e=>[e,i.get(e)])}_removeWatcher(e){this._transientWatchers.deleteAndDispose(e.uri)}async openCodeEditor(e,t,i){for(let n of this._codeEditorOpenHandlers){let s=await n(e,t,i);if(null!==s)return s}return null}registerCodeEditorOpenHandler(e){return vo(this._codeEditorOpenHandlers.unshift(e))}};CS=ki([Ei(0,$w)],CS);var yS,wS=class extends Co{constructor(e,t,i){super(),this.uri=e,this._values={},this._register(t.onWillDispose(()=>i._removeWatcher(this)))}set(e,t){this._values[e]=t}get(e){return this._values[e]}keys(){return Object.keys(this._values)}},SS=class{get sheet(){return this._styleSheet.sheet}constructor(e,t,i){this._parent=e,this._editorId=t,this._styleSheet=i,this._refCount=0}ref(){this._refCount++}unref(){this._refCount--,0===this._refCount&&(this._styleSheet.remove(),this._parent._removeEditorStyleSheets(this._editorId))}insertRule(e,t){lC(e,t,this._styleSheet)}removeRulesContainingSelector(e){hC(e,this._styleSheet)}},kS=class{get sheet(){return this._styleSheet.sheet}constructor(e){this._styleSheet=e}ref(){}unref(){}insertRule(e,t){lC(e,t,this._styleSheet)}removeRulesContainingSelector(e){hC(e,this._styleSheet)}},ES=class{constructor(e,t,i){this._styleSheet=t,this._styleSheet.ref(),this._parentTypeKey=i.parentTypeKey,this.refCount=0,this._beforeContentRules=new IS(yS.BeforeContentClassName,i,e),this._afterContentRules=new IS(yS.AfterContentClassName,i,e)}getOptions(e,t){let i=e.resolveDecorationOptions(this._parentTypeKey,!0);return this._beforeContentRules&&(i.beforeContentClassName=this._beforeContentRules.className),this._afterContentRules&&(i.afterContentClassName=this._afterContentRules.className),i}resolveDecorationCSSRules(){return this._styleSheet.sheet.cssRules}dispose(){this._beforeContentRules&&(this._beforeContentRules=(this._beforeContentRules.dispose(),null)),this._afterContentRules&&(this._afterContentRules=(this._afterContentRules.dispose(),null)),this._styleSheet.unref()}},DS=class{constructor(e,t,i,n){this._disposables=new bo,this.description=e,this._styleSheet=i,this._styleSheet.ref(),this.refCount=0;let s=e=>{let i=new IS(e,n,t);if(this._disposables.add(i),i.hasContent)return i.className},r=e=>{let i=new IS(e,n,t);return this._disposables.add(i),i.hasContent?{className:i.className,hasLetterSpacing:i.hasLetterSpacing}:null};this.className=s(yS.ClassName);let o=r(yS.InlineClassName);if(o&&(this.inlineClassName=o.className,this.inlineClassNameAffectsLetterSpacing=o.hasLetterSpacing),this.beforeContentClassName=s(yS.BeforeContentClassName),this.afterContentClassName=s(yS.AfterContentClassName),n.options.beforeInjectedText&&n.options.beforeInjectedText.contentText){let e=r(yS.BeforeInjectedTextClassName);this.beforeInjectedText={content:n.options.beforeInjectedText.contentText,inlineClassName:null===e||void 0===e?void 0:e.className,inlineClassNameAffectsLetterSpacing:(null===e||void 0===e?void 0:e.hasLetterSpacing)||n.options.beforeInjectedText.affectsLetterSpacing}}if(n.options.afterInjectedText&&n.options.afterInjectedText.contentText){let e=r(yS.AfterInjectedTextClassName);this.afterInjectedText={content:n.options.afterInjectedText.contentText,inlineClassName:null===e||void 0===e?void 0:e.className,inlineClassNameAffectsLetterSpacing:(null===e||void 0===e?void 0:e.hasLetterSpacing)||n.options.afterInjectedText.affectsLetterSpacing}}this.glyphMarginClassName=s(yS.GlyphMarginClassName);let a=n.options;this.isWholeLine=!!a.isWholeLine,this.lineHeight=a.lineHeight,this.fontFamily=a.fontFamily,this.fontSize=a.fontSize,this.fontWeight=a.fontWeight,this.fontStyle=a.fontStyle,this.stickiness=a.rangeBehavior;let l=a.light&&a.light.overviewRulerColor||a.overviewRulerColor,h=a.dark&&a.dark.overviewRulerColor||a.overviewRulerColor;(void 0!==l||void 0!==h)&&(this.overviewRuler={color:l||h,darkColor:h||l,position:a.overviewRulerLane||Zw.Center})}getOptions(e,t){return t?{description:this.description,inlineClassName:this.inlineClassName,beforeContentClassName:this.beforeContentClassName,afterContentClassName:this.afterContentClassName,className:this.className,glyphMarginClassName:this.glyphMarginClassName,isWholeLine:this.isWholeLine,lineHeight:this.lineHeight,fontFamily:this.fontFamily,fontSize:this.fontSize,fontWeight:this.fontWeight,fontStyle:this.fontStyle,overviewRuler:this.overviewRuler,stickiness:this.stickiness,before:this.beforeInjectedText,after:this.afterInjectedText}:this}resolveDecorationCSSRules(){return this._styleSheet.sheet.rules}dispose(){this._disposables.dispose(),this._styleSheet.unref()}},TS={color:"color:{0} !important;",opacity:"opacity:{0};",backgroundColor:"background-color:{0};",outline:"outline:{0};",outlineColor:"outline-color:{0};",outlineStyle:"outline-style:{0};",outlineWidth:"outline-width:{0};",border:"border:{0};",borderColor:"border-color:{0};",borderRadius:"border-radius:{0};",borderSpacing:"border-spacing:{0};",borderStyle:"border-style:{0};",borderWidth:"border-width:{0};",fontStyle:"font-style:{0};",fontWeight:"font-weight:{0};",fontSize:"font-size:{0};",fontFamily:"font-family:{0};",textDecoration:"text-decoration:{0};",cursor:"cursor:{0};",letterSpacing:"letter-spacing:{0};",gutterIconPath:"background:{0} center center no-repeat;",gutterIconSize:"background-size:{0};",contentText:"content:'{0}';",contentIconPath:"content:{0};",margin:"margin:{0};",padding:"padding:{0};",width:"width:{0};",height:"height:{0};",verticalAlign:"vertical-align:{0};"},IS=class{constructor(e,t,i){this._theme=i.getColorTheme(),this._ruleType=e,this._providerArgs=t,this._usesThemeColors=!1,this._hasContent=!1,this._hasLetterSpacing=!1;let n=xS.getClassName(this._providerArgs.key,e);this._providerArgs.parentTypeKey&&(n=n+" "+xS.getClassName(this._providerArgs.parentTypeKey,e)),this._className=n,this._unThemedSelector=xS.getSelector(this._providerArgs.key,this._providerArgs.parentTypeKey,e),this._buildCSS(),this._usesThemeColors?this._themeListener=i.onDidColorThemeChange(e=>{this._theme=i.getColorTheme(),this._removeCSS(),this._buildCSS()}):this._themeListener=null}dispose(){this._hasContent&&(this._hasContent=(this._removeCSS(),!1)),this._themeListener&&(this._themeListener=(this._themeListener.dispose(),null))}get hasContent(){return this._hasContent}get hasLetterSpacing(){return this._hasLetterSpacing}get className(){return this._className}_buildCSS(){let e,t,i,n=this._providerArgs.options;switch(this._ruleType){case yS.ClassName:e=this.getCSSTextForModelDecorationClassName(n),t=this.getCSSTextForModelDecorationClassName(n.light),i=this.getCSSTextForModelDecorationClassName(n.dark);break;case yS.InlineClassName:e=this.getCSSTextForModelDecorationInlineClassName(n),t=this.getCSSTextForModelDecorationInlineClassName(n.light),i=this.getCSSTextForModelDecorationInlineClassName(n.dark);break;case yS.GlyphMarginClassName:e=this.getCSSTextForModelDecorationGlyphMarginClassName(n),t=this.getCSSTextForModelDecorationGlyphMarginClassName(n.light),i=this.getCSSTextForModelDecorationGlyphMarginClassName(n.dark);break;case yS.BeforeContentClassName:e=this.getCSSTextForModelDecorationContentClassName(n.before),t=this.getCSSTextForModelDecorationContentClassName(n.light&&n.light.before),i=this.getCSSTextForModelDecorationContentClassName(n.dark&&n.dark.before);break;case yS.AfterContentClassName:e=this.getCSSTextForModelDecorationContentClassName(n.after),t=this.getCSSTextForModelDecorationContentClassName(n.light&&n.light.after),i=this.getCSSTextForModelDecorationContentClassName(n.dark&&n.dark.after);break;case yS.BeforeInjectedTextClassName:e=this.getCSSTextForModelDecorationContentClassName(n.beforeInjectedText),t=this.getCSSTextForModelDecorationContentClassName(n.light&&n.light.beforeInjectedText),i=this.getCSSTextForModelDecorationContentClassName(n.dark&&n.dark.beforeInjectedText);break;case yS.AfterInjectedTextClassName:e=this.getCSSTextForModelDecorationContentClassName(n.afterInjectedText),t=this.getCSSTextForModelDecorationContentClassName(n.light&&n.light.afterInjectedText),i=this.getCSSTextForModelDecorationContentClassName(n.dark&&n.dark.afterInjectedText);break;default:throw Error("Unknown rule type: "+this._ruleType)}let s=this._providerArgs.styleSheet,r=!1;e.length>0&&(s.insertRule(this._unThemedSelector,e),r=!0),t.length>0&&(s.insertRule(".vs".concat(this._unThemedSelector,", .hc-light").concat(this._unThemedSelector),t),r=!0),i.length>0&&(s.insertRule(".vs-dark".concat(this._unThemedSelector,", .hc-black").concat(this._unThemedSelector),i),r=!0),this._hasContent=r}_removeCSS(){this._providerArgs.styleSheet.removeRulesContainingSelector(this._unThemedSelector)}getCSSTextForModelDecorationClassName(e){if(!e)return"";let t=[];return this.collectCSSText(e,["backgroundColor"],t),this.collectCSSText(e,["outline","outlineColor","outlineStyle","outlineWidth"],t),this.collectBorderSettingsCSSText(e,t),t.join("")}getCSSTextForModelDecorationInlineClassName(e){if(!e)return"";let t=[];return this.collectCSSText(e,["fontStyle","fontWeight","fontFamily","fontSize","textDecoration","cursor","color","opacity","letterSpacing"],t),e.letterSpacing&&(this._hasLetterSpacing=!0),t.join("")}getCSSTextForModelDecorationContentClassName(e){if(!e)return"";let t=[];if(void 0!==e){if(this.collectBorderSettingsCSSText(e,t),void 0!==e.contentIconPath&&t.push(ia(TS.contentIconPath,Gf(Gs.revive(e.contentIconPath)))),"string"==typeof e.contentText){let i=e.contentText.match(/^.*$/m)[0].replace(/['\\]/g,"\\$&");t.push(ia(TS.contentText,i))}this.collectCSSText(e,["verticalAlign","fontStyle","fontWeight","fontSize","fontFamily","textDecoration","color","opacity","backgroundColor","margin","padding"],t),this.collectCSSText(e,["width","height"],t)&&t.push("display:inline-block;")}return t.join("")}getCSSTextForModelDecorationGlyphMarginClassName(e){if(!e)return"";let t=[];return void 0!==e.gutterIconPath&&(t.push(ia(TS.gutterIconPath,Gf(Gs.revive(e.gutterIconPath)))),void 0!==e.gutterIconSize&&t.push(ia(TS.gutterIconSize,e.gutterIconSize))),t.join("")}collectBorderSettingsCSSText(e,t){return!!this.collectCSSText(e,["border","borderColor","borderRadius","borderSpacing","borderStyle","borderWidth"],t)&&(t.push(ia("box-sizing: border-box;")),!0)}collectCSSText(e,t,i){let n=i.length;for(let s of t){let t=this.resolveValue(e[s]);"string"==typeof t&&i.push(ia(TS[s],t))}return i.length!==n}resolveValue(e){if(function(e){return!!e&&"string"==typeof e.id}(e)){this._usesThemeColors=!0;let t=this._theme.getColor(e.id);return t?t.toString():"transparent"}return e}};!function(e){e[e.ClassName=0]="ClassName",e[e.InlineClassName=1]="InlineClassName",e[e.GlyphMarginClassName=2]="GlyphMarginClassName",e[e.BeforeContentClassName=3]="BeforeContentClassName",e[e.AfterContentClassName=4]="AfterContentClassName",e[e.BeforeInjectedTextClassName=5]="BeforeInjectedTextClassName",e[e.AfterInjectedTextClassName=6]="AfterInjectedTextClassName"}(yS||(yS={}));var xS=class{static getClassName(e,t){return"ced-"+e+"-"+t}static getSelector(e,t,i){let n=".monaco-editor ."+this.getClassName(e,i);return t&&(n=n+"."+this.getClassName(t,i)),i===yS.BeforeContentClassName?n+="::before":i===yS.AfterContentClassName&&(n+="::after"),n}},LS=fn("codeEditorService"),AS=fn("contextKeyService"),NS=class extends CS{constructor(e,t){super(t),this._register(this.onCodeEditorAdd(()=>this._checkContextKey())),this._register(this.onCodeEditorRemove(()=>this._checkContextKey())),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this._register(this.registerCodeEditorOpenHandler(async(e,t,i)=>t?this.doOpenEditor(t,e):null))}_checkContextKey(){let e=!1;for(let t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){let i=t.resource.scheme;if(i===Ha.http||i===Ha.https)return Ub(t.resource.toString()),e}return null}let i=t.options?t.options.selection:null;if(i)if("number"==typeof i.endLineNumber&&"number"==typeof i.endColumn)e.setSelection(i),e.revealRangeInCenter(i,Yw.Immediate);else{let t={lineNumber:i.startLineNumber,column:i.startColumn};e.setPosition(t),e.revealPositionInCenter(t,Yw.Immediate)}return e}findModel(e,t){let i=e.getModel();return i&&i.uri.toString()!==t.toString()?null:i}};yC(LS,NS=ki([Ei(0,AS),Ei(1,$w)],NS),_C.Eager);var FS=class{get mainContainer(){var e,t;return null!==(e=null===(t=this._codeEditorService.listCodeEditors().at(0))||void 0===t?void 0:t.getContainerDomNode())&&void 0!==e?e:Lv.document.body}get activeContainer(){var e,t,i;return null!==(e=null===(t=null!==(i=this._codeEditorService.getFocusedCodeEditor())&&void 0!==i?i:this._codeEditorService.getActiveCodeEditor())||void 0===t?void 0:t.getContainerDomNode())&&void 0!==e?e:this.mainContainer}get mainContainerDimension(){return Q_(this.mainContainer)}get activeContainerDimension(){return Q_(this.activeContainer)}get containers(){return Pr(this._codeEditorService.listCodeEditors().map(e=>e.getContainerDomNode()))}getContainer(){return this.activeContainer}whenContainerStylesLoaded(){}focus(){var e;null===(e=this._codeEditorService.getFocusedCodeEditor())||void 0===e||e.focus()}constructor(e){this._codeEditorService=e,this.onDidLayoutMainContainer=_o.None,this.onDidLayoutActiveContainer=_o.None,this.onDidLayoutContainer=_o.None,this.onDidChangeActiveContainer=_o.None,this.onDidAddContainer=_o.None,this.mainContainerOffset={top:0,quickPickTop:0},this.activeContainerOffset={top:0,quickPickTop:0}}};FS=ki([Ei(0,LS)],FS);var OS=class extends FS{get mainContainer(){return this._container}constructor(e,t){super(t),this._container=e}};OS=ki([Ei(1,LS)],OS),yC(EC,FS,_C.Delayed);var RS,MS=fn("dialogService"),PS=fn("fileDialogService"),BS=fn("notificationService");!function(e){e[e.Resource=0]="Resource",e[e.Workspace=1]="Workspace"}(RS||(RS={}));var US=class{constructor(e,t){this.resource=e,this.elements=t}},HS=(Ze=class e{constructor(){this.id=e._ID++,this.order=1}nextOrder(){return 0===this.id?0:this.order++}},{_:Ze._ID=0},{_:Ze.None=new Ze},Ze),WS=(Je=class e{constructor(){this.id=e._ID++,this.order=1}nextOrder(){return 0===this.id?0:this.order++}},{_:Je._ID=0},{_:Je.None=new Je},Je);function VS(e){return e.scheme===Ha.file?e.fsPath:e.path}var zS,KS=0,qS=class{constructor(e,t,i,n,s,r,o){this.id=++KS,this.type=RS.Resource,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=i,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=n,this.groupOrder=s,this.sourceId=r,this.sourceOrder=o,this.isValid=!0}setValid(e){this.isValid=e}toString(){return"[id:".concat(this.id,"] [group:").concat(this.groupId,"] [").concat(this.isValid?"  VALID":"INVALID","] ").concat(this.actual.constructor.name," - ").concat(this.actual)}};!function(e){e[e.ExternalRemoval=0]="ExternalRemoval",e[e.NoParallelUniverses=1]="NoParallelUniverses"}(zS||(zS={}));var GS=class{constructor(e,t){this.resourceLabel=e,this.reason=t}},jS=class{constructor(){this.elements=new Map}createMessage(){let e=[],t=[];for(let[,n]of this.elements)(n.reason===zS.ExternalRemoval?e:t).push(n.resourceLabel);let i=[];return e.length>0&&i.push(Li(2406,"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&i.push(Li(2407,"The following files have been modified in an incompatible way: {0}.",t.join(", "))),i.join("\n")}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}},YS=class{constructor(e,t,i,n,s,r,o){this.id=++KS,this.type=RS.Workspace,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=i,this.groupId=n,this.groupOrder=s,this.sourceId=r,this.sourceOrder=o,this.removedResources=null,this.invalidatedResources=null}canSplit(){return"function"==typeof this.actual.split}removeResource(e,t,i){this.removedResources||(this.removedResources=new jS),this.removedResources.has(t)||this.removedResources.set(t,new GS(e,i))}setValid(e,t,i){i?this.invalidatedResources&&(this.invalidatedResources.delete(t),0===this.invalidatedResources.size&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new jS),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new GS(e,zS.ExternalRemoval)))}toString(){return"[id:".concat(this.id,"] [group:").concat(this.groupId,"] [").concat(this.invalidatedResources?"INVALID":"  VALID","] ").concat(this.actual.constructor.name," - ").concat(this.actual)}},QS=class{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(let e of this._past)e.type===RS.Workspace&&e.removeResource(this.resourceLabel,this.strResource,zS.ExternalRemoval);for(let e of this._future)e.type===RS.Workspace&&e.removeResource(this.resourceLabel,this.strResource,zS.ExternalRemoval);this.versionId++}toString(){let e=[];e.push("* ".concat(this.strResource,":"));for(let t=0;t<this._past.length;t++)e.push("   * [UNDO] ".concat(this._past[t]));for(let t=this._future.length-1;t>=0;t--)e.push("   * [REDO] ".concat(this._future[t]));return e.join("\n")}flushAllElements(){this._past=[],this._future=[],this.versionId++}setElementsIsValid(e){for(let t of this._past)t.type===RS.Workspace?t.setValid(this.resourceLabel,this.strResource,e):t.setValid(e);for(let t of this._future)t.type===RS.Workspace?t.setValid(this.resourceLabel,this.strResource,e):t.setValid(e)}_setElementValidFlag(e,t){e.type===RS.Workspace?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(let i of this._past)t(i.actual)&&this._setElementValidFlag(i,e);for(let i of this._future)t(i.actual)&&this._setElementValidFlag(i,e)}pushElement(e){for(let t of this._future)t.type===RS.Workspace&&t.removeResource(this.resourceLabel,this.strResource,zS.NoParallelUniverses);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){let t=[];for(let i=0,n=this._past.length;i<n;i++)t.push(this._past[i].id);for(let i=this._future.length-1;i>=0;i--)t.push(this._future[i].id);return new US(e,t)}restoreSnapshot(e){let t=e.elements.length,i=!0,n=0,s=-1;for(let o=0,a=this._past.length;o<a;o++,n++){let r=this._past[o];i&&(n>=t||r.id!==e.elements[n])&&(i=!1,s=0),!i&&r.type===RS.Workspace&&r.removeResource(this.resourceLabel,this.strResource,zS.ExternalRemoval)}let r=-1;for(let o=this._future.length-1;o>=0;o--,n++){let s=this._future[o];i&&(n>=t||s.id!==e.elements[n])&&(i=!1,r=o),!i&&s.type===RS.Workspace&&s.removeResource(this.resourceLabel,this.strResource,zS.ExternalRemoval)}-1!==s&&(this._past=this._past.slice(0,s)),-1!==r&&(this._future=this._future.slice(r+1)),this.versionId++}getElements(){let e=[],t=[];for(let i of this._past)e.push(i.actual);for(let i of this._future)t.push(i.actual);return{past:e,future:t}}getClosestPastElement(){return 0===this._past.length?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return 0===this._future.length?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let i=this._past.length-1;i>=0;i--)if(this._past[i]===e){t.has(this.strResource)?this._past[i]=t.get(this.strResource):this._past.splice(i,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let i=this._future.length-1;i>=0;i--)if(this._future[i]===e){t.has(this.strResource)?this._future[i]=t.get(this.strResource):this._future.splice(i,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}},$S=class{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,i=this.editStacks.length;t<i;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}},XS=new QS("","");XS.locked=!0;var ZS=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}registerUriComparisonKeyComputer(e,t){return this._uriComparisonKeyComputers.push([e,t]),{dispose:()=>{for(let e=0,i=this._uriComparisonKeyComputers.length;e<i;e++)if(this._uriComparisonKeyComputers[e][1]===t)return void this._uriComparisonKeyComputers.splice(e,1)}}}getUriComparisonKey(e){for(let t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log("AFTER ".concat(e,": "));let t=[];for(let i of this._editStacks)t.push(i[1].toString());console.log(t.join("\n"))}pushElement(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:HS.None,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:WS.None;if(e.type===RS.Resource){let n=VS(e.resource),s=this.getUriComparisonKey(e.resource);this._pushElement(new qS(e,n,s,t.id,t.nextOrder(),i.id,i.nextOrder()))}else{let n=new Set,s=[],r=[];for(let t of e.resources){let e=VS(t),i=this.getUriComparisonKey(t);n.has(i)||(n.add(i),s.push(e),r.push(i))}1===s.length?this._pushElement(new qS(e,s[0],r[0],t.id,t.nextOrder(),i.id,i.nextOrder())):this._pushElement(new YS(e,s,r,t.id,t.nextOrder(),i.id,i.nextOrder()))}}_pushElement(e){for(let t=0,i=e.strResources.length;t<i;t++){let i,n=e.resourceLabels[t],s=e.strResources[t];this._editStacks.has(s)?i=this._editStacks.get(s):(i=new QS(n,s),this._editStacks.set(s,i)),i.pushElement(e)}}getLastElement(e){let t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){let e=this._editStacks.get(t);if(e.hasFutureElements())return null;let i=e.getClosestPastElement();return i?i.actual:null}return null}_splitPastWorkspaceElement(e,t){let i=e.actual.split(),n=new Map;for(let s of i){let e=new qS(s,VS(s.resource),this.getUriComparisonKey(s.resource),0,0,0,0);n.set(e.strResource,e)}for(let s of e.strResources)t&&t.has(s)||this._editStacks.get(s).splitPastWorkspaceElement(e,n)}_splitFutureWorkspaceElement(e,t){let i=e.actual.split(),n=new Map;for(let s of i){let e=new qS(s,VS(s.resource),this.getUriComparisonKey(s.resource),0,0,0,0);n.set(e.strResource,e)}for(let s of e.strResources)t&&t.has(s)||this._editStacks.get(s).splitFutureWorkspaceElement(e,n)}removeElements(e){let t="string"==typeof e?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,i){let n=this.getUriComparisonKey(e);this._editStacks.has(n)&&this._editStacks.get(n).setElementsValidFlag(t,i)}hasElements(e){let t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){let e=this._editStacks.get(t);return e.hasPastElements()||e.hasFutureElements()}return!1}createSnapshot(e){let t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new US(e,[])}restoreSnapshot(e){let t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){let i=this._editStacks.get(t);i.restoreSnapshot(e),!i.hasPastElements()&&!i.hasFutureElements()&&(i.dispose(),this._editStacks.delete(t))}}getElements(e){let t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(let[n,s]of this._editStacks){let r=s.getClosestPastElement();r&&r.sourceId===e&&(!t||r.sourceOrder>t.sourceOrder)&&(t=r,i=n)}return[t,i]}canUndo(e){if(e instanceof WS){let[,t]=this._findClosestUndoElementWithSource(e.id);return!!t}let t=this.getUriComparisonKey(e);return!!this._editStacks.has(t)&&this._editStacks.get(t).hasPastElements()}_onError(e,t){Ri(e);for(let i of t.strResources)this.removeElements(i);this._notificationService.error(e)}_acquireLocks(e){for(let t of e.editStacks)if(t.locked)throw Error("Cannot acquire edit stack lock");for(let t of e.editStacks)t.locked=!0;return()=>{for(let t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,i,n,s){let r,o=this._acquireLocks(i);try{r=t()}catch(t){return o(),n.dispose(),this._onError(t,e)}return r?r.then(()=>(o(),n.dispose(),s()),t=>(o(),n.dispose(),this._onError(t,e))):(o(),n.dispose(),s())}async _invokeWorkspacePrepare(e){if(void 0===e.actual.prepareUndoRedo)return Co.None;let t=e.actual.prepareUndoRedo();return void 0===t?Co.None:t}_invokeResourcePrepare(e,t){if(e.actual.type!==RS.Workspace||void 0===e.actual.prepareUndoRedo)return t(Co.None);let i=e.actual.prepareUndoRedo();return i?go(i)?t(i):i.then(e=>t(e)):t(Co.None)}_getAffectedEditStacks(e){let t=[];for(let i of e.strResources)t.push(this._editStacks.get(i)||XS);return new $S(t)}_tryToSplitAndUndo(e,t,i,n){if(t.canSplit())return this._splitPastWorkspaceElement(t,i),this._notificationService.warn(n),new ek(this._undo(e,0,!0));for(let s of t.strResources)this.removeElements(s);return this._notificationService.warn(n),new ek}_checkWorkspaceUndo(e,t,i,n){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,Li(2408,"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(n&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,Li(2408,"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));let s=[];for(let o of i.editStacks)o.getClosestPastElement()!==t&&s.push(o.resourceLabel);if(s.length>0)return this._tryToSplitAndUndo(e,t,null,Li(2409,"Could not undo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));let r=[];for(let o of i.editStacks)o.locked&&r.push(o.resourceLabel);return r.length>0?this._tryToSplitAndUndo(e,t,null,Li(2410,"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,r.join(", "))):i.isValid()?null:this._tryToSplitAndUndo(e,t,null,Li(2411,"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,i){let n=this._getAffectedEditStacks(t),s=this._checkWorkspaceUndo(e,t,n,!1);return s?s.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,n,i)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(let[,t]of this._editStacks){let i=t.getClosestPastElement();if(i){if(i===e){let i=t.getSecondClosestPastElement();if(i&&i.groupId===e.groupId)return!0}if(i.groupId===e.groupId)return!0}}return!1}async _confirmAndExecuteWorkspaceUndo(e,t,i,n){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){let s;!function(e){e[e.All=0]="All",e[e.This=1]="This",e[e.Cancel=2]="Cancel"}(s||(s={}));let{result:r}=await this._dialogService.prompt({type:xC.Info,message:Li(2412,"Would you like to undo '{0}' across all files?",t.label),buttons:[{label:Li(2413,"&&Undo in {0} Files",i.editStacks.length),run:()=>s.All},{label:Li(2414,"Undo this &&File"),run:()=>s.This}],cancelButton:{run:()=>s.Cancel}});if(r===s.Cancel)return;if(r===s.This)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);let o=this._checkWorkspaceUndo(e,t,i,!1);if(o)return o.returnValue;n=!0}let s;try{s=await this._invokeWorkspacePrepare(t)}catch(e){return this._onError(e,t)}let r=this._checkWorkspaceUndo(e,t,i,!0);if(r)return s.dispose(),r.returnValue;for(let o of i.editStacks)o.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),i,s,()=>this._continueUndoInGroup(t.groupId,n))}_resourceUndo(e,t,i){if(t.isValid){if(e.locked){let e=Li(2415,"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);return void this._notificationService.warn(e)}return this._invokeResourcePrepare(t,n=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new $S([e]),n,()=>this._continueUndoInGroup(t.groupId,i))))}e.flushAllElements()}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(let[n,s]of this._editStacks){let r=s.getClosestPastElement();r&&r.groupId===e&&(!t||r.groupOrder>t.groupOrder)&&(t=r,i=n)}return[t,i]}_continueUndoInGroup(e,t){if(!e)return;let[,i]=this._findClosestUndoElementInGroup(e);return i?this._undo(i,0,t):void 0}undo(e){if(e instanceof WS){let[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return"string"==typeof e?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;if(!this._editStacks.has(e))return;let n=this._editStacks.get(e),s=n.getClosestPastElement();if(s){if(s.groupId){let[e,n]=this._findClosestUndoElementInGroup(s.groupId);if(s!==e&&n)return this._undo(n,t,i)}if((s.sourceId!==t||s.confirmBeforeUndo)&&!i)return this._confirmAndContinueUndo(e,t,s);try{return s.type===RS.Workspace?this._workspaceUndo(e,s,i):this._resourceUndo(n,s,i)}finally{}}}async _confirmAndContinueUndo(e,t,i){if((await this._dialogService.confirm({message:Li(2416,"Would you like to undo '{0}'?",i.label),primaryButton:Li(2417,"&&Yes"),cancelButton:Li(2418,"No")})).confirmed)return this._undo(e,t,!0)}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(let[n,s]of this._editStacks){let r=s.getClosestFutureElement();r&&r.sourceId===e&&(!t||r.sourceOrder<t.sourceOrder)&&(t=r,i=n)}return[t,i]}canRedo(e){if(e instanceof WS){let[,t]=this._findClosestRedoElementWithSource(e.id);return!!t}let t=this.getUriComparisonKey(e);return!!this._editStacks.has(t)&&this._editStacks.get(t).hasFutureElements()}_tryToSplitAndRedo(e,t,i,n){if(t.canSplit())return this._splitFutureWorkspaceElement(t,i),this._notificationService.warn(n),new ek(this._redo(e));for(let s of t.strResources)this.removeElements(s);return this._notificationService.warn(n),new ek}_checkWorkspaceRedo(e,t,i,n){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,Li(2419,"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(n&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,Li(2419,"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));let s=[];for(let o of i.editStacks)o.getClosestFutureElement()!==t&&s.push(o.resourceLabel);if(s.length>0)return this._tryToSplitAndRedo(e,t,null,Li(2420,"Could not redo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));let r=[];for(let o of i.editStacks)o.locked&&r.push(o.resourceLabel);return r.length>0?this._tryToSplitAndRedo(e,t,null,Li(2421,"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,r.join(", "))):i.isValid()?null:this._tryToSplitAndRedo(e,t,null,Li(2422,"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){let i=this._getAffectedEditStacks(t),n=this._checkWorkspaceRedo(e,t,i,!1);return n?n.returnValue:this._executeWorkspaceRedo(e,t,i)}async _executeWorkspaceRedo(e,t,i){let n;try{n=await this._invokeWorkspacePrepare(t)}catch(e){return this._onError(e,t)}let s=this._checkWorkspaceRedo(e,t,i,!0);if(s)return n.dispose(),s.returnValue;for(let r of i.editStacks)r.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),i,n,()=>this._continueRedoInGroup(t.groupId))}_resourceRedo(e,t){if(t.isValid){if(e.locked){let e=Li(2423,"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);return void this._notificationService.warn(e)}return this._invokeResourcePrepare(t,i=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new $S([e]),i,()=>this._continueRedoInGroup(t.groupId))))}e.flushAllElements()}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(let[n,s]of this._editStacks){let r=s.getClosestFutureElement();r&&r.groupId===e&&(!t||r.groupOrder<t.groupOrder)&&(t=r,i=n)}return[t,i]}_continueRedoInGroup(e){if(!e)return;let[,t]=this._findClosestRedoElementInGroup(e);return t?this._redo(t):void 0}redo(e){if(e instanceof WS){let[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return"string"==typeof e?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;let t=this._editStacks.get(e),i=t.getClosestFutureElement();if(i){if(i.groupId){let[e,t]=this._findClosestRedoElementInGroup(i.groupId);if(i!==e&&t)return this._redo(t)}try{return i.type===RS.Workspace?this._workspaceRedo(e,i):this._resourceRedo(t,i)}finally{}}}};ZS=ki([Ei(0,MS),Ei(1,BS)],ZS);var JS,ek=class{constructor(e){this.returnValue=e}};!function(e){let t=new WeakMap,i=0;e.of=function(e){let n=t.get(e);return void 0===n&&(n=++i,t.set(e,n)),n}}(JS||(JS={}));var tk,ik=class{constructor(e){this._default=e}get(e){return this._default}update(e,t){return this._default}default(){return this._default}},nk=class{constructor(e,t,i,n,s,r){this._logService=e,this._name=t,this._registry=i,this._default=n,this._min=s,this._max=r,this._cache=new ho(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((e,t)=>Fg(JS.of(t),e),0)}get(e){let t=this._key(e),i=this._cache.get(t);return i?D_(i.value,this._min,this._max):this.default()}update(e,t){let i=this._key(e),n=this._cache.get(i);n||(n=new I_(6),this._cache.set(i,n));let s=D_(n.update(t),this._min,this._max);return Ya(e.uri,"output")||this._logService.trace("[DEBOUNCE: ".concat(this._name,"] for ").concat(e.uri.toString()," is ").concat(s,"ms")),s}_overall(){let e=new T_;for(let[,t]of this._cache)e.update(t.value);return e.value}default(){return D_(0|this._overall()||this._default,this._min,this._max)}},sk=class{constructor(e,t){this._logService=e,this._data=new Map,this._isDev=t.isExtensionDevelopment||!t.isBuilt}for(e,t,i){var n,s,r;let o=null!==(n=null===i||void 0===i?void 0:i.min)&&void 0!==n?n:50,a=null!==(s=null===i||void 0===i?void 0:i.max)&&void 0!==s?s:o**2,l=null!==(r=null===i||void 0===i?void 0:i.key)&&void 0!==r?r:void 0,h="".concat(JS.of(e),",").concat(o).concat(l?","+l:""),d=this._data.get(h);return d||(this._isDev?(this._logService.debug("[DEBOUNCE: ".concat(t,"] is disabled in developed mode")),d=new ik(1.5*o)):d=new nk(this._logService,t,e,0|this._overallAverage()||1.5*o,o,a),this._data.set(h,d)),d}_overallAverage(){let e=new T_;for(let t of this._data.values())e.update(t.default());return e.value}};function rk(e,t){return t&&(e.stack||e.stacktrace)?Li(105,"{0}: {1}",ak(e),ok(e.stack)||ok(e.stacktrace)):ak(e)}function ok(e){return Array.isArray(e)?e.join("\n"):e}function ak(e){return"ERR_UNC_HOST_NOT_ALLOWED"===e.code?"".concat(e.message,". Please update the 'security.allowedUNCHosts' setting if you want to allow this host."):"string"==typeof e.code&&"number"==typeof e.errno&&"string"==typeof e.syscall?Li(106,"A system error occurred ({0})",e.message):e.message||Li(107,"An unknown error occurred. Please consult the log for more details.")}function lk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return Li(107,"An unknown error occurred. Please consult the log for more details.");if(Array.isArray(e)){let i=Pr(e),n=lk(i[0],t);return i.length>1?Li(108,"{0} ({1} errors in total)",n,i.length):n}if($i(e))return e;if(e.detail){let i=e.detail;if(i.error)return rk(i.error,t);if(i.exception)return rk(i.exception,t)}return e.stack?rk(e,t):e.message?e.message:Li(107,"An unknown error occurred. Please consult the log for more details.")}function hk(){switch(arguments.length){case 1:return Li(1790,"Did you mean {0}?",arguments.length<=0?void 0:arguments[0]);case 2:return Li(1791,"Did you mean {0} or {1}?",arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]);case 3:return Li(1792,"Did you mean {0}, {1} or {2}?",arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]);default:return}}sk=ki([Ei(0,Np),Ei(1,Hg)],sk),function(e){e[e.LParen=0]="LParen",e[e.RParen=1]="RParen",e[e.Neg=2]="Neg",e[e.Eq=3]="Eq",e[e.NotEq=4]="NotEq",e[e.Lt=5]="Lt",e[e.LtEq=6]="LtEq",e[e.Gt=7]="Gt",e[e.GtEq=8]="GtEq",e[e.RegexOp=9]="RegexOp",e[e.RegexStr=10]="RegexStr",e[e.True=11]="True",e[e.False=12]="False",e[e.In=13]="In",e[e.Not=14]="Not",e[e.And=15]="And",e[e.Or=16]="Or",e[e.Str=17]="Str",e[e.QuotedStr=18]="QuotedStr",e[e.Error=19]="Error",e[e.EOF=20]="EOF"}(tk||(tk={}));var dk=Li(1793,"Did you forget to open or close the quote?"),ck=Li(1794,"Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'."),uk=(et=class e{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/(?:["-%\*-<>-_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088F\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5C\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDC-\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7DC\uA7F1-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD40-\uDD59\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC7\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDB0-\uDDDB\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDEA0-\uDEB8\uDEBB-\uDED3\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3\uDFF2\uDFF3]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDEC0-\uDEDE\uDEE0-\uDEE2\uDEE4\uDEE5\uDEE7-\uDEED\uDEF0-\uDEF4\uDEFE\uDEFF\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79])+/y}static getLexeme(e){switch(e.type){case tk.LParen:return"(";case tk.RParen:return")";case tk.Neg:return"!";case tk.Eq:return e.isTripleEq?"===":"==";case tk.NotEq:return e.isTripleEq?"!==":"!=";case tk.Lt:return"<";case tk.LtEq:return"<=";case tk.Gt:case tk.GtEq:return">=";case tk.RegexOp:return"=~";case tk.RegexStr:return e.lexeme;case tk.True:return"true";case tk.False:return"false";case tk.In:return"in";case tk.Not:return"not";case tk.And:return"&&";case tk.Or:return"||";case tk.Str:case tk.QuotedStr:case tk.Error:return e.lexeme;case tk.EOF:return"EOF";default:throw Wi("unhandled token type: ".concat(JSON.stringify(e),"; have you forgotten to add a case?"))}}get errors(){return this._errors}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case En.OpenParen:this._addToken(tk.LParen);break;case En.CloseParen:this._addToken(tk.RParen);break;case En.ExclamationMark:if(this._match(En.Equals)){let e=this._match(En.Equals);this._tokens.push({type:tk.NotEq,offset:this._start,isTripleEq:e})}else this._addToken(tk.Neg);break;case En.SingleQuote:this._quotedString();break;case En.Slash:this._regex();break;case En.Equals:if(this._match(En.Equals)){let e=this._match(En.Equals);this._tokens.push({type:tk.Eq,offset:this._start,isTripleEq:e})}else this._match(En.Tilde)?this._addToken(tk.RegexOp):this._error(hk("==","=~"));break;case En.LessThan:this._addToken(this._match(En.Equals)?tk.LtEq:tk.Lt);break;case En.GreaterThan:this._addToken(this._match(En.Equals)?tk.GtEq:tk.Gt);break;case En.Ampersand:this._match(En.Ampersand)?this._addToken(tk.And):this._error(hk("&&"));break;case En.Pipe:this._match(En.Pipe)?this._addToken(tk.Or):this._error(hk("||"));break;case En.Space:case En.CarriageReturn:case En.Tab:case En.LineFeed:case En.NoBreakSpace:break;default:this._string()}return this._start=this._current,this._addToken(tk.EOF),Array.from(this._tokens)}_match(e){return!this._isAtEnd()&&this._input.charCodeAt(this._current)===e&&(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?En.Null:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){let t=this._start,i=this._input.substring(this._start,this._current),n={type:tk.Error,offset:this._start,lexeme:i};this._errors.push({offset:t,lexeme:i,additionalInfo:e}),this._tokens.push(n)}_string(){this.stringRe.lastIndex=this._start;let t=this.stringRe.exec(this._input);if(t){this._current=this._start+t[0].length;let i=this._input.substring(this._start,this._current),n=e._keywords.get(i);n?this._addToken(n):this._tokens.push({type:tk.Str,lexeme:i,offset:this._start})}}_quotedString(){for(;this._peek()!==En.SingleQuote&&!this._isAtEnd();)this._advance();this._isAtEnd()?this._error(dk):(this._advance(),this._tokens.push({type:tk.QuotedStr,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1}))}_regex(){let t=this._current,i=!1,n=!1;for(;;){if(t>=this._input.length)return this._current=t,void this._error(ck);let e=this._input.charCodeAt(t);if(i)i=!1;else{if(e===En.Slash&&!n){t++;break}e===En.OpenSquareBracket?n=!0:e===En.Backslash?i=!0:e===En.CloseSquareBracket&&(n=!1)}t++}for(;t<this._input.length&&e._regexFlags.has(this._input.charCodeAt(t));)t++;this._current=t;let s=this._input.substring(this._start,this._current);this._tokens.push({type:tk.RegexStr,lexeme:s,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}},{_:et._regexFlags=new Set(["i","g","s","m","y","u"].map(e=>e.charCodeAt(0)))},{_:et._keywords=new Map([["not",tk.Not],["in",tk.In],["false",tk.False],["true",tk.True]])},et),gk=new Map;gk.set("false",!1),gk.set("true",!0),gk.set("isMac",qn),gk.set("isLinux",Gn),gk.set("isWindows",Kn),gk.set("isWeb",Yn),gk.set("isMacNative",qn&&!Yn),gk.set("isEdge",ds),gk.set("isFirefox",ls),gk.set("isChrome",as),gk.set("isSafari",hs);var pk,fk=Object.prototype.hasOwnProperty;!function(e){e[e.False=0]="False",e[e.True=1]="True",e[e.Defined=2]="Defined",e[e.Not=3]="Not",e[e.Equals=4]="Equals",e[e.NotEquals=5]="NotEquals",e[e.And=6]="And",e[e.Regex=7]="Regex",e[e.NotRegex=8]="NotRegex",e[e.Or=9]="Or",e[e.In=10]="In",e[e.NotIn=11]="NotIn",e[e.Greater=12]="Greater",e[e.GreaterEquals=13]="GreaterEquals",e[e.Smaller=14]="Smaller",e[e.SmallerEquals=15]="SmallerEquals"}(pk||(pk={}));var mk={regexParsingWithErrorRecovery:!0},vk=Li(1770,"Empty context key expression"),_k=Li(1771,"Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),bk=Li(1772,"'in' after 'not'."),Ck=Li(1773,"closing parenthesis ')'"),yk=Li(1774,"Unexpected token"),wk=Li(1775,"Did you forget to put && or || before the token?"),Sk=Li(1776,"Unexpected end of expression"),kk=Li(1777,"Did you forget to put a context key?"),Ek=(tt=class e{get lexingErrors(){return this._scanner.errors}get parsingErrors(){return this._parsingErrors}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mk;this._config=e,this._scanner=new uk,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(t){if(""!==t){this._tokens=this._scanner.reset(t).scan(),this._current=0,this._parsingErrors=[];try{let t=this._expr();if(!this._isAtEnd()){let t=this._peek(),i=t.type===tk.Str?wk:void 0;throw this._parsingErrors.push({message:yk,offset:t.offset,lexeme:uk.getLexeme(t),additionalInfo:i}),e._parseError}return t}catch(t){if(t!==e._parseError)throw t;return}}else this._parsingErrors.push({message:vk,offset:0,lexeme:"",additionalInfo:_k})}_expr(){return this._or()}_or(){let e=[this._and()];for(;this._matchOne(tk.Or);){let t=this._and();e.push(t)}return 1===e.length?e[0]:Dk.or(...e)}_and(){let e=[this._term()];for(;this._matchOne(tk.And);){let t=this._term();e.push(t)}return 1===e.length?e[0]:Dk.and(...e)}_term(){if(this._matchOne(tk.Neg)){let e=this._peek();switch(e.type){case tk.True:return this._advance(),Ik.INSTANCE;case tk.False:return this._advance(),xk.INSTANCE;case tk.LParen:{this._advance();let e=this._expr();return this._consume(tk.RParen,Ck),null===e||void 0===e?void 0:e.negate()}case tk.Str:return this._advance(),Rk.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){let t=this._peek();switch(t.type){case tk.True:return this._advance(),Dk.true();case tk.False:return this._advance(),Dk.false();case tk.LParen:{this._advance();let e=this._expr();return this._consume(tk.RParen,Ck),e}case tk.Str:{let e=t.lexeme;if(this._advance(),this._matchOne(tk.RegexOp)){let t=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),t.type!==tk.RegexStr)throw this._errExpectedButGot("REGEX",t);let n,s=t.lexeme,r=s.lastIndexOf("/"),o=r===s.length-1?void 0:this._removeFlagsGY(s.substring(r+1));try{n=new RegExp(s.substring(1,r),o)}catch(i){throw this._errExpectedButGot("REGEX",t)}return Wk.create(e,n)}switch(t.type){case tk.RegexStr:case tk.Error:{let i=[t.lexeme];this._advance();let s=this._peek(),r=0;for(let e=0;e<t.lexeme.length;e++)t.lexeme.charCodeAt(e)===En.OpenParen?r++:t.lexeme.charCodeAt(e)===En.CloseParen&&r--;for(;!this._isAtEnd()&&s.type!==tk.And&&s.type!==tk.Or;){switch(s.type){case tk.LParen:r++;break;case tk.RParen:r--;break;case tk.RegexStr:case tk.QuotedStr:for(let e=0;e<s.lexeme.length;e++)s.lexeme.charCodeAt(e)===En.OpenParen?r++:t.lexeme.charCodeAt(e)===En.CloseParen&&r--}if(r<0)break;i.push(uk.getLexeme(s)),this._advance(),s=this._peek()}let o,a=i.join(""),l=a.lastIndexOf("/"),h=l===a.length-1?void 0:this._removeFlagsGY(a.substring(l+1));try{o=new RegExp(a.substring(1,l),h)}catch(n){throw this._errExpectedButGot("REGEX",t)}return Dk.regex(e,o)}case tk.QuotedStr:{let i=t.lexeme;this._advance();let n=null;if(!function(e){return!e||"string"!=typeof e||0===e.trim().length}(i)){let e=i.indexOf("/"),r=i.lastIndexOf("/");if(e!==r&&e>=0){let o=i.slice(e+1,r),a="i"===i[r+1]?"i":"";try{n=new RegExp(o,a)}catch(s){throw this._errExpectedButGot("REGEX",t)}}}if(null===n)throw this._errExpectedButGot("REGEX",t);return Wk.create(e,n)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(tk.Not)){this._consume(tk.In,bk);let t=this._value();return Dk.notIn(e,t)}switch(this._peek().type){case tk.Eq:{this._advance();let t=this._value();if(this._previous().type===tk.QuotedStr)return Dk.equals(e,t);switch(t){case"true":return Dk.has(e);case"false":return Dk.not(e);default:return Dk.equals(e,t)}}case tk.NotEq:{this._advance();let t=this._value();if(this._previous().type===tk.QuotedStr)return Dk.notEquals(e,t);switch(t){case"true":return Dk.not(e);case"false":return Dk.has(e);default:return Dk.notEquals(e,t)}}case tk.Lt:return this._advance(),Uk.create(e,this._value());case tk.LtEq:return this._advance(),Hk.create(e,this._value());case tk.Gt:return this._advance(),Pk.create(e,this._value());case tk.GtEq:return this._advance(),Bk.create(e,this._value());case tk.In:return this._advance(),Dk.in(e,this._value());default:return Dk.has(e)}}case tk.EOF:throw this._parsingErrors.push({message:Sk,offset:t.offset,lexeme:"",additionalInfo:kk}),e._parseError;default:throw this._errExpectedButGot("true | false | KEY \n\t| KEY '=~' REGEX \n\t| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value",this._peek())}}_value(){let e=this._peek();switch(e.type){case tk.Str:case tk.QuotedStr:return this._advance(),e.lexeme;case tk.True:return this._advance(),"true";case tk.False:return this._advance(),"false";case tk.In:return this._advance(),"in";default:return""}}_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return!!this._check(e)&&(this._advance(),!0)}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(t,i,n){let s=Li(1778,"Expected: {0}\nReceived: '{1}'.",t,uk.getLexeme(i)),r=i.offset,o=uk.getLexeme(i);return this._parsingErrors.push({message:s,offset:r,lexeme:o,additionalInfo:n}),e._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===tk.EOF}},{_:tt._parseError=Error()},tt),Dk=(it=class{static false(){return Ik.INSTANCE}static true(){return xk.INSTANCE}static has(e){return Lk.create(e)}static equals(e,t){return Ak.create(e,t)}static notEquals(e,t){return Ok.create(e,t)}static regex(e,t){return Wk.create(e,t)}static in(e,t){return Nk.create(e,t)}static notIn(e,t){return Fk.create(e,t)}static not(e){return Rk.create(e)}static and(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return qk.create(t,null,!0)}static or(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Gk.create(t,null,!0)}static greater(e,t){return Pk.create(e,t)}static greaterEquals(e,t){return Bk.create(e,t)}static smaller(e,t){return Uk.create(e,t)}static smallerEquals(e,t){return Hk.create(e,t)}static deserialize(e){if(null!=e)return this._parser.parse(e)}},{_:it._parser=new Ek({regexParsingWithErrorRecovery:!1})},it);function Tk(e,t){return e.cmp(t)}var Ik=(nt=class{constructor(){this.type=pk.False}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}map(e){return this}negate(){return xk.INSTANCE}},{_:nt.INSTANCE=new nt},nt),xk=(st=class{constructor(){this.type=pk.True}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}map(e){return this}negate(){return Ik.INSTANCE}},{_:st.INSTANCE=new st},st),Lk=class e{static create(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=gk.get(t);return"boolean"==typeof n?n?xk.INSTANCE:Ik.INSTANCE:new e(t,i)}constructor(e,t){this.key=e,this.negated=t,this.type=pk.Defined}cmp(e){return e.type===this.type?Yk(this.key,e.key):this.type-e.type}equals(e){return e.type===this.type&&this.key===e.key}substituteConstants(){let e=gk.get(this.key);return"boolean"==typeof e?e?xk.INSTANCE:Ik.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(e){return e.mapDefined(this.key)}negate(){return this.negated||(this.negated=Rk.create(this.key,this)),this.negated}},Ak=class e{static create(t,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("boolean"==typeof i)return i?Lk.create(t,n):Rk.create(t,n);let s=gk.get(t);return"boolean"==typeof s?i===(s?"true":"false")?xk.INSTANCE:Ik.INSTANCE:new e(t,i,n)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=pk.Equals}cmp(e){return e.type===this.type?Qk(this.key,this.value,e.key,e.value):this.type-e.type}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){let e=gk.get(this.key);if("boolean"==typeof e){let t=e?"true":"false";return this.value===t?xk.INSTANCE:Ik.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return"".concat(this.key," == '").concat(this.value,"'")}keys(){return[this.key]}map(e){return e.mapEquals(this.key,this.value)}negate(){return this.negated||(this.negated=Ok.create(this.key,this.value,this)),this.negated}},Nk=class e{static create(t,i){return new e(t,i)}constructor(e,t){this.key=e,this.valueKey=t,this.type=pk.In,this.negated=null}cmp(e){return e.type===this.type?Qk(this.key,this.valueKey,e.key,e.valueKey):this.type-e.type}equals(e){return e.type===this.type&&(this.key===e.key&&this.valueKey===e.valueKey)}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.valueKey),i=e.getValue(this.key);return Array.isArray(t)?t.includes(i):!("string"!=typeof i||"object"!=typeof t||!t)&&fk.call(t,i)}serialize(){return"".concat(this.key," in '").concat(this.valueKey,"'")}keys(){return[this.key,this.valueKey]}map(e){return e.mapIn(this.key,this.valueKey)}negate(){return this.negated||(this.negated=Fk.create(this.key,this.valueKey)),this.negated}},Fk=class e{static create(t,i){return new e(t,i)}constructor(e,t){this.key=e,this.valueKey=t,this.type=pk.NotIn,this._negated=Nk.create(e,t)}cmp(e){return e.type===this.type?this._negated.cmp(e._negated):this.type-e.type}equals(e){return e.type===this.type&&this._negated.equals(e._negated)}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return"".concat(this.key," not in '").concat(this.valueKey,"'")}keys(){return this._negated.keys()}map(e){return e.mapNotIn(this.key,this.valueKey)}negate(){return this._negated}},Ok=class e{static create(t,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("boolean"==typeof i)return i?Rk.create(t,n):Lk.create(t,n);let s=gk.get(t);return"boolean"==typeof s?i===(s?"true":"false")?Ik.INSTANCE:xk.INSTANCE:new e(t,i,n)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=pk.NotEquals}cmp(e){return e.type===this.type?Qk(this.key,this.value,e.key,e.value):this.type-e.type}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){let e=gk.get(this.key);if("boolean"==typeof e){let t=e?"true":"false";return this.value===t?Ik.INSTANCE:xk.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return"".concat(this.key," != '").concat(this.value,"'")}keys(){return[this.key]}map(e){return e.mapNotEquals(this.key,this.value)}negate(){return this.negated||(this.negated=Ak.create(this.key,this.value,this)),this.negated}},Rk=class e{static create(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=gk.get(t);return"boolean"==typeof n?n?Ik.INSTANCE:xk.INSTANCE:new e(t,i)}constructor(e,t){this.key=e,this.negated=t,this.type=pk.Not}cmp(e){return e.type===this.type?Yk(this.key,e.key):this.type-e.type}equals(e){return e.type===this.type&&this.key===e.key}substituteConstants(){let e=gk.get(this.key);return"boolean"==typeof e?e?Ik.INSTANCE:xk.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return"!".concat(this.key)}keys(){return[this.key]}map(e){return e.mapNot(this.key)}negate(){return this.negated||(this.negated=Lk.create(this.key,this)),this.negated}};function Mk(e,t){if("string"==typeof e){let t=parseFloat(e);isNaN(t)||(e=t)}return"string"==typeof e||"number"==typeof e?t(e):Ik.INSTANCE}var Pk=class e{static create(t,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Mk(i,i=>new e(t,i,n))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=pk.Greater}cmp(e){return e.type===this.type?Qk(this.key,this.value,e.key,e.value):this.type-e.type}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){return this}evaluate(e){return"string"!=typeof this.value&&parseFloat(e.getValue(this.key))>this.value}serialize(){return"".concat(this.key," > ").concat(this.value)}keys(){return[this.key]}map(e){return e.mapGreater(this.key,this.value)}negate(){return this.negated||(this.negated=Hk.create(this.key,this.value,this)),this.negated}},Bk=class e{static create(t,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Mk(i,i=>new e(t,i,n))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=pk.GreaterEquals}cmp(e){return e.type===this.type?Qk(this.key,this.value,e.key,e.value):this.type-e.type}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){return this}evaluate(e){return"string"!=typeof this.value&&parseFloat(e.getValue(this.key))>=this.value}serialize(){return"".concat(this.key," >= ").concat(this.value)}keys(){return[this.key]}map(e){return e.mapGreaterEquals(this.key,this.value)}negate(){return this.negated||(this.negated=Uk.create(this.key,this.value,this)),this.negated}},Uk=class e{static create(t,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Mk(i,i=>new e(t,i,n))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=pk.Smaller}cmp(e){return e.type===this.type?Qk(this.key,this.value,e.key,e.value):this.type-e.type}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){return this}evaluate(e){return"string"!=typeof this.value&&parseFloat(e.getValue(this.key))<this.value}serialize(){return"".concat(this.key," < ").concat(this.value)}keys(){return[this.key]}map(e){return e.mapSmaller(this.key,this.value)}negate(){return this.negated||(this.negated=Bk.create(this.key,this.value,this)),this.negated}},Hk=class e{static create(t,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Mk(i,i=>new e(t,i,n))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=pk.SmallerEquals}cmp(e){return e.type===this.type?Qk(this.key,this.value,e.key,e.value):this.type-e.type}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){return this}evaluate(e){return"string"!=typeof this.value&&parseFloat(e.getValue(this.key))<=this.value}serialize(){return"".concat(this.key," <= ").concat(this.value)}keys(){return[this.key]}map(e){return e.mapSmallerEquals(this.key,this.value)}negate(){return this.negated||(this.negated=Pk.create(this.key,this.value,this)),this.negated}},Wk=class e{static create(t,i){return new e(t,i)}constructor(e,t){this.key=e,this.regexp=t,this.type=pk.Regex,this.negated=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;let t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return t<i?-1:t>i?1:0}equals(e){if(e.type===this.type){let t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return this.key===e.key&&t===i}return!1}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.key);return!!this.regexp&&this.regexp.test(t)}serialize(){let e=this.regexp?"/".concat(this.regexp.source,"/").concat(this.regexp.flags):"/invalid/";return"".concat(this.key," =~ ").concat(e)}keys(){return[this.key]}map(e){return e.mapRegex(this.key,this.regexp)}negate(){return this.negated||(this.negated=Vk.create(this)),this.negated}},Vk=class e{static create(t){return new e(t)}constructor(e){this._actual=e,this.type=pk.NotRegex}cmp(e){return e.type===this.type?this._actual.cmp(e._actual):this.type-e.type}equals(e){return e.type===this.type&&this._actual.equals(e._actual)}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return"!(".concat(this._actual.serialize(),")")}keys(){return this._actual.keys()}map(t){return new e(this._actual.map(t))}negate(){return this._actual}};function zk(e){let t=null;for(let i=0,n=e.length;i<n;i++){let n=e[i].substituteConstants();if(e[i]!==n&&null===t){t=[];for(let n=0;n<i;n++)t[n]=e[n]}null!==t&&(t[i]=n)}return null===t?e:t}var Kk,qk=class e{static create(t,i,n){return e._normalizeArr(t,i,n)}constructor(e,t){this.expr=e,this.negated=t,this.type=pk.And}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){let i=Tk(this.expr[t],e.expr[t]);if(0!==i)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){let t=zk(this.expr);return t===this.expr?this:e.create(t,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(t,i,n){let s=[],r=!1;for(let e of t)if(e){if(e.type===pk.True){r=!0;continue}if(e.type===pk.False)return Ik.INSTANCE;if(e.type===pk.And){s.push(...e.expr);continue}s.push(e)}if(0===s.length&&r)return xk.INSTANCE;if(0!==s.length){if(1===s.length)return s[0];s.sort(Tk);for(let e=1;e<s.length;e++)s[e-1].equals(s[e])&&(s.splice(e,1),e--);if(1===s.length)return s[0];for(;s.length>1;){let t=s[s.length-1];if(t.type!==pk.Or)break;s.pop();let i=s.pop(),r=0===s.length,o=Gk.create(t.expr.map(t=>e.create([t,i],null,n)),null,r);o&&(s.push(o),s.sort(Tk))}if(1===s.length)return s[0];if(n){for(let e=0;e<s.length;e++)for(let t=e+1;t<s.length;t++)if(s[e].negate().equals(s[t]))return Ik.INSTANCE;if(1===s.length)return s[0]}return new e(s,i)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){let e=[];for(let t of this.expr)e.push(...t.keys());return e}map(t){return new e(this.expr.map(e=>e.map(t)),null)}negate(){if(!this.negated){let e=[];for(let t of this.expr)e.push(t.negate());this.negated=Gk.create(e,this,!0)}return this.negated}},Gk=class e{static create(t,i,n){return e._normalizeArr(t,i,n)}constructor(e,t){this.expr=e,this.negated=t,this.type=pk.Or}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){let i=Tk(this.expr[t],e.expr[t]);if(0!==i)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){let t=zk(this.expr);return t===this.expr?this:e.create(t,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(t,i,n){let s=[],r=!1;if(t){for(let e=0,i=t.length;e<i;e++){let i=t[e];if(i){if(i.type===pk.False){r=!0;continue}if(i.type===pk.True)return xk.INSTANCE;if(i.type===pk.Or){s=s.concat(i.expr);continue}s.push(i)}}if(0===s.length&&r)return Ik.INSTANCE;s.sort(Tk)}if(0!==s.length){if(1===s.length)return s[0];for(let e=1;e<s.length;e++)s[e-1].equals(s[e])&&(s.splice(e,1),e--);if(1===s.length)return s[0];if(n){for(let e=0;e<s.length;e++)for(let t=e+1;t<s.length;t++)if(s[e].negate().equals(s[t]))return xk.INSTANCE;if(1===s.length)return s[0]}return new e(s,i)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){let e=[];for(let t of this.expr)e.push(...t.keys());return e}map(t){return new e(this.expr.map(e=>e.map(t)),null)}negate(){if(!this.negated){let t=[];for(let e of this.expr)t.push(e.negate());for(;t.length>1;){let i=t.shift(),n=t.shift(),s=[];for(let e of Zk(i))for(let t of Zk(n))s.push(qk.create([e,t],null,!1));t.unshift(e.create(s,null,!1))}this.negated=e.create(t,this,!0)}return this.negated}},jk=(rt=class e extends Lk{static all(){return e._info.values()}constructor(t,i,n){super(t,null),this._defaultValue=i,"object"==typeof n?e._info.push((0,r.A)((0,r.A)({},n),{},{key:t})):!0!==n&&e._info.push({key:t,description:n,type:null==i?void 0:typeof i})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return Ak.create(this.key,e)}notEqualsTo(e){return Ok.create(this.key,e)}greater(e){return Pk.create(this.key,e)}},{_:rt._info=[]},rt);function Yk(e,t){return e<t?-1:e>t?1:0}function Qk(e,t,i,n){return e<i?-1:e>i?1:t<n?-1:t>n?1:0}function $k(e,t){if(e.type===pk.False||t.type===pk.True)return!0;if(e.type===pk.Or)return t.type===pk.Or&&Xk(e.expr,t.expr);if(t.type===pk.Or){for(let i of t.expr)if($k(e,i))return!0;return!1}if(e.type===pk.And){if(t.type===pk.And)return Xk(t.expr,e.expr);for(let i of e.expr)if($k(i,t))return!0;return!1}return e.equals(t)}function Xk(e,t){let i=0,n=0;for(;i<e.length&&n<t.length;){let s=e[i].cmp(t[n]);if(s<0)return!1;0===s&&i++,n++}return i===e.length}function Zk(e){return e.type===pk.Or?e.expr:[e]}!function(e){e[e.Off=0]="Off",e[e.Trace=1]="Trace",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warning=4]="Warning",e[e.Error=5]="Error"}(Kk||(Kk={}));var Jk=Kk.Info;function eE(e,t,i){switch(t){case Kk.Trace:e.trace(i);break;case Kk.Debug:e.debug(i);break;case Kk.Info:e.info(i);break;case Kk.Warning:e.warn(i);break;case Kk.Error:e.error(i);break;case Kk.Off:break;default:throw Error("Invalid log level ".concat(t))}}function tE(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i="";for(let s=0;s<e.length;s++){let r=e[s];if(r instanceof Error&&(r=lk(r,t)),"object"==typeof r)try{r=JSON.stringify(r)}catch(n){}i+=(s>0?" ":"")+r}return i}var iE=class extends Co{constructor(){super(...arguments),this.level=Jk,this._onDidChangeLogLevel=this._register(new Ro)}get onDidChangeLogLevel(){return this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(e){return function(e,t){return e!==Kk.Off&&e<=t}(this.level,e)}canLog(e){return!this._store.isDisposed&&this.checkLogLevel(e)}},nE=class extends iE{constructor(e){super(),this.logAlways=e}checkLogLevel(e){return this.logAlways||super.checkLogLevel(e)}trace(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.canLog(Kk.Trace)&&this.log(Kk.Trace,tE([e,...i],!0))}debug(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.canLog(Kk.Debug)&&this.log(Kk.Debug,tE([e,...i]))}info(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.canLog(Kk.Info)&&this.log(Kk.Info,tE([e,...i]))}warn(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.canLog(Kk.Warning)&&this.log(Kk.Warning,tE([e,...i]))}error(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];if(this.canLog(Kk.Error))if(e instanceof Error){let t=Array.prototype.slice.call(arguments);t[0]=e.stack,this.log(Kk.Error,tE(t))}else this.log(Kk.Error,tE([e,...i]))}flush(){}},sE=class extends iE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jk,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];super(),this.useColors=t,this.setLevel(e)}trace(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.canLog(Kk.Trace)&&(this.useColors?console.log("%cTRACE","color: #888",e,...i):console.log(e,...i))}debug(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.canLog(Kk.Debug)&&(this.useColors?console.log("%cDEBUG","background: #eee; color: #888",e,...i):console.log(e,...i))}info(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.canLog(Kk.Info)&&(this.useColors?console.log("%c INFO","color: #33f",e,...i):console.log(e,...i))}warn(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.canLog(Kk.Warning)&&(this.useColors?console.warn("%c WARN","color: #993",e,...i):console.log(e,...i))}error(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.canLog(Kk.Error)&&(this.useColors?console.error("%c  ERR","color: #f33",e,...i):console.error(e,...i))}flush(){}},rE=class extends iE{constructor(e){super(),this.loggers=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(let t of this.loggers)t.setLevel(e);super.setLevel(e)}trace(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(let s of this.loggers)s.trace(e,...i)}debug(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(let s of this.loggers)s.debug(e,...i)}info(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(let s of this.loggers)s.info(e,...i)}warn(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(let s of this.loggers)s.warn(e,...i)}error(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(let s of this.loggers)s.error(e,...i)}flush(){for(let e of this.loggers)e.flush()}dispose(){for(let e of this.loggers)e.dispose();super.dispose()}},oE=class extends Co{constructor(e,t,i){if(super(),this.logLevel=e,this.logsHome=t,this._loggers=new so,this._onDidChangeLoggers=this._register(new Ro),this.onDidChangeLoggers=this._onDidChangeLoggers.event,this._onDidChangeLogLevel=this._register(new Ro),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event,this._onDidChangeVisibility=this._register(new Ro),this.onDidChangeVisibility=this._onDidChangeVisibility.event,i)for(let n of i)this._loggers.set(n.resource,{logger:void 0,info:n})}getLoggerEntry(e){return $i(e)?[...this._loggers.values()].find(t=>t.info.id===e):this._loggers.get(e)}getLogger(e){var t;return null===(t=this.getLoggerEntry(e))||void 0===t?void 0:t.logger}createLogger(e,t){var i,n,s;let o=this.toResource(e),a=$i(e)?e:null!==(i=null===t||void 0===t?void 0:t.id)&&void 0!==i?i:Ng(o.toString()).toString(16),l=null===(n=this._loggers.get(o))||void 0===n?void 0:n.logger,h="always"===(null===t||void 0===t?void 0:t.logLevel)?Kk.Trace:null===t||void 0===t?void 0:t.logLevel;l||(l=this.doCreateLogger(o,null!==(s=null!==h&&void 0!==h?h:this.getLogLevel(o))&&void 0!==s?s:this.logLevel,(0,r.A)((0,r.A)({},t),{},{id:a})));let d={logger:l,info:{resource:o,id:a,logLevel:h,name:null===t||void 0===t?void 0:t.name,hidden:null===t||void 0===t?void 0:t.hidden,group:null===t||void 0===t?void 0:t.group,extensionId:null===t||void 0===t?void 0:t.extensionId,when:null===t||void 0===t?void 0:t.when}};return this.registerLogger(d.info),this._loggers.set(o,d),l}toResource(e){return $i(e)?hl(this.logsHome,"".concat(e.replace(/[\\/:\*\?"<>\|]/g,""),".log")):e}setLogLevel(e,t){if(Gs.isUri(e)){var i;let n=e,s=t,r=this._loggers.get(n);r&&s!==r.info.logLevel&&(r.info.logLevel=s===this.logLevel?void 0:s,null!==(i=r.logger)&&void 0!==i&&i.setLevel(s),this._loggers.set(r.info.resource,r),this._onDidChangeLogLevel.fire([n,s]))}else{this.logLevel=e;for(let[e,t]of this._loggers.entries()){var n,s;void 0===(null===(n=this._loggers.get(e))||void 0===n?void 0:n.info.logLevel)&&(null===(s=t.logger)||void 0===s||s.setLevel(this.logLevel))}this._onDidChangeLogLevel.fire(this.logLevel)}}setVisibility(e,t){let i=this.getLoggerEntry(e);i&&t!==!i.info.hidden&&(i.info.hidden=!t,this._loggers.set(i.info.resource,i),this._onDidChangeVisibility.fire([i.info.resource,t]))}getLogLevel(e){var t;let i;return e&&(i=null===(t=this._loggers.get(e))||void 0===t?void 0:t.info.logLevel),null!==i&&void 0!==i?i:this.logLevel}registerLogger(e){let t=this._loggers.get(e.resource);t?t.info.hidden!==e.hidden&&this.setVisibility(e.resource,!e.hidden):(this._loggers.set(e.resource,{info:e,logger:void 0}),this._onDidChangeLoggers.fire({added:[e],removed:[]}))}deregisterLogger(e){let t=this.toResource(e),i=this._loggers.get(t);i&&(i.logger&&i.logger.dispose(),this._loggers.delete(t),this._onDidChangeLoggers.fire({added:[],removed:[i.info]}))}*getRegisteredLoggers(){for(let e of this._loggers.values())yield e.info}getRegisteredLogger(e){var t;return null===(t=this._loggers.get(e))||void 0===t?void 0:t.info}dispose(){this._loggers.forEach(e=>{var t;return null===(t=e.logger)||void 0===t?void 0:t.dispose()}),this._loggers.clear(),super.dispose()}},aE=class{constructor(){this.onDidChangeLogLevel=(new Ro).event}setLevel(e){}getLevel(){return Kk.Info}trace(e){}debug(e){}info(e){}warn(e){}error(e){}critical(e){}dispose(){}flush(){}};new jk("logLevel",function(e){switch(e){case Kk.Trace:return"trace";case Kk.Debug:return"debug";case Kk.Info:return"info";case Kk.Warning:return"warn";case Kk.Error:return"error";case Kk.Off:return"off"}}(Kk.Info));var lE,hE=class e{constructor(e,t){this.lineNumber=e,this.column=t}with(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.lineNumber,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.column;return t===this.lineNumber&&i===this.column?this:new e(t,i)}delta(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.with(Math.max(1,this.lineNumber+e),Math.max(1,this.column+t))}equals(t){return e.equals(this,t)}static equals(e,t){return!e&&!t||!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(t){return e.isBefore(this,t)}static isBefore(e,t){return e.lineNumber<t.lineNumber||!(t.lineNumber<e.lineNumber)&&e.column<t.column}isBeforeOrEqual(t){return e.isBeforeOrEqual(this,t)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber||!(t.lineNumber<e.lineNumber)&&e.column<=t.column}static compare(e,t){let i=0|e.lineNumber,n=0|t.lineNumber;return i===n?(0|e.column)-(0|t.column):i-n}clone(){return new e(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(t){return new e(t.lineNumber,t.column)}static isIPosition(e){return!!e&&"number"==typeof e.lineNumber&&"number"==typeof e.column}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}},dE=class e{constructor(e,t,i,n){e>i||e===i&&t>n?(this.startLineNumber=i,this.startColumn=n,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=n)}isEmpty(){return e.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(t){return e.containsPosition(this,t)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(t){return e.containsRange(this,t)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(t){return e.strictContainsRange(this,t)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(t){return e.plusRange(this,t)}static plusRange(t,i){let n,s,r,o;return i.startLineNumber<t.startLineNumber?(n=i.startLineNumber,s=i.startColumn):i.startLineNumber===t.startLineNumber?(n=i.startLineNumber,s=Math.min(i.startColumn,t.startColumn)):(n=t.startLineNumber,s=t.startColumn),i.endLineNumber>t.endLineNumber?(r=i.endLineNumber,o=i.endColumn):i.endLineNumber===t.endLineNumber?(r=i.endLineNumber,o=Math.max(i.endColumn,t.endColumn)):(r=t.endLineNumber,o=t.endColumn),new e(n,s,r,o)}intersectRanges(t){return e.intersectRanges(this,t)}static intersectRanges(t,i){let n=t.startLineNumber,s=t.startColumn,r=t.endLineNumber,o=t.endColumn,a=i.startLineNumber,l=i.startColumn,h=i.endLineNumber,d=i.endColumn;return n<a?(n=a,s=l):n===a&&(s=Math.max(s,l)),r>h?(r=h,o=d):r===h&&(o=Math.min(o,d)),n>r||n===r&&s>o?null:new e(n,s,r,o)}equalsRange(t){return e.equalsRange(this,t)}static equalsRange(e,t){return!e&&!t||!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return e.getEndPosition(this)}static getEndPosition(e){return new hE(e.endLineNumber,e.endColumn)}getStartPosition(){return e.getStartPosition(this)}static getStartPosition(e){return new hE(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(t,i){return new e(this.startLineNumber,this.startColumn,t,i)}setStartPosition(t,i){return new e(t,i,this.endLineNumber,this.endColumn)}collapseToStart(){return e.collapseToStart(this)}static collapseToStart(t){return new e(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn)}collapseToEnd(){return e.collapseToEnd(this)}static collapseToEnd(t){return new e(t.endLineNumber,t.endColumn,t.endLineNumber,t.endColumn)}delta(t){return new e(this.startLineNumber+t,this.startColumn,this.endLineNumber+t,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return new e(t.lineNumber,t.column,i.lineNumber,i.column)}static lift(t){return t?new e(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):null}static isIRange(e){return!!e&&"number"==typeof e.startLineNumber&&"number"==typeof e.startColumn&&"number"==typeof e.endLineNumber&&"number"==typeof e.endColumn}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static areOnlyIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber-1||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn-1||t.endLineNumber<e.startLineNumber-1||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn-1)}static compareRangesUsingStarts(e,t){if(e&&t){let i=0|e.startLineNumber,n=0|t.startLineNumber;if(i===n){let i=0|e.startColumn,n=0|t.startColumn;if(i===n){let i=0|e.endLineNumber,n=0|t.endLineNumber;return i===n?(0|e.endColumn)-(0|t.endColumn):i-n}return i-n}return i-n}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};function cE(e){let t=0,i=0,n=0,s=lE.Unknown;for(let r=0,o=e.length;r<o;r++){let a=e.charCodeAt(r);a===En.CarriageReturn?(0===t&&(i=r),t++,r+1<o&&e.charCodeAt(r+1)===En.LineFeed?(s|=lE.CRLF,r++):s|=lE.Invalid,n=r+1):a===En.LineFeed&&(s|=lE.LF,0===t&&(i=r),t++,n=r+1)}return 0===t&&(i=e.length),[t,i,e.length-n,s]}!function(e){e[e.Unknown=0]="Unknown",e[e.Invalid=3]="Invalid",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"}(lE||(lE={}));ot=class e{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){let t=[];for(let i=0;i<this._tokenCount;i++)t.push("(".concat(this._getDeltaLine(i)+e,",").concat(this._getStartCharacter(i),"-").concat(this._getEndCharacter(i),")"));return"[".concat(t.join(","),"]")}getMaxDeltaLine(){let e=this._getTokenCount();return 0===e?-1:this._getDeltaLine(e-1)}getRange(){let e=this._getTokenCount();if(0===e)return null;let t=this._getStartCharacter(0),i=this._getDeltaLine(e-1),n=this._getEndCharacter(e-1);return new dE(0,t+1,i,n+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return 0===this._getTokenCount()}getLineTokens(e){let t=0,i=this._getTokenCount()-1;for(;t<i;){let n=t+Math.floor((i-t)/2),s=this._getDeltaLine(n);if(s<e)t=n+1;else{if(!(s>e)){let s=n;for(;s>t&&this._getDeltaLine(s-1)===e;)s--;let r=n;for(;r<i&&this._getDeltaLine(r+1)===e;)r++;return new gE(this._tokens.subarray(4*s,4*r+4))}i=n-1}}return this._getDeltaLine(t)===e?new gE(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,i,n){let s=this._tokens,r=this._tokenCount,o=0,a=!1,l=0;for(let h=0;h<r;h++){let r=4*h,d=s[r],c=s[r+1],u=s[r+2],g=s[r+3];if((d>e||d===e&&u>=t)&&(d<i||d===i&&c<=n))a=!0;else{if(0===o&&(l=d),a){let e=4*o;s[e]=d-l,s[e+1]=c,s[e+2]=u,s[e+3]=g}else 0!==l&&(s[r]=d-l);o++}}return this._tokenCount=o,l}split(t,i,n,s){let r=this._tokens,o=this._tokenCount,a=[],l=[],h=a,d=0,c=0;for(let e=0;e<o;e++){let o=4*e,a=r[o],u=r[o+1],g=r[o+2],p=r[o+3];if(a>t||a===t&&g>=i){if(a<n||a===n&&u<=s)continue;h!==l&&(h=l,d=0,c=a)}h[d++]=a-c,h[d++]=u,h[d++]=g,h[d++]=p}return[new e(new Uint32Array(a)),new e(new Uint32Array(l)),c]}acceptDeleteRange(e,t,i,n,s){let r=this._tokens,o=this._tokenCount,a=n-t,l=0,h=!1;for(let d=0;d<o;d++){let c=4*d,u=r[c],g=r[c+1],p=r[c+2],f=r[c+3];if(u<t||u===t&&p<=i){l++;continue}if(u===t&&g<i)u===n&&p>s?p-=s-i:p=i;else if(u===t&&g===i){if(!(u===n&&p>s)){h=!0;continue}p-=s-i}else if(u<n||u===n&&g<s){if(!(u===n&&p>s)){h=!0;continue}u=t,g=i,p=g+(p-s)}else if(u>n){if(0===a&&!h){l=o;break}u-=a}else{if(!(u===n&&g>=s))throw Error("Not possible!");e&&0===u&&(g+=e,p+=e),u-=a,g-=s-i,p-=s-i}let m=4*l;r[m]=u,r[m+1]=g,r[m+2]=p,r[m+3]=f,l++}this._tokenCount=l}acceptInsertText(e,t,i,n,s,r){let o=0===i&&1===n&&(r>=En.Digit0&&r<=En.Digit9||r>=En.A&&r<=En.Z||r>=En.a&&r<=En.z),a=this._tokens,l=this._tokenCount;for(let h=0;h<l;h++){let r=4*h,l=a[r],d=a[r+1],c=a[r+2];if(!(l<e||l===e&&c<t)){if(l===e&&c===t){if(!o)continue;c+=1}else if(l===e&&d<t&&t<c)0===i?c+=n:c=t;else{if(l===e&&d===t&&o)continue;if(l===e)if(l+=i,0===i)d+=n,c+=n;else{let e=c-d;d=s+(d-t),c=d+e}else l+=i}a[r]=l,a[r+1]=d,a[r+2]=c}}}reportIfInvalid(t,i){for(let n=0;n<this._tokenCount;n++){let s=this._getDeltaLine(n)+i;s<1?e._rateLimiter.runIfNotLimited(()=>{console.error("Invalid Semantic Tokens Data From Extension: lineNumber < 1")}):s>t.getLineCount()?e._rateLimiter.runIfNotLimited(()=>{console.error("Invalid Semantic Tokens Data From Extension: lineNumber > model.getLineCount()")}):this._getEndCharacter(n)>t.getLineLength(s)&&e._rateLimiter.runIfNotLimited(()=>{console.error("Invalid Semantic Tokens Data From Extension: end character > model.getLineLength(lineNumber)")})}}};ot._rateLimiter=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;this.timesPerSecond=e,this._lastRun=0,this._minimumTimeBetweenRuns=1e3/e}runIfNotLimited(e){let t=Date.now();t-this._lastRun>=this._minimumTimeBetweenRuns&&(this._lastRun=t,e())}}(10/60);var uE,gE=class{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}};!function(e){e[e.NO_STYLING=2147483647]="NO_STYLING"}(uE||(uE={}));var pE,fE=class{constructor(e,t,i,n){this._legend=e,this._themeService=t,this._languageService=i,this._logService=n,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new vE}getMetadata(e,t,i){let n,s=this._languageService.languageIdCodec.encodeLanguageId(i),r=this._hashTable.get(e,t,s);if(r)n=r.metadata;else{let r=this._legend.tokenTypes[e],o=[];if(r){let e=t;for(let t=0;e>0&&t<this._legend.tokenModifiers.length;t++)1&e&&o.push(this._legend.tokenModifiers[t]),e>>=1;let s=this._themeService.getColorTheme().getTokenStyleMetadata(r,o,i);if(void 0===s)n=uE.NO_STYLING;else{if(n=0,void 0!==s.italic){n|=(s.italic?Yp.Italic:0)<<Xp.FONT_STYLE_OFFSET|Xp.SEMANTIC_USE_ITALIC}if(void 0!==s.bold){n|=(s.bold?Yp.Bold:0)<<Xp.FONT_STYLE_OFFSET|Xp.SEMANTIC_USE_BOLD}if(void 0!==s.underline){n|=(s.underline?Yp.Underline:0)<<Xp.FONT_STYLE_OFFSET|Xp.SEMANTIC_USE_UNDERLINE}if(void 0!==s.strikethrough){n|=(s.strikethrough?Yp.Strikethrough:0)<<Xp.FONT_STYLE_OFFSET|Xp.SEMANTIC_USE_STRIKETHROUGH}if(s.foreground){n|=s.foreground<<Xp.FOREGROUND_OFFSET|Xp.SEMANTIC_USE_FOREGROUND}0===n&&(n=uE.NO_STYLING)}}else n=uE.NO_STYLING,r="not-in-legend";this._hashTable.add(e,t,s,n)}return n}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,this._logService.warn("Overlapping semantic tokens detected at lineNumber ".concat(e,", column ").concat(t)))}warnInvalidLengthSemanticTokens(e,t){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,this._logService.warn("Semantic token with invalid length detected at lineNumber ".concat(e,", column ").concat(t)))}warnInvalidEditStart(e,t,i,n,s){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,this._logService.warn("Invalid semantic tokens edit detected (previousResultId: ".concat(e,", resultId: ").concat(t,") at edit #").concat(i,": The provided start offset ").concat(n," is outside the previous data (length ").concat(s,").")))}};fE=ki([Ei(1,$w),Ei(2,Pw),Ei(3,Np)],fE),function(e){e[e.DesiredTokensPerArea=400]="DesiredTokensPerArea",e[e.DesiredMaxAreas=1024]="DesiredMaxAreas"}(pE||(pE={}));var mE=class{constructor(e,t,i,n){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=i,this.metadata=n,this.next=null}},vE=(at=class e{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=e._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<e._SIZES.length?2/3*this._currentLength:0),this._elements=[],e._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let i=0;i<t;i++)e[i]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,i){return this._hash2(this._hash2(e,t),i)%this._currentLength}get(e,t,i){let n=this._hashFunc(e,t,i),s=this._elements[n];for(;s;){if(s.tokenTypeIndex===e&&s.tokenModifierSet===t&&s.languageId===i)return s;s=s.next}return null}add(t,i,n,s){if(this._elementsCount++,0!==this._growCount&&this._elementsCount>=this._growCount){let t=this._elements;this._currentLengthIndex++,this._currentLength=e._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<e._SIZES.length?2/3*this._currentLength:0),this._elements=[],e._nullOutEntries(this._elements,this._currentLength);for(let e of t){let t=e;for(;t;){let e=t.next;t.next=null,this._add(t),t=e}}}this._add(new mE(t,i,n,s))}_add(e){let t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}},{_:at._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143]},at),_E=class extends Co{constructor(e,t,i){super(),this._themeService=e,this._logService=t,this._languageService=i,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}getStyling(e){return this._caches.has(e)||this._caches.set(e,new fE(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}};_E=ki([Ei(0,$w),Ei(1,Np),Ei(2,Pw)],_E);var bE=fn("contextViewService"),CE=fn("contextMenuService"),yE=[];function wE(e){let t,i=null===e||void 0===e?void 0:e.default;if("string"==typeof i?(t=new Lv.CSSStyleSheet,t.replaceSync(i)):i instanceof CSSStyleSheet&&(t=new Lv.CSSStyleSheet,t.replaceSync(Array.from(i.cssRules).map(e=>e.cssText).join("\n"))),null!=t){let e=Array.from(t.cssRules).filter(e=>e instanceof Lv.CSSFontFaceRule).map(e=>e.cssText);if(e.length>0){let t=new Lv.CSSStyleSheet;for(let i of e)t.insertRule(i);Lv.document.adoptedStyleSheets=[...Lv.document.adoptedStyleSheets,t]}yE.push(t)}}var SE=fn("keybindingService"),kE=class{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingTop="",this._paddingLeft="",this._paddingBottom="",this._paddingRight="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}focus(){this.domNode.focus()}setMaxWidth(e){let t=EE(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){let t=EE(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){let t=EE(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){let t=EE(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){let t=EE(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){let t=EE(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){let t=EE(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingTop(e){let t=EE(e);this._paddingTop!==t&&(this._paddingTop=t,this.domNode.style.paddingTop=this._paddingTop)}setPaddingLeft(e){let t=EE(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setPaddingBottom(e){let t=EE(e);this._paddingBottom!==t&&(this._paddingBottom=t,this.domNode.style.paddingBottom=this._paddingBottom)}setPaddingRight(e){let t=EE(e);this._paddingRight!==t&&(this._paddingRight=t,this.domNode.style.paddingRight=this._paddingRight)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){let t=EE(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){let t=EE(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){let t=EE(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}};function EE(e){return"number"==typeof e?"".concat(e,"px"):e}function DE(e){return new kE(e)}var TE,IE=class{constructor(){this._hooks=new bo,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let i=this._onStopCallback;this._onStopCallback=null,e&&i&&i(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,i,n,s){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=n,this._onStopCallback=s;let r=e;try{e.setPointerCapture(t),this._hooks.add(vo(()=>{try{e.releasePointerCapture(t)}catch(i){}}))}catch(o){r=L_(e)}this._hooks.add(W_(r,kb.POINTER_MOVE,e=>{e.buttons===i?(e.preventDefault(),this._pointerMoveCallback(e)):this.stopMonitoring(!0)})),this._hooks.add(W_(r,kb.POINTER_UP,e=>this.stopMonitoring(!0)))}};!function(e){e.Tap="-monaco-gesturetap",e.Change="-monaco-gesturechange",e.Start="-monaco-gesturestart",e.End="-monaco-gesturesend",e.Contextmenu="-monaco-gesturecontextmenu"}(TE||(TE={}));var xE,LE=(lt=class e extends Co{constructor(){super(),this.dispatched=!1,this.targets=new Eo,this.ignoreTargets=new Eo,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(_o.runAndSubscribe(M_,e=>{let{window:t,disposables:i}=e;i.add(W_(t.document,"touchstart",e=>this.onTouchStart(e),{passive:!1})),i.add(W_(t.document,"touchend",e=>this.onTouchEnd(t,e))),i.add(W_(t.document,"touchmove",e=>this.onTouchMove(e),{passive:!1}))},{window:Lv,disposables:this._store}))}static addTarget(t){return e.isTouchDevice()?(e.INSTANCE||(e.INSTANCE=new e),vo(e.INSTANCE.targets.push(t))):Co.None}static ignoreTarget(t){return e.isTouchDevice()?(e.INSTANCE||(e.INSTANCE=new e),vo(e.INSTANCE.ignoreTargets.push(t))):Co.None}static isTouchDevice(){return"ontouchstart"in Lv||Lv.navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle=(this.handle.dispose(),null)),super.dispose()}onTouchStart(e){let t=Date.now();this.handle&&(this.handle=(this.handle.dispose(),null));for(let i=0,n=e.targetTouches.length;i<n;i++){let n=e.targetTouches.item(i);this.activeTouches[n.identifier]={id:n.identifier,initialTarget:n.target,initialTimeStamp:t,initialPageX:n.pageX,initialPageY:n.pageY,rollingTimestamps:[t],rollingPageX:[n.pageX],rollingPageY:[n.pageY]};let s=this.newGestureEvent(TE.Start,n.target);s.pageX=n.pageX,s.pageY=n.pageY,this.dispatchEvent(s)}this.dispatched&&(this.dispatched=(e.preventDefault(),e.stopPropagation(),!1))}onTouchEnd(t,i){let n=Date.now(),s=Object.keys(this.activeTouches).length;for(let r=0,o=i.changedTouches.length;r<o;r++){let o=i.changedTouches.item(r);if(!this.activeTouches.hasOwnProperty(String(o.identifier))){console.warn("move of an UNKNOWN touch",o);continue}let a=this.activeTouches[o.identifier],l=Date.now()-a.initialTimeStamp;if(l<e.HOLD_DELAY&&Math.abs(a.initialPageX-a.rollingPageX.at(-1))<30&&Math.abs(a.initialPageY-a.rollingPageY.at(-1))<30){let e=this.newGestureEvent(TE.Tap,a.initialTarget);e.pageX=a.rollingPageX.at(-1),e.pageY=a.rollingPageY.at(-1),this.dispatchEvent(e)}else if(l>=e.HOLD_DELAY&&Math.abs(a.initialPageX-a.rollingPageX.at(-1))<30&&Math.abs(a.initialPageY-a.rollingPageY.at(-1))<30){let e=this.newGestureEvent(TE.Contextmenu,a.initialTarget);e.pageX=a.rollingPageX.at(-1),e.pageY=a.rollingPageY.at(-1),this.dispatchEvent(e)}else if(1===s){let e=a.rollingPageX.at(-1),i=a.rollingPageY.at(-1),s=a.rollingTimestamps.at(-1)-a.rollingTimestamps[0],r=e-a.rollingPageX[0],o=i-a.rollingPageY[0],l=[...this.targets].filter(e=>a.initialTarget instanceof Node&&e.contains(a.initialTarget));this.inertia(t,l,n,Math.abs(r)/s,r>0?1:-1,e,Math.abs(o)/s,o>0?1:-1,i)}this.dispatchEvent(this.newGestureEvent(TE.End,a.initialTarget)),delete this.activeTouches[o.identifier]}this.dispatched&&(this.dispatched=(i.preventDefault(),i.stopPropagation(),!1))}newGestureEvent(e,t){let i=document.createEvent("CustomEvent");return i.initEvent(e,!1,!0),i.initialTarget=t,i.tapCount=0,i}dispatchEvent(t){if(t.type===TE.Tap){let i=(new Date).getTime(),n=0;n=i-this._lastSetTapCountTime>e.CLEAR_TAP_COUNT_TIME?1:2,this._lastSetTapCountTime=i,t.tapCount=n}else(t.type===TE.Change||t.type===TE.Contextmenu)&&(this._lastSetTapCountTime=0);if(t.initialTarget instanceof Node){for(let i of this.ignoreTargets)if(i.contains(t.initialTarget))return;let e=[];for(let i of this.targets)if(i.contains(t.initialTarget)){let n=0,s=t.initialTarget;for(;s&&s!==i;)n++,s=s.parentElement;e.push([n,i])}e.sort((e,t)=>e[0]-t[0]);for(let[i,n]of e)n.dispatchEvent(t),this.dispatched=!0}}inertia(t,i,n,s,r,o,a,l,h){this.handle=q_(t,()=>{let d=Date.now(),c=d-n,u=0,g=0,p=!0;s+=e.SCROLL_FRICTION*c,a+=e.SCROLL_FRICTION*c,s>0&&(p=!1,u=r*s*c),a>0&&(p=!1,g=l*a*c);let f=this.newGestureEvent(TE.Change);f.translationX=u,f.translationY=g,i.forEach(e=>e.dispatchEvent(f)),p||this.inertia(t,i,d,s,r,o+u,a,l,h+g)})}onTouchMove(e){let t=Date.now();for(let i=0,n=e.changedTouches.length;i<n;i++){let n=e.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(n.identifier))){console.warn("end of an UNKNOWN touch",n);continue}let s=this.activeTouches[n.identifier],r=this.newGestureEvent(TE.Change,s.initialTarget);r.translationX=n.pageX-s.rollingPageX.at(-1),r.translationY=n.pageY-s.rollingPageY.at(-1),r.pageX=n.pageX,r.pageY=n.pageY,this.dispatchEvent(r),s.rollingPageX.length>3&&(s.rollingPageX.shift(),s.rollingPageY.shift(),s.rollingTimestamps.shift()),s.rollingPageX.push(n.pageX),s.rollingPageY.push(n.pageY),s.rollingTimestamps.push(t)}this.dispatched&&(this.dispatched=(e.preventDefault(),e.stopPropagation(),!1))}},{_:lt.SCROLL_FRICTION=-.005},{_:lt.HOLD_DELAY=700},{_:lt.CLEAR_TAP_COUNT_TIME=400},lt),AE=class extends Co{onclick(e,t){this._register(W_(e,kb.CLICK,i=>t(new k_(L_(e),i))))}onmousedown(e,t){this._register(W_(e,kb.MOUSE_DOWN,i=>t(new k_(L_(e),i))))}onmouseover(e,t){this._register(W_(e,kb.MOUSE_OVER,i=>t(new k_(L_(e),i))))}onmouseleave(e,t){this._register(W_(e,kb.MOUSE_LEAVE,i=>t(new k_(L_(e),i))))}onkeydown(e,t){this._register(W_(e,kb.KEY_DOWN,e=>t(new C_(e))))}onkeyup(e,t){this._register(W_(e,kb.KEY_UP,e=>t(new C_(e))))}oninput(e,t){this._register(W_(e,kb.INPUT,t))}onblur(e,t){this._register(W_(e,kb.BLUR,t))}onfocus(e,t){this._register(W_(e,kb.FOCUS,t))}onchange(e,t){this._register(W_(e,kb.CHANGE,t))}ignoreGesture(e){return LE.ignoreTarget(e)}},NE=class extends AE{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=mb("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",void 0!==e.top&&(this.bgDomNode.style.top="0px"),void 0!==e.left&&(this.bgDomNode.style.left="0px"),void 0!==e.bottom&&(this.bgDomNode.style.bottom="0px"),void 0!==e.right&&(this.bgDomNode.style.right="0px"),this.domNode=mb("div"),this.domNode.className=e.className,this.domNode.classList.add(...yf.asClassNameArray(e.icon)),this.domNode.style.position="absolute",this.domNode.style.width="11px",this.domNode.style.height="11px",void 0!==e.top&&(this.domNode.style.top=e.top+"px"),void 0!==e.left&&(this.domNode.style.left=e.left+"px"),void 0!==e.bottom&&(this.domNode.style.bottom=e.bottom+"px"),void 0!==e.right&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new IE),this._register(z_(this.bgDomNode,kb.POINTER_DOWN,e=>this._arrowPointerDown(e))),this._register(z_(this.domNode,kb.POINTER_DOWN,e=>this._arrowPointerDown(e))),this._pointerdownRepeatTimer=this._register(new G_),this._pointerdownScheduleRepeatTimer=this._register(new Fl)}_arrowPointerDown(e){!e.target||!_b(e.target)||(this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,L_(e))},200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,e=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault())}};!function(e){e[e.Auto=1]="Auto",e[e.Hidden=2]="Hidden",e[e.Visible=3]="Visible"}(xE||(xE={}));var FE=class e{constructor(e,t,i,n,s,r,o){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(t|=0,i|=0,n|=0,s|=0,r|=0,o|=0),this.rawScrollLeft=n,this.rawScrollTop=o,t<0&&(t=0),n+t>i&&(n=i-t),n<0&&(n=0),s<0&&(s=0),o+s>r&&(o=r-s),o<0&&(o=0),this.width=t,this.scrollWidth=i,this.scrollLeft=n,this.height=s,this.scrollHeight=r,this.scrollTop=o}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(t,i){return new e(this._forceIntegerValues,void 0===t.width?this.width:t.width,void 0===t.scrollWidth?this.scrollWidth:t.scrollWidth,i?this.rawScrollLeft:this.scrollLeft,void 0===t.height?this.height:t.height,void 0===t.scrollHeight?this.scrollHeight:t.scrollHeight,i?this.rawScrollTop:this.scrollTop)}withScrollPosition(t){return new e(this._forceIntegerValues,this.width,this.scrollWidth,void 0===t.scrollLeft?this.rawScrollLeft:t.scrollLeft,this.height,this.scrollHeight,void 0===t.scrollTop?this.rawScrollTop:t.scrollTop)}createScrollEvent(e,t){let i=this.width!==e.width,n=this.scrollWidth!==e.scrollWidth,s=this.scrollLeft!==e.scrollLeft,r=this.height!==e.height,o=this.scrollHeight!==e.scrollHeight,a=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:i,scrollWidthChanged:n,scrollLeftChanged:s,heightChanged:r,scrollHeightChanged:o,scrollTopChanged:a}}},OE=class extends Co{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new Ro),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new FE(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling=(this._smoothScrolling.dispose(),null)),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){var i;let n=this._state.withScrollDimensions(e,t);this._setState(n,!!this._smoothScrolling),null===(i=this._smoothScrolling)||void 0===i||i.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){let t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling=(this._smoothScrolling.dispose(),null)),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(0===this._smoothScrollDuration)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:void 0===e.scrollLeft?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:void 0===e.scrollTop?this._smoothScrolling.to.scrollTop:e.scrollTop};let i,n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;i=t?new PE(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=i}else{let t=this._state.withScrollPosition(e);this._smoothScrolling=PE.start(this._state,t,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;let e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),this._smoothScrolling){if(e.isDone)return this._smoothScrolling.dispose(),void(this._smoothScrolling=null);this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){let i=this._state;i.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(i,t)))}},RE=class{constructor(e,t,i){this.scrollLeft=e,this.scrollTop=t,this.isDone=i}};function ME(e,t){let i=t-e;return function(t){return e+i*function(e){return 1-function(e){return e**3}(1-e)}(t)}}var PE=class e{constructor(e,t,i,n){this.from=e,this.to=t,this.duration=n,this.startTime=i,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,i){if(Math.abs(e-t)>2.5*i){let n,s;return e<t?(n=e+.75*i,s=t-.75*i):(n=e-.75*i,s=t+.75*i),function(e,t,i){return function(n){return n<i?e(n/i):t((n-i)/(1-i))}}(ME(e,n),ME(s,t),.33)}return ME(e,t)}dispose(){null!==this.animationFrameDisposable&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){let t=(e-this.startTime)/this.duration;return t<1?new RE(this.scrollLeft(t),this.scrollTop(t),!1):new RE(this.to.scrollLeft,this.to.scrollTop,!0)}combine(t,i,n){return e.start(t,i,n)}static start(t,i,n){return n+=10,new e(t,i,Date.now()-10,n)}};var BE=class extends Co{constructor(e,t,i){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=i,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new Fl)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility!==xE.Hidden&&(this._visibility===xE.Visible||this._rawShouldBeVisible)}_updateShouldBeVisible(){let e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){this._isNeeded?this._shouldBeVisible?this._reveal():this._hide(!0):this._hide(!1)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{var e;null===(e=this._domNode)||void 0===e||e.setClassName(this._visibleClassName)},0))}_hide(e){var t;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,null===(t=this._domNode)||void 0===t||t.setClassName(this._invisibleClassName+(e?" fade":"")))}},UE=class extends AE{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new BE(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new IE),this._shouldRender=!0,this.domNode=DE(mb("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(W_(this.domNode.domNode,kb.POINTER_DOWN,e=>this._domNodePointerDown(e)))}_createArrow(e){let t=this._register(new NE(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,i,n){this.slider=DE(mb("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),"number"==typeof i&&this.slider.setWidth(i),"number"==typeof n&&this.slider.setHeight(n),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(W_(this.slider.domNode,kb.POINTER_DOWN,e=>{0===e.button&&(e.preventDefault(),this._sliderPointerDown(e))})),this.onclick(this.slider.domNode,e=>{e.leftButton&&e.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){let t=this.domNode.domNode.getClientRects()[0].top,i=t+this._scrollbarState.getSliderPosition(),n=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),s=this._sliderPointerPosition(e);i<=s&&s<=n?0===e.button&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,i;if(e.target===this.domNode.domNode&&"number"==typeof e.offsetX&&"number"==typeof e.offsetY)t=e.offsetX,i=e.offsetY;else{let n=Z_(this.domNode.domNode);t=e.pageX-n.left,i=e.pageY-n.top}let n="mouse"===e.pointerType,s=0===e.button;if(s||!n){let e=this._pointerDownRelativePosition(t,i);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(e):this._scrollbarState.getDesiredScrollPositionFromOffset(e))}s&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!_b(e.target))return;let t=this._sliderPointerPosition(e),i=this._sliderOrthogonalPointerPosition(e),n=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,e=>{let s=this._sliderOrthogonalPointerPosition(e),r=Math.abs(s-i);if(Kn&&r>140)return void this._setDesiredScrollPositionNow(n.getScrollPosition());let o=this._sliderPointerPosition(e)-t;this._setDesiredScrollPositionNow(n.getDesiredScrollPositionFromDelta(o))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){let t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}},HE=class e{constructor(e,t,i,n,s,r){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(i),this._arrowSize=Math.round(e),this._visibleSize=n,this._scrollSize=s,this._scrollPosition=r,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new e(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){let t=Math.round(e);return this._visibleSize!==t&&(this._visibleSize=t,this._refreshComputedValues(),!0)}setScrollSize(e){let t=Math.round(e);return this._scrollSize!==t&&(this._scrollSize=t,this._refreshComputedValues(),!0)}setScrollPosition(e){let t=Math.round(e);return this._scrollPosition!==t&&(this._scrollPosition=t,this._refreshComputedValues(),!0)}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,i,n,s){let r=Math.max(0,i-e),o=Math.max(0,r-2*t),a=n>0&&n>i;if(!a)return{computedAvailableSize:Math.round(r),computedIsNeeded:a,computedSliderSize:Math.round(o),computedSliderRatio:0,computedSliderPosition:0};let l=Math.round(Math.max(20,Math.floor(i*o/n))),h=(o-l)/(n-i),d=s*h;return{computedAvailableSize:Math.round(r),computedIsNeeded:a,computedSliderSize:Math.round(l),computedSliderRatio:h,computedSliderPosition:Math.round(d)}}_refreshComputedValues(){let t=e._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=t.computedAvailableSize,this._computedIsNeeded=t.computedIsNeeded,this._computedSliderSize=t.computedSliderSize,this._computedSliderRatio=t.computedSliderRatio,this._computedSliderPosition=t.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;let t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;let t=e-this._arrowSize,i=this._scrollPosition;return t<this._computedSliderPosition?i-=this._visibleSize:i+=this._visibleSize,i}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;let t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}},WE=class extends UE{constructor(e,t,i){let n=e.getScrollDimensions(),s=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new HE(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===xE.Hidden?0:t.horizontalScrollbarSize,t.vertical===xE.Hidden?0:t.verticalScrollbarSize,n.width,n.scrollWidth,s.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){let e=(t.arrowSize-11)/2,i=(t.horizontalScrollbarSize-11)/2;this._createArrow({className:"scra",icon:su.scrollbarButtonLeft,top:i,left:e,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new E_(null,1,0))}),this._createArrow({className:"scra",icon:su.scrollbarButtonRight,top:i,left:void 0,bottom:void 0,right:e,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new E_(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===xE.Hidden?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===xE.Hidden?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}},VE=class extends UE{constructor(e,t,i){let n=e.getScrollDimensions(),s=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new HE(t.verticalHasArrows?t.arrowSize:0,t.vertical===xE.Hidden?0:t.verticalScrollbarSize,0,n.height,n.scrollHeight,s.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){let e=(t.arrowSize-11)/2,i=(t.verticalScrollbarSize-11)/2;this._createArrow({className:"scra",icon:su.scrollbarButtonUp,top:e,left:i,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new E_(null,0,1))}),this._createArrow({className:"scra",icon:su.scrollbarButtonDown,top:void 0,left:i,bottom:e,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new E_(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===xE.Hidden?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}};wE({});var zE=class{constructor(e,t,i){this.timestamp=e,this.deltaX=t,this.deltaY=i,this.score=0}},KE=(ht=class{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(-1===this._front&&-1===this._rear)return!1;let e=1,t=0,i=1,n=this._rear;for(;;){let s=n===this._front?e:2**-i;if(e-=s,t+=this._memory[n].score*s,n===this._front)break;n=(this._capacity+n-1)%this._capacity,i++}return t<=.5}acceptStandardWheelEvent(e){if(Bv){let t=Fv(L_(e.browserEvent));this.accept(Date.now(),e.deltaX*t,e.deltaY*t)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,i){let n=null,s=new zE(e,t,i);-1===this._front&&-1===this._rear?(this._memory[0]=s,this._front=0,this._rear=0):(n=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=s),s.score=this._computeScore(s,n)}_computeScore(e,t){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let i=.5;if((!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(i+=.25),t){let n=Math.abs(e.deltaX),s=Math.abs(e.deltaY),r=Math.abs(t.deltaX),o=Math.abs(t.deltaY),a=Math.max(Math.min(n,r),1),l=Math.max(Math.min(s,o),1),h=Math.max(n,r),d=Math.max(s,o);h%a===0&&d%l===0&&(i-=.5)}return Math.min(Math.max(i,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01+2**-52*100}},{_:ht.INSTANCE=new ht},ht),qE=class extends AE{get onScroll(){return this._onScroll.event}get onWillScroll(){return this._onWillScroll.event}get options(){return this._options}constructor(e,t,i){super(),this._inertialTimeout=null,this._inertialSpeed={X:0,Y:0},this._onScroll=this._register(new Ro),this._onWillScroll=this._register(new Ro),e.style.overflow="hidden",this._options=function(e){let t={lazyRender:void 0!==e.lazyRender&&e.lazyRender,className:void 0===e.className?"":e.className,useShadows:void 0===e.useShadows||e.useShadows,handleMouseWheel:void 0===e.handleMouseWheel||e.handleMouseWheel,flipAxes:void 0!==e.flipAxes&&e.flipAxes,consumeMouseWheelIfScrollbarIsNeeded:void 0!==e.consumeMouseWheelIfScrollbarIsNeeded&&e.consumeMouseWheelIfScrollbarIsNeeded,alwaysConsumeMouseWheel:void 0!==e.alwaysConsumeMouseWheel&&e.alwaysConsumeMouseWheel,scrollYToX:void 0!==e.scrollYToX&&e.scrollYToX,mouseWheelScrollSensitivity:void 0===e.mouseWheelScrollSensitivity?1:e.mouseWheelScrollSensitivity,fastScrollSensitivity:void 0===e.fastScrollSensitivity?5:e.fastScrollSensitivity,scrollPredominantAxis:void 0===e.scrollPredominantAxis||e.scrollPredominantAxis,mouseWheelSmoothScroll:void 0===e.mouseWheelSmoothScroll||e.mouseWheelSmoothScroll,inertialScroll:void 0!==e.inertialScroll&&e.inertialScroll,arrowSize:void 0===e.arrowSize?11:e.arrowSize,listenOnDomNode:void 0===e.listenOnDomNode?null:e.listenOnDomNode,horizontal:void 0===e.horizontal?xE.Auto:e.horizontal,horizontalScrollbarSize:void 0===e.horizontalScrollbarSize?10:e.horizontalScrollbarSize,horizontalSliderSize:void 0===e.horizontalSliderSize?0:e.horizontalSliderSize,horizontalHasArrows:void 0!==e.horizontalHasArrows&&e.horizontalHasArrows,vertical:void 0===e.vertical?xE.Auto:e.vertical,verticalScrollbarSize:void 0===e.verticalScrollbarSize?10:e.verticalScrollbarSize,verticalHasArrows:void 0!==e.verticalHasArrows&&e.verticalHasArrows,verticalSliderSize:void 0===e.verticalSliderSize?0:e.verticalSliderSize,scrollByPage:void 0!==e.scrollByPage&&e.scrollByPage};return t.horizontalSliderSize=void 0===e.horizontalSliderSize?t.horizontalScrollbarSize:e.horizontalSliderSize,t.verticalSliderSize=void 0===e.verticalSliderSize?t.verticalScrollbarSize:e.verticalSliderSize,qn&&(t.className+=" mac"),t}(t),this._scrollable=i,this._register(this._scrollable.onScroll(e=>{this._onWillScroll.fire(e),this._onDidScroll(e),this._onScroll.fire(e)}));let n={onMouseWheel:e=>this._onMouseWheel(e),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new VE(this._scrollable,this._options,n)),this._horizontalScrollbar=this._register(new WE(this._scrollable,this._options,n)),this._domNode=mb("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=DE(mb("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=DE(mb("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=DE(mb("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,e=>this._onMouseOver(e)),this.onmouseleave(this._listenOnDomNode,e=>this._onMouseLeave(e)),this._hideTimeout=this._register(new Fl),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=po(this._mouseWheelToDispose),this._inertialTimeout&&(this._inertialTimeout=(this._inertialTimeout.dispose(),null)),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,qn&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){void 0!==e.handleMouseWheel&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),void 0!==e.mouseWheelScrollSensitivity&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),void 0!==e.fastScrollSensitivity&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),void 0!==e.scrollPredominantAxis&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),void 0!==e.horizontal&&(this._options.horizontal=e.horizontal),void 0!==e.vertical&&(this._options.vertical=e.vertical),void 0!==e.horizontalScrollbarSize&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),void 0!==e.verticalScrollbarSize&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),void 0!==e.scrollByPage&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}setRevealOnScroll(e){this._revealOnScroll=e}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new E_(e))}async _periodicSync(){var e;let t=!1;(0!==this._inertialSpeed.X||0!==this._inertialSpeed.Y)&&(this._scrollable.setScrollPositionNow({scrollTop:this._scrollable.getCurrentScrollPosition().scrollTop-100*this._inertialSpeed.Y,scrollLeft:this._scrollable.getCurrentScrollPosition().scrollLeft-100*this._inertialSpeed.X}),this._inertialSpeed.X*=.9,this._inertialSpeed.Y*=.9,Math.abs(this._inertialSpeed.X)<.01&&(this._inertialSpeed.X=0),Math.abs(this._inertialSpeed.Y)<.01&&(this._inertialSpeed.Y=0),t=0!==this._inertialSpeed.X||0!==this._inertialSpeed.Y),t?(this._inertialTimeout||(this._inertialTimeout=new Fl),this._inertialTimeout.cancelAndSet(()=>this._periodicSync(),1e3/60)):(null!==(e=this._inertialTimeout)&&void 0!==e&&e.dispose(),this._inertialTimeout=null)}_setListeningToMouseWheel(e){this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=po(this._mouseWheelToDispose),e&&this._mouseWheelToDispose.push(W_(this._listenOnDomNode,kb.MOUSE_WHEEL,e=>{this._onMouseWheel(new E_(e))},{passive:!1})))}_onMouseWheel(e){var t;if(null!==(t=e.browserEvent)&&void 0!==t&&t.defaultPrevented)return;let i=KE.INSTANCE;i.acceptStandardWheelEvent(e);let n=!1;if(e.deltaY||e.deltaX){let t=e.deltaY*this._options.mouseWheelScrollSensitivity,s=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&s+t===0?s=t=0:Math.abs(t)>=Math.abs(s)?s=0:t=0),this._options.flipAxes&&([t,s]=[s,t]);let r=!qn&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||r)&&!s&&(s=t,t=0),e.browserEvent&&e.browserEvent.altKey&&(s*=this._options.fastScrollSensitivity,t*=this._options.fastScrollSensitivity);let o=this._scrollable.getFutureScrollPosition(),a={};if(t){let e=50*t,i=o.scrollTop-(e<0?Math.floor(e):Math.ceil(e));this._verticalScrollbar.writeScrollPosition(a,i)}if(s){let e=50*s,t=o.scrollLeft-(e<0?Math.floor(e):Math.ceil(e));this._horizontalScrollbar.writeScrollPosition(a,t)}if(a=this._scrollable.validateScrollPosition(a),this._options.inertialScroll&&(s||t)&&!i.isPhysicalMouseWheel()){let e=!1;0===this._inertialSpeed.X&&0===this._inertialSpeed.Y&&(e=!0),this._inertialSpeed.Y=(t<0?-1:1)*Math.abs(t)**1.02,this._inertialSpeed.X=(s<0?-1:1)*Math.abs(s)**1.02,e&&this._periodicSync()}(o.scrollLeft!==a.scrollLeft||o.scrollTop!==a.scrollTop)&&(this._options.mouseWheelSmoothScroll&&i.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(a):this._scrollable.setScrollPositionNow(a),n=!0)}let s=n;!s&&this._options.alwaysConsumeMouseWheel&&(s=!0),!s&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(s=!0),s&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,i=e.scrollLeft>0,n=i?" left":"",s=t?" top":"",r=i||t?" top-left-corner":"";this._leftShadowDomNode.setClassName("shadow".concat(n)),this._topShadowDomNode.setClassName("shadow".concat(s)),this._topLeftShadowDomNode.setClassName("shadow".concat(r).concat(s).concat(n))}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),500)}},GE=class extends qE{constructor(e,t){t||(t={}),t.mouseWheelSmoothScroll=!1;let i=new OE({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:t=>q_(L_(e),t)});super(e,t,i),this._register(i)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}},jE=class extends qE{constructor(e,t,i){super(e,t,i)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}},YE=class extends qE{constructor(e,t){t||(t={}),t.mouseWheelSmoothScroll=!1;let i=new OE({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:t=>q_(L_(e),t)});super(e,t,i),this._register(i),this._element=e,this._register(this.onScroll(e=>{e.scrollTopChanged&&(this._element.scrollTop=e.scrollTop),e.scrollLeftChanged&&(this._element.scrollLeft=e.scrollLeft)})),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}};wE({});var QE,$E=Mb;!function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT",e[e.BELOW=2]="BELOW",e[e.ABOVE=3]="ABOVE"}(QE||(QE={}));var XE=class extends Co{constructor(e){super(),this.containerDomNode=mb("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.classList.toggle("fade-in",!!e),this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=mb("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new YE(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}},ZE=class e extends Co{static render(t,i,n){return new e(t,i,n)}constructor(e,t,i){super(),this.actionLabel=t.label,this.actionKeybindingLabel=i,this.actionContainer=xb(e,$E("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=xb(this.actionContainer,$E("a.action")),this.action.setAttribute("role","button"),t.iconClass&&xb(this.action,$E("span.icon")).classList.add(...t.iconClass.split(" ")),this.actionRenderedLabel=i?"".concat(t.label," (").concat(i,")"):t.label,xb(this.action,$E("span")).textContent=this.actionRenderedLabel,this._store.add(new oD(this.actionContainer,t.run)),this._store.add(new aD(this.actionContainer,t.run,[Kv.Enter,Kv.Space])),this.setEnabled(!0)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}};var JE,eD,tD,iD,nD,sD,rD,oD=class extends Co{constructor(e,t){super(),this._register(W_(e,kb.CLICK,i=>{i.stopPropagation(),i.preventDefault(),t(e)}))}},aD=class extends Co{constructor(e,t,i){super(),this._register(W_(e,kb.KEY_DOWN,n=>{let s=new C_(n);i.some(e=>s.equals(e))&&(n.stopPropagation(),n.preventDefault(),t(e))}))}};function lD(e,t,i){let n=i.mode===rD.ALIGN?i.offset:i.offset+i.size,s=i.mode===rD.ALIGN?i.offset+i.size:i.offset;return i.position===sD.Before?t<=e-n?n:t<=s?s-t:Math.max(e-t,0):t<=s?s-t:t<=e-n?n:0}(function(e){function t(e,t){if(e.start>=t.end||t.start>=e.end)return{start:0,end:0};let i=Math.max(e.start,t.start),n=Math.min(e.end,t.end);return n-i<=0?{start:0,end:0}:{start:i,end:n}}function i(e){return e.end-e.start<=0}e.intersect=t,e.isEmpty=i,e.intersects=function(e,n){return!i(t(e,n))},e.relativeComplement=function(e,t){let n=[],s={start:e.start,end:Math.min(t.start,e.end)},r={start:Math.max(t.end,e.start),end:e.end};return i(s)||n.push(s),i(r)||n.push(r),n}})(JE||(JE={})),wE({}),function(e){e[e.ABSOLUTE=1]="ABSOLUTE",e[e.FIXED=2]="FIXED",e[e.FIXED_SHADOW=3]="FIXED_SHADOW"}(eD||(eD={})),function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"}(tD||(tD={})),function(e){e[e.BELOW=0]="BELOW",e[e.ABOVE=1]="ABOVE"}(iD||(iD={})),function(e){e[e.VERTICAL=0]="VERTICAL",e[e.HORIZONTAL=1]="HORIZONTAL"}(nD||(nD={})),function(e){e[e.Before=0]="Before",e[e.After=1]="After"}(sD||(sD={})),function(e){e[e.AVOID=0]="AVOID",e[e.ALIGN=1]="ALIGN"}(rD||(rD={}));var hD=(dt=class e extends Co{constructor(e,t){super(),this.container=null,this.useFixedPosition=!1,this.useShadowDOM=!1,this.delegate=null,this.toDisposeOnClean=Co.None,this.toDisposeOnSetContainer=Co.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=Mb(".context-view"),Bb(this.view),this.setContainer(e,t),this._register(vo(()=>this.setContainer(null,eD.ABSOLUTE)))}setContainer(t,i){var n;this.useFixedPosition=i!==eD.ABSOLUTE;let s=this.useShadowDOM;if(this.useShadowDOM=i===eD.FIXED_SHADOW,(t!==this.container||s!==this.useShadowDOM)&&(this.container&&(this.container=(this.toDisposeOnSetContainer.dispose(),this.view.remove(),this.shadowRoot&&(this.shadowRoot=null,null!==(n=this.shadowRootHostElement)&&void 0!==n&&n.remove(),this.shadowRootHostElement=null),null)),t)){if(this.container=t,this.useShadowDOM){this.shadowRootHostElement=Mb(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});let e=mb("style");e.textContent=dD,this.shadowRoot.appendChild(e),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(Mb("slot"))}else this.container.appendChild(this.view);let i=new bo;e.BUBBLE_UP_EVENTS.forEach(e=>{i.add(z_(this.container,e,e=>{this.onDOMEvent(e,!1)}))}),e.BUBBLE_DOWN_EVENTS.forEach(e=>{i.add(z_(this.container,e,e=>{this.onDOMEvent(e,!0)},!0))}),this.toDisposeOnSetContainer=i}}show(e){var t,i,n;this.isVisible()&&this.hide(),U_(this.view),this.view.className="context-view monaco-component",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="".concat(2575+(null!==(t=e.layer)&&void 0!==t?t:0)),this.view.style.position=this.useFixedPosition?"fixed":"absolute",Pb(this.view),this.toDisposeOnClean=e.render(this.view)||Co.None,this.delegate=e,this.doLayout(),null===(i=(n=this.delegate).focus)||void 0===i||i.call(n)}getViewElement(){return this.view}layout(){if(this.isVisible()){var e,t;if(!1===this.delegate.canRelayout&&(!$n||!Gv))return void this.hide();null!==(e=this.delegate)&&void 0!==e&&null!==(t=e.layout)&&void 0!==t&&t.call(e),this.doLayout()}}doLayout(){var e,t,i;if(!this.isVisible())return;let n,s=this.delegate.getAnchor();if(bb(s)){let e=Z_(s),t=J_(s);n={top:e.top*t,left:e.left*t,width:e.width*t,height:e.height*t}}else n=function(e){let t=e;return!!t&&"number"==typeof t.x&&"number"==typeof t.y}(s)?{top:s.y,left:s.x,width:s.width||1,height:s.height||2}:{top:s.posy,left:s.posx,width:2,height:2};let r,o,a=eb(this.view),l=nb(this.view),h=null!==(e=this.delegate.anchorPosition)&&void 0!==e?e:iD.BELOW,d=null!==(t=this.delegate.anchorAlignment)&&void 0!==t?t:tD.LEFT,c=null!==(i=this.delegate.anchorAxisAlignment)&&void 0!==i?i:nD.VERTICAL,u=pb();if(c===nD.VERTICAL){let e={offset:n.top-u.pageYOffset,size:n.height,position:h===iD.BELOW?sD.Before:sD.After},t={offset:n.left,size:n.width,position:d===tD.LEFT?sD.Before:sD.After,mode:rD.ALIGN};r=lD(u.innerHeight,l,e)+u.pageYOffset,JE.intersects({start:r,end:r+l},{start:e.offset,end:e.offset+e.size})&&(t.mode=rD.AVOID),o=lD(u.innerWidth,a,t)}else{let e={offset:n.left,size:n.width,position:d===tD.LEFT?sD.Before:sD.After},t={offset:n.top,size:n.height,position:h===iD.BELOW?sD.Before:sD.After,mode:rD.ALIGN};o=lD(u.innerWidth,a,e),JE.intersects({start:o,end:o+a},{start:e.offset,end:e.offset+e.size})&&(t.mode=rD.AVOID),r=lD(u.innerHeight,l,t)+u.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(h===iD.BELOW?"bottom":"top"),this.view.classList.add(d===tD.LEFT?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);let g=Z_(this.container),p=this.container.scrollTop||0,f=this.container.scrollLeft||0;this.view.style.top="".concat(r-(this.useFixedPosition?Z_(this.view).top:g.top)+p,"px"),this.view.style.left="".concat(o-(this.useFixedPosition?Z_(this.view).left:g.left)+f,"px"),this.view.style.width="initial"}hide(e){let t=this.delegate;this.delegate=null,null!==t&&void 0!==t&&t.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),Bb(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,hb(L_(e).document)):t&&!sb(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}},{_:dt.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"]},{_:dt.BUBBLE_DOWN_EVENTS=["click"]},dt),dD='\n\t:host {\n\t\tall: initial; /* 1st rule so subsequent properties are reset. */\n\t}\n\n\t.codicon[class*=\'codicon-\'] {\n\t\tfont: normal normal normal 16px/1 codicon;\n\t\tdisplay: inline-block;\n\t\ttext-decoration: none;\n\t\ttext-rendering: auto;\n\t\ttext-align: center;\n\t\t-webkit-font-smoothing: antialiased;\n\t\t-moz-osx-font-smoothing: grayscale;\n\t\tuser-select: none;\n\t\t-webkit-user-select: none;\n\t\t-ms-user-select: none;\n\t}\n\n\t:host {\n\t\tfont-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;\n\t}\n\n\t:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }\n\t:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }\n\t:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }\n\t:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }\n\t:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo", "Nanum Gothic", "AppleGothic", sans-serif; }\n\n\t:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }\n\t:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }\n\t:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }\n\t:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }\n\t:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }\n\n\t:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }\n\t:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }\n\t:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }\n\t:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }\n\t:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }\n',cD=fn("markdownRendererService"),uD=fn("accessibilityService");wE({});var gD;function pD(e){return"object"==typeof e&&"markdown"in e&&"markdownNotSupportedFallback"in e}!function(e){e[e.Pointer=1]="Pointer",e[e.Mouse=2]="Mouse"}(gD||(gD={})),wE({});var fD,mD=Mb;!function(e){e[e.PointerSize=3]="PointerSize",e[e.HoverBorderWidth=2]="HoverBorderWidth",e[e.HoverWindowEdgeMargin=2]="HoverWindowEdgeMargin"}(fD||(fD={}));var vD=class extends AE{get _targetWindow(){return L_(this._target.targetElements[0])}get _targetDocumentElement(){return L_(this._target.targetElements[0]).document.documentElement}get isDisposed(){return this._isDisposed}get isMouseIn(){return this._lockMouseTracker.isMouseIn}get domNode(){return this._hover.containerDomNode}get onDispose(){return this._onDispose.event}get onRequestLayout(){return this._onRequestLayout.event}get anchor(){return this._hoverPosition===QE.BELOW?iD.BELOW:iD.ABOVE}get x(){return this._x}get y(){return this._y}get isLocked(){return this._isLocked}set isLocked(e){this._isLocked!==e&&(this._isLocked=e,this._hoverContainer.classList.toggle("locked",this._isLocked))}constructor(e,t,i,n,s){var r,o,a,l,h,d,c,u,g,p,f,m,v,_,b,C;if(super(),this._keybindingService=t,this._configurationService=i,this._markdownRenderer=n,this._accessibilityService=s,this._messageListeners=new bo,this._isDisposed=!1,this._forcePosition=!1,this._x=0,this._y=0,this._isLocked=!1,this._enableFocusTraps=!1,this._addedFocusTrap=!1,this._maxHeightRatioRelativeToWindow=.5,this._onDispose=this._register(new Ro),this._onRequestLayout=this._register(new Ro),this._linkHandler=e.linkHandler,this._target="targetElements"in e.target?e.target:new CD(e.target),e.style)switch(e.style){case gD.Pointer:null!==(r=e.appearance)&&void 0!==r||(e.appearance={}),null!==(a=(o=e.appearance).compact)&&void 0!==a||(o.compact=!0),null!==(h=(l=e.appearance).showPointer)&&void 0!==h||(l.showPointer=!0);break;case gD.Mouse:null!==(d=e.appearance)&&void 0!==d||(e.appearance={}),null!==(u=(c=e.appearance).compact)&&void 0!==u||(c.compact=!0)}this._hoverPointer=null!==(g=e.appearance)&&void 0!==g&&g.showPointer?mD("div.workbench-hover-pointer"):void 0,this._hover=this._register(new XE(!(null!==(p=e.appearance)&&void 0!==p&&p.skipFadeInAnimation))),this._hover.containerDomNode.classList.add("workbench-hover"),null!==(f=e.appearance)&&void 0!==f&&f.compact&&this._hover.containerDomNode.classList.add("workbench-hover","compact"),e.additionalClasses&&this._hover.containerDomNode.classList.add(...e.additionalClasses),null!==(m=e.position)&&void 0!==m&&m.forcePosition&&(this._forcePosition=!0),e.trapFocus&&(this._enableFocusTraps=!0);let y=null===(v=e.appearance)||void 0===v?void 0:v.maxHeightRatio;void 0!==y&&y>0&&y<=1&&(this._maxHeightRatioRelativeToWindow=y),this._hoverPosition=void 0===(null===(_=e.position)||void 0===_?void 0:_.hoverPosition)?QE.ABOVE:Ji(e.position.hoverPosition)?e.position.hoverPosition:QE.BELOW,this.onmousedown(this._hover.containerDomNode,e=>e.stopPropagation()),this.onkeydown(this._hover.containerDomNode,e=>{e.equals(Kv.Escape)&&this.dispose()}),this._register(W_(this._targetWindow,"blur",()=>this.dispose()));let w,S=mD("div.hover-row.markdown-hover"),k=mD("div.hover-contents");if("string"==typeof e.content)k.textContent=e.content,k.style.whiteSpace="pre-wrap";else if(bb(e.content))k.appendChild(e.content),k.classList.add("html-hover-contents");else{let t=e.content,{element:i}=this._register(this._markdownRenderer.render(t,{actionHandler:this._linkHandler,asyncRenderCallback:()=>{k.classList.add("code-hover-contents"),this.layout(),this._onRequestLayout.fire()}}));k.appendChild(i)}if(S.appendChild(k),this._hover.contentsDomNode.appendChild(S),e.actions&&e.actions.length>0){let t=mD("div.hover-row.status-bar"),i=mD("div.actions");e.actions.forEach(e=>{let t=this._keybindingService.lookupKeybinding(e.commandId),n=t?t.getLabel():null;this._register(ZE.render(i,{label:e.label,commandId:e.commandId,run:t=>{e.run(t),this.dispose()},iconClass:e.iconClass},n))}),t.appendChild(i),this._hover.containerDomNode.appendChild(t)}if(this._hoverContainer=mD("div.workbench-hover-container"),this._hoverPointer&&this._hoverContainer.appendChild(this._hoverPointer),this._hoverContainer.appendChild(this._hover.containerDomNode),w=!(e.actions&&e.actions.length>0)&&(void 0===(null===(b=e.persistence)||void 0===b?void 0:b.hideOnHover)?"string"==typeof e.content||$y(e.content)&&!e.content.value.includes("](")&&!e.content.value.includes("</a>"):e.persistence.hideOnHover),null!==(C=e.appearance)&&void 0!==C&&C.showHoverHint){let e=mD("div.hover-row.status-bar"),t=mD("div.info");t.textContent=Li(1940,"Hold {0} key to mouse over",qn?"Option":"Alt"),e.appendChild(t),this._hover.containerDomNode.appendChild(e)}let E=[...this._target.targetElements];w||E.push(this._hoverContainer);let D=this._register(new bD(E));if(this._register(D.onMouseOut(()=>{this._isLocked||this.dispose()})),w){let e=[...this._target.targetElements,this._hoverContainer];this._lockMouseTracker=this._register(new bD(e)),this._register(this._lockMouseTracker.onMouseOut(()=>{this._isLocked||this.dispose()}))}else this._lockMouseTracker=D}addFocusTrap(){if(!this._enableFocusTraps||this._addedFocusTrap)return;this._addedFocusTrap=!0;let e=this._hover.containerDomNode,t=this.findLastFocusableChild(this._hover.containerDomNode);if(t){let i=Lb(this._hoverContainer,mD("div")),n=xb(this._hoverContainer,mD("div"));i.tabIndex=0,n.tabIndex=0,this._register(W_(n,"focus",t=>{e.focus(),t.preventDefault()})),this._register(W_(i,"focus",e=>{t.focus(),e.preventDefault()}))}}findLastFocusableChild(e){if(e.hasChildNodes())for(let t=0;t<e.childNodes.length;t++){let i=e.childNodes.item(e.childNodes.length-t-1);if(i.nodeType===i.ELEMENT_NODE){let e=i;if("number"==typeof e.tabIndex&&e.tabIndex>=0)return e}let n=this.findLastFocusableChild(i);if(n)return n}}render(e){var t;e.appendChild(this._hoverContainer);this._hoverContainer.contains(hb(this._hoverContainer.ownerDocument))&&function(e,t){e&&t?Li(16,"Inspect this in the accessible view with {0}.",t):e&&Li(17,"Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding.")}(!0===this._configurationService.getValue("accessibility.verbosity.hover")&&this._accessibilityService.isScreenReaderOptimized(),null===(t=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))||void 0===t?void 0:t.getAriaLabel());this.layout(),this.addFocusTrap()}layout(){this._hover.containerDomNode.classList.remove("right-aligned"),this._hover.contentsDomNode.style.maxHeight="";let{top:e,right:t,bottom:i,left:n}=this._target.targetElements.map(e=>(e=>{let t=J_(e),i=e.getBoundingClientRect();return{top:i.top*t,bottom:i.bottom*t,right:i.right*t,left:i.left*t}})(e))[0],s=t-n,r=i-e,o={top:e,right:t,bottom:i,left:n,width:s,height:r,center:{x:n+s/2,y:e+r/2}};if(this.adjustHorizontalHoverPosition(o),this.adjustVerticalHoverPosition(o),this.adjustHoverMaxHeight(o),this._hoverContainer.style.padding="",this._hoverContainer.style.margin="",this._hoverPointer){switch(this._hoverPosition){case QE.RIGHT:o.left+=fD.PointerSize,o.right+=fD.PointerSize,this._hoverContainer.style.paddingLeft="".concat(fD.PointerSize,"px"),this._hoverContainer.style.marginLeft="".concat(-fD.PointerSize,"px");break;case QE.LEFT:o.left-=fD.PointerSize,o.right-=fD.PointerSize,this._hoverContainer.style.paddingRight="".concat(fD.PointerSize,"px"),this._hoverContainer.style.marginRight="".concat(-fD.PointerSize,"px");break;case QE.BELOW:o.top+=fD.PointerSize,o.bottom+=fD.PointerSize,this._hoverContainer.style.paddingTop="".concat(fD.PointerSize,"px"),this._hoverContainer.style.marginTop="".concat(-fD.PointerSize,"px");break;case QE.ABOVE:o.top-=fD.PointerSize,o.bottom-=fD.PointerSize,this._hoverContainer.style.paddingBottom="".concat(fD.PointerSize,"px"),this._hoverContainer.style.marginBottom="".concat(-fD.PointerSize,"px")}o.center.x=o.left+s/2,o.center.y=o.top+r/2}this.computeXCordinate(o),this.computeYCordinate(o),this._hoverPointer&&(this._hoverPointer.classList.remove("top"),this._hoverPointer.classList.remove("left"),this._hoverPointer.classList.remove("right"),this._hoverPointer.classList.remove("bottom"),this.setHoverPointerPosition(o)),this._hover.onContentsChanged()}computeXCordinate(e){let t=this._hover.containerDomNode.clientWidth+fD.HoverBorderWidth;void 0===this._target.x?this._hoverPosition===QE.RIGHT?this._x=e.right:this._hoverPosition===QE.LEFT?this._x=e.left-t:(this._hoverPointer?this._x=e.center.x-this._hover.containerDomNode.clientWidth/2:this._x=e.left,this._x+t>=this._targetDocumentElement.clientWidth&&(this._hover.containerDomNode.classList.add("right-aligned"),this._x=Math.max(this._targetDocumentElement.clientWidth-t-fD.HoverWindowEdgeMargin,this._targetDocumentElement.clientLeft))):this._x=this._target.x,this._x<this._targetDocumentElement.clientLeft&&(this._x=e.left+fD.HoverWindowEdgeMargin)}computeYCordinate(e){void 0===this._target.y?this._hoverPosition===QE.ABOVE?this._y=e.top:this._hoverPosition===QE.BELOW?this._y=e.bottom-2:this._hoverPointer?this._y=e.center.y+this._hover.containerDomNode.clientHeight/2:this._y=e.bottom:this._y=this._target.y,this._y>this._targetWindow.innerHeight&&(this._y=e.bottom)}adjustHorizontalHoverPosition(e){if(void 0!==this._target.x)return;let t=this._hoverPointer?fD.PointerSize:0;if(this._forcePosition){let i=t+fD.HoverBorderWidth;return void(this._hoverPosition===QE.RIGHT?this._hover.containerDomNode.style.maxWidth="".concat(this._targetDocumentElement.clientWidth-e.right-i,"px"):this._hoverPosition===QE.LEFT&&(this._hover.containerDomNode.style.maxWidth="".concat(e.left-i,"px")))}this._hoverPosition===QE.RIGHT?this._targetDocumentElement.clientWidth-e.right<this._hover.containerDomNode.clientWidth+t&&(e.left>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=QE.LEFT:this._hoverPosition=QE.BELOW):this._hoverPosition===QE.LEFT&&(e.left<this._hover.containerDomNode.clientWidth+t&&(this._targetDocumentElement.clientWidth-e.right>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=QE.RIGHT:this._hoverPosition=QE.BELOW),e.left-this._hover.containerDomNode.clientWidth-t<=this._targetDocumentElement.clientLeft&&(this._hoverPosition=QE.RIGHT))}adjustVerticalHoverPosition(e){if(void 0!==this._target.y||this._forcePosition)return;let t=this._hoverPointer?fD.PointerSize:0;this._hoverPosition===QE.ABOVE?e.top-this._hover.containerDomNode.clientHeight-t<0&&(this._hoverPosition=QE.BELOW):this._hoverPosition===QE.BELOW&&e.bottom+this._hover.containerDomNode.offsetHeight+t>this._targetWindow.innerHeight&&(this._hoverPosition=QE.ABOVE)}adjustHoverMaxHeight(e){let t=this._targetWindow.innerHeight*this._maxHeightRatioRelativeToWindow;if(this._forcePosition){let i=(this._hoverPointer?fD.PointerSize:0)+fD.HoverBorderWidth;this._hoverPosition===QE.ABOVE?t=Math.min(t,e.top-i):this._hoverPosition===QE.BELOW&&(t=Math.min(t,this._targetWindow.innerHeight-e.bottom-i))}if(this._hover.containerDomNode.style.maxHeight="".concat(t,"px"),this._hover.contentsDomNode.clientHeight<this._hover.contentsDomNode.scrollHeight){let e="".concat(this._hover.scrollbar.options.verticalScrollbarSize,"px");this._hover.contentsDomNode.style.paddingRight!==e&&(this._hover.contentsDomNode.style.paddingRight=e)}}setHoverPointerPosition(e){if(this._hoverPointer)switch(this._hoverPosition){case QE.LEFT:case QE.RIGHT:{this._hoverPointer.classList.add(this._hoverPosition===QE.LEFT?"right":"left");let t=this._hover.containerDomNode.clientHeight;t>e.height?this._hoverPointer.style.top="".concat(e.center.y-(this._y-t)-fD.PointerSize,"px"):this._hoverPointer.style.top="".concat(Math.round(t/2)-fD.PointerSize,"px");break}case QE.ABOVE:case QE.BELOW:{this._hoverPointer.classList.add(this._hoverPosition===QE.ABOVE?"bottom":"top");let t=this._hover.containerDomNode.clientWidth,i=Math.round(t/2)-fD.PointerSize,n=this._x+i;(n<e.left||n>e.right)&&(i=e.center.x-this._x-fD.PointerSize),this._hoverPointer.style.left="".concat(i,"px");break}}}focus(){this._hover.containerDomNode.focus()}hide(){this.dispose()}dispose(){var e,t;this._isDisposed||(this._onDispose.fire(),null!==(e=(t=this._target).dispose)&&void 0!==e&&e.call(t),this._hoverContainer.remove(),this._messageListeners.dispose(),super.dispose()),this._isDisposed=!0}};vD=ki([Ei(1,SE),Ei(2,fr),Ei(3,cD),Ei(4,uD)],vD);var _D,bD=class extends AE{get onMouseOut(){return this._onMouseOut.event}get isMouseIn(){return this._isMouseIn}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;super(),this._elements=e,this._eventDebounceDelay=t,this._isMouseIn=!0,this._mouseTimer=this._register(new yo),this._onMouseOut=this._register(new Ro);for(let i of this._elements)this.onmouseover(i,()=>this._onTargetMouseOver()),this.onmouseleave(i,()=>this._onTargetMouseLeave())}_onTargetMouseOver(){this._isMouseIn=!0,this._mouseTimer.clear()}_onTargetMouseLeave(){this._isMouseIn=!1,this._mouseTimer.value=new Fl(()=>this._fireIfMouseOutside(),this._eventDebounceDelay)}_fireIfMouseOutside(){this._isMouseIn||this._onMouseOut.fire()}},CD=class{constructor(e){this._element=e,this.targetElements=[this._element]}dispose(){}};!function(e){e[e.NoMatchingKb=0]="NoMatchingKb",e[e.MoreChordsNeeded=1]="MoreChordsNeeded",e[e.KbFound=2]="KbFound"}(_D||(_D={}));var yD={kind:_D.NoMatchingKb},wD={kind:_D.MoreChordsNeeded};var SD=class e{constructor(t,i,n){this._log=n,this._defaultKeybindings=t,this._defaultBoundCommands=new Map;for(let e of t){let t=e.command;t&&"-"!==t.charAt(0)&&this._defaultBoundCommands.set(t,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=e.handleRemovals([].concat(t,i));for(let e=0,r=this._keybindings.length;e<r;e++){var s;let t=this._keybindings[e];if(0===t.chords.length)continue;let i=null===(s=t.when)||void 0===s?void 0:s.substituteConstants();i&&i.type===pk.False||this._addKeyPress(t.chords[0],t)}}static _isTargetedForRemoval(e,t,i){if(t)for(let n=0;n<t.length;n++)if(t[n]!==e.chords[n])return!1;return!(i&&i.type!==pk.True&&(!e.when||!function(e,t){let i=e?e.substituteConstants():void 0,n=t?t.substituteConstants():void 0;return!i&&!n||!(!i||!n)&&i.equals(n)}(i,e.when)))}static handleRemovals(e){let t=new Map;for(let n=0,s=e.length;n<s;n++){let i=e[n];if(i.command&&"-"===i.command.charAt(0)){let e=i.command.substring(1);t.has(e)?t.get(e).push(i):t.set(e,[i])}}if(0===t.size)return e;let i=[];for(let n=0,s=e.length;n<s;n++){let s=e[n];if(!s.command||0===s.command.length){i.push(s);continue}if("-"===s.command.charAt(0))continue;let r=t.get(s.command);if(!r||!s.isDefault){i.push(s);continue}let o=!1;for(let e of r){let t=e.when;if(this._isTargetedForRemoval(s,e.chords,t)){o=!0;break}}o||i.push(s)}return i}_addKeyPress(t,i){let n=this._map.get(t);if(void 0===n)return this._map.set(t,[i]),void this._addToLookupMap(i);for(let s=n.length-1;s>=0;s--){let t=n[s];if(t.command===i.command)continue;let r=!0;for(let e=1;e<t.chords.length&&e<i.chords.length;e++)if(t.chords[e]!==i.chords[e]){r=!1;break}r&&e.whenIsEntirelyIncluded(t.when,i.when)&&this._removeFromLookupMap(t)}n.push(i),this._addToLookupMap(i)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);void 0===t?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);if(void 0!==t)for(let i=0,n=t.length;i<n;i++)if(t[i]===e)return void t.splice(i,1)}static whenIsEntirelyIncluded(e,t){return!t||t.type===pk.True||!(!e||e.type===pk.True)&&$k(e,t)}getDefaultBoundCommands(){return this._defaultBoundCommands}getDefaultKeybindings(){return this._defaultKeybindings}getKeybindings(){return this._keybindings}lookupKeybindings(e){let t=this._lookupMap.get(e);if(void 0===t||0===t.length)return[];let i=[],n=0;for(let s=t.length-1;s>=0;s--)i[n++]=t[s];return i}lookupPrimaryKeybinding(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this._lookupMap.get(e);if(void 0===n||0===n.length)return null;if(1===n.length&&!i)return n[0];for(let s=n.length-1;s>=0;s--){let e=n[s];if(t.contextMatchesRules(e.when))return e}return i?null:n[n.length-1]}resolve(e,t,i){let n=[...t,i];this._log("| Resolving ".concat(n));let s=this._map.get(n[0]);if(void 0===s)return this._log("\\ No keybinding entries."),yD;let r=null;if(n.length<2)r=s;else{r=[];for(let e=0,t=s.length;e<t;e++){let t=s[e];if(n.length>t.chords.length)continue;let i=!0;for(let e=1;e<n.length;e++)if(t.chords[e]!==n[e]){i=!1;break}i&&r.push(t)}}let o=this._findCommand(e,r);return o?n.length<o.chords.length?(this._log("\\ From ".concat(r.length," keybinding entries, awaiting ").concat(o.chords.length-n.length," more chord(s), when: ").concat(kD(o.when),", source: ").concat(ED(o),".")),wD):(this._log("\\ From ".concat(r.length," keybinding entries, matched ").concat(o.command,", when: ").concat(kD(o.when),", source: ").concat(ED(o),".")),function(e,t,i){return{kind:_D.KbFound,commandId:e,commandArgs:t,isBubble:i}}(o.command,o.commandArgs,o.bubble)):(this._log("\\ From ".concat(r.length," keybinding entries, no when clauses matched the context.")),yD)}_findCommand(t,i){for(let n=i.length-1;n>=0;n--){let s=i[n];if(e._contextMatchesRules(t,s.when))return s}return null}static _contextMatchesRules(e,t){return!t||t.evaluate(e)}};function kD(e){return e?"".concat(e.serialize()):"no when condition"}function ED(e){return e.extensionId?e.isBuiltinExtension?"built-in extension ".concat(e.extensionId):"user extension ".concat(e.extensionId):e.isDefault?"built-in":"user"}var DD=class extends Co{constructor(e){super(),this.layoutService=e,this.contextView=this._register(new hD(this.layoutService.mainContainer,eD.ABSOLUTE)),this.layout(),this._register(e.onDidLayoutContainer(()=>this.layout()))}showContextView(e,t,i){let n;n=t?t===this.layoutService.getContainer(L_(t))?eD.ABSOLUTE:i?eD.FIXED_SHADOW:eD.FIXED:eD.ABSOLUTE,this.contextView.setContainer(null!==t&&void 0!==t?t:this.layoutService.activeContainer,n),this.contextView.show(e);let s={close:()=>{this.openContextView===s&&this.hideContextView()}};return this.openContextView=s,s}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e),this.openContextView=void 0}};DD=ki([Ei(0,EC)],DD);var TD,ID=class extends DD{getContextViewElement(){return this.contextView.getViewElement()}},xD=class{constructor(e,t,i){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=i}onDidHide(){this._cancellationTokenSource&&(this._cancellationTokenSource=void this._cancellationTokenSource.dispose(!0))}async update(e,t,i){if(this._cancellationTokenSource&&(this._cancellationTokenSource=void this._cancellationTokenSource.dispose(!0)),this.isDisposed)return;let n;if($i(e)||bb(e)||void 0===e)n=e;else{var s;this._cancellationTokenSource=new Qo;let r,o=this._cancellationTokenSource.token;if(r=pD(e)?un(e.markdown)?e.markdown(o).then(t=>null!==t&&void 0!==t?t:e.markdownNotSupportedFallback):null!==(s=e.markdown)&&void 0!==s?s:e.markdownNotSupportedFallback:e.element(o),r instanceof Promise?(this._hoverWidget||this.show(Li(1941,"Loading..."),t,i),n=await r):n=r,this.isDisposed||o.isCancellationRequested)return}this.show(n,t,i)}show(e,t,i){let n=this._hoverWidget;if(this.hasContent(e)){var s;let r={content:e,target:this.target,actions:null===i||void 0===i?void 0:i.actions,linkHandler:null===i||void 0===i?void 0:i.linkHandler,trapFocus:null===i||void 0===i?void 0:i.trapFocus,appearance:{showPointer:"element"===this.hoverDelegate.placement,skipFadeInAnimation:!this.fadeInAnimation||!!n,showHoverHint:null===i||void 0===i||null===(s=i.appearance)||void 0===s?void 0:s.showHoverHint},position:{hoverPosition:QE.BELOW}};this._hoverWidget=this.hoverDelegate.showHover(r,t)}null===n||void 0===n||n.dispose()}hasContent(e){return!!e&&(!$y(e)||!!e.value)}get isDisposed(){var e;return null===(e=this._hoverWidget)||void 0===e?void 0:e.isDisposed}dispose(){var e,t;null!==(e=this._hoverWidget)&&void 0!==e&&e.dispose(),null!==(t=this._cancellationTokenSource)&&void 0!==t&&t.dispose(!0),this._cancellationTokenSource=void 0}},LD=fn("commandService"),AD=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new Ro,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(e,t){if(!e)throw Error("invalid command");if("string"==typeof e){if(!t)throw Error("invalid command");return this.registerCommand({id:e,handler:t})}if(e.metadata&&Array.isArray(e.metadata.args)){let t=[];for(let n of e.metadata.args)t.push(n.constraint);let i=e.handler;e.handler=function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];return function(e,t){let i=Math.min(e.length,t.length);for(let n=0;n<i;n++)gn(e[n],t[n])}(s,t),i(e,...s)}}let{id:i}=e,n=this._commands.get(i);n||(n=new Eo,this._commands.set(i,n));let s=n.unshift(e),r=vo(()=>{var e;s(),(null===(e=this._commands.get(i))||void 0===e?void 0:e.isEmpty())&&this._commands.delete(i)});return this._onDidRegisterCommand.fire(i),r}registerCommandAlias(e,t){return AD.registerCommand(e,function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return e.get(LD).executeCommand(t,...n)})}getCommand(e){let t=this._commands.get(e);if(t&&!t.isEmpty())return oo.first(t)}getCommands(){let e=new Map;for(let t of this._commands.keys()){let i=this.getCommand(t);i&&e.set(t,i)}return e}};AD.registerCommand("noop",()=>{}),function(e){e[e.EditorCore=0]="EditorCore",e[e.EditorContrib=100]="EditorContrib",e[e.WorkbenchContrib=200]="WorkbenchContrib",e[e.BuiltinExtension=300]="BuiltinExtension",e[e.ExternalExtension=400]="ExternalExtension"}(TD||(TD={}));var ND=new class e{constructor(){this._coreKeybindings=new Eo,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(ss===ts.Windows){if(e&&e.win)return e.win}else if(ss===ts.Macintosh){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(t){let i=e.bindToCurrentPlatform(t),n=new bo;if(i&&i.primary){let e=h_(i.primary,ss);e&&n.add(this._registerDefaultKeybinding(e,t.id,t.args,t.weight,0,t.when))}if(i&&Array.isArray(i.secondary))for(let e=0,s=i.secondary.length;e<s;e++){let s=h_(i.secondary[e],ss);s&&n.add(this._registerDefaultKeybinding(s,t.id,t.args,t.weight,-e-1,t.when))}return n}setExtensionKeybindings(e){let t=[],i=0;for(let n of e)n.keybinding&&(t[i++]={keybinding:n.keybinding,command:n.id,commandArgs:n.args,when:n.when,weight1:n.weight,weight2:0,extensionId:n.extensionId||null,isBuiltinExtension:n.isBuiltinExtension||!1});this._extensionKeybindings=t,this._cachedMergedKeybindings=null}registerCommandAndKeybindingRule(e){return fo(this.registerKeybindingRule(e),AD.registerCommand(e))}_registerDefaultKeybinding(e,t,i,n,s,r){let o=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:i,when:r,weight1:n,weight2:s,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,vo(()=>{o(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(FD)),this._cachedMergedKeybindings.slice(0)}};function FD(e,t){if(e.weight1!==t.weight1)return e.weight1-t.weight1;if(e.command&&t.command){if(e.command<t.command)return-1;if(e.command>t.command)return 1}return e.weight2-t.weight2}Tn.add("platform.keybindingsRegistry",ND);var OD=class extends Co{constructor(e,t,i,n,s,r){super(),this._instantiationService=e,this._configurationService=t,this._keybindingService=n,this._layoutService=s,this._accessibilityService=r,this._currentDelayedHoverWasShown=!1,this._delayedHovers=new Map,this._managedHovers=new Map,this._register(i.onDidShowContextMenu(()=>this.hideHover())),this._contextViewHandler=this._register(new DD(this._layoutService)),this._register(ND.registerCommandAndKeybindingRule({id:"workbench.action.showHover",weight:TD.EditorCore,primary:a_(Yv.CtrlCmd|Kv.KeyK,Yv.CtrlCmd|Kv.KeyI),handler:()=>{this._showAndFocusHoverForActiveElement()}}))}showInstantHover(e,t,i,n){let s=this._createHover(e,i);if(s)return this._showHover(s,e,t),s}showDelayedHover(e,t){if(void 0===e.id&&(e.id=MD(e.content)),!this._currentDelayedHover||this._currentDelayedHoverWasShown){var i;if(null!==(i=this._currentHover)&&void 0!==i&&i.isLocked)return;if(RD(this._currentHoverOptions)===RD(e))return this._currentHover;if(this._currentHover&&!this._currentHover.isDisposed&&void 0!==this._currentDelayedHoverGroupId&&this._currentDelayedHoverGroupId===(null===t||void 0===t?void 0:t.groupId))return this.showInstantHover((0,r.A)((0,r.A)({},e),{},{appearance:(0,r.A)((0,r.A)({},e.appearance),{},{skipFadeInAnimation:!0})}))}else if(this._currentDelayedHover&&RD(this._currentHoverOptions)===RD(e))return this._currentDelayedHover;let n=this._createHover(e,void 0);return n?(this._currentDelayedHover=n,this._currentDelayedHoverWasShown=!1,this._currentDelayedHoverGroupId=null===t||void 0===t?void 0:t.groupId,El(this._configurationService.getValue("workbench.hover.delay")).then(()=>{n&&!n.isDisposed&&(this._currentDelayedHoverWasShown=!0,this._showHover(n,e))}),n):(this._currentDelayedHover=void 0,this._currentDelayedHoverWasShown=!1,void(this._currentDelayedHoverGroupId=void 0))}setupDelayedHover(e,t,i){return this._setupDelayedHover(e,i=>{let n=(0,r.A)((0,r.A)({},"function"==typeof t?t():t),{},{target:e});return n.style===gD.Mouse&&i&&(n.target=HD(e,i)),n},i)}setupDelayedHoverAtMouse(e,t,i){return this._setupDelayedHover(e,i=>(0,r.A)((0,r.A)({},"function"==typeof t?t():t),{},{target:i?HD(e,i):e}),i)}_setupDelayedHover(e,t,i){let n=new bo;return n.add(W_(e,kb.MOUSE_OVER,e=>{this.showDelayedHover(t(e),{groupId:null===i||void 0===i?void 0:i.groupId})})),null!==i&&void 0!==i&&i.setupKeyboardEvents&&n.add(W_(e,kb.KEY_DOWN,e=>{let i=new C_(e);(i.equals(Kv.Space)||i.equals(Kv.Enter))&&this.showInstantHover(t(),!0)})),this._delayedHovers.set(e,{show:e=>{this.showInstantHover(t(),e)}}),n.add(vo(()=>this._delayedHovers.delete(e))),n}_createHover(e,t){var i,n,s,r;if(this._currentDelayedHover=void 0,""===e.content||null!==(i=this._currentHover)&&void 0!==i&&i.isLocked||(void 0===e.id&&(e.id=MD(e.content)),RD(this._currentHoverOptions)===RD(e)))return;this._currentHoverOptions=e,this._lastHoverOptions=e;let o=e.trapFocus||this._accessibilityService.isScreenReaderOptimized(),a=hb();t||(o&&a?a.classList.contains("monaco-hover")||(this._lastFocusedElementBeforeOpen=a):this._lastFocusedElementBeforeOpen=void 0);let l=new bo,h=this._instantiationService.createInstance(vD,e);if(null!==(n=e.persistence)&&void 0!==n&&n.sticky&&(h.isLocked=!0),null!==(s=e.position)&&void 0!==s&&s.hoverPosition&&!Ji(e.position.hoverPosition)&&(e.target={targetElements:bb(e.target)?[e.target]:e.target.targetElements,x:e.position.hoverPosition.x+10}),h.onDispose(()=>{var t,i;null!==(t=this._currentHover)&&void 0!==t&&t.domNode&&ub(this._currentHover.domNode)&&null!==(i=this._lastFocusedElementBeforeOpen)&&void 0!==i&&i.focus(),RD(this._currentHoverOptions)===RD(e)&&this.doHideHover(),l.dispose()},void 0,l),!e.container){let t=bb(e.target)?e.target:e.target.targetElements[0];e.container=this._layoutService.getContainer(L_(t))}if(h.onRequestLayout(()=>this._contextViewHandler.layout(),void 0,l),null!==(r=e.persistence)&&void 0!==r&&r.sticky)l.add(W_(L_(e.container).document,kb.MOUSE_DOWN,e=>{sb(e.target,h.domNode)||this.doHideHover()}));else{if("targetElements"in e.target)for(let i of e.target.targetElements)l.add(W_(i,kb.CLICK,()=>this.hideHover()));else l.add(W_(e.target,kb.CLICK,()=>this.hideHover()));let t=hb();if(t){let i=L_(t).document;l.add(W_(t,kb.KEY_DOWN,t=>{var i;return this._keyDown(t,h,!(null===(i=e.persistence)||void 0===i||!i.hideOnKeyDown))})),l.add(W_(i,kb.KEY_DOWN,t=>{var i;return this._keyDown(t,h,!(null===(i=e.persistence)||void 0===i||!i.hideOnKeyDown))})),l.add(W_(t,kb.KEY_UP,e=>this._keyUp(e,h))),l.add(W_(i,kb.KEY_UP,e=>this._keyUp(e,h)))}}if("IntersectionObserver"in Lv){let t=new IntersectionObserver(e=>this._intersectionChange(e,h),{threshold:0}),i="targetElements"in e.target?e.target.targetElements[0]:e.target;t.observe(i),l.add(vo(()=>t.disconnect()))}return this._currentHover=h,h}_showHover(e,t,i){this._contextViewHandler.showContextView(new BD(e,i),t.container)}hideHover(e){var t;!e&&(null===(t=this._currentHover)||void 0===t?void 0:t.isLocked)||!this._currentHoverOptions||this.doHideHover()}doHideHover(){this._currentHover=void 0,this._currentHoverOptions=void 0,this._contextViewHandler.hideContextView()}_intersectionChange(e,t){e[e.length-1].isIntersecting||t.dispose()}showAndFocusLastHover(){this._lastHoverOptions&&this.showInstantHover(this._lastHoverOptions,!0,!0)}_showAndFocusHoverForActiveElement(){let e=hb();for(;e;){var t;let i=null!==(t=this._delayedHovers.get(e))&&void 0!==t?t:this._managedHovers.get(e);if(i)return void i.show(!0);e=e.parentElement}}_keyDown(e,t,i){var n,s;if("Alt"===e.key)return void(t.isLocked=!0);let r=new C_(e);this._keybindingService.resolveKeyboardEvent(r).getSingleModifierDispatchChords().some(e=>!!e)||this._keybindingService.softDispatch(r,r.target).kind!==_D.NoMatchingKb||i&&(null===(n=this._currentHoverOptions)||void 0===n||!n.trapFocus||"Tab"!==e.key)&&(this.hideHover(),null===(s=this._lastFocusedElementBeforeOpen)||void 0===s||s.focus())}_keyUp(e,t){var i;"Alt"===e.key&&(t.isLocked=!1,t.isMouseIn||(this.hideHover(),null===(i=this._lastFocusedElementBeforeOpen)||void 0===i||i.focus()))}setupManagedHover(e,t,i,n){if(e.showNativeHover)return function(e,t){function i(t){t?e.setAttribute("title",t):e.removeAttribute("title")}return i(PD(t)),{update:e=>i(PD(e)),show:()=>{},hide:()=>{},dispose:()=>i(void 0)}}(t,i);t.setAttribute("custom-hover","true"),""!==t.title&&(console.warn("HTML element already has a title attribute, which will conflict with the custom hover. Please remove the title attribute."),console.trace("Stack trace:",t.title),t.title="");let s,o,a=(t,i)=>{var n,r,a;let l=void 0!==o;t&&(null!==(n=o)&&void 0!==n&&n.dispose(),o=void 0),i&&(null!==(r=s)&&void 0!==r&&r.dispose(),s=void 0),l&&(null!==(a=e.onDidHideHover)&&void 0!==a&&a.call(e),o=void 0)},l=(s,a,l,h)=>new Fl(async()=>{(!o||o.isDisposed)&&(o=new xD(e,l||t,s>0),await o.update("function"==typeof i?i():i,a,(0,r.A)((0,r.A)({},n),{},{trapFocus:h})))},s),h=new bo,d=!1;h.add(W_(t,kb.MOUSE_DOWN,()=>{d=!0,a(!0,!0)},!0)),h.add(W_(t,kb.MOUSE_UP,()=>{d=!1},!0)),h.add(W_(t,kb.MOUSE_LEAVE,e=>{d=!1,a(!1,e.fromElement===t)},!0)),h.add(W_(t,kb.MOUSE_OVER,n=>{if(s)return;let r=new bo,o={targetElements:[t],dispose:()=>{}};(void 0===e.placement||"mouse"===e.placement)&&r.add(W_(t,kb.MOUSE_MOVE,e=>{o.x=e.x+10,UD(e,t)||a(!0,!0)},!0)),s=r,UD(n,t)&&r.add(l("function"==typeof e.delay?e.delay(i):e.delay,!1,o))},!0)),qb(t)||h.add(W_(t,kb.FOCUS,n=>{if(d||s||!UD(n,t))return;let r={targetElements:[t],dispose:()=>{}},o=new bo;o.add(W_(t,kb.BLUR,()=>a(!0,!0),!0)),o.add(l("function"==typeof e.delay?e.delay(i):e.delay,!1,r)),s=o},!0));let c={show:e=>{a(!1,!0)},hide:()=>{a(!0,!0)},update:async(e,t)=>{var n;i=e,await(null===(n=o)||void 0===n?void 0:n.update(i,void 0,t))},dispose:()=>{this._managedHovers.delete(t),h.dispose(),a(!0,!0)}};return this._managedHovers.set(t,c),c}showManagedHover(e){let t=this._managedHovers.get(e);t&&t.show(!0)}dispose(){this._managedHovers.forEach(e=>e.dispose()),super.dispose()}};function RD(e){var t;if(void 0!==e)return null!==(t=null===e||void 0===e?void 0:e.id)&&void 0!==t?t:e}function MD(e){if(!bb(e))return"string"==typeof e?e.toString():e.value}function PD(e){let t="function"==typeof e?e():e;return $i(t)?zy(t):pD(t)?t.markdownNotSupportedFallback:void 0}OD=ki([Ei(0,pn),Ei(1,fr),Ei(2,CE),Ei(3,SE),Ei(4,EC),Ei(5,uD)],OD);var BD=class{get anchorPosition(){return this._hover.anchor}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._hover=e,this._focus=t,this.layer=1}render(e){return this._hover.render(e),this._focus&&this._hover.focus(),this._hover}getAnchor(){return{x:this._hover.x,y:this._hover.y}}layout(){this._hover.layout()}};function UD(e,t){return bb(e.target)&&function(e,t){for(null!==t&&void 0!==t||(t=L_(e).document.body);!e.hasAttribute("custom-hover")&&e!==t;)e=e.parentElement;return e}(e.target,t)===t}function HD(e,t){return{targetElements:[e],x:t.x+10}}du((e,t)=>{let i=e.getColor(Gh);i&&(t.addRule(".monaco-hover.workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ".concat(i.transparent(.5),"; }")),t.addRule(".monaco-hover.workbench-hover hr { border-top: 1px solid ".concat(i.transparent(.5),"; }")))});var WD,VD=class extends Co{get onDidChange(){return this._onDidChange.event}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4?arguments[4]:void 0;super(),this._onDidChange=this._register(new Ro),this._enabled=!0,this._id=e,this._label=t,this._cssClass=i,this._enabled=n,this._actionCallback=s}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}async run(e,t){this._actionCallback&&await this._actionCallback(e)}},zD=class extends Co{constructor(){super(...arguments),this._onWillRun=this._register(new Ro),this._onDidRun=this._register(new Ro)}get onWillRun(){return this._onWillRun.event}get onDidRun(){return this._onDidRun.event}async run(e,t){if(!e.enabled)return;let i;this._onWillRun.fire({action:e});try{await this.runAction(e,t)}catch(e){i=e}this._onDidRun.fire({action:e,error:i})}async runAction(e,t){await e.run(t)}},KD=(ct=class e{constructor(){this.id=e.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(){let t=[];for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];for(let r of n)r.length&&(t=t.length?[...t,new e,...r]:r);return t}async run(){}},{_:ct.ID="vs.actions.separator"},ct),qD=class{get actions(){return this._actions}constructor(e,t,i,n){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=n,this._actions=i}async run(){}},GD=(ut=class e extends VD{constructor(){super(e.ID,Li(43,"(empty)"),void 0,!1)}},{_:ut.ID="vs.actions.empty"},ut);function jD(e){var t,i;return{id:e.id,label:e.label,tooltip:null!==(t=e.tooltip)&&void 0!==t?t:e.label,class:e.class,enabled:null===(i=e.enabled)||void 0===i||i,checked:e.checked,run:async function(){return e.run(...arguments)}}}function YD(e){return void 0!==e.command}var QD=(gt=class e{static for(t){var i;return null!==(i=e._instances.get(t))&&void 0!==i?i:new e(t)}constructor(t){if(e._instances.has(t))throw TypeError("MenuId with identifier '".concat(t,"' already exists. Use MenuId.for(ident) or a unique identifier"));e._instances.set(t,this),this.id=t}},{_:gt._instances=new Map},{_:gt.CommandPalette=new gt("CommandPalette")},{_:gt.DebugBreakpointsContext=new gt("DebugBreakpointsContext")},{_:gt.DebugCallStackContext=new gt("DebugCallStackContext")},{_:gt.DebugConsoleContext=new gt("DebugConsoleContext")},{_:gt.DebugVariablesContext=new gt("DebugVariablesContext")},{_:gt.NotebookVariablesContext=new gt("NotebookVariablesContext")},{_:gt.DebugHoverContext=new gt("DebugHoverContext")},{_:gt.DebugWatchContext=new gt("DebugWatchContext")},{_:gt.DebugToolBar=new gt("DebugToolBar")},{_:gt.DebugToolBarStop=new gt("DebugToolBarStop")},{_:gt.DebugDisassemblyContext=new gt("DebugDisassemblyContext")},{_:gt.DebugCallStackToolbar=new gt("DebugCallStackToolbar")},{_:gt.DebugCreateConfiguration=new gt("DebugCreateConfiguration")},{_:gt.DebugScopesContext=new gt("DebugScopesContext")},{_:gt.EditorContext=new gt("EditorContext")},{_:gt.SimpleEditorContext=new gt("SimpleEditorContext")},{_:gt.EditorContent=new gt("EditorContent")},{_:gt.EditorLineNumberContext=new gt("EditorLineNumberContext")},{_:gt.EditorContextCopy=new gt("EditorContextCopy")},{_:gt.EditorContextPeek=new gt("EditorContextPeek")},{_:gt.EditorContextShare=new gt("EditorContextShare")},{_:gt.EditorTitle=new gt("EditorTitle")},{_:gt.CompactWindowEditorTitle=new gt("CompactWindowEditorTitle")},{_:gt.EditorTitleRun=new gt("EditorTitleRun")},{_:gt.EditorTitleContext=new gt("EditorTitleContext")},{_:gt.EditorTitleContextShare=new gt("EditorTitleContextShare")},{_:gt.EmptyEditorGroup=new gt("EmptyEditorGroup")},{_:gt.EmptyEditorGroupContext=new gt("EmptyEditorGroupContext")},{_:gt.EditorTabsBarContext=new gt("EditorTabsBarContext")},{_:gt.EditorTabsBarShowTabsSubmenu=new gt("EditorTabsBarShowTabsSubmenu")},{_:gt.EditorTabsBarShowTabsZenModeSubmenu=new gt("EditorTabsBarShowTabsZenModeSubmenu")},{_:gt.EditorActionsPositionSubmenu=new gt("EditorActionsPositionSubmenu")},{_:gt.EditorSplitMoveSubmenu=new gt("EditorSplitMoveSubmenu")},{_:gt.ExplorerContext=new gt("ExplorerContext")},{_:gt.ExplorerContextShare=new gt("ExplorerContextShare")},{_:gt.ExtensionContext=new gt("ExtensionContext")},{_:gt.ExtensionEditorContextMenu=new gt("ExtensionEditorContextMenu")},{_:gt.GlobalActivity=new gt("GlobalActivity")},{_:gt.CommandCenter=new gt("CommandCenter")},{_:gt.CommandCenterCenter=new gt("CommandCenterCenter")},{_:gt.LayoutControlMenuSubmenu=new gt("LayoutControlMenuSubmenu")},{_:gt.LayoutControlMenu=new gt("LayoutControlMenu")},{_:gt.MenubarMainMenu=new gt("MenubarMainMenu")},{_:gt.MenubarAppearanceMenu=new gt("MenubarAppearanceMenu")},{_:gt.MenubarDebugMenu=new gt("MenubarDebugMenu")},{_:gt.MenubarEditMenu=new gt("MenubarEditMenu")},{_:gt.MenubarCopy=new gt("MenubarCopy")},{_:gt.MenubarFileMenu=new gt("MenubarFileMenu")},{_:gt.MenubarGoMenu=new gt("MenubarGoMenu")},{_:gt.MenubarHelpMenu=new gt("MenubarHelpMenu")},{_:gt.MenubarLayoutMenu=new gt("MenubarLayoutMenu")},{_:gt.MenubarNewBreakpointMenu=new gt("MenubarNewBreakpointMenu")},{_:gt.PanelAlignmentMenu=new gt("PanelAlignmentMenu")},{_:gt.PanelPositionMenu=new gt("PanelPositionMenu")},{_:gt.ActivityBarPositionMenu=new gt("ActivityBarPositionMenu")},{_:gt.MenubarPreferencesMenu=new gt("MenubarPreferencesMenu")},{_:gt.MenubarRecentMenu=new gt("MenubarRecentMenu")},{_:gt.MenubarSelectionMenu=new gt("MenubarSelectionMenu")},{_:gt.MenubarShare=new gt("MenubarShare")},{_:gt.MenubarSwitchEditorMenu=new gt("MenubarSwitchEditorMenu")},{_:gt.MenubarSwitchGroupMenu=new gt("MenubarSwitchGroupMenu")},{_:gt.MenubarTerminalMenu=new gt("MenubarTerminalMenu")},{_:gt.MenubarTerminalSuggestStatusMenu=new gt("MenubarTerminalSuggestStatusMenu")},{_:gt.MenubarViewMenu=new gt("MenubarViewMenu")},{_:gt.MenubarHomeMenu=new gt("MenubarHomeMenu")},{_:gt.OpenEditorsContext=new gt("OpenEditorsContext")},{_:gt.OpenEditorsContextShare=new gt("OpenEditorsContextShare")},{_:gt.ProblemsPanelContext=new gt("ProblemsPanelContext")},{_:gt.SCMInputBox=new gt("SCMInputBox")},{_:gt.SCMChangeContext=new gt("SCMChangeContext")},{_:gt.SCMResourceContext=new gt("SCMResourceContext")},{_:gt.SCMResourceContextShare=new gt("SCMResourceContextShare")},{_:gt.SCMResourceFolderContext=new gt("SCMResourceFolderContext")},{_:gt.SCMResourceGroupContext=new gt("SCMResourceGroupContext")},{_:gt.SCMSourceControl=new gt("SCMSourceControl")},{_:gt.SCMSourceControlInline=new gt("SCMSourceControlInline")},{_:gt.SCMSourceControlTitle=new gt("SCMSourceControlTitle")},{_:gt.SCMHistoryTitle=new gt("SCMHistoryTitle")},{_:gt.SCMHistoryItemContext=new gt("SCMHistoryItemContext")},{_:gt.SCMHistoryItemChangeContext=new gt("SCMHistoryItemChangeContext")},{_:gt.SCMHistoryItemRefContext=new gt("SCMHistoryItemRefContext")},{_:gt.SCMArtifactGroupContext=new gt("SCMArtifactGroupContext")},{_:gt.SCMArtifactContext=new gt("SCMArtifactContext")},{_:gt.SCMQuickDiffDecorations=new gt("SCMQuickDiffDecorations")},{_:gt.SCMTitle=new gt("SCMTitle")},{_:gt.SearchContext=new gt("SearchContext")},{_:gt.SearchActionMenu=new gt("SearchActionContext")},{_:gt.StatusBarWindowIndicatorMenu=new gt("StatusBarWindowIndicatorMenu")},{_:gt.StatusBarRemoteIndicatorMenu=new gt("StatusBarRemoteIndicatorMenu")},{_:gt.StickyScrollContext=new gt("StickyScrollContext")},{_:gt.TestItem=new gt("TestItem")},{_:gt.TestItemGutter=new gt("TestItemGutter")},{_:gt.TestProfilesContext=new gt("TestProfilesContext")},{_:gt.TestMessageContext=new gt("TestMessageContext")},{_:gt.TestMessageContent=new gt("TestMessageContent")},{_:gt.TestPeekElement=new gt("TestPeekElement")},{_:gt.TestPeekTitle=new gt("TestPeekTitle")},{_:gt.TestCallStack=new gt("TestCallStack")},{_:gt.TestCoverageFilterItem=new gt("TestCoverageFilterItem")},{_:gt.TouchBarContext=new gt("TouchBarContext")},{_:gt.TitleBar=new gt("TitleBar")},{_:gt.TitleBarContext=new gt("TitleBarContext")},{_:gt.TitleBarTitleContext=new gt("TitleBarTitleContext")},{_:gt.TunnelContext=new gt("TunnelContext")},{_:gt.TunnelPrivacy=new gt("TunnelPrivacy")},{_:gt.TunnelProtocol=new gt("TunnelProtocol")},{_:gt.TunnelPortInline=new gt("TunnelInline")},{_:gt.TunnelTitle=new gt("TunnelTitle")},{_:gt.TunnelLocalAddressInline=new gt("TunnelLocalAddressInline")},{_:gt.TunnelOriginInline=new gt("TunnelOriginInline")},{_:gt.ViewItemContext=new gt("ViewItemContext")},{_:gt.ViewContainerTitle=new gt("ViewContainerTitle")},{_:gt.ViewContainerTitleContext=new gt("ViewContainerTitleContext")},{_:gt.ViewTitle=new gt("ViewTitle")},{_:gt.ViewTitleContext=new gt("ViewTitleContext")},{_:gt.CommentEditorActions=new gt("CommentEditorActions")},{_:gt.CommentThreadTitle=new gt("CommentThreadTitle")},{_:gt.CommentThreadActions=new gt("CommentThreadActions")},{_:gt.CommentThreadAdditionalActions=new gt("CommentThreadAdditionalActions")},{_:gt.CommentThreadTitleContext=new gt("CommentThreadTitleContext")},{_:gt.CommentThreadCommentContext=new gt("CommentThreadCommentContext")},{_:gt.CommentTitle=new gt("CommentTitle")},{_:gt.CommentActions=new gt("CommentActions")},{_:gt.CommentsViewThreadActions=new gt("CommentsViewThreadActions")},{_:gt.InteractiveToolbar=new gt("InteractiveToolbar")},{_:gt.InteractiveCellTitle=new gt("InteractiveCellTitle")},{_:gt.InteractiveCellDelete=new gt("InteractiveCellDelete")},{_:gt.InteractiveCellExecute=new gt("InteractiveCellExecute")},{_:gt.InteractiveInputExecute=new gt("InteractiveInputExecute")},{_:gt.InteractiveInputConfig=new gt("InteractiveInputConfig")},{_:gt.ReplInputExecute=new gt("ReplInputExecute")},{_:gt.IssueReporter=new gt("IssueReporter")},{_:gt.NotebookToolbar=new gt("NotebookToolbar")},{_:gt.NotebookToolbarContext=new gt("NotebookToolbarContext")},{_:gt.NotebookStickyScrollContext=new gt("NotebookStickyScrollContext")},{_:gt.NotebookCellTitle=new gt("NotebookCellTitle")},{_:gt.NotebookCellDelete=new gt("NotebookCellDelete")},{_:gt.NotebookCellInsert=new gt("NotebookCellInsert")},{_:gt.NotebookCellBetween=new gt("NotebookCellBetween")},{_:gt.NotebookCellListTop=new gt("NotebookCellTop")},{_:gt.NotebookCellExecute=new gt("NotebookCellExecute")},{_:gt.NotebookCellExecuteGoTo=new gt("NotebookCellExecuteGoTo")},{_:gt.NotebookCellExecutePrimary=new gt("NotebookCellExecutePrimary")},{_:gt.NotebookDiffCellInputTitle=new gt("NotebookDiffCellInputTitle")},{_:gt.NotebookDiffDocumentMetadata=new gt("NotebookDiffDocumentMetadata")},{_:gt.NotebookDiffCellMetadataTitle=new gt("NotebookDiffCellMetadataTitle")},{_:gt.NotebookDiffCellOutputsTitle=new gt("NotebookDiffCellOutputsTitle")},{_:gt.NotebookOutputToolbar=new gt("NotebookOutputToolbar")},{_:gt.NotebookOutlineFilter=new gt("NotebookOutlineFilter")},{_:gt.NotebookOutlineActionMenu=new gt("NotebookOutlineActionMenu")},{_:gt.NotebookEditorLayoutConfigure=new gt("NotebookEditorLayoutConfigure")},{_:gt.NotebookKernelSource=new gt("NotebookKernelSource")},{_:gt.BulkEditTitle=new gt("BulkEditTitle")},{_:gt.BulkEditContext=new gt("BulkEditContext")},{_:gt.TimelineItemContext=new gt("TimelineItemContext")},{_:gt.TimelineTitle=new gt("TimelineTitle")},{_:gt.TimelineTitleContext=new gt("TimelineTitleContext")},{_:gt.TimelineFilterSubMenu=new gt("TimelineFilterSubMenu")},{_:gt.AccountsContext=new gt("AccountsContext")},{_:gt.SidebarTitle=new gt("SidebarTitle")},{_:gt.PanelTitle=new gt("PanelTitle")},{_:gt.AuxiliaryBarTitle=new gt("AuxiliaryBarTitle")},{_:gt.TerminalInstanceContext=new gt("TerminalInstanceContext")},{_:gt.TerminalEditorInstanceContext=new gt("TerminalEditorInstanceContext")},{_:gt.TerminalNewDropdownContext=new gt("TerminalNewDropdownContext")},{_:gt.TerminalTabContext=new gt("TerminalTabContext")},{_:gt.TerminalTabEmptyAreaContext=new gt("TerminalTabEmptyAreaContext")},{_:gt.TerminalStickyScrollContext=new gt("TerminalStickyScrollContext")},{_:gt.WebviewContext=new gt("WebviewContext")},{_:gt.InlineCompletionsActions=new gt("InlineCompletionsActions")},{_:gt.InlineEditsActions=new gt("InlineEditsActions")},{_:gt.NewFile=new gt("NewFile")},{_:gt.MergeInput1Toolbar=new gt("MergeToolbar1Toolbar")},{_:gt.MergeInput2Toolbar=new gt("MergeToolbar2Toolbar")},{_:gt.MergeBaseToolbar=new gt("MergeBaseToolbar")},{_:gt.MergeInputResultToolbar=new gt("MergeToolbarResultToolbar")},{_:gt.InlineSuggestionToolbar=new gt("InlineSuggestionToolbar")},{_:gt.InlineEditToolbar=new gt("InlineEditToolbar")},{_:gt.ChatContext=new gt("ChatContext")},{_:gt.ChatCodeBlock=new gt("ChatCodeblock")},{_:gt.ChatCompareBlock=new gt("ChatCompareBlock")},{_:gt.ChatMessageTitle=new gt("ChatMessageTitle")},{_:gt.ChatWelcomeContext=new gt("ChatWelcomeContext")},{_:gt.ChatMessageFooter=new gt("ChatMessageFooter")},{_:gt.ChatExecute=new gt("ChatExecute")},{_:gt.ChatInput=new gt("ChatInput")},{_:gt.ChatInputSide=new gt("ChatInputSide")},{_:gt.ChatModePicker=new gt("ChatModePicker")},{_:gt.ChatEditingWidgetToolbar=new gt("ChatEditingWidgetToolbar")},{_:gt.ChatEditingSessionChangesToolbar=new gt("ChatEditingSessionChangesToolbar")},{_:gt.ChatEditingEditorContent=new gt("ChatEditingEditorContent")},{_:gt.ChatEditingEditorHunk=new gt("ChatEditingEditorHunk")},{_:gt.ChatEditingDeletedNotebookCell=new gt("ChatEditingDeletedNotebookCell")},{_:gt.ChatInputAttachmentToolbar=new gt("ChatInputAttachmentToolbar")},{_:gt.ChatEditingWidgetModifiedFilesToolbar=new gt("ChatEditingWidgetModifiedFilesToolbar")},{_:gt.ChatInputResourceAttachmentContext=new gt("ChatInputResourceAttachmentContext")},{_:gt.ChatInputSymbolAttachmentContext=new gt("ChatInputSymbolAttachmentContext")},{_:gt.ChatInlineResourceAnchorContext=new gt("ChatInlineResourceAnchorContext")},{_:gt.ChatInlineSymbolAnchorContext=new gt("ChatInlineSymbolAnchorContext")},{_:gt.ChatMessageCheckpoint=new gt("ChatMessageCheckpoint")},{_:gt.ChatMessageRestoreCheckpoint=new gt("ChatMessageRestoreCheckpoint")},{_:gt.ChatNewMenu=new gt("ChatNewMenu")},{_:gt.ChatEditingCodeBlockContext=new gt("ChatEditingCodeBlockContext")},{_:gt.ChatTitleBarMenu=new gt("ChatTitleBarMenu")},{_:gt.ChatAttachmentsContext=new gt("ChatAttachmentsContext")},{_:gt.ChatToolOutputResourceToolbar=new gt("ChatToolOutputResourceToolbar")},{_:gt.ChatTextEditorMenu=new gt("ChatTextEditorMenu")},{_:gt.ChatToolOutputResourceContext=new gt("ChatToolOutputResourceContext")},{_:gt.ChatMultiDiffContext=new gt("ChatMultiDiffContext")},{_:gt.ChatConfirmationMenu=new gt("ChatConfirmationMenu")},{_:gt.ChatEditorInlineExecute=new gt("ChatEditorInputExecute")},{_:gt.ChatEditorInlineInputSide=new gt("ChatEditorInputSide")},{_:gt.AccessibleView=new gt("AccessibleView")},{_:gt.MultiDiffEditorContent=new gt("MultiDiffEditorContent")},{_:gt.MultiDiffEditorFileToolbar=new gt("MultiDiffEditorFileToolbar")},{_:gt.DiffEditorHunkToolbar=new gt("DiffEditorHunkToolbar")},{_:gt.DiffEditorSelectionToolbar=new gt("DiffEditorSelectionToolbar")},{_:gt.AgentSessionsViewerFilterSubMenu=new gt("AgentSessionsViewerFilterSubMenu")},{_:gt.AgentSessionsInstallMenu=new gt("AgentSessionsInstallMenu")},{_:gt.AgentSessionsContext=new gt("AgentSessionsContext")},{_:gt.AgentSessionsCreateSubMenu=new gt("AgentSessionsCreateSubMenu")},{_:gt.AgentSessionsToolbar=new gt("AgentSessionsToolbar")},{_:gt.AgentSessionItemToolbar=new gt("AgentSessionItemToolbar")},{_:gt.ChatViewSessionTitleNavigationToolbar=new gt("ChatViewSessionTitleNavigationToolbar")},{_:gt.ChatViewSessionTitleToolbar=new gt("ChatViewSessionTitleToolbar")},{_:gt.AgentSessionsViewTitle=new gt("AgentSessionsViewTitle")},{_:gt.AgentSessionsFilterSubMenu=new gt("AgentSessionsFilterSubMenu")},gt),$D=(pt=class e{static for(t){let i=this._all.get(t);return i||(i=new e(t),this._all.set(t,i)),i}static merge(t){let i=new Set;for(let n of t)n instanceof e&&i.add(n.id);return i}constructor(e){this.id=e,this.has=t=>t===e}},{_:pt._all=new Map},pt),XD=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new Uo({merge:$D.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}addCommand(e){return this._commands.set(e.id,e),this._onDidChangeMenu.fire($D.for(QD.CommandPalette)),vo(()=>{this._commands.delete(e.id)&&this._onDidChangeMenu.fire($D.for(QD.CommandPalette))})}getCommand(e){return this._commands.get(e)}getCommands(){let e=new Map;return this._commands.forEach((t,i)=>e.set(i,t)),e}appendMenuItem(e,t){let i=this._menuItems.get(e);i||(i=new Eo,this._menuItems.set(e,i));let n=i.push(t);return this._onDidChangeMenu.fire($D.for(e)),vo(()=>{n(),this._onDidChangeMenu.fire($D.for(e))})}appendMenuItems(e){let t=new bo;for(let{id:i,item:n}of e)t.add(this.appendMenuItem(i,n));return t}getMenuItems(e){let t;return t=this._menuItems.has(e)?[...this._menuItems.get(e)]:[],e===QD.CommandPalette&&this._appendImplicitItems(t),t}_appendImplicitItems(e){let t=new Set;for(let i of e)YD(i)&&(t.add(i.command.id),i.alt&&t.add(i.alt.id));this._commands.forEach((i,n)=>{t.has(n)||e.push({command:i})})}},ZD=class extends qD{constructor(e,t,i){super("submenuitem.".concat(e.submenu.id),"string"==typeof e.title?e.title:e.title.value,i,"submenu"),this.item=e,this.hideActions=t}},JD=WD=class{static label(e,t){return null!==t&&void 0!==t&&t.renderShortTitle&&e.shortTitle?"string"==typeof e.shortTitle?e.shortTitle:e.shortTitle.value:"string"==typeof e.title?e.title:e.title.value}constructor(e,t,i,n,s,r,o){var a,l;let h;if(this.hideActions=n,this.menuKeybinding=s,this._commandService=o,this.id=e.id,this.label=WD.label(e,i),this.tooltip=null!==(a="string"==typeof e.tooltip?e.tooltip:null===(l=e.tooltip)||void 0===l?void 0:l.value)&&void 0!==a?a:"",this.enabled=!e.precondition||r.contextMatchesRules(e.precondition),this.checked=void 0,e.toggled){let t=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=r.contextMatchesRules(t.condition),this.checked&&t.tooltip&&(this.tooltip="string"==typeof t.tooltip?t.tooltip:t.tooltip.value),this.checked&&yf.isThemeIcon(t.icon)&&(h=t.icon),this.checked&&t.title&&(this.label="string"==typeof t.title?t.title:t.title.value)}h||(h=yf.isThemeIcon(e.icon)?e.icon:void 0),this.item=e,this.alt=t?new WD(t,void 0,i,n,void 0,r,o):void 0,this._options=i,this.class=h&&yf.asClassName(h)}run(){var e,t;let i=[];for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return null!==(e=this._options)&&void 0!==e&&e.arg&&(i=[...i,this._options.arg]),null!==(t=this._options)&&void 0!==t&&t.shouldForwardArgs&&(i=[...i,...s]),this._commandService.executeCommand(this.id,...i)}};JD=WD=ki([Ei(5,AS),Ei(6,LD)],JD);var eT=class{constructor(e){this.desc=e}};function tT(e){var t;let i=[],s=new e,o=s.desc,{f1:a,menu:l,keybinding:h}=o,c=(0,n.A)(o,d);if(AD.getCommand(c.id))throw Error("Cannot register two commands with the same id: ".concat(c.id));if(i.push(AD.registerCommand({id:c.id,handler:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return s.run(e,...i)},metadata:null!==(t=c.metadata)&&void 0!==t?t:{description:s.desc.title}})),Array.isArray(l))for(let n of l)i.push(XD.appendMenuItem(n.id,(0,r.A)({command:(0,r.A)((0,r.A)({},c),{},{precondition:null===n.precondition?void 0:c.precondition})},n)));else l&&i.push(XD.appendMenuItem(l.id,(0,r.A)({command:(0,r.A)((0,r.A)({},c),{},{precondition:null===l.precondition?void 0:c.precondition})},l)));if(a&&(i.push(XD.appendMenuItem(QD.CommandPalette,{command:c,when:c.precondition})),i.push(XD.addCommand(c))),Array.isArray(h))for(let n of h)i.push(ND.registerKeybindingRule((0,r.A)((0,r.A)({},n),{},{id:c.id,when:c.precondition?Dk.and(c.precondition,n.when):n.when})));else h&&i.push(ND.registerKeybindingRule((0,r.A)((0,r.A)({},h),{},{id:c.id,when:c.precondition?Dk.and(c.precondition,h.when):h.when})));return{dispose(){po(i)}}}var iT,nT=fn("quickInputService"),sT=fn("IInlineCompletionsService"),rT=new jk("inlineCompletions.snoozed",!1,Li(145,"Whether inline completions are currently snoozed")),oT=(ft=class extends Co{get snoozeTimeLeft(){return void 0===this._snoozeTimeEnd?0:Math.max(0,this._snoozeTimeEnd-Date.now())}constructor(e,t){super(),this._contextKeyService=e,this._telemetryService=t,this._onDidChangeIsSnoozing=this._register(new Ro),this.onDidChangeIsSnoozing=this._onDidChangeIsSnoozing.event,this._snoozeTimeEnd=void 0,this._recentCompletionIds=[],this._timer=this._register(new Fl);let i=rT.bindTo(this._contextKeyService);this._register(this.onDidChangeIsSnoozing(()=>i.set(this.isSnoozing())))}snooze(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iT.SNOOZE_DURATION;this.setSnoozeDuration(e+this.snoozeTimeLeft)}setSnoozeDuration(e){if(e<0)throw new qi("Invalid snooze duration: ".concat(e,". Duration must be non-negative."));if(0===e)return void this.cancelSnooze();let t=this.isSnoozing(),i=this.snoozeTimeLeft;this._snoozeTimeEnd=Date.now()+e,t||this._onDidChangeIsSnoozing.fire(!0),this._timer.cancelAndSet(()=>{if(this.isSnoozing())throw new qi("Snooze timer did not fire as expected");this._onDidChangeIsSnoozing.fire(!1)},this.snoozeTimeLeft+1),this._reportSnooze(e-i,e)}isSnoozing(){return this.snoozeTimeLeft>0}cancelSnooze(){this.isSnoozing()&&(this._reportSnooze(-this.snoozeTimeLeft,0),this._snoozeTimeEnd=void 0,this._timer.cancel(),this._onDidChangeIsSnoozing.fire(!1))}reportNewCompletion(e){this._lastCompletionId=e,this._recentCompletionIds.unshift(e),this._recentCompletionIds.length>5&&this._recentCompletionIds.pop()}_reportSnooze(e,t){let i=Math.round(e/1e3),n=Math.round(t/1e3);this._telemetryService.publicLog2("inlineCompletions.snooze",{deltaSeconds:i,totalSeconds:n,lastCompletionId:this._lastCompletionId,recentCompletionIds:this._recentCompletionIds})}},{_:iT=ft},{_:ft.SNOOZE_DURATION=3e5},ft);oT=iT=ki([Ei(0,AS),Ei(1,kn)],oT);var aT="inlineCompletions.lastSnoozeDuration";mt=class e extends eT{constructor(){super({id:e.ID,title:Ni(146,"Snooze Inline Suggestions"),precondition:Dk.true(),f1:!0})}async run(e){let t,i=e.get(nT),n=e.get(sT),s=e.get(Sn);(arguments.length<=1?0:arguments.length-1)>0&&"number"==typeof(arguments.length<=1?void 0:arguments[1])&&(t=6e4*(arguments.length<=1?void 0:arguments[1])),t||(t=await this.getDurationFromUser(i,s)),t&&n.setSnoozeDuration(t)}async getDurationFromUser(e,t){let i=t.getNumber(aT,Vp.PROFILE,3e5),n=[{label:"1 minute",id:"1",value:6e4},{label:"5 minutes",id:"5",value:3e5},{label:"10 minutes",id:"10",value:6e5},{label:"15 minutes",id:"15",value:9e5},{label:"30 minutes",id:"30",value:18e5},{label:"60 minutes",id:"60",value:36e5}],s=await e.pick(n,{placeHolder:Li(147,"Select snooze duration for Inline Suggestions"),activeItem:n.find(e=>e.value===i)});if(s)return t.store(aT,s.value,Vp.PROFILE,zp.USER),s.value}},mt.ID="editor.action.inlineSuggest.snooze",vt=class e extends eT{constructor(){super({id:e.ID,title:Ni(148,"Cancel Snooze Inline Suggestions"),precondition:rT,f1:!0})}async run(e){e.get(sT).cancelSnooze()}},vt.ID="editor.action.inlineSuggest.cancelSnooze";var lT=class{constructor(e){this.metadata=e}static convert(e){return e.edits.map(e=>{if(hT.is(e))return hT.lift(e);if(dT.is(e))return dT.lift(e);throw Error("Unsupported edit")})}},hT=class e extends lT{static is(t){return t instanceof e||Xi(t)&&Gs.isUri(t.resource)&&Xi(t.textEdit)}static lift(t){return t instanceof e?t:new e(t.resource,t.textEdit,t.versionId,t.metadata)}constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;super(arguments.length>3?arguments[3]:void 0),this.resource=e,this.textEdit=t,this.versionId=i}},dT=class e extends lT{static is(t){return t instanceof e||Xi(t)&&(!!t.newResource||!!t.oldResource)}static lift(t){return t instanceof e?t:new e(t.oldResource,t.newResource,t.options,t.metadata)}constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(arguments.length>3?arguments[3]:void 0),this.oldResource=e,this.newResource=t,this.options=i}},cT=fn("IWorkspaceEditService"),uT=!0,gT=!0,pT=!0,fT=5e3,mT=50,vT=!0,_T=!0,bT=!1,CT="inherit",yT="advanced",wT={showMoves:!1,showEmptyDecorations:!0,useTrueInlineView:!1},ST={enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},kT=900,ET=!0,DT=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new Ro,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(e){e=Math.min(Math.max(-5,e),20),this._zoomLevel!==e&&(this._zoomLevel=e,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},TT=qn?1.5:1.35,IT=class e{static _create(t,i,n,s,r,o,a,l,h){0===o?o=TT*n:o<8&&(o*=n),(o=Math.round(o))<8&&(o=8);let d=1+(h?0:.1*DT.getZoomLevel());return n*=d,o*=d,"translate"===r&&("normal"===i||"bold"===i?r=LT:(r="'wght' ".concat(parseInt(i,10)),i="normal")),new e({pixelRatio:l,fontFamily:t,fontWeight:i,fontSize:n,fontFeatureSettings:s,fontVariationSettings:r,lineHeight:o,letterSpacing:a})}constructor(e){this._bareFontInfoBrand=void 0,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.fontVariationSettings=e.fontVariationSettings,this.lineHeight=0|e.lineHeight,this.letterSpacing=e.letterSpacing}getId(){return"".concat(this.pixelRatio,"-").concat(this.fontFamily,"-").concat(this.fontWeight,"-").concat(this.fontSize,"-").concat(this.fontFeatureSettings,"-").concat(this.fontVariationSettings,"-").concat(this.lineHeight,"-").concat(this.letterSpacing)}getMassagedFontFamily(){let t=AT.fontFamily,i=e._wrapInQuotes(this.fontFamily);return this.fontFamily===t?i:"".concat(i,", ").concat(t)}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?'"'.concat(e,'"'):e}},xT=class extends IT{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=2,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.fontVariationSettings===e.fontVariationSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}},LT="normal",AT={fontFamily:qn?"Menlo, Monaco, 'Courier New', monospace":Kn?"Consolas, 'Courier New', monospace":"'Droid Sans Mono', 'monospace', monospace",fontWeight:"normal",fontSize:qn?12:14,lineHeight:0,letterSpacing:0},NT={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}},FT="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";var OT=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="(-?\\d*\\.\\d\\w*)|([^";for(let i of FT)e.indexOf(i)>=0||(t+="\\"+i);return t+="\\s]+)",new RegExp(t,"g")}();function RT(e){let t=OT;if(e&&e instanceof RegExp)if(e.global)t=e;else{let i="g";e.ignoreCase&&(i+="i"),e.multiline&&(i+="m"),e.unicode&&(i+="u"),t=new RegExp(e.source,i)}return t.lastIndex=0,t}var MT,PT=new Eo;function BT(e,t,i,n,s){if(t=RT(t),s||(s=oo.first(PT)),i.length>s.maxLen){let r=e-s.maxLen/2;return r<0?r=0:n+=r,BT(e,t,i=i.substring(r,e+s.maxLen/2),n,s)}let r=Date.now(),o=e-1-n,a=-1,l=null;for(let h=1;!(Date.now()-r>=s.timeBudget);h++){let e=o-s.windowSize*h;t.lastIndex=Math.max(0,e);let n=UT(t,i,o,a);if(!n&&l||(l=n,e<=0))break;a=e}if(l){let e={word:l[0],startColumn:n+1+l.index,endColumn:n+1+l.index+l[0].length};return t.lastIndex=0,e}return null}function UT(e,t,i,n){let s;for(;s=e.exec(t);){let t=s.index||0;if(t<=i&&e.lastIndex>=i)return s;if(n>0&&t>n)return null}return null}PT.unshift({maxLen:1e3,windowSize:15,timeBudget:150}),function(e){e[e.Unknown=0]="Unknown",e[e.Disabled=1]="Disabled",e[e.Enabled=2]="Enabled"}(MT||(MT={}));var HT,WT=new jk("accessibilityModeEnabled",!1);!function(e){e[e.None=0]="None",e[e.Keep=1]="Keep",e[e.Brackets=2]="Brackets",e[e.Advanced=3]="Advanced",e[e.Full=4]="Full"}(HT||(HT={}));var VT=class{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}},zT=class{constructor(e,t,i,n){this.id=e,this.name=t,this.defaultValue=i,this.schema=n}applyUpdate(e,t){return qT(e,t)}compute(e,t,i){return i}},KT=class{constructor(e,t){this.newValue=e,this.didChange=t}};function qT(e,t){if("object"!=typeof e||"object"!=typeof t||!e||!t)return new KT(t,e!==t);if(Array.isArray(e)||Array.isArray(t))return new KT(t,!(Array.isArray(e)&&Array.isArray(t)&&Mr(e,t)));let i=!1;for(let n in t)if(t.hasOwnProperty(n)){let s=qT(e[n],t[n]);s.didChange&&(e[n]=s.newValue,i=!0)}return new KT(e,i)}var GT=class{constructor(e,t){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=t}applyUpdate(e,t){return qT(e,t)}validate(e){return this.defaultValue}},jT=class{constructor(e,t,i,n){this.id=e,this.name=t,this.defaultValue=i,this.schema=n}applyUpdate(e,t){return qT(e,t)}compute(e,t,i){return i}};function YT(e,t){return void 0===e?t:"false"!==e&&!!e}var QT=class extends jT{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;void 0!==n&&(n.type="boolean",n.default=i),super(e,t,i,n)}validate(e){return YT(e,this.defaultValue)}};function $T(e,t,i,n){if("string"==typeof e&&(e=parseInt(e,10)),"number"!=typeof e||isNaN(e))return t;let s=e;return s=Math.max(i,s),s=Math.min(n,s),0|s}var XT=class e extends jT{static clampedInt(e,t,i,n){return $T(e,t,i,n)}constructor(e,t,i,n,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;void 0!==r&&(r.type="integer",r.default=i,r.minimum=n,r.maximum=s),super(e,t,i,r),this.minimum=n,this.maximum=s}validate(t){return e.clampedInt(t,this.defaultValue,this.minimum,this.maximum)}},ZT=class e extends jT{static clamp(e,t,i){return e<t?t:e>i?i:e}static float(e,t){return"string"==typeof e&&(e=parseFloat(e)),"number"!=typeof e||isNaN(e)?t:e}constructor(e,t,i,n,s,r,o){void 0!==s&&(s.type="number",s.default=i,s.minimum=r,s.maximum=o),super(e,t,i,s),this.validationFn=n,this.minimum=r,this.maximum=o}validate(t){return this.validationFn(e.float(t,this.defaultValue))}},JT=class e extends jT{static string(e,t){return"string"==typeof e?e:t}constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;void 0!==n&&(n.type="string",n.default=i),super(e,t,i,n)}validate(t){return e.string(t,this.defaultValue)}};function eI(e,t,i,n){return"string"==typeof e?n&&e in n?n[e]:-1===i.indexOf(e)?t:e:t}var tI=class extends jT{constructor(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;void 0!==s&&(s.type="string",s.enum=n.slice(0),s.default=i),super(e,t,i,s),this._allowedValues=n}validate(e){return eI(e,this.defaultValue,this._allowedValues)}},iI=class extends zT{constructor(e,t,i,n,s,r){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;void 0!==o&&(o.type="string",o.enum=s,o.default=n),super(e,t,i,o),this._allowedValues=s,this._convert=r}validate(e){return"string"!=typeof e||-1===this._allowedValues.indexOf(e)?this.defaultValue:this._convert(e)}};var nI,sI;function rI(e){switch(e){case"line":return sI.Line;case"block":return sI.Block;case"underline":return sI.Underline;case"line-thin":return sI.LineThin;case"block-outline":return sI.BlockOutline;case"underline-thin":return sI.UnderlineThin}}!function(e){e[e.Hidden=0]="Hidden",e[e.Blink=1]="Blink",e[e.Smooth=2]="Smooth",e[e.Phase=3]="Phase",e[e.Expand=4]="Expand",e[e.Solid=5]="Solid"}(nI||(nI={})),function(e){e[e.Line=1]="Line",e[e.Block=2]="Block",e[e.Underline=3]="Underline",e[e.LineThin=4]="LineThin",e[e.BlockOutline=5]="BlockOutline",e[e.UnderlineThin=6]="UnderlineThin"}(sI||(sI={}));var oI,aI=(_t=class e extends zT{constructor(){super(SI.fontLigatures,"fontLigatures",e.OFF,{anyOf:[{type:"boolean",description:Li(290,"Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:Li(291,"Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:Li(292,"Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(t){return void 0===t?this.defaultValue:"string"==typeof t?"false"===t||0===t.length?e.OFF:"true"===t?e.ON:t:t?e.ON:e.OFF}},{_:_t.OFF='"liga" off, "calt" off'},{_:_t.ON='"liga" on, "calt" on'},_t),lI=(bt=class e extends zT{constructor(){super(SI.fontVariations,"fontVariations",e.OFF,{anyOf:[{type:"boolean",description:Li(293,"Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:Li(294,"Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:Li(295,"Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(t){return void 0===t?this.defaultValue:"string"==typeof t?"false"===t?e.OFF:"true"===t?e.TRANSLATE:t:t?e.TRANSLATE:e.OFF}compute(e,t,i){return e.fontInfo.fontVariationSettings}},{_:bt.OFF=LT},{_:bt.TRANSLATE="translate"},bt),hI=(Ct=class e extends zT{constructor(){super(SI.fontWeight,"fontWeight",AT.fontWeight,{anyOf:[{type:"number",minimum:e.MINIMUM_VALUE,maximum:e.MAXIMUM_VALUE,errorMessage:Li(297,'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:e.SUGGESTION_VALUES}],default:AT.fontWeight,description:Li(298,'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(t){return"normal"===t||"bold"===t?t:String(XT.clampedInt(t,AT.fontWeight,e.MINIMUM_VALUE,e.MAXIMUM_VALUE))}},{_:Ct.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"]},{_:Ct.MINIMUM_VALUE=1},{_:Ct.MAXIMUM_VALUE=1e3},Ct);!function(e){e[e.None=0]="None",e[e.Text=1]="Text",e[e.Blocks=2]="Blocks"}(oI||(oI={}));var dI;!function(e){e.Off="off",e.OnCode="onCode",e.On="on"}(dI||(dI={}));var cI;!function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval",e[e.Custom=4]="Custom"}(cI||(cI={}));function uI(e,t){if("string"!=typeof e)return t;switch(e){case"hidden":return xE.Hidden;case"visible":return xE.Visible;default:return xE.Auto}}var gI="inUntrustedWorkspace",pI="editor.unicodeHighlight.allowedCharacters",fI="editor.unicodeHighlight.invisibleCharacters",mI="editor.unicodeHighlight.nonBasicASCII",vI="editor.unicodeHighlight.ambiguousCharacters",_I="editor.unicodeHighlight.includeComments",bI="editor.unicodeHighlight.includeStrings",CI="editor.unicodeHighlight.allowedLocales";function yI(e,t,i){let n=i.indexOf(e);return-1===n?t:i[n]}var wI;!function(e){e[e.None=0]="None",e[e.Same=1]="Same",e[e.Indent=2]="Indent",e[e.DeepIndent=3]="DeepIndent"}(wI||(wI={}));var SI,kI=[];function EI(e){return kI[e.id]=e,e}(function(e){e[e.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",e[e.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",e[e.accessibilitySupport=2]="accessibilitySupport",e[e.accessibilityPageSize=3]="accessibilityPageSize",e[e.allowOverflow=4]="allowOverflow",e[e.allowVariableLineHeights=5]="allowVariableLineHeights",e[e.allowVariableFonts=6]="allowVariableFonts",e[e.allowVariableFontsInAccessibilityMode=7]="allowVariableFontsInAccessibilityMode",e[e.ariaLabel=8]="ariaLabel",e[e.ariaRequired=9]="ariaRequired",e[e.autoClosingBrackets=10]="autoClosingBrackets",e[e.autoClosingComments=11]="autoClosingComments",e[e.screenReaderAnnounceInlineSuggestion=12]="screenReaderAnnounceInlineSuggestion",e[e.autoClosingDelete=13]="autoClosingDelete",e[e.autoClosingOvertype=14]="autoClosingOvertype",e[e.autoClosingQuotes=15]="autoClosingQuotes",e[e.autoIndent=16]="autoIndent",e[e.autoIndentOnPaste=17]="autoIndentOnPaste",e[e.autoIndentOnPasteWithinString=18]="autoIndentOnPasteWithinString",e[e.automaticLayout=19]="automaticLayout",e[e.autoSurround=20]="autoSurround",e[e.bracketPairColorization=21]="bracketPairColorization",e[e.guides=22]="guides",e[e.codeLens=23]="codeLens",e[e.codeLensFontFamily=24]="codeLensFontFamily",e[e.codeLensFontSize=25]="codeLensFontSize",e[e.colorDecorators=26]="colorDecorators",e[e.colorDecoratorsLimit=27]="colorDecoratorsLimit",e[e.columnSelection=28]="columnSelection",e[e.comments=29]="comments",e[e.contextmenu=30]="contextmenu",e[e.copyWithSyntaxHighlighting=31]="copyWithSyntaxHighlighting",e[e.cursorBlinking=32]="cursorBlinking",e[e.cursorSmoothCaretAnimation=33]="cursorSmoothCaretAnimation",e[e.cursorStyle=34]="cursorStyle",e[e.cursorSurroundingLines=35]="cursorSurroundingLines",e[e.cursorSurroundingLinesStyle=36]="cursorSurroundingLinesStyle",e[e.cursorWidth=37]="cursorWidth",e[e.cursorHeight=38]="cursorHeight",e[e.disableLayerHinting=39]="disableLayerHinting",e[e.disableMonospaceOptimizations=40]="disableMonospaceOptimizations",e[e.domReadOnly=41]="domReadOnly",e[e.dragAndDrop=42]="dragAndDrop",e[e.dropIntoEditor=43]="dropIntoEditor",e[e.editContext=44]="editContext",e[e.emptySelectionClipboard=45]="emptySelectionClipboard",e[e.experimentalGpuAcceleration=46]="experimentalGpuAcceleration",e[e.experimentalWhitespaceRendering=47]="experimentalWhitespaceRendering",e[e.extraEditorClassName=48]="extraEditorClassName",e[e.fastScrollSensitivity=49]="fastScrollSensitivity",e[e.find=50]="find",e[e.fixedOverflowWidgets=51]="fixedOverflowWidgets",e[e.folding=52]="folding",e[e.foldingStrategy=53]="foldingStrategy",e[e.foldingHighlight=54]="foldingHighlight",e[e.foldingImportsByDefault=55]="foldingImportsByDefault",e[e.foldingMaximumRegions=56]="foldingMaximumRegions",e[e.unfoldOnClickAfterEndOfLine=57]="unfoldOnClickAfterEndOfLine",e[e.fontFamily=58]="fontFamily",e[e.fontInfo=59]="fontInfo",e[e.fontLigatures=60]="fontLigatures",e[e.fontSize=61]="fontSize",e[e.fontWeight=62]="fontWeight",e[e.fontVariations=63]="fontVariations",e[e.formatOnPaste=64]="formatOnPaste",e[e.formatOnType=65]="formatOnType",e[e.glyphMargin=66]="glyphMargin",e[e.gotoLocation=67]="gotoLocation",e[e.hideCursorInOverviewRuler=68]="hideCursorInOverviewRuler",e[e.hover=69]="hover",e[e.inDiffEditor=70]="inDiffEditor",e[e.inlineSuggest=71]="inlineSuggest",e[e.letterSpacing=72]="letterSpacing",e[e.lightbulb=73]="lightbulb",e[e.lineDecorationsWidth=74]="lineDecorationsWidth",e[e.lineHeight=75]="lineHeight",e[e.lineNumbers=76]="lineNumbers",e[e.lineNumbersMinChars=77]="lineNumbersMinChars",e[e.linkedEditing=78]="linkedEditing",e[e.links=79]="links",e[e.matchBrackets=80]="matchBrackets",e[e.minimap=81]="minimap",e[e.mouseStyle=82]="mouseStyle",e[e.mouseWheelScrollSensitivity=83]="mouseWheelScrollSensitivity",e[e.mouseWheelZoom=84]="mouseWheelZoom",e[e.multiCursorMergeOverlapping=85]="multiCursorMergeOverlapping",e[e.multiCursorModifier=86]="multiCursorModifier",e[e.mouseMiddleClickAction=87]="mouseMiddleClickAction",e[e.multiCursorPaste=88]="multiCursorPaste",e[e.multiCursorLimit=89]="multiCursorLimit",e[e.occurrencesHighlight=90]="occurrencesHighlight",e[e.occurrencesHighlightDelay=91]="occurrencesHighlightDelay",e[e.overtypeCursorStyle=92]="overtypeCursorStyle",e[e.overtypeOnPaste=93]="overtypeOnPaste",e[e.overviewRulerBorder=94]="overviewRulerBorder",e[e.overviewRulerLanes=95]="overviewRulerLanes",e[e.padding=96]="padding",e[e.pasteAs=97]="pasteAs",e[e.parameterHints=98]="parameterHints",e[e.peekWidgetDefaultFocus=99]="peekWidgetDefaultFocus",e[e.placeholder=100]="placeholder",e[e.definitionLinkOpensInPeek=101]="definitionLinkOpensInPeek",e[e.quickSuggestions=102]="quickSuggestions",e[e.quickSuggestionsDelay=103]="quickSuggestionsDelay",e[e.readOnly=104]="readOnly",e[e.readOnlyMessage=105]="readOnlyMessage",e[e.renameOnType=106]="renameOnType",e[e.renderRichScreenReaderContent=107]="renderRichScreenReaderContent",e[e.renderControlCharacters=108]="renderControlCharacters",e[e.renderFinalNewline=109]="renderFinalNewline",e[e.renderLineHighlight=110]="renderLineHighlight",e[e.renderLineHighlightOnlyWhenFocus=111]="renderLineHighlightOnlyWhenFocus",e[e.renderValidationDecorations=112]="renderValidationDecorations",e[e.renderWhitespace=113]="renderWhitespace",e[e.revealHorizontalRightPadding=114]="revealHorizontalRightPadding",e[e.roundedSelection=115]="roundedSelection",e[e.rulers=116]="rulers",e[e.scrollbar=117]="scrollbar",e[e.scrollBeyondLastColumn=118]="scrollBeyondLastColumn",e[e.scrollBeyondLastLine=119]="scrollBeyondLastLine",e[e.scrollPredominantAxis=120]="scrollPredominantAxis",e[e.selectionClipboard=121]="selectionClipboard",e[e.selectionHighlight=122]="selectionHighlight",e[e.selectionHighlightMaxLength=123]="selectionHighlightMaxLength",e[e.selectionHighlightMultiline=124]="selectionHighlightMultiline",e[e.selectOnLineNumbers=125]="selectOnLineNumbers",e[e.showFoldingControls=126]="showFoldingControls",e[e.showUnused=127]="showUnused",e[e.snippetSuggestions=128]="snippetSuggestions",e[e.smartSelect=129]="smartSelect",e[e.smoothScrolling=130]="smoothScrolling",e[e.stickyScroll=131]="stickyScroll",e[e.stickyTabStops=132]="stickyTabStops",e[e.stopRenderingLineAfter=133]="stopRenderingLineAfter",e[e.suggest=134]="suggest",e[e.suggestFontSize=135]="suggestFontSize",e[e.suggestLineHeight=136]="suggestLineHeight",e[e.suggestOnTriggerCharacters=137]="suggestOnTriggerCharacters",e[e.suggestSelection=138]="suggestSelection",e[e.tabCompletion=139]="tabCompletion",e[e.tabIndex=140]="tabIndex",e[e.trimWhitespaceOnDelete=141]="trimWhitespaceOnDelete",e[e.unicodeHighlighting=142]="unicodeHighlighting",e[e.unusualLineTerminators=143]="unusualLineTerminators",e[e.useShadowDOM=144]="useShadowDOM",e[e.useTabStops=145]="useTabStops",e[e.wordBreak=146]="wordBreak",e[e.wordSegmenterLocales=147]="wordSegmenterLocales",e[e.wordSeparators=148]="wordSeparators",e[e.wordWrap=149]="wordWrap",e[e.wordWrapBreakAfterCharacters=150]="wordWrapBreakAfterCharacters",e[e.wordWrapBreakBeforeCharacters=151]="wordWrapBreakBeforeCharacters",e[e.wordWrapColumn=152]="wordWrapColumn",e[e.wordWrapOverride1=153]="wordWrapOverride1",e[e.wordWrapOverride2=154]="wordWrapOverride2",e[e.wrappingIndent=155]="wrappingIndent",e[e.wrappingStrategy=156]="wrappingStrategy",e[e.showDeprecated=157]="showDeprecated",e[e.inertialScroll=158]="inertialScroll",e[e.inlayHints=159]="inlayHints",e[e.wrapOnEscapedLineFeeds=160]="wrapOnEscapedLineFeeds",e[e.effectiveCursorStyle=161]="effectiveCursorStyle",e[e.editorClassName=162]="editorClassName",e[e.pixelRatio=163]="pixelRatio",e[e.tabFocusMode=164]="tabFocusMode",e[e.layoutInfo=165]="layoutInfo",e[e.wrappingInfo=166]="wrappingInfo",e[e.defaultColorDecorators=167]="defaultColorDecorators",e[e.colorDecoratorsActivatedOn=168]="colorDecoratorsActivatedOn",e[e.inlineCompletionsAccessibilityVerbose=169]="inlineCompletionsAccessibilityVerbose",e[e.effectiveEditContext=170]="effectiveEditContext",e[e.scrollOnMiddleClick=171]="scrollOnMiddleClick",e[e.effectiveAllowVariableFonts=172]="effectiveAllowVariableFonts"})(SI||(SI={})),EI(new QT(SI.acceptSuggestionOnCommitCharacter,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:Li(499,"Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),EI(new tI(SI.acceptSuggestionOnEnter,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",Li(500,"Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:Li(501,"Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),EI(new class extends zT{constructor(){super(SI.accessibilitySupport,"accessibilitySupport",MT.Unknown,{type:"string",enum:["auto","on","off"],enumDescriptions:[Li(264,"Use platform APIs to detect when a Screen Reader is attached."),Li(265,"Optimize for usage with a Screen Reader."),Li(266,"Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:Li(267,"Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(e){switch(e){case"auto":return MT.Unknown;case"off":return MT.Disabled;case"on":return MT.Enabled}return this.defaultValue}compute(e,t,i){return i===MT.Unknown?e.accessibilitySupport:i}}),EI(new XT(SI.accessibilityPageSize,"accessibilityPageSize",500,1,Zo.MAX_SAFE_SMALL_INTEGER,{description:Li(502,"Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),EI(new QT(SI.allowOverflow,"allowOverflow",!0)),EI(new QT(SI.allowVariableLineHeights,"allowVariableLineHeights",!0,{description:Li(503,"Controls whether to allow using variable line heights in the editor.")})),EI(new QT(SI.allowVariableFonts,"allowVariableFonts",!0,{description:Li(504,"Controls whether to allow using variable fonts in the editor.")})),EI(new QT(SI.allowVariableFontsInAccessibilityMode,"allowVariableFontsInAccessibilityMode",!1,{description:Li(505,"Controls whether to allow using variable fonts in the editor in the accessibility mode."),tags:["accessibility"]})),EI(new JT(SI.ariaLabel,"ariaLabel",Li(506,"Editor content"))),EI(new QT(SI.ariaRequired,"ariaRequired",!1,void 0)),EI(new QT(SI.screenReaderAnnounceInlineSuggestion,"screenReaderAnnounceInlineSuggestion",!0,{description:Li(507,"Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),EI(new tI(SI.autoClosingBrackets,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",Li(508,"Use language configurations to determine when to autoclose brackets."),Li(509,"Autoclose brackets only when the cursor is to the left of whitespace."),""],description:Li(510,"Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),EI(new tI(SI.autoClosingComments,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",Li(511,"Use language configurations to determine when to autoclose comments."),Li(512,"Autoclose comments only when the cursor is to the left of whitespace."),""],description:Li(513,"Controls whether the editor should automatically close comments after the user adds an opening comment.")})),EI(new tI(SI.autoClosingDelete,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",Li(514,"Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:Li(515,"Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),EI(new tI(SI.autoClosingOvertype,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",Li(516,"Type over closing quotes or brackets only if they were automatically inserted."),""],description:Li(517,"Controls whether the editor should type over closing quotes or brackets.")})),EI(new tI(SI.autoClosingQuotes,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",Li(518,"Use language configurations to determine when to autoclose quotes."),Li(519,"Autoclose quotes only when the cursor is to the left of whitespace."),""],description:Li(520,"Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),EI(new iI(SI.autoIndent,"autoIndent",HT.Full,"full",["none","keep","brackets","advanced","full"],function(e){switch(e){case"none":return HT.None;case"keep":return HT.Keep;case"brackets":return HT.Brackets;case"advanced":return HT.Advanced;case"full":return HT.Full}},{enumDescriptions:[Li(521,"The editor will not insert indentation automatically."),Li(522,"The editor will keep the current line's indentation."),Li(523,"The editor will keep the current line's indentation and honor language defined brackets."),Li(524,"The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),Li(525,"The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:Li(526,"Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),EI(new QT(SI.autoIndentOnPaste,"autoIndentOnPaste",!1,{description:Li(527,"Controls whether the editor should automatically auto-indent the pasted content.")})),EI(new QT(SI.autoIndentOnPasteWithinString,"autoIndentOnPasteWithinString",!0,{description:Li(528,"Controls whether the editor should automatically auto-indent the pasted content when pasted within a string. This takes effect when autoIndentOnPaste is true.")})),EI(new QT(SI.automaticLayout,"automaticLayout",!1)),EI(new tI(SI.autoSurround,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[Li(529,"Use language configurations to determine when to automatically surround selections."),Li(530,"Surround with quotes but not brackets."),Li(531,"Surround with brackets but not quotes."),""],description:Li(532,"Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),EI(new class extends zT{constructor(){let e={enabled:NT.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:NT.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(SI.bracketPairColorization,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:Li(419,"Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:Li(420,"Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;let t=e;return{enabled:YT(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:YT(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}),EI(new class extends zT{constructor(){let e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(SI.guides,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[Li(421,"Enables bracket pair guides."),Li(422,"Enables bracket pair guides only for the active bracket pair."),Li(423,"Disables bracket pair guides.")],default:e.bracketPairs,description:Li(424,"Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[Li(425,"Enables horizontal guides as addition to vertical bracket pair guides."),Li(426,"Enables horizontal guides only for the active bracket pair."),Li(427,"Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:Li(428,"Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:Li(429,"Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:Li(430,"Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[Li(431,"Highlights the active indent guide."),Li(432,"Highlights the active indent guide even if bracket guides are highlighted."),Li(433,"Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:Li(434,"Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;let t=e;return{bracketPairs:yI(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:yI(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:YT(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:YT(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:yI(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}),EI(new QT(SI.stickyTabStops,"stickyTabStops",!1,{description:Li(533,"Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),EI(new QT(SI.codeLens,"codeLens",!0,{description:Li(534,"Controls whether the editor shows CodeLens.")})),EI(new JT(SI.codeLensFontFamily,"codeLensFontFamily","",{description:Li(535,"Controls the font family for CodeLens.")})),EI(new XT(SI.codeLensFontSize,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:Li(536,"Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),EI(new QT(SI.colorDecorators,"colorDecorators",!0,{description:Li(537,"Controls whether the editor should render the inline color decorators and color picker.")})),EI(new tI(SI.colorDecoratorsActivatedOn,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[Li(538,"Make the color picker appear both on click and hover of the color decorator"),Li(539,"Make the color picker appear on hover of the color decorator"),Li(540,"Make the color picker appear on click of the color decorator")],description:Li(541,"Controls the condition to make a color picker appear from a color decorator.")})),EI(new XT(SI.colorDecoratorsLimit,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:Li(542,"Controls the max number of color decorators that can be rendered in an editor at once.")})),EI(new QT(SI.columnSelection,"columnSelection",!1,{description:Li(543,"Enable that the selection with the mouse and keys is doing column selection.")})),EI(new class extends zT{constructor(){let e={insertSpace:!0,ignoreEmptyLines:!0};super(SI.comments,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:Li(268,"Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:Li(269,"Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;let t=e;return{insertSpace:YT(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:YT(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}),EI(new QT(SI.contextmenu,"contextmenu",!0)),EI(new QT(SI.copyWithSyntaxHighlighting,"copyWithSyntaxHighlighting",!0,{description:Li(544,"Controls whether syntax highlighting should be copied into the clipboard.")})),EI(new iI(SI.cursorBlinking,"cursorBlinking",nI.Blink,"blink",["blink","smooth","phase","expand","solid"],function(e){switch(e){case"blink":return nI.Blink;case"smooth":return nI.Smooth;case"phase":return nI.Phase;case"expand":return nI.Expand;case"solid":return nI.Solid}},{description:Li(545,"Control the cursor animation style.")})),EI(new tI(SI.cursorSmoothCaretAnimation,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[Li(546,"Smooth caret animation is disabled."),Li(547,"Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),Li(548,"Smooth caret animation is always enabled.")],description:Li(549,"Controls whether the smooth caret animation should be enabled.")})),EI(new iI(SI.cursorStyle,"cursorStyle",sI.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],rI,{description:Li(550,"Controls the cursor style in insert input mode.")})),EI(new iI(SI.overtypeCursorStyle,"overtypeCursorStyle",sI.Block,"block",["line","block","underline","line-thin","block-outline","underline-thin"],rI,{description:Li(551,"Controls the cursor style in overtype input mode.")})),EI(new XT(SI.cursorSurroundingLines,"cursorSurroundingLines",0,0,Zo.MAX_SAFE_SMALL_INTEGER,{description:Li(552,"Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),EI(new tI(SI.cursorSurroundingLinesStyle,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[Li(553,"`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),Li(554,"`cursorSurroundingLines` is enforced always.")],markdownDescription:Li(555,"Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),EI(new XT(SI.cursorWidth,"cursorWidth",0,0,Zo.MAX_SAFE_SMALL_INTEGER,{markdownDescription:Li(556,"Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),EI(new XT(SI.cursorHeight,"cursorHeight",0,0,Zo.MAX_SAFE_SMALL_INTEGER,{markdownDescription:Li(557,"Controls the height of the cursor when `#editor.cursorStyle#` is set to `line`. Cursor's max height depends on line height.")})),EI(new QT(SI.disableLayerHinting,"disableLayerHinting",!1)),EI(new QT(SI.disableMonospaceOptimizations,"disableMonospaceOptimizations",!1)),EI(new QT(SI.domReadOnly,"domReadOnly",!1)),EI(new QT(SI.dragAndDrop,"dragAndDrop",!0,{description:Li(558,"Controls whether the editor should allow moving selections via drag and drop.")})),EI(new class extends QT{constructor(){super(SI.emptySelectionClipboard,"emptySelectionClipboard",!0,{description:Li(270,"Controls whether copying without a selection copies the current line.")})}compute(e,t,i){return i&&e.emptySelectionClipboard}}),EI(new class extends zT{constructor(){let e={enabled:!0,showDropSelector:"afterDrop"};super(SI.dropIntoEditor,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:Li(491,"Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:Li(492,"Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[Li(493,"Show the drop selector widget after a file is dropped into the editor."),Li(494,"Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;let t=e;return{enabled:YT(t.enabled,this.defaultValue.enabled),showDropSelector:eI(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}}),EI(new QT(SI.editContext,"editContext",!0,{description:Li(559,"Sets whether the EditContext API should be used instead of the text area to power input in the editor."),included:as||ds||jn})),EI(new QT(SI.renderRichScreenReaderContent,"renderRichScreenReaderContent",!1,{markdownDescription:Li(560,"Whether to render rich screen reader content when the `#editor.editContext#` setting is enabled.")})),EI(new class extends zT{constructor(){let e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(SI.stickyScroll,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:Li(328,"Shows the nested current scopes during the scroll at the top of the editor.")},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:Li(329,"Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:Li(330,"Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:Li(331,"Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;let t=e;return{enabled:YT(t.enabled,this.defaultValue.enabled),maxLineCount:XT.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:eI(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:YT(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}}),EI(new tI(SI.experimentalGpuAcceleration,"experimentalGpuAcceleration","off",["off","on"],{tags:["experimental"],enumDescriptions:[Li(561,"Use regular DOM-based rendering."),Li(562,"Use GPU acceleration.")],description:Li(563,"Controls whether to use the experimental GPU acceleration to render the editor.")})),EI(new tI(SI.experimentalWhitespaceRendering,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[Li(564,"Use a new rendering method with svgs."),Li(565,"Use a new rendering method with font characters."),Li(566,"Use the stable rendering method.")],description:Li(567,"Controls whether whitespace is rendered with a new, experimental method.")})),EI(new JT(SI.extraEditorClassName,"extraEditorClassName","")),EI(new ZT(SI.fastScrollSensitivity,"fastScrollSensitivity",5,e=>e<=0?5:e,{markdownDescription:Li(568,"Scrolling speed multiplier when pressing `Alt`.")})),EI(new class extends zT{constructor(){let e={cursorMoveOnType:!0,findOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0,history:"workspace",replaceHistory:"workspace"};super(SI.find,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:Li(271,"Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[Li(272,"Never seed search string from the editor selection."),Li(273,"Always seed search string from the editor selection, including word at cursor position."),Li(274,"Only seed search string from the editor selection.")],description:Li(275,"Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[Li(276,"Never turn on Find in Selection automatically (default)."),Li(277,"Always turn on Find in Selection automatically."),Li(278,"Turn on Find in Selection automatically when multiple lines of content are selected.")],description:Li(279,"Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:Li(280,"Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:qn},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:Li(281,"Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:Li(282,"Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")},"editor.find.history":{type:"string",enum:["never","workspace"],default:"workspace",enumDescriptions:[Li(283,"Do not store search history from the find widget."),Li(284,"Store search history across the active workspace")],description:Li(285,"Controls how the find widget history should be stored")},"editor.find.replaceHistory":{type:"string",enum:["never","workspace"],default:"workspace",enumDescriptions:[Li(286,"Do not store history from the replace widget."),Li(287,"Store replace history across the active workspace")],description:Li(288,"Controls how the replace widget history should be stored")},"editor.find.findOnType":{type:"boolean",default:e.findOnType,description:Li(289,"Controls whether the Find Widget should search as you type.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;let t=e;return{cursorMoveOnType:YT(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),findOnType:YT(t.findOnType,this.defaultValue.findOnType),seedSearchStringFromSelection:"boolean"==typeof t.seedSearchStringFromSelection?t.seedSearchStringFromSelection?"always":"never":eI(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:"boolean"==typeof t.autoFindInSelection?t.autoFindInSelection?"always":"never":eI(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:YT(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:YT(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:YT(t.loop,this.defaultValue.loop),history:eI(t.history,this.defaultValue.history,["never","workspace"]),replaceHistory:eI(t.replaceHistory,this.defaultValue.replaceHistory,["never","workspace"])}}}),EI(new QT(SI.fixedOverflowWidgets,"fixedOverflowWidgets",!1)),EI(new QT(SI.folding,"folding",!0,{description:Li(569,"Controls whether the editor has code folding enabled.")})),EI(new tI(SI.foldingStrategy,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[Li(570,"Use a language-specific folding strategy if available, else the indentation-based one."),Li(571,"Use the indentation-based folding strategy.")],description:Li(572,"Controls the strategy for computing folding ranges.")})),EI(new QT(SI.foldingHighlight,"foldingHighlight",!0,{description:Li(573,"Controls whether the editor should highlight folded ranges.")})),EI(new QT(SI.foldingImportsByDefault,"foldingImportsByDefault",!1,{description:Li(574,"Controls whether the editor automatically collapses import ranges.")})),EI(new XT(SI.foldingMaximumRegions,"foldingMaximumRegions",5e3,10,65e3,{description:Li(575,"The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),EI(new QT(SI.unfoldOnClickAfterEndOfLine,"unfoldOnClickAfterEndOfLine",!1,{description:Li(576,"Controls whether clicking on the empty content after a folded line will unfold the line.")})),EI(new JT(SI.fontFamily,"fontFamily",AT.fontFamily,{description:Li(577,"Controls the font family.")})),EI(new class extends GT{constructor(){super(SI.fontInfo,new xT({pixelRatio:0,fontFamily:"",fontWeight:"",fontSize:0,fontFeatureSettings:"",fontVariationSettings:"",lineHeight:0,letterSpacing:0,isMonospace:!1,typicalHalfwidthCharacterWidth:0,typicalFullwidthCharacterWidth:0,canUseHalfwidthRightwardsArrow:!1,spaceWidth:0,middotWidth:0,wsmiddotWidth:0,maxDigitWidth:0},!1))}compute(e,t,i){return e.fontInfo}}),EI(new aI),EI(new class extends jT{constructor(){super(SI.fontSize,"fontSize",AT.fontSize,{type:"number",minimum:6,maximum:100,default:AT.fontSize,description:Li(296,"Controls the font size in pixels.")})}validate(e){let t=ZT.float(e,this.defaultValue);return 0===t?AT.fontSize:ZT.clamp(t,6,100)}compute(e,t,i){return e.fontInfo.fontSize}}),EI(new hI),EI(new lI),EI(new QT(SI.formatOnPaste,"formatOnPaste",!1,{description:Li(578,"Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),EI(new QT(SI.formatOnType,"formatOnType",!1,{description:Li(579,"Controls whether the editor should automatically format the line after typing.")})),EI(new QT(SI.glyphMargin,"glyphMargin",!0,{description:Li(580,"Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),EI(new class extends zT{constructor(){let e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[Li(299,"Show Peek view of the results (default)"),Li(300,"Go to the primary result and show a Peek view"),Li(301,"Go to the primary result and enable Peek-less navigation to others")]},i=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(SI.gotoLocation,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:Li(302,"This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":(0,r.A)({description:Li(303,"Controls the behavior the 'Go to Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleTypeDefinitions":(0,r.A)({description:Li(304,"Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleDeclarations":(0,r.A)({description:Li(305,"Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleImplementations":(0,r.A)({description:Li(306,"Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleReferences":(0,r.A)({description:Li(307,"Controls the behavior the 'Go to References'-command when multiple target locations exist.")},t),"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:i,description:Li(308,"Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:i,description:Li(309,"Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:i,description:Li(310,"Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:i,description:Li(311,"Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:i,description:Li(312,"Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;let t=e;return{multiple:eI(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:eI(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:eI(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:eI(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:eI(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:eI(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:eI(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:JT.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:JT.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:JT.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:JT.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:JT.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:JT.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}}),EI(new QT(SI.hideCursorInOverviewRuler,"hideCursorInOverviewRuler",!1,{description:Li(581,"Controls whether the cursor should be hidden in the overview ruler.")})),EI(new class extends zT{constructor(){let e={enabled:"on",delay:300,hidingDelay:300,sticky:!0,above:!0};super(SI.hover,"hover",e,{"editor.hover.enabled":{type:"string",enum:["on","off","onKeyboardModifier"],default:e.enabled,markdownEnumDescriptions:[Li(313,"Hover is enabled."),Li(314,"Hover is disabled."),Li(315,"Hover is shown when holding `{0}` or `Alt` (the opposite modifier of `#editor.multiCursorModifier#`)",qn?"Command":"Control")],description:Li(316,"Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:Li(317,"Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:Li(318,"Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,markdownDescription:Li(319,"Controls the delay in milliseconds after which the hover is hidden. Requires `#editor.hover.sticky#` to be enabled.")},"editor.hover.above":{type:"boolean",default:e.above,description:Li(320,"Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;let t=e;return{enabled:eI(t.enabled,this.defaultValue.enabled,["on","off","onKeyboardModifier"]),delay:XT.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:YT(t.sticky,this.defaultValue.sticky),hidingDelay:XT.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:YT(t.above,this.defaultValue.above)}}}),EI(new QT(SI.inDiffEditor,"inDiffEditor",!1)),EI(new QT(SI.inertialScroll,"inertialScroll",!1,{description:Li(582,"Make scrolling inertial - mostly useful with touchpad on linux.")})),EI(new ZT(SI.letterSpacing,"letterSpacing",AT.letterSpacing,e=>ZT.clamp(e,-5,20),{description:Li(583,"Controls the letter spacing in pixels.")})),EI(new class extends zT{constructor(){let e={enabled:dI.OnCode};super(SI.lightbulb,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",enum:[dI.Off,dI.OnCode,dI.On],default:e.enabled,enumDescriptions:[Li(324,"Disable the code action menu."),Li(325,"Show the code action menu when the cursor is on lines with code."),Li(326,"Show the code action menu when the cursor is on lines with code or on empty lines.")],description:Li(327,"Enables the Code Action lightbulb in the editor.")}})}validate(e){return e&&"object"==typeof e?{enabled:eI(e.enabled,this.defaultValue.enabled,[dI.Off,dI.OnCode,dI.On])}:this.defaultValue}}),EI(new class extends zT{constructor(){super(SI.lineDecorationsWidth,"lineDecorationsWidth",10)}validate(e){return"string"==typeof e&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):XT.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,i){return i<0?XT.clampedInt(-i*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):i}}),EI(new class extends ZT{constructor(){super(SI.lineHeight,"lineHeight",AT.lineHeight,e=>ZT.clamp(e,0,150),{markdownDescription:Li(341,"Controls the line height. \n - Use 0 to automatically compute the line height from the font size.\n - Values between 0 and 8 will be used as a multiplier with the font size.\n - Values greater than or equal to 8 will be used as effective values.")},0,150)}compute(e,t,i){return e.fontInfo.lineHeight}}),EI(new class extends zT{constructor(){super(SI.lineNumbers,"lineNumbers",{renderType:cI.On,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[Li(372,"Line numbers are not rendered."),Li(373,"Line numbers are rendered as absolute number."),Li(374,"Line numbers are rendered as distance in lines to cursor position."),Li(375,"Line numbers are rendered every 10 lines.")],default:"on",description:Li(376,"Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,i=this.defaultValue.renderFn;return void 0!==e&&("function"==typeof e?(t=cI.Custom,i=e):t="interval"===e?cI.Interval:"relative"===e?cI.Relative:"on"===e?cI.On:cI.Off),{renderType:t,renderFn:i}}}),EI(new XT(SI.lineNumbersMinChars,"lineNumbersMinChars",5,1,300)),EI(new QT(SI.linkedEditing,"linkedEditing",!1,{description:Li(584,"Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),EI(new QT(SI.links,"links",!0,{description:Li(585,"Controls whether the editor should detect links and make them clickable.")})),EI(new tI(SI.matchBrackets,"matchBrackets","always",["always","near","never"],{description:Li(586,"Highlight matching brackets.")})),EI(new class extends zT{constructor(){let e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:"none",renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,markSectionHeaderRegex:"\\bMARK:\\s*(?<separator>-?)\\s*(?<label>.*)$",sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(SI.minimap,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:Li(342,"Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"string",enum:["none","mouseover","scroll"],enumDescriptions:[Li(343,"The minimap is always shown."),Li(344,"The minimap is hidden when mouse is not over the minimap and shown when mouse is over the minimap."),Li(345,"The minimap is only shown when the editor is scrolled")],default:e.autohide,description:Li(346,"Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[Li(347,"The minimap has the same size as the editor contents (and might scroll)."),Li(348,"The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),Li(349,"The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:Li(350,"Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:Li(351,"Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:Li(352,"Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:Li(353,"Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:Li(354,"Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:Li(355,"Limit the width of the minimap to render at most a certain number of columns.")},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:Li(356,"Controls whether named regions are shown as section headers in the minimap.")},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:Li(357,"Controls whether MARK: comments are shown as section headers in the minimap.")},"editor.minimap.markSectionHeaderRegex":{type:"string",default:e.markSectionHeaderRegex,description:Li(358,"Defines the regular expression used to find section headers in comments. The regex must contain a named match group `label` (written as `(?<label>.+)`) that encapsulates the section header, otherwise it will not work. Optionally you can include another match group named `separator`. Use \\n in the pattern to match multi-line headers.")},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:Li(359,"Controls the font size of section headers in the minimap.")},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:Li(360,"Controls the amount of space (in pixels) between characters of section header. This helps the readability of the header in small font sizes.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;let t=e,i=this.defaultValue.markSectionHeaderRegex,n=t.markSectionHeaderRegex;if("string"==typeof n)try{new RegExp(n,"d"),i=n}catch(s){}return{enabled:YT(t.enabled,this.defaultValue.enabled),autohide:eI(t.autohide,this.defaultValue.autohide,["none","mouseover","scroll"]),size:eI(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:eI(t.side,this.defaultValue.side,["right","left"]),showSlider:eI(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:YT(t.renderCharacters,this.defaultValue.renderCharacters),scale:XT.clampedInt(t.scale,1,1,3),maxColumn:XT.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:YT(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:YT(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),markSectionHeaderRegex:i,sectionHeaderFontSize:ZT.clamp(ZT.float(t.sectionHeaderFontSize,this.defaultValue.sectionHeaderFontSize),4,32),sectionHeaderLetterSpacing:ZT.clamp(ZT.float(t.sectionHeaderLetterSpacing,this.defaultValue.sectionHeaderLetterSpacing),0,5)}}}),EI(new tI(SI.mouseStyle,"mouseStyle","text",["text","default","copy"])),EI(new ZT(SI.mouseWheelScrollSensitivity,"mouseWheelScrollSensitivity",1,e=>0===e?1:e,{markdownDescription:Li(587,"A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),EI(new QT(SI.mouseWheelZoom,"mouseWheelZoom",!1,{markdownDescription:qn?Li(588,"Zoom the font of the editor when using mouse wheel and holding `Cmd`."):Li(589,"Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),EI(new QT(SI.multiCursorMergeOverlapping,"multiCursorMergeOverlapping",!0,{description:Li(590,"Merge multiple cursors when they are overlapping.")})),EI(new iI(SI.multiCursorModifier,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],function(e){return"ctrlCmd"===e?qn?"metaKey":"ctrlKey":"altKey"},{markdownEnumDescriptions:[Li(591,"Maps to `Control` on Windows and Linux and to `Command` on macOS."),Li(592,"Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:Li(593,"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),EI(new tI(SI.mouseMiddleClickAction,"mouseMiddleClickAction","default",["default","openLink","ctrlLeftClick"],{description:Li(594,"Controls what happens when middle mouse button is clicked in the editor.")})),EI(new tI(SI.multiCursorPaste,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[Li(595,"Each cursor pastes a single line of the text."),Li(596,"Each cursor pastes the full text.")],markdownDescription:Li(597,"Controls pasting when the line count of the pasted text matches the cursor count.")})),EI(new XT(SI.multiCursorLimit,"multiCursorLimit",1e4,1,1e5,{markdownDescription:Li(598,"Controls the max number of cursors that can be in an active editor at once.")})),EI(new tI(SI.occurrencesHighlight,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[Li(599,"Does not highlight occurrences."),Li(600,"Highlights occurrences only in the current file."),Li(601,"Experimental: Highlights occurrences across all valid open files.")],markdownDescription:Li(602,"Controls whether occurrences should be highlighted across open files.")})),EI(new XT(SI.occurrencesHighlightDelay,"occurrencesHighlightDelay",0,0,2e3,{description:Li(603,"Controls the delay in milliseconds after which occurrences are highlighted."),tags:["preview"]})),EI(new QT(SI.overtypeOnPaste,"overtypeOnPaste",!0,{description:Li(604,"Controls whether pasting should overtype.")})),EI(new QT(SI.overviewRulerBorder,"overviewRulerBorder",!0,{description:Li(605,"Controls whether a border should be drawn around the overview ruler.")})),EI(new XT(SI.overviewRulerLanes,"overviewRulerLanes",3,0,3)),EI(new class extends zT{constructor(){super(SI.padding,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:Li(361,"Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:Li(362,"Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;let t=e;return{top:XT.clampedInt(t.top,0,0,1e3),bottom:XT.clampedInt(t.bottom,0,0,1e3)}}}),EI(new class extends zT{constructor(){let e={enabled:!0,showPasteSelector:"afterPaste"};super(SI.pasteAs,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:Li(495,"Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:Li(496,"Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[Li(497,"Show the paste selector widget after content is pasted into the editor."),Li(498,"Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;let t=e;return{enabled:YT(t.enabled,this.defaultValue.enabled),showPasteSelector:eI(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}}),EI(new class extends zT{constructor(){let e={enabled:!0,cycle:!0};super(SI.parameterHints,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:Li(363,"Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:Li(364,"Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;let t=e;return{enabled:YT(t.enabled,this.defaultValue.enabled),cycle:YT(t.cycle,this.defaultValue.cycle)}}}),EI(new tI(SI.peekWidgetDefaultFocus,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[Li(606,"Focus the tree when opening peek"),Li(607,"Focus the editor when opening peek")],description:Li(608,"Controls whether to focus the inline editor or the tree in the peek widget.")})),EI(new class extends zT{constructor(){super(SI.placeholder,"placeholder",void 0)}validate(e){return void 0===e?this.defaultValue:"string"==typeof e?e:this.defaultValue}}),EI(new QT(SI.definitionLinkOpensInPeek,"definitionLinkOpensInPeek",!1,{description:Li(609,"Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),EI(new class extends zT{constructor(){let e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[Li(365,"Quick suggestions show inside the suggest widget"),Li(366,"Quick suggestions show as ghost text"),Li(367,"Quick suggestions are disabled")]}];super(SI.quickSuggestions,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:Li(368,"Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:Li(369,"Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:Li(370,"Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:Li(371,"Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the {0}-setting which controls if suggestions are triggered by special characters.","`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if("boolean"==typeof e){let t=e?"on":"off";return{comments:t,strings:t,other:t}}if(!e||"object"!=typeof e)return this.defaultValue;let t,i,n,{other:s,comments:r,strings:o}=e,a=["on","inline","off"];return t="boolean"==typeof s?s?"on":"off":eI(s,this.defaultValue.other,a),i="boolean"==typeof r?r?"on":"off":eI(r,this.defaultValue.comments,a),n="boolean"==typeof o?o?"on":"off":eI(o,this.defaultValue.strings,a),{other:t,comments:i,strings:n}}}),EI(new XT(SI.quickSuggestionsDelay,"quickSuggestionsDelay",10,0,Zo.MAX_SAFE_SMALL_INTEGER,{description:Li(610,"Controls the delay in milliseconds after which quick suggestions will show up."),experiment:{mode:"auto"}})),EI(new QT(SI.readOnly,"readOnly",!1)),EI(new class extends zT{constructor(){super(SI.readOnlyMessage,"readOnlyMessage",void 0)}validate(e){return e&&"object"==typeof e?e:this.defaultValue}}),EI(new QT(SI.renameOnType,"renameOnType",!1,{description:Li(611,"Controls whether the editor auto renames on type."),markdownDeprecationMessage:Li(612,"Deprecated, use `#editor.linkedEditing#` instead.")})),EI(new QT(SI.renderControlCharacters,"renderControlCharacters",!0,{description:Li(613,"Controls whether the editor should render control characters."),restricted:!0})),EI(new tI(SI.renderFinalNewline,"renderFinalNewline",Gn?"dimmed":"on",["off","on","dimmed"],{description:Li(614,"Render last line number when the file ends with a newline.")})),EI(new tI(SI.renderLineHighlight,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",Li(615,"Highlights both the gutter and the current line.")],description:Li(616,"Controls how the editor should render the current line highlight.")})),EI(new QT(SI.renderLineHighlightOnlyWhenFocus,"renderLineHighlightOnlyWhenFocus",!1,{description:Li(617,"Controls if the editor should render the current line highlight only when the editor is focused.")})),EI(new tI(SI.renderValidationDecorations,"renderValidationDecorations","editable",["editable","on","off"])),EI(new tI(SI.renderWhitespace,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",Li(618,"Render whitespace characters except for single spaces between words."),Li(619,"Render whitespace characters only on selected text."),Li(620,"Render only trailing whitespace characters."),""],description:Li(621,"Controls how the editor should render whitespace characters.")})),EI(new XT(SI.revealHorizontalRightPadding,"revealHorizontalRightPadding",15,0,1e3)),EI(new QT(SI.roundedSelection,"roundedSelection",!0,{description:Li(622,"Controls whether selections should have rounded corners.")})),EI(new class extends zT{constructor(){let e=[],t={type:"number",description:Li(377,"Number of monospace characters at which this editor ruler will render.")};super(SI.rulers,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:Li(378,"Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:Li(379,"Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){let t=[];for(let i of e)if("number"==typeof i)t.push({column:XT.clampedInt(i,0,0,1e4),color:null});else if(i&&"object"==typeof i){let e=i;t.push({column:XT.clampedInt(e.column,0,0,1e4),color:e.color})}return t.sort((e,t)=>e.column-t.column),t}return this.defaultValue}}),EI(new class extends zT{constructor(){let e={vertical:xE.Auto,horizontal:xE.Auto,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(SI.scrollbar,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[Li(380,"The vertical scrollbar will be visible only when necessary."),Li(381,"The vertical scrollbar will always be visible."),Li(382,"The vertical scrollbar will always be hidden.")],default:"auto",description:Li(383,"Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[Li(384,"The horizontal scrollbar will be visible only when necessary."),Li(385,"The horizontal scrollbar will always be visible."),Li(386,"The horizontal scrollbar will always be hidden.")],default:"auto",description:Li(387,"Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:Li(388,"The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:Li(389,"The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:Li(390,"Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:Li(391,"When set, the horizontal scrollbar will not increase the size of the editor's content.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;let t=e,i=XT.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),n=XT.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:XT.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:uI(t.vertical,this.defaultValue.vertical),horizontal:uI(t.horizontal,this.defaultValue.horizontal),useShadows:YT(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:YT(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:YT(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:YT(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:YT(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:i,horizontalSliderSize:XT.clampedInt(t.horizontalSliderSize,i,0,1e3),verticalScrollbarSize:n,verticalSliderSize:XT.clampedInt(t.verticalSliderSize,n,0,1e3),scrollByPage:YT(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:YT(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}}),EI(new XT(SI.scrollBeyondLastColumn,"scrollBeyondLastColumn",4,0,Zo.MAX_SAFE_SMALL_INTEGER,{description:Li(623,"Controls the number of extra characters beyond which the editor will scroll horizontally.")})),EI(new QT(SI.scrollBeyondLastLine,"scrollBeyondLastLine",!0,{description:Li(624,"Controls whether the editor will scroll beyond the last line.")})),EI(new QT(SI.scrollOnMiddleClick,"scrollOnMiddleClick",!1,{description:Li(625,"Controls whether the editor will scroll when the middle button is pressed.")})),EI(new QT(SI.scrollPredominantAxis,"scrollPredominantAxis",!0,{description:Li(626,"Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),EI(new QT(SI.selectionClipboard,"selectionClipboard",!0,{description:Li(627,"Controls whether the Linux primary clipboard should be supported."),included:Gn})),EI(new QT(SI.selectionHighlight,"selectionHighlight",!0,{description:Li(628,"Controls whether the editor should highlight matches similar to the selection.")})),EI(new XT(SI.selectionHighlightMaxLength,"selectionHighlightMaxLength",200,0,Zo.MAX_SAFE_SMALL_INTEGER,{description:Li(629,"Controls how many characters can be in the selection before similiar matches are not highlighted. Set to zero for unlimited.")})),EI(new QT(SI.selectionHighlightMultiline,"selectionHighlightMultiline",!1,{description:Li(630,"Controls whether the editor should highlight selection matches that span multiple lines.")})),EI(new QT(SI.selectOnLineNumbers,"selectOnLineNumbers",!0)),EI(new tI(SI.showFoldingControls,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[Li(631,"Always show the folding controls."),Li(632,"Never show the folding controls and reduce the gutter size."),Li(633,"Only show the folding controls when the mouse is over the gutter.")],description:Li(634,"Controls when the folding controls on the gutter are shown.")})),EI(new QT(SI.showUnused,"showUnused",!0,{description:Li(635,"Controls fading out of unused code.")})),EI(new QT(SI.showDeprecated,"showDeprecated",!0,{description:Li(636,"Controls strikethrough deprecated variables.")})),EI(new class extends zT{constructor(){let e={enabled:"on",fontSize:0,fontFamily:"",padding:!1,maximumLength:43};super(SI.inlayHints,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:Li(332,"Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[Li(333,"Inlay hints are enabled"),Li(334,"Inlay hints are showing by default and hide when holding {0}",qn?"Ctrl+Option":"Ctrl+Alt"),Li(335,"Inlay hints are hidden by default and show when holding {0}",qn?"Ctrl+Option":"Ctrl+Alt"),Li(336,"Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:Li(337,"Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:Li(338,"Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:Li(339,"Enables the padding around the inlay hints in the editor.")},"editor.inlayHints.maximumLength":{type:"number",default:e.maximumLength,markdownDescription:Li(340,"Maximum overall length of inlay hints, for a single line, before they get truncated by the editor. Set to `0` to never truncate")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;let t=e;return"boolean"==typeof t.enabled&&(t.enabled=t.enabled?"on":"off"),{enabled:eI(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:XT.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:JT.string(t.fontFamily,this.defaultValue.fontFamily),padding:YT(t.padding,this.defaultValue.padding),maximumLength:XT.clampedInt(t.maximumLength,this.defaultValue.maximumLength,0,2**53-1)}}}),EI(new tI(SI.snippetSuggestions,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[Li(637,"Show snippet suggestions on top of other suggestions."),Li(638,"Show snippet suggestions below other suggestions."),Li(639,"Show snippets suggestions with other suggestions."),Li(640,"Do not show snippet suggestions.")],description:Li(641,"Controls whether snippets are shown with other suggestions and how they are sorted.")})),EI(new class extends zT{constructor(){super(SI.smartSelect,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:Li(483,"Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:Li(484,"Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(e){return e&&"object"==typeof e?{selectLeadingAndTrailingWhitespace:YT(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:YT(e.selectSubwords,this.defaultValue.selectSubwords)}:this.defaultValue}}),EI(new QT(SI.smoothScrolling,"smoothScrolling",!1,{description:Li(642,"Controls whether the editor will scroll using an animation.")})),EI(new XT(SI.stopRenderingLineAfter,"stopRenderingLineAfter",1e4,-1,Zo.MAX_SAFE_SMALL_INTEGER)),EI(new class extends zT{constructor(){let e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(SI.suggest,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[Li(435,"Insert suggestion without overwriting text right of the cursor."),Li(436,"Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:Li(437,"Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:Li(438,"Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:Li(439,"Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:Li(440,"Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[Li(441,"Always select a suggestion when automatically triggering IntelliSense."),Li(442,"Never select a suggestion when automatically triggering IntelliSense."),Li(443,"Select a suggestion only when triggering IntelliSense from a trigger character."),Li(444,"Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:Li(445,"Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions ({0} and {1}) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.","`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:Li(446,"Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:Li(447,"Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:Li(448,"Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:Li(449,"Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:Li(450,"Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:Li(451,"This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:Li(452,"This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:Li(453,"When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:Li(454,"When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:Li(455,"When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:Li(456,"When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:Li(457,"When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:Li(458,"When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:Li(459,"When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:Li(460,"When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:Li(461,"When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:Li(462,"When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:Li(463,"When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:Li(464,"When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:Li(465,"When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:Li(466,"When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:Li(467,"When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:Li(468,"When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:Li(469,"When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:Li(470,"When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:Li(471,"When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:Li(472,"When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:Li(473,"When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:Li(474,"When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:Li(475,"When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:Li(476,"When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:Li(477,"When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:Li(478,"When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:Li(479,"When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:Li(480,"When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:Li(481,"When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:Li(482,"When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;let t=e;return{insertMode:eI(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:YT(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:YT(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:YT(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:YT(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:eI(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:YT(t.showIcons,this.defaultValue.showIcons),showStatusBar:YT(t.showStatusBar,this.defaultValue.showStatusBar),preview:YT(t.preview,this.defaultValue.preview),previewMode:eI(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:YT(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:YT(t.showMethods,this.defaultValue.showMethods),showFunctions:YT(t.showFunctions,this.defaultValue.showFunctions),showConstructors:YT(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:YT(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:YT(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:YT(t.showFields,this.defaultValue.showFields),showVariables:YT(t.showVariables,this.defaultValue.showVariables),showClasses:YT(t.showClasses,this.defaultValue.showClasses),showStructs:YT(t.showStructs,this.defaultValue.showStructs),showInterfaces:YT(t.showInterfaces,this.defaultValue.showInterfaces),showModules:YT(t.showModules,this.defaultValue.showModules),showProperties:YT(t.showProperties,this.defaultValue.showProperties),showEvents:YT(t.showEvents,this.defaultValue.showEvents),showOperators:YT(t.showOperators,this.defaultValue.showOperators),showUnits:YT(t.showUnits,this.defaultValue.showUnits),showValues:YT(t.showValues,this.defaultValue.showValues),showConstants:YT(t.showConstants,this.defaultValue.showConstants),showEnums:YT(t.showEnums,this.defaultValue.showEnums),showEnumMembers:YT(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:YT(t.showKeywords,this.defaultValue.showKeywords),showWords:YT(t.showWords,this.defaultValue.showWords),showColors:YT(t.showColors,this.defaultValue.showColors),showFiles:YT(t.showFiles,this.defaultValue.showFiles),showReferences:YT(t.showReferences,this.defaultValue.showReferences),showFolders:YT(t.showFolders,this.defaultValue.showFolders),showTypeParameters:YT(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:YT(t.showSnippets,this.defaultValue.showSnippets),showUsers:YT(t.showUsers,this.defaultValue.showUsers),showIssues:YT(t.showIssues,this.defaultValue.showIssues)}}}),EI(new class extends zT{constructor(){let e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default",syntaxHighlightingEnabled:!0,minShowDelay:0,suppressInSnippetMode:!0,edits:{enabled:!0,showCollapsed:!1,renderSideBySide:"auto",allowCodeShifting:"always",showLongDistanceHint:!0},triggerCommandOnProviderChange:!1,experimental:{suppressInlineSuggestions:"",showOnSuggestConflict:"never",emptyResponseInformation:!0}};super(SI.inlineSuggest,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:Li(399,"Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[Li(400,"Show the inline suggestion toolbar whenever an inline suggestion is shown."),Li(401,"Show the inline suggestion toolbar when hovering over an inline suggestion."),Li(402,"Never show the inline suggestion toolbar.")],description:Li(403,"Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.syntaxHighlightingEnabled":{type:"boolean",default:e.syntaxHighlightingEnabled,description:Li(404,"Controls whether to show syntax highlighting for inline suggestions in the editor.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:Li(405,"Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.suppressInSnippetMode":{type:"boolean",default:e.suppressInSnippetMode,description:Li(406,"Controls whether inline suggestions are suppressed when in snippet mode.")},"editor.inlineSuggest.minShowDelay":{type:"number",default:0,minimum:0,maximum:1e4,description:Li(407,"Controls the minimal delay in milliseconds after which inline suggestions are shown after typing.")},"editor.inlineSuggest.experimental.suppressInlineSuggestions":{type:"string",default:e.experimental.suppressInlineSuggestions,tags:["experimental"],description:Li(408,"Suppresses inline completions for specified extension IDs -- comma separated."),experiment:{mode:"auto"}},"editor.inlineSuggest.experimental.emptyResponseInformation":{type:"boolean",default:e.experimental.emptyResponseInformation,tags:["experimental"],description:Li(409,"Controls whether to send request information from the inline suggestion provider."),experiment:{mode:"auto"}},"editor.inlineSuggest.triggerCommandOnProviderChange":{type:"boolean",default:e.triggerCommandOnProviderChange,tags:["experimental"],description:Li(410,"Controls whether to trigger a command when the inline suggestion provider changes."),experiment:{mode:"auto"}},"editor.inlineSuggest.experimental.showOnSuggestConflict":{type:"string",default:e.experimental.showOnSuggestConflict,tags:["experimental"],enum:["always","never","whenSuggestListIsIncomplete"],description:Li(411,"Controls whether to show inline suggestions when there is a suggest conflict."),experiment:{mode:"auto"}},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:Li(412,"Controls the font family of the inline suggestions.")},"editor.inlineSuggest.edits.allowCodeShifting":{type:"string",default:e.edits.allowCodeShifting,description:Li(413,"Controls whether showing a suggestion will shift the code to make space for the suggestion inline."),enum:["always","horizontal","never"],tags:["nextEditSuggestions"]},"editor.inlineSuggest.edits.showLongDistanceHint":{type:"boolean",default:e.edits.showLongDistanceHint,description:Li(414,"Controls whether long distance inline suggestions are shown."),tags:["nextEditSuggestions","experimental"]},"editor.inlineSuggest.edits.renderSideBySide":{type:"string",default:e.edits.renderSideBySide,description:Li(415,"Controls whether larger suggestions can be shown side by side."),enum:["auto","never"],enumDescriptions:[Li(416,"Larger suggestions will show side by side if there is enough space, otherwise they will be shown below."),Li(417,"Larger suggestions are never shown side by side and will always be shown below.")],tags:["nextEditSuggestions"]},"editor.inlineSuggest.edits.showCollapsed":{type:"boolean",default:e.edits.showCollapsed,description:Li(418,"Controls whether the suggestion will show as collapsed until jumping to it."),tags:["nextEditSuggestions"]}})}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;let t=e;return{enabled:YT(t.enabled,this.defaultValue.enabled),mode:eI(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:eI(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:YT(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:YT(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:JT.string(t.fontFamily,this.defaultValue.fontFamily),syntaxHighlightingEnabled:YT(t.syntaxHighlightingEnabled,this.defaultValue.syntaxHighlightingEnabled),minShowDelay:XT.clampedInt(t.minShowDelay,0,0,1e4),suppressInSnippetMode:YT(t.suppressInSnippetMode,this.defaultValue.suppressInSnippetMode),edits:this._validateEdits(t.edits),triggerCommandOnProviderChange:YT(t.triggerCommandOnProviderChange,this.defaultValue.triggerCommandOnProviderChange),experimental:this._validateExperimental(t.experimental)}}_validateEdits(e){if(!e||"object"!=typeof e)return this.defaultValue.edits;let t=e;return{enabled:YT(t.enabled,this.defaultValue.edits.enabled),showCollapsed:YT(t.showCollapsed,this.defaultValue.edits.showCollapsed),allowCodeShifting:eI(t.allowCodeShifting,this.defaultValue.edits.allowCodeShifting,["always","horizontal","never"]),showLongDistanceHint:YT(t.showLongDistanceHint,this.defaultValue.edits.showLongDistanceHint),renderSideBySide:eI(t.renderSideBySide,this.defaultValue.edits.renderSideBySide,["never","auto"])}}_validateExperimental(e){if(!e||"object"!=typeof e)return this.defaultValue.experimental;let t=e;return{suppressInlineSuggestions:JT.string(t.suppressInlineSuggestions,this.defaultValue.experimental.suppressInlineSuggestions),showOnSuggestConflict:eI(t.showOnSuggestConflict,this.defaultValue.experimental.showOnSuggestConflict,["always","never","whenSuggestListIsIncomplete"]),emptyResponseInformation:YT(t.emptyResponseInformation,this.defaultValue.experimental.emptyResponseInformation)}}}),EI(new QT(SI.inlineCompletionsAccessibilityVerbose,"inlineCompletionsAccessibilityVerbose",!1,{description:Li(643,"Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),EI(new XT(SI.suggestFontSize,"suggestFontSize",0,0,1e3,{markdownDescription:Li(644,"Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),EI(new XT(SI.suggestLineHeight,"suggestLineHeight",0,0,1e3,{markdownDescription:Li(645,"Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),EI(new QT(SI.suggestOnTriggerCharacters,"suggestOnTriggerCharacters",!0,{description:Li(646,"Controls whether suggestions should automatically show up when typing trigger characters.")})),EI(new tI(SI.suggestSelection,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[Li(647,"Always select the first suggestion."),Li(648,"Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),Li(649,"Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:Li(650,"Controls how suggestions are pre-selected when showing the suggest list.")})),EI(new tI(SI.tabCompletion,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[Li(651,"Tab complete will insert the best matching suggestion when pressing tab."),Li(652,"Disable tab completions."),Li(653,"Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:Li(654,"Enables tab completions.")})),EI(new XT(SI.tabIndex,"tabIndex",0,-1,Zo.MAX_SAFE_SMALL_INTEGER)),EI(new QT(SI.trimWhitespaceOnDelete,"trimWhitespaceOnDelete",!1,{description:Li(655,"Controls whether the editor will also delete the next line's indentation whitespace when deleting a newline.")})),EI(new class extends zT{constructor(){let e={nonBasicASCII:gI,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:gI,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(SI.unicodeHighlighting,"unicodeHighlight",e,{[mI]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,gI],default:e.nonBasicASCII,description:Li(392,"Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[fI]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:Li(393,"Controls whether characters that just reserve space or have no width at all are highlighted.")},[vI]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:Li(394,"Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[_I]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,gI],default:e.includeComments,description:Li(395,"Controls whether characters in comments should also be subject to Unicode highlighting.")},[bI]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,gI],default:e.includeStrings,description:Li(396,"Controls whether characters in strings should also be subject to Unicode highlighting.")},[pI]:{restricted:!0,type:"object",default:e.allowedCharacters,description:Li(397,"Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[CI]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:Li(398,"Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let i=!1;t.allowedCharacters&&e&&(dS(e.allowedCharacters,t.allowedCharacters)||(e=(0,r.A)((0,r.A)({},e),{},{allowedCharacters:t.allowedCharacters}),i=!0)),t.allowedLocales&&e&&(dS(e.allowedLocales,t.allowedLocales)||(e=(0,r.A)((0,r.A)({},e),{},{allowedLocales:t.allowedLocales}),i=!0));let n=super.applyUpdate(e,t);return i?new KT(n.newValue,!0):n}validate(e){if(!e||"object"!=typeof e)return this.defaultValue;let t=e;return{nonBasicASCII:yI(t.nonBasicASCII,gI,[!0,!1,gI]),invisibleCharacters:YT(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:YT(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:yI(t.includeComments,gI,[!0,!1,gI]),includeStrings:yI(t.includeStrings,gI,[!0,!1,gI]),allowedCharacters:this.validateBooleanMap(t.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(t.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if("object"!=typeof e||!e)return t;let i={};for(let[n,s]of Object.entries(e))!0===s&&(i[n]=!0);return i}}),EI(new tI(SI.unusualLineTerminators,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[Li(656,"Unusual line terminators are automatically removed."),Li(657,"Unusual line terminators are ignored."),Li(658,"Unusual line terminators prompt to be removed.")],description:Li(659,"Remove unusual line terminators that might cause problems.")})),EI(new QT(SI.useShadowDOM,"useShadowDOM",!0)),EI(new QT(SI.useTabStops,"useTabStops",!0,{description:Li(660,"Spaces and tabs are inserted and deleted in alignment with tab stops.")})),EI(new tI(SI.wordBreak,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[Li(661,"Use the default line break rule."),Li(662,"Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:Li(663,"Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),EI(new class extends zT{constructor(){let e=[];super(SI.wordSegmenterLocales,"wordSegmenterLocales",e,{anyOf:[{type:"string"},{type:"array",items:{type:"string"}}],description:Li(485,"Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"array",items:{type:"string"},default:e})}validate(e){if("string"==typeof e&&(e=[e]),Array.isArray(e)){let i=[];for(let n of e)if("string"==typeof n)try{Intl.Segmenter.supportedLocalesOf(n).length>0&&i.push(n)}catch(t){}return i}return this.defaultValue}}),EI(new JT(SI.wordSeparators,"wordSeparators",FT,{description:Li(664,"Characters that will be used as word separators when doing word related navigations or operations.")})),EI(new tI(SI.wordWrap,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[Li(665,"Lines will never wrap."),Li(666,"Lines will wrap at the viewport width."),Li(667,"Lines will wrap at `#editor.wordWrapColumn#`."),Li(668,"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:Li(669,"Controls how lines should wrap.")})),EI(new JT(SI.wordWrapBreakAfterCharacters,"wordWrapBreakAfterCharacters"," \t})]?|/&.,;\xa2\xb0\u2032\u2033\u2030\u2103\u3001\u3002\uff61\uff64\uffe0\uff0c\uff0e\uff1a\uff1b\uff1f\uff01\uff05\u30fb\uff65\u309d\u309e\u30fd\u30fe\u30fc\u30a1\u30a3\u30a5\u30a7\u30a9\u30c3\u30e3\u30e5\u30e7\u30ee\u30f5\u30f6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308e\u3095\u3096\u31f0\u31f1\u31f2\u31f3\u31f4\u31f5\u31f6\u31f7\u31f8\u31f9\u31fa\u31fb\u31fc\u31fd\u31fe\u31ff\u3005\u303b\uff67\uff68\uff69\uff6a\uff6b\uff6c\uff6d\uff6e\uff6f\uff70\u201d\u3009\u300b\u300d\u300f\u3011\u3015\uff09\uff3d\uff5d\uff63")),EI(new JT(SI.wordWrapBreakBeforeCharacters,"wordWrapBreakBeforeCharacters","([{\u2018\u201c\u3008\u300a\u300c\u300e\u3010\u3014\uff08\uff3b\uff5b\uff62\xa3\xa5\uff04\uffe1\uffe5+\uff0b")),EI(new XT(SI.wordWrapColumn,"wordWrapColumn",80,1,Zo.MAX_SAFE_SMALL_INTEGER,{markdownDescription:Li(670,"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),EI(new tI(SI.wordWrapOverride1,"wordWrapOverride1","inherit",["off","on","inherit"])),EI(new tI(SI.wordWrapOverride2,"wordWrapOverride2","inherit",["off","on","inherit"])),EI(new QT(SI.wrapOnEscapedLineFeeds,"wrapOnEscapedLineFeeds",!1,{markdownDescription:Li(671,'Controls whether literal `\\n` shall trigger a wordWrap when `#editor.wordWrap#` is enabled.\n\nFor example:\n```c\nchar* str="hello\\nworld"\n```\nwill be displayed as\n```c\nchar* str="hello\\n\n           world"\n```')})),EI(new class extends GT{constructor(){super(SI.effectiveCursorStyle,sI.Line)}compute(e,t,i){return"overtype"===e.inputMode?t.get(SI.overtypeCursorStyle):t.get(SI.cursorStyle)}}),EI(new class extends GT{constructor(){super(SI.editorClassName,"")}compute(e,t,i){let n=["monaco-editor"];return t.get(SI.extraEditorClassName)&&n.push(t.get(SI.extraEditorClassName)),e.extraEditorClassName&&n.push(e.extraEditorClassName),"default"===t.get(SI.mouseStyle)?n.push("mouse-default"):"copy"===t.get(SI.mouseStyle)&&n.push("mouse-copy"),t.get(SI.showUnused)&&n.push("showUnused"),t.get(SI.showDeprecated)&&n.push("showDeprecated"),n.join(" ")}}),EI(new tI(SI.defaultColorDecorators,"defaultColorDecorators","auto",["auto","always","never"],{enumDescriptions:[Li(672,"Show default color decorators only when no extension provides colors decorators."),Li(673,"Always show default color decorators."),Li(674,"Never show default color decorators.")],description:Li(675,"Controls whether inline color decorations should be shown using the default document color provider.")})),EI(new class extends GT{constructor(){super(SI.pixelRatio,1)}compute(e,t,i){return e.pixelRatio}}),EI(new QT(SI.tabFocusMode,"tabFocusMode",!1,{markdownDescription:Li(676,"Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),EI(new class e extends GT{constructor(){super(SI.layoutInfo,{width:0,height:0,glyphMarginLeft:0,glyphMarginWidth:0,glyphMarginDecorationLaneCount:0,lineNumbersLeft:0,lineNumbersWidth:0,decorationsLeft:0,decorationsWidth:0,contentLeft:0,contentWidth:0,minimap:{renderMinimap:oI.None,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:0,minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:0},viewportColumn:0,isWordWrapMinified:!1,isViewportWrapping:!1,wrappingColumn:-1,verticalScrollbarWidth:0,horizontalScrollbarHeight:0,overviewRuler:{top:0,width:0,height:0,right:0}})}compute(t,i,n){return e.computeLayout(i,{memory:t.memory,outerWidth:t.outerWidth,outerHeight:t.outerHeight,isDominatedByLongLines:t.isDominatedByLongLines,lineHeight:t.fontInfo.lineHeight,viewLineCount:t.viewLineCount,lineNumbersDigitCount:t.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:t.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:t.fontInfo.maxDigitWidth,pixelRatio:t.pixelRatio,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){let t=e.height/e.lineHeight,i=Math.floor(e.paddingTop/e.lineHeight),n=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(n=Math.max(n,t-1));let s=(i+e.viewLineCount+n)/(e.pixelRatio*e.height);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:i,extraLinesBeyondLastLine:n,desiredRatio:s,minimapLineCount:Math.floor(e.viewLineCount/s)}}static _computeMinimapLayout(t,i){let n=t.outerWidth,s=t.outerHeight,r=t.pixelRatio;if(!t.minimap.enabled)return{renderMinimap:oI.None,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(r*s),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:s};let o=i.stableMinimapLayoutInput,a=o&&t.outerHeight===o.outerHeight&&t.lineHeight===o.lineHeight&&t.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&t.pixelRatio===o.pixelRatio&&t.scrollBeyondLastLine===o.scrollBeyondLastLine&&t.paddingTop===o.paddingTop&&t.paddingBottom===o.paddingBottom&&t.minimap.enabled===o.minimap.enabled&&t.minimap.side===o.minimap.side&&t.minimap.size===o.minimap.size&&t.minimap.showSlider===o.minimap.showSlider&&t.minimap.renderCharacters===o.minimap.renderCharacters&&t.minimap.maxColumn===o.minimap.maxColumn&&t.minimap.scale===o.minimap.scale&&t.verticalScrollbarWidth===o.verticalScrollbarWidth&&t.isViewportWrapping===o.isViewportWrapping,l=t.lineHeight,h=t.typicalHalfwidthCharacterWidth,d=t.scrollBeyondLastLine,c=t.minimap.renderCharacters,u=r>=2?Math.round(2*t.minimap.scale):t.minimap.scale,g=t.minimap.maxColumn,p=t.minimap.size,f=t.minimap.side,m=t.verticalScrollbarWidth,v=t.viewLineCount,_=t.remainingWidth,b=t.isViewportWrapping,C=c?2:3,y=Math.floor(r*s),w=y/r,S=!1,k=!1,E=C*u,D=u/r,T=1;if("fill"===p||"fit"===p){let{typicalViewportLineCount:n,extraLinesBeforeFirstLine:o,extraLinesBeyondLastLine:h,desiredRatio:c,minimapLineCount:g}=e.computeContainedMinimapLineCount({viewLineCount:v,scrollBeyondLastLine:d,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom,height:s,lineHeight:l,pixelRatio:r});if(v/g>1)S=!0,k=!0,u=1,E=1,D=u/r;else{let e=!1,s=u+1;if("fit"===p){let t=Math.ceil((o+v+h)*E);b&&a&&_<=i.stableFitRemainingWidth?(e=!0,s=i.stableFitMaxMinimapScale):e=t>y}if("fill"===p||e){S=!0;let e=u;E=Math.min(l*r,Math.max(1,Math.floor(1/c))),b&&a&&_<=i.stableFitRemainingWidth&&(s=i.stableFitMaxMinimapScale),u=Math.min(s,Math.max(1,Math.floor(E/C))),u>e&&(T=Math.min(2,u/e)),D=u/r/T,y=Math.ceil(Math.max(n,o+v+h)*E),b?(i.stableMinimapLayoutInput=t,i.stableFitRemainingWidth=_,i.stableFitMaxMinimapScale=u):(i.stableMinimapLayoutInput=null,i.stableFitRemainingWidth=0)}}}let I=Math.floor(g*D),x=Math.min(I,Math.max(0,Math.floor((_-m-2)*D/(h+D)))+8),L=Math.floor(r*x),A=L/r;return L=Math.floor(L*T),{renderMinimap:c?oI.Text:oI.Blocks,minimapLeft:"left"===f?0:n-x-m,minimapWidth:x,minimapHeightIsEditorHeight:S,minimapIsSampling:k,minimapScale:u,minimapLineHeight:E,minimapCanvasInnerWidth:L,minimapCanvasInnerHeight:y,minimapCanvasOuterWidth:A,minimapCanvasOuterHeight:w}}static computeLayout(t,i){let n=0|i.outerWidth,s=0|i.outerHeight,r=0|i.lineHeight,o=0|i.lineNumbersDigitCount,a=i.typicalHalfwidthCharacterWidth,l=i.maxDigitWidth,h=i.pixelRatio,d=i.viewLineCount,c=t.get(SI.wordWrapOverride2),u="inherit"===c?t.get(SI.wordWrapOverride1):c,g="inherit"===u?t.get(SI.wordWrap):u,p=t.get(SI.wordWrapColumn),f=i.isDominatedByLongLines,m=t.get(SI.glyphMargin),v=t.get(SI.lineNumbers).renderType!==cI.Off,_=t.get(SI.lineNumbersMinChars),b=t.get(SI.scrollBeyondLastLine),C=t.get(SI.padding),y=t.get(SI.minimap),w=t.get(SI.scrollbar),S=w.verticalScrollbarSize,k=w.verticalHasArrows,E=w.arrowSize,D=w.horizontalScrollbarSize,T=t.get(SI.folding),I="never"!==t.get(SI.showFoldingControls),x=t.get(SI.lineDecorationsWidth);T&&I&&(x+=16);let L=0;if(v){let e=Math.max(o,_);L=Math.round(e*l)}let A=0;m&&(A=r*i.glyphMarginDecorationLaneCount);let N=0,F=N+A,O=F+L,R=O+x,M=n-A-L-x,P=!1,B=!1,U=-1;t.get(SI.accessibilitySupport)===MT.Enabled&&"inherit"===u&&f?(P=!0,B=!0):"on"===g||"bounded"===g?B=!0:"wordWrapColumn"===g&&(U=p);let H=e._computeMinimapLayout({outerWidth:n,outerHeight:s,lineHeight:r,typicalHalfwidthCharacterWidth:a,pixelRatio:h,scrollBeyondLastLine:b,paddingTop:C.top,paddingBottom:C.bottom,minimap:y,verticalScrollbarWidth:S,viewLineCount:d,remainingWidth:M,isViewportWrapping:B},i.memory||new VT);H.renderMinimap!==oI.None&&0===H.minimapLeft&&(N+=H.minimapWidth,F+=H.minimapWidth,O+=H.minimapWidth,R+=H.minimapWidth);let W=M-H.minimapWidth,V=Math.max(1,Math.floor((W-S-2)/a)),z=k?E:0;return B&&(U=Math.max(1,V),"bounded"===g&&(U=Math.min(U,p))),{width:n,height:s,glyphMarginLeft:N,glyphMarginWidth:A,glyphMarginDecorationLaneCount:i.glyphMarginDecorationLaneCount,lineNumbersLeft:F,lineNumbersWidth:L,decorationsLeft:O,decorationsWidth:x,contentLeft:R,contentWidth:W,minimap:H,viewportColumn:V,isWordWrapMinified:P,isViewportWrapping:B,wrappingColumn:U,verticalScrollbarWidth:S,horizontalScrollbarHeight:D,overviewRuler:{top:z,width:S,height:s-2*z,right:0}}}}),EI(new class extends GT{constructor(){super(SI.wrappingInfo,{isDominatedByLongLines:!1,isWordWrapMinified:!1,isViewportWrapping:!1,wrappingColumn:-1})}compute(e,t,i){let n=t.get(SI.layoutInfo);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:n.isWordWrapMinified,isViewportWrapping:n.isViewportWrapping,wrappingColumn:n.wrappingColumn}}}),EI(new class extends zT{constructor(){super(SI.wrappingIndent,"wrappingIndent",wI.Same,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[Li(486,"No indentation. Wrapped lines begin at column 1."),Li(487,"Wrapped lines get the same indentation as the parent."),Li(488,"Wrapped lines get +1 indentation toward the parent."),Li(489,"Wrapped lines get +2 indentation toward the parent.")],description:Li(490,"Controls the indentation of wrapped lines."),default:"same"}})}validate(e){switch(e){case"none":return wI.None;case"same":return wI.Same;case"indent":return wI.Indent;case"deepIndent":return wI.DeepIndent}return wI.Same}compute(e,t,i){return t.get(SI.accessibilitySupport)===MT.Enabled?wI.None:i}}),EI(new class extends zT{constructor(){super(SI.wrappingStrategy,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[Li(321,"Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),Li(322,"Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:Li(323,"Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(e){return eI(e,"simple",["simple","advanced"])}compute(e,t,i){return t.get(SI.accessibilitySupport)===MT.Enabled?"advanced":i}}),EI(new class extends GT{constructor(){super(SI.effectiveEditContext,!1)}compute(e,t){return e.editContextSupported&&t.get(SI.editContext)}}),EI(new class extends GT{constructor(){super(SI.effectiveAllowVariableFonts,!1)}compute(e,t){return e.accessibilitySupport===MT.Enabled?t.get(SI.allowVariableFontsInAccessibilityMode):t.get(SI.allowVariableFonts)}});var DI=Object.freeze({id:"editor",order:5,type:"object",title:Li(212,"Editor"),scope:Jf.LANGUAGE_OVERRIDABLE}),TI=(0,r.A)((0,r.A)({},DI),{},{properties:{"editor.tabSize":{type:"number",default:NT.tabSize,minimum:1,maximum:100,markdownDescription:Li(213,"The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:Li(214,'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:NT.insertSpaces,markdownDescription:Li(215,"Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:NT.detectIndentation,markdownDescription:Li(216,"Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:NT.trimAutoWhitespace,description:Li(217,"Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:NT.largeFileOptimizations,description:Li(218,"Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{enum:["off","currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[Li(219,"Turn off Word Based Suggestions."),Li(220,"Only suggest words from the active document."),Li(221,"Suggest words from all open documents of the same language."),Li(222,"Suggest words from all open documents.")],description:Li(223,"Controls whether completions should be computed based on words in the document and from which documents they are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[Li(224,"Semantic highlighting enabled for all color themes."),Li(225,"Semantic highlighting disabled for all color themes."),Li(226,"Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:Li(227,"Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:Li(228,"Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:Li(229,"Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!0,description:Li(230,"Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:Li(231,"Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:Li(232,"Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only."),tags:["experimental"]},"editor.experimental.treeSitterTelemetry":{type:"boolean",default:!1,markdownDescription:Li(233,"Controls whether tree sitter parsing should be turned on and telemetry collected. Setting `#editor.experimental.preferTreeSitter#` for specific languages will take precedence."),tags:["experimental"],experiment:{mode:"auto"}},"editor.experimental.preferTreeSitter.css":{type:"boolean",default:!1,markdownDescription:Li(234,"Controls whether tree sitter parsing should be turned on for css. This will take precedence over `#editor.experimental.treeSitterTelemetry#` for css."),tags:["experimental"],experiment:{mode:"auto"}},"editor.experimental.preferTreeSitter.typescript":{type:"boolean",default:!1,markdownDescription:Li(235,"Controls whether tree sitter parsing should be turned on for typescript. This will take precedence over `#editor.experimental.treeSitterTelemetry#` for typescript."),tags:["experimental"],experiment:{mode:"auto"}},"editor.experimental.preferTreeSitter.ini":{type:"boolean",default:!1,markdownDescription:Li(236,"Controls whether tree sitter parsing should be turned on for ini. This will take precedence over `#editor.experimental.treeSitterTelemetry#` for ini."),tags:["experimental"],experiment:{mode:"auto"}},"editor.experimental.preferTreeSitter.regex":{type:"boolean",default:!1,markdownDescription:Li(237,"Controls whether tree sitter parsing should be turned on for regex. This will take precedence over `#editor.experimental.treeSitterTelemetry#` for regex."),tags:["experimental"],experiment:{mode:"auto"}},"editor.language.brackets":{type:["array","null"],default:null,description:Li(238,"Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:Li(239,"The opening bracket character or string sequence.")},{type:"string",description:Li(240,"The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:Li(241,"Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:Li(239,"The opening bracket character or string sequence.")},{type:"string",description:Li(240,"The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:fT,description:Li(242,"Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:mT,description:Li(243,"Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:uT,description:Li(244,"Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderSideBySideInlineBreakpoint":{type:"number",default:kT,description:Li(245,"If the diff editor width is smaller than this value, the inline view is used.")},"diffEditor.useInlineViewWhenSpaceIsLimited":{type:"boolean",default:ET,description:Li(246,"If enabled and the editor width is too small, the inline view is used.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:gT,description:Li(247,"When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.renderGutterMenu":{type:"boolean",default:pT,description:Li(248,"When enabled, the diff editor shows a special gutter for revert and stage actions.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:vT,description:Li(249,"When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:_T,description:Li(250,"Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:bT,description:Li(251,"Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:CT,markdownEnumDescriptions:[Li(252,"Lines will never wrap."),Li(253,"Lines will wrap at the viewport width."),Li(254,"Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:yT,markdownEnumDescriptions:[Li(255,"Uses the legacy diffing algorithm."),Li(256,"Uses the advanced diffing algorithm.")]},"diffEditor.hideUnchangedRegions.enabled":{type:"boolean",default:ST.enabled,markdownDescription:Li(257,"Controls whether the diff editor shows unchanged regions.")},"diffEditor.hideUnchangedRegions.revealLineCount":{type:"integer",default:ST.revealLineCount,markdownDescription:Li(258,"Controls how many lines are used for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.minimumLineCount":{type:"integer",default:ST.minimumLineCount,markdownDescription:Li(259,"Controls how many lines are used as a minimum for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.contextLineCount":{type:"integer",default:ST.contextLineCount,markdownDescription:Li(260,"Controls how many lines are used as context when comparing unchanged regions."),minimum:1},"diffEditor.experimental.showMoves":{type:"boolean",default:wT.showMoves,markdownDescription:Li(261,"Controls whether the diff editor should show detected code moves.")},"diffEditor.experimental.showEmptyDecorations":{type:"boolean",default:wT.showEmptyDecorations,description:Li(262,"Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.")},"diffEditor.experimental.useTrueInlineView":{type:"boolean",default:wT.useTrueInlineView,description:Li(263,"If enabled and the editor uses the inline view, word changes are rendered inline.")}}});function II(e){return void 0!==e.type||void 0!==e.anyOf}for(let M$ of kI){let e=M$.schema;if(void 0!==e)if(II(e))TI.properties["editor.".concat(M$.name)]=e;else for(let t in e)Object.hasOwnProperty.call(e,t)&&(TI.properties[t]=e[t])}Tn.as(em).registerConfiguration(TI);var xI=class{static insert(e,t){return{range:new dE(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}},LI=fn("modelService"),AI=fn("textModelService"),NI=fn("textResourceConfigurationService"),FI=fn("textResourcePropertiesService");function OI(e){return Object.isFrozen(e)?e:function(e){if(!e||"object"!=typeof e)return e;let t=[e];for(;t.length>0;){let e=t.shift();for(let i in e)if(aS.call(e,i)){let n=e[i];"object"==typeof n&&!Object.isFrozen(n)&&!Zi(n)&&t.push(n)}}return e}(e)}var RI=class e{static createEmptyModel(t){return new e({},[],[],void 0,t)}constructor(e,t,i,n,s){this._contents=e,this._keys=t,this._overrides=i,this._raw=n,this.logService=s,this.overrideConfigurations=new Map}get rawConfiguration(){if(!this._rawConfiguration)if(this._raw){let t=(Array.isArray(this._raw)?this._raw:[this._raw]).map(t=>{if(t instanceof e)return t;let i=new MI("",this.logService);return i.parseRaw(t),i.configurationModel});this._rawConfiguration=t.reduce((e,t)=>t===e?t:e.merge(t),t[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}get raw(){if(this._raw&&(!Array.isArray(this._raw)||!this._raw.every(t=>t instanceof e)))return this._raw}isEmpty(){return 0===this._keys.length&&0===Object.keys(this._contents).length&&0===this._overrides.length}getValue(e){return e?lr(this.contents,e):this.contents}inspect(t,i){let n=this;return{get value(){return OI(n.rawConfiguration.getValue(t))},get override(){return i?OI(n.rawConfiguration.getOverrideValue(t,i)):void 0},get merged(){return OI(i?n.rawConfiguration.override(i).getValue(t):n.rawConfiguration.getValue(t))},get overrides(){let i=[];for(let{contents:s,identifiers:r,keys:o}of n.rawConfiguration.overrides){let a=new e(s,o,[],void 0,n.logService).getValue(t);void 0!==a&&i.push({identifiers:r,value:a})}return i.length?OI(i):void 0}}}getOverrideValue(e,t){let i=this.getContentsForOverrideIdentifer(t);return i?e?lr(i,e):i:void 0}getKeysForOverrideIdentifier(e){let t=[];for(let i of this.overrides)i.identifiers.includes(e)&&t.push(...i.keys);return Br(t)}getAllOverrideIdentifiers(){let e=[];for(let t of this.overrides)e.push(...t.identifiers);return Br(e)}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(){let t=Xw(this.contents),i=Xw(this.overrides),n=[...this.keys],s=this._raw?Array.isArray(this._raw)?[...this._raw]:[this._raw]:[this];for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];for(let e of o)if(s.push(...e._raw?Array.isArray(e._raw)?e._raw:[e._raw]:[e]),!e.isEmpty()){this.mergeContents(t,e.contents);for(let t of e.overrides){let[e]=i.filter(e=>Mr(e.identifiers,t.identifiers));e?(this.mergeContents(e.contents,t.contents),e.keys.push(...t.keys),e.keys=Br(e.keys)):i.push(Xw(t))}for(let t of e.keys)-1===n.indexOf(t)&&n.push(t)}return new e(t,n,i,!s.length||s.every(t=>t instanceof e)?void 0:s,this.logService)}createOverrideConfigurationModel(t){let i=this.getContentsForOverrideIdentifer(t);if(!i||"object"!=typeof i||!Object.keys(i).length)return this;let n={};for(let e of Br([...Object.keys(this.contents),...Object.keys(i)])){let t=this.contents[e],s=i[e];s&&("object"==typeof t&&"object"==typeof s?(t=Xw(t),this.mergeContents(t,s)):t=s),n[e]=t}return new e(n,this.keys,this.overrides,void 0,this.logService)}mergeContents(e,t){for(let i of Object.keys(t))i in e&&Xi(e[i])&&Xi(t[i])?this.mergeContents(e[i],t[i]):e[i]=Xw(t[i])}getContentsForOverrideIdentifer(e){let t=null,i=null,n=e=>{e&&(i?this.mergeContents(i,e):i=Xw(e))};for(let s of this.overrides)1===s.identifiers.length&&s.identifiers[0]===e?t=s.contents:s.identifiers.includes(e)&&n(s.contents);return n(t),i}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(e,t){this.updateValue(e,t,!0)}setValue(e,t){this.updateValue(e,t,!1)}removeValue(e){let t=this.keys.indexOf(e);-1!==t&&(this.keys.splice(t,1),or(this.contents,e),gm.test(e)&&this.overrides.splice(this.overrides.findIndex(t=>Mr(t.identifiers,pm(e))),1))}updateValue(e,t,i){if(rr(this.contents,e,t,e=>this.logService.error(e)),i||(i=-1===this.keys.indexOf(e)),i&&this.keys.push(e),gm.test(e)){let t=this.contents[e],i=pm(e),n={identifiers:i,keys:Object.keys(t),contents:sr(t,e=>this.logService.error(e))},s=this.overrides.findIndex(e=>Mr(e.identifiers,i));-1===s?this.overrides.push(n):this.overrides[s]=n}}},MI=class{constructor(e,t){this._name=e,this.logService=t,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[],this._parseErrors=[]}get configurationModel(){return this._configurationModel||RI.createEmptyModel(this.logService)}get restrictedConfigurations(){return this._restrictedConfigurations}get errors(){return this._parseErrors}parse(e,t){if(!rn(e)){let i=this.doParseContent(e);this.parseRaw(i,t)}}reparse(e){this._raw&&this.parseRaw(this._raw,e)}parseRaw(e,t){this._raw=e;let{contents:i,keys:n,overrides:s,restricted:r,hasExcludedProperties:o}=this.doParseRaw(e,t);this._configurationModel=new RI(i,n,s,o?[e]:void 0,this.logService),this._restrictedConfigurations=r||[]}doParseContent(e){let t={},i=null,n=[],s=[];function r(e){Array.isArray(n)?n.push(e):null!==i&&(n[i]=e)}let o={onObjectBegin:()=>{let e={};r(e),s.push(n),n=e,i=null},onObjectProperty:e=>{i=e},onObjectEnd:()=>{n=s.pop()},onArrayBegin:()=>{let e=[];r(e),s.push(n),n=e,i=null},onArrayEnd:()=>{n=s.pop()},onLiteralValue:r,onError:(e,t,i)=>{}};if(e)try{yr(e,o),t=n[0]||{}}catch(e){this.logService.error("Error while parsing settings file ".concat(this._name,": ").concat(e)),this._parseErrors=[e]}return t}doParseRaw(e,t){let i=Tn.as(em),n=i.getConfigurationProperties(),s=i.getExcludedConfigurationProperties(),r=this.filter(e,n,s,!0,t);return{contents:sr(e=r.raw,e=>this.logService.error("Conflict in settings file ".concat(this._name,": ").concat(e))),keys:Object.keys(e),overrides:this.toOverrides(e,e=>this.logService.error("Conflict in settings file ".concat(this._name,": ").concat(e))),restricted:r.restricted,hasExcludedProperties:r.hasExcludedProperties}}filter(e,t,i,n,s){var r;let o=!1;if((null===s||void 0===s||!s.scopes)&&(null===s||void 0===s||!s.skipRestricted)&&(null===s||void 0===s||!s.skipUnregistered)&&(null===s||void 0===s||null===(r=s.exclude)||void 0===r||!r.length))return{raw:e,restricted:[],hasExcludedProperties:o};let a={},l=[];for(let h in e)if(gm.test(h)&&n){let n=this.filter(e[h],t,i,!1,s);a[h]=n.raw,o||(o=n.hasExcludedProperties),l.push(...n.restricted)}else{let n=t[h];null!==n&&void 0!==n&&n.restricted&&l.push(h),this.shouldInclude(h,n,i,s)?a[h]=e[h]:o=!0}return{raw:a,restricted:l,hasExcludedProperties:o}}shouldInclude(e,t,i,n){var s,r;if(null!==(s=n.exclude)&&void 0!==s&&s.includes(e))return!1;if(null!==(r=n.include)&&void 0!==r&&r.includes(e))return!0;if(n.skipRestricted&&null!==t&&void 0!==t&&t.restricted||n.skipUnregistered&&!t)return!1;let o=null!==t&&void 0!==t?t:i[e],a=o?void 0===o.scope?Jf.WINDOW:o.scope:void 0;return void 0===a||void 0===n.scopes||n.scopes.includes(a)}toOverrides(e,t){let i=[];for(let n of Object.keys(e))if(gm.test(n)){let s={},r=e[n];for(let e in r)s[e]=r[e];i.push({identifiers:pm(n),keys:Object.keys(s),contents:sr(s,t)})}return i}},PI=class{constructor(e,t,i,n,s,r,o,a,l,h,d,c,u){this.key=e,this.overrides=t,this._value=i,this.overrideIdentifiers=n,this.defaultConfiguration=s,this.policyConfiguration=r,this.applicationConfiguration=o,this.userConfiguration=a,this.localUserConfiguration=l,this.remoteUserConfiguration=h,this.workspaceConfiguration=d,this.folderConfigurationModel=c,this.memoryConfigurationModel=u}get value(){return OI(this._value)}toInspectValue(e){return void 0!==(null===e||void 0===e?void 0:e.value)||void 0!==(null===e||void 0===e?void 0:e.override)||void 0!==(null===e||void 0===e?void 0:e.overrides)?e:void 0}get defaultInspectValue(){return this._defaultInspectValue||(this._defaultInspectValue=this.defaultConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._defaultInspectValue}get defaultValue(){return this.defaultInspectValue.merged}get default(){return this.toInspectValue(this.defaultInspectValue)}get policyInspectValue(){return void 0===this._policyInspectValue&&(this._policyInspectValue=this.policyConfiguration?this.policyConfiguration.inspect(this.key):null),this._policyInspectValue}get policyValue(){var e;return null===(e=this.policyInspectValue)||void 0===e?void 0:e.merged}get policy(){var e;return void 0===(null===(e=this.policyInspectValue)||void 0===e?void 0:e.value)?void 0:{value:this.policyInspectValue.value}}get applicationInspectValue(){return void 0===this._applicationInspectValue&&(this._applicationInspectValue=this.applicationConfiguration?this.applicationConfiguration.inspect(this.key):null),this._applicationInspectValue}get applicationValue(){var e;return null===(e=this.applicationInspectValue)||void 0===e?void 0:e.merged}get application(){return this.toInspectValue(this.applicationInspectValue)}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.userConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get userValue(){return this.userInspectValue.merged}get user(){return this.toInspectValue(this.userInspectValue)}get userLocalInspectValue(){return this._userLocalInspectValue||(this._userLocalInspectValue=this.localUserConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userLocalInspectValue}get userLocalValue(){return this.userLocalInspectValue.merged}get userLocal(){return this.toInspectValue(this.userLocalInspectValue)}get userRemoteInspectValue(){return this._userRemoteInspectValue||(this._userRemoteInspectValue=this.remoteUserConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userRemoteInspectValue}get userRemoteValue(){return this.userRemoteInspectValue.merged}get userRemote(){return this.toInspectValue(this.userRemoteInspectValue)}get workspaceInspectValue(){return void 0===this._workspaceInspectValue&&(this._workspaceInspectValue=this.workspaceConfiguration?this.workspaceConfiguration.inspect(this.key,this.overrides.overrideIdentifier):null),this._workspaceInspectValue}get workspaceValue(){var e;return null===(e=this.workspaceInspectValue)||void 0===e?void 0:e.merged}get workspace(){return this.toInspectValue(this.workspaceInspectValue)}get workspaceFolderInspectValue(){return void 0===this._workspaceFolderInspectValue&&(this._workspaceFolderInspectValue=this.folderConfigurationModel?this.folderConfigurationModel.inspect(this.key,this.overrides.overrideIdentifier):null),this._workspaceFolderInspectValue}get workspaceFolderValue(){var e;return null===(e=this.workspaceFolderInspectValue)||void 0===e?void 0:e.merged}get workspaceFolder(){return this.toInspectValue(this.workspaceFolderInspectValue)}get memoryInspectValue(){return void 0===this._memoryInspectValue&&(this._memoryInspectValue=this.memoryConfigurationModel.inspect(this.key,this.overrides.overrideIdentifier)),this._memoryInspectValue}get memoryValue(){return this.memoryInspectValue.merged}get memory(){return this.toInspectValue(this.memoryInspectValue)}},BI=class e{constructor(e,t,i,n,s,r,o,a,l,h){this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=i,this._localUserConfiguration=n,this._remoteUserConfiguration=s,this._workspaceConfiguration=r,this._folderConfigurations=o,this._memoryConfiguration=a,this._memoryConfigurationByResource=l,this.logService=h,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new so,this._userConfiguration=null}getValue(e,t,i){return this.getConsolidatedConfigurationModel(e,t,i).getValue(e)}updateValue(e,t){let i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.resource?(i=this._memoryConfigurationByResource.get(n.resource),i||(i=RI.createEmptyModel(this.logService),this._memoryConfigurationByResource.set(n.resource,i))):i=this._memoryConfiguration,void 0===t?i.removeValue(e):i.setValue(e,t),n.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,i){let n=this.getConsolidatedConfigurationModel(e,t,i),s=this.getFolderConfigurationModelForResource(t.resource,i),r=t.resource&&this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration,o=new Set;for(let a of n.overrides)for(let t of a.identifiers)void 0!==n.getOverrideValue(e,t)&&o.add(t);return new PI(e,t,n.getValue(e),o.size?[...o]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,i?this._workspaceConfiguration:void 0,s||void 0,r)}keys(e){let t=this.getFolderConfigurationModelForResource(void 0,e);return{default:this._defaultConfiguration.keys.slice(0),policy:this._policyConfiguration.keys.slice(0),user:this.userConfiguration.keys.slice(0),workspace:this._workspaceConfiguration.keys.slice(0),workspaceFolder:t?t.keys.slice(0):[]}}updateDefaultConfiguration(e){this._defaultConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updatePolicyConfiguration(e){this._policyConfiguration=e}updateApplicationConfiguration(e){this._applicationConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateLocalUserConfiguration(e){this._localUserConfiguration=e,this._userConfiguration=null,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateRemoteUserConfiguration(e){this._remoteUserConfiguration=e,this._userConfiguration=null,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateWorkspaceConfiguration(e){this._workspaceConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateFolderConfiguration(e,t){this._folderConfigurations.set(e,t),this._foldersConsolidatedConfigurations.delete(e)}deleteFolderConfiguration(e){this.folderConfigurations.delete(e),this._foldersConsolidatedConfigurations.delete(e)}compareAndUpdateDefaultConfiguration(e,t){let i=[];if(!t){let{added:i,updated:n,removed:s}=HI(this._defaultConfiguration,e);t=[...i,...n,...s]}for(let n of t)for(let t of pm(n)){let n=this._defaultConfiguration.getKeysForOverrideIdentifier(t),s=e.getKeysForOverrideIdentifier(t),r=[...s.filter(e=>-1===n.indexOf(e)),...n.filter(e=>-1===s.indexOf(e)),...n.filter(i=>!dS(this._defaultConfiguration.override(t).getValue(i),e.override(t).getValue(i)))];i.push([t,r])}return this.updateDefaultConfiguration(e),{keys:t,overrides:i}}compareAndUpdatePolicyConfiguration(e){let{added:t,updated:i,removed:n}=HI(this._policyConfiguration,e),s=[...t,...i,...n];return s.length&&this.updatePolicyConfiguration(e),{keys:s,overrides:[]}}compareAndUpdateApplicationConfiguration(e){let{added:t,updated:i,removed:n,overrides:s}=HI(this.applicationConfiguration,e),r=[...t,...i,...n];return r.length&&this.updateApplicationConfiguration(e),{keys:r,overrides:s}}compareAndUpdateLocalUserConfiguration(e){let{added:t,updated:i,removed:n,overrides:s}=HI(this.localUserConfiguration,e),r=[...t,...i,...n];return r.length&&this.updateLocalUserConfiguration(e),{keys:r,overrides:s}}compareAndUpdateRemoteUserConfiguration(e){let{added:t,updated:i,removed:n,overrides:s}=HI(this.remoteUserConfiguration,e),r=[...t,...i,...n];return r.length&&this.updateRemoteUserConfiguration(e),{keys:r,overrides:s}}compareAndUpdateWorkspaceConfiguration(e){let{added:t,updated:i,removed:n,overrides:s}=HI(this.workspaceConfiguration,e),r=[...t,...i,...n];return r.length&&this.updateWorkspaceConfiguration(e),{keys:r,overrides:s}}compareAndUpdateFolderConfiguration(e,t){let i=this.folderConfigurations.get(e),{added:n,updated:s,removed:r,overrides:o}=HI(i,t),a=[...n,...s,...r];return(a.length||!i)&&this.updateFolderConfiguration(e,t),{keys:a,overrides:o}}compareAndDeleteFolderConfiguration(e){let t=this.folderConfigurations.get(e);if(!t)throw Error("Unknown folder");this.deleteFolderConfiguration(e);let{added:i,updated:n,removed:s,overrides:r}=HI(t,void 0);return{keys:[...i,...n,...s],overrides:r}}get defaults(){return this._defaultConfiguration}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){if(!this._userConfiguration)if(this._remoteUserConfiguration.isEmpty())this._userConfiguration=this._localUserConfiguration;else{let e=this._localUserConfiguration.merge(this._remoteUserConfiguration);this._userConfiguration=new RI(e.contents,e.keys,e.overrides,void 0,this.logService)}return this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}get workspaceConfiguration(){return this._workspaceConfiguration}get folderConfigurations(){return this._folderConfigurations}getConsolidatedConfigurationModel(e,t,i){let n=this.getConsolidatedConfigurationModelForResource(t,i);if(t.overrideIdentifier&&(n=n.override(t.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&void 0!==this._policyConfiguration.getValue(e)){n=n.merge();for(let e of this._policyConfiguration.keys)n.setValue(e,this._policyConfiguration.getValue(e))}return n}getConsolidatedConfigurationModelForResource(e,t){let{resource:i}=e,n=this.getWorkspaceConsolidatedConfiguration();if(t&&i){let e=t.getFolder(i);e&&(n=this.getFolderConsolidatedConfiguration(e.uri)||n);let s=this._memoryConfigurationByResource.get(i);s&&(n=n.merge(s))}return n}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){let i=this.getWorkspaceConsolidatedConfiguration(),n=this._folderConfigurations.get(e);n?(t=i.merge(n),this._foldersConsolidatedConfigurations.set(e,t)):t=i}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){let i=t.getFolder(e);if(i)return this._folderConfigurations.get(i.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys,raw:Array.isArray(this.applicationConfiguration.raw)?void 0:this.applicationConfiguration.raw},userLocal:{contents:this.localUserConfiguration.contents,overrides:this.localUserConfiguration.overrides,keys:this.localUserConfiguration.keys,raw:Array.isArray(this.localUserConfiguration.raw)?void 0:this.localUserConfiguration.raw},userRemote:{contents:this.remoteUserConfiguration.contents,overrides:this.remoteUserConfiguration.overrides,keys:this.remoteUserConfiguration.keys,raw:Array.isArray(this.remoteUserConfiguration.raw)?void 0:this.remoteUserConfiguration.raw},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{let{contents:i,overrides:n,keys:s}=this._folderConfigurations.get(t);return e.push([t,{contents:i,overrides:n,keys:s}]),e},[])}}allKeys(){let e=new Set;return this._defaultConfiguration.keys.forEach(t=>e.add(t)),this.userConfiguration.keys.forEach(t=>e.add(t)),this._workspaceConfiguration.keys.forEach(t=>e.add(t)),this._folderConfigurations.forEach(t=>t.keys.forEach(t=>e.add(t))),[...e.values()]}allOverrideIdentifiers(){let e=new Set;return this._defaultConfiguration.getAllOverrideIdentifiers().forEach(t=>e.add(t)),this.userConfiguration.getAllOverrideIdentifiers().forEach(t=>e.add(t)),this._workspaceConfiguration.getAllOverrideIdentifiers().forEach(t=>e.add(t)),this._folderConfigurations.forEach(t=>t.getAllOverrideIdentifiers().forEach(t=>e.add(t))),[...e.values()]}getAllKeysForOverrideIdentifier(e){let t=new Set;return this._defaultConfiguration.getKeysForOverrideIdentifier(e).forEach(e=>t.add(e)),this.userConfiguration.getKeysForOverrideIdentifier(e).forEach(e=>t.add(e)),this._workspaceConfiguration.getKeysForOverrideIdentifier(e).forEach(e=>t.add(e)),this._folderConfigurations.forEach(i=>i.getKeysForOverrideIdentifier(e).forEach(e=>t.add(e))),[...t.values()]}static parse(t,i){return new e(this.parseConfigurationModel(t.defaults,i),this.parseConfigurationModel(t.policy,i),this.parseConfigurationModel(t.application,i),this.parseConfigurationModel(t.userLocal,i),this.parseConfigurationModel(t.userRemote,i),this.parseConfigurationModel(t.workspace,i),t.folders.reduce((e,t)=>(e.set(Gs.revive(t[0]),this.parseConfigurationModel(t[1],i)),e),new so),RI.createEmptyModel(i),new so,i)}static parseConfigurationModel(e,t){return new RI(e.contents,e.keys,e.overrides,e.raw,t)}},UI=class{constructor(e,t,i,n,s){this.change=e,this.previous=t,this.currentConfiguraiton=i,this.currentWorkspace=n,this.logService=s,this._marker="\n",this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=46,this.affectedKeys=new Set,this._previousConfiguration=void 0;for(let r of e.keys)this.affectedKeys.add(r);for(let[,r]of e.overrides)for(let e of r)this.affectedKeys.add(e);this._affectsConfigStr=this._marker;for(let r of this.affectedKeys)this._affectsConfigStr+=r+this._marker}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=BI.parse(this.previous.data,this.logService)),this._previousConfiguration}affectsConfiguration(e,t){var i;let n=this._marker+e,s=this._affectsConfigStr.indexOf(n);if(s<0)return!1;let r=s+n.length;if(r>=this._affectsConfigStr.length)return!1;let o=this._affectsConfigStr.charCodeAt(r);return(o===this._markerCode1||o===this._markerCode2)&&(!t||!dS(this.previousConfiguration?this.previousConfiguration.getValue(e,t,null===(i=this.previous)||void 0===i?void 0:i.workspace):void 0,this.currentConfiguraiton.getValue(e,t,this.currentWorkspace)))}};function HI(e,t){let{added:i,removed:n,updated:s}=WI(null===t||void 0===t?void 0:t.rawConfiguration,null===e||void 0===e?void 0:e.rawConfiguration),r=[],o=(null===e||void 0===e?void 0:e.getAllOverrideIdentifiers())||[],a=(null===t||void 0===t?void 0:t.getAllOverrideIdentifiers())||[];if(t){let e=a.filter(e=>!o.includes(e));for(let i of e)r.push([i,t.getKeysForOverrideIdentifier(i)])}if(e){let t=o.filter(e=>!a.includes(e));for(let i of t)r.push([i,e.getKeysForOverrideIdentifier(i)])}if(t&&e)for(let l of o)if(a.includes(l)){let i=WI({contents:e.getOverrideValue(void 0,l)||{},keys:e.getKeysForOverrideIdentifier(l)},{contents:t.getOverrideValue(void 0,l)||{},keys:t.getKeysForOverrideIdentifier(l)});r.push([l,[...i.added,...i.removed,...i.updated]])}return{added:i,removed:n,updated:s,overrides:r}}function WI(e,t){let i=e?t?e.keys.filter(e=>-1===t.keys.indexOf(e)):[...e.keys]:[],n=t?e?t.keys.filter(t=>-1===e.keys.indexOf(t)):[...t.keys]:[],s=[];if(e&&t)for(let r of t.keys)-1!==e.keys.indexOf(r)&&(dS(lr(t.contents,r),lr(e.contents,r))||s.push(r));return{added:i,removed:n,updated:s}}var VI=new class{constructor(){this._onDidChange=new Ro,this.onDidChange=this._onDidChange.event,this._enabled=!0}get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}},zI=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/,KI=class extends Co{get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:_o.None}get inChordMode(){return this._currentChords.length>0}constructor(e,t,i,n,s){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=i,this._notificationService=n,this._logService=s,this._onDidUpdateKeybindings=this._register(new Ro),this._currentChords=[],this._currentChordChecker=new Ol,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=qI.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new Fl,this._currentlyDispatchingCommandId=null,this._logging=!1}registerContainer(e){return Co.None}dispose(){super.dispose()}getDefaultKeybindingsContent(){return""}toggleLogging(){return this._logging=!this._logging,this._logging}_log(e){this._logging&&this._logService.info("[KeybindingService]: ".concat(e))}getDefaultKeybindings(){return this._getResolver().getDefaultKeybindings()}getKeybindings(){return this._getResolver().getKeybindings()}customKeybindingsCount(){return 0}lookupKeybindings(e){return Pr(this._getResolver().lookupKeybindings(e).map(e=>e.resolvedKeybinding))}lookupKeybinding(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService,i);if(n)return n.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){this._log("/ Soft dispatching keyboard event");let i=this.resolveKeyboardEvent(e);if(i.hasMultipleChords())return console.warn("keyboard event should not be mapped to multiple chords"),yD;let[n]=i.getDispatchChords();if(null===n)return this._log("\\ Keyboard event cannot be dispatched"),yD;let s=this._contextKeyService.getContext(t),r=this._currentChords.map(e=>{let{keypress:t}=e;return t});return this._getResolver().resolve(s,r,n)}_scheduleLeaveChordMode(){let e=Date.now();this._currentChordChecker.cancelAndSet(()=>{this._documentHasFocus()?Date.now()-e>5e3&&this._leaveChordMode():this._leaveChordMode()},500)}_expectAnotherChord(e,t){switch(this._currentChords.push({keypress:e,label:t}),this._currentChords.length){case 0:throw Wi("impossible");case 1:this._currentChordStatusMessage=this._notificationService.status(Li(1942,"({0}) was pressed. Waiting for second key of chord...",t));break;default:{let e=this._currentChords.map(e=>{let{label:t}=e;return t}).join(", ");this._currentChordStatusMessage=this._notificationService.status(Li(1943,"({0}) was pressed. Waiting for next key of chord...",e))}}this._scheduleLeaveChordMode(),VI.enabled&&VI.disable()}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage=(this._currentChordStatusMessage.close(),null)),this._currentChordChecker.cancel(),this._currentChords=[],VI.enable()}dispatchByUserSettingsLabel(e,t){this._log("/ Dispatching keybinding triggered via menu entry accelerator - ".concat(e));let i=this.resolveUserBinding(e);0===i.length?this._log("\\ Could not resolve - ".concat(e)):this._doDispatch(i[0],t,!1)}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){let i=this.resolveKeyboardEvent(e),[n]=i.getSingleModifierDispatchChords();if(n)return this._ignoreSingleModifiers.has(n)?(this._log("+ Ignoring single modifier ".concat(n," due to it being pressed together with other keys.")),this._ignoreSingleModifiers=qI.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=qI.EMPTY,null===this._currentSingleModifier?(this._log("+ Storing single modifier for possible chord ".concat(n,".")),this._currentSingleModifier=n,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):n===this._currentSingleModifier?(this._log("/ Dispatching single modifier chord ".concat(n," ").concat(n)),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(i,t,!0)):(this._log("+ Clearing single modifier due to modifier mismatch: ".concat(this._currentSingleModifier," ").concat(n)),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));let[s]=i.getChords();return this._ignoreSingleModifiers=new qI(s),null!==this._currentSingleModifier&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!1;if(e.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),!1;let s=null,r=null;if(i){let[t]=e.getSingleModifierDispatchChords();s=t,r=t?[t]:[]}else[s]=e.getDispatchChords(),r=this._currentChords.map(e=>{let{keypress:t}=e;return t});if(null===s)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),n;let o=this._contextKeyService.getContext(t),a=e.getLabel(),l=this._getResolver().resolve(o,r,s);switch(l.kind){case _D.NoMatchingKb:if(this._logService.trace("KeybindingService#dispatch",a,"[ No matching keybinding ]"),this.inChordMode){let e=this._currentChords.map(e=>{let{label:t}=e;return t}).join(", ");this._log('+ Leaving multi-chord mode: Nothing bound to "'.concat(e,", ").concat(a,'".')),this._notificationService.status(Li(1944,"The key combination ({0}, {1}) is not a command.",e,a),{hideAfter:1e4}),this._leaveChordMode(),n=!0}return n;case _D.MoreChordsNeeded:return this._logService.trace("KeybindingService#dispatch",a,"[ Several keybindings match - more chords needed ]"),n=!0,this._expectAnotherChord(s,a),this._log(1===this._currentChords.length?"+ Entering multi-chord mode...":"+ Continuing multi-chord mode..."),n;case _D.KbFound:if(this._logService.trace("KeybindingService#dispatch",a,"[ Will dispatch command ".concat(l.commandId," ]")),null===l.commandId||""===l.commandId){if(this.inChordMode){let e=this._currentChords.map(e=>{let{label:t}=e;return t}).join(", ");this._log('+ Leaving chord mode: Nothing bound to "'.concat(e,", ").concat(a,'".')),this._notificationService.status(Li(1944,"The key combination ({0}, {1}) is not a command.",e,a),{hideAfter:1e4}),this._leaveChordMode(),n=!0}}else{var h;this.inChordMode&&this._leaveChordMode(),l.isBubble||(n=!0),this._log("+ Invoking command ".concat(l.commandId,".")),this._currentlyDispatchingCommandId=l.commandId;try{void 0===l.commandArgs?this._commandService.executeCommand(l.commandId).then(void 0,e=>this._notificationService.warn(e)):this._commandService.executeCommand(l.commandId,l.commandArgs).then(void 0,e=>this._notificationService.warn(e))}finally{this._currentlyDispatchingCommandId=null}zI.test(l.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:l.commandId,from:"keybinding",detail:null!==(h=e.getUserSettingsLabel())&&void 0!==h?h:void 0})}return n}}mightProducePrintableCharacter(e){return!e.ctrlKey&&!e.metaKey&&(e.keyCode>=Kv.KeyA&&e.keyCode<=Kv.KeyZ||e.keyCode>=Kv.Digit0&&e.keyCode<=Kv.Digit9)}},qI=(yt=class{constructor(e){this._ctrlKey=!!e&&e.ctrlKey,this._shiftKey=!!e&&e.shiftKey,this._altKey=!!e&&e.altKey,this._metaKey=!!e&&e.metaKey}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}},{_:yt.EMPTY=new yt(null)},yt),GI=class{constructor(e,t,i,n,s,r,o){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.chords=e?jI(e.getDispatchChords()):[],e&&0===this.chords.length&&(this.chords=jI(e.getSingleModifierDispatchChords())),this.bubble=!!t&&t.charCodeAt(0)===En.Caret,this.command=this.bubble?t.substr(1):t,this.commandArgs=i,this.when=n,this.isDefault=s,this.extensionId=r,this.isBuiltinExtension=o}};function jI(e){let t=[];for(let i=0,n=e.length;i<n;i++){let n=e[i];if(!n)return[];t.push(n)}return t}var YI=class{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;this.modifierLabels=[null],this.modifierLabels[ts.Macintosh]=e,this.modifierLabels[ts.Windows]=t,this.modifierLabels[ts.Linux]=i}toLabel(e,t,i){if(0===t.length)return null;let n=[];for(let s=0,r=t.length;s<r;s++){let r=t[s],o=i(r);if(null===o)return null;n[s]=JI(r,o,this.modifierLabels[e])}return n.join(" ")}},QI=new YI({ctrlKey:"\u2303",shiftKey:"\u21e7",altKey:"\u2325",metaKey:"\u2318",separator:""},{ctrlKey:Li(118,"Ctrl"),shiftKey:Li(119,"Shift"),altKey:Li(120,"Alt"),metaKey:Li(121,"Windows"),separator:"+"},{ctrlKey:Li(118,"Ctrl"),shiftKey:Li(119,"Shift"),altKey:Li(120,"Alt"),metaKey:Li(122,"Super"),separator:"+"}),$I=new YI({ctrlKey:Li(123,"Control"),shiftKey:Li(124,"Shift"),altKey:Li(125,"Option"),metaKey:Li(126,"Command"),separator:"+"},{ctrlKey:Li(123,"Control"),shiftKey:Li(124,"Shift"),altKey:Li(127,"Alt"),metaKey:Li(128,"Windows"),separator:"+"},{ctrlKey:Li(123,"Control"),shiftKey:Li(124,"Shift"),altKey:Li(127,"Alt"),metaKey:Li(129,"Super"),separator:"+"}),XI=new YI({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),ZI=new YI({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function JI(e,t,i){if(null===t)return"";let n=[];return e.ctrlKey&&n.push(i.ctrlKey),e.shiftKey&&n.push(i.shiftKey),e.altKey&&n.push(i.altKey),e.metaKey&&n.push(i.metaKey),""!==t&&n.push(t),n.join(i.separator)}var ex,tx,ix,nx=class extends p_{constructor(e,t){if(super(),0===t.length)throw Hi("chords");this._os=e,this._chords=t}getLabel(){return QI.toLabel(this._os,this._chords,e=>this._getLabel(e))}getAriaLabel(){return $I.toLabel(this._os,this._chords,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._chords.length>1||this._chords[0].isDuplicateModifierCase()?null:XI.toLabel(this._os,this._chords,e=>this._getElectronAccelerator(e))}getUserSettingsLabel(){return ZI.toLabel(this._os,this._chords,e=>this._getUserSettingsLabel(e))}isWYSIWYG(){return this._chords.every(e=>this._isWYSIWYG(e))}hasMultipleChords(){return this._chords.length>1}getChords(){return this._chords.map(e=>this._getChord(e))}_getChord(e){return new g_(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchChords(){return this._chords.map(e=>this._getChordDispatch(e))}getSingleModifierDispatchChords(){return this._chords.map(e=>this._getSingleModifierChordDispatch(e))}},sx=class e extends nx{constructor(e,t){super(t,e)}_keyCodeToUILabel(e){if(this._os===ts.Macintosh)switch(e){case Kv.LeftArrow:return"\u2190";case Kv.UpArrow:return"\u2191";case Kv.RightArrow:return"\u2192";case Kv.DownArrow:return"\u2193"}return jv.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":jv.toString(e.keyCode)}_getElectronAccelerator(e){return jv.toElectronAccelerator(e.keyCode)}_getUserSettingsLabel(e){if(e.isDuplicateModifierCase())return"";let t=jv.toUserSettingsUS(e.keyCode);return t&&t.toLowerCase()}_isWYSIWYG(){return!0}_getChordDispatch(t){return e.getDispatchStr(t)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=jv.toString(e.keyCode),t}_getSingleModifierChordDispatch(e){return e.keyCode!==Kv.Ctrl||e.shiftKey||e.altKey||e.metaKey?e.keyCode!==Kv.Shift||e.ctrlKey||e.altKey||e.metaKey?e.keyCode!==Kv.Alt||e.ctrlKey||e.shiftKey||e.metaKey?e.keyCode!==Kv.Meta||e.ctrlKey||e.shiftKey||e.altKey?null:"meta":"alt":"shift":"ctrl"}static _scanCodeToKeyCode(e){let t=r_[e];if(t!==Kv.DependsOnKbLayout)return t;switch(e){case qv.KeyA:return Kv.KeyA;case qv.KeyB:return Kv.KeyB;case qv.KeyC:return Kv.KeyC;case qv.KeyD:return Kv.KeyD;case qv.KeyE:return Kv.KeyE;case qv.KeyF:return Kv.KeyF;case qv.KeyG:return Kv.KeyG;case qv.KeyH:return Kv.KeyH;case qv.KeyI:return Kv.KeyI;case qv.KeyJ:return Kv.KeyJ;case qv.KeyK:return Kv.KeyK;case qv.KeyL:return Kv.KeyL;case qv.KeyM:return Kv.KeyM;case qv.KeyN:return Kv.KeyN;case qv.KeyO:return Kv.KeyO;case qv.KeyP:return Kv.KeyP;case qv.KeyQ:return Kv.KeyQ;case qv.KeyR:return Kv.KeyR;case qv.KeyS:return Kv.KeyS;case qv.KeyT:return Kv.KeyT;case qv.KeyU:return Kv.KeyU;case qv.KeyV:return Kv.KeyV;case qv.KeyW:return Kv.KeyW;case qv.KeyX:return Kv.KeyX;case qv.KeyY:return Kv.KeyY;case qv.KeyZ:return Kv.KeyZ;case qv.Digit1:return Kv.Digit1;case qv.Digit2:return Kv.Digit2;case qv.Digit3:return Kv.Digit3;case qv.Digit4:return Kv.Digit4;case qv.Digit5:return Kv.Digit5;case qv.Digit6:return Kv.Digit6;case qv.Digit7:return Kv.Digit7;case qv.Digit8:return Kv.Digit8;case qv.Digit9:return Kv.Digit9;case qv.Digit0:return Kv.Digit0;case qv.Minus:return Kv.Minus;case qv.Equal:return Kv.Equal;case qv.BracketLeft:return Kv.BracketLeft;case qv.BracketRight:return Kv.BracketRight;case qv.Backslash:return Kv.Backslash;case qv.IntlHash:return Kv.Unknown;case qv.Semicolon:return Kv.Semicolon;case qv.Quote:return Kv.Quote;case qv.Backquote:return Kv.Backquote;case qv.Comma:return Kv.Comma;case qv.Period:return Kv.Period;case qv.Slash:return Kv.Slash;case qv.IntlBackslash:return Kv.IntlBackslash}return Kv.Unknown}static _toKeyCodeChord(e){if(!e)return null;if(e instanceof c_)return e;let t=this._scanCodeToKeyCode(e.scanCode);return t===Kv.Unknown?null:new c_(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveKeybinding(t,i){let n=jI(t.chords.map(e=>this._toKeyCodeChord(e)));return n.length>0?[new e(n,i)]:[]}},rx=fn("labelService");!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.OPTIONAL=1]="OPTIONAL",e[e.SILENT=2]="SILENT",e[e.URGENT=3]="URGENT"}(ex||(ex={})),function(e){e[e.WORKSPACE=0]="WORKSPACE",e[e.PROFILE=1]="PROFILE",e[e.APPLICATION=2]="APPLICATION"}(tx||(tx={})),function(e){e[e.OFF=0]="OFF",e[e.ERROR=1]="ERROR"}(ix||(ix={}));var ox,ax,lx=class{infinite(){}done(){}total(e){}worked(e){}},hx=fn("progressService"),dx=fn("editorProgressService");!function(e){e[e.NONE=0]="NONE",e[e.CRASH=1]="CRASH",e[e.ERROR=2]="ERROR",e[e.USAGE=3]="USAGE"}(ox||(ox={})),function(e){e.OFF="off",e.CRASH="crash",e.ERROR="error",e.ON="all"}(ax||(ax={}));var cx,ux,gx,px,fx,mx,vx,_x,bx,Cx=fn("contextService");!function(e){e.accessibilityHelpTitle=Li(853,"Accessibility Help"),e.openingDocs=Li(854,"Opening the Accessibility documentation page."),e.readonlyDiffEditor=Li(855,"You are in a read-only pane of a diff editor."),e.editableDiffEditor=Li(856,"You are in a pane of a diff editor."),e.readonlyEditor=Li(857,"You are in a read-only code editor."),e.editableEditor=Li(858,"You are in a code editor."),e.defaultWindowTitleIncludesEditorState=Li(859,"activeEditorState - such as modified, problems, and more, is included as a part of the window.title setting by default. Disable it with accessibility.windowTitleOptimized."),e.defaultWindowTitleExcludingEditorState=Li(860,"activeEditorState - such as modified, problems, and more, is currently not included as a part of the window.title setting by default. Enable it with accessibility.windowTitleOptimized."),e.toolbar=Li(861,"Around the workbench, when the screen reader announces you've landed in a toolbar, use narrow keys to navigate between the toolbar's actions."),e.changeConfigToOnMac=Li(862,"Configure the application to be optimized for usage with a Screen Reader (Command+E)."),e.changeConfigToOnWinLinux=Li(863,"Configure the application to be optimized for usage with a Screen Reader (Control+E)."),e.auto_on=Li(864,"The application is configured to be optimized for usage with a Screen Reader."),e.auto_off=Li(865,"The application is configured to never be optimized for usage with a Screen Reader."),e.screenReaderModeEnabled=Li(866,"Screen Reader Optimized Mode enabled."),e.screenReaderModeDisabled=Li(867,"Screen Reader Optimized Mode disabled."),e.tabFocusModeOnMsg=Li(868,"Pressing Tab in the current editor will move focus to the next focusable element. Toggle this behavior{0}.","<keybinding:editor.action.toggleTabFocusMode>"),e.tabFocusModeOffMsg=Li(869,"Pressing Tab in the current editor will insert the tab character. Toggle this behavior{0}.","<keybinding:editor.action.toggleTabFocusMode>"),e.stickScroll=Li(870,"Focus Sticky Scroll{0} to focus the currently nested scopes.","<keybinding:editor.action.focusStickyDebugConsole>"),e.suggestActions=Li(871,"Trigger the suggest widget{0} to show possible inline suggestions.","<keybinding:editor.action.triggerSuggest>"),e.acceptSuggestAction=Li(872,"Accept suggestion{0} to accept the currently selected suggestion.","<keybinding:acceptSelectedSuggestion>"),e.toggleSuggestionFocus=Li(873,"Toggle focus between the suggest widget and the editor{0} and toggle details focus with{1} to learn more about the suggestion.","<keybinding:focusSuggestion>","<keybinding:toggleSuggestionFocus>"),e.codeFolding=Li(874,"Use code folding to collapse blocks of code and focus on the code you're interested in via the Toggle Folding Command{0}.","<keybinding:editor.toggleFold>"),e.intellisense=Li(875,"Use Intellisense to improve coding efficiency and reduce errors. Trigger suggestions{0}.","<keybinding:editor.action.triggerSuggest>"),e.showOrFocusHover=Li(876,"Show or focus the hover{0} to read information about the current symbol.","<keybinding:editor.action.showHover>"),e.goToSymbol=Li(877,"Go to Symbol{0} to quickly navigate between symbols in the current file.","<keybinding:workbench.action.gotoSymbol>"),e.showAccessibilityHelpAction=Li(878,"Show Accessibility Help"),e.listSignalSounds=Li(879,"Run the command: List Signal Sounds for an overview of all sounds and their current status."),e.listAlerts=Li(880,"Run the command: List Signal Announcements for an overview of announcements and their current status."),e.quickChat=Li(881,"Toggle quick chat{0} to open or close a chat session.","<keybinding:workbench.action.quickchat.toggle>"),e.startInlineChat=Li(882,"Start inline chat{0} to create an in editor chat session.","<keybinding:inlineChat.start>"),e.startDebugging=Li(883,"The Debug: Start Debugging command{0} will start a debug session.","<keybinding:workbench.action.debug.start>"),e.setBreakpoint=Li(884,"The Debug: Inline Breakpoint command{0} will set or unset a breakpoint at the current cursor position in the active editor.","<keybinding:editor.debug.action.toggleInlineBreakpoint>"),e.addToWatch=Li(885,"The Debug: Add to Watch command{0} will add the selected text to the watch view.","<keybinding:editor.debug.action.selectionToWatch>"),e.debugExecuteSelection=Li(886,"The Debug: Execute Selection command{0} will execute the selected text in the debug console.","<keybinding:editor.debug.action.selectionToRepl>"),e.chatEditorModification=Li(887,"The editor contains pending modifications that have been made by chat."),e.chatEditorRequestInProgress=Li(888,"The editor is currently waiting for modifications to be made by chat."),e.chatEditActions=Li(889,"Navigate between edits in the editor with navigate previous{0} and next{1} and accept{2}, reject{3} or view the diff{4} for the current change. Accept edits across all files{5}.","<keybinding:chatEditor.action.navigatePrevious>","<keybinding:chatEditor.action.navigateNext>","<keybinding:chatEditor.action.acceptHunk>","<keybinding:chatEditor.action.undoHunk>","<keybinding:chatEditor.action.toggleDiff>","<keybinding:chatEditor.action.acceptAllEdits>")}(cx||(cx={})),function(e){e.inspectTokensAction=Li(890,"Developer: Inspect Tokens")}(ux||(ux={})),function(e){e.gotoLineActionLabel=Li(891,"Go to Line/Column..."),e.gotoOffsetActionLabel=Li(892,"Go to Offset...")}(gx||(gx={})),function(e){e.helpQuickAccessActionLabel=Li(893,"Show all Quick Access Providers")}(px||(px={})),function(e){e.quickCommandActionLabel=Li(894,"Command Palette"),e.quickCommandHelp=Li(895,"Show And Run Commands")}(fx||(fx={})),function(e){e.quickOutlineActionLabel=Li(896,"Go to Symbol..."),e.quickOutlineByCategoryActionLabel=Li(897,"Go to Symbol by Category...")}(mx||(mx={})),function(e){e.editorViewAccessibleLabel=Li(898,"Editor content")}(vx||(vx={})),function(e){e.toggleHighContrast=Li(899,"Toggle High Contrast Theme")}(_x||(_x={})),function(e){e.bulkEditServiceSummary=Li(900,"Made {0} edits in {1} files")}(bx||(bx={})),fn("workspaceTrustEnablementService");var yx=fn("workspaceTrustManagementService");fn("workspaceTrustRequestService");var wx="[/\\\\]",Sx="[^/\\\\]",kx=/\//g;function Ex(e,t){switch(e){case 0:return"";case 1:return"".concat(Sx,"*?");default:return"(?:".concat(wx,"|").concat(Sx,"+").concat(wx).concat(t?"|".concat(wx).concat(Sx,"+"):"",")*?")}}function Dx(e,t){if(!e)return[];let i=[],n=!1,s=!1,r="";for(let o of e){switch(o){case t:if(!n&&!s){i.push(r),r="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":s=!0;break;case"]":s=!1}r+=o}return r&&i.push(r),i}function Tx(e){if(!e)return"";let t="",i=Dx(e,"/");if(i.every(e=>"**"===e))t=".*";else{let e=!1;i.forEach((n,s)=>{if("**"===n){if(e)return;t+=Ex(2,s===i.length-1)}else{let e=!1,r="",o=!1,a="";for(let i of n)if("}"!==i&&e)r+=i;else{if(o&&("]"!==i||!a)){let e;e="-"===i?i:"^"!==i&&"!"!==i||a?"/"===i?"":sa(i):"^",a+=e;continue}switch(i){case"{":e=!0;continue;case"[":o=!0;continue;case"}":{let i="(?:".concat(Dx(r,",").map(e=>Tx(e)).join("|"),")");t+=i,e=!1,r="";break}case"]":t+="["+a+"]",o=!1,a="";break;case"?":t+=Sx;continue;case"*":t+=Ex(1);continue;default:t+=sa(i)}}s<i.length-1&&("**"!==i[s+1]||s+2<i.length)&&(t+=wx)}e="**"===n})}return t}var Ix=/^\*\*\/\*\.[\w\.-]+$/,xx=/^\*\*\/([\w\.-]+)\/?$/,Lx=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,Ax=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,Nx=/^\*\*((\/[\w\.-]+)+)\/?$/,Fx=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,Ox=new ho(1e4),Rx=function(){return!1},Mx=function(){return null};function Px(e,t){var i;if(!e)return Mx;let n;n="string"==typeof e?e:e.pattern,n=n.trim();let s,o=null!==(i=t.ignoreCase)&&void 0!==i&&i,a=(0,r.A)((0,r.A)({},t),{},{equals:o?pa:(e,t)=>e===t,endsWith:o?va:(e,t)=>e.endsWith(t),isEqualOrParent:(e,t)=>qa(e,t,!Gn||o)}),l="".concat(o?n.toLowerCase():n,"_").concat(!!t.trimForExclusions,"_").concat(o),h=Ox.get(l);return h||(h=Ix.test(n)?function(e,t,i){return function(n,s){return"string"==typeof n&&i.endsWith(n,e)?t:null}}(n.substring(4),n,a):(s=xx.exec(Ux(n,a)))?function(e,t,i){let n="/".concat(e),s="\\".concat(e),r=function(r,o){return"string"==typeof r?o?i.equals(o,e)?t:null:i.equals(r,e)||i.endsWith(r,n)||i.endsWith(r,s)?t:null:null},o=[e];return r.basenames=o,r.patterns=[t],r.allBasenames=o,r}(s[1],n,a):(t.trimForExclusions?Ax:Lx).test(n)?function(e,t){let i=Vx(e.slice(1,-1).split(",").map(e=>Px(e,t)).filter(e=>e!==Mx),e),n=i.length;if(!n)return Mx;if(1===n)return i[0];let s=function(t,n){for(let s=0,r=i.length;s<r;s++)if(i[s](t,n))return e;return null},r=i.find(e=>!!e.allBasenames);r&&(s.allBasenames=r.allBasenames);let o=i.reduce((e,t)=>t.allPaths?e.concat(t.allPaths):e,[]);return o.length&&(s.allPaths=o),s}(n,a):(s=Nx.exec(Ux(n,a)))?Hx(s[1].substring(1),n,!0,a):(s=Fx.exec(Ux(n,a)))?Hx(s[1],n,!1,a):function(e,t){try{let i=RegExp("^".concat(Tx(e),"$"),t.ignoreCase?"i":void 0);return function(t){return i.lastIndex=0,"string"==typeof t&&i.test(t)?e:null}}catch(i){return Mx}}(n,a),Ox.set(l,h)),Bx(h,e,a)}function Bx(e,t,i){if("string"==typeof t)return e;let n=function(n,s){return i.isEqualOrParent(n,t.base)?e(ra(n.substring(t.base.length),Us),s):null};return n.allBasenames=e.allBasenames,n.allPaths=e.allPaths,n.basenames=e.basenames,n.patterns=e.patterns,n}function Ux(e,t){return t.trimForExclusions&&e.endsWith("/**")?e.substring(0,e.length-2):e}function Hx(e,t,i,n){let s,r=Us===Ls.sep,o=r?e:e.replace(kx,Us),a=Us+o,l=Ls.sep+e;return s=i?function(i,s){return"string"==typeof i&&(n.equals(i,o)||n.endsWith(i,a)||!r&&(n.equals(i,e)||n.endsWith(i,l)))?t:null}:function(i,s){return"string"==typeof i&&(n.equals(i,o)||!r&&n.equals(i,e))?t:null},s.allPaths=[(i?"*/":"./")+e],s}function Wx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return Rx;if("string"==typeof e||function(e){let t=e;return!!t&&("string"==typeof t.base&&"string"==typeof t.pattern)}(e)){let i=Px(e,t);if(i===Mx)return Rx;let n=function(e,t){return!!i(e,t)};return i.allBasenames&&(n.allBasenames=i.allBasenames),i.allPaths&&(n.allPaths=i.allPaths),n}return function(e,t){let i=Vx(Object.getOwnPropertyNames(e).map(i=>function(e,t,i){if(!1===t)return Mx;let n=Px(e,i);if(n===Mx)return Mx;if("boolean"==typeof t)return n;if(t){let i=t.when;if("string"==typeof i){let t=(t,s,r,o)=>{if(!o||!n(t,s))return null;let a=o(i.replace("$(basename)",()=>r));return _l(a)?a.then(t=>t?e:null):a?e:null};return t.requiresSiblings=!0,t}}return n}(i,e[i],t)).filter(e=>e!==Mx)),n=i.length;if(!n)return Mx;if(!i.some(e=>!!e.requiresSiblings)){if(1===n)return i[0];let e=function(e,t){let n;for(let s=0,r=i.length;s<r;s++){let r=i[s](e,t);if("string"==typeof r)return r;_l(r)&&(n||(n=[]),n.push(r))}return n?(async()=>{for(let e of n){let t=await e;if("string"==typeof t)return t}return null})():null},t=i.find(e=>!!e.allBasenames);t&&(e.allBasenames=t.allBasenames);let s=i.reduce((e,t)=>t.allPaths?e.concat(t.allPaths):e,[]);return s.length&&(e.allPaths=s),e}let s=function(e,t,n){let s,r;for(let o=0,a=i.length;o<a;o++){let a=i[o];a.requiresSiblings&&n&&(t||(t=Ps(e)),s||(s=t.substring(0,t.length-Bs(e).length)));let l=a(e,t,s,n);if("string"==typeof l)return l;_l(l)&&(r||(r=[]),r.push(l))}return r?(async()=>{for(let e of r){let t=await e;if("string"==typeof t)return t}return null})():null},r=i.find(e=>!!e.allBasenames);r&&(s.allBasenames=r.allBasenames);let o=i.reduce((e,t)=>t.allPaths?e.concat(t.allPaths):e,[]);return o.length&&(s.allPaths=o),s}(e,t)}function Vx(e,t){let i=e.filter(e=>!!e.basenames);if(i.length<2)return e;let n,s=i.reduce((e,t)=>{let i=t.basenames;return i?e.concat(i):e},[]);if(t){n=[];for(let e=0,i=s.length;e<i;e++)n.push(t)}else n=i.reduce((e,t)=>{let i=t.patterns;return i?e.concat(i):e},[]);let r=function(e,t){if("string"!=typeof e)return null;if(!t){let i;for(i=e.length;i>0;i--){let t=e.charCodeAt(i-1);if(t===En.Slash||t===En.Backslash)break}t=e.substring(i)}let i=s.indexOf(t);return-1===i?null:n[i]};r.basenames=s,r.patterns=n,r.allBasenames=s;let o=e.filter(e=>!e.basenames);return o.push(r),o}var zx=[],Kx=[],qx=[];function Gx(e){!function(e,t,i){let n=function(e,t){return{id:e.id,mime:e.mime,filename:e.filename,extension:e.extension,filepattern:e.filepattern,firstline:e.firstline,userConfigured:t,filepatternParsed:e.filepattern?Wx(e.filepattern,{ignoreCase:!0}):void 0,filepatternOnPath:!!e.filepattern&&e.filepattern.indexOf(Ls.sep)>=0}}(e,t);zx.push(n),n.userConfigured?qx.push(n):Kx.push(n),i&&!n.userConfigured&&zx.forEach(e=>{e.mime===n.mime||e.userConfigured||(n.extension&&e.extension===n.extension&&console.warn("Overwriting extension <<".concat(n.extension,">> to now point to mime <<").concat(n.mime,">>")),n.filename&&e.filename===n.filename&&console.warn("Overwriting filename <<".concat(n.filename,">> to now point to mime <<").concat(n.mime,">>")),n.filepattern&&e.filepattern===n.filepattern&&console.warn("Overwriting filepattern <<".concat(n.filepattern,">> to now point to mime <<").concat(n.mime,">>")),n.firstline&&e.firstline===n.firstline&&console.warn("Overwriting firstline <<".concat(n.firstline,">> to now point to mime <<").concat(n.mime,">>")))})}(e,!1,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}function jx(e,t){return function(e,t){let i;if(e)switch(e.scheme){case Ha.file:i=e.fsPath;break;case Ha.data:i=rl.parseMetaData(e).get(rl.META_DATA_LABEL);break;case Ha.vscodeNotebookCell:i=void 0;break;default:i=e.path}if(!i)return[{id:"unknown",mime:Xf.unknown}];i=i.toLowerCase();let n=Ps(i),s=Yx(i,n,qx);if(s)return[s,{id:bm,mime:Xf.text}];let r=Yx(i,n,Kx);if(r)return[r,{id:bm,mime:Xf.text}];if(t){let e=function(e){if(Pa(e)&&(e=e.substring(1)),e.length>0)for(let t=zx.length-1;t>=0;t--){let i=zx[t];if(!i.firstline)continue;let n=e.match(i.firstline);if(n&&n.length>0)return i}}(t);if(e)return[e,{id:bm,mime:Xf.text}]}return[{id:"unknown",mime:Xf.unknown}]}(e,t).map(e=>e.id)}function Yx(e,t,i){let n,s,r;for(let a=i.length-1;a>=0;a--){let l=i[a];if(fa(t,l.filename)){n=l;break}if(l.filepattern&&(!s||l.filepattern.length>s.filepattern.length)){var o;let i=l.filepatternOnPath?e:t;(null===(o=l.filepatternParsed)||void 0===o?void 0:o.call(l,i))&&(s=l)}l.extension&&(!r||l.extension.length>r.extension.length)&&va(t,l.extension)&&(r=l)}return n||(s||(r||void 0))}var Qx,$x,Xx,Zx,Jx,eL,tL,iL,nL,sL,rL,oL,aL,lL,hL,dL,cL,uL,gL,pL,fL,mL,vL,_L,bL,CL,yL=Object.prototype.hasOwnProperty,wL="vs.editor.nullLanguage",SL=class{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(wL,jp.Null),this._register(bm,jp.PlainText),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;let t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||jp.Null}decodeLanguageId(e){return this._languageIdToLanguage[e]||wL}},kL=(wt=class e extends Co{constructor(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this._onDidChange=this._register(new Ro),this.onDidChange=this._onDidChange.event,e.instanceCount++,this._warnOnOverwrite=i,this.languageIdCodec=new SL,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},t&&(this._initializeFromRegistry(),this._register(_m.onDidChangeLanguages(e=>{this._initializeFromRegistry()})))}dispose(){e.instanceCount--,super.dispose()}setDynamicLanguages(e){this._dynamicLanguages=e,this._initializeFromRegistry()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},zx=zx.filter(e=>e.userConfigured),Kx=[];let e=[].concat(_m.getLanguages(),this._dynamicLanguages);this._registerLanguages(e)}registerLanguage(e){return _m.registerLanguage(e)}_registerLanguages(e){for(let t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(e=>{let t=this._languages[e];t.name&&(this._nameMap[t.name]=t.identifier),t.aliases.forEach(e=>{this._lowercaseNameMap[e.toLowerCase()]=t.identifier}),t.mimetypes.forEach(e=>{this._mimeTypesMap[e]=t.identifier})}),Tn.as(em).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){let t,i=e.id;yL.call(this._languages,i)?t=this._languages[i]:(this.languageIdCodec.register(i),t={identifier:i,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[i]=t),this._mergeLanguage(t,e)}_mergeLanguage(e,t){let i=t.id,n=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),n=t.mimetypes[0]),n||(n="text/x-".concat(i),e.mimetypes.push(n)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(let e of t.extensions)Gx({id:i,mime:n,extension:e},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(let o of t.filenames)Gx({id:i,mime:n,filename:o},this._warnOnOverwrite),e.filenames.push(o);if(Array.isArray(t.filenamePatterns))for(let o of t.filenamePatterns)Gx({id:i,mime:n,filepattern:o},this._warnOnOverwrite);if("string"==typeof t.firstLine&&t.firstLine.length>0){let e=t.firstLine;"^"!==e.charAt(0)&&(e="^"+e);try{let t=new RegExp(e);(function(e){return"^"!==e.source&&"^$"!==e.source&&"$"!==e.source&&"^\\s*$"!==e.source&&!(!e.exec("")||0!==e.lastIndex)})(t)||Gx({id:i,mime:n,firstline:t},this._warnOnOverwrite)}catch(i){console.warn("[".concat(t.id,"]: Invalid regular expression `").concat(e,"`: "),i)}}e.aliases.push(i);let s=null;if(void 0!==t.aliases&&Array.isArray(t.aliases)&&(s=0===t.aliases.length?[null]:t.aliases),null!==s)for(let o of s)!o||0===o.length||e.aliases.push(o);let r=null!==s&&s.length>0;if(!r||null!==s[0]){let t=(r?s[0]:null)||i;(r||!e.name)&&(e.name=t)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return!!e&&yL.call(this._languages,e)}getRegisteredLanguageIds(){return Object.keys(this._languages)}getSortedRegisteredLanguageNames(){let e=[];for(let t in this._nameMap)yL.call(this._nameMap,t)&&e.push({languageName:t,languageId:this._nameMap[t]});return e.sort((e,t)=>da(e.languageName,t.languageName)),e}getLanguageName(e){return yL.call(this._languages,e)?this._languages[e].name:null}getMimeType(e){return yL.call(this._languages,e)&&this._languages[e].mimetypes[0]||null}getExtensions(e){return yL.call(this._languages,e)?this._languages[e].extensions:[]}getFilenames(e){return yL.call(this._languages,e)?this._languages[e].filenames:[]}getIcon(e){return yL.call(this._languages,e)&&this._languages[e].icons[0]||null}getConfigurationFiles(e){return yL.call(this._languages,e)&&this._languages[e].configurationFiles||[]}getLanguageIdByLanguageName(e){let t=e.toLowerCase();return yL.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&yL.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return e||t?jx(e,t):[]}},{_:wt.instanceCount=0},wt),EL=class extends Co{get isResolved(){return this._isResolved}constructor(e,t,i){super(),this._registry=e,this._languageId=t,this._factory=i,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){let e=await this._factory.tokenizationSupport;this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))}},DL=class{constructor(e,t){this.tokens=e,this.endState=t,this._encodedTokenizationResultBrand=void 0}};!function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"}(Qx||(Qx={})),function(e){e[e.Method=0]="Method",e[e.Function=1]="Function",e[e.Constructor=2]="Constructor",e[e.Field=3]="Field",e[e.Variable=4]="Variable",e[e.Class=5]="Class",e[e.Struct=6]="Struct",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Event=10]="Event",e[e.Operator=11]="Operator",e[e.Unit=12]="Unit",e[e.Value=13]="Value",e[e.Constant=14]="Constant",e[e.Enum=15]="Enum",e[e.EnumMember=16]="EnumMember",e[e.Keyword=17]="Keyword",e[e.Text=18]="Text",e[e.Color=19]="Color",e[e.File=20]="File",e[e.Reference=21]="Reference",e[e.Customcolor=22]="Customcolor",e[e.Folder=23]="Folder",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue",e[e.Tool=27]="Tool",e[e.Snippet=28]="Snippet"}($x||($x={})),function(e){let t=new Map;t.set($x.Method,su.symbolMethod),t.set($x.Function,su.symbolFunction),t.set($x.Constructor,su.symbolConstructor),t.set($x.Field,su.symbolField),t.set($x.Variable,su.symbolVariable),t.set($x.Class,su.symbolClass),t.set($x.Struct,su.symbolStruct),t.set($x.Interface,su.symbolInterface),t.set($x.Module,su.symbolModule),t.set($x.Property,su.symbolProperty),t.set($x.Event,su.symbolEvent),t.set($x.Operator,su.symbolOperator),t.set($x.Unit,su.symbolUnit),t.set($x.Value,su.symbolValue),t.set($x.Enum,su.symbolEnum),t.set($x.Constant,su.symbolConstant),t.set($x.Enum,su.symbolEnum),t.set($x.EnumMember,su.symbolEnumMember),t.set($x.Keyword,su.symbolKeyword),t.set($x.Snippet,su.symbolSnippet),t.set($x.Text,su.symbolText),t.set($x.Color,su.symbolColor),t.set($x.File,su.symbolFile),t.set($x.Reference,su.symbolReference),t.set($x.Customcolor,su.symbolCustomColor),t.set($x.Folder,su.symbolFolder),t.set($x.TypeParameter,su.symbolTypeParameter),t.set($x.User,su.account),t.set($x.Issue,su.issues),t.set($x.Tool,su.tools),e.toIcon=function(e){let i=t.get(e);return i||(console.info("No codicon found for CompletionItemKind "+e),i=su.symbolProperty),i},e.toLabel=function(e){switch(e){case $x.Method:return Li(795,"Method");case $x.Function:return Li(796,"Function");case $x.Constructor:return Li(797,"Constructor");case $x.Field:return Li(798,"Field");case $x.Variable:return Li(799,"Variable");case $x.Class:return Li(800,"Class");case $x.Struct:return Li(801,"Struct");case $x.Interface:return Li(802,"Interface");case $x.Module:return Li(803,"Module");case $x.Property:return Li(804,"Property");case $x.Event:return Li(805,"Event");case $x.Operator:return Li(806,"Operator");case $x.Unit:return Li(807,"Unit");case $x.Value:return Li(808,"Value");case $x.Constant:return Li(809,"Constant");case $x.Enum:return Li(810,"Enum");case $x.EnumMember:return Li(811,"Enum Member");case $x.Keyword:return Li(812,"Keyword");case $x.Text:return Li(813,"Text");case $x.Color:return Li(814,"Color");case $x.File:return Li(815,"File");case $x.Reference:return Li(816,"Reference");case $x.Customcolor:return Li(817,"Custom Color");case $x.Folder:return Li(818,"Folder");case $x.TypeParameter:return Li(819,"Type Parameter");case $x.User:return Li(820,"User");case $x.Issue:return Li(821,"Issue");case $x.Tool:return Li(822,"Tool");case $x.Snippet:return Li(823,"Snippet");default:return""}};let i=new Map;i.set("method",$x.Method),i.set("function",$x.Function),i.set("constructor",$x.Constructor),i.set("field",$x.Field),i.set("variable",$x.Variable),i.set("class",$x.Class),i.set("struct",$x.Struct),i.set("interface",$x.Interface),i.set("module",$x.Module),i.set("property",$x.Property),i.set("event",$x.Event),i.set("operator",$x.Operator),i.set("unit",$x.Unit),i.set("value",$x.Value),i.set("constant",$x.Constant),i.set("enum",$x.Enum),i.set("enum-member",$x.EnumMember),i.set("enumMember",$x.EnumMember),i.set("keyword",$x.Keyword),i.set("snippet",$x.Snippet),i.set("text",$x.Text),i.set("color",$x.Color),i.set("file",$x.File),i.set("reference",$x.Reference),i.set("customcolor",$x.Customcolor),i.set("folder",$x.Folder),i.set("type-parameter",$x.TypeParameter),i.set("typeParameter",$x.TypeParameter),i.set("account",$x.User),i.set("issue",$x.Issue),i.set("tool",$x.Tool),e.fromString=function(e,t){let n=i.get(e);return void 0===n&&!t&&(n=$x.Property),n}}(Xx||(Xx={})),function(e){e[e.Deprecated=1]="Deprecated"}(Zx||(Zx={})),function(e){e[e.None=0]="None",e[e.KeepWhitespace=1]="KeepWhitespace",e[e.InsertAsSnippet=4]="InsertAsSnippet"}(Jx||(Jx={})),function(e){e[e.Word=0]="Word",e[e.Line=1]="Line",e[e.Suggest=2]="Suggest"}(eL||(eL={})),function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"}(tL||(tL={})),function(e){e[e.Automatic=0]="Automatic",e[e.Explicit=1]="Explicit"}(iL||(iL={})),function(e){e[e.Code=1]="Code",e[e.Label=2]="Label"}(nL||(nL={})),function(e){e[e.Accepted=0]="Accepted",e[e.Rejected=1]="Rejected",e[e.Ignored=2]="Ignored"}(sL||(sL={})),function(e){e[e.Invoke=1]="Invoke",e[e.Auto=2]="Auto"}(rL||(rL={})),function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"}(oL||(oL={})),function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"}(aL||(aL={})),function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"}(lL||(lL={})),function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"}(hL||(hL={})),hL.Array,Li(824,"array"),hL.Boolean,Li(825,"boolean"),hL.Class,Li(826,"class"),hL.Constant,Li(827,"constant"),hL.Constructor,Li(828,"constructor"),hL.Enum,Li(829,"enumeration"),hL.EnumMember,Li(830,"enumeration member"),hL.Event,Li(831,"event"),hL.Field,Li(832,"field"),hL.File,Li(833,"file"),hL.Function,Li(834,"function"),hL.Interface,Li(835,"interface"),hL.Key,Li(836,"key"),hL.Method,Li(837,"method"),hL.Module,Li(838,"module"),hL.Namespace,Li(839,"namespace"),hL.Null,Li(840,"null"),hL.Number,Li(841,"number"),hL.Object,Li(842,"object"),hL.Operator,Li(843,"operator"),hL.Package,Li(844,"package"),hL.Property,Li(845,"property"),hL.String,Li(846,"string"),hL.Struct,Li(847,"struct"),hL.TypeParameter,Li(848,"type parameter"),hL.Variable,Li(849,"variable"),function(e){e[e.Deprecated=1]="Deprecated"}(dL||(dL={})),function(e){let t=new Map;t.set(hL.File,su.symbolFile),t.set(hL.Module,su.symbolModule),t.set(hL.Namespace,su.symbolNamespace),t.set(hL.Package,su.symbolPackage),t.set(hL.Class,su.symbolClass),t.set(hL.Method,su.symbolMethod),t.set(hL.Property,su.symbolProperty),t.set(hL.Field,su.symbolField),t.set(hL.Constructor,su.symbolConstructor),t.set(hL.Enum,su.symbolEnum),t.set(hL.Interface,su.symbolInterface),t.set(hL.Function,su.symbolFunction),t.set(hL.Variable,su.symbolVariable),t.set(hL.Constant,su.symbolConstant),t.set(hL.String,su.symbolString),t.set(hL.Number,su.symbolNumber),t.set(hL.Boolean,su.symbolBoolean),t.set(hL.Array,su.symbolArray),t.set(hL.Object,su.symbolObject),t.set(hL.Key,su.symbolKey),t.set(hL.Null,su.symbolNull),t.set(hL.EnumMember,su.symbolEnumMember),t.set(hL.Struct,su.symbolStruct),t.set(hL.Event,su.symbolEvent),t.set(hL.Operator,su.symbolOperator),t.set(hL.TypeParameter,su.symbolTypeParameter),e.toIcon=function(e){let i=t.get(e);return i||(console.info("No codicon found for SymbolKind "+e),i=su.symbolProperty),i};let i=new Map;i.set(hL.File,$x.File),i.set(hL.Module,$x.Module),i.set(hL.Namespace,$x.Module),i.set(hL.Package,$x.Module),i.set(hL.Class,$x.Class),i.set(hL.Method,$x.Method),i.set(hL.Property,$x.Property),i.set(hL.Field,$x.Field),i.set(hL.Constructor,$x.Constructor),i.set(hL.Enum,$x.Enum),i.set(hL.Interface,$x.Interface),i.set(hL.Function,$x.Function),i.set(hL.Variable,$x.Variable),i.set(hL.Constant,$x.Constant),i.set(hL.String,$x.Text),i.set(hL.Number,$x.Value),i.set(hL.Boolean,$x.Value),i.set(hL.Array,$x.Value),i.set(hL.Object,$x.Value),i.set(hL.Key,$x.Keyword),i.set(hL.Null,$x.Value),i.set(hL.EnumMember,$x.EnumMember),i.set(hL.Struct,$x.Struct),i.set(hL.Event,$x.Event),i.set(hL.Operator,$x.Operator),i.set(hL.TypeParameter,$x.TypeParameter),e.toCompletionKind=function(e){let t=i.get(e);return void 0===t&&(console.info("No completion kind found for SymbolKind "+e),t=$x.File),t}}(cL||(cL={})),St=class e{static fromValue(t){switch(t){case"comment":return e.Comment;case"imports":return e.Imports;case"region":return e.Region}return new e(t)}constructor(e){this.value=e}},St.Comment=new St("comment"),St.Imports=new St("imports"),St.Region=new St("region"),function(e){e[e.AIGenerated=1]="AIGenerated"}(uL||(uL={})),function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"}(gL||(gL={})),function(e){e.is=function(e){return!(!e||"object"!=typeof e)&&("string"==typeof e.id&&"string"==typeof e.title)}}(pL||(pL={})),function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"}(fL||(fL={})),function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"}(mL||(mL={})),function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"}(vL||(vL={})),function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"}(_L||(_L={})),function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"}(bL||(bL={})),function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"}(CL||(CL={}));var TL,IL=new class{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new Ro,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),vo(()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))})}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){var i;null===(i=this._factories.get(e))||void 0===i||i.dispose();let n=new EL(this,e,t);return this._factories.set(e,n),vo(()=>{let t=this._factories.get(e);!t||t!==n||(this._factories.delete(e),t.dispose())})}async getOrCreate(e){let t=this.get(e);if(t)return t;let i=this._factories.get(e);return!i||i.isResolved?null:(await i.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;let t=this._factories.get(e);return!(t&&!t.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>Qp.DefaultBackground?this._colorMap[Qp.DefaultBackground]:null}};!function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"}(TL||(TL={}));var xL=(kt=class e extends Co{constructor(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];super(),this._onDidRequestBasicLanguageFeatures=this._register(new Ro),this.onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event,this._onDidRequestRichLanguageFeatures=this._register(new Ro),this.onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event,this._onDidChange=this._register(new Ro({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,this._requestedBasicLanguages=new Set,this._requestedRichLanguages=new Set,e.instanceCount++,this._registry=this._register(new kL(!0,t)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){e.instanceCount--,super.dispose()}registerLanguage(e){return this._registry.registerLanguage(e)}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getRegisteredLanguageIds(){return this._registry.getRegisteredLanguageIds()}getSortedRegisteredLanguageNames(){return this._registry.getSortedRegisteredLanguageNames()}getLanguageName(e){return this._registry.getLanguageName(e)}getMimeType(e){return this._registry.getMimeType(e)}getIcon(e){return this._registry.getIcon(e)}getExtensions(e){return this._registry.getExtensions(e)}getFilenames(e){return this._registry.getFilenames(e)}getConfigurationFiles(e){return this._registry.getConfigurationFiles(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){var i;return null!==(i=this._registry.guessLanguageIdByFilepathOrFirstLine(e,t).at(0))&&void 0!==i?i:null}createById(e){return new LL(this.onDidChange,()=>this._createAndGetLanguageIdentifier(e))}createByMimeType(e){return new LL(this.onDidChange,()=>{let t=this.getLanguageIdByMimeType(e);return this._createAndGetLanguageIdentifier(t)})}createByFilepathOrFirstLine(e,t){return new LL(this.onDidChange,()=>{let i=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(i)})}_createAndGetLanguageIdentifier(e){return(!e||!this.isRegisteredLanguageId(e))&&(e=bm),e}requestBasicLanguageFeatures(e){this._requestedBasicLanguages.has(e)||(this._requestedBasicLanguages.add(e),this._onDidRequestBasicLanguageFeatures.fire(e))}requestRichLanguageFeatures(e){this._requestedRichLanguages.has(e)||(this._requestedRichLanguages.add(e),this.requestBasicLanguageFeatures(e),IL.getOrCreate(e),this._onDidRequestRichLanguageFeatures.fire(e))}},{_:kt.instanceCount=0},kt),LL=class{constructor(e,t){this._value=hv(this,e,()=>t()),this.onDidChange=_o.fromObservable(this._value)}get languageId(){return this._value.get()}},AL={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:Xf.text,INTERNAL_URI_LIST:"application/vnd.code.uri-list"},NL=()=>({get delay(){return-1},dispose:()=>{},showHover:()=>{}}),FL=new Jo(()=>NL()),OL=new Jo(()=>NL());function RL(e){return"element"===e?OL.value:FL.value}var ML=class{get event(){return this.emitter.event}constructor(e,t,i){let n=e=>this.emitter.fire(e);this.emitter=new Ro({onWillAddFirstListener:()=>e.addEventListener(t,n,i),onDidRemoveLastListener:()=>e.removeEventListener(t,n,i)})}dispose(){this.emitter.dispose()}},PL=class{constructor(e){this.spliceables=e}splice(e,t,i){this.spliceables.forEach(n=>n.splice(e,t,i))}};function BL(e,t,i){let n=null,s=null;if("function"==typeof i.value?(n="value",s=i.value,0!==s.length&&console.warn("Memoize should only be used in functions with zero parameters")):"function"==typeof i.get&&(n="get",s=i.get),!s)throw Error("not supported");let r="$memoize$".concat(t);i[n]=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.hasOwnProperty(r)||Object.defineProperty(this,r,{configurable:!1,enumerable:!1,writable:!1,value:s.apply(this,t)}),this[r]}}var UL,HL,WL={};!function(e){e[e.Copy=0]="Copy",e[e.Move=1]="Move"}(UL||(UL={})),function(e){e.Over="drop-target",e.Before="drop-target-before",e.After="drop-target-after"}(HL||(HL={}));var VL=class extends Error{constructor(e,t){super("ListError [".concat(e,"] ").concat(t))}};function zL(e,t){let i=[];for(let n of t){if(e.start>=n.range.end)continue;if(e.end<n.range.start)break;let t=JE.intersect(e,n.range);JE.isEmpty(t)||i.push({range:t,size:n.size})}return i}function KL(e,t){let{start:i,end:n}=e;return{start:i+t,end:n+t}}var qL=class{get paddingTop(){return this._paddingTop}set paddingTop(e){this._size=this._size+e-this._paddingTop,this._paddingTop=e}constructor(e){this.groups=[],this._size=0,this._paddingTop=0,this._paddingTop=null!==e&&void 0!==e?e:0,this._size=this._paddingTop}splice(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=i.length-t,s=zL({start:0,end:e},this.groups),r=zL({start:e+t,end:1/0},this.groups).map(e=>({range:KL(e.range,n),size:e.size}));this.groups=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){let t=[],i=null;for(let n of e){let e=n.range.start,s=n.range.end,r=n.size;i&&r===i.size?i.range.end=s:(i={range:{start:e,end:s},size:r},t.push(i))}return t}(t.reduce((e,t)=>e.concat(t),[]))}(s,i.map((t,i)=>({range:{start:e+i,end:e+i+1},size:t.size})),r),this._size=this._paddingTop+this.groups.reduce((e,t)=>e+t.size*(t.range.end-t.range.start),0)}get count(){let e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;if(e<this._paddingTop)return 0;let t=0,i=this._paddingTop;for(let n of this.groups){let s=n.range.end-n.range.start,r=i+s*n.size;if(e<r)return t+Math.floor((e-i)/n.size);t+=s,i=r}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,i=0;for(let n of this.groups){let s=n.range.end-n.range.start,r=i+s;if(e<r)return this._paddingTop+t+(e-i)*n.size;t+=s*n.size,i=r}return-1}},GL=class{constructor(e){this.renderers=e,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}alloc(e){let t=this.getTemplateCache(e).pop(),i=!1;if(t)i=this.transactionNodesPendingRemoval.delete(t.domNode);else{let i=Mb(".monaco-list-row");t={domNode:i,templateId:e,templateData:this.getRenderer(e).renderTemplate(i)}}return{row:t,isReusingConnectedDomNode:i}}release(e){e&&this.releaseRow(e)}transact(e){if(this.inTransaction)throw Error("Already in transaction");this.inTransaction=!0;try{e()}finally{for(let e of this.transactionNodesPendingRemoval)this.doRemoveNode(e);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(e){let{domNode:t,templateId:i}=e;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t)),this.getTemplateCache(i).push(e)}doRemoveNode(e){e.classList.remove("scrolling"),e.remove()}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(let i of e)this.getRenderer(t).disposeTemplate(i.templateData),i.templateData=null}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(e){let t=this.renderers.get(e);if(!t)throw Error("No renderer found for ".concat(e));return t}};wE({});var jL,YL={CurrentDragAndDropData:void 0};!function(e){e[e.TOP=0]="TOP",e[e.CENTER_TOP=1]="CENTER_TOP",e[e.CENTER_BOTTOM=2]="CENTER_BOTTOM",e[e.BOTTOM=3]="BOTTOM"}(jL||(jL={}));var QL={useShadows:!0,verticalScrollMode:xE.Auto,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements:e=>[e],getDragURI:()=>null,onDragStart(){},onDragOver:()=>!1,drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0},$L=class{get context(){return this._context}set context(e){this._context=e}constructor(e){this.elements=e}update(){}getData(){return this.elements}},XL=class{constructor(e){this.elements=e}update(){}getData(){return this.elements}},ZL=class{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){let i=e.files.item(t);i&&(i.size||i.type)&&this.files.push(i)}}}getData(){return{types:this.types,files:this.files}}};var JL=class{constructor(e){null!==e&&void 0!==e&&e.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(e,t,i)=>i,null!==e&&void 0!==e&&e.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(e,t)=>t+1,null!==e&&void 0!==e&&e.getRole?this.getRole=e.getRole.bind(e):this.getRole=e=>"listitem",null!==e&&void 0!==e&&e.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=e=>{}}},eA=(Et=class e{get contentHeight(){return this.rangeMap.size}get contentWidth(){var e;return null!==(e=this.scrollWidth)&&void 0!==e?e:0}get onDidScroll(){return this.scrollableElement.onScroll}get onWillScroll(){return this.scrollableElement.onWillScroll}get containerDomNode(){return this.rowsContainer}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(let e of this.items)this.measureItemWidth(e);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:tb(this.domNode)}),this.rowsContainer.style.width="".concat(Math.max(this.scrollWidth||0,this.renderWidth),"px")}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}constructor(t,i,n){var s,r,o,a,l,h,d,c,u,g,p,f,m;let v=arguments.length>3&&void 0!==arguments[3]?arguments[3]:QL;if(this.virtualDelegate=i,this.domId="list_id_".concat(++e.InstanceCount),this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new Sl(50),this.splicing=!1,this.dragOverAnimationStopDisposable=Co.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=Co.None,this.onDragLeaveTimeout=Co.None,this.currentSelectionDisposable=Co.None,this.disposables=new bo,this._onDidChangeContentHeight=new Ro,this._onDidChangeContentWidth=new Ro,this.onDidChangeContentHeight=_o.latch(this._onDidChangeContentHeight.event,void 0,this.disposables),this.onDidChangeContentWidth=_o.latch(this._onDidChangeContentWidth.event,void 0,this.disposables),this._horizontalScrolling=!1,v.horizontalScrolling&&v.supportDynamicHeights)throw Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap(null!==(s=v.paddingTop)&&void 0!==s?s:0);for(let e of n)this.renderers.set(e.templateId,e);if(this.cache=this.disposables.add(new GL(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=mb("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support","boolean"!=typeof v.mouseSupport||v.mouseSupport),this._horizontalScrolling=null!==(r=v.horizontalScrolling)&&void 0!==r?r:QL.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=void 0===v.paddingBottom?0:v.paddingBottom,this.accessibilityProvider=new JL(v.accessibilityProvider),this.rowsContainer=mb("div"),this.rowsContainer.className="monaco-list-rows",(null!==(o=v.transformOptimization)&&void 0!==o?o:QL.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(LE.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new OE({forceIntegerValues:!0,smoothScrollDuration:null!==(a=v.smoothScrolling)&&void 0!==a&&a?125:0,scheduleAtNextAnimationFrame:e=>q_(L_(this.domNode),e)})),this.scrollableElement=this.disposables.add(new jE(this.rowsContainer,{alwaysConsumeMouseWheel:null!==(l=v.alwaysConsumeMouseWheel)&&void 0!==l?l:QL.alwaysConsumeMouseWheel,horizontal:xE.Auto,vertical:null!==(h=v.verticalScrollMode)&&void 0!==h?h:QL.verticalScrollMode,useShadows:null!==(d=v.useShadows)&&void 0!==d?d:QL.useShadows,mouseWheelScrollSensitivity:v.mouseWheelScrollSensitivity,fastScrollSensitivity:v.fastScrollSensitivity,scrollByPage:v.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),t.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(W_(this.rowsContainer,TE.Change,e=>this.onTouchChange(e))),this.disposables.add(W_(this.scrollableElement.getDomNode(),"scroll",e=>{let t=e.target,i=t.scrollTop;t.scrollTop=0,v.scrollToActiveElement&&this.setScrollTop(this.scrollTop+i)})),this.disposables.add(W_(this.domNode,"dragover",e=>this.onDragOver(this.toDragEvent(e)))),this.disposables.add(W_(this.domNode,"drop",e=>this.onDrop(this.toDragEvent(e)))),this.disposables.add(W_(this.domNode,"dragleave",e=>this.onDragLeave(this.toDragEvent(e)))),this.disposables.add(W_(this.domNode,"dragend",e=>this.onDragEnd(e))),v.userSelection){if(v.dnd)throw Error("DND and user selection cannot be used simultaneously");this.disposables.add(W_(this.domNode,"mousedown",e=>this.onPotentialSelectionStart(e)))}this.setRowLineHeight=null!==(c=v.setRowLineHeight)&&void 0!==c?c:QL.setRowLineHeight,this.setRowHeight=null!==(u=v.setRowHeight)&&void 0!==u?u:QL.setRowHeight,this.supportDynamicHeights=null!==(g=v.supportDynamicHeights)&&void 0!==g?g:QL.supportDynamicHeights,this.dnd=null!==(p=v.dnd)&&void 0!==p?p:this.disposables.add(QL.dnd),this.layout(null===(f=v.initialSize)||void 0===f?void 0:f.height,null===(m=v.initialSize)||void 0===m?void 0:m.width),v.scrollToActiveElement&&this._setupFocusObserver(t)}_setupFocusObserver(e){this.disposables.add(W_(e,"focus",()=>{let t=hb();this.activeElement!==t&&null!==t&&(this.activeElement=t,this._scrollToActiveElement(this.activeElement,e))},!0))}_scrollToActiveElement(e,t){let i=t.getBoundingClientRect(),n=e.getBoundingClientRect().top-i.top;n<0&&this.setScrollTop(this.scrollTop+n)}updateOptions(e){let t;if(void 0!==e.paddingBottom&&(this.paddingBottom=e.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),void 0!==e.smoothScrolling&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),void 0!==e.horizontalScrolling&&(this.horizontalScrolling=e.horizontalScrolling),void 0!==e.scrollByPage&&(t=(0,r.A)((0,r.A)({},null!==t&&void 0!==t?t:{}),{},{scrollByPage:e.scrollByPage})),void 0!==e.mouseWheelScrollSensitivity&&(t=(0,r.A)((0,r.A)({},null!==t&&void 0!==t?t:{}),{},{mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity})),void 0!==e.fastScrollSensitivity&&(t=(0,r.A)((0,r.A)({},null!==t&&void 0!==t?t:{}),{},{fastScrollSensitivity:e.fastScrollSensitivity})),t&&this.scrollableElement.updateOptions(t),void 0!==e.paddingTop&&e.paddingTop!==this.rangeMap.paddingTop){let t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),i=e.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=e.paddingTop,this.render(t,Math.max(0,this.lastRenderTop+i),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}delegateScrollFromMouseWheelEvent(e){this.scrollableElement.delegateScrollFromMouseWheelEvent(e)}delegateVerticalScrollbarPointerDown(e){this.scrollableElement.delegateVerticalScrollbarPointerDown(e)}updateElementHeight(e,t,i){if(e<0||e>=this.items.length)return;let n=this.items[e].size;if(void 0===t){if(!this.supportDynamicHeights)return void console.warn("Dynamic heights not supported",Error().stack);this.items[e].lastDynamicHeightWidth=void 0,t=n+this.probeDynamicHeight(e)}if(n===t)return;let s=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),r=0;r=e<s.start||null!==i&&i>e&&i<s.end?t-n:0,this.rangeMap.splice(e,1,[{size:t}]),this.items[e].size=t,this.render(s,Math.max(0,this.lastRenderTop+r),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights?this._rerender(this.lastRenderTop,this.lastRenderHeight):this._onDidChangeContentHeight.fire(this.contentHeight)}createRangeMap(e){return new qL(e)}splice(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(this.splicing)throw Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,i)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s={start:e,end:e+t},r=JE.intersect(n,s),o=new Map;for(let C=r.end-1;C>=r.start;C--){let e=this.items[C];if(e.dragStartDisposable.dispose(),e.checkedDisposable.dispose(),e.row){let t=o.get(e.templateId);t||(t=[],o.set(e.templateId,t));let i=this.renderers.get(e.templateId);i&&i.disposeElement&&i.disposeElement(e.element,C,e.row.templateData,{height:e.size}),t.unshift(e.row)}e.row=null,e.stale=!0}let a,l={start:e+t,end:this.items.length},h=JE.intersect(l,n),d=JE.relativeComplement(l,n),c=i.map(e=>({id:String(this.itemId++),element:e,templateId:this.virtualDelegate.getTemplateId(e),size:this.virtualDelegate.getHeight(e),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(e),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:Co.None,checkedDisposable:Co.None,stale:!1}));0===e&&t>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,c),a=this.items,this.items=c):(this.rangeMap.splice(e,t,c),a=Gr(this.items,e,t,c));let u=i.length-t,g=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),p=KL(h,u),f=JE.intersect(g,p);for(let C=f.start;C<f.end;C++)this.updateItemInDOM(this.items[C],C);let m=JE.relativeComplement(p,g);for(let C of m)for(let e=C.start;e<C.end;e++)this.removeItemFromDOM(e);let v=d.map(e=>KL(e,u)),_=[{start:e,end:e+i.length},...v].map(e=>JE.intersect(g,e)).reverse();for(let C of _)for(let e=C.end-1;e>=C.start;e--){var b;let t=this.items[e],i=null===(b=o.get(t.templateId))||void 0===b?void 0:b.pop();this.insertItemInDOM(e,i)}for(let C of o.values())for(let e of C)this.cache.release(e);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),a.map(e=>e.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height="".concat(this._scrollHeight,"px"),this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=q_(L_(this.domNode),()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){this.horizontalScrolling?this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth()):this.scrollableElementWidthDelayer.cancel()}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(let t of this.items)void 0!==t.width&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:0===e?0:e+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}updateWidth(e){if(!this.horizontalScrolling||void 0===this.scrollWidth)return;let t=this.items[e];this.measureItemWidth(t),void 0!==t.width&&t.width>this.scrollWidth&&(this.scrollWidth=t.width,this.scrollableElement.setScrollDimensions({scrollWidth:this.scrollWidth+10}),this._onDidChangeContentWidth.fire(this.scrollWidth))}rerender(){if(this.supportDynamicHeights){for(let e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){return this.getVisibleRange(this.lastRenderTop,this.lastRenderHeight).start}get firstMostlyVisibleIndex(){let e=this.firstVisibleIndex,t=this.rangeMap.positionAt(e),i=this.rangeMap.positionAt(e+1);return-1!==i&&(i-t)/2+t<this.scrollTop?e+1:e}get lastVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).end-1}element(e){return this.items[e].element}indexOf(e){return this.items.findIndex(t=>t.element===e)}domElement(e){let t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){let i={height:"number"==typeof e?e:ib(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,i.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(i),void 0!==t&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:"number"==typeof t?t:tb(this.domNode)})}render(e,t,i,n,s){let r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=this.getRenderRange(t,i),l=JE.relativeComplement(a,e).reverse(),h=JE.relativeComplement(e,a);if(r){let t=JE.intersect(e,a);for(let e=t.start;e<t.end;e++)this.updateItemInDOM(this.items[e],e)}this.cache.transact(()=>{for(let e of h)for(let t=e.start;t<e.end;t++)this.removeItemFromDOM(t,o);for(let e of l)for(let t=e.end-1;t>=e.start;t--)this.insertItemInDOM(t)}),void 0!==n&&(this.rowsContainer.style.left="-".concat(n,"px")),this.rowsContainer.style.top="-".concat(t,"px"),this.horizontalScrolling&&void 0!==s&&(this.rowsContainer.style.width="".concat(Math.max(s,this.renderWidth),"px")),this.lastRenderTop=t,this.lastRenderHeight=i}insertItemInDOM(e,t){let i=this.items[e];if(!i.row)if(t)i.row=t,i.stale=!0;else{let e=this.cache.alloc(i.templateId);i.row=e.row,i.stale||(i.stale=e.isReusingConnectedDomNode)}let n=this.accessibilityProvider.getRole(i.element)||"listitem";i.row.domNode.setAttribute("role",n);let s=this.accessibilityProvider.isChecked(i.element),r=e=>"mixed"===e?"mixed":String(!!e);if("boolean"==typeof s||"mixed"===s)i.row.domNode.setAttribute("aria-checked",r(s));else if(s){let e=e=>i.row.domNode.setAttribute("aria-checked",r(e));e(s.value),i.checkedDisposable=s.onDidChange(()=>e(s.value))}if(i.stale||!i.row.domNode.parentElement){var o,a;let t=null!==(o=null===(a=this.items.at(e+1))||void 0===a||null===(a=a.row)||void 0===a?void 0:a.domNode)&&void 0!==o?o:null;(i.row.domNode.parentElement!==this.rowsContainer||i.row.domNode.nextElementSibling!==t)&&this.rowsContainer.insertBefore(i.row.domNode,t),i.stale=!1}this.updateItemInDOM(i,e);let l=this.renderers.get(i.templateId);if(!l)throw Error("No renderer found for template id ".concat(i.templateId));null===l||void 0===l||l.renderElement(i.element,e,i.row.templateData,{height:i.size});let h=this.dnd.getDragURI(i.element);i.dragStartDisposable.dispose(),i.row.domNode.draggable=!!h,h&&(i.dragStartDisposable=W_(i.row.domNode,"dragstart",e=>this.onDragStart(i.element,h,e))),this.horizontalScrolling&&(this.measureItemWidth(i),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width="fit-content",e.width=tb(e.row.domNode);let t=L_(e.row.domNode).getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top="".concat(this.elementTop(t),"px"),this.setRowHeight&&(e.row.domNode.style.height="".concat(e.size,"px")),this.setRowLineHeight&&(e.row.domNode.style.lineHeight="".concat(e.size,"px")),e.row.domNode.setAttribute("data-index","".concat(t)),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2==0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e,t){let i=this.items[e];if(i.dragStartDisposable.dispose(),i.checkedDisposable.dispose(),i.row){let n=this.renderers.get(i.templateId);n&&n.disposeElement&&n.disposeElement(i.element,e,i.row.templateData,{height:i.size,onScroll:t}),this.cache.release(i.row),i.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}getScrollLeft(){return this.scrollableElement.getScrollPosition().scrollLeft}setScrollLeft(e){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollWidth:this.scrollWidth})),this.scrollableElement.setScrollPosition({scrollLeft:e})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return _o.map(this.disposables.add(new ML(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return _o.map(this.disposables.add(new ML(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return _o.filter(_o.map(this.disposables.add(new ML(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>1===e.browserEvent.button,this.disposables)}get onMouseUp(){return _o.map(this.disposables.add(new ML(this.domNode,"mouseup")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDown(){return _o.map(this.disposables.add(new ML(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return _o.map(this.disposables.add(new ML(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMove(){return _o.map(this.disposables.add(new ML(this.domNode,"mousemove")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOut(){return _o.map(this.disposables.add(new ML(this.domNode,"mouseout")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return _o.any(_o.map(this.disposables.add(new ML(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),_o.map(this.disposables.add(new ML(this.domNode,TE.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return _o.map(this.disposables.add(new ML(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return _o.map(this.disposables.add(new ML(this.rowsContainer,TE.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),i=void 0===t?void 0:this.items[t];return{browserEvent:e,index:t,element:i&&i.element}}toTouchEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),i=void 0===t?void 0:this.items[t];return{browserEvent:e,index:t,element:i&&i.element}}toGestureEvent(e){let t=this.getItemIndexFromEventTarget(e.initialTarget||null),i=void 0===t?void 0:this.items[t];return{browserEvent:e,index:t,element:i&&i.element}}toDragEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),i=void 0===t?void 0:this.items[t];return{browserEvent:e,index:t,element:i&&i.element,sector:this.getTargetSector(e,t)}}onScroll(e){try{let t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth,void 0,!0),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,i){var n,s;if(!i.dataTransfer)return;let r,o=this.dnd.getDragElements(e);i.dataTransfer.effectAllowed="copyMove",i.dataTransfer.setData(AL.TEXT,t),this.dnd.getDragLabel&&(r=this.dnd.getDragLabel(o,i)),void 0===r&&(r=String(o.length)),function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(!e.dataTransfer)return;let s=Mb(".monaco-drag-image");s.textContent=i,s.classList.add(...n),(e=>{for(;e&&!e.classList.contains("monaco-workbench");)e=e.parentElement;return e||db(t)})(t).appendChild(s),e.dataTransfer.setDragImage(s,-10,-10),setTimeout(()=>s.remove(),0)}(i,this.domNode,r,[this.domId]),this.domNode.classList.add("dragging"),this.currentDragData=new $L(o),YL.CurrentDragAndDropData=new XL(o),null===(n=(s=this.dnd).onDragStart)||void 0===n||n.call(s,this.currentDragData,i)}onPotentialSelectionStart(e){this.currentSelectionDisposable.dispose();let t=A_(this.domNode),i=this.currentSelectionDisposable=new bo,n=i.add(new bo);n.add(W_(this.domNode,"selectstart",()=>{n.add(W_(t,"mousemove",e=>{var i;!1===(null===(i=t.getSelection())||void 0===i?void 0:i.isCollapsed)&&this.setupDragAndDropScrollTopAnimation(e)})),i.add(vo(()=>{let e=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.currentSelectionBounds=void 0,this.render(e,this.lastRenderTop,this.lastRenderHeight,void 0,void 0)})),i.add(W_(t,"selectionchange",()=>{let e=t.getSelection();if(!e||e.isCollapsed)return void(n.isDisposed&&i.dispose());let s=this.getIndexOfListElement(e.anchorNode),r=this.getIndexOfListElement(e.focusNode);void 0!==s&&void 0!==r&&(r<s&&([s,r]=[r,s]),this.currentSelectionBounds={start:s,end:r})}))})),n.add(W_(t,"mouseup",()=>{var e;n.dispose(),this.teardownDragAndDropScrollTopAnimation(),!1!==(null===(e=t.getSelection())||void 0===e?void 0:e.isCollapsed)&&i.dispose()}))}getIndexOfListElement(e){if(e&&this.domNode.contains(e))for(;e&&e!==this.domNode;){var t;if(null!==(t=e.dataset)&&void 0!==t&&t.index)return Number(e.dataset.index);e=e.parentElement}}onDragOver(e){var t;if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),YL.CurrentDragAndDropData&&"vscode-ui"===YL.CurrentDragAndDropData.getData()||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(YL.CurrentDragAndDropData)this.currentDragData=YL.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new ZL}let i,n=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.sector,e.browserEvent);if(this.canDrop="boolean"==typeof n?n:n.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect="boolean"!=typeof n&&(null===(t=n.effect)||void 0===t?void 0:t.type)===UL.Copy?"copy":"move",i="boolean"!=typeof n&&n.feedback?n.feedback:void 0===e.index?[-1]:[e.index],i=Br(i).filter(e=>e>=-1&&e<this.length).sort((e,t)=>e-t),i=-1===i[0]?[-1]:i;let s="boolean"!=typeof n&&n.effect&&n.effect.position?n.effect.position:HL.Over;if(function(e,t){return Array.isArray(e)&&Array.isArray(t)?Mr(e,t):e===t}(this.currentDragFeedback,i)&&this.currentDragFeedbackPosition===s)return!0;if(this.currentDragFeedback=i,this.currentDragFeedbackPosition=s,this.currentDragFeedbackDisposable.dispose(),-1===i[0])this.domNode.classList.add(s),this.rowsContainer.classList.add(s),this.currentDragFeedbackDisposable=vo(()=>{this.domNode.classList.remove(s),this.rowsContainer.classList.remove(s)});else{if(i.length>1&&s!==HL.Over)throw Error("Can't use multiple feedbacks with position different than 'over'");s===HL.After&&i[0]<this.length-1&&(i[0]+=1,s=HL.Before);for(let e of i){var r;let t=this.items[e];t.dropTarget=!0,null===(r=t.row)||void 0===r||r.domNode.classList.add(s)}this.currentDragFeedbackDisposable=vo(()=>{for(let t of i){var e;let i=this.items[t];i.dropTarget=!1,null===(e=i.row)||void 0===e||e.domNode.classList.remove(s)}})}return!0}onDragLeave(e){var t,i;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=Dl(()=>this.clearDragOverFeedback(),100,this.disposables),this.currentDragData&&(null===(t=(i=this.dnd).onDragLeave)||void 0===t||t.call(i,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;let t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,YL.CurrentDragAndDropData=void 0,t&&e.browserEvent.dataTransfer&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.sector,e.browserEvent))}onDragEnd(e){var t,i;this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,YL.CurrentDragAndDropData=void 0,null===(t=(i=this.dnd).onDragEnd)||void 0===t||t.call(i,e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=Co.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){let e=function(e){let t=e.offsetParent,i=e.offsetTop,n=e.offsetLeft;for(;null!==(e=e.parentNode)&&e!==e.getRootNode();){i-=e.scrollTop;let s=ob(e)?null:Y_(e);s&&(n-="rtl"===s.direction?-e.scrollLeft:e.scrollLeft),e===t&&(n+=$_.getBorderLeftWidth(e),i+=$_.getBorderTopWidth(e),i+=e.offsetTop,n+=e.offsetLeft,t=e.offsetParent)}return{left:n,top:i}}(this.domNode).top;this.dragOverAnimationDisposable=function(e,t){let i=()=>{t(),n=q_(e,i)},n=q_(e,i);return vo(()=>n.dispose())}(L_(this.domNode),this.animateDragAndDropScrollTop.bind(this,e))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=Dl(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable=void this.dragOverAnimationDisposable.dispose())},1e3,this.disposables),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(void 0===this.dragOverMouseY)return;let t=this.dragOverMouseY-e,i=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>i&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-i))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable=void this.dragOverAnimationDisposable.dispose())}getTargetSector(e,t){if(void 0===t)return;let i=e.offsetY/this.items[t].size;return D_(Math.floor(i/.25),0,3)}getItemIndexFromEventTarget(e){let t=this.scrollableElement.getDomNode(),i=e;for(;(bb(i)||yb(i))&&i!==this.rowsContainer&&t.contains(i);){let e=i.getAttribute("data-index");if(e){let t=Number(e);if(!isNaN(t))return t}i=i.parentElement}}getVisibleRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}getRenderRange(e,t){let i=this.getVisibleRange(e,t);if(this.currentSelectionBounds){let e=this.rangeMap.count;i.start=Math.min(i.start,this.currentSelectionBounds.start,e),i.end=Math.min(Math.max(i.end,this.currentSelectionBounds.end+1),e)}return i}_rerender(e,t,i){let n,s,r=this.getRenderRange(e,t);e===this.elementTop(r.start)?(n=r.start,s=0):r.end-r.start>1&&(n=r.start+1,s=this.elementTop(n)-e);let o=0;for(;;){let a=this.getRenderRange(e,t),l=!1;for(let e=a.start;e<a.end;e++){let t=this.probeDynamicHeight(e);0!==t&&this.rangeMap.splice(e,1,[this.items[e]]),o+=t,l||(l=0!==t)}if(!l){0!==o&&this.eventuallyUpdateScrollDimensions();let t=JE.relativeComplement(r,a);for(let e of t)for(let t=e.start;t<e.end;t++)this.items[t].row&&this.removeItemFromDOM(t);let l=JE.relativeComplement(a,r).reverse();for(let e of l)for(let t=e.end-1;t>=e.start;t--)this.insertItemInDOM(t);for(let e=a.start;e<a.end;e++)this.items[e].row&&this.updateItemInDOM(this.items[e],e);if("number"==typeof n){let t=this.scrollable.getFutureScrollPosition().scrollTop-e,r=this.elementTop(n)-s+t;this.setScrollTop(r,i)}return void this._onDidChangeContentHeight.fire(this.contentHeight)}}}probeDynamicHeight(e){var t,i,n;let s=this.items[e];if(this.virtualDelegate.getDynamicHeight){let e=this.virtualDelegate.getDynamicHeight(s.element);if(null!==e){let t=s.size;return s.size=e,s.lastDynamicHeightWidth=this.renderWidth,e-t}}if(!s.hasDynamicHeight||s.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(s.element))return 0;let r=s.size;if(s.row)return s.row.domNode.style.height="",s.size=s.row.domNode.offsetHeight,0===s.size&&(sb(s.row.domNode,L_(s.row.domNode).document.body)?console.warn("Measured item node at 0px- ensure that ListView is not display:none before measuring row height!",Error().stack):console.warn("Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!",Error().stack)),s.lastDynamicHeightWidth=this.renderWidth,s.size-r;let{row:o}=this.cache.alloc(s.templateId);o.domNode.style.height="",this.rowsContainer.appendChild(o.domNode);let a=this.renderers.get(s.templateId);if(!a)throw new qi("Missing renderer for templateId: "+s.templateId);return a.renderElement(s.element,e,o.templateData),s.size=o.domNode.offsetHeight,null!==(t=a.disposeElement)&&void 0!==t&&t.call(a,s.element,e,o.templateData),null!==(i=(n=this.virtualDelegate).setDynamicHeight)&&void 0!==i&&i.call(n,s.element,s.size),s.lastDynamicHeightWidth=this.renderWidth,o.domNode.remove(),this.cache.release(o),s.size-r}getElementDomId(e){return"".concat(this.domId,"_").concat(e)}dispose(){var e,t;for(let n of this.items)if(n.dragStartDisposable.dispose(),n.checkedDisposable.dispose(),n.row){var i;let e=this.renderers.get(n.row.templateId);e&&(null!==(i=e.disposeElement)&&void 0!==i&&i.call(e,n.element,-1,n.row.templateData,void 0),e.disposeTemplate(n.row.templateData))}this.items=[],null!==(e=this.domNode)&&void 0!==e&&e.remove(),null!==(t=this.dragOverAnimationDisposable)&&void 0!==t&&t.dispose(),this.disposables.dispose()}},{_:Et.InstanceCount=0},Et);function tA(e){return new iA(e)}eA.__decorator=ki([BL],eA.prototype,"onMouseClick",null),eA.__decorator=ki([BL],eA.prototype,"onMouseDblClick",null),eA.__decorator=ki([BL],eA.prototype,"onMouseMiddleClick",null),eA.__decorator=ki([BL],eA.prototype,"onMouseUp",null),eA.__decorator=ki([BL],eA.prototype,"onMouseDown",null),eA.__decorator=ki([BL],eA.prototype,"onMouseOver",null),eA.__decorator=ki([BL],eA.prototype,"onMouseMove",null),eA.__decorator=ki([BL],eA.prototype,"onMouseOut",null),eA.__decorator=ki([BL],eA.prototype,"onContextMenu",null),eA.__decorator=ki([BL],eA.prototype,"onTouchStart",null),eA.__decorator=ki([BL],eA.prototype,"onTap",null);var iA=class extends zm{constructor(e){super(),this.value=e}get debugName(){return this.toString()}get(){return this.value}addObserver(e){}removeObserver(e){}log(){return this}toString(){return"Const: ".concat(this.value)}};wE(WL);var nA=class{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return"template:".concat(this.trait.name)}renderTemplate(e){return e}renderElement(e,t,i){let n=this.renderedElements.findIndex(e=>e.templateData===i);if(n>=0){let e=this.renderedElements[n];this.trait.unrender(i),e.index=t}else{let e={index:t,templateData:i};this.renderedElements.push(e)}this.trait.renderIndex(t,i)}splice(e,t,i){let n=[];for(let s of this.renderedElements)s.index<e?n.push(s):s.index>=e+t&&n.push({index:s.index+i-t,templateData:s.templateData});this.renderedElements=n}renderIndexes(e){for(let{index:t,templateData:i}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,i)}disposeTemplate(e){let t=this.renderedElements.findIndex(t=>t.templateData===e);t<0||this.renderedElements.splice(t,1)}},sA=class{get onChange(){return this._onChange.event}get name(){return this._trait}get renderer(){return new nA(this)}constructor(e){this._trait=e,this.indexes=[],this.sortedIndexes=[],this._onChange=new Ro}splice(e,t,i){let n=i.length-t,s=e+t,r=[],o=0;for(;o<this.sortedIndexes.length&&this.sortedIndexes[o]<e;)r.push(this.sortedIndexes[o++]);for(let a=0;a<i.length;a++)i[a]&&r.push(a+e);for(;o<this.sortedIndexes.length&&this.sortedIndexes[o]>=s;)r.push(this.sortedIndexes[o++]+n);this.renderer.splice(e,t,i.length),this._set(r,r)}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(DA),t)}_set(e,t,i){let n=this.indexes,s=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;let r=EA(s,e);return this.renderer.renderIndexes(r),this._onChange.fire({indexes:e,browserEvent:i}),n}get(){return this.indexes}contains(e){return function(e,t,i){return function(e,t){let i=0,n=e-1;for(;i<=n;){let e=(i+n)/2|0,s=t(e);if(s<0)i=e+1;else{if(!(s>0))return e;n=e-1}}return-(i+1)}(e.length,n=>i(e[n],t))}(this.sortedIndexes,e,DA)>=0}dispose(){po(this._onChange)}};sA.__decorator=ki([BL],sA.prototype,"renderer",null);var rA=class extends sA{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}},oA=class{constructor(e,t,i){this.trait=e,this.view=t,this.identityProvider=i}splice(e,t,i){if(!this.identityProvider)return this.trait.splice(e,t,Array(i.length).fill(!1));let n=this.trait.get().map(e=>this.identityProvider.getId(this.view.element(e)).toString());if(0===n.length)return this.trait.splice(e,t,Array(i.length).fill(!1));let s=new Set(n),r=i.map(e=>s.has(this.identityProvider.getId(e).toString()));this.trait.splice(e,t,r)}};function aA(e,t){return!!e.classList.contains(t)||!(e.classList.contains("monaco-list")||!e.parentElement)&&aA(e.parentElement,t)}function lA(e){return aA(e,"monaco-editor")}function hA(e){return aA(e,"monaco-tree-sticky-row")}function dA(e){return e.classList.contains("monaco-tree-sticky-container")}function cA(e){return!!("A"===e.tagName&&e.classList.contains("monaco-button")||"DIV"===e.tagName&&e.classList.contains("monaco-button-dropdown"))||!(e.classList.contains("monaco-list")||!e.parentElement)&&cA(e.parentElement)}var uA,gA,pA=class{get onKeyDown(){return _o.chain(this.disposables.add(new ML(this.view.domNode,"keydown")).event,e=>e.filter(e=>!qb(e.target)).map(e=>new C_(e)))}constructor(e,t,i){this.list=e,this.view=t,this.disposables=new bo,this.multipleSelectionDisposables=new bo,this.multipleSelectionSupport=i.multipleSelectionSupport,this.disposables.add(this.onKeyDown(e=>{switch(e.keyCode){case Kv.Enter:return this.onEnter(e);case Kv.UpArrow:return this.onUpArrow(e);case Kv.DownArrow:return this.onDownArrow(e);case Kv.PageUp:return this.onPageUpArrow(e);case Kv.PageDown:return this.onPageDownArrow(e);case Kv.Escape:return this.onEscape(e);case Kv.KeyA:this.multipleSelectionSupport&&(qn?e.metaKey:e.ctrlKey)&&this.onCtrlA(e)}}))}updateOptions(e){void 0!==e.multipleSelectionSupport&&(this.multipleSelectionSupport=e.multipleSelectionSupport)}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(Ur(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}};pA.__decorator=ki([BL],pA.prototype,"onKeyDown",null),function(e){e[e.Automatic=0]="Automatic",e[e.Trigger=1]="Trigger"}(uA||(uA={})),function(e){e[e.Idle=0]="Idle",e[e.Typing=1]="Typing"}(gA||(gA={}));var fA=new class{mightProducePrintableCharacter(e){return!(e.ctrlKey||e.metaKey||e.altKey)&&(e.keyCode>=Kv.KeyA&&e.keyCode<=Kv.KeyZ||e.keyCode>=Kv.Digit0&&e.keyCode<=Kv.Digit9||e.keyCode>=Kv.Numpad0&&e.keyCode<=Kv.Numpad9||e.keyCode>=Kv.Semicolon&&e.keyCode<=Kv.Quote)}},mA=class{constructor(e,t,i,n,s){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=i,this.keyboardNavigationEventFilter=n,this.delegate=s,this.enabled=!1,this.state=gA.Idle,this.mode=uA.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new bo,this.disposables=new bo,this.updateOptions(e.options)}updateOptions(e){var t,i;null===(t=e.typeNavigationEnabled)||void 0===t||t?this.enable():this.disable(),this.mode=null!==(i=e.typeNavigationMode)&&void 0!==i?i:uA.Automatic}trigger(){this.triggered=!this.triggered}enable(){if(this.enabled)return;let e=!1,t=_o.chain(this.enabledDisposables.add(new ML(this.view.domNode,"keydown")).event,t=>t.filter(e=>!qb(e.target)).filter(()=>this.mode===uA.Automatic||this.triggered).map(e=>new C_(e)).filter(t=>e||this.keyboardNavigationEventFilter(t)).filter(e=>this.delegate.mightProducePrintableCharacter(e)).forEach(e=>Db(e,!0)).map(e=>e.browserEvent.key)),i=_o.debounce(t,()=>null,800,void 0,void 0,void 0,this.enabledDisposables);_o.reduce(_o.any(t,i),(e,t)=>null===t?null:(e||"")+t,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),i(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),i(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){let e=this.list.getFocus();if(e.length>0&&e[0]===this.previouslyFocused){var t;let i=null===(t=this.list.options.accessibilityProvider)||void 0===t?void 0:t.getAriaLabel(this.list.element(e[0]));"string"==typeof i||i&&i.get()}this.previouslyFocused=-1}onInput(e){if(!e)return this.state=gA.Idle,void(this.triggered=!1);let t=this.list.getFocus(),i=t.length>0?t[0]:0,n=this.state===gA.Idle?1:0;this.state=gA.Typing;for(let s=0;s<this.list.length;s++){let t=(i+s+n)%this.list.length,r=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(t)),o=r&&r.toString();if(this.list.options.typeNavigationEnabled){if(void 0!==o){if(ry(e,o))return this.previouslyFocused=i,this.list.setFocus([t]),void this.list.reveal(t);let n=wy(e,o);if(n&&n[0].end-n[0].start>1&&1===n.length)return this.previouslyFocused=i,this.list.setFocus([t]),void this.list.reveal(t)}}else if(void 0===o||ry(e,o))return this.previouslyFocused=i,this.list.setFocus([t]),void this.list.reveal(t)}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}},vA=class{constructor(e,t){this.list=e,this.view=t,this.disposables=new bo;let i=_o.chain(this.disposables.add(new ML(t.domNode,"keydown")).event,e=>e.filter(e=>!qb(e.target)).map(e=>new C_(e)));_o.chain(i,e=>e.filter(e=>e.keyCode===Kv.Tab&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&!e.altKey))(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;let t=this.list.getFocus();if(0===t.length)return;let i=this.view.domElement(t[0]);if(!i)return;let n=i.querySelector("[tabIndex]");if(!n||!bb(n)||-1===n.tabIndex)return;let s=L_(n).getComputedStyle(n);"hidden"===s.visibility||"none"===s.display||(e.preventDefault(),e.stopPropagation(),n.focus())}dispose(){this.disposables.dispose()}};function _A(e){return qn?e.browserEvent.metaKey:e.browserEvent.ctrlKey}function bA(e){return e.browserEvent.shiftKey}var CA={isSelectionSingleChangeEvent:_A,isSelectionRangeChangeEvent:bA},yA=class{get onPointer(){return this._onPointer.event}constructor(e){this.list=e,this.disposables=new bo,this._onPointer=this.disposables.add(new Ro),!1!==e.options.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||CA),this.mouseSupport=void 0===e.options.mouseSupport||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(LE.addTarget(e.getHTMLElement()))),_o.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){void 0!==e.multipleSelectionSupport&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||CA))}isSelectionSingleChangeEvent(e){return!!this.multipleSelectionController&&this.multipleSelectionController.isSelectionSingleChangeEvent(e)}isSelectionRangeChangeEvent(e){return!!this.multipleSelectionController&&this.multipleSelectionController.isSelectionRangeChangeEvent(e)}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){lA(e.browserEvent.target)||hb()!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(qb(e.browserEvent.target)||lA(e.browserEvent.target))return;let t=void 0===e.index?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||qb(e.browserEvent.target)||lA(e.browserEvent.target)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;let t=e.index;return void 0===t?(this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),void this.list.setAnchor(void 0)):this.isSelectionChangeEvent(e)?this.changeSelection(e):(this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),function(e){return wb(e)&&2===e.button}(e.browserEvent)||this.list.setSelection([t],e.browserEvent),void this._onPointer.fire(e))}onDoubleClick(e){if(qb(e.browserEvent.target)||lA(e.browserEvent.target)||this.isSelectionChangeEvent(e)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;let t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){let t=e.index,i=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){var n;void 0===i&&(i=null!==(n=this.list.getFocus()[0])&&void 0!==n?n:t,this.list.setAnchor(i));let s=Ur(Math.min(i,t),Math.max(i,t)+1),r=this.list.getSelection(),o=function(e,t){let i=e.indexOf(t);if(-1===i)return[];let n=[],s=i-1;for(;s>=0&&e[s]===t-(i-s);)n.push(e[s--]);for(n.reverse(),s=i;s<e.length&&e[s]===t+(s-i);)n.push(e[s++]);return n}(EA(r,[i]),i);if(0===o.length)return;let a=EA(s,function(e,t){let i=[],n=0,s=0;for(;n<e.length||s<t.length;)if(n>=e.length)i.push(t[s++]);else if(s>=t.length)i.push(e[n++]);else{if(e[n]===t[s]){n++,s++;continue}e[n]<t[s]?i.push(e[n++]):s++}return i}(r,o));this.list.setSelection(a,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){let i=this.list.getSelection(),n=i.filter(e=>e!==t);this.list.setFocus([t]),this.list.setAnchor(t),i.length===n.length?this.list.setSelection([...n,t],e.browserEvent):this.list.setSelection(n,e.browserEvent)}}dispose(){this.disposables.dispose()}},wA=class{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){var t,i;let n=this.selectorSuffix&&".".concat(this.selectorSuffix),s=[];e.listBackground&&s.push(".monaco-list".concat(n," .monaco-list-rows { background: ").concat(e.listBackground,"; }")),e.listFocusBackground&&(s.push(".monaco-list".concat(n,":focus .monaco-list-row.focused { background-color: ").concat(e.listFocusBackground,"; }")),s.push(".monaco-list".concat(n,":focus .monaco-list-row.focused:hover { background-color: ").concat(e.listFocusBackground,"; }"))),e.listFocusForeground&&s.push(".monaco-list".concat(n,":focus .monaco-list-row.focused { color: ").concat(e.listFocusForeground,"; }")),e.listActiveSelectionBackground&&(s.push(".monaco-list".concat(n,":focus .monaco-list-row.selected { background-color: ").concat(e.listActiveSelectionBackground,"; }")),s.push(".monaco-list".concat(n,":focus .monaco-list-row.selected:hover { background-color: ").concat(e.listActiveSelectionBackground,"; }"))),e.listActiveSelectionForeground&&s.push(".monaco-list".concat(n,":focus .monaco-list-row.selected { color: ").concat(e.listActiveSelectionForeground,"; }")),e.listActiveSelectionIconForeground&&s.push(".monaco-list".concat(n,":focus .monaco-list-row.selected .codicon { color: ").concat(e.listActiveSelectionIconForeground,"; }")),e.listFocusAndSelectionBackground&&s.push("\n\t\t\t\t.monaco-drag-image".concat(n,",\n\t\t\t\t.monaco-list").concat(n,":focus .monaco-list-row.selected.focused { background-color: ").concat(e.listFocusAndSelectionBackground,"; }\n\t\t\t")),e.listFocusAndSelectionForeground&&s.push("\n\t\t\t\t.monaco-drag-image".concat(n,",\n\t\t\t\t.monaco-list").concat(n,":focus .monaco-list-row.selected.focused { color: ").concat(e.listFocusAndSelectionForeground,"; }\n\t\t\t")),e.listInactiveFocusForeground&&(s.push(".monaco-list".concat(n," .monaco-list-row.focused { color:  ").concat(e.listInactiveFocusForeground,"; }")),s.push(".monaco-list".concat(n," .monaco-list-row.focused:hover { color:  ").concat(e.listInactiveFocusForeground,"; }"))),e.listInactiveSelectionIconForeground&&s.push(".monaco-list".concat(n," .monaco-list-row.focused .codicon { color:  ").concat(e.listInactiveSelectionIconForeground,"; }")),e.listInactiveFocusBackground&&(s.push(".monaco-list".concat(n," .monaco-list-row.focused { background-color:  ").concat(e.listInactiveFocusBackground,"; }")),s.push(".monaco-list".concat(n," .monaco-list-row.focused:hover { background-color:  ").concat(e.listInactiveFocusBackground,"; }"))),e.listInactiveSelectionBackground&&(s.push(".monaco-list".concat(n," .monaco-list-row.selected { background-color:  ").concat(e.listInactiveSelectionBackground,"; }")),s.push(".monaco-list".concat(n," .monaco-list-row.selected:hover { background-color:  ").concat(e.listInactiveSelectionBackground,"; }"))),e.listInactiveSelectionForeground&&s.push(".monaco-list".concat(n," .monaco-list-row.selected { color: ").concat(e.listInactiveSelectionForeground,"; }")),e.listHoverBackground&&s.push(".monaco-list".concat(n,":not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ").concat(e.listHoverBackground,"; }")),e.listHoverForeground&&s.push(".monaco-list".concat(n,":not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ").concat(e.listHoverForeground,"; }"));let r=Wf(e.listFocusAndSelectionOutline,Wf(e.listSelectionOutline,null!==(t=e.listFocusOutline)&&void 0!==t?t:""));r&&s.push(".monaco-list".concat(n,":focus .monaco-list-row.focused.selected { outline: 1px solid ").concat(r,"; outline-offset: -1px;}")),e.listFocusOutline&&s.push("\n\t\t\t\t.monaco-drag-image".concat(n,",\n\t\t\t\t.monaco-list").concat(n,":focus .monaco-list-row.focused,\n\t\t\t\t.context-menu-visible .monaco-list").concat(n,".last-focused .monaco-list-row.focused { outline: 1px solid ").concat(e.listFocusOutline,"; outline-offset: -1px; }\n\t\t\t"));let o=Wf(e.listSelectionOutline,null!==(i=e.listInactiveFocusOutline)&&void 0!==i?i:"");o&&s.push(".monaco-list".concat(n," .monaco-list-row.focused.selected { outline: 1px dotted ").concat(o,"; outline-offset: -1px; }")),e.listSelectionOutline&&s.push(".monaco-list".concat(n," .monaco-list-row.selected { outline: 1px dotted ").concat(e.listSelectionOutline,"; outline-offset: -1px; }")),e.listInactiveFocusOutline&&s.push(".monaco-list".concat(n," .monaco-list-row.focused { outline: 1px dotted ").concat(e.listInactiveFocusOutline,"; outline-offset: -1px; }")),e.listHoverOutline&&s.push(".monaco-list".concat(n," .monaco-list-row:hover { outline: 1px dashed ").concat(e.listHoverOutline,"; outline-offset: -1px; }")),e.listDropOverBackground&&s.push("\n\t\t\t\t.monaco-list".concat(n,".drop-target,\n\t\t\t\t.monaco-list").concat(n," .monaco-list-rows.drop-target,\n\t\t\t\t.monaco-list").concat(n," .monaco-list-row.drop-target { background-color: ").concat(e.listDropOverBackground," !important; color: inherit !important; }\n\t\t\t")),e.listDropBetweenBackground&&(s.push("\n\t\t\t.monaco-list".concat(n," .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,\n\t\t\t.monaco-list").concat(n,' .monaco-list-row.drop-target-before::before {\n\t\t\t\tcontent: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;\n\t\t\t\tbackground-color: ').concat(e.listDropBetweenBackground,";\n\t\t\t}")),s.push("\n\t\t\t.monaco-list".concat(n," .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,\n\t\t\t.monaco-list").concat(n,' .monaco-list-row.drop-target-after::after {\n\t\t\t\tcontent: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;\n\t\t\t\tbackground-color: ').concat(e.listDropBetweenBackground,";\n\t\t\t}"))),e.tableColumnsBorder&&s.push("\n\t\t\t\t.monaco-table > .monaco-split-view2,\n\t\t\t\t.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,\n\t\t\t\t.monaco-enable-motion .monaco-table:hover > .monaco-split-view2,\n\t\t\t\t.monaco-enable-motion .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: ".concat(e.tableColumnsBorder,";\n\t\t\t\t}\n\n\t\t\t\t.monaco-enable-motion .monaco-table > .monaco-split-view2,\n\t\t\t\t.monaco-enable-motion .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: transparent;\n\t\t\t\t}\n\t\t\t")),e.tableOddRowsBackgroundColor&&s.push("\n\t\t\t\t.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {\n\t\t\t\t\tbackground-color: ".concat(e.tableOddRowsBackgroundColor,";\n\t\t\t\t}\n\t\t\t")),this.styleElement.textContent=s.join("\n")}},SA={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:Ir.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:Ir.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:Ir.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},kA={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI:()=>null,onDragStart(){},onDragOver:()=>!1,drop(){},dispose(){}}};function EA(e,t){let i=[],n=0,s=0;for(;n<e.length||s<t.length;)if(n>=e.length)i.push(t[s++]);else if(s>=t.length)i.push(e[n++]);else{if(e[n]===t[s]){i.push(e[n]),n++,s++;continue}e[n]<t[s]?i.push(e[n++]):i.push(t[s++])}return i}var DA=(e,t)=>e-t,TA=class{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,i,n){let s=0;for(let r of this.renderers)r.renderElement(e,t,i[s++],n)}disposeElement(e,t,i,n){let s=0;for(let o of this.renderers){var r;null!==(r=o.disposeElement)&&void 0!==r&&r.call(o,e,t,i[s],n),s+=1}}disposeTemplate(e){let t=0;for(let i of this.renderers)i.disposeTemplate(e[t++])}},IA=class{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return{container:e,disposables:new bo}}renderElement(e,t,i){let n=this.accessibilityProvider.getAriaLabel(e),s=n&&"string"!=typeof n?n:tA(n);i.disposables.add(iv(e=>{this.setAriaLabel(e.readObservable(s),i.container)}));let r=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);"number"==typeof r?i.container.setAttribute("aria-level","".concat(r)):i.container.removeAttribute("aria-level")}setAriaLabel(e,t){e?t.setAttribute("aria-label",e):t.removeAttribute("aria-label")}disposeElement(e,t,i){i.disposables.clear()}disposeTemplate(e){e.disposables.dispose()}},xA=class{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){let t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){var i,n;null===(i=(n=this.dnd).onDragStart)||void 0===i||i.call(n,e,t)}onDragOver(e,t,i,n,s){return this.dnd.onDragOver(e,t,i,n,s)}onDragLeave(e,t,i,n){var s,r;null===(s=(r=this.dnd).onDragLeave)||void 0===s||s.call(r,e,t,i,n)}onDragEnd(e){var t,i;null===(t=(i=this.dnd).onDragEnd)||void 0===t||t.call(i,e)}drop(e,t,i,n,s){this.dnd.drop(e,t,i,n,s)}dispose(){this.dnd.dispose()}},LA=class{get onDidChangeFocus(){return _o.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return _o.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseUp(){return this.view.onMouseUp}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseMove(){return this.view.onMouseMove}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1,t=_o.chain(this.disposables.add(new ML(this.view.domNode,"keydown")).event,t=>t.map(e=>new C_(e)).filter(t=>e=t.keyCode===Kv.ContextMenu||t.shiftKey&&t.keyCode===Kv.F10).map(e=>Db(e,!0)).filter(()=>!1)),i=_o.chain(this.disposables.add(new ML(this.view.domNode,"keyup")).event,t=>t.forEach(()=>e=!1).map(e=>new C_(e)).filter(e=>e.keyCode===Kv.ContextMenu||e.shiftKey&&e.keyCode===Kv.F10).map(e=>Db(e,!0)).map(e=>{let{browserEvent:t}=e,i=this.getFocus(),n=i.length?i[0]:void 0;return{index:n,element:void 0===n?void 0:this.view.element(n),anchor:void 0===n?this.view.domNode:this.view.domElement(n),browserEvent:t}})),n=_o.chain(this.view.onContextMenu,t=>t.filter(t=>!e).map(e=>{let{element:t,index:i,browserEvent:n}=e;return{element:t,index:i,anchor:new k_(L_(this.view.domNode),n),browserEvent:n}}));return _o.any(t,i,n)}get onKeyDown(){return this.disposables.add(new ML(this.view.domNode,"keydown")).event}get onKeyUp(){return this.disposables.add(new ML(this.view.domNode,"keyup")).event}get onKeyPress(){return this.disposables.add(new ML(this.view.domNode,"keypress")).event}get onDidFocus(){return _o.signal(this.disposables.add(new ML(this.view.domNode,"focus",!0)).event)}get onDidBlur(){return _o.signal(this.disposables.add(new ML(this.view.domNode,"blur",!0)).event)}constructor(e,t,i,n){var s,o,a;let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:kA;this.user=e,this._options=l,this.focus=new sA("focused"),this.anchor=new sA("anchor"),this.eventBufferer=new Ho,this._ariaLabel="",this.disposables=new bo,this._onDidDispose=new Ro,this.onDidDispose=this._onDidDispose.event;let h=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?null===(s=this._options.accessibilityProvider)||void 0===s?void 0:s.getWidgetRole():"list";this.selection=new rA("listbox"!==h);let d=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=l.accessibilityProvider,this.accessibilityProvider&&(d.push(new IA(this.accessibilityProvider)),null!==(o=(a=this.accessibilityProvider).onDidChangeActiveDescendant)&&void 0!==o&&o.call(a,this.onDidChangeActiveDescendant,this,this.disposables)),n=n.map(e=>new TA(e.templateId,[...d,e]));let c=(0,r.A)((0,r.A)({},l),{},{dnd:l.dnd&&new xA(this,l.dnd)});if(this.view=this.createListView(t,i,n,c),this.view.domNode.setAttribute("role",h),l.styleController?this.styleController=l.styleController(this.view.domId):this.styleController=new wA(nC(this.view.domNode),this.view.domId),this.spliceable=new PL([new oA(this.focus,this.view,l.identityProvider),new oA(this.selection,this.view,l.identityProvider),new oA(this.anchor,this.view,l.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new vA(this,this.view)),("boolean"!=typeof l.keyboardSupport||l.keyboardSupport)&&(this.keyboardController=new pA(this,this.view,l),this.disposables.add(this.keyboardController)),l.keyboardNavigationLabelProvider){var u;let e=l.keyboardNavigationDelegate||fA;this.typeNavigationController=new mA(this,this.view,l.keyboardNavigationLabelProvider,null!==(u=l.keyboardNavigationEventFilter)&&void 0!==u?u:()=>!0,e),this.disposables.add(this.typeNavigationController)}if(this.mouseController=this.createMouseController(l),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider){let e=this.accessibilityProvider.getWidgetAriaLabel(),t=e&&"string"!=typeof e?e:tA(e);this.disposables.add(iv(e=>{this.ariaLabel=e.readObservable(t)}))}!1!==this._options.multipleSelectionSupport&&this.view.domNode.setAttribute("aria-multiselectable","true")}createListView(e,t,i,n){return new eA(e,t,i,n)}createMouseController(e){return new yA(this)}updateOptions(){var e,t;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options=(0,r.A)((0,r.A)({},this._options),i),null!==(e=this.typeNavigationController)&&void 0!==e&&e.updateOptions(this._options),void 0!==this._options.multipleSelectionController&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(i),null!==(t=this.keyboardController)&&void 0!==t&&t.updateOptions(i),this.view.updateOptions(i)}get options(){return this._options}splice(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e<0||e>this.view.length)throw new VL(this.user,"Invalid start index: ".concat(e));if(t<0)throw new VL(this.user,"Invalid delete count: ".concat(t));0===t&&0===i.length||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,i))}updateWidth(e){this.view.updateWidth(e)}updateElementHeight(e,t){this.view.updateElementHeight(e,t,null)}rerender(){this.view.rerender()}element(e){return this.view.element(e)}indexOf(e){return this.view.indexOf(e)}indexAt(e){return this.view.indexAt(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get contentWidth(){return this.view.contentWidth}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get onDidChangeContentWidth(){return this.view.onDidChangeContentWidth}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollLeft(){return this.view.getScrollLeft()}set scrollLeft(e){this.view.setScrollLeft(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get firstMostlyVisibleIndex(){return this.view.firstMostlyVisibleIndex}get lastVisibleIndex(){return this.view.lastVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}triggerTypeNavigation(){var e;null===(e=this.typeNavigationController)||void 0===e||e.trigger()}setSelection(e,t){for(let i of e)if(i<0||i>=this.length)throw new VL(this.user,"Invalid index ".concat(i));this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(void 0!==e){if(e<0||e>=this.length)throw new VL(this.user,"Invalid index ".concat(e));this.anchor.set([e])}else this.anchor.set([])}getAnchor(){return this.anchor.get().at(0)}getAnchorElement(){let e=this.getAnchor();return void 0===e?void 0:this.element(e)}setFocus(e,t){for(let i of e)if(i<0||i>=this.length)throw new VL(this.user,"Invalid index ".concat(i));this.focus.set(e,t)}focusNext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if(0===this.length)return;let s=this.focus.get(),r=this.findNextIndex(s.length>0?s[0]+e:0,t,n);r>-1&&this.setFocus([r],i)}focusPrevious(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if(0===this.length)return;let s=this.focus.get(),r=this.findPreviousIndex(s.length>0?s[0]-e:0,t,n);r>-1&&this.setFocus([r],i)}async focusNextPage(e,t){let i=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);i=0===i?0:i-1;let n=this.getFocus()[0];if(n!==i&&(void 0===n||i>n)){let s=this.findPreviousIndex(i,!1,t);s>-1&&n!==s?this.setFocus([s],e):this.setFocus([i],e)}else{let s=this.view.getScrollTop(),r=s+this.view.renderHeight;i>n&&(r-=this.view.elementHeight(i)),this.view.setScrollTop(r),this.view.getScrollTop()!==s&&(this.setFocus([]),await El(0),await this.focusNextPage(e,t))}}async focusPreviousPage(e,t){let i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>0,s=n(),r=this.view.getScrollTop()+s;i=0===r?this.view.indexAt(r):this.view.indexAfter(r-1);let o=this.getFocus()[0];if(o!==i&&(void 0===o||o>=i)){let n=this.findNextIndex(i,!1,t);n>-1&&o!==n?this.setFocus([n],e):this.setFocus([i],e)}else{let i=r;this.view.setScrollTop(r-this.view.renderHeight-s),this.view.getScrollTop()+n()!==i&&(this.setFocus([]),await El(0),await this.focusPreviousPage(e,t,n))}}focusLast(e,t){if(0===this.length)return;let i=this.findPreviousIndex(this.length-1,!1,t);i>-1&&this.setFocus([i],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,i){if(0===this.length)return;let n=this.findNextIndex(e,!1,i);n>-1&&this.setFocus([n],t)}findNextIndex(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;for(let n=0;n<this.length;n++){if(e>=this.length&&!t)return-1;if(e%=this.length,!i||i(this.element(e)))return e;e++}return-1}findPreviousIndex(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;for(let n=0;n<this.length;n++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!i||i(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e<0||e>=this.length)throw new VL(this.user,"Invalid index ".concat(e));let n=this.view.getScrollTop(),s=this.view.elementTop(e),r=this.view.elementHeight(e);if(Ji(t)){let e=r-this.view.renderHeight+i;this.view.setScrollTop(e*D_(t,0,1)+s-i)}else{let e=s+r,t=n+this.view.renderHeight;s<n+i&&e>=t||(s<n+i||e>=t&&r>=this.view.renderHeight?this.view.setScrollTop(s-i):e>=t&&this.view.setScrollTop(e-this.view.renderHeight))}}getRelativeTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e<0||e>=this.length)throw new VL(this.user,"Invalid index ".concat(e));let i=this.view.getScrollTop(),n=this.view.elementTop(e),s=this.view.elementHeight(e);if(n<i+t||n+s>i+this.view.renderHeight)return null;let r=s-this.view.renderHeight+t;return Math.abs((i+t-n)/r)}isDOMFocused(){return cb(this.view.domNode)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(e){return this.view.getElementDomId(e)}getElementTop(e){return this.view.elementTop(e)}style(e){this.styleController.style(e)}delegateScrollFromMouseWheelEvent(e){this.view.delegateScrollFromMouseWheelEvent(e)}toListEvent(e){let{indexes:t,browserEvent:i}=e;return{indexes:t,elements:t.map(e=>this.view.element(e)),browserEvent:i}}_onFocusChange(){let e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){let e=this.focus.get();if(e.length>0){var t;let i;null!==(t=this.accessibilityProvider)&&void 0!==t&&t.getActiveDescendantId&&(i=this.accessibilityProvider.getActiveDescendantId(this.view.element(e[0]))),this.view.domNode.setAttribute("aria-activedescendant",i||this.view.getElementDomId(e[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){let e=this.selection.get();this.view.domNode.classList.toggle("selection-none",0===e.length),this.view.domNode.classList.toggle("selection-single",1===e.length),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}};LA.__decorator=ki([BL],LA.prototype,"onDidChangeFocus",null),LA.__decorator=ki([BL],LA.prototype,"onDidChangeSelection",null),LA.__decorator=ki([BL],LA.prototype,"onContextMenu",null),LA.__decorator=ki([BL],LA.prototype,"onKeyDown",null),LA.__decorator=ki([BL],LA.prototype,"onKeyUp",null),LA.__decorator=ki([BL],LA.prototype,"onKeyPress",null),LA.__decorator=ki([BL],LA.prototype,"onDidFocus",null),LA.__decorator=ki([BL],LA.prototype,"onDidBlur",null);var AA=class{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}},NA=new AA("id#");(0,h.a)(),(0,h.t)();var FA=(0,h.n)(Lv),OA=Object.freeze("a.abbr.b.bdo.blockquote.br.caption.cite.code.col.colgroup.dd.del.details.dfn.div.dl.dt.em.figcaption.figure.h1.h2.h3.h4.h5.h6.hr.i.img.ins.kbd.label.li.mark.ol.p.pre.q.rp.rt.ruby.s.samp.small.small.source.span.strike.strong.sub.summary.sup.table.tbody.td.tfoot.th.thead.time.tr.tt.u.ul.var.video.wbr".split(".")),RA=Object.freeze(["href","target","src","alt","title","for","name","role","tabindex","x-dispatch","required","checked","placeholder","type","start","width","height","align"]),MA="vscode-relative-path";function PA(e,t){if("*"===t.override)return!0;try{let i=new URL(e,MA+"://");return!!(t.override.includes(i.protocol.replace(/:$/,""))||t.allowRelativePaths&&i.protocol===MA+":"&&!e.trim().toLowerCase().startsWith(MA))}catch(i){return!1}}var BA=Object.freeze({ALLOWED_TAGS:[...OA],ALLOWED_ATTR:[...RA],ALLOW_UNKNOWN_PROTOCOLS:!0});function UA(e,t,i){try{var n,s,o,a,l,h,d;let c=(0,r.A)({},BA);(null===t||void 0===t?void 0:t.allowedTags)&&(t.allowedTags.override&&(c.ALLOWED_TAGS=[...t.allowedTags.override]),t.allowedTags.augment&&(c.ALLOWED_TAGS=[...null!==(n=c.ALLOWED_TAGS)&&void 0!==n?n:[],...t.allowedTags.augment]));let u=[...RA];null!==t&&void 0!==t&&t.allowedAttributes&&(t.allowedAttributes.override&&(u=[...t.allowedAttributes.override]),t.allowedAttributes.augment&&(u=[...u,...t.allowedAttributes.augment])),u=u.map(e=>"string"==typeof e?e.toLowerCase():{attributeName:e.attributeName.toLowerCase(),shouldKeep:e.shouldKeep});let g=new Set(u.map(e=>"string"==typeof e?e:e.attributeName)),p=new Map;for(let e of u)"string"==typeof e?p.delete(e):p.set(e.attributeName,e);return c.ALLOWED_ATTR=Array.from(g),function(e,t){FA.addHook("afterSanitizeAttributes",i=>{for(let n of["href","src"])if(i.hasAttribute(n)){let s=i.getAttribute(n);"href"===n?!s.startsWith("#")&&!PA(s,e)&&i.removeAttribute(n):PA(s,t)||i.removeAttribute(n)}})}({override:null!==(s=null===t||void 0===t||null===(o=t.allowedLinkProtocols)||void 0===o?void 0:o.override)&&void 0!==s?s:[Ha.http,Ha.https],allowRelativePaths:null!==(a=null===t||void 0===t?void 0:t.allowRelativeLinkPaths)&&void 0!==a&&a},{override:null!==(l=null===t||void 0===t||null===(h=t.allowedMediaProtocols)||void 0===h?void 0:h.override)&&void 0!==l?l:[Ha.http,Ha.https],allowRelativePaths:null!==(d=null===t||void 0===t?void 0:t.allowRelativeMediaPaths)&&void 0!==d&&d}),null!==t&&void 0!==t&&t.replaceWithPlaintext&&FA.addHook("uponSanitizeElement",WA),p.size&&FA.addHook("uponSanitizeAttribute",(e,t)=>{let i=p.get(t.attrName);if(i){let n=i.shouldKeep(e,t);"string"==typeof n?(t.keepAttr=!0,t.attrValue=n):t.keepAttr=n}else t.keepAttr=g.has(t.attrName)}),"dom"===i?FA.sanitize(e,(0,r.A)((0,r.A)({},c),{},{RETURN_DOM_FRAGMENT:!0})):FA.sanitize(e,(0,r.A)((0,r.A)({},c),{},{RETURN_TRUSTED_TYPE:!0}))}finally{FA.removeAllHooks()}}var HA=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],WA=(e,t,i)=>{if(!t.allowedTags[t.tagName]&&"body"!==t.tagName){var n,s;let t=VA(e);t&&(e.nodeType===Node.COMMENT_NODE?null===(n=e.parentElement)||void 0===n||n.insertBefore(t,e):null===(s=e.parentElement)||void 0===s||s.replaceChild(t,e))}};function VA(e){if(!e.ownerDocument)return;let t,i;if(e.nodeType===Node.COMMENT_NODE)t="\x3c!--".concat(e.textContent,"--\x3e");else{if(!(e instanceof Element))return;{let n=e.tagName.toLowerCase(),s=HA.includes(n);t="<".concat(n).concat(e.attributes.length?" "+Array.from(e.attributes).map(e=>"".concat(e.name,'="').concat(e.value,'"')).join(" "):"",">"),s||(i="</".concat(n,">"))}}let n=Lv.document.createDocumentFragment(),s=e.ownerDocument.createTextNode(t);for(n.appendChild(s);e.firstChild;)n.appendChild(e.firstChild);let r=i?e.ownerDocument.createTextNode(i):void 0;return r&&n.appendChild(r),n}function zA(e,t,i){Ab(e,UA(t,i,"dom"))}var KA=RegExp("(\\\\)?\\$\\((".concat(yf.iconNameExpression,"(?:").concat(yf.iconModifierExpression,")?)\\)"),"g");function qA(e){let t,i=[],n=0,s=0;for(;null!==(t=KA.exec(e));){s=t.index||0,n<s&&i.push(e.substring(n,s)),n=(t.index||0)+t[0].length;let[,r,o]=t;i.push(r?"$(".concat(o,")"):GA({id:o}))}return n<e.length&&i.push(e.substring(n)),i}function GA(e){let t=Mb("span");return t.classList.add(...yf.asClassNameArray(e)),t}var jA=Object.freeze({image:e=>{let{href:t,title:i,text:n}=e,s=[],r=[];return t&&(({href:t,dimensions:s}=function(e){let t=[],i=e.split("|").map(e=>e.trim());e=i[0];let n=i[1];if(n){let e=/height=(\d+)/.exec(n),i=/width=(\d+)/.exec(n),s=e?e[1]:"",r=i?i[1]:"",o=isFinite(parseInt(r)),a=isFinite(parseInt(s));o&&t.push('width="'.concat(r,'"')),a&&t.push('height="'.concat(s,'"'))}return{href:e,dimensions:t}}(t)),r.push('src="'.concat(Xy(t),'"'))),n&&r.push('alt="'.concat(Xy(n),'"')),i&&r.push('title="'.concat(Xy(i),'"')),s.length&&(r=r.concat(s)),"<img "+r.join(" ")+">"},paragraph(e){let{tokens:t}=e;return"<p>".concat(this.parser.parseInline(t),"</p>")},link(e){let{href:t,title:i,tokens:n}=e,s=this.parser.parseInline(n);return"string"==typeof t?(t===s&&(s=Zy(s)),i="string"==typeof i?Xy(Zy(i)):"",t=Zy(t),t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),'<a href="'.concat(t,'" title="').concat(i||t,'" draggable="false">').concat(s,"</a>")):""}});function YA(e){var t,i;let n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,a=new bo,l=!1,d=new h.r(...null!==(t=s.markedExtensions)&&void 0!==t?t:[]),{renderer:c,codeBlocks:u,syncCodeBlocks:g}=function(e,t,i){let n=new e.Renderer(t.markedOptions);n.image=jA.image,n.link=jA.link,n.paragraph=jA.paragraph,i.supportAlertSyntax&&(n.blockquote=function(e){return function(t){let{tokens:i}=t,n=i[0];if("paragraph"!==(null===n||void 0===n?void 0:n.type))return e.call(this,t);let s=n.tokens;if(!s||0===s.length)return e.call(this,t);let r=s[0];if("text"!==(null===r||void 0===r?void 0:r.type))return e.call(this,t);let o=/^\s*\[!(NOTE|TIP|IMPORTANT|WARNING|CAUTION)\]\s*?\n*/i,a=r.raw.match(o);if(!a)return e.call(this,t);r.raw=r.raw.replace(o,""),r.text=r.text.replace(o,"");let l=a[1],h=l.charAt(0).toUpperCase()+l.slice(1).toLowerCase(),d=l.toLowerCase();return'<blockquote data-severity="'.concat(d,'"><p><span>').concat(GA({id:{note:"info",tip:"light-bulb",important:"comment",warning:"alert",caution:"stop"}[d]}).outerHTML).concat(h,"</span>").concat(this.parser.parse(i).substring(3),"</blockquote>\n")}}(n.blockquote));let s=[],r=[];return t.codeBlockRendererSync?n.code=e=>{let{text:i,lang:n,raw:s}=e,o=NA.nextId(),a=t.codeBlockRendererSync(ZA(n),i,s);return r.push([o,a]),'<div class="code" data-code="'.concat(o,'">').concat(na(i),"</div>")}:t.codeBlockRenderer&&(n.code=e=>{let{text:i,lang:n}=e,r=NA.nextId(),o=t.codeBlockRenderer(ZA(n),i);return s.push(o.then(e=>[r,e])),'<div class="code" data-code="'.concat(r,'">').concat(na(i),"</div>")}),i.supportHtml||(n.html=e=>{var n;let{text:s}=e;return null!==(n=t.sanitizerConfig)&&void 0!==n&&n.replaceWithPlaintext?na(s):i.isTrusted&&s.match(/^(<span[^>]+>)|(<\/\s*span>)$/)?s:""}),{renderer:n,codeBlocks:s,syncCodeBlocks:r}}(d,s,e),p=function(e){let t=e.value;return t.length>1e5&&(t="".concat(t.substr(0,1e5),"\u2026")),e.supportThemeIcons&&(t=function(e){return e.replace(Wy,e=>"\\".concat(e))}(t)),t}(e);if(s.fillInIncompleteTokens){let e=(0,r.A)((0,r.A)((0,r.A)({},d.defaults),s.markedOptions),{},{renderer:c}),t=function(e){for(let t=0;t<uN;t++){let t=gN(e);if(!t)break;e=t}return e}(d.lexer(p,e));n=d.parser(t,e)}else n=d.parse(p,(0,r.A)((0,r.A)({},null===s||void 0===s?void 0:s.markedOptions),{},{renderer:c,async:!1}));e.supportThemeIcons&&(n=qA(n).map(e=>"string"==typeof e?e:e.outerHTML).join(""));let f,m=mb("div");if(zA(m,n,nN(e,null!==(i=s.sanitizerConfig)&&void 0!==i?i:{})),function(e,t,i){for(let r of i.querySelectorAll("img, audio, video, source")){let i=r.getAttribute("src");if(i){var n;let o=i;try{e.baseUri&&(o=JA(Gs.from(e.baseUri),o))}catch(s){}if(r.setAttribute("src",XA(e,o,!0)),null!==(n=t.sanitizerConfig)&&void 0!==n&&n.remoteImageIsAllowed){let e=Gs.parse(o);e.scheme!==Ha.file&&e.scheme!==Ha.data&&!t.sanitizerConfig.remoteImageIsAllowed(e)&&r.replaceWith(Mb("",void 0,r.outerHTML))}}}for(let r of i.querySelectorAll("a")){let t=r.getAttribute("href");if(r.setAttribute("href",""),!t||/^data:|javascript:/i.test(t)||/^command:/i.test(t)&&!e.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(t))r.replaceWith(...r.childNodes);else{let i=XA(e,t,!1);e.baseUri&&(i=JA(Gs.from(e.baseUri),t)),r.dataset.href=i}}}(e,s,m),o?(f=o,Ab(o,...m.childNodes)):f=m,u.length>0)Promise.all(u).then(e=>{var t;if(l)return;let i=new Map(e),n=f.querySelectorAll("div[data-code]");for(let s of n){var r;let e=i.get(null!==(r=s.dataset.code)&&void 0!==r?r:"");e&&Ab(s,e)}null===(t=s.asyncRenderCallback)||void 0===t||t.call(s)});else if(g.length>0){let e=new Map(g),t=f.querySelectorAll("div[data-code]");for(let i of t){var v;let t=e.get(null!==(v=i.dataset.code)&&void 0!==v?v:"");t&&Ab(i,t)}}if(s.asyncRenderCallback)for(let r of f.getElementsByTagName("img")){let e=a.add(W_(r,"load",()=>{e.dispose(),s.asyncRenderCallback()}))}if(s.actionHandler){let t=t=>{let i=new k_(L_(f),t);!i.leftButton&&!i.middleButton||QA(e,s,i)};a.add(W_(f,"click",t)),a.add(W_(f,"auxclick",t)),a.add(W_(f,"keydown",t=>{let i=new C_(t);!i.equals(Kv.Space)&&!i.equals(Kv.Enter)||QA(e,s,i)}))}for(let r of[...f.getElementsByTagName("input")]){var _,b;if("checkbox"===(null===(_=r.attributes.getNamedItem("type"))||void 0===_?void 0:_.value))r.setAttribute("disabled","");else if(null!==(b=s.sanitizerConfig)&&void 0!==b&&b.replaceWithPlaintext){var C;let e=VA(r);e?null===(C=r.parentElement)||void 0===C||C.replaceChild(e,r):r.remove()}else r.remove()}return{element:f,dispose:()=>{l=!0,a.dispose()}}}function QA(e,t,i){let n=i.target.closest("a[data-href]");if(bb(n))try{var s;let i=n.dataset.href;i&&(e.baseUri&&(i=JA(Gs.from(e.baseUri),i)),null===(s=t.actionHandler)||void 0===s||s.call(t,i,e))}catch(e){Ri(e)}finally{i.preventDefault(),i.stopPropagation()}}function $A(e,t){let i;try{i=Dg(decodeURIComponent(t))}catch(n){}return i?(i=lS(i,t=>{if(e.uris&&e.uris[t])return Gs.revive(e.uris[t])}),encodeURIComponent(JSON.stringify(i))):t}function XA(e,t,i){let n=e.uris&&e.uris[t],s=Gs.revive(n);return i?t.startsWith(Ha.data+":")?t:(s||(s=Gs.parse(t)),Za.uriToBrowserUri(s).toString(!0)):s&&Gs.parse(t).toString()!==s.toString()?(s.query&&(s=s.with({query:$A(e,s.query)})),s.toString()):t}function ZA(e){if(!e)return"";let t=e.split(/[\s+|:|,|\{|\?]/,1);return t.length?t[0]:e}function JA(e,t){return/^\w[\w\d+.-]*:/.test(t)?t:e.path.endsWith("/")?ul(e,t).toString():ul(ll(e),t).toString()}function eN(e,t){return function(e,t){return UA(e,t,"trusted")}(e,nN(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}))}var tN=Object.freeze([...OA,"input"]),iN=Object.freeze(["align","autoplay","alt","colspan","controls","draggable","height","href","loop","muted","playsinline","poster","rowspan","src","target","title","type","width","start","checked","disabled","value","data-code","data-href","data-severity",{attributeName:"style",shouldKeep:(e,t)=>"SPAN"===e.tagName&&"style"===t.attrName&&/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z0-9]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z0-9]+)+\));)?(border-radius:[0-9]+px;)?$/.test(t.attrValue)},{attributeName:"class",shouldKeep:(e,t)=>"SPAN"===e.tagName&&"class"===t.attrName&&/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(t.attrValue)}]);function nN(e,t){var i,n,s,r,o,a;let l=null!==(i=e.isTrusted)&&void 0!==i&&i,h=[Ha.http,Ha.https,Ha.mailto,Ha.file,Ha.vscodeFileResource,Ha.vscodeRemote,Ha.vscodeRemoteResource,Ha.vscodeNotebookCell,Ha.internal];return l&&h.push(Ha.command),null!==(n=t.allowedLinkSchemes)&&void 0!==n&&n.augment&&h.push(...t.allowedLinkSchemes.augment),{allowedTags:{override:null!==(s=null===(r=t.allowedTags)||void 0===r?void 0:r.override)&&void 0!==s?s:tN},allowedAttributes:{override:null!==(o=null===(a=t.allowedAttributes)||void 0===a?void 0:a.override)&&void 0!==o?o:iN},allowedLinkProtocols:{override:h},allowRelativeLinkPaths:!!e.baseUri,allowedMediaProtocols:{override:[Ha.http,Ha.https,Ha.data,Ha.file,Ha.vscodeFileResource,Ha.vscodeRemote,Ha.vscodeRemoteResource]},allowRelativeMediaPaths:!!e.baseUri,replaceWithPlaintext:t.replaceWithPlaintext}}function sN(e,t){var i;if("string"==typeof e)return e;let n=null!==(i=e.value)&&void 0!==i?i:"";n.length>1e5&&(n="".concat(n.substr(0,1e5),"\u2026"));let s=function(){let e=new h.i;return e.code=e=>{let{text:t}=e;return na(t)},e.blockquote=e=>{let{text:t}=e;return t+"\n"},e.html=e=>"",e.heading=function(e){let{tokens:t}=e;return this.parser.parseInline(t)+"\n"},e.hr=()=>"",e.list=function(e){let{items:t}=e;return t.map(e=>this.listitem(e)).join("\n")+"\n"},e.listitem=e=>{let{text:t}=e;return t+"\n"},e.paragraph=function(e){let{tokens:t}=e;return this.parser.parseInline(t)+"\n"},e.table=function(e){let{header:t,rows:i}=e;return t.map(e=>this.tablecell(e)).join(" ")+"\n"+i.map(e=>e.map(e=>this.tablecell(e)).join(" ")).join("\n")+"\n"},e.tablerow=e=>{let{text:t}=e;return t},e.tablecell=function(e){let{tokens:t}=e;return this.parser.parseInline(t)},e.strong=e=>{let{text:t}=e;return t},e.em=e=>{let{text:t}=e;return t},e.codespan=e=>{let{text:t}=e;return na(t)},e.br=e=>"\n",e.del=e=>{let{text:t}=e;return t},e.image=e=>"",e.text=e=>{let{text:t}=e;return t},e.link=e=>{let{text:t}=e;return t},e}();return null!==t&&void 0!==t&&t.includeCodeBlocksFences&&(s.code=oN),null!==t&&void 0!==t&&t.useLinkFormatter&&(s.link=aN),eN((0,h.c)(n,{async:!1,renderer:s}),{isTrusted:!1},{}).toString().replace(/&(#\d+|[a-zA-Z]+);/g,e=>{var t;return null!==(t=rN.get(e))&&void 0!==t?t:e}).trim()}var rN=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]);var oN=e=>{let{text:t}=e;return"\n```\n".concat(na(t),"\n```\n")},aN=e=>{let{text:t,href:i}=e;try{if(i){let e=Gs.parse(i);return t.trim()||ol(e)}}catch(n){return t.trim()||Ps(i)}return t};function lN(e){let t="";return e.forEach(e=>{t+=e.raw}),t}function hN(e){if(e.tokens)for(let n=e.tokens.length-1;n>=0;n--){let s=e.tokens[n];if("text"===s.type){let r=s.raw.split("\n"),o=r[r.length-1];if(o.includes("`"))return pN(e);if(o.includes("**"))return CN(e);if(o.match(/\*\w/))return fN(e);if(o.match(/(^|\s)__\w/))return yN(e);if(o.match(/(^|\s)_\w/))return mN(e);if(dN(o)||cN(o)&&e.tokens.slice(0,n).some(e=>"text"===e.type&&e.raw.match(/\[[^\]]*$/))){var t,i;let s=e.tokens.slice(n+1);return"link"===(null===(t=s[0])||void 0===t?void 0:t.type)&&"text"===(null===(i=s[1])||void 0===i?void 0:i.type)&&s[1].raw.match(/^ *"[^"]*$/)||o.match(/^[^"]* +"[^"]*$/)?_N(e):vN(e)}if(o.match(/(^|\s)\[\w*[^\]]*$/))return bN(e)}}}function dN(e){return!!e.match(/(^|\s)\[.*\]\(\w*/)}function cN(e){return!!e.match(/^[^\[]*\]\([^\)]*$/)}var uN=3;function gN(e){let t,i;for(t=0;t<e.length;t++){let n=e[t];if("paragraph"===n.type&&n.raw.match(/(\n|^)\|/)){i=SN(e.slice(t));break}}let n=e.at(-1);if(!i&&"list"===(null===n||void 0===n?void 0:n.type)){let s=function(e){var t;let i,n=e.items[e.items.length-1],s=n.tokens?n.tokens[n.tokens.length-1]:void 0,r=e=>{var t;let i=null===(t=e.items.at(-1))||void 0===t?void 0:t.tokens.at(-1);return"heading"===(null===i||void 0===i?void 0:i.type)||"list"===(null===i||void 0===i?void 0:i.type)&&r(i)};if("text"!==(null===s||void 0===s?void 0:s.type)||"inRawBlock"in n){if(r(e)){let t=(0,h.o)(e.raw.trim()+" &nbsp;")[0];return"list"===t.type?t:void 0}}else i=hN(s);if(!i||"paragraph"!==i.type)return;let o=lN(e.items.slice(0,-1)),a=null===(t=n.raw.match(/^(\s*(-|\d+\.|\*) +)/))||void 0===t?void 0:t[0];if(!a)return;let l=(0,h.o)(o+(a+lN(n.tokens.slice(0,-1))+i.raw))[0];return"list"===l.type?l:void 0}(n);s&&(i=[s],t=e.length-1)}if(!i&&"paragraph"===(null===n||void 0===n?void 0:n.type)){let s=hN(n);s&&(i=[s],t=e.length-1)}if(i){let n=[...e.slice(0,t),...i];return n.links=e.links,n}if("heading"===(null===n||void 0===n?void 0:n.type)){let t=function(e,t){if(e.raw.match(/-\s*$/))return(0,h.o)(t+" &nbsp;")}(n,lN(e));if(t)return t}return null}function pN(e){return wN(e,"`")}function fN(e){return wN(e,"*")}function mN(e){return wN(e,"_")}function vN(e){return wN(e,")",!1)}function _N(e){return wN(e,'")',!1)}function bN(e){return wN(e,"](https://microsoft.com)",!1)}function CN(e){return wN(e,"**")}function yN(e){return wN(e,"__")}function wN(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=lN(Array.isArray(e)?e:[e]);return(0,h.o)((i?n.trimEnd():n)+t)[0]}function SN(e){let t,i=lN(e),n=i.split("\n"),s=!1;for(let r=0;r<n.length;r++){let e=n[r].trim();if(void 0===t&&e.match(/^\s*\|/)){let i=e.match(/(\|[^\|]+)(?=\||$)/g);i&&(t=i.length)}else if("number"==typeof t){if(!e.match(/^\s*\|/))return;if(r!==n.length-1)return;s=!0}}if("number"==typeof t&&t>0){let e=s?n.slice(0,-1).join("\n"):i;return(0,h.o)(e+(e.match(/\|\s*$/)?"":"|")+"\n|".concat(" --- |".repeat(t)))}}var kN={showInstantHover:()=>{},showDelayedHover:()=>{},setupDelayedHover:()=>Co.None,setupDelayedHoverAtMouse:()=>Co.None,hideHover:()=>{},showAndFocusLastHover:()=>{},setupManagedHover:()=>({dispose:()=>{},show:()=>{},hide:()=>{},update:()=>{}}),showManagedHover:()=>{}};function EN(){return kN}wE({});var DN=Mb,TN="selectOption.entry.template",IN=class{get templateId(){return TN}renderTemplate(e){let t=Object.create(null);return t.root=e,t.text=xb(e,DN(".option-text")),t.detail=xb(e,DN(".option-detail")),t.decoratorRight=xb(e,DN(".option-decorator-right")),t}renderElement(e,t,i){let n=i,s=e.text,r=e.detail,o=e.decoratorRight,a=e.isDisabled;n.text.textContent=s,n.detail.textContent=r||"",n.decoratorRight.textContent=o||"",a?n.root.classList.add("option-disabled"):n.root.classList.remove("option-disabled")}disposeTemplate(e){}},xN=(Dt=class e extends Co{constructor(t,i,n,s,r){super(),this.options=[],this._currentSelection=0,this._hasDetails=!1,this._selectionDetailsDisposables=this._register(new bo),this._skipLayout=!1,this._sticky=!1,this._isVisible=!1,this.styles=s,this.selectBoxOptions=r||Object.create(null),"number"==typeof this.selectBoxOptions.minBottomMargin?this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0):this.selectBoxOptions.minBottomMargin=e.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN,this.selectElement=mb("select"),this.selectElement.className="monaco-select-box","string"==typeof this.selectBoxOptions.ariaLabel&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),"string"==typeof this.selectBoxOptions.ariaDescription&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=new Ro,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(n),this.selected=i||0,t&&this.setOptions(t,i),this.initStyleSheet()}setTitle(e){!this._hover&&e?this._hover=this._register(EN().setupManagedHover(RL("mouse"),this.selectElement,e)):this._hover&&this._hover.update(e)}getHeight(){return 22}getTemplateId(){return TN}constructSelectDropDown(e){this.contextViewProvider=e,this.selectDropDownContainer=Mb(".monaco-select-box-dropdown-container"),this.selectionDetailsPane=xb(this.selectDropDownContainer,DN(".select-box-details-pane"));let t=xb(xb(this.selectDropDownContainer,DN(".select-box-dropdown-container-width-control")),DN(".width-control-div"));this.widthControlElement=mb("span"),this.widthControlElement.className="option-text-width-control",xb(t,this.widthControlElement),this._dropDownPosition=iD.BELOW,this.styleElement=nC(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(W_(this.selectDropDownContainer,kb.DRAG_START,e=>{Db(e,!0)}))}registerListeners(){let e;this._register(z_(this.selectElement,"change",e=>{this.selected=e.target.selectedIndex,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)})),this._register(W_(this.selectElement,kb.CLICK,e=>{Db(e),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(W_(this.selectElement,kb.MOUSE_DOWN,e=>{Db(e)})),this._register(W_(this.selectElement,"touchstart",t=>{e=this._isVisible})),this._register(W_(this.selectElement,"touchend",t=>{Db(t),e?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(W_(this.selectElement,kb.KEY_DOWN,e=>{let t=new C_(e),i=!1;qn?(t.keyCode===Kv.DownArrow||t.keyCode===Kv.UpArrow||t.keyCode===Kv.Space||t.keyCode===Kv.Enter)&&(i=!0):(t.keyCode===Kv.DownArrow&&t.altKey||t.keyCode===Kv.UpArrow&&t.altKey||t.keyCode===Kv.Space||t.keyCode===Kv.Enter)&&(i=!0),i&&(this.showSelectDropDown(),Db(e,!0))}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){Mr(this.options,e)||(this.options=e,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((e,t)=>{this.selectElement.add(this.createOption(e.text,t,e.isDisabled)),"string"==typeof e.description&&(this._hasDetails=!0)})),void 0!==t&&(this.select(t),this._currentSelection=this.selected)}setEnabled(e){this.selectElement.disabled=!e}setOptionsList(){var e;null===(e=this.selectList)||void 0===e||e.splice(0,this.selectList.length,this.options)}select(e){e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)}setAriaLabel(e){this.selectBoxOptions.ariaLabel=e,this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){this.container=e,e.classList.add("select-container"),e.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){let e=[];this.styles.listFocusBackground&&e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ".concat(this.styles.listFocusBackground," !important; }")),this.styles.listFocusForeground&&e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ".concat(this.styles.listFocusForeground," !important; }")),this.styles.decoratorRightForeground&&e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ".concat(this.styles.decoratorRightForeground,"; }")),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(e.push(".monaco-select-box-dropdown-container { border: 1px solid ".concat(this.styles.selectBorder," } ")),e.push(".monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ".concat(this.styles.selectBorder," } ")),e.push(".monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ".concat(this.styles.selectBorder," } "))):this.styles.selectListBorder&&(e.push(".monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ".concat(this.styles.selectListBorder," } ")),e.push(".monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ".concat(this.styles.selectListBorder," } "))),this.styles.listHoverForeground&&e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ".concat(this.styles.listHoverForeground," !important; }")),this.styles.listHoverBackground&&e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ".concat(this.styles.listHoverBackground," !important; }")),this.styles.listFocusOutline&&e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ".concat(this.styles.listFocusOutline," !important; outline-offset: -1.6px !important; }")),this.styles.listHoverOutline&&e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ".concat(this.styles.listHoverOutline," !important; outline-offset: -1.6px !important; }")),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=e.join("\n")}styleSelectElement(){var e,t,i;let n=null!==(e=this.styles.selectBackground)&&void 0!==e?e:"",s=null!==(t=this.styles.selectForeground)&&void 0!==t?t:"",r=null!==(i=this.styles.selectBorder)&&void 0!==i?i:"";this.selectElement.style.backgroundColor=n,this.selectElement.style.color=s,this.selectElement.style.borderColor=r}styleList(){var e,t;let i=null!==(e=this.styles.selectBackground)&&void 0!==e?e:"",n=Wf(this.styles.selectListBackground,i);this.selectDropDownListContainer.style.backgroundColor=n,this.selectionDetailsPane.style.backgroundColor=n;let s=null!==(t=this.styles.focusBorder)&&void 0!==t?t:"";this.selectDropDownContainer.style.outlineColor=s,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(e,t,i){let n=mb("option");return n.value=e,n.text=e,n.disabled=!!i,n}showSelectDropDown(){this.selectionDetailsPane.textContent="",this.contextViewProvider&&!this._isVisible&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(e){!this.contextViewProvider||!this._isVisible||(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),e&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(e,t){return e.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(t),{dispose:()=>{this.selectDropDownContainer.remove()}}}measureMaxDetailsHeight(){let e=0;return this.options.forEach((t,i)=>{this.updateDetail(i),this.selectionDetailsPane.offsetHeight>e&&(e=this.selectionDetailsPane.offsetHeight)}),e}layoutSelectDropDown(t){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");let i=L_(this.selectElement),n=Z_(this.selectElement),s=i.innerHeight-n.top-n.height-(this.selectBoxOptions.minBottomMargin||0),r=n.top-e.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,o=this.selectElement.offsetWidth,a=this.setWidthControlElement(this.widthControlElement),l="".concat(Math.max(a,Math.round(o)),"px");this.selectDropDownContainer.style.width=l,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let h=this.selectList.contentHeight;this._hasDetails&&void 0===this._cachedMaxDetailsHeight&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());let d=this._hasDetails?this._cachedMaxDetailsHeight:0,c=h+d,u=Math.floor((s-d)/this.getHeight()),g=Math.floor((r-d)/this.getHeight());if(t)return!(n.top+n.height>i.innerHeight-22||n.top<e.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||u<1&&g<1)&&(u<e.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&g>u&&this.options.length>u?(this._dropDownPosition=iD.ABOVE,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=iD.BELOW,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(n.top+n.height>i.innerHeight-22||n.top<e.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||this._dropDownPosition===iD.BELOW&&u<1||this._dropDownPosition===iD.ABOVE&&g<1)return this.hideSelectDropDown(!0),!1;if(this._dropDownPosition===iD.BELOW){if(this._isVisible&&u+g<1)return this.hideSelectDropDown(!0),!1;c>s&&(h=u*this.getHeight())}else c>r&&(h=g*this.getHeight());return this.selectList.layout(h),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height="".concat(h,"px"),this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height="".concat(h,"px"),this.updateDetail(this.selected),this.selectDropDownContainer.style.width=l,this.selectDropDownListContainer.setAttribute("tabindex","0"),!0}return!1}setWidthControlElement(e){let t=0;if(e){let i=0,n=0;this.options.forEach((e,t)=>{let s=e.detail?e.detail.length:0,r=e.decoratorRight?e.decoratorRight.length:0,o=e.text.length+s+r;o>n&&(i=t,n=o)}),e.textContent=this.options[i].text+(this.options[i].decoratorRight?"".concat(this.options[i].decoratorRight," "):""),t=eb(e)}return t}createSelectList(e){if(this.selectList)return;this.selectDropDownListContainer=xb(e,DN(".select-box-dropdown-list-container")),this.listRenderer=new IN,this.selectList=this._register(new LA("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:xE.Visible,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:e=>{let t=e.text;return e.detail&&(t+=". ".concat(e.detail)),e.decoratorRight&&(t+=". ".concat(e.decoratorRight)),e.description&&(t+=". ".concat(e.description)),t},getWidgetAriaLabel:()=>Li(29,"Select Box"),getRole:()=>qn?"":"option",getWidgetRole:()=>"listbox"}})),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);let t=this._register(new ML(this.selectDropDownListContainer,"keydown")),i=_o.chain(t.event,e=>e.filter(()=>this.selectList.length>0).map(e=>new C_(e)));this._register(_o.chain(i,e=>e.filter(e=>e.keyCode===Kv.Enter))(this.onEnter,this)),this._register(_o.chain(i,e=>e.filter(e=>e.keyCode===Kv.Tab))(this.onEnter,this)),this._register(_o.chain(i,e=>e.filter(e=>e.keyCode===Kv.Escape))(this.onEscape,this)),this._register(_o.chain(i,e=>e.filter(e=>e.keyCode===Kv.UpArrow))(this.onUpArrow,this)),this._register(_o.chain(i,e=>e.filter(e=>e.keyCode===Kv.DownArrow))(this.onDownArrow,this)),this._register(_o.chain(i,e=>e.filter(e=>e.keyCode===Kv.PageDown))(this.onPageDown,this)),this._register(_o.chain(i,e=>e.filter(e=>e.keyCode===Kv.PageUp))(this.onPageUp,this)),this._register(_o.chain(i,e=>e.filter(e=>e.keyCode===Kv.Home))(this.onHome,this)),this._register(_o.chain(i,e=>e.filter(e=>e.keyCode===Kv.End))(this.onEnd,this)),this._register(_o.chain(i,e=>e.filter(e=>e.keyCode>=Kv.Digit0&&e.keyCode<=Kv.KeyZ||e.keyCode>=Kv.Semicolon&&e.keyCode<=Kv.NumpadDivide))(this.onCharacter,this)),this._register(W_(this.selectList.getHTMLElement(),kb.POINTER_UP,e=>this.onPointerUp(e))),this._register(this.selectList.onMouseOver(e=>void 0!==e.index&&this.selectList.setFocus([e.index]))),this._register(this.selectList.onDidChangeFocus(e=>this.onListFocus(e))),this._register(W_(this.selectDropDownContainer,kb.FOCUS_OUT,e=>{!this._isVisible||sb(e.relatedTarget,this.selectDropDownContainer)||this.onListBlur()})),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(e){if(!this.selectList.length)return;Db(e);let t=e.target;if(!t||t.classList.contains("slider"))return;let i=t.closest(".monaco-list-row");if(!i)return;let n=Number(i.getAttribute("data-index")),s=i.classList.contains("option-disabled");n>=0&&n<this.options.length&&!s&&(this.selected=n,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(e,t){let i=e=>{for(let t=0;t<e.childNodes.length;t++){let n=e.childNodes.item(t);"img"===(n.tagName&&n.tagName.toLowerCase())?n.remove():i(n)}},n=YA({value:e,supportThemeIcons:!0},{actionHandler:t});return n.element.classList.add("select-box-description-markdown"),i(n.element),n}onListFocus(e){!this._isVisible||!this._hasDetails||this.updateDetail(e.indexes[0])}updateDetail(e){var t,i;this._selectionDetailsDisposables.clear(),this.selectionDetailsPane.textContent="";let n=this.options[e],s=null!==(t=null===n||void 0===n?void 0:n.description)&&void 0!==t?t:"",r=null!==(i=null===n||void 0===n?void 0:n.descriptionIsMarkdown)&&void 0!==i&&i;if(s){if(r){let e=n.descriptionMarkdownActionHandler,t=this._selectionDetailsDisposables.add(this.renderDescriptionMarkdown(s,e));this.selectionDetailsPane.appendChild(t.element)}else this.selectionDetailsPane.textContent=s;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(e){Db(e),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(e){Db(e),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(e){if(this.selected<this.options.length-1){Db(e,!0);let t=this.options[this.selected+1].isDisabled;if(t&&this.options.length>this.selected+2)this.selected+=2;else{if(t)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(e){this.selected>0&&(Db(e,!0),this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]))}onPageUp(e){Db(e),this.selectList.focusPreviousPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onPageDown(e){Db(e),this.selectList.focusNextPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onHome(e){Db(e),!(this.options.length<2)&&(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(e){Db(e),!(this.options.length<2)&&(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(e){let t=jv.toString(e.keyCode),i=-1;for(let n=0;n<this.options.length-1;n++)if(i=(n+this.selected+1)%this.options.length,this.options[i].text.charAt(0).toUpperCase()===t&&!this.options[i].isDisabled){this.select(i),this.selectList.setFocus([i]),this.selectList.reveal(this.selectList.getFocus()[0]),Db(e);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}},{_:Dt.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32},{_:Dt.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2},{_:Dt.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3},Dt),LN=class extends Co{constructor(e,t,i,n){super(),this.selected=0,this.selectBoxOptions=n||Object.create(null),this.options=[],this.selectElement=mb("select"),this.selectElement.className="monaco-select-box","string"==typeof this.selectBoxOptions.ariaLabel&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),"string"==typeof this.selectBoxOptions.ariaDescription&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new Ro),this.styles=i,this.registerListeners(),this.setOptions(e,t)}registerListeners(){this._register(LE.addTarget(this.selectElement)),[TE.Tap].forEach(e=>{this._register(W_(this.selectElement,e,e=>{this.selectElement.focus()}))}),this._register(z_(this.selectElement,"click",e=>{Db(e,!0)})),this._register(z_(this.selectElement,"change",e=>{this.selectElement.title=e.target.value,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value})})),this._register(z_(this.selectElement,"keydown",e=>{let t=!1;qn?(e.keyCode===Kv.DownArrow||e.keyCode===Kv.UpArrow||e.keyCode===Kv.Space)&&(t=!0):(e.keyCode===Kv.DownArrow&&e.altKey||e.keyCode===Kv.Space||e.keyCode===Kv.Enter)&&(t=!0),t&&e.stopPropagation()}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){(!this.options||!Mr(this.options,e))&&(this.options=e,this.selectElement.options.length=0,this.options.forEach((e,t)=>{this.selectElement.add(this.createOption(e.text,t,e.isDisabled))})),void 0!==t&&this.select(t)}select(e){0===this.options.length?this.selected=0:e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&"string"==typeof this.options[this.selected].text?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}setAriaLabel(e){this.selectBoxOptions.ariaLabel=e,this.selectElement.setAttribute("aria-label",e)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setEnabled(e){this.selectElement.disabled=!e}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){e.classList.add("select-container"),e.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}style(e){this.styles=e,this.applyStyles()}applyStyles(){var e,t,i;this.selectElement&&(this.selectElement.style.backgroundColor=null!==(e=this.styles.selectBackground)&&void 0!==e?e:"",this.selectElement.style.color=null!==(t=this.styles.selectForeground)&&void 0!==t?t:"",this.selectElement.style.borderColor=null!==(i=this.styles.selectBorder)&&void 0!==i?i:"")}createOption(e,t,i){let n=mb("option");return n.value=e,n.text=e,n.disabled=!!i,n}};wE({});var AN=Object.freeze({text:"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500",isDisabled:!0}),NN=class extends AE{constructor(e,t,i,n,s){super(),!qn||null!==s&&void 0!==s&&s.useCustomDrawn?this.selectBoxDelegate=new xN(e,t,i,n,s):this.selectBoxDelegate=new LN(e,t,n,s),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(e,t){this.selectBoxDelegate.setOptions(e,t)}select(e){this.selectBoxDelegate.select(e)}setAriaLabel(e){this.selectBoxDelegate.setAriaLabel(e)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(e){this.selectBoxDelegate.setFocusable(e)}setEnabled(e){this.selectBoxDelegate.setEnabled(e)}render(e){this.selectBoxDelegate.render(e)}},FN={};wE(FN);var ON=class extends Co{get action(){return this._action}constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.options=i,this._context=e||this,this._action=t,t instanceof VD&&this._register(t.onDidChange(e=>{this.element&&this.handleActionChangeEvent(e)}))}handleActionChangeEvent(e){void 0!==e.enabled&&this.updateEnabled(),void 0!==e.checked&&this.updateChecked(),void 0!==e.class&&this.updateClass(),void 0!==e.label&&(this.updateLabel(),this.updateTooltip()),void 0!==e.tooltip&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new zD)),this._actionRunner}set actionRunner(e){this._actionRunner=e}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){let t=this.element=e;this._register(LE.addTarget(e));let i=this.options&&this.options.draggable;i&&(e.draggable=!0,Mv&&this._register(W_(e,kb.DRAG_START,e=>{var t;return null===(t=e.dataTransfer)||void 0===t?void 0:t.setData(AL.TEXT,this._action.label)}))),this._register(W_(t,TE.Tap,e=>this.onClick(e,!0))),this._register(W_(t,kb.MOUSE_DOWN,e=>{i||Db(e,!0),this._action.enabled&&0===e.button&&t.classList.add("active")})),qn&&this._register(W_(t,kb.CONTEXT_MENU,e=>{0===e.button&&!0===e.ctrlKey&&this.onClick(e)})),this._register(W_(t,kb.CLICK,e=>{Db(e,!0),this.options&&this.options.isMenu||this.onClick(e)})),this._register(W_(t,kb.DBLCLICK,e=>{Db(e,!0)})),[kb.MOUSE_UP,kb.MOUSE_OUT].forEach(e=>{this._register(W_(t,e,e=>{Db(e),t.classList.remove("active")}))})}onClick(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Db(e,!0);let n=rn(this._context)?null!==(t=this.options)&&void 0!==t&&t.useEventAsContext?e:{preserveFocus:i}:this._context;this.actionRunner.run(this._action,n)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}isFocused(){var e;return!(null===(e=this.element)||void 0===e||!e.classList.contains("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getClass(){return this.action.class}getTooltip(){return this.action.tooltip}getHoverContents(){return this.getTooltip()}updateTooltip(){var e;if(!this.element)return;let t=null!==(e=this.getHoverContents())&&void 0!==e?e:"";if(this.updateAriaLabel(),this.customHover||""===t)this.customHover&&this.customHover.update(t);else{var i;let e=null!==(i=this.options.hoverDelegate)&&void 0!==i?i:RL("element");this.customHover=this._store.add(EN().setupManagedHover(e,this.element,t))}}updateAriaLabel(){if(this.element){var e;let t=null!==(e=this.getTooltip())&&void 0!==e?e:"";this.element.setAttribute("aria-label",t)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element=void this.element.remove()),this._context=void 0,super.dispose()}},RN=class extends ON{constructor(e,t,i){super(e,t,i=(0,r.A)((0,r.A)({},i),{},{icon:void 0!==i.icon&&i.icon,label:void 0===i.label||i.label})),this.options=i,this.cssClass=""}render(e){super.render(e),on(this.element);let t=mb("a");if(t.classList.add("action-label"),t.setAttribute("role",this.getDefaultAriaRole()),this.label=t,this.element.appendChild(t),this.options.label&&this.options.keybinding&&!this.options.keybindingNotRenderedWithLabel){let e=mb("span");e.classList.add("keybinding"),e.textContent=this.options.keybinding,this.element.appendChild(e)}this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){return this._action.id===KD.ID?"presentation":this.options.isMenu?"menuitem":this.options.isTabList?"tab":"button"}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}isFocused(){var e;return!!this.label&&0===(null===(e=this.label)||void 0===e?void 0:e.tabIndex)}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label,this.options.keybinding&&(e=Li(1,"{0} ({1})",e,this.options.keybinding))),null!==e&&void 0!==e?e:void 0}updateClass(){var e;this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getClass(),this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):null===(e=this.label)||void 0===e||e.classList.remove("codicon")}updateEnabled(){var e,t;this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),null===(e=this.element)||void 0===e||e.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),null===(t=this.element)||void 0===t||t.classList.add("disabled"))}updateAriaLabel(){if(this.label){var e;let t=null!==(e=this.getTooltip())&&void 0!==e?e:"";this.label.setAttribute("aria-label",t)}}updateChecked(){this.label&&(void 0===this.action.checked?(this.label.classList.remove("checked"),this.label.removeAttribute(this.options.isTabList?"aria-selected":"aria-checked"),this.label.setAttribute("role",this.getDefaultAriaRole())):(this.label.classList.toggle("checked",this.action.checked),this.options.isTabList?this.label.setAttribute("aria-selected",this.action.checked?"true":"false"):(this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox"))))}},MN=class extends ON{constructor(e,t,i,n,s,r,o){super(e,t),this.selectBox=new NN(i,n,s,r,o),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}setOptions(e,t){this.selectBox.setOptions(e,t)}select(e){this.selectBox.select(e)}registerListeners(){this._register(this.selectBox.onDidSelect(e=>this.runAction(e.selected,e.index)))}runAction(e,t){this.actionRunner.run(this._action,this.getActionContext(e,t))}getActionContext(e,t){return e}setFocusable(e){this.selectBox.setFocusable(e)}focus(){var e;null===(e=this.selectBox)||void 0===e||e.focus()}blur(){var e;null===(e=this.selectBox)||void 0===e||e.blur()}render(e){this.selectBox.render(e)}},PN={};wE(PN);var BN=class extends zD{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new Ro),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=xb(e,Mb(".monaco-dropdown")),this._label=xb(this._element,Mb(".dropdown-label"));let i=t.labelRenderer;i||(i=e=>(e.textContent=t.label||"",null));for(let s of[kb.CLICK,kb.MOUSE_DOWN,TE.Tap])this._register(W_(this.element,s,e=>Db(e,!0)));for(let s of[kb.MOUSE_DOWN,TE.Tap])this._register(W_(this._label,s,e=>{wb(e)&&0!==e.button||(this.visible?this.hide():this.show())}));this._register(W_(this._label,kb.KEY_DOWN,e=>{let t=new C_(e);(t.equals(Kv.Enter)||t.equals(Kv.Space))&&(Db(e,!0),this.visible?this.hide():this.show())}));let n=i(this._label);n&&this._register(n),this._register(LE.addTarget(this._label))}get element(){return this._element}get label(){return this._label}set tooltip(e){this._label&&(this.hover||""===e?this.hover&&this.hover.update(e):this.hover=this._register(EN().setupManagedHover(RL("mouse"),this._label,e)))}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}isVisible(){return!!this.visible}onEvent(e,t){this.hide()}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer=void this.boxContainer.remove()),this.contents&&(this.contents=void this.contents.remove()),this._label&&(this._label=void this._label.remove())}},UN=class extends BN{constructor(e,t){super(e,t),this._options=t,this._actions=[],this.actions=t.actions||[]}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(e,t)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e,t):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this._options.menuClassName||"",onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:tD.LEFT,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}};wE(PN);var HN=class extends ON{get onDidChangeVisibility(){return this._onDidChangeVisibility.event}constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Object.create(null);super(null,e,n),this.actionItem=null,this._onDidChangeVisibility=this._register(new Ro),this.menuActionsOrProvider=t,this.contextMenuProvider=i,this.options=n,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;let t=Array.isArray(this.menuActionsOrProvider),i={contextMenuProvider:this.contextMenuProvider,labelRenderer:e=>(this.element=xb(e,Mb("a.action-label")),this.setAriaLabelAttributes(this.element),this.renderLabel(this.element)),menuAsChild:this.options.menuAsChild,actions:t?this.menuActionsOrProvider:void 0,actionProvider:t?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new UN(e,i)),this._register(this.dropdownMenu.onDidChangeVisibility(e=>{var t;null!==(t=this.element)&&void 0!==t&&t.setAttribute("aria-expanded","".concat(e)),this._onDidChangeVisibility.fire(e)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){let e=this;this.dropdownMenu.menuOptions=(0,r.A)((0,r.A)({},this.dropdownMenu.menuOptions),{},{get anchorAlignment(){return e.options.anchorAlignmentProvider()}})}this.updateTooltip(),this.updateEnabled()}renderLabel(e){var t;let i=[];return"string"==typeof this.options.classNames?i=this.options.classNames.split(/\s+/g).filter(e=>!!e):this.options.classNames&&(i=this.options.classNames),i.find(e=>"icon"===e)||i.push("codicon"),e.classList.add(...i),this._action.label&&this._register(EN().setupManagedHover(null!==(t=this.options.hoverDelegate)&&void 0!==t?t:RL("mouse"),e,this._action.label)),null}setAriaLabelAttributes(e){e.setAttribute("role","button"),e.setAttribute("aria-haspopup","true"),e.setAttribute("aria-expanded","false"),e.ariaLabel=this._action.label||""}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label),null!==e&&void 0!==e?e:void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}show(){var e;null===(e=this.dropdownMenu)||void 0===e||e.show()}updateEnabled(){var e,t;let i=!this.action.enabled;null!==(e=this.actionItem)&&void 0!==e&&e.classList.toggle("disabled",i),null===(t=this.element)||void 0===t||t.classList.toggle("disabled",i)}};var WN={keybindingLabelBackground:Xl(rc),keybindingLabelForeground:Xl(oc),keybindingLabelBorder:Xl(ac),keybindingLabelBottomBorder:Xl(lc),keybindingLabelShadow:Xl(Zh)},VN={buttonForeground:Xl(Ud),buttonSeparator:Xl(Hd),buttonBackground:Xl(Wd),buttonHoverBackground:Xl(Vd),buttonSecondaryForeground:Xl(Kd),buttonSecondaryBackground:Xl(qd),buttonSecondaryHoverBackground:Xl(Gd),buttonBorder:Xl(zd)},zN={progressBarBackground:Xl(Eh)},KN={inputActiveOptionBorder:Xl(wd),inputActiveOptionForeground:Xl(Ed),inputActiveOptionBackground:Xl(kd)};Xl(jd),Xl(Yd),Xl(Qd),Xl($d),Xl(Xd),Xl(Zd),Xl(Jd);var qN={checkboxBackground:Xl(ec),checkboxBorder:Xl(ic),checkboxForeground:Xl(tc),checkboxDisabledBackground:Xl(nc),checkboxDisabledForeground:Xl(sc)};Xl(Ih),Xl(xh),Xl(Zh),Xl(Jh),Xl(ud),Xl(gd),Xl(pd),Xl(_h);var GN={inputBackground:Xl(bd),inputForeground:Xl(Cd),inputBorder:Xl(yd),inputValidationInfoBorder:Xl(Id),inputValidationInfoBackground:Xl(Dd),inputValidationInfoForeground:Xl(Td),inputValidationWarningBorder:Xl(Ad),inputValidationWarningBackground:Xl(xd),inputValidationWarningForeground:Xl(Ld),inputValidationErrorBorder:Xl(Od),inputValidationErrorBackground:Xl(Nd),inputValidationErrorForeground:Xl(Fd)},jN={listFilterWidgetBackground:Xl(Tc),listFilterWidgetOutline:Xl(Ic),listFilterWidgetNoMatchesOutline:Xl(xc),listFilterWidgetShadow:Xl(Lc),inputBoxStyles:GN,toggleStyles:KN},YN={badgeBackground:Xl(bh),badgeForeground:Xl(Ch),badgeBorder:Xl(mh)};Xl(id),Xl(td),Xl(nd),Xl(nd),Xl(sd);var QN={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:Xl(hc),listFocusForeground:Xl(dc),listFocusOutline:Xl(cc),listActiveSelectionBackground:Xl(gc),listActiveSelectionForeground:Xl(pc),listActiveSelectionIconForeground:Xl(fc),listFocusAndSelectionOutline:Xl(uc),listFocusAndSelectionBackground:Xl(gc),listFocusAndSelectionForeground:Xl(pc),listInactiveSelectionBackground:Xl(mc),listInactiveSelectionIconForeground:Xl(_c),listInactiveSelectionForeground:Xl(vc),listInactiveFocusBackground:Xl(bc),listInactiveFocusOutline:Xl(Cc),listHoverBackground:Xl(yc),listHoverForeground:Xl(wc),listDropOverBackground:Xl(Sc),listDropBetweenBackground:Xl(kc),listSelectionOutline:Xl(vh),listHoverOutline:Xl(vh),treeIndentGuidesStroke:Xl(Ac),treeInactiveIndentGuidesStroke:Xl(Nc),treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:Xl(yh),tableColumnsBorder:Xl(Fc),tableOddRowsBackgroundColor:Xl(Oc)};function $N(e){return function(e,t){let i=(0,r.A)({},t);for(let n in e){let t=e[n];i[n]=void 0===t?void 0:Xl(t)}return i}(e,QN)}var XN,ZN,JN,eF,tF,iF,nF={selectBackground:Xl(Rd),selectListBackground:Xl(Md),selectForeground:Xl(Pd),decoratorRightForeground:Xl(qc),selectBorder:Xl(Bd),focusBorder:Xl(fh),listFocusBackground:Xl($c),listInactiveSelectionIconForeground:Xl(Qc),listFocusForeground:Xl(Yc),listFocusOutline:function(e,t){return"var(".concat($l(e),", ").concat(t,")")}(vh,Ir.transparent.toString()),listHoverBackground:Xl(yc),listHoverForeground:Xl(wc),listHoverOutline:Xl(vh),selectListBorder:Xl(Lh),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},sF={shadowColor:Xl(Zh),borderColor:Xl(Rc),foregroundColor:Xl(Mc),backgroundColor:Xl(Pc),selectionForegroundColor:Xl(Bc),selectionBackgroundColor:Xl(Uc),selectionBorderColor:Xl(Hc),separatorColor:Xl(Wc),scrollbarShadow:Xl(yh),scrollbarSliderBackground:Xl(wh),scrollbarSliderHoverBackground:Xl(Sh),scrollbarSliderActiveBackground:Xl(kh)};function rF(e,t){if(Yn)return!1;let i=function(e,t){return t||(t=oF(e)),t===eF.NATIVE}(e,t),n=e.getValue("window");return(null===n||void 0===n?void 0:n.menuStyle)===ZN.NATIVE?!(!qn&&!i):(null===n||void 0===n?void 0:n.menuStyle)!==ZN.CUSTOM&&i}function oF(e){if(Yn)return eF.CUSTOM;let t=e.getValue("window");if(t){if(qn&&!0===t.nativeTabs||qn&&!1===t.nativeFullScreen)return eF.NATIVE;let e=t.titleBarStyle;if(e===eF.NATIVE||e===eF.CUSTOM)return e}return eF.CUSTOM}!function(e){e.MenuStyle="window.menuStyle",e.MenuBarVisibility="window.menuBarVisibility"}(XN||(XN={})),function(e){e.CUSTOM="custom",e.NATIVE="native",e.INHERIT="inherit"}(ZN||(ZN={})),function(e){e.TITLE_BAR_STYLE="window.titleBarStyle",e.CUSTOM_TITLE_BAR_VISIBILITY="window.customTitleBarVisibility"}(JN||(JN={})),function(e){e.NATIVE="native",e.CUSTOM="custom"}(eF||(eF={})),function(e){e.NATIVE="native",e.CUSTOM="custom",e.HIDDEN="hidden"}(tF||(tF={})),function(e){e.AUTO="auto",e.WINDOWED="windowed",e.NEVER="never"}(iF||(iF={}));var aF=fn("menuService");function lF(e,t){let i=[];return function(e,t,i){let n=Wb.getInstance();!function(e,t,i){let n,s,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>"navigation"===e,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>!1,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];Array.isArray(t)?(n=t,s=t):(n=t.primary,s=t.secondary);let l=new Set;for(let[h,d]of e){let e;r(h)?(e=n,e.length>0&&a&&e.push(new KD)):(e=s,e.length>0&&e.push(new KD));for(let t of d){i&&(t=t instanceof JD&&t.alt?t.alt:t);let n=e.push(t);t instanceof qD&&l.add({group:h,action:t,index:n-1})}}for(let{group:h,action:d,index:c}of l){let e=r(h)?n:s,t=d.actions;o(d,h,e.length)&&e.splice(c,1,...t)}}(e,t,n.keyStatus.altKey||(Kn||Gn)&&n.keyStatus.shiftKey,i?e=>e===i:e=>"navigation"===e)}(e,i,t),i}wE({});var hF=class extends RN{constructor(e,t,i,n,s,r,o,a){super(void 0,e,{icon:!(!e.class&&!e.item.icon),label:!e.class&&!e.item.icon,draggable:null===t||void 0===t?void 0:t.draggable,keybinding:null===t||void 0===t?void 0:t.keybinding,hoverDelegate:null===t||void 0===t?void 0:t.hoverDelegate,keybindingNotRenderedWithLabel:null===t||void 0===t?void 0:t.keybindingNotRenderedWithLabel}),this._options=t,this._keybindingService=i,this._notificationService=n,this._contextKeyService=s,this._themeService=r,this._contextMenuService=o,this._accessibilityService=a,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new yo),this._altKey=Wb.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}async onClick(e){e.preventDefault(),e.stopPropagation();try{await this.actionRunner.run(this._commandAction,this._context)}catch(e){this._notificationService.error(e)}}render(e){if(super.render(e),e.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){let t=!1,i=()=>{var e;let i=!(null===(e=this._menuItemAction.alt)||void 0===e||!e.enabled)&&(!this._accessibilityService.isMotionReduced()||t)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&t);i!==this._wantsAltCommand&&(this._wantsAltCommand=i,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._register(this._altKey.event(i)),this._register(W_(e,"mouseleave",e=>{t=!1,i()})),this._register(W_(e,"mouseenter",e=>{t=!0,i()})),i()}}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){var e;let t=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),i=t&&t.getLabel(),n=this._commandAction.tooltip||this._commandAction.label,s=i?Li(1752,"{0} ({1})",n,i):n;if(!this._wantsAltCommand&&null!==(e=this._menuItemAction.alt)&&void 0!==e&&e.enabled){let e=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,t=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),i=t&&t.getLabel(),n=i?Li(1752,"{0} ({1})",e,i):e;s=Li(1753,"{0}\n[{1}] {2}",s,QI.modifierLabels[ss].altKey,n)}return s}updateClass(){this.options.icon&&(this._commandAction===this._menuItemAction?this._updateItemClass(this._menuItemAction.item):this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item))}_updateItemClass(e){this._itemClassDispose.value=void 0;let{element:t,label:i}=this;if(!t||!i)return;let n=this._commandAction.checked&&function(e){return!!e&&void 0!==e.condition}(e.toggled)&&e.toggled.icon?e.toggled.icon:e.icon;if(n)if(yf.isThemeIcon(n)){let e=yf.asClassNameArray(n);i.classList.add(...e),this._itemClassDispose.value=vo(()=>{i.classList.remove(...e)})}else i.style.backgroundImage=ou(this._themeService.getColorTheme().type)?Gf(n.dark):Gf(n.light),i.classList.add("icon"),this._itemClassDispose.value=fo(vo(()=>{i.style.backgroundImage="",i.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}};hF=ki([Ei(2,SE),Ei(3,BS),Ei(4,AS),Ei(5,$w),Ei(6,CE),Ei(7,uD)],hF);var dF=class extends HN{constructor(e,t,i,n,s){var o,a,l;let h=(0,r.A)((0,r.A)({},t),{},{menuAsChild:null!==(o=null===t||void 0===t?void 0:t.menuAsChild)&&void 0!==o&&o,classNames:null!==(a=null===t||void 0===t?void 0:t.classNames)&&void 0!==a?a:yf.isThemeIcon(e.item.icon)?yf.asClassName(e.item.icon):void 0,keybindingProvider:null!==(l=null===t||void 0===t?void 0:t.keybindingProvider)&&void 0!==l?l:e=>i.lookupKeybinding(e.id)});super(e,{getActions:()=>e.actions},n,h),this._keybindingService=i,this._contextMenuService=n,this._themeService=s}render(e){super.render(e),on(this.element),e.classList.add("menu-entry");let{icon:t}=this._action.item;if(t&&!yf.isThemeIcon(t)){this.element.classList.add("icon");let e=()=>{this.element&&(this.element.style.backgroundImage=ou(this._themeService.getColorTheme().type)?Gf(t.dark):Gf(t.light))};e(),this._register(this._themeService.onDidColorThemeChange(()=>{e()}))}}};dF=ki([Ei(2,SE),Ei(3,CE),Ei(4,$w)],dF);var cF=class extends ON{get onDidChangeDropdownVisibility(){return this._dropdown.onDidChangeVisibility}constructor(e,t,i,n,s,o,a,l){var h,d,c;super(null,e),this._keybindingService=i,this._notificationService=n,this._contextMenuService=s,this._menuService=o,this._instaService=a,this._storageService=l,this._defaultActionDisposables=this._register(new bo),this._container=null,this._options=t,this._storageKey="".concat(e.item.submenu.id,"_lastActionId");let u,g=null!==t&&void 0!==t&&t.togglePrimaryAction?l.get(this._storageKey,Vp.WORKSPACE):void 0;g&&(u=e.actions.find(e=>g===e.id)),u||(u=e.actions[0]),this._defaultAction=this._defaultActionDisposables.add(this._instaService.createInstance(hF,u,{keybinding:this._getDefaultActionKeybindingLabel(u)}));let p=(0,r.A)((0,r.A)({keybindingProvider:e=>this._keybindingService.lookupKeybinding(e.id)},t),{},{menuAsChild:null===(h=null===t||void 0===t?void 0:t.menuAsChild)||void 0===h||h,classNames:null!==(d=null===t||void 0===t?void 0:t.classNames)&&void 0!==d?d:["codicon","codicon-chevron-down"],actionRunner:null!==(c=null===t||void 0===t?void 0:t.actionRunner)&&void 0!==c?c:this._register(new zD)});this._dropdown=this._register(new HN(e,e.actions,this._contextMenuService,p)),(null===t||void 0===t?void 0:t.togglePrimaryAction)&&this._register(this._dropdown.actionRunner.onDidRun(e=>{e.action instanceof JD&&this.update(e.action)}))}update(e){var t;null!==(t=this._options)&&void 0!==t&&t.togglePrimaryAction&&this._storageService.store(this._storageKey,e.id,Vp.WORKSPACE,zp.MACHINE),this._defaultActionDisposables.clear(),this._defaultAction=this._defaultActionDisposables.add(this._instaService.createInstance(hF,e,{keybinding:this._getDefaultActionKeybindingLabel(e)})),this._defaultAction.actionRunner=this._defaultActionDisposables.add(new class extends zD{async runAction(e,t){await e.run(void 0)}}),this._container&&this._defaultAction.render(Lb(this._container,Mb(".action-container")))}_getDefaultActionKeybindingLabel(e){var t;let i;if(null!==(t=this._options)&&void 0!==t&&t.renderKeybindingWithDefaultActionLabel){let t=this._keybindingService.lookupKeybinding(e.id);t&&(i="(".concat(t.getLabel(),")"))}return i}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}set actionRunner(e){super.actionRunner=e,this._defaultAction.actionRunner=e,this._dropdown.actionRunner=e}get actionRunner(){return super.actionRunner}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");let t=Mb(".action-container");this._defaultAction.render(xb(this._container,t)),this._register(W_(t,kb.KEY_DOWN,e=>{let t=new C_(e);t.equals(Kv.RightArrow)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),t.stopPropagation())}));let i=Mb(".dropdown-action-container");this._dropdown.render(xb(this._container,i)),this._register(W_(i,kb.KEY_DOWN,e=>{var t;let i=new C_(e);i.equals(Kv.LeftArrow)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),null!==(t=this._defaultAction.element)&&void 0!==t&&t.focus(),i.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}};cF=ki([Ei(2,SE),Ei(3,BS),Ei(4,CE),Ei(5,aF),Ei(6,pn),Ei(7,Sn)],cF);var uF,gF=class extends MN{constructor(e,t,i){super(null,e,e.actions.map(e=>e.id===KD.ID?AN:{text:e.label,isDisabled:!e.enabled}),0,t,nF,{ariaLabel:e.tooltip,optionsAsChildren:!0,useCustomDrawn:!rF(i)}),this.select(Math.max(0,e.actions.findIndex(e=>e.checked)))}render(e){super.render(e),e.style.borderColor=Xl(Bd)}runAction(e,t){let i=this.action.actions[t];i&&this.actionRunner.run(i)}};gF=ki([Ei(1,bE),Ei(2,fr)],gF),wE(FN),function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL"}(uF||(uF={}));var pF,fF,mF=class extends Co{get onDidBlur(){return this._onDidBlur.event}get onDidCancel(){return this._onDidCancel.event}get onDidRun(){return this._onDidRun.event}get onWillRun(){return this._onWillRun.event}constructor(e){var t,i,n,s,r,o,a;let l,h,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(super(),this._actionRunnerDisposables=this._register(new bo),this.viewItemDisposables=this._register(new So),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new Ro),this._onDidCancel=this._register(new Ro({onWillAddFirstListener:()=>this.cancelHasListener=!0})),this.cancelHasListener=!1,this._onDidRun=this._register(new Ro),this._onWillRun=this._register(new Ro),this.options=d,this._context=null!==(t=d.context)&&void 0!==t?t:null,this._orientation=null!==(i=this.options.orientation)&&void 0!==i?i:uF.HORIZONTAL,this._triggerKeys={keyDown:null!==(n=null===(s=this.options.triggerKeys)||void 0===s?void 0:s.keyDown)&&void 0!==n&&n,keys:null!==(r=null===(o=this.options.triggerKeys)||void 0===o?void 0:o.keys)&&void 0!==r?r:[Kv.Enter,Kv.Space]},this._hoverDelegate=null!==(a=d.hoverDelegate)&&void 0!==a?a:this._register(NL()),this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new zD,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(e=>this._onDidRun.fire(e))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(e=>this._onWillRun.fire(e))),this.viewItems=[],this.focusedItem=void 0,this.domNode=mb("div"),this.domNode.className="monaco-action-bar",this._orientation){case uF.HORIZONTAL:l=[Kv.LeftArrow],h=[Kv.RightArrow];break;case uF.VERTICAL:l=[Kv.UpArrow],h=[Kv.DownArrow],this.domNode.className+=" vertical"}this._register(W_(this.domNode,kb.KEY_DOWN,e=>{let t=new C_(e),i=!0,n="number"==typeof this.focusedItem?this.viewItems[this.focusedItem]:void 0;l&&(t.equals(l[0])||t.equals(l[1]))?i=this.focusPrevious():h&&(t.equals(h[0])||t.equals(h[1]))?i=this.focusNext():t.equals(Kv.Escape)&&this.cancelHasListener?this._onDidCancel.fire():t.equals(Kv.Home)?i=this.focusFirst():t.equals(Kv.End)?i=this.focusLast():t.equals(Kv.Tab)&&n instanceof ON&&n.trapsArrowNavigation?i=this.focusNext(void 0,!0):this.isTriggerKeyEvent(t)?this._triggerKeys.keyDown?this.doTrigger(t):this.triggerKeyDown=!0:i=!1,i&&(t.preventDefault(),t.stopPropagation())})),this._register(W_(this.domNode,kb.KEY_UP,e=>{let t=new C_(e);this.isTriggerKeyEvent(t)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(t)),t.preventDefault(),t.stopPropagation()):(t.equals(Kv.Tab)||t.equals(Yv.Shift|Kv.Tab)||t.equals(Kv.UpArrow)||t.equals(Kv.DownArrow)||t.equals(Kv.LeftArrow)||t.equals(Kv.RightArrow))&&this.updateFocusedItem()})),this.focusTracker=this._register(Ib(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(hb()===this.domNode||!sb(hb(),this.domNode))&&(this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=mb("ul"),this.actionsList.className="actions-container",this.options.highlightToggledItems&&this.actionsList.classList.add("highlight-toggled"),this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=1?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setAriaLabel(e){e?this.actionsList.setAttribute("aria-label",e):this.actionsList.removeAttribute("aria-label")}setFocusable(e){if(this.focusable=e,this.focusable){let e=this.viewItems.find(e=>e instanceof ON&&e.isEnabled());e instanceof ON&&e.setFocusable(!0)}else this.viewItems.forEach(e=>{e instanceof ON&&e.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(i=>{t||(t=e.equals(i))}),t}updateFocusedItem(){for(let i=0;i<this.actionsList.children.length;i++){let n=this.actionsList.children[i];if(sb(hb(),n)){var e,t;this.focusedItem=i,null===(e=this.viewItems[this.focusedItem])||void 0===e||null===(t=e.showHover)||void 0===t||t.call(e);break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){this._actionRunner=e,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(e=>this._onDidRun.fire(e))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(e=>this._onWillRun.fire(e))),this.viewItems.forEach(t=>t.actionRunner=e)}getContainer(){return this.domNode}hasAction(e){return-1!==this.viewItems.findIndex(t=>t.action.id===e.id)}getAction(e){var t;if("number"==typeof e)return null===(t=this.viewItems[e])||void 0===t?void 0:t.action;if(bb(e)){for(;e.parentElement!==this.actionsList;){if(!e.parentElement)return;e=e.parentElement}for(let t=0;t<this.actionsList.childNodes.length;t++)if(this.actionsList.childNodes[t]===e)return this.viewItems[t].action}}push(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Array.isArray(e)?e:[e],n=Ji(t.index)?t.index:null;if(i.forEach(e=>{let i=mb("li");i.className="action-item",i.setAttribute("role","presentation");let s,o=(0,r.A)((0,r.A)({hoverDelegate:this._hoverDelegate},t),{},{isTabList:"tablist"===this.options.ariaRole});this.options.actionViewItemProvider&&(s=this.options.actionViewItemProvider(e,o)),s||(s=new RN(this.context,e,o)),this.options.allowContextMenu||this.viewItemDisposables.set(s,W_(i,kb.CONTEXT_MENU,e=>{Db(e,!0)})),s.actionRunner=this._actionRunner,s.setActionContext(this.context),s.render(i),null===n||n<0||n>=this.actionsList.children.length?(this.actionsList.appendChild(i),this.viewItems.push(s)):(this.actionsList.insertBefore(i,this.actionsList.children[n]),this.viewItems.splice(n,0,s),n++)}),this.focusable){let e=!1;for(let t of this.viewItems){if(!(t instanceof ON))continue;let i;i=!e&&t.action.id!==KD.ID&&!(!t.isEnabled()&&this.options.focusOnlyEnabledItems),i?(t.setFocusable(!0),e=!0):t.setFocusable(!1)}}"number"==typeof this.focusedItem&&this.focus(this.focusedItem),this.refreshRole()}getWidth(e){if(e>=0&&e<this.actionsList.children.length){let t=this.actionsList.children.item(e);if(t)return t.clientWidth}return 0}getHeight(e){if(e>=0&&e<this.actionsList.children.length){let t=this.actionsList.children.item(e);if(t)return t.clientHeight}return 0}pull(e){e>=0&&e<this.viewItems.length&&(this.actionsList.childNodes[e].remove(),this.viewItemDisposables.deleteAndDispose(this.viewItems[e]),po(this.viewItems.splice(e,1)),this.refreshRole())}clear(){this.isEmpty()||(this.viewItems=po(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),U_(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return 0===this.viewItems.length}focus(e){let t,i=!1;if(void 0===e?i=!0:"number"==typeof e?t=e:"boolean"==typeof e&&(i=e),i&&void 0===this.focusedItem){let e=this.viewItems.findIndex(e=>e.isEnabled());this.focusedItem=-1===e?void 0:e,this.updateFocus(void 0,void 0,!0)}else void 0!==t&&(this.focusedItem=t),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e,t){if(void 0===this.focusedItem)this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;let i,n=this.focusedItem;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=n,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,i=this.viewItems[this.focusedItem]}while(this.focusedItem!==n&&(this.options.focusOnlyEnabledItems&&!i.isEnabled()||i.action.id===KD.ID));return this.updateFocus(void 0,void 0,t),!0}focusPrevious(e){if(void 0===this.focusedItem)this.focusedItem=0;else if(this.viewItems.length<=1)return!1;let t,i=this.focusedItem;do{if(--this.focusedItem,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=i,!1;this.focusedItem=this.viewItems.length-1}t=this.viewItems[this.focusedItem]}while(this.focusedItem!==i&&(this.options.focusOnlyEnabledItems&&!t.isEnabled()||t.action.id===KD.ID));return this.updateFocus(!0),!0}updateFocus(e,t){var i;let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];void 0===this.focusedItem&&this.actionsList.focus({preventScroll:t}),void 0!==this.previouslyFocusedItem&&this.previouslyFocusedItem!==this.focusedItem&&(null===(i=this.viewItems[this.previouslyFocusedItem])||void 0===i||i.blur());let s=void 0===this.focusedItem?void 0:this.viewItems[this.focusedItem];if(s){var r;let i=!0;un(s.focus)||(i=!1),this.options.focusOnlyEnabledItems&&un(s.isEnabled)&&!s.isEnabled()&&(i=!1),s.action.id===KD.ID&&(i=!1),i?(n||this.previouslyFocusedItem!==this.focusedItem)&&(s.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0),i&&(null===(r=s.showHover)||void 0===r||r.call(s))}}doTrigger(e){if(void 0===this.focusedItem)return;let t=this.viewItems[this.focusedItem];if(t instanceof ON){let i=null===t._context||void 0===t._context?e:t._context;this.run(t._action,i)}}async run(e,t){await this._actionRunner.run(e,t)}dispose(){this._context=void 0,this.viewItems=po(this.viewItems),this.getContainer().remove(),super.dispose()}},vF=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,_F=/(&amp;)?(&amp;)([^\s&])/g;!function(e){e[e.Right=0]="Right",e[e.Left=1]="Left"}(pF||(pF={})),function(e){e[e.Above=0]="Above",e[e.Below=1]="Below"}(fF||(fF={}));var bF=class e extends mF{constructor(e,t,i,n){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");let s=mb("div");s.classList.add("monaco-menu"),s.setAttribute("role","presentation"),super(s,{orientation:uF.VERTICAL,actionViewItemProvider:e=>this.doGetActionViewItem(e,i,r),context:i.context,actionRunner:i.actionRunner,ariaLabel:i.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[Kv.Enter,...qn||Gn?[Kv.Space]:[]],keyDown:!0}}),this.menuStyles=n,this.menuElement=s,this.actionsList.tabIndex=0,this.initializeOrUpdateStyleSheet(e,n),this._register(LE.addTarget(s)),this._register(W_(s,kb.KEY_DOWN,e=>{new C_(e).equals(Kv.Tab)&&e.preventDefault()})),i.enableMnemonics&&this._register(W_(s,kb.KEY_DOWN,e=>{let t=e.key.toLocaleLowerCase(),i=this.mnemonics.get(t);if(void 0!==i&&(Db(e,!0),1===i.length&&(i[0]instanceof yF&&i[0].container&&this.focusItemByElement(i[0].container),i[0].onClick(e)),i.length>1)){let e=i.shift();e&&e.container&&(this.focusItemByElement(e.container),i.push(e)),this.mnemonics.set(t,i)}})),Gn&&this._register(W_(s,kb.KEY_DOWN,e=>{let t=new C_(e);t.equals(Kv.Home)||t.equals(Kv.PageUp)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),Db(e,!0)):(t.equals(Kv.End)||t.equals(Kv.PageDown))&&(this.focusedItem=0,this.focusPrevious(),Db(e,!0))})),this._register(W_(this.domNode,kb.MOUSE_OUT,e=>{sb(e.relatedTarget,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),e.stopPropagation())})),this._register(W_(this.actionsList,kb.MOUSE_OVER,e=>{let t=e.target;if(t&&sb(t,this.actionsList)&&t!==this.actionsList){for(;t.parentElement!==this.actionsList&&null!==t.parentElement;)t=t.parentElement;if(t.classList.contains("action-item")){let e=this.focusedItem;this.setFocusedItem(t),e!==this.focusedItem&&this.updateFocus()}}})),this._register(LE.addTarget(this.actionsList)),this._register(W_(this.actionsList,TE.Tap,e=>{let t=e.initialTarget;if(t&&sb(t,this.actionsList)&&t!==this.actionsList){for(;t.parentElement!==this.actionsList&&null!==t.parentElement;)t=t.parentElement;if(t.classList.contains("action-item")){let e=this.focusedItem;this.setFocusedItem(t),e!==this.focusedItem&&this.updateFocus()}}}));let r={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new YE(s,{alwaysConsumeMouseWheel:!0,horizontal:xE.Hidden,vertical:xE.Visible,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));let o=this.scrollableElement.getDomNode();o.style.position="",this.styleScrollElement(o,n),this._register(W_(s,TE.Change,e=>{Db(e,!0);let t=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:t-e.translationY})})),this._register(W_(o,kb.MOUSE_UP,e=>{e.preventDefault()}));let a=L_(e);s.style.maxHeight="".concat(Math.max(10,a.innerHeight-e.getBoundingClientRect().top-35),"px"),t=t.filter((e,n)=>{var s;return null!==(s=i.submenuIds)&&void 0!==s&&s.has(e.id)?(console.warn("Found submenu cycle: ".concat(e.id)),!1):!(e instanceof KD&&(n===t.length-1||0===n||t[n-1]instanceof KD))}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(e=>!(e instanceof wF)).forEach((e,t,i)=>{e.updatePositionInSet(t+1,i.length)})}initializeOrUpdateStyleSheet(t,i){this.styleSheet||(ab(t)?this.styleSheet=nC(t):(e.globalStyleSheet||(e.globalStyleSheet=nC()),this.styleSheet=e.globalStyleSheet)),this.styleSheet.textContent=function(e,t){let i="\n.monaco-menu {\n\tfont-size: 13px;\n\tborder-radius: 5px;\n\tmin-width: 160px;\n}\n\n".concat(SF(su.menuSelection),"\n").concat(SF(su.menuSubmenu),"\n\n.monaco-menu .monaco-action-bar {\n\ttext-align: right;\n\toverflow: hidden;\n\twhite-space: nowrap;\n}\n\n.monaco-menu .monaco-action-bar .actions-container {\n\tdisplay: flex;\n\tmargin: 0 auto;\n\tpadding: 0;\n\twidth: 100%;\n\tjustify-content: flex-end;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar.reverse .actions-container {\n\tflex-direction: row-reverse;\n}\n\n.monaco-menu .monaco-action-bar .action-item {\n\tcursor: pointer;\n\tdisplay: inline-block;\n\ttransition: transform 50ms ease;\n\tposition: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled {\n\tcursor: default;\n}\n\n.monaco-menu .monaco-action-bar .action-item .icon,\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar .action-label {\n\tfont-size: 11px;\n\tmargin-right: 4px;\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label,\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {\n\tcolor: var(--vscode-disabledForeground);\n}\n\n/* Vertical actions */\n\n.monaco-menu .monaco-action-bar.vertical {\n\ttext-align: left;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tdisplay: block;\n\tborder-bottom: 1px solid var(--vscode-menu-separatorBackground);\n\tpadding-top: 1px;\n\tpadding: 30px;\n}\n\n.monaco-menu .secondary-actions .monaco-action-bar .action-label {\n\tmargin-left: 6px;\n}\n\n/* Action Items */\n.monaco-menu .monaco-action-bar .action-item.select-container {\n\toverflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */\n\tflex: 1;\n\tmax-width: 170px;\n\tmin-width: 60px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-right: 10px;\n}\n\n.monaco-menu .monaco-action-bar.vertical {\n\tmargin-left: 0;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tpadding: 0;\n\ttransform: none;\n\tdisplay: flex;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.active {\n\ttransform: none;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\tflex: 1 1 auto;\n\tdisplay: flex;\n\theight: 2em;\n\talign-items: center;\n\tposition: relative;\n\tmargin: 0 4px;\n\tborder-radius: 4px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {\n\topacity: unset;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label {\n\tflex: 1 1 auto;\n\ttext-decoration: none;\n\tpadding: 0 1em;\n\tbackground: none;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .keybinding,\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tdisplay: inline-block;\n\tflex: 2 1 auto;\n\tpadding: 0 1em;\n\ttext-align: right;\n\tfont-size: 12px;\n\tline-height: 1;\n\topacity: 0.7;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {\n\tfont-size: 16px !important;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {\n\tmargin-left: auto;\n\tmargin-right: -20px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {\n\topacity: 0.4;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tmargin: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tposition: static;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {\n\tposition: absolute;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\twidth: 100%;\n\theight: 0px !important;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {\n\tpadding: 0.7em 1em 0.1em 1em;\n\tfont-weight: bold;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:hover {\n\tcolor: inherit;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tposition: absolute;\n\tvisibility: hidden;\n\twidth: 1em;\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {\n\tvisibility: visible;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n/* Context Menu */\n\n.context-view.monaco-menu-container {\n\toutline: 0;\n\tborder: none;\n\tanimation: fadeIn 0.083s linear;\n\t-webkit-app-region: no-drag;\n}\n\n.context-view.monaco-menu-container :focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {\n\toutline: 0;\n}\n\n.hc-black .context-view.monaco-menu-container,\n.hc-light .context-view.monaco-menu-container,\n:host-context(.hc-black) .context-view.monaco-menu-container,\n:host-context(.hc-light) .context-view.monaco-menu-container {\n\tbox-shadow: none;\n}\n\n.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {\n\tbackground: none;\n}\n\n/* Vertical Action Bar Styles */\n\n.monaco-menu .monaco-action-bar.vertical {\n\tpadding: 4px 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\theight: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),\n.monaco-menu .monaco-action-bar.vertical .keybinding {\n\tfont-size: inherit;\n\tpadding: 0 2em;\n\tmax-height: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tfont-size: inherit;\n\twidth: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tfont-size: inherit;\n\tmargin: 5px 0 !important;\n\tpadding: 0;\n\tborder-radius: 0;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tmargin-left: 0;\n\tmargin-right: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tfont-size: 60%;\n\tpadding: 0 1.8em;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n\tmask-size: 10px 10px;\n\t-webkit-mask-size: 10px 10px;\n}\n\n.monaco-menu .action-item {\n\tcursor: default;\n}");if(t){i+="\n\t\t\t/* Arrows */\n\t\t\t.monaco-scrollable-element > .scrollbar > .scra {\n\t\t\t\tcursor: pointer;\n\t\t\t\tfont-size: 11px !important;\n\t\t\t}\n\n\t\t\t.monaco-scrollable-element > .visible {\n\t\t\t\topacity: 1;\n\n\t\t\t\t/* Background rule added for IE9 - to allow clicks on dom node */\n\t\t\t\tbackground:rgba(0,0,0,0);\n\n\t\t\t\ttransition: opacity 100ms linear;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible {\n\t\t\t\topacity: 0;\n\t\t\t\tpointer-events: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible.fade {\n\t\t\t\ttransition: opacity 800ms linear;\n\t\t\t}\n\n\t\t\t/* Scrollable Content Inset Shadow */\n\t\t\t.monaco-scrollable-element > .shadow {\n\t\t\t\tposition: absolute;\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 3px;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 3px;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 100%;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top-left-corner {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t\t/* Fix for https://github.com/microsoft/vscode/issues/103170 */\n\t\t\t.monaco-menu .action-item .monaco-submenu {\n\t\t\t\tz-index: 1;\n\t\t\t}\n\t\t";let t=e.scrollbarShadow;t&&(i+="\n\t\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\t\tbox-shadow: ".concat(t," 0 6px 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\t\tbox-shadow: ").concat(t," 6px 0 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.top.left {\n\t\t\t\t\tbox-shadow: ").concat(t," 6px 6px 6px -6px inset;\n\t\t\t\t}\n\t\t\t"));let n=e.scrollbarSliderBackground;n&&(i+="\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider {\n\t\t\t\t\tbackground: ".concat(n,";\n\t\t\t\t}\n\t\t\t"));let s=e.scrollbarSliderHoverBackground;s&&(i+="\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider:hover {\n\t\t\t\t\tbackground: ".concat(s,";\n\t\t\t\t}\n\t\t\t"));let r=e.scrollbarSliderActiveBackground;r&&(i+="\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider.active {\n\t\t\t\t\tbackground: ".concat(r,";\n\t\t\t\t}\n\t\t\t"))}return i}(i,ab(t))}styleScrollElement(e,t){var i,n;let s=null!==(i=t.foregroundColor)&&void 0!==i?i:"",r=null!==(n=t.backgroundColor)&&void 0!==n?n:"",o=t.borderColor?"1px solid ".concat(t.borderColor):"",a=t.shadowColor?"0 2px 8px ".concat(t.shadowColor):"";e.style.outline=o,e.style.borderRadius="5px",e.style.color=s,e.style.backgroundColor=r,e.style.boxShadow=a}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}get scrollOffset(){return this.menuElement.scrollTop}trigger(e){if(e<=this.viewItems.length&&e>=0){let t=this.viewItems[e];if(t instanceof yF)super.focus(e),t.open(!0);else{if(!(t instanceof CF))return;super.run(t._action,t._context)}}}focusItemByElement(e){let t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++)if(e===this.actionsList.children[t]){this.focusedItem=t;break}}updateFocus(e){super.updateFocus(e,!0,!0),void 0!==this.focusedItem&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,i){if(e instanceof KD)return new wF(t.context,e,{icon:!0},this.menuStyles);if(e instanceof qD){let n=new yF(e,e.actions,i,(0,r.A)((0,r.A)({},t),{},{submenuIds:new Set([...t.submenuIds||[],e.id])}),this.menuStyles);if(t.enableMnemonics){let e=n.getMnemonic();if(e&&n.isEnabled()){let t=this.mnemonics.get(e);void 0===t?this.mnemonics.set(e,[n]):t.push(n)}}return n}{var n;let i=null===(n=t.getKeyBinding)||void 0===n||null===(n=n.call(t,e))||void 0===n?void 0:n.getLabel(),s={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext,keybinding:i},r=new CF(t.context,e,s,this.menuStyles);if(t.enableMnemonics){let e=r.getMnemonic();if(e&&r.isEnabled()){let t=this.mnemonics.get(e);void 0===t?this.mnemonics.set(e,[r]):t.push(r)}}return r}}},CF=class extends ON{constructor(e,t,i,n){if(super(t,t,i=(0,r.A)((0,r.A)({},i),{},{isMenu:!0,icon:void 0!==i.icon&&i.icon,label:void 0===i.label||i.label})),this.menuStyle=n,this.options=i,this.cssClass="",this.options.label&&i.enableMnemonics){let e=this.action.label;if(e){let t=vF.exec(e);t&&(this.mnemonic=(t[1]?t[1]:t[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new Rl(()=>{this.element&&(this._register(W_(this.element,kb.MOUSE_UP,e=>{if(Db(e,!0),Mv){if(new k_(L_(this.element),e).rightButton)return;this.onClick(e)}else setTimeout(()=>{this.onClick(e)},0)})),this._register(W_(this.element,kb.CONTEXT_MENU,e=>{Db(e,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=xb(this.element,Mb("a.action-menu-item")),this._action.id===KD.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts","".concat(this.mnemonic))),this.check=xb(this.item,Mb("span.menu-item-check"+yf.asCSSSelector(su.menuSelection))),this.check.setAttribute("role","none"),this.label=xb(this.item,Mb("span.action-label")),this.options.label&&this.options.keybinding&&(xb(this.item,Mb("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}blur(){super.blur(),this.applyStyle()}focus(){var e;super.focus(),null!==(e=this.item)&&void 0!==e&&e.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset","".concat(e)),this.item.setAttribute("aria-setsize","".concat(t)))}updateLabel(){if(this.label&&this.options.label){U_(this.label);let t=zy(this.action.label);if(t){let i=function(e){let t=vF,i=t.exec(e);if(!i)return e;let n=!i[1];return e.replace(t,n?"$2$3":"").trim()}(t);this.options.enableMnemonics||(t=i),this.label.setAttribute("aria-label",i.replace(/&&/g,"&"));let n=vF.exec(t);if(n){var e;t=na(t),_F.lastIndex=0;let i=_F.exec(t);for(;i&&i[1];)i=_F.exec(t);let s=e=>e.replace(/&amp;&amp;/g,"&amp;");i?this.label.append(ra(s(t.substr(0,i.index))," "),Mb("u",{"aria-hidden":"true"},i[3]),function(e,t){if(!e||!t)return e;let i=t.length,n=e.length;if(1===i){let i=n,s=t.charCodeAt(0);for(;i>0&&e.charCodeAt(i-1)===s;)i--;return e.substring(0,i)}let s=n;for(;s>0&&e.endsWith(t,s);)s-=i;return e.substring(0,s)}(s(t.substr(i.index+i[0].length))," ")):this.label.textContent=s(t).trim(),null===(e=this.item)||void 0===e||e.setAttribute("aria-keyshortcuts",(n[1]?n[1]:n[3]).toLocaleLowerCase())}else this.label.textContent=t.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;let e=this.action.checked;this.item.classList.toggle("checked",!!e),void 0===e?(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked","")):(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false"))}getMnemonic(){return this.mnemonic}applyStyle(){let e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,i=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,n=e&&this.menuStyle.selectionBorderColor?"1px solid ".concat(this.menuStyle.selectionBorderColor):"",s=e&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=null!==t&&void 0!==t?t:"",this.item.style.backgroundColor=null!==i&&void 0!==i?i:"",this.item.style.outline=n,this.item.style.outlineOffset=s),this.check&&(this.check.style.color=null!==t&&void 0!==t?t:"")}},yF=class extends CF{constructor(e,t,i,n,s){super(e,e,n,s),this.submenuActions=t,this.parentData=i,this.submenuOptions=n,this.mysubmenu=null,this.submenuDisposables=this._register(new bo),this.mouseOver=!1,this.expandDirection=n&&void 0!==n.expandDirection?n.expandDirection:{horizontal:pF.Right,vertical:fF.Below},this.showScheduler=new Rl(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new Rl(()=>{this.element&&!sb(hb(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=xb(this.item,Mb("span.submenu-indicator"+yf.asCSSSelector(su.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(W_(this.element,kb.KEY_UP,e=>{let t=new C_(e);(t.equals(Kv.RightArrow)||t.equals(Kv.Enter))&&(Db(e,!0),this.createSubmenu(!0))})),this._register(W_(this.element,kb.KEY_DOWN,e=>{let t=new C_(e);hb()===this.item&&(t.equals(Kv.RightArrow)||t.equals(Kv.Enter))&&Db(e,!0)})),this._register(W_(this.element,kb.MOUSE_OVER,e=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(W_(this.element,kb.MOUSE_LEAVE,e=>{this.mouseOver=!1})),this._register(W_(this.element,kb.FOCUS_OUT,e=>{this.element&&!sb(hb(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))})))}updateEnabled(){}open(e){this.cleanupExistingSubmenu(!1),this.createSubmenu(e)}onClick(e){Db(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch(t){}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuContainer=void this.submenuDisposables.clear())}}calculateSubmenuMenuLayout(e,t,i,n){let s={top:0,left:0};return s.left=lD(e.width,t.width,{position:n.horizontal===pF.Right?sD.Before:sD.After,offset:i.left,size:i.width}),s.left>=i.left&&s.left<i.left+i.width&&(i.left+10+t.width<=e.width&&(s.left=i.left+10),i.top+=10,i.height=0),s.top=lD(e.height,t.height,{position:sD.Before,offset:i.top,size:0}),s.top+t.height===i.top&&s.top+i.height+t.height<=e.height&&(s.top+=i.height),s}createSubmenu(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=xb(this.element,Mb("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");let t=L_(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode),i=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.submenuContainer.style.zIndex="1",this.parentData.submenu=new bF(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new GD],this.submenuOptions,this.menuStyle);let n=this.element.getBoundingClientRect(),s={top:n.top-i,left:n.left,height:n.height+2*i,width:n.width},r=this.submenuContainer.getBoundingClientRect(),o=L_(this.element),{top:a,left:l}=this.calculateSubmenuMenuLayout(new X_(o.innerWidth,o.innerHeight),X_.lift(r),s,this.expandDirection);this.submenuContainer.style.left="".concat(l-r.left,"px"),this.submenuContainer.style.top="".concat(a-r.top,"px"),this.submenuDisposables.add(W_(this.submenuContainer,kb.KEY_UP,e=>{new C_(e).equals(Kv.LeftArrow)&&(Db(e,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(W_(this.submenuContainer,kb.KEY_DOWN,e=>{new C_(e).equals(Kv.LeftArrow)&&Db(e,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&(null===(t=this.item)||void 0===t||t.setAttribute("aria-expanded",e))}applyStyle(){super.applyStyle();let e=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=null!==e&&void 0!==e?e:"")}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu=(this.mysubmenu.dispose(),null)),this.submenuContainer&&(this.submenuContainer=void 0)}},wF=class extends RN{constructor(e,t,i,n){super(e,t,i),this.menuStyles=n}render(e){super.render(e),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?"".concat(this.menuStyles.separatorColor):"")}};function SF(e){let t=Jc()[e.id];return".codicon-".concat(e.id,":before { content: '\\").concat(t.toString(16),"'; }")}var kF,EF,DF,TF,IF,xF,LF=class{constructor(e,t,i,n){this.contextViewService=e,this.telemetryService=t,this.notificationService=i,this.keybindingService=n,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){let t=e.getActions();if(!t.length)return;this.focusToReturn=hb();let i,n=bb(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,layer:e.layer,render:n=>{var s;this.lastContainer=n;let r=e.getMenuClassName?e.getMenuClassName():"";r&&(n.className+=" "+r),this.options.blockMouse&&(this.block=n.appendChild(Mb(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",null!==(s=this.blockDisposable)&&void 0!==s&&s.dispose(),this.blockDisposable=W_(this.block,kb.MOUSE_DOWN,e=>e.stopPropagation()));let o=new bo,a=e.actionRunner||o.add(new zD);a.onWillRun(t=>this.onActionRun(t,!e.skipTelemetry),this,o),a.onDidRun(this.onDidActionRun,this,o),i=new bF(n,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:a,getKeyBinding:e.getKeyBinding?e.getKeyBinding:e=>this.keybindingService.lookupKeybinding(e.id)},sF),i.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,o),i.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,o);let l=L_(n);return o.add(W_(l,kb.BLUR,()=>this.contextViewService.hideContextView(!0))),o.add(W_(l,kb.MOUSE_DOWN,e=>{if(e.defaultPrevented)return;let t=new k_(l,e),i=t.target;if(!t.rightButton){for(;i;){if(i===n)return;i=i.parentElement}this.contextViewService.hideContextView(!0)}})),fo(o,i)},focus:()=>{var t;null===(t=i)||void 0===t||t.focus(!!e.autoSelectFirstItem)},onHide:t=>{var i,n,s;null!==(i=e.onHide)&&void 0!==i&&i.call(e,!!t),this.block&&(this.block=(this.block.remove(),null)),null!==(n=this.blockDisposable)&&void 0!==n&&n.dispose(),this.blockDisposable=null,this.lastContainer&&(hb()===this.lastContainer||sb(hb(),this.lastContainer))&&null!==(s=this.focusToReturn)&&void 0!==s&&s.focus(),this.lastContainer=null}},n,!!n)}onActionRun(e,t){t&&this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1)}onDidActionRun(e){e.error&&!Bi(e.error)&&this.notificationService.error(e.error)}},AF=class extends Co{get contextMenuHandler(){return this._contextMenuHandler||(this._contextMenuHandler=new LF(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService)),this._contextMenuHandler}constructor(e,t,i,n,s,r){super(),this.telemetryService=e,this.notificationService=t,this.contextViewService=i,this.keybindingService=n,this.menuService=s,this.contextKeyService=r,this._contextMenuHandler=void 0,this._onDidShowContextMenu=this._store.add(new Ro),this.onDidShowContextMenu=this._onDidShowContextMenu.event,this._onDidHideContextMenu=this._store.add(new Ro),this.onDidHideContextMenu=this._onDidHideContextMenu.event}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){e=kF.transform(e,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu((0,r.A)((0,r.A)({},e),{},{onHide:t=>{var i,n;null!==(i=(n=e).onHide)&&void 0!==i&&i.call(n,t),this._onDidHideContextMenu.fire()}})),Wb.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};function NF(e){let t=e;return"function"==typeof(null===t||void 0===t?void 0:t.resolve)&&"function"==typeof(null===t||void 0===t?void 0:t.isResolved)}AF=ki([Ei(0,kn),Ei(1,BS),Ei(2,bE),Ei(3,SE),Ei(4,aF),Ei(5,AS)],AF),function(e){e.transform=function(e,t,i){if(!function(e){return e&&e.menuId instanceof QD}(e))return e;let{menuId:n,menuActionOptions:s,contextKeyService:o}=e;return(0,r.A)((0,r.A)({},e),{},{getActions:()=>{let r=[];return n&&(r=lF(t.getMenuActions(n,null!==o&&void 0!==o?o:i,s))),e.getActions?KD.join(e.getActions(),r):r}})}}(kF||(kF={})),function(e){e[e.ACTIVATE=1]="ACTIVATE",e[e.RESTORE=2]="RESTORE",e[e.PRESERVE=3]="PRESERVE"}(EF||(EF={})),function(e){e[e.PICK=0]="PICK",e[e.EXCLUSIVE_ONLY=1]="EXCLUSIVE_ONLY"}(DF||(DF={})),function(e){e[e.API=0]="API",e[e.USER=1]="USER"}(TF||(TF={})),function(e){e[e.Center=0]="Center",e[e.CenterIfOutsideViewport=1]="CenterIfOutsideViewport",e[e.NearTop=2]="NearTop",e[e.NearTopIfOutsideViewport=3]="NearTopIfOutsideViewport"}(IF||(IF={})),function(e){e.PROGRAMMATIC="api",e.NAVIGATION="code.navigation",e.JUMP="code.jump"}(xF||(xF={}));var FF=class{constructor(e){this._commandService=e}async open(e,t){if(!Ya(e,Ha.command))return!1;if(null===t||void 0===t||!t.allowCommands||("string"==typeof e&&(e=Gs.parse(e)),Array.isArray(t.allowCommands)&&!t.allowCommands.includes(e.path)))return!0;let i=[];try{i=Dg(decodeURIComponent(e.query))}catch(n){try{i=Dg(e.query)}catch(s){}}return Array.isArray(i)||(i=[i]),await this._commandService.executeCommand(e.path,...i),!0}};FF=ki([Ei(0,LD)],FF);var OF=class{constructor(e){this._editorService=e}async open(e,t){"string"==typeof e&&(e=Gs.parse(e));let{selection:i,uri:n}=function(e){let t,i=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(e.fragment);return i&&(t={startLineNumber:parseInt(i[1]),startColumn:i[2]?parseInt(i[2]):1,endLineNumber:i[4]?parseInt(i[4]):void 0,endColumn:i[4]?i[5]?parseInt(i[5]):1:void 0},e=e.with({fragment:""})),{selection:t,uri:e}}(e);return(e=n).scheme===Ha.file&&(e=dl(e)),await this._editorService.openCodeEditor({resource:e,options:(0,r.A)({selection:i,source:null!==t&&void 0!==t&&t.fromUserGesture?TF.USER:TF.API},null===t||void 0===t?void 0:t.editorOptions)},this._editorService.getFocusedCodeEditor(),null===t||void 0===t?void 0:t.openToSide),!0}};OF=ki([Ei(0,LS)],OF);var RF,MF,PF,BF=class{constructor(e,t){this._openers=new Eo,this._validators=new Eo,this._resolvers=new Eo,this._resolvedUriTargets=new so(e=>e.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new Eo,this._defaultExternalOpener={openExternal:async e=>(Qa(e,Ha.http,Ha.https)?Ub(e):Lv.location.href=e,!0)},this._openers.push({open:async(e,t)=>!!(null!==t&&void 0!==t&&t.openExternal||Qa(e,Ha.mailto,Ha.http,Ha.https,Ha.vsls))&&(await this._doOpenExternal(e,t),!0)}),this._openers.push(new FF(t)),this._openers.push(new OF(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}registerValidator(e){return{dispose:this._validators.push(e)}}registerExternalUriResolver(e){return{dispose:this._resolvers.push(e)}}setDefaultExternalOpener(e){this._defaultExternalOpener=e}registerExternalOpener(e){return{dispose:this._externalOpeners.push(e)}}async open(e,t){let i="string"==typeof e?Gs.parse(e):e;if(i.scheme===Ha.internal)return!1;if(null===t||void 0===t||!t.skipValidation){var n;let s=null!==(n=this._resolvedUriTargets.get(i))&&void 0!==n?n:e;for(let e of this._validators)if(!await e.shouldOpen(s,t))return!1}for(let s of this._openers)if(await s.open(e,t))return!0;return!1}async resolveExternalUri(e,t){for(let n of this._resolvers)try{let i=await n.resolveExternalUri(e,t);if(i)return this._resolvedUriTargets.has(i.resolved)||this._resolvedUriTargets.set(i.resolved,e),i}catch(i){}throw Error("Could not resolve external URI: "+e.toString())}async _doOpenExternal(e,t){let i,n,s="string"==typeof e?Gs.parse(e):e;try{i=(await this.resolveExternalUri(s,t)).resolved}catch(r){i=s}if(n="string"==typeof e&&s.toString()===i.toString()?e:encodeURI(i.toString(!0)),null!==t&&void 0!==t&&t.allowContributedOpeners){let e="string"==typeof(null===t||void 0===t?void 0:t.allowContributedOpeners)?null===t||void 0===t?void 0:t.allowContributedOpeners:void 0;for(let t of this._externalOpeners)if(await t.openExternal(n,{sourceUri:s,preferredOpenerId:e},Go.None))return!0}return this._defaultExternalOpener.openExternal(n,{sourceUri:s},Go.None)}dispose(){this._validators.clear()}};BF=ki([Ei(0,LS),Ei(1,LD)],BF),function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"}(RF||(RF={})),function(e){e[e.Hint=1]="Hint",e[e.Info=2]="Info",e[e.Warning=4]="Warning",e[e.Error=8]="Error"}(MF||(MF={})),function(e){e.compare=function(e,t){return t-e};let t=Object.create(null);t[e.Error]=Li(1987,"Error"),t[e.Warning]=Li(1988,"Warning"),t[e.Info]=Li(1989,"Info"),e.toString=function(e){return t[e]||""};let i=Object.create(null);i[e.Error]=Li(1990,"Errors"),i[e.Warning]=Li(1991,"Warnings"),i[e.Info]=Li(1992,"Infos"),e.toStringPlural=function(e){return i[e]||""},e.fromSeverity=function(t){switch(t){case xC.Error:return e.Error;case xC.Warning:return e.Warning;case xC.Info:return e.Info;case xC.Ignore:return e.Hint}},e.toSeverity=function(t){switch(t){case e.Error:return xC.Error;case e.Warning:return xC.Warning;case e.Info:return xC.Info;case e.Hint:return xC.Ignore}}}(MF||(MF={})),function(e){function t(e,t){let i=[""];return e.source?i.push(e.source.replace("\xa6","\\\xa6")):i.push(""),e.code?"string"==typeof e.code?i.push(e.code.replace("\xa6","\\\xa6")):i.push(e.code.value.replace("\xa6","\\\xa6")):i.push(""),void 0!==e.severity&&null!==e.severity?i.push(MF.toString(e.severity)):i.push(""),e.message&&t?i.push(e.message.replace("\xa6","\\\xa6")):i.push(""),void 0!==e.startLineNumber&&null!==e.startLineNumber?i.push(e.startLineNumber.toString()):i.push(""),void 0!==e.startColumn&&null!==e.startColumn?i.push(e.startColumn.toString()):i.push(""),void 0!==e.endLineNumber&&null!==e.endLineNumber?i.push(e.endLineNumber.toString()):i.push(""),void 0!==e.endColumn&&null!==e.endColumn?i.push(e.endColumn.toString()):i.push(""),i.push(""),i.join("\xa6")}e.makeKey=function(e){return t(e,!0)},e.makeKeyOptionalMessage=t}(PF||(PF={}));var UF,HF,WF,VF=fn("markerService");function zF(e){return(e.metadata&WF.ColorMask)>>>WF.ColorOffset}function KF(e,t){e.metadata=e.metadata&WF.ColorMaskInverse|t<<WF.ColorOffset}function qF(e){return(e.metadata&WF.IsVisitedMask)>>>WF.IsVisitedOffset==1}function GF(e,t){e.metadata=e.metadata&WF.IsVisitedMaskInverse|(t?1:0)<<WF.IsVisitedOffset}function jF(e){return(e.metadata&WF.IsForValidationMask)>>>WF.IsForValidationOffset==1}function YF(e,t){e.metadata=e.metadata&WF.IsForValidationMaskInverse|(t?1:0)<<WF.IsForValidationOffset}function QF(e){return(e.metadata&WF.IsMarginMask)>>>WF.IsMarginOffset==1}function $F(e,t){e.metadata=e.metadata&WF.IsMarginMaskInverse|(t?1:0)<<WF.IsMarginOffset}function XF(e){return(e.metadata&WF.AffectsFontMask)>>>WF.AffectsFontOffset==1}function ZF(e,t){e.metadata=e.metadata&WF.AffectsFontMaskInverse|(t?1:0)<<WF.AffectsFontOffset}function JF(e,t){e.metadata=e.metadata&WF.StickinessMaskInverse|t<<WF.StickinessOffset}function eO(e,t){e.metadata=e.metadata&WF.CollapseOnReplaceEditMaskInverse|(t?1:0)<<WF.CollapseOnReplaceEditOffset}!function(e){e.EditorHintDecoration="squiggly-hint",e.EditorInfoDecoration="squiggly-info",e.EditorWarningDecoration="squiggly-warning",e.EditorErrorDecoration="squiggly-error",e.EditorUnnecessaryDecoration="squiggly-unnecessary",e.EditorUnnecessaryInlineDecoration="squiggly-inline-unnecessary",e.EditorDeprecatedInlineDecoration="squiggly-inline-deprecated"}(UF||(UF={})),function(e){e[e.Black=0]="Black",e[e.Red=1]="Red"}(HF||(HF={})),function(e){e[e.ColorMask=1]="ColorMask",e[e.ColorMaskInverse=254]="ColorMaskInverse",e[e.ColorOffset=0]="ColorOffset",e[e.IsVisitedMask=2]="IsVisitedMask",e[e.IsVisitedMaskInverse=253]="IsVisitedMaskInverse",e[e.IsVisitedOffset=1]="IsVisitedOffset",e[e.IsForValidationMask=4]="IsForValidationMask",e[e.IsForValidationMaskInverse=251]="IsForValidationMaskInverse",e[e.IsForValidationOffset=2]="IsForValidationOffset",e[e.StickinessMask=24]="StickinessMask",e[e.StickinessMaskInverse=231]="StickinessMaskInverse",e[e.StickinessOffset=3]="StickinessOffset",e[e.CollapseOnReplaceEditMask=32]="CollapseOnReplaceEditMask",e[e.CollapseOnReplaceEditMaskInverse=223]="CollapseOnReplaceEditMaskInverse",e[e.CollapseOnReplaceEditOffset=5]="CollapseOnReplaceEditOffset",e[e.IsMarginMask=64]="IsMarginMask",e[e.IsMarginMaskInverse=191]="IsMarginMaskInverse",e[e.IsMarginOffset=6]="IsMarginOffset",e[e.AffectsFontMask=128]="AffectsFontMask",e[e.AffectsFontMaskInverse=127]="AffectsFontMaskInverse",e[e.AffectsFontOffset=7]="AffectsFontOffset",e[e.MIN_SAFE_DELTA=-1073741824]="MIN_SAFE_DELTA",e[e.MAX_SAFE_DELTA=1073741824]="MAX_SAFE_DELTA"}(WF||(WF={}));var tO=class{constructor(e,t,i){this.metadata=0,this.parent=this,this.left=this,this.right=this,KF(this,HF.Red),this.start=t,this.end=i,this.delta=0,this.maxEnd=i,this.id=e,this.ownerId=0,this.options=null,YF(this,!1),$F(this,!1),JF(this,uS.NeverGrowsWhenTypingAtEdges),eO(this,!1),ZF(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=null,GF(this,!1)}reset(e,t,i,n){this.start=t,this.end=i,this.maxEnd=i,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=n}setOptions(e){var t;this.options=e;let i=this.options.className;YF(this,i===UF.EditorErrorDecoration||i===UF.EditorWarningDecoration||i===UF.EditorInfoDecoration),$F(this,null!==this.options.glyphMarginClassName),JF(this,this.options.stickiness),eO(this,this.options.collapseOnReplaceEdit),ZF(this,null!==(t=this.options.affectsFont)&&void 0!==t&&t)}setCachedOffsets(e,t,i){this.cachedVersionId!==i&&(this.range=null),this.cachedVersionId=i,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}},iO=new tO(null,0,0);iO.parent=iO,iO.left=iO,iO.right=iO,KF(iO,HF.Black);var nO,sO=class{constructor(){this.root=iO,this.requestNormalizeDelta=!1}intervalSearch(e,t,i,n,s,r,o){return this.root===iO?[]:function(e,t,i,n,s,r,o,a){let l=e.root,h=0,d=0,c=0,u=0,g=[],p=0;for(;l!==iO;)if(qF(l))GF(l.left,!1),GF(l.right,!1),l===l.parent.right&&(h-=l.parent.delta),l=l.parent;else{if(!qF(l.left)){if(d=h+l.maxEnd,d<t){GF(l,!0);continue}if(l.left!==iO){l=l.left;continue}}if(c=h+l.start,c>i)GF(l,!0);else{if(u=h+l.end,u>=t){l.setCachedOffsets(c,u,o);let e=!0;n&&l.ownerId&&l.ownerId!==n&&(e=!1),s&&jF(l)&&(e=!1),r&&XF(l)&&(e=!1),a&&!QF(l)&&(e=!1),e&&(g[p++]=l)}GF(l,!0),l.right===iO||qF(l.right)||(h+=l.delta,l=l.right)}}return GF(e.root,!1),g}(this,e,t,i,n,s,r,o)}search(e,t,i,n,s){return this.root===iO?[]:aO(this,e,t,i,n,s)}collectNodesFromOwner(e){return function(e,t){let i=e.root,n=[],s=0;for(;i!==iO;)qF(i)?(GF(i.left,!1),GF(i.right,!1),i=i.parent):i.left===iO||qF(i.left)?(i.ownerId===t&&(n[s++]=i),GF(i,!0),i.right===iO||qF(i.right)||(i=i.right)):i=i.left;return GF(e.root,!1),n}(this,e)}collectNodesPostOrder(){return function(e){let t=e.root,i=[],n=0;for(;t!==iO;)qF(t)?(GF(t.left,!1),GF(t.right,!1),t=t.parent):t.left===iO||qF(t.left)?t.right===iO||qF(t.right)?(i[n++]=t,GF(t,!0)):t=t.right:t=t.left;return GF(e.root,!1),i}(this)}insert(e){lO(this,e),this._normalizeDeltaIfNecessary()}delete(e){hO(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){let i=e,n=0;for(;e!==this.root;)e===e.parent.right&&(n+=e.parent.delta),e=e.parent;let s=i.start+n,r=i.end+n;i.setCachedOffsets(s,r,t)}acceptReplace(e,t,i,n){let s=function(e,t,i){let n=e.root,s=0,r=0,o=0,a=0,l=[],h=0;for(;n!==iO;)if(qF(n))GF(n.left,!1),GF(n.right,!1),n===n.parent.right&&(s-=n.parent.delta),n=n.parent;else{if(!qF(n.left)){if(r=s+n.maxEnd,r<t){GF(n,!0);continue}if(n.left!==iO){n=n.left;continue}}o=s+n.start,o>i?GF(n,!0):(a=s+n.end,a>=t&&(n.setCachedOffsets(o,a,0),l[h++]=n),GF(n,!0),n.right===iO||qF(n.right)||(s+=n.delta,n=n.right))}return GF(e.root,!1),l}(this,e,e+t);for(let r=0,o=s.length;r<o;r++){hO(this,s[r])}this._normalizeDeltaIfNecessary(),function(e,t,i,n){let s=e.root,r=0,o=0,a=0,l=n-(i-t);for(;s!==iO;)if(qF(s))GF(s.left,!1),GF(s.right,!1),s===s.parent.right&&(r-=s.parent.delta),pO(s),s=s.parent;else{if(!qF(s.left)){if(o=r+s.maxEnd,o<t){GF(s,!0);continue}if(s.left!==iO){s=s.left;continue}}a=r+s.start,a>i?(s.start+=l,s.end+=l,s.delta+=l,(s.delta<WF.MIN_SAFE_DELTA||s.delta>WF.MAX_SAFE_DELTA)&&(e.requestNormalizeDelta=!0),GF(s,!0)):(GF(s,!0),s.right===iO||qF(s.right)||(r+=s.delta,s=s.right))}GF(e.root,!1)}(this,e,e+t,i),this._normalizeDeltaIfNecessary();for(let r=0,o=s.length;r<o;r++){let o=s[r];o.start=o.cachedAbsoluteStart,o.end=o.cachedAbsoluteEnd,oO(o,e,e+t,i,n),o.maxEnd=o.end,lO(this,o)}this._normalizeDeltaIfNecessary()}getAllInOrder(){return aO(this,0,!1,!1,0,!1)}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,function(e){let t=e.root,i=0;for(;t!==iO;)t.left===iO||qF(t.left)?t.right===iO||qF(t.right)?(t.start=i+t.start,t.end=i+t.end,t.delta=0,pO(t),GF(t,!0),GF(t.left,!1),GF(t.right,!1),t===t.parent.right&&(i-=t.parent.delta),t=t.parent):(i+=t.delta,t=t.right):t=t.left;GF(e.root,!1)}(this))}};function rO(e,t,i,n){return e<i||!(e>i||n===nO.ForceMove)&&(n===nO.ForceStay||t)}function oO(e,t,i,n,s){let r=function(e){return(e.metadata&WF.StickinessMask)>>>WF.StickinessOffset}(e),o=r===uS.AlwaysGrowsWhenTypingAtEdges||r===uS.GrowsOnlyWhenTypingBefore,a=r===uS.NeverGrowsWhenTypingAtEdges||r===uS.GrowsOnlyWhenTypingBefore,l=i-t,h=n,d=Math.min(l,h),c=e.start,u=!1,g=e.end,p=!1;t<=c&&g<=i&&function(e){return(e.metadata&WF.CollapseOnReplaceEditMask)>>>WF.CollapseOnReplaceEditOffset==1}(e)&&(e.start=t,u=!0,e.end=t,p=!0);{let e=s?nO.ForceMove:l>0?nO.ForceStay:nO.MarkerDefined;!u&&rO(c,o,t,e)&&(u=!0),!p&&rO(g,a,t,e)&&(p=!0)}if(d>0&&!s){let e=l>h?nO.ForceStay:nO.MarkerDefined;!u&&rO(c,o,t+d,e)&&(u=!0),!p&&rO(g,a,t+d,e)&&(p=!0)}{let n=s?nO.ForceMove:nO.MarkerDefined;!u&&rO(c,o,i,n)&&(e.start=t+h,u=!0),!p&&rO(g,a,i,n)&&(e.end=t+h,p=!0)}let f=h-l;u||(e.start=Math.max(0,c+f)),p||(e.end=Math.max(0,g+f)),e.start>e.end&&(e.end=e.start)}function aO(e,t,i,n,s,r){let o=e.root,a=0,l=0,h=0,d=[],c=0;for(;o!==iO;){if(qF(o)){GF(o.left,!1),GF(o.right,!1),o===o.parent.right&&(a-=o.parent.delta),o=o.parent;continue}if(o.left!==iO&&!qF(o.left)){o=o.left;continue}l=a+o.start,h=a+o.end,o.setCachedOffsets(l,h,s);let e=!0;(t&&o.ownerId&&o.ownerId!==t&&(e=!1),i&&jF(o)&&(e=!1),n&&XF(o)&&(e=!1),r&&!QF(o)&&(e=!1),e&&(d[c++]=o),GF(o,!0),o.right===iO||qF(o.right))||(a+=o.delta,o=o.right)}return GF(e.root,!1),d}function lO(e,t){if(e.root===iO)return t.parent=iO,t.left=iO,t.right=iO,KF(t,HF.Black),e.root=t,e.root;(function(e,t){let i=0,n=e.root,s=t.start,r=t.end;for(;;)if(mO(s,r,n.start+i,n.end+i)<0){if(n.left===iO){t.start-=i,t.end-=i,t.maxEnd-=i,n.left=t;break}n=n.left}else{if(n.right===iO){t.start-=i+n.delta,t.end-=i+n.delta,t.maxEnd-=i+n.delta,n.right=t;break}i+=n.delta,n=n.right}t.parent=n,t.left=iO,t.right=iO,KF(t,HF.Red)})(e,t),fO(t.parent);let i=t;for(;i!==e.root&&zF(i.parent)===HF.Red;)if(i.parent===i.parent.parent.left){let t=i.parent.parent.right;zF(t)===HF.Red?(KF(i.parent,HF.Black),KF(t,HF.Black),KF(i.parent.parent,HF.Red),i=i.parent.parent):(i===i.parent.right&&(i=i.parent,cO(e,i)),KF(i.parent,HF.Black),KF(i.parent.parent,HF.Red),uO(e,i.parent.parent))}else{let t=i.parent.parent.left;zF(t)===HF.Red?(KF(i.parent,HF.Black),KF(t,HF.Black),KF(i.parent.parent,HF.Red),i=i.parent.parent):(i===i.parent.left&&(i=i.parent,uO(e,i)),KF(i.parent,HF.Black),KF(i.parent.parent,HF.Red),cO(e,i.parent.parent))}return KF(e.root,HF.Black),t}function hO(e,t){let i,n;if(t.left===iO?(i=t.right,n=t,i.delta+=t.delta,(i.delta<WF.MIN_SAFE_DELTA||i.delta>WF.MAX_SAFE_DELTA)&&(e.requestNormalizeDelta=!0),i.start+=t.delta,i.end+=t.delta):t.right===iO?(i=t.left,n=t):(n=function(e){for(;e.left!==iO;)e=e.left;return e}(t.right),i=n.right,i.start+=n.delta,i.end+=n.delta,i.delta+=n.delta,(i.delta<WF.MIN_SAFE_DELTA||i.delta>WF.MAX_SAFE_DELTA)&&(e.requestNormalizeDelta=!0),n.start+=t.delta,n.end+=t.delta,n.delta=t.delta,(n.delta<WF.MIN_SAFE_DELTA||n.delta>WF.MAX_SAFE_DELTA)&&(e.requestNormalizeDelta=!0)),n===e.root)return e.root=i,KF(i,HF.Black),t.detach(),dO(),pO(i),void(e.root.parent=iO);let s,r=zF(n)===HF.Red;if(n===n.parent.left?n.parent.left=i:n.parent.right=i,n===t?i.parent=n.parent:(n.parent===t?i.parent=n:i.parent=n.parent,n.left=t.left,n.right=t.right,n.parent=t.parent,KF(n,zF(t)),t===e.root?e.root=n:t===t.parent.left?t.parent.left=n:t.parent.right=n,n.left!==iO&&(n.left.parent=n),n.right!==iO&&(n.right.parent=n)),t.detach(),r)return fO(i.parent),n!==t&&(fO(n),fO(n.parent)),void dO();for(fO(i),fO(i.parent),n!==t&&(fO(n),fO(n.parent));i!==e.root&&zF(i)===HF.Black;)i===i.parent.left?(s=i.parent.right,zF(s)===HF.Red&&(KF(s,HF.Black),KF(i.parent,HF.Red),cO(e,i.parent),s=i.parent.right),zF(s.left)===HF.Black&&zF(s.right)===HF.Black?(KF(s,HF.Red),i=i.parent):(zF(s.right)===HF.Black&&(KF(s.left,HF.Black),KF(s,HF.Red),uO(e,s),s=i.parent.right),KF(s,zF(i.parent)),KF(i.parent,HF.Black),KF(s.right,HF.Black),cO(e,i.parent),i=e.root)):(s=i.parent.left,zF(s)===HF.Red&&(KF(s,HF.Black),KF(i.parent,HF.Red),uO(e,i.parent),s=i.parent.left),zF(s.left)===HF.Black&&zF(s.right)===HF.Black?(KF(s,HF.Red),i=i.parent):(zF(s.left)===HF.Black&&(KF(s.right,HF.Black),KF(s,HF.Red),cO(e,s),s=i.parent.left),KF(s,zF(i.parent)),KF(i.parent,HF.Black),KF(s.left,HF.Black),uO(e,i.parent),i=e.root));KF(i,HF.Black),dO()}function dO(){iO.parent=iO,iO.delta=0,iO.start=0,iO.end=0}function cO(e,t){let i=t.right;i.delta+=t.delta,(i.delta<WF.MIN_SAFE_DELTA||i.delta>WF.MAX_SAFE_DELTA)&&(e.requestNormalizeDelta=!0),i.start+=t.delta,i.end+=t.delta,t.right=i.left,i.left!==iO&&(i.left.parent=t),i.parent=t.parent,t.parent===iO?e.root=i:t===t.parent.left?t.parent.left=i:t.parent.right=i,i.left=t,t.parent=i,pO(t),pO(i)}function uO(e,t){let i=t.left;t.delta-=i.delta,(t.delta<WF.MIN_SAFE_DELTA||t.delta>WF.MAX_SAFE_DELTA)&&(e.requestNormalizeDelta=!0),t.start-=i.delta,t.end-=i.delta,t.left=i.right,i.right!==iO&&(i.right.parent=t),i.parent=t.parent,t.parent===iO?e.root=i:t===t.parent.right?t.parent.right=i:t.parent.left=i,i.right=t,t.parent=i,pO(t),pO(i)}function gO(e){let t=e.end;if(e.left!==iO){let i=e.left.maxEnd;i>t&&(t=i)}if(e.right!==iO){let i=e.right.maxEnd+e.delta;i>t&&(t=i)}return t}function pO(e){e.maxEnd=gO(e)}function fO(e){for(;e!==iO;){let t=gO(e);if(e.maxEnd===t)return;e.maxEnd=t,e=e.parent}}function mO(e,t,i,n){return e===i?t-n:e-i}!function(e){e[e.MarkerDefined=0]="MarkerDefined",e[e.ForceMove=1]="ForceMove",e[e.ForceStay=2]="ForceStay"}(nO||(nO={}));var vO=class extends Co{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new Ro),this.onDidChangeMarker=this._onDidChangeMarker.event,this._suppressedRanges=new so,this._markerDecorations=new so,e.getModels().forEach(e=>this._onModelAdded(e)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){let i=this._markerDecorations.get(e);return i&&i.getMarker(t)||null}getLiveMarkers(e){let t=this._markerDecorations.get(e);return t?t.getMarkers():[]}addMarkerSuppression(e,t){let i=this._suppressedRanges.get(e);return i||(i=new Set,this._suppressedRanges.set(e,i)),i.add(t),this._handleMarkerChange([e]),vo(()=>{let i=this._suppressedRanges.get(e);i&&(i.delete(t),0===i.size&&this._suppressedRanges.delete(e),this._handleMarkerChange([e]))})}_handleMarkerChange(e){e.forEach(e=>{let t=this._markerDecorations.get(e);t&&this._updateDecorations(t)})}_onModelAdded(e){let t=new bO(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){var t;let i=this._markerDecorations.get(e.uri);i&&(i.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===Ha.inMemory||e.uri.scheme===Ha.internal||e.uri.scheme===Ha.vscode)&&(null===(t=this._markerService)||void 0===t||t.read({resource:e.uri}).map(e=>e.owner).forEach(t=>this._markerService.remove(t,[e.uri])))}_updateDecorations(e){let t=this._markerService.read({resource:e.model.uri,take:500}),i=this._suppressedRanges.get(e.model.uri);i&&(t=t.filter(e=>!oo.some(i,t=>dE.areIntersectingOrTouching(t,e)))),e.update(t)&&this._onDidChangeMarker.fire(e.model)}};vO=ki([Ei(0,LI),Ei(1,VF)],vO);var _O,bO=class extends Co{constructor(e){super(),this.model=e,this._map=new co,this._register(vo(()=>{this.model.deltaDecorations([...this._map.values()],[]),this._map.clear()}))}update(e){let{added:t,removed:i}=function(e,t){let i=[],n=[];for(let s of e)t.has(s)||i.push(s);for(let s of t)e.has(s)||n.push(s);return{removed:i,added:n}}(new Set(this._map.keys()),new Set(e));if(0===t.length&&0===i.length)return!1;let n=i.map(e=>this._map.get(e)),s=t.map(e=>({range:this._createDecorationRange(this.model,e),options:this._createDecorationOption(e)})),r=this.model.deltaDecorations(n,s);for(let o of i)this._map.delete(o);for(let o=0;o<r.length;o++)this._map.set(t[o],r[o]);return!0}getMarker(e){return this._map.getKey(e.id)}getMarkers(){let e=[];return this._map.forEach((t,i)=>{let n=this.model.getDecorationRange(t);n&&e.push([n,i])}),e}_createDecorationRange(e,t){let i=dE.lift(t);if(t.severity===MF.Hint&&!this._hasMarkerTag(t,RF.Unnecessary)&&!this._hasMarkerTag(t,RF.Deprecated)&&(i=i.setEndPosition(i.startLineNumber,i.startColumn+2)),i=e.validateRange(i),i.isEmpty()){let t=e.getLineLastNonWhitespaceColumn(i.startLineNumber)||e.getLineMaxColumn(i.startLineNumber);if(1===t||i.endColumn>=t)return i;let n=e.getWordAtPosition(i.getStartPosition());n&&(i=new dE(i.startLineNumber,n.startColumn,i.endLineNumber,n.endColumn))}else if(t.endColumn===Number.MAX_VALUE&&1===t.startColumn&&i.startLineNumber===i.endLineNumber){let n=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);n<i.endColumn&&(i=new dE(i.startLineNumber,n,i.endLineNumber,i.endColumn),t.startColumn=n)}return i}_createDecorationOption(e){let t,i,n,s,r;switch(e.severity){case MF.Hint:t=this._hasMarkerTag(e,RF.Deprecated)?void 0:this._hasMarkerTag(e,RF.Unnecessary)?UF.EditorUnnecessaryDecoration:UF.EditorHintDecoration,n=0;break;case MF.Info:t=UF.EditorInfoDecoration,i=au(Su),n=10,r={color:au(md),position:eS.Inline};break;case MF.Warning:t=UF.EditorWarningDecoration,i=au(wu),n=20,r={color:au(vd),position:eS.Inline};break;case MF.Error:default:t=UF.EditorErrorDecoration,i=au(yu),n=30,r={color:au(_d),position:eS.Inline}}return e.tags&&(-1!==e.tags.indexOf(RF.Unnecessary)&&(s=UF.EditorUnnecessaryInlineDecoration),-1!==e.tags.indexOf(RF.Deprecated)&&(s=UF.EditorDeprecatedInlineDecoration)),{description:"marker-decoration",stickiness:uS.NeverGrowsWhenTypingAtEdges,className:t,showIfCollapsed:!0,overviewRuler:{color:i,position:Zw.Right},minimap:r,zIndex:n,inlineClassName:s}}_hasMarkerTag(e,t){return!!e.tags&&e.tags.indexOf(t)>=0}},CO=fn("markerDecorationsService"),yO=fn("undoRedoService");!function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(_O||(_O={}));var wO,SO,kO,EO=class e extends dE{constructor(e,t,i,n){super(e,t,i,n),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=i,this.positionColumn=n}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(t){return e.selectionsEqual(this,t)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?_O.LTR:_O.RTL}setEndPosition(t,i){return this.getDirection()===_O.LTR?new e(this.startLineNumber,this.startColumn,t,i):new e(t,i,this.startLineNumber,this.startColumn)}getPosition(){return new hE(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new hE(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(t,i){return this.getDirection()===_O.LTR?new e(t,i,this.endLineNumber,this.endColumn):new e(this.endLineNumber,this.endColumn,t,i)}static fromPositions(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return new e(t.lineNumber,t.column,i.lineNumber,i.column)}static fromRange(t,i){return i===_O.LTR?new e(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):new e(t.endLineNumber,t.endColumn,t.startLineNumber,t.startColumn)}static liftSelection(t){return new e(t.selectionStartLineNumber,t.selectionStartColumn,t.positionLineNumber,t.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let i=0,n=e.length;i<n;i++)if(!this.selectionsEqual(e[i],t[i]))return!1;return!0}static isISelection(e){return!!e&&"number"==typeof e.selectionStartLineNumber&&"number"==typeof e.selectionStartColumn&&"number"==typeof e.positionLineNumber&&"number"==typeof e.positionColumn}static createWithDirection(t,i,n,s,r){return r===_O.LTR?new e(t,i,n,s):new e(n,s,t,i)}};function DO(){return wO||(wO=new TextDecoder("UTF-16LE")),wO}function TO(){return kO||(kO=function(){if(!os){os=!0;let e=new Uint8Array(2);e[0]=1,e[1]=2,rs=513===new Uint16Array(e.buffer)[0]}return rs}()?DO():(SO||(SO=new TextDecoder("UTF-16BE")),SO)),kO}function IO(e,t,i){let n=new Uint16Array(e.buffer,t,i);return i>0&&(65279===n[0]||65534===n[0])?function(e,t,i){let n=[],s=0;for(let r=0;r<i;r++){let i=pg(e,t);t+=2,n[s++]=String.fromCharCode(i)}return n.join("")}(e,t,i):DO().decode(n)}function xO(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}var LO=class e{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(e,t,i,n){this.oldPosition=e,this.oldText=t,this.newPosition=i,this.newText=n}toString(){return 0===this.oldText.length?"(insert@".concat(this.oldPosition,' "').concat(xO(this.newText),'")'):0===this.newText.length?"(delete@".concat(this.oldPosition,' "').concat(xO(this.oldText),'")'):"(replace@".concat(this.oldPosition,' "').concat(xO(this.oldText),'" with "').concat(xO(this.newText),'")')}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,i){let n=t.length;vg(e,n,i),i+=4;for(let s=0;s<n;s++)fg(e,t.charCodeAt(s),i),i+=2;return i}static _readString(e,t){let i=mg(e,t);return IO(e,t+=4,i)}writeSize(){return 8+e._writeStringSize(this.oldText)+e._writeStringSize(this.newText)}write(t,i){return vg(t,this.oldPosition,i),i+=4,vg(t,this.newPosition,i),i+=4,i=e._writeString(t,this.oldText,i),i=e._writeString(t,this.newText,i)}static read(t,i,n){let s=mg(t,i),r=mg(t,i+=4);i+=4;let o=e._readString(t,i);i+=e._writeStringSize(o);let a=e._readString(t,i);return i+=e._writeStringSize(a),n.push(new e(s,o,r,a)),i}};var AO=class e{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let t=0,i=0,n=this._getPrev(t),s=this._getCurr(i);for(;t<this._prevLen||i<this._currLen;){if(null===n){this._acceptCurr(s),s=this._getCurr(++i);continue}if(null===s){this._acceptPrev(n),n=this._getPrev(++t);continue}if(s.oldEnd<=n.newPosition){this._acceptCurr(s),s=this._getCurr(++i);continue}if(n.newEnd<=s.oldPosition){this._acceptPrev(n),n=this._getPrev(++t);continue}if(s.oldPosition<n.newPosition){let[t,i]=e._splitCurr(s,n.newPosition-s.oldPosition);this._acceptCurr(t),s=i;continue}if(n.newPosition<s.oldPosition){let[t,i]=e._splitPrev(n,s.oldPosition-n.newPosition);this._acceptPrev(t),n=i;continue}let r,o;if(s.oldEnd===n.newEnd)r=n,o=s,n=this._getPrev(++t),s=this._getCurr(++i);else if(s.oldEnd<n.newEnd){let[t,a]=e._splitPrev(n,s.oldLength);r=t,o=s,n=a,s=this._getCurr(++i)}else{let[i,a]=e._splitCurr(s,n.newLength);r=n,o=i,n=this._getPrev(++t),s=a}this._result[this._resultLen++]=new LO(r.oldPosition,r.oldText,o.newPosition,o.newText),this._prevDeltaOffset+=r.newLength-r.oldLength,this._currDeltaOffset+=o.newLength-o.oldLength}let r=e._merge(this._result);return e._removeNoOps(r)}_acceptCurr(t){this._result[this._resultLen++]=e._rebaseCurr(this._prevDeltaOffset,t),this._currDeltaOffset+=t.newLength-t.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(t){this._result[this._resultLen++]=e._rebasePrev(this._currDeltaOffset,t),this._prevDeltaOffset+=t.newLength-t.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new LO(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new LO(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){let i=e.newText.substr(0,t),n=e.newText.substr(t);return[new LO(e.oldPosition,e.oldText,e.newPosition,i),new LO(e.oldEnd,"",e.newPosition+t,n)]}static _splitCurr(e,t){let i=e.oldText.substr(0,t),n=e.oldText.substr(t);return[new LO(e.oldPosition,i,e.newPosition,e.newText),new LO(e.oldPosition+t,n,e.newEnd,"")]}static _merge(e){if(0===e.length)return e;let t=[],i=0,n=e[0];for(let s=1;s<e.length;s++){let r=e[s];n.oldEnd===r.oldPosition?n=new LO(n.oldPosition,n.oldText+r.oldText,n.newPosition,n.newText+r.newText):(t[i++]=n,n=r)}return t[i++]=n,t}static _removeNoOps(e){if(0===e.length)return e;let t=[],i=0;for(let n=0;n<e.length;n++){let s=e[n];s.oldText!==s.newText&&(t[i++]=s)}return t}},NO=class e{static fromTo(t,i){return new e(t,i)}static addRange(t,i){let n=0;for(;n<i.length&&i[n].endExclusive<t.start;)n++;let s=n;for(;s<i.length&&i[s].start<=t.endExclusive;)s++;if(n===s)i.splice(n,0,t);else{let r=Math.min(t.start,i[n].start),o=Math.max(t.endExclusive,i[s-1].endExclusive);i.splice(n,s-n,new e(r,o))}}static tryCreate(t,i){if(!(t>i))return new e(t,i)}static ofLength(t){return new e(0,t)}static ofStartAndLength(t,i){return new e(t,t+i)}static emptyAt(t){return new e(t,t)}constructor(e,t){if(this.start=e,this.endExclusive=t,e>t)throw new qi("Invalid range: ".concat(this.toString()))}get isEmpty(){return this.start===this.endExclusive}delta(t){return new e(this.start+t,this.endExclusive+t)}deltaStart(t){return new e(this.start+t,this.endExclusive)}deltaEnd(t){return new e(this.start,this.endExclusive+t)}get length(){return this.endExclusive-this.start}toString(){return"[".concat(this.start,", ").concat(this.endExclusive,")")}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(t){return new e(Math.min(this.start,t.start),Math.max(this.endExclusive,t.endExclusive))}intersect(t){let i=Math.max(this.start,t.start),n=Math.min(this.endExclusive,t.endExclusive);if(i<=n)return new e(i,n)}intersectionLength(e){let t=Math.max(this.start,e.start),i=Math.min(this.endExclusive,e.endExclusive);return Math.max(0,i-t)}intersects(e){return Math.max(this.start,e.start)<Math.min(this.endExclusive,e.endExclusive)}intersectsOrTouches(e){return Math.max(this.start,e.start)<=Math.min(this.endExclusive,e.endExclusive)}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new qi("Invalid clipping range: ".concat(this.toString()));return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new qi("Invalid clipping range: ".concat(this.toString()));return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){let t=[];for(let i=this.start;i<this.endExclusive;i++)t.push(e(i));return t}forEach(e){for(let t=this.start;t<this.endExclusive;t++)e(t)}joinRightTouching(t){if(this.endExclusive!==t.start)throw new qi("Invalid join: ".concat(this.toString()," and ").concat(t.toString()));return new e(this.start,t.endExclusive)}withMargin(t,i){return void 0===i&&(i=t),new e(this.start-t,this.endExclusive+i)}},FO=(Tt=class e{static ofLength(t,i){return new e(t,t+i)}static fromRange(t){return new e(t.startLineNumber,t.endLineNumber)}static fromRangeInclusive(t){return new e(t.startLineNumber,t.endLineNumber+1)}static subtract(t,i){return i?t.startLineNumber<i.startLineNumber&&i.endLineNumberExclusive<t.endLineNumberExclusive?[new e(t.startLineNumber,i.startLineNumber),new e(i.endLineNumberExclusive,t.endLineNumberExclusive)]:i.startLineNumber<=t.startLineNumber&&t.endLineNumberExclusive<=i.endLineNumberExclusive?[]:i.endLineNumberExclusive<t.endLineNumberExclusive?[new e(Math.max(i.endLineNumberExclusive,t.startLineNumber),t.endLineNumberExclusive)]:[new e(t.startLineNumber,Math.min(i.startLineNumber,t.endLineNumberExclusive))]:[t]}static joinMany(e){if(0===e.length)return[];let t=new OO(e[0].slice());for(let i=1;i<e.length;i++)t=t.getUnion(new OO(e[i].slice()));return t.ranges}static join(t){if(0===t.length)throw new qi("lineRanges cannot be empty");let i=t[0].startLineNumber,n=t[0].endLineNumberExclusive;for(let e=1;e<t.length;e++)i=Math.min(i,t[e].startLineNumber),n=Math.max(n,t[e].endLineNumberExclusive);return new e(i,n)}static deserialize(t){return new e(t[0],t[1])}constructor(e,t){if(e>t)throw new qi("startLineNumber ".concat(e," cannot be after endLineNumberExclusive ").concat(t));this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}containsRange(e){return this.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(t){return new e(this.startLineNumber+t,this.endLineNumberExclusive+t)}deltaLength(t){return new e(this.startLineNumber,this.endLineNumberExclusive+t)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(t){return new e(Math.min(this.startLineNumber,t.startLineNumber),Math.max(this.endLineNumberExclusive,t.endLineNumberExclusive))}toString(){return"[".concat(this.startLineNumber,",").concat(this.endLineNumberExclusive,")")}intersect(t){let i=Math.max(this.startLineNumber,t.startLineNumber),n=Math.min(this.endLineNumberExclusive,t.endLineNumberExclusive);if(i<=n)return new e(i,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}intersectsOrTouches(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new dE(this.startLineNumber,1,this.endLineNumberExclusive-1,2**53-1)}toExclusiveRange(){return new dE(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let t=[];for(let i=this.startLineNumber;i<this.endLineNumberExclusive;i++)t.push(e(i));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}toOffsetRange(){return new NO(this.startLineNumber-1,this.endLineNumberExclusive-1)}distanceToRange(e){return this.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-this.endLineNumberExclusive:e.endLineNumberExclusive<=this.startLineNumber?this.startLineNumber-e.endLineNumberExclusive:0}distanceToLine(e){return this.contains(e)?0:e<this.startLineNumber?this.startLineNumber-e:e-this.endLineNumberExclusive}addMargin(t,i){return new e(this.startLineNumber-t,this.endLineNumberExclusive+i)}},{_:Tt.compareByStart=Yr(e=>e.startLineNumber,Zr)},Tt),OO=class e{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(0===e.length)return;let t=Or(this._normalizedRanges,t=>t.endLineNumberExclusive>=e.startLineNumber),i=Fr(this._normalizedRanges,t=>t.startLineNumber<=e.endLineNumberExclusive)+1;if(t===i)this._normalizedRanges.splice(t,0,e);else if(t===i-1){let i=this._normalizedRanges[t];this._normalizedRanges[t]=i.join(e)}else{let n=this._normalizedRanges[t].join(this._normalizedRanges[i-1]).join(e);this._normalizedRanges.splice(t,i-t,n)}}contains(e){let t=Nr(this._normalizedRanges,t=>t.startLineNumber<=e);return!!t&&t.endLineNumberExclusive>e}intersects(e){let t=Nr(this._normalizedRanges,t=>t.startLineNumber<e.endLineNumberExclusive);return!!t&&t.endLineNumberExclusive>e.startLineNumber}getUnion(t){if(0===this._normalizedRanges.length)return t;if(0===t._normalizedRanges.length)return this;let i=[],n=0,s=0,r=null;for(;n<this._normalizedRanges.length||s<t._normalizedRanges.length;){let e=null;if(n<this._normalizedRanges.length&&s<t._normalizedRanges.length){let i=this._normalizedRanges[n],r=t._normalizedRanges[s];i.startLineNumber<r.startLineNumber?(e=i,n++):(e=r,s++)}else n<this._normalizedRanges.length?(e=this._normalizedRanges[n],n++):(e=t._normalizedRanges[s],s++);null===r?r=e:r.endLineNumberExclusive>=e.startLineNumber?r=new FO(r.startLineNumber,Math.max(r.endLineNumberExclusive,e.endLineNumberExclusive)):(i.push(r),r=e)}return null!==r&&i.push(r),new e(i)}subtractFrom(t){let i=Or(this._normalizedRanges,e=>e.endLineNumberExclusive>=t.startLineNumber),n=Fr(this._normalizedRanges,e=>e.startLineNumber<=t.endLineNumberExclusive)+1;if(i===n)return new e([t]);let s=[],r=t.startLineNumber;for(let e=i;e<n;e++){let t=this._normalizedRanges[e];t.startLineNumber>r&&s.push(new FO(r,t.startLineNumber)),r=t.endLineNumberExclusive}return r<t.endLineNumberExclusive&&s.push(new FO(r,t.endLineNumberExclusive)),new e(s)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(t){let i=[],n=0,s=0;for(;n<this._normalizedRanges.length&&s<t._normalizedRanges.length;){let e=this._normalizedRanges[n],r=t._normalizedRanges[s],o=e.intersect(r);o&&!o.isEmpty&&i.push(o),e.endLineNumberExclusive<r.endLineNumberExclusive?n++:s++}return new e(i)}getWithDelta(t){return new e(this._normalizedRanges.map(e=>e.delta(t)))}},RO=(It=class e{static lengthDiffNonNegative(t,i){return i.isLessThan(t)?e.zero:t.lineCount===i.lineCount?new e(0,i.columnCount-t.columnCount):new e(i.lineCount-t.lineCount,i.columnCount)}static betweenPositions(t,i){return t.lineNumber===i.lineNumber?new e(0,i.column-t.column):new e(i.lineNumber-t.lineNumber,i.column-1)}static fromPosition(t){return new e(t.lineNumber-1,t.column-1)}static ofRange(t){return e.betweenPositions(t.getStartPosition(),t.getEndPosition())}static ofText(t){let i=0,n=0;for(let e of t)"\n"===e?(i++,n=0):n++;return new e(i,n)}static ofSubstr(t,i){return e.ofText(i.substring(t))}static sum(t,i){return t.reduce((e,t)=>e.add(i(t)),e.zero)}constructor(e,t){this.lineCount=e,this.columnCount=t}isZero(){return 0===this.lineCount&&0===this.columnCount}isLessThan(e){return this.lineCount===e.lineCount?this.columnCount<e.columnCount:this.lineCount<e.lineCount}isGreaterThan(e){return this.lineCount===e.lineCount?this.columnCount>e.columnCount:this.lineCount>e.lineCount}isGreaterThanOrEqualTo(e){return this.lineCount===e.lineCount?this.columnCount>=e.columnCount:this.lineCount>e.lineCount}equals(e){return this.lineCount===e.lineCount&&this.columnCount===e.columnCount}compare(e){return this.lineCount===e.lineCount?this.columnCount-e.columnCount:this.lineCount-e.lineCount}add(t){return 0===t.lineCount?new e(this.lineCount,this.columnCount+t.columnCount):new e(this.lineCount+t.lineCount,t.columnCount)}createRange(e){return 0===this.lineCount?new dE(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new dE(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new dE(1,1,this.lineCount+1,this.columnCount+1)}toLineRange(){return FO.ofLength(1,this.lineCount+1)}addToPosition(e){return 0===this.lineCount?new hE(e.lineNumber,e.column+this.columnCount):new hE(e.lineNumber+this.lineCount,this.columnCount+1)}addToRange(e){return dE.fromPositions(this.addToPosition(e.getStartPosition()),this.addToPosition(e.getEndPosition()))}toString(){return"".concat(this.lineCount,",").concat(this.columnCount)}},{_:It.zero=new It(0,0)},It),MO=class{getOffsetRange(e){return new NO(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getRange(e){return dE.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getStringEdit(e){let t=e.replacements.map(e=>this.getStringReplacement(e));return new PO.deps.StringEdit(t)}getStringReplacement(e){return new PO.deps.StringReplacement(this.getOffsetRange(e.range),e.text)}getTextReplacement(e){return new PO.deps.TextReplacement(this.getRange(e.replaceRange),e.newText)}getTextEdit(e){let t=e.replacements.map(e=>this.getTextReplacement(e));return new PO.deps.TextEdit(t)}},PO=({_:(xt=class{static get deps(){if(!this._deps)throw Error("Dependencies not set. Call _setDependencies first.");return this._deps}})._deps=void 0},xt),BO=class extends MO{constructor(e){super(),this.text=e}get lineStartOffsetByLineIdx(){return this._lineStartOffsetByLineIdx||this._computeLineOffsets(),this._lineStartOffsetByLineIdx}get lineEndOffsetByLineIdx(){return this._lineEndOffsetByLineIdx||this._computeLineOffsets(),this._lineEndOffsetByLineIdx}_computeLineOffsets(){this._lineStartOffsetByLineIdx=[],this._lineEndOffsetByLineIdx=[],this._lineStartOffsetByLineIdx.push(0);for(let e=0;e<this.text.length;e++)"\n"===this.text.charAt(e)&&(this._lineStartOffsetByLineIdx.push(e+1),e>0&&"\r"===this.text.charAt(e-1)?this._lineEndOffsetByLineIdx.push(e-1):this._lineEndOffsetByLineIdx.push(e));this._lineEndOffsetByLineIdx.push(this.text.length)}getOffset(e){let t=this._validatePosition(e);return this.lineStartOffsetByLineIdx[t.lineNumber-1]+t.column-1}_validatePosition(e){if(e.lineNumber<1)return new hE(1,1);let t=this.textLength.lineCount+1;if(e.lineNumber>t)return new hE(t,this.getLineLength(t)+1);if(e.column<1)return new hE(e.lineNumber,1);let i=this.getLineLength(e.lineNumber);return e.column-1>i?new hE(e.lineNumber,i+1):e}getPosition(e){let t=Fr(this.lineStartOffsetByLineIdx,t=>t<=e);return new hE(t+1,e-this.lineStartOffsetByLineIdx[t]+1)}getTextLength(e){return PO.deps.TextLength.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new PO.deps.TextLength(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}},UO=class{constructor(){this._transformer=void 0}get endPositionExclusive(){return this.length.addToPosition(new hE(1,1))}get lineRange(){return this.length.toLineRange()}getValue(){return this.getValueOfRange(this.length.toRange())}getValueOfOffsetRange(e){return this.getValueOfRange(this.getTransformer().getRange(e))}getLineLength(e){return this.getValueOfRange(new dE(e,1,e,2**53-1)).length}getTransformer(){return this._transformer||(this._transformer=new BO(this.getValue())),this._transformer}getLineAt(e){return this.getValueOfRange(new dE(e,1,e,2**53-1))}getLines(){return oa(this.getValue())}getLinesOfRange(e){return e.mapToLineArray(e=>this.getLineAt(e))}equals(e){return this===e||this.getValue()===e.getValue()}},HO=class extends UO{constructor(e){super(),this.value=e,this._t=new BO(this.value)}getValueOfRange(e){return this._t.getOffsetRange(e).substring(this.value)}get length(){return this._t.textLength}getTransformer(){return this._t}},WO=class{constructor(e){this.replacements=e;let t=-1;for(let i of e){if(!(i.replaceRange.start>=t))throw new qi("Edits must be disjoint and sorted. Found ".concat(i," after ").concat(t));t=i.replaceRange.endExclusive}}equals(e){if(this.replacements.length!==e.replacements.length)return!1;for(let t=0;t<this.replacements.length;t++)if(!this.replacements[t].equals(e.replacements[t]))return!1;return!0}toString(){return"[".concat(this.replacements.map(e=>e.toString()).join(", "),"]")}normalize(){let e,t=[];for(let i of this.replacements)if(0!==i.getNewLength()||0!==i.replaceRange.length){if(e&&e.replaceRange.endExclusive===i.replaceRange.start){let t=e.tryJoinTouching(i);if(t){e=t;continue}}e&&t.push(e),e=i}return e&&t.push(e),this._createNew(t)}compose(e){let t=this.normalize(),i=e.normalize();if(t.isEmpty())return i;if(i.isEmpty())return t;let n=[...t.replacements],s=[],r=0;for(let o of i.replacements){for(;;){let e=n[0];if(!e||e.replaceRange.start+r+e.getNewLength()>=o.replaceRange.start)break;n.shift(),s.push(e),r+=e.getNewLength()-e.replaceRange.length}let e,t,i=r;for(;;){let i=n[0];if(!i||i.replaceRange.start+r>o.replaceRange.endExclusive)break;e||(e=i),t=i,n.shift(),r+=i.getNewLength()-i.replaceRange.length}if(e){let a=Math.min(e.replaceRange.start,o.replaceRange.start-i),l=o.replaceRange.start-(e.replaceRange.start+i);if(l>0){let t=e.slice(NO.emptyAt(a),new NO(0,l));s.push(t)}if(!t)throw new qi("Invariant violation: lastIntersecting is undefined");let h=t.replaceRange.endExclusive+r-o.replaceRange.endExclusive;if(h>0){let e=t.slice(NO.ofStartAndLength(t.replaceRange.endExclusive,0),new NO(t.getNewLength()-h,t.getNewLength()));n.unshift(e),r-=e.getNewLength()-e.replaceRange.length}let d=new NO(a,o.replaceRange.endExclusive-r),c=o.slice(d,new NO(0,o.getNewLength()));s.push(c)}else s.push(o.delta(-r))}for(;;){let e=n.shift();if(!e)break;s.push(e)}return this._createNew(s).normalize()}decomposeSplit(e){let t=[],i=[],n=0;for(let s of this.replacements)e(s)?(t.push(s),n+=s.getNewLength()-s.replaceRange.length):i.push(s.slice(s.replaceRange.delta(n),new NO(0,s.getNewLength())));return{e1:this._createNew(t),e2:this._createNew(i)}}getNewRanges(){let e=[],t=0;for(let i of this.replacements)e.push(NO.ofStartAndLength(i.replaceRange.start+t,i.getNewLength())),t+=i.getLengthDelta();return e}getJoinedReplaceRange(){if(0!==this.replacements.length)return this.replacements[0].replaceRange.join(this.replacements.at(-1).replaceRange)}isEmpty(){return 0===this.replacements.length}getLengthDelta(){return function(e,t){return e.reduce((e,i)=>e+t(i),0)}(this.replacements,e=>e.getLengthDelta())}getNewDataLength(e){return e+this.getLengthDelta()}applyToOffset(e){let t=0;for(let i of this.replacements){if(!(i.replaceRange.start<=e))break;if(e<i.replaceRange.endExclusive)return i.replaceRange.start+t;t+=i.getNewLength()-i.replaceRange.length}return e+t}applyToOffsetRange(e){return new NO(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyInverseToOffset(e){let t=0;for(let i of this.replacements){let n=i.getNewLength();if(!(i.replaceRange.start<=e-t))break;if(e-t<i.replaceRange.start+n)return i.replaceRange.start;t+=n-i.replaceRange.length}return e-t}applyToOffsetOrUndefined(e){let t=0;for(let i of this.replacements){if(!(i.replaceRange.start<=e))break;if(e<i.replaceRange.endExclusive)return;t+=i.getNewLength()-i.replaceRange.length}return e+t}applyToOffsetRangeOrUndefined(e){let t=this.applyToOffsetOrUndefined(e.start);if(void 0===t)return;let i=this.applyToOffsetOrUndefined(e.endExclusive);return void 0!==i?new NO(t,i):void 0}},VO=class{constructor(e){this.replaceRange=e}delta(e){return this.slice(this.replaceRange.delta(e),new NO(0,this.getNewLength()))}getLengthDelta(){return this.getNewLength()-this.replaceRange.length}toString(){return"{ ".concat(this.replaceRange.toString()," -> ").concat(this.getNewLength()," }")}get isEmpty(){return 0===this.getNewLength()&&0===this.replaceRange.length}getRangeAfterReplace(){return new NO(this.replaceRange.start,this.replaceRange.start+this.getNewLength())}};Lt=class e extends WO{static create(t){return new e(t)}static single(t){return new e([t])}_createNew(t){return new e(t)}};Lt.empty=new Lt([]);var zO=class extends WO{get TReplacement(){throw Error("TReplacement is not defined for BaseStringEdit")}static composeOrUndefined(e){if(0===e.length)return;let t=e[0];for(let i=1;i<e.length;i++)t=t.compose(e[i]);return t}static trySwap(e,t){let i=e.inverseOnSlice((e,t)=>" ".repeat(t-e)),n=t.tryRebase(i);if(!n)return;let s=e.tryRebase(n);return s?{e1:n,e2:s}:void 0}apply(e){let t=[],i=0;for(let n of this.replacements)t.push(e.substring(i,n.replaceRange.start)),t.push(n.newText),i=n.replaceRange.endExclusive;return t.push(e.substring(i)),t.join("")}inverseOnSlice(e){let t=[],i=0;for(let n of this.replacements)t.push(GO.replace(NO.ofStartAndLength(n.replaceRange.start+i,n.newText.length),e(n.replaceRange.start,n.replaceRange.endExclusive))),i+=n.newText.length-n.replaceRange.length;return new qO(t)}inverse(e){return this.inverseOnSlice((t,i)=>e.substring(t,i))}rebaseSkipConflicting(e){return this._tryRebase(e,!1)}tryRebase(e){return this._tryRebase(e,!0)}_tryRebase(e,t){let i=[],n=0,s=0,r=0;for(;s<this.replacements.length||n<e.replacements.length;){let o=e.replacements[n],a=this.replacements[s];if(!a)break;if(o)if(a.replaceRange.intersectsOrTouches(o.replaceRange)){if(s++,t)return}else a.replaceRange.start<o.replaceRange.start?(i.push(new GO(a.replaceRange.delta(r),a.newText)),s++):(n++,r+=o.newText.length-o.replaceRange.length);else i.push(new GO(a.replaceRange.delta(r),a.newText)),s++}return new qO(i)}toJson(){return this.replacements.map(e=>e.toJson())}isNeutralOn(e){return this.replacements.every(t=>t.isNeutralOn(e))}removeCommonSuffixPrefix(e){let t=[];for(let i of this.replacements){let n=i.removeCommonSuffixPrefix(e);n.isEmpty||t.push(n)}return new qO(t)}normalizeEOL(e){return new qO(this.replacements.map(t=>t.normalizeEOL(e)))}normalizeOnSource(e){let t=this.apply(e),i=GO.replace(NO.ofLength(e.length),t).removeCommonSuffixAndPrefix(e);return i.isEmpty?qO.empty:i.toEdit()}removeCommonSuffixAndPrefix(e){return this._createNew(this.replacements.map(t=>t.removeCommonSuffixAndPrefix(e))).normalize()}applyOnText(e){return new HO(this.apply(e.value))}mapData(e){return new jO(this.replacements.map(t=>new YO(t.replaceRange,t.newText,e(t))))}},KO=class extends VO{constructor(e,t){super(e),this.newText=t}getNewLength(){return this.newText.length}toString(){return"".concat(this.replaceRange," -> ").concat(JSON.stringify(this.newText))}replace(e){return e.substring(0,this.replaceRange.start)+this.newText+e.substring(this.replaceRange.endExclusive)}isNeutralOn(e){return this.newText===e.substring(this.replaceRange.start,this.replaceRange.endExclusive)}removeCommonSuffixPrefix(e){let t=e.substring(this.replaceRange.start,this.replaceRange.endExclusive),i=_a(t,this.newText),n=Math.min(t.length-i,this.newText.length-i,ba(t,this.newText));return new GO(new NO(this.replaceRange.start+i,this.replaceRange.endExclusive-n),this.newText.substring(i,this.newText.length-n))}normalizeEOL(e){let t=this.newText.replace(/\r\n|\n/g,e);return new GO(this.replaceRange,t)}removeCommonSuffixAndPrefix(e){return this.removeCommonSuffix(e).removeCommonPrefix(e)}removeCommonPrefix(e){let t=_a(this.replaceRange.substring(e),this.newText);return 0===t?this:this.slice(this.replaceRange.deltaStart(t),new NO(t,this.newText.length))}removeCommonSuffix(e){let t=ba(this.replaceRange.substring(e),this.newText);return 0===t?this:this.slice(this.replaceRange.deltaEnd(-t),new NO(0,this.newText.length-t))}toEdit(){return new qO([this])}toJson(){return{txt:this.newText,pos:this.replaceRange.start,len:this.replaceRange.length}}},qO=(At=class e extends zO{static create(t){return new e(t)}static single(t){return new e([t])}static replace(t,i){return new e([new GO(t,i)])}static insert(t,i){return new e([new GO(NO.emptyAt(t),i)])}static delete(t){return new e([new GO(t,"")])}static fromJson(t){return new e(t.map(GO.fromJson))}static compose(t){if(0===t.length)return e.empty;let i=t[0];for(let e=1;e<t.length;e++)i=i.compose(t[e]);return i}static composeSequentialReplacements(t){let i=e.empty,n=[];for(let s of t){let t=n.at(-1);!t||s.replaceRange.isBefore(t.replaceRange)?n.push(s):(i=i.compose(e.create(n.reverse())),n=[s])}return i=i.compose(e.create(n.reverse())),i}constructor(e){super(e)}_createNew(t){return new e(t)}},{_:At.empty=new At([])},At),GO=class e extends KO{static insert(t,i){return new e(NO.emptyAt(t),i)}static replace(t,i){return new e(t,i)}static delete(t){return new e(t,"")}static fromJson(t){return new e(NO.ofStartAndLength(t.pos,t.len),t.txt)}equals(e){return this.replaceRange.equals(e.replaceRange)&&this.newText===e.newText}tryJoinTouching(t){return new e(this.replaceRange.joinRightTouching(t.replaceRange),this.newText+t.newText)}slice(t,i){return new e(t,i?i.substring(this.newText):this.newText)}},jO=(Nt=class e extends zO{static create(t){return new e(t)}static single(t){return new e([t])}static replace(t,i,n){return new e([new YO(t,i,n)])}static insert(t,i,n){return new e([new YO(NO.emptyAt(t),i,n)])}static delete(t,i){return new e([new YO(t,"",i)])}static compose(t){if(0===t.length)return e.empty;let i=t[0];for(let e=1;e<t.length;e++)i=i.compose(t[e]);return i}constructor(e){super(e)}_createNew(t){return new e(t)}toStringEdit(e){let t=[];for(let i of this.replacements)(!e||e(i))&&t.push(new GO(i.replaceRange,i.newText));return new qO(t)}},{_:Nt.empty=new Nt([])},Nt),YO=class e extends KO{static insert(t,i,n){return new e(NO.emptyAt(t),i,n)}static replace(t,i,n){return new e(t,i,n)}static delete(t,i){return new e(t,"",i)}constructor(e,t,i){super(e,t),this.data=i}equals(e){return this.replaceRange.equals(e.replaceRange)&&this.newText===e.newText&&this.data===e.data}tryJoinTouching(t){let i=this.data.join(t.data);if(void 0!==i)return new e(this.replaceRange.joinRightTouching(t.replaceRange),this.newText+t.newText,i)}slice(t,i){return new e(t,i?i.substring(this.newText):this.newText,this.data)}},QO=class e{static fromStringEdit(t,i){return new e(t.replacements.map(e=>$O.fromStringReplacement(e,i)))}static replace(t,i){return new e([new $O(t,i)])}static delete(t){return new e([new $O(t,"")])}static insert(t,i){return new e([new $O(dE.fromPositions(t,t),i)])}static fromParallelReplacementsUnsorted(t){return new e(t.slice().sort(Yr(e=>e.range,dE.compareRangesUsingStarts)))}constructor(e){this.replacements=e,Yi(()=>Qi(e,(e,t)=>e.range.getEndPosition().isBeforeOrEqual(t.range.getStartPosition())))}normalize(){let t=[];for(let e of this.replacements)if(t.length>0&&t[t.length-1].range.getEndPosition().equals(e.range.getStartPosition())){let i=t[t.length-1];t[t.length-1]=new $O(i.range.plusRange(e.range),i.text+e.text)}else e.isEmpty||t.push(e);return new e(t)}mapPosition(e){let t=0,i=0,n=0;for(let s of this.replacements){let r=s.range.getStartPosition();if(e.isBeforeOrEqual(r))break;let o=s.range.getEndPosition(),a=RO.ofText(s.text);if(e.isBefore(o)){let e=new hE(r.lineNumber+t,r.column+(r.lineNumber+t===i?n:0));return XO(e,a.addToPosition(e))}r.lineNumber+t!==i&&(n=0),t+=a.lineCount-(s.range.endLineNumber-s.range.startLineNumber),0===a.lineCount?o.lineNumber===r.lineNumber?n+=a.columnCount-(o.column-r.column):n+=a.columnCount-(o.column-1):n=a.columnCount,i=o.lineNumber+t}return new hE(e.lineNumber+t,e.column+(e.lineNumber+t===i?n:0))}mapRange(e){return XO(function(e){return e instanceof hE?e:e.getStartPosition()}(this.mapPosition(e.getStartPosition())),function(e){return e instanceof hE?e:e.getEndPosition()}(this.mapPosition(e.getEndPosition())))}inverseMapPosition(e,t){return this.inverse(t).mapPosition(e)}inverseMapRange(e,t){return this.inverse(t).mapRange(e)}apply(e){let t="",i=new hE(1,1);for(let s of this.replacements){let n=s.range,r=n.getStartPosition(),o=n.getEndPosition(),a=XO(i,r);a.isEmpty()||(t+=e.getValueOfRange(a)),t+=s.text,i=o}let n=XO(i,e.endPositionExclusive);return n.isEmpty()||(t+=e.getValueOfRange(n)),t}applyToString(e){let t=new HO(e);return this.apply(t)}inverse(t){let i=this.getNewRanges();return new e(this.replacements.map((e,n)=>new $O(i[n],t.getValueOfRange(e.range))))}getNewRanges(){let e=[],t=0,i=0,n=0;for(let s of this.replacements){let r=RO.ofText(s.text),o=hE.lift({lineNumber:s.range.startLineNumber+i,column:s.range.startColumn+(s.range.startLineNumber===t?n:0)}),a=r.createRange(o);e.push(a),i=a.endLineNumber-s.range.endLineNumber,n=a.endColumn-s.range.endColumn,t=s.range.endLineNumber}return e}toReplacement(e){if(0===this.replacements.length)throw new qi;if(1===this.replacements.length)return this.replacements[0];let t=this.replacements[0].range.getStartPosition(),i=this.replacements[this.replacements.length-1].range.getEndPosition(),n="";for(let s=0;s<this.replacements.length;s++){let t=this.replacements[s];if(n+=t.text,s<this.replacements.length-1){let i=this.replacements[s+1],r=dE.fromPositions(t.range.getEndPosition(),i.range.getStartPosition());n+=e.getValueOfRange(r)}}return new $O(dE.fromPositions(t,i),n)}equals(e){return Mr(this.replacements,e.replacements,(e,t)=>e.equals(t))}compose(t){let i=this.normalize(),n=t.normalize();if(0===i.replacements.length)return n;if(0===n.replacements.length)return i;let s=[],r=0,o=1,a=1,l=0,h=0,d=0,c=0,u=null,g=0,p=0,f=!1,m=!1,v=1,_=1;function b(){if(!f)if(r<i.replacements.length){let e=i.replacements[r],t=e.range.getStartPosition();if(o!==t.lineNumber||a!==t.column)l=o,h=a,d=t.lineNumber,c=t.column,u=null,o===t.lineNumber?(g=0,p=t.column-a):(g=t.lineNumber-o,p=t.column-1),f=!0,o=t.lineNumber,a=t.column;else{let i=e.range.getEndPosition();l=t.lineNumber,h=t.column,d=i.lineNumber,c=i.column,u=e.text;let n=0,s=0,m=e.text;for(let e=0;e<m.length;e++)10===m.charCodeAt(e)?(n++,s=0):s++;g=n,p=s,f=!0,o=i.lineNumber,a=i.column,r++}}else m=!0,l=o,h=a,f=!0}function C(e,t,i){if(0===t&&0===i)return["",e];let n=0,s=0;for(;n<t;){let t=e.indexOf("\n",s);if(-1===t)throw new qi("Text length mismatch");s=t+1,n++}return s+=i,[e.substring(0,s),e.substring(s)]}for(let e of n.replacements){let t=e.range.getStartPosition(),i=e.range.getEndPosition();for(;v!==t.lineNumber||_!==t.column;){if(b(),m){let e,i;v===t.lineNumber?(e=0,i=t.column-_):(e=t.lineNumber-v,i=t.column-1),v=t.lineNumber,_=t.column,0===e?h+=i:(l+=e,h=i+1);break}let e,i;0===g?(e=v,i=_+p):(e=v+g,i=p+1);let n=!1;if(t.lineNumber<e?n=!0:t.lineNumber===e&&(n=t.column<i),n){let e,i,n,r;if(v===t.lineNumber?(e=0,i=t.column-_):(e=t.lineNumber-v,i=t.column-1),e===g?(n=0,r=p-i):(n=g-e,r=p),null!==u){let[t,o]=C(u,e,i);s.push(new $O(new dE(l,h,d,c),t)),u=o,g=n,p=r,l=d,h=c}else{let t,s;0===e?(t=l,s=h+i):(t=l+e,s=i+1),l=t,h=s,g=n,p=r}v=t.lineNumber,_=t.column;break}null!==u&&s.push(new $O(new dE(l,h,d,c),u)),v=e,_=i,f=!1}let n=null,r=null,o=null,a=null;for(;v!==i.lineNumber||_!==i.column;){if(b(),m){let e,t,s,d;v===i.lineNumber?(e=0,t=i.column-_):(e=i.lineNumber-v,t=i.column-1),0===e?(s=l,d=h+t):(s=l+e,d=t+1),null===n&&(n=l,r=h),o=s,a=d,v=i.lineNumber,_=i.column,l=s,h=d;break}let e,t;0===g?(e=v,t=_+p):(e=v+g,t=p+1);let s=!1;if(i.lineNumber<e?s=!0:i.lineNumber===e&&(s=i.column<t),s){let e,t,s,f;if(v===i.lineNumber?(e=0,t=i.column-_):(e=i.lineNumber-v,t=i.column-1),e===g?(s=0,f=p-t):(s=g-e,f=p),null!==u){null===n&&(n=l,r=h),o=d,a=c;let[,i]=C(u,e,t);u=i,g=s,p=f,l=d,h=c}else{let i,d;0===e?(i=l,d=h+t):(i=l+e,d=t+1),null===n&&(n=l,r=h),o=i,a=d,l=i,h=d,g=s,p=f}v=i.lineNumber,_=i.column;break}null===n&&(n=l,r=h),o=d,a=c,v=e,_=t,f=!1}if(null!==n)s.push(new $O(new dE(n,r,o,a),e.text));else{b();let t=l,i=h;s.push(new $O(new dE(t,i,t,i),e.text))}}for(;b(),!m;)null!==u&&s.push(new $O(new dE(l,h,d,c),u)),f=!1;return new e(s).normalize()}toString(e){return void 0===e?this.replacements.map(e=>e.toString()).join("\n"):"string"==typeof e?this.toString(new HO(e)):0===this.replacements.length?"":this.replacements.map(t=>{let i=e.getValueOfRange(t.range),n=dE.fromPositions(new hE(Math.max(1,t.range.startLineNumber-1),1),t.range.getStartPosition()),s=e.getValueOfRange(n);s.length>10&&(s="..."+s.substring(s.length-10));let r=dE.fromPositions(t.range.getEndPosition(),new hE(t.range.endLineNumber+1,1)),o=e.getValueOfRange(r);o.length>10&&(o=o.substring(0,10)+"...");let a=i;a.length>10&&(a=a.substring(0,5)+"..."+a.substring(a.length-5));let l=t.text;return l.length>10&&(l=l.substring(0,5)+"..."+l.substring(l.length-5)),0===a.length?"".concat(s,"\u2770").concat(l,"\u2771").concat(o):"".concat(s,"\u2770").concat(a,"\u21a6").concat(l,"\u2771").concat(o)}).join("\n")}},$O=class e{static joinReplacements(t,i){if(0===t.length)throw new qi;if(1===t.length)return t[0];let n=t[0].range.getStartPosition(),s=t[t.length-1].range.getEndPosition(),r="";for(let e=0;e<t.length;e++){let n=t[e];if(r+=n.text,e<t.length-1){let s=t[e+1],o=dE.fromPositions(n.range.getEndPosition(),s.range.getStartPosition());r+=i.getValueOfRange(o)}}return new e(dE.fromPositions(n,s),r)}static fromStringReplacement(t,i){return new e(i.getTransformer().getRange(t.replaceRange),t.newText)}static delete(t){return new e(t,"")}constructor(e,t){this.range=e,this.text=t}get isEmpty(){return this.range.isEmpty()&&0===this.text.length}static equals(e,t){return e.range.equalsRange(t.range)&&e.text===t.text}toSingleEditOperation(){return{range:this.range,text:this.text}}toEdit(){return new QO([this])}equals(t){return e.equals(this,t)}extendToCoverRange(t,i){if(this.range.containsRange(t))return this;let n=this.range.plusRange(t),s=i.getValueOfRange(dE.fromPositions(n.getStartPosition(),this.range.getStartPosition())),r=i.getValueOfRange(dE.fromPositions(this.range.getEndPosition(),n.getEndPosition()));return new e(n,s+this.text+r)}extendToFullLine(e){let t=new dE(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(t,e)}removeCommonPrefixAndSuffix(e){return this.removeCommonPrefix(e).removeCommonSuffix(e)}removeCommonPrefix(t){let i=t.getValueOfRange(this.range).replaceAll("\r\n","\n"),n=this.text.replaceAll("\r\n","\n"),s=_a(i,n),r=RO.ofText(i.substring(0,s)).addToPosition(this.range.getStartPosition()),o=n.substring(s);return new e(dE.fromPositions(r,this.range.getEndPosition()),o)}removeCommonSuffix(t){let i=t.getValueOfRange(this.range).replaceAll("\r\n","\n"),n=this.text.replaceAll("\r\n","\n"),s=ba(i,n),r=RO.ofText(i.substring(0,i.length-s)).addToPosition(this.range.getStartPosition()),o=n.substring(0,n.length-s);return new e(dE.fromPositions(this.range.getStartPosition(),r),o)}isEffectiveDeletion(e){let t=this.text.replaceAll("\r\n","\n"),i=e.getValueOfRange(this.range).replaceAll("\r\n","\n"),n=_a(t,i);t=t.substring(n),i=i.substring(n);let s=ba(t,i);return t=t.substring(0,t.length-s),i=i.substring(0,i.length-s),""===t}toString(){let e=this.range.getStartPosition(),t=this.range.getEndPosition();return"(".concat(e.lineNumber,",").concat(e.column," -> ").concat(t.lineNumber,",").concat(t.column,'): "').concat(this.text,'"')}};function XO(e,t){if(e.lineNumber===t.lineNumber&&e.column===2**53-1)return dE.fromPositions(t,t);if(!e.isBeforeOrEqual(t))throw new qi("start must be before end");return new dE(e.lineNumber,e.column,t.lineNumber,t.column)}var ZO,JO=(Ft=class e{static deserialize(t){return new e(t.map(e=>eR.deserialize(e)))}static fromStringEdit(t,i){let n=QO.fromStringEdit(t,i);return e.fromTextEdit(n,i)}static fromTextEdit(t,i){let n=t.replacements,s=[],r=[];for(let e=0;e<n.length;e++){let t=n[e],o=e+1<n.length?n[e+1]:void 0;if(r.push(t),o&&o.range.startLineNumber===t.range.endLineNumber)continue;let a=$O.joinReplacements(r,i);r.length=0;let l=eR.fromSingleTextEdit(a,i);s.push(l)}return new e(s)}static createFromUnsorted(t){let i=t.slice();return i.sort(Yr(e=>e.lineRange.startLineNumber,Zr)),new e(i)}constructor(e){this.replacements=e,ji(Qi(e,(e,t)=>e.lineRange.endLineNumberExclusive<=t.lineRange.startLineNumber))}isEmpty(){return 0===this.replacements.length}toEdit(e){let t=[];for(let i of this.replacements){let n=i.toSingleEdit(e);t.push(n)}return new qO(t)}toString(){return this.replacements.map(e=>e.toString()).join(",")}serialize(){return this.replacements.map(e=>e.serialize())}getNewLineRanges(){let e=[],t=0;for(let i of this.replacements)e.push(FO.ofLength(i.lineRange.startLineNumber+t,i.newLines.length)),t+=i.newLines.length-i.lineRange.length;return e}mapLineNumber(e){let t=0;for(let i of this.replacements){if(i.lineRange.endLineNumberExclusive>e)break;t+=i.newLines.length-i.lineRange.length}return e+t}mapLineRange(e){return new FO(this.mapLineNumber(e.startLineNumber),this.mapLineNumber(e.endLineNumberExclusive))}mapBackLineRange(e,t){return this.inverse(t).mapLineRange(e)}touches(e){return this.replacements.some(t=>e.replacements.some(e=>t.lineRange.intersect(e.lineRange)))}rebase(t){return new e(this.replacements.map(e=>new eR(t.mapLineRange(e.lineRange),e.newLines)))}humanReadablePatch(e){let t=[];function i(e,i,n,s){let r="unmodified"===n?" ":"deleted"===n?"-":"+";void 0===s&&(s="[[[[[ WARNING: LINE DOES NOT EXIST ]]]]]");let o=-1===e?"   ":e.toString().padStart(3," "),a=-1===i?"   ":i.toString().padStart(3," ");t.push("".concat(r," ").concat(o," ").concat(a," ").concat(s))}function n(){t.push("---")}let s=0,r=!0;for(let o of function*(e,t){let i,n;for(let s of e)void 0!==n&&t(n,s)?i.push(s):(i&&(yield i),i=[s]),n=s;i&&(yield i)}(this.replacements,(e,t)=>e.lineRange.distanceToRange(t.lineRange)<=5)){r?r=!1:n();let t=o[0].lineRange.startLineNumber-2;for(let n of o){for(let a=Math.max(1,t);a<n.lineRange.startLineNumber;a++)i(a,a+s,"unmodified",e[a-1]);let r=n.lineRange,o=n.newLines;for(let t of r.mapToLineArray(e=>e)){i(t,-1,"deleted",e[t-1])}for(let e=0;e<o.length;e++){let t=o[e];i(-1,r.startLineNumber+s+e,"added",t)}t=r.endLineNumberExclusive,s+=n.newLines.length-n.lineRange.length}for(let n=t;n<=Math.min(t+2,e.length);n++)i(n,n+s,"unmodified",e[n-1])}return t.join("\n")}apply(e){let t=[],i=0;for(let n of this.replacements){for(;i<n.lineRange.startLineNumber-1;)t.push(e[i]),i++;for(let e of n.newLines)t.push(e);i=n.lineRange.endLineNumberExclusive-1}for(;i<e.length;)t.push(e[i]),i++;return t}inverse(t){let i=this.getNewLineRanges();return new e(this.replacements.map((e,n)=>new eR(i[n],t.slice(e.lineRange.startLineNumber-1,e.lineRange.endLineNumberExclusive-1))))}},{_:Ft.empty=new Ft([])},Ft),eR=class e{static deserialize(t){return new e(FO.ofLength(t[0],t[1]-t[0]),t[2])}static fromSingleTextEdit(t,i){let n=oa(t.text),s=t.range.startLineNumber,r=i.getValueOfRange(dE.fromPositions(new hE(t.range.startLineNumber,1),t.range.getStartPosition()));n[0]=r+n[0];let o=t.range.endLineNumber+1,a=i.getTransformer().getLineLength(t.range.endLineNumber)+1,l=i.getValueOfRange(dE.fromPositions(t.range.getEndPosition(),new hE(t.range.endLineNumber,a)));n[n.length-1]=n[n.length-1]+l;let h=t.range.startColumn===i.getTransformer().getLineLength(t.range.startLineNumber)+1,d=1===t.range.endColumn;return h&&n[0].length===r.length&&(s++,n.shift()),n.length>0&&s<o&&d&&n[n.length-1].length===l.length&&(o--,n.pop()),new e(new FO(s,o),n)}constructor(e,t){this.lineRange=e,this.newLines=t}toSingleTextEdit(e){if(0===this.newLines.length){let t=e.getTransformer().textLength;if(this.lineRange.endLineNumberExclusive===t.lineCount+2){let i;if(this.lineRange.startLineNumber>1){let t=this.lineRange.startLineNumber-1;i=new hE(t,e.getTransformer().getLineLength(t)+1)}else i=new hE(1,1);let n=t.addToPosition(new hE(1,1));return new $O(dE.fromPositions(i,n),"")}return new $O(new dE(this.lineRange.startLineNumber,1,this.lineRange.endLineNumberExclusive,1),"")}if(this.lineRange.isEmpty){let t,i,n,s=this.lineRange.startLineNumber;return s===e.getTransformer().textLength.lineCount+2?(t=s-1,i=e.getTransformer().getLineLength(t)+1,n=this.newLines.map(e=>"\n"+e).join("")):(t=s,i=1,n=this.newLines.map(e=>e+"\n").join("")),new $O(dE.fromPositions(new hE(t,i)),n)}{let t=this.lineRange.endLineNumberExclusive-1,i=e.getTransformer().getLineLength(t)+1;return new $O(new dE(this.lineRange.startLineNumber,1,t,i),this.newLines.join("\n"))}}toSingleEdit(e){let t=this.toSingleTextEdit(e);return new GO(e.getTransformer().getOffsetRange(t.range),t.text)}toString(){return"".concat(this.lineRange,"->").concat(JSON.stringify(this.newLines))}serialize(){return[this.lineRange.startLineNumber,this.lineRange.endLineNumberExclusive,this.newLines]}removeCommonSuffixPrefixLines(t){let i=this.lineRange.startLineNumber,n=this.lineRange.endLineNumberExclusive,s=0;for(;i<n&&s<this.newLines.length&&this.newLines[s]===t.getLineAt(i);)i++,s++;let r=0;for(;i<n&&r+s<this.newLines.length&&this.newLines[this.newLines.length-1-r]===t.getLineAt(n-1);)n--,r++;return 0===s&&0===r?this:new e(new FO(i,n),this.newLines.slice(s,this.newLines.length-r))}toLineEdit(){return new JO([this])}};!function(e){e.is=function(e){return Array.isArray(e)&&3===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]&&Array.isArray(e[2])&&e[2].every(e=>"string"==typeof e)}}(ZO||(ZO={}));var tR=Symbol("TextModelEditSource"),iR=class{constructor(e,t){this.metadata=e}toString(){return"".concat(this.metadata.source)}getType(){let e=this.metadata;switch(e.source){case"cursor":return e.kind;case"inlineCompletionAccept":return e.source+(e.$nes?":nes":"");case"unknown":return e.name||"unknown";default:return e.source}}toKey(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.metadata;return Object.entries(i).filter(i=>{let[n,s]=i,r=t[n];return void 0===r?(n.match(/\$/g)||[]).length<=e&&null!=s&&""!==s:r}).map(e=>{let[t,i]=e;return"".concat(t,":").concat(i)}).join("-")}get props(){return this.metadata}};function nR(e){return new iR(e,tR)}var sR,rR={unknown:e=>nR({source:"unknown",name:e.name}),rename:(e,t)=>nR({source:"rename",$$$oldName:e,$$$newName:t}),chatApplyEdits(e){var t,i;return nR({source:"Chat.applyEdits",$modelId:aR(e.modelId),$extensionId:null===(t=e.extensionId)||void 0===t?void 0:t.extensionId,$extensionVersion:null===(i=e.extensionId)||void 0===i?void 0:i.version,$$languageId:e.languageId,$$sessionId:e.sessionId,$$requestId:e.requestId,$$mode:e.mode,$$codeBlockSuggestionId:e.codeBlockSuggestionId})},chatUndoEdits:()=>nR({source:"Chat.undoEdits"}),chatReset:()=>nR({source:"Chat.reset"}),inlineCompletionAccept:e=>nR((0,r.A)((0,r.A)({source:"inlineCompletionAccept",$nes:e.nes},oR(e.providerId)),{},{$$correlationId:e.correlationId,$$requestUuid:e.requestUuid,$$languageId:e.languageId})),inlineCompletionPartialAccept:e=>nR((0,r.A)((0,r.A)({source:"inlineCompletionPartialAccept",type:e.type,$nes:e.nes},oR(e.providerId)),{},{$$correlationId:e.correlationId,$$requestUuid:e.requestUuid,$$languageId:e.languageId})),inlineChatApplyEdit(e){var t,i;return nR({source:"inlineChat.applyEdits",$modelId:aR(e.modelId),$extensionId:null===(t=e.extensionId)||void 0===t?void 0:t.extensionId,$extensionVersion:null===(i=e.extensionId)||void 0===i?void 0:i.version,$$sessionId:e.sessionId,$$requestId:e.requestId,$$languageId:e.languageId})},reloadFromDisk:()=>nR({source:"reloadFromDisk"}),cursor:e=>nR({source:"cursor",kind:e.kind,detailedSource:e.detailedSource}),setValue:()=>nR({source:"setValue"}),eolChange:()=>nR({source:"eolChange"}),applyEdits:()=>nR({source:"applyEdits"}),snippet:()=>nR({source:"snippet"}),suggest:e=>nR((0,r.A)({source:"suggest"},oR(e.providerId))),codeAction:e=>nR((0,r.A)({source:"codeAction",$kind:e.kind},oR(e.providerId)))};function oR(e){return e?{$extensionId:e.extensionId,$extensionVersion:e.extensionVersion,$providerId:e.providerId}:{}}function aR(e){if(void 0!==e)return e.replaceAll("/","|")}function lR(e){return e.toString()}!function(e){e.newId=function(e){return e?e("sgt"):function(e){return"".concat(e,"-").concat(Bp())}("sgt")}}(sR||(sR={}));var hR=class e{static create(t,i){let n=t.getAlternativeVersionId(),s=uR(t);return new e(n,n,s,s,i,i,[])}constructor(e,t,i,n,s,r,o){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=i,this.afterEOL=n,this.beforeCursorState=s,this.afterCursorState=r,this.changes=o}append(e,t,i,n,s){t.length>0&&(this.changes=function(e,t){return null===e||0===e.length?t:new AO(e,t).compress()}(this.changes,t)),this.afterEOL=i,this.afterVersionId=n,this.afterCursorState=s}static _writeSelectionsSize(e){return 4+16*(e?e.length:0)}static _writeSelections(e,t,i){if(vg(e,t?t.length:0,i),i+=4,t)for(let n of t)vg(e,n.selectionStartLineNumber,i),i+=4,vg(e,n.selectionStartColumn,i),i+=4,vg(e,n.positionLineNumber,i),i+=4,vg(e,n.positionColumn,i),i+=4;return i}static _readSelections(e,t,i){let n=mg(e,t);t+=4;for(let s=0;s<n;s++){let n=mg(e,t),s=mg(e,t+=4),r=mg(e,t+=4),o=mg(e,t+=4);t+=4,i.push(new EO(n,s,r,o))}return t}serialize(){let t=10+e._writeSelectionsSize(this.beforeCursorState)+e._writeSelectionsSize(this.afterCursorState)+4;for(let e of this.changes)t+=e.writeSize();let i=new Uint8Array(t),n=0;vg(i,this.beforeVersionId,n),n+=4,vg(i,this.afterVersionId,n),n+=4,bg(i,this.beforeEOL,n),n+=1,bg(i,this.afterEOL,n),n+=1,n=e._writeSelections(i,this.beforeCursorState,n),n=e._writeSelections(i,this.afterCursorState,n),vg(i,this.changes.length,n),n+=4;for(let e of this.changes)n=e.write(i,n);return i.buffer}static deserialize(t){let i=new Uint8Array(t),n=0,s=mg(i,n);n+=4;let r=mg(i,n);n+=4;let o=_g(i,n);n+=1;let a=_g(i,n);n+=1;let l=[];n=e._readSelections(i,n,l);let h=[];n=e._readSelections(i,n,h);let d=mg(i,n);n+=4;let c=[];for(let e=0;e<d;e++)n=LO.read(i,n,c);return new e(s,r,o,a,l,h,c)}},dR=class{get type(){return RS.Resource}get resource(){return Gs.isUri(this.model)?this.model:this.model.uri}constructor(e,t,i,n){this.label=e,this.code=t,this.model=i,this._data=hR.create(i,n)}toString(){return(this._data instanceof hR?this._data:hR.deserialize(this._data)).changes.map(e=>e.toString()).join(", ")}matchesResource(e){return(Gs.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof hR}append(e,t,i,n,s){this._data instanceof hR&&this._data.append(e,t,i,n,s)}close(){this._data instanceof hR&&(this._data=this._data.serialize())}open(){this._data instanceof hR||(this._data=hR.deserialize(this._data))}undo(){if(Gs.isUri(this.model))throw Error("Invalid SingleModelEditStackElement");this._data instanceof hR&&(this._data=this._data.serialize());let e=hR.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(Gs.isUri(this.model))throw Error("Invalid SingleModelEditStackElement");this._data instanceof hR&&(this._data=this._data.serialize());let e=hR.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof hR&&(this._data=this._data.serialize()),this._data.byteLength+168}},cR=class{get resources(){return this._editStackElementsArr.map(e=>e.resource)}constructor(e,t,i){this.label=e,this.code=t,this.type=RS.Workspace,this._isOpen=!0,this._editStackElementsArr=i.slice(0),this._editStackElementsMap=new Map;for(let n of this._editStackElementsArr){let e=lR(n.resource);this._editStackElementsMap.set(e,n)}this._delegate=null}setDelegate(e){this._delegate=e}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}getMissingModels(){let e=[];for(let t of this._editStackElementsArr)Gs.isUri(t.model)&&e.push(t.model);return e}matchesResource(e){let t=lR(e);return this._editStackElementsMap.has(t)}setModel(e){let t=lR(Gs.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;let t=lR(e.uri);return!!this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).canAppend(e)}append(e,t,i,n,s){let r=lR(e.uri);this._editStackElementsMap.get(r).append(e,t,i,n,s)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(let e of this._editStackElementsArr)e.undo()}redo(){for(let e of this._editStackElementsArr)e.redo()}heapSize(e){let t=lR(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){let e=[];for(let t of this._editStackElementsArr)e.push("".concat(ol(t.resource),": ").concat(t));return"{".concat(e.join(", "),"}")}};function uR(e){return"\n"===e.getEOL()?oS.LF:oS.CRLF}function gR(e){return!!e&&(e instanceof dR||e instanceof cR)}var pR=class e{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){let e=this._undoRedoService.getLastElement(this._model.uri);gR(e)&&e.close()}popStackElement(){let e=this._undoRedoService.getLastElement(this._model.uri);gR(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){let i=this._undoRedoService.getLastElement(this._model.uri);if(gR(i)&&i.canAppend(this._model))return i;let n=new dR(Li(852,"Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(n,t),n}pushEOL(e){let t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],uR(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(t,i,n,s){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:rR.unknown({name:"pushEditOperation"}),o=this._getOrCreateEditStackElement(t,s),a=this._model.applyEdits(i,!0,r),l=e._computeCursorState(n,a),h=a.map((e,t)=>({index:t,textChange:e.textChange}));return h.sort((e,t)=>e.textChange.oldPosition===t.textChange.oldPosition?e.index-t.index:e.textChange.oldPosition-t.textChange.oldPosition),o.append(this._model,h.map(e=>e.textChange),uR(this._model),this._model.getAlternativeVersionId(),l),l}static _computeCursorState(e,t){try{return e?e(t):null}catch(e){return Ri(e),null}}},fR=class e{static _nextVisibleColumn(t,i,n){return t===En.Tab?e.nextRenderTabStop(i,n):function(e){return e>=11904&&e<=55215||e>=63744&&e<=64255||e>=65281&&e<=65374}(t)||Oa(t)?i+2:i+1}static visibleColumnFromColumn(e,t,i){let n=Math.min(t-1,e.length),s=e.substring(0,n),r=new Ea(s),o=0;for(;!r.eol();){let e=Sa(s,n,r.offset);r.nextGraphemeLength(),o=this._nextVisibleColumn(e,o,i)}return o}static toStatusbarColumn(t,i,n){let s=new ka(t.substring(0,Math.min(i-1,t.length))),r=0;for(;!s.eol();)s.nextCodePoint()===En.Tab?r=e.nextRenderTabStop(r,n):r+=1;return r+1}static columnFromVisibleColumn(e,t,i){if(t<=0)return 1;let n=e.length,s=new Ea(e),r=0,o=1;for(;!s.eol();){let a=Sa(e,n,s.offset);s.nextGraphemeLength();let l=this._nextVisibleColumn(a,r,i),h=s.offset+1;if(l>=t){return l-t<t-r?h:o}r=l,o=h}return n+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(t,i){return e.nextRenderTabStop(t,i)}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(t,i){return e.prevRenderTabStop(t,i)}};function mR(e,t,i){let n=aa(e);return-1===n&&(n=e.length),function(e,t,i){let n=0;for(let r=0;r<e.length;r++)"\t"===e.charAt(r)?n=fR.nextIndentTabStop(n,t):n++;let s="";if(!i){let e=Math.floor(n/t);n%=t;for(let t=0;t<e;t++)s+="\t"}for(let r=0;r<n;r++)s+=" ";return s}(e.substring(0,n),t,i)+e.substring(n)}var vR,_R=fn("languageConfigurationService");function bR(e){return 0!==(e&vR.value)}!function(e){e[e.value=3]="value"}(vR||(vR={}));var CR=function(){let e=null,t=null;return function(i){return e!==i&&(e=i,t=function(e){let t=new Uint16Array(e.length),i=0;for(let n=e.length-1;n>=0;n--)t[i++]=e.charCodeAt(n);return TO().decode(t)}(e)),t}}(),yR=class{static _findPrevBracketInText(e,t,i,n){let s=i.match(e);if(!s)return null;let r=i.length-(s.index||0),o=s[0].length,a=n+r;return new dE(t,a-o+1,t,a+1)}static findPrevBracketInRange(e,t,i,n,s){let r=CR(i).substring(i.length-s,i.length-n);return this._findPrevBracketInText(e,t,r,n)}static findNextBracketInText(e,t,i,n){let s=i.match(e);if(!s)return null;let r=s.index||0,o=s[0].length;if(0===o)return null;let a=n+r;return new dE(t,a+1,t,a+1+o)}static findNextBracketInRange(e,t,i,n,s){let r=i.substring(n,s);return this.findNextBracketInText(e,t,r,n)}},wR=class{constructor(e,t,i,n){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=i,this.isInvalid=n}},SR=class{constructor(e,t,i,n,s,r){this.range=e,this.openingBracketRange=t,this.closingBracketRange=i,this.nestingLevel=n,this.nestingLevelOfEqualBracketType=s,this.bracketPairNode=r}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}get closingBracketInfo(){var e;return null===(e=this.bracketPairNode.closingBracket)||void 0===e?void 0:e.bracketInfo}},kR=class extends SR{constructor(e,t,i,n,s,r,o){super(e,t,i,n,s,r),this.minVisibleColumnIndentation=o}};function ER(e){return 0===e}var DR=2**26;function TR(e,t){return e*DR+t}function IR(e){let t=e,i=Math.floor(t/DR);return new RO(i,t-i*DR)}function xR(e){return e}function LR(e,t){let i=e+t;return t>=DR&&(i-=e%DR),i}function AR(e,t){return e.reduce((e,i)=>LR(e,t(i)),0)}function NR(e,t){return e===t}function FR(e,t){let i=e,n=t;if(n-i<=0)return 0;let s=Math.floor(i/DR),r=Math.floor(n/DR),o=n-r*DR;return s===r?TR(0,o-(i-s*DR)):TR(r-s,o)}function OR(e,t){return e<t}function RR(e,t){return e<=t}function MR(e,t){return e>=t}function PR(e){return TR(e.lineNumber-1,e.column-1)}function BR(e,t){let i=e,n=Math.floor(i/DR),s=i-n*DR,r=t,o=Math.floor(r/DR);return new dE(n+1,s+1,o+1,r-o*DR+1)}var UR,HR=[],WR=(Ot=class e{static create(t,i){if(t<=128&&0===i.length){let n=e.cache[t];return n||(n=new e(t,i),e.cache[t]=n),n}return new e(t,i)}static getEmpty(){return this.empty}constructor(e,t){this.items=e,this.additionalItems=t}add(t,i){let n=i.getKey(t),s=n>>5;if(0===s){let t=1<<n|this.items;return t===this.items?this:e.create(t,this.additionalItems)}s--;let r=this.additionalItems.slice(0);for(;r.length<s;)r.push(0);return r[s]|=1<<(31&n),e.create(this.items,r)}has(e,t){let i=t.getKey(e),n=i>>5;return 0===n?0!=(this.items&1<<i):(n--,0!=((this.additionalItems[n]||0)&1<<(31&i)))}merge(t){let i=this.items|t.items;if(this.additionalItems===HR&&t.additionalItems===HR)return i===this.items?this:i===t.items?t:e.create(i,HR);let n=[];for(let e=0;e<Math.max(this.additionalItems.length,t.additionalItems.length);e++){let i=this.additionalItems[e]||0,s=t.additionalItems[e]||0;n.push(i|s)}return e.create(i,n)}intersects(e){if(0!==(this.items&e.items))return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(0!==(this.additionalItems[t]&e.additionalItems[t]))return!0;return!1}equals(e){if(this.items!==e.items||this.additionalItems.length!==e.additionalItems.length)return!1;for(let t=0;t<this.additionalItems.length;t++)if(this.additionalItems[t]!==e.additionalItems[t])return!1;return!0}},{_:Ot.cache=Array(129)},{_:Ot.empty=Ot.create(0,HR)},Ot),VR={getKey:e=>e},zR=class{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return void 0===t&&(t=this.items.size,this.items.set(e,t)),t}reverseLookup(e){var t;return null===(t=[...this.items].find(t=>{let[i,n]=t;return n===e}))||void 0===t?void 0:t[0]}reverseLookupSet(e){let t=[];for(let[i]of this.items)e.has(i,this)&&t.push(i);return t}keys(){return this.items.keys()}};!function(e){e[e.Text=0]="Text",e[e.Bracket=1]="Bracket",e[e.Pair=2]="Pair",e[e.UnexpectedClosingBracket=3]="UnexpectedClosingBracket",e[e.List=4]="List"}(UR||(UR={}));var KR,qR=class{get length(){return this._length}constructor(e){this._length=e}},GR=class e extends qR{static create(t,i,n){let s=t.length;return i&&(s=LR(s,i.length)),n&&(s=LR(s,n.length)),new e(s,t,i,n,i?i.missingOpeningBracketIds:WR.getEmpty())}get kind(){return UR.Pair}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw Error("Invalid child index")}get children(){let e=[];return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}constructor(e,t,i,n,s){super(e),this.openingBracket=t,this.child=i,this.closingBracket=n,this.missingOpeningBracketIds=s}canBeReused(e){return!(null===this.closingBracket||e.intersects(this.missingOpeningBracketIds))}flattenLists(){return e.create(this.openingBracket.flattenLists(),this.child&&this.child.flattenLists(),this.closingBracket&&this.closingBracket.flattenLists())}deepClone(){return new e(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(LR(e,this.openingBracket.length),t):2**53-1}},jR=class e extends qR{static create23(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=e.length,r=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw Error("Invalid list heights");if(s=LR(s,t.length),r=r.merge(t.missingOpeningBracketIds),i){if(e.listHeight!==i.listHeight)throw Error("Invalid list heights");s=LR(s,i.length),r=r.merge(i.missingOpeningBracketIds)}return n?new QR(s,e.listHeight+1,e,t,i,r):new YR(s,e.listHeight+1,e,t,i,r)}static create(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(0===e.length)return this.getEmpty();{let i=e[0].length,n=e[0].missingOpeningBracketIds;for(let t=1;t<e.length;t++)i=LR(i,e[t].length),n=n.merge(e[t].missingOpeningBracketIds);return t?new XR(i,e[0].listHeight+1,e,n):new $R(i,e[0].listHeight+1,e,n)}}static getEmpty(){return new XR(0,0,[],WR.getEmpty())}get kind(){return UR.List}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}constructor(e,t,i){super(e),this.listHeight=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();let e=this.childrenLength;if(0===e)return;let t=this.getChild(e-1),i=t.kind===UR.List?t.toMutable():t;return t!==i&&this.setChild(e-1,i),i}makeFirstElementMutable(){if(this.throwIfImmutable(),0===this.childrenLength)return;let e=this.getChild(0),t=e.kind===UR.List?e.toMutable():e;return e!==t&&this.setChild(0,t),t}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds)||0===this.childrenLength)return!1;let t=this;for(;t.kind===UR.List;){let e=t.childrenLength;if(0===e)throw new qi;t=t.getChild(e-1)}return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();let e=this.childrenLength,t=this.getChild(0).length,i=this.getChild(0).missingOpeningBracketIds;for(let n=1;n<e;n++){let e=this.getChild(n);t=LR(t,e.length),i=i.merge(e.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}flattenLists(){let t=[];for(let e of this.children){let i=e.flattenLists();i.kind===UR.List?t.push(...i.children):t.push(i)}return e.create(t)}computeMinIndentation(e,t){if(-1!==this.cachedMinIndentation)return this.cachedMinIndentation;let i=2**53-1,n=e;for(let s=0;s<this.childrenLength;s++){let e=this.getChild(s);e&&(i=Math.min(i,e.computeMinIndentation(n,t)),n=LR(n,e.length))}return this.cachedMinIndentation=i,i}},YR=class e extends jR{get childrenLength(){return null===this._item3?2:3}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw Error("Invalid child index")}setChild(e,t){switch(e){case 0:return void(this._item1=t);case 1:return void(this._item2=t);case 2:return void(this._item3=t)}throw Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}constructor(e,t,i,n,s,r){super(e,t,r),this._item1=i,this._item2=n,this._item3=s}deepClone(){return new e(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();let e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();let e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}},QR=class extends YR{toMutable(){return new YR(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw Error("this instance is immutable")}},$R=class e extends jR{get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}constructor(e,t,i,n){super(e,t,n),this._children=i}deepClone(){let t=Array(this._children.length);for(let e=0;e<this._children.length;e++)t[e]=this._children[e].deepClone();return new e(this.length,this.listHeight,t,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();let e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();let e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}},XR=class extends $R{toMutable(){return new $R(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw Error("this instance is immutable")}},ZR=[],JR=class extends qR{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return ZR}flattenLists(){return this}deepClone(){return this}},eM=class extends JR{get kind(){return UR.Text}get missingOpeningBracketIds(){return WR.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){let i=IR(e),n=(0===i.columnCount?i.lineCount:i.lineCount+1)+1,s=function(e){return Math.floor(e/DR)}(LR(e,this.length))+1,r=2**53-1;for(let o=n;o<=s;o++){let e=t.getLineFirstNonWhitespaceColumn(o),i=t.getLineContent(o);if(0===e)continue;let n=fR.visibleColumnFromColumn(i,e,t.getOptions().tabSize);r=Math.min(r,n)}return r}},tM=class e extends JR{static create(t,i,n){return new e(t,i,n)}get kind(){return UR.Bracket}get missingOpeningBracketIds(){return WR.getEmpty()}constructor(e,t,i){super(e),this.bracketInfo=t,this.bracketIds=i}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,t){return 2**53-1}},iM=class extends JR{get kind(){return UR.UnexpectedClosingBracket}constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return 2**53-1}},nM=class e{static fromModelContentChanges(t){return t.map(t=>{let i=dE.lift(t.range);return new e(PR(i.getStartPosition()),PR(i.getEndPosition()),function(e){let t=oa(e);return TR(t.length-1,t[t.length-1].length)}(t.text))}).reverse()}constructor(e,t,i){this.startOffset=e,this.endOffset=t,this.newLength=i}toString(){return"[".concat(IR(this.startOffset),"...").concat(IR(this.endOffset),") -> ").concat(IR(this.newLength))}},sM=class{constructor(e){this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(e=>rM.from(e))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);let t=this.edits[this.nextEditIdx],i=t?this.translateOldToCur(t.offsetObj):null;return null===i?null:FR(e,i)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?TR(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):TR(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){let t=IR(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?TR(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):TR(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){let t=this.edits[this.nextEditIdx],i=this.translateOldToCur(t.endOffsetAfterObj);if(!RR(i,e))break;{this.nextEditIdx++;let e=IR(i),n=IR(this.translateOldToCur(t.endOffsetBeforeObj)),s=e.lineCount-n.lineCount;this.deltaOldToNewLineCount+=s,this.deltaOldToNewColumnCount=(this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0)+(e.columnCount-n.columnCount),this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}}}},rM=class e{static from(t){return new e(t.startOffset,t.endOffset,t.newLength)}constructor(e,t,i){this.endOffsetBeforeObj=IR(t),this.endOffsetAfterObj=IR(LR(e,i)),this.offsetObj=IR(e)}};!function(e){e[e.Text=0]="Text",e[e.OpeningBracket=1]="OpeningBracket",e[e.ClosingBracket=2]="ClosingBracket"}(KR||(KR={}));var oM=class{constructor(e,t,i,n,s){this.length=e,this.kind=t,this.bracketId=i,this.bracketIds=n,this.astNode=s}},aM=class{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new lM(this.textModel,this.bracketTokens),this._offset=0,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return TR(this.textBufferLineCount-1,this.textBufferLastLineLength)}getText(){return this.textModel.getValue()}skip(e){this.didPeek=!1,this._offset=LR(this._offset,e);let t=IR(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=LR(this._offset,e.length)),e}peek(){return this.didPeek||(this.didPeek=(this.peeked=this.reader.read(),!0)),this.peeked}},lM=class{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,null!==this.line&&(this.lineTokenOffset=0===this.lineCharOffset?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){let e=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=e.length,e}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;null===this.line&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=0===this.lineCharOffset?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));let e=this.lineIdx,t=this.lineCharOffset,i=0;for(;;){let n=this.lineTokens,s=n.getCount(),r=null;if(this.lineTokenOffset<s){let o=n.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<s&&o===n.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;let a=Zp.getTokenType(o)===$p.Other,l=Zp.containsBalancedBrackets(o),h=n.getEndOffset(this.lineTokenOffset);if(l&&a&&this.lineCharOffset<h){let e=n.getLanguageId(this.lineTokenOffset),t=this.line.substring(this.lineCharOffset,h),i=this.bracketTokens.getSingleLanguageBracketTokens(e),s=i.regExpGlobal;if(s){s.lastIndex=0;let e=s.exec(t);e&&(r=i.getToken(e[0]),r&&(this.lineCharOffset+=e.index))}}if(i+=h-this.lineCharOffset,r){if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=r;break}return this.lineCharOffset+=xR(r.length),r}this.lineTokenOffset++,this.lineCharOffset=h}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,i+=33,i>1e3))break;if(i>1500)break}let n=function(e,t,i,n){return e===i?TR(0,n-t):TR(i-e,n)}(e,t,this.lineIdx,this.lineCharOffset);return new oM(n,KR.Text,-1,WR.getEmpty(),new eM(n))}},hM=class{constructor(e,t){this.text=e,this._offset=0,this.idx=0;let i,n=t.getRegExpStr(),s=n?RegExp(n+"|\n","gi"):null,r=[],o=0,a=0,l=0,h=0,d=[];for(let g=0;g<60;g++)d.push(new oM(TR(0,g),KR.Text,-1,WR.getEmpty(),new eM(TR(0,g))));let c=[];for(let g=0;g<60;g++)c.push(new oM(TR(1,g),KR.Text,-1,WR.getEmpty(),new eM(TR(1,g))));if(s)for(s.lastIndex=0;null!==(i=s.exec(e));){let e=i.index,n=i[0];if("\n"===n)o++,a=e+1;else{if(l!==e){let t;if(h===o){let i=e-l;if(i<d.length)t=d[i];else{let e=TR(0,i);t=new oM(e,KR.Text,-1,WR.getEmpty(),new eM(e))}}else{let i=o-h,n=e-a;if(1===i&&n<c.length)t=c[n];else{let e=TR(i,n);t=new oM(e,KR.Text,-1,WR.getEmpty(),new eM(e))}}r.push(t)}r.push(t.getToken(n)),l=e+n.length,h=o}}let u=e.length;if(l!==u){let e=h===o?TR(0,u-l):TR(o-h,u-a);r.push(new oM(e,KR.Text,-1,WR.getEmpty(),new eM(e)))}this.length=TR(o,u-a),this.tokens=r}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new zi}getText(){return this.text}},dM=class e{static createFromLanguage(t,i){function n(e){return i.getKey("".concat(e.languageId,":::").concat(e.bracketText))}let s=new Map;for(let e of t.bracketsNew.openingBrackets){let t=TR(0,e.bracketText.length),i=n(e),r=WR.getEmpty().add(i,VR);s.set(e.bracketText,new oM(t,KR.OpeningBracket,i,r,tM.create(t,e,r)))}for(let e of t.bracketsNew.closingBrackets){let t=TR(0,e.bracketText.length),i=WR.getEmpty(),r=e.getOpeningBrackets();for(let e of r)i=i.add(n(e),VR);s.set(e.bracketText,new oM(t,KR.ClosingBracket,n(r[0]),i,tM.create(t,e,i)))}return new e(s)}constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}getRegExpStr(){if(this.isEmpty)return null;{let e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(e=>function(e){let t=sa(e);return/^[\w ]+/.test(e)&&(t="\\b".concat(t)),/[\w ]+$/.test(e)&&(t="".concat(t,"\\b")),t}(e)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){let e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(let[t,i]of this.map)if(i.kind===KR.ClosingBracket&&i.bracketIds.intersects(e))return t}get isEmpty(){return 0===this.map.size}};var cM=class{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=dM.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}getToken(e,t){return this.getSingleLanguageBracketTokens(t).getToken(e)}};function uM(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(0===e.length)return null;if(1===e.length)return e[0];let i=e.length;for(;i>3;){let n=i>>1;for(let s=0;s<n;s++){let n=s<<1;e[s]=jR.create23(e[n],e[n+1],n+3===i?e[n+2]:null,t)}i=n}return jR.create23(e[0],e[1],i>=3?e[2]:null,t)}function gM(e,t){return Math.abs(e.listHeight-t.listHeight)}function pM(e,t){return e.listHeight===t.listHeight?jR.create23(e,t,null,!1):e.listHeight>t.listHeight?function(e,t){e=e.toMutable();let i,n=e,s=[];for(;;){if(t.listHeight===n.listHeight){i=t;break}if(n.kind!==UR.List)throw Error("unexpected");s.push(n),n=n.makeLastElementMutable()}for(let r=s.length-1;r>=0;r--){let e=s[r];i?e.childrenLength>=3?i=jR.create23(e.unappendChild(),i,null,!1):(e.appendChildOfSameHeight(i),i=void 0):e.handleChildrenChanged()}return i?jR.create23(e,i,null,!1):e}(e,t):function(e,t){e=e.toMutable();let i=e,n=[];for(;t.listHeight!==i.listHeight;){if(i.kind!==UR.List)throw Error("unexpected");n.push(i),i=i.makeFirstElementMutable()}let s=t;for(let r=n.length-1;r>=0;r--){let e=n[r];s?e.childrenLength>=3?s=jR.create23(s,e.unprependChild(),null,!1):(e.prependChildOfSameHeight(s),s=void 0):e.handleChildrenChanged()}return s?jR.create23(s,e,null,!1):e}(t,e)}var fM=class{constructor(e){this.lastOffset=0,this.nextNodes=[e],this.offsets=[0],this.idxs=[]}readLongestNodeAt(e,t){if(OR(e,this.lastOffset))throw Error("Invalid offset");for(this.lastOffset=e;;){let i=vM(this.nextNodes);if(!i)return;let n=vM(this.offsets);if(OR(e,n))return;if(OR(n,e))if(LR(n,i.length)<=e)this.nextNodeAfterCurrent();else{let e=mM(i);-1===e?this.nextNodeAfterCurrent():(this.nextNodes.push(i.getChild(e)),this.offsets.push(n),this.idxs.push(e))}else{if(t(i))return this.nextNodeAfterCurrent(),i;{let e=mM(i);if(-1===e)return void this.nextNodeAfterCurrent();this.nextNodes.push(i.getChild(e)),this.offsets.push(n),this.idxs.push(e)}}}}nextNodeAfterCurrent(){for(;;){let e=vM(this.offsets),t=vM(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),0===this.idxs.length)break;let i=vM(this.nextNodes),n=mM(i,this.idxs[this.idxs.length-1]);if(-1!==n){this.nextNodes.push(i.getChild(n)),this.offsets.push(LR(e,t.length)),this.idxs[this.idxs.length-1]=n;break}this.idxs.pop()}}};function mM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;for(;;){if(t++,t>=e.childrenLength)return-1;if(e.getChild(t))return t}}function vM(e){return e.length>0?e[e.length-1]:void 0}function _M(e,t,i,n){return new CM(e,t,i,n).parseDocument()}var bM,CM=class{get nodesConstructed(){return this._itemsConstructed}get nodesReused(){return this._itemsFromCache}constructor(e,t,i,n){if(this.tokenizer=e,this.createImmutableLists=n,this._itemsConstructed=0,this._itemsFromCache=0,i&&n)throw Error("Not supported");this.oldNodeReader=i?new fM(i):void 0,this.positionMapper=new sM(t)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(WR.getEmpty(),0);return e||(e=jR.getEmpty()),e}parseList(e,t){let i=[];for(;;){let n=this.tryReadChildFromCache(e);if(!n){let i=this.tokenizer.peek();if(!i||i.kind===KR.ClosingBracket&&i.bracketIds.intersects(e))break;n=this.parseChild(e,t+1)}n.kind===UR.List&&0===n.childrenLength||i.push(n)}return this.oldNodeReader?function(e){if(0===e.length)return null;if(1===e.length)return e[0];let t=0;function i(){if(t>=e.length)return null;let i=t,n=e[i].listHeight;for(t++;t<e.length&&e[t].listHeight===n;)t++;return t-i>=2?uM(0===i&&t===e.length?e:e.slice(i,t),!1):e[i]}let n=i(),s=i();if(!s)return n;for(let r=i();r;r=i())gM(n,s)<=gM(s,r)?(n=pM(n,s),s=r):s=pM(s,r);return pM(n,s)}(i):uM(i,this.createImmutableLists)}tryReadChildFromCache(e){if(this.oldNodeReader){let t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(null===t||!ER(t)){let i=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),i=>!(null!==t&&!OR(i.length,t))&&i.canBeReused(e));if(i)return this._itemsFromCache++,this.tokenizer.skip(i.length),i}}}parseChild(e,t){this._itemsConstructed++;let i=this.tokenizer.read();switch(i.kind){case KR.ClosingBracket:return new iM(i.bracketIds,i.length);case KR.Text:return i.astNode;case KR.OpeningBracket:{if(t>300)return new eM(i.length);let n=e.merge(i.bracketIds),s=this.parseList(n,t+1),r=this.tokenizer.peek();return r&&r.kind===KR.ClosingBracket&&(r.bracketId===i.bracketId||r.bracketIds.intersects(i.bracketIds))?(this.tokenizer.read(),GR.create(i.astNode,s,r.astNode)):GR.create(i.astNode,s,null)}default:throw Error("unexpected")}}};function yM(e,t){if(0===e.length)return t;if(0===t.length)return e;let i=new Jr(SM(e)),n=SM(t);n.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let s=i.dequeue();function r(e){if(void 0===e){let e=i.takeWhile(e=>!0)||[];return s&&e.unshift(s),e}let t=[];for(;s&&!ER(e);){let[n,r]=s.splitAt(e);t.push(n),e=FR(n.lengthAfter,e),s=null!==r&&void 0!==r?r:i.dequeue()}return ER(e)||t.push(new wM(!1,e,e)),t}let o=[];function a(e,t,i){if(o.length>0&&NR(o[o.length-1].endOffset,e)){let e=o[o.length-1];o[o.length-1]=new nM(e.startOffset,t,LR(e.newLength,i))}else o.push({startOffset:e,endOffset:t,newLength:i})}let l=0;for(let h of n){let e=r(h.lengthBefore);if(h.modified){let t=AR(e,e=>e.lengthBefore),i=LR(l,t);a(l,i,h.lengthAfter),l=i}else for(let t of e){let e=l;l=LR(l,t.lengthBefore),t.modified&&a(e,l,t.lengthAfter)}}return o}!function(e){e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed"}(bM||(bM={}));var wM=class e{constructor(e,t,i){this.modified=e,this.lengthBefore=t,this.lengthAfter=i}splitAt(t){let i=FR(t,this.lengthAfter);return NR(i,0)?[this,void 0]:this.modified?[new e(this.modified,this.lengthBefore,t),new e(this.modified,0,i)]:[new e(this.modified,t,t),new e(this.modified,i,i)]}toString(){return"".concat(this.modified?"M":"U",":").concat(IR(this.lengthBefore)," -> ").concat(IR(this.lengthAfter))}};function SM(e){let t=[],i=0;for(let n of e){let e=FR(i,n.startOffset);ER(e)||t.push(new wM(!1,e,e));let s=FR(n.startOffset,n.endOffset);t.push(new wM(!0,s,n.newLength)),i=n.endOffset}return t}var kM=class extends Co{didLanguageChange(e){return this.brackets.didLanguageChange(e)}constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new Ro,this.denseKeyProvider=new zR,this.brackets=new cM(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this.queuedTextEditsForInitialAstWithoutTokens=[],this.queuedTextEdits=[],e.tokenization.hasTokens)e.tokenization.backgroundTokenizationState===bM.Completed?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{let e=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId());this.initialAstWithoutTokens=_M(new hM(this.textModel.getValue(),e),[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===bM.Completed){let e=void 0===this.initialAstWithoutTokens;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens(e){let{ranges:t}=e,i=t.map(e=>new nM(TR(e.fromLineNumber-1,0),TR(e.toLineNumber,0),TR(e.toLineNumber-e.fromLineNumber+1,0)));this.handleEdits(i,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){let t=nM.fromModelContentChanges(e.changes);this.handleEdits(t,!1)}handleEdits(e,t){this.queuedTextEdits=yM(this.queuedTextEdits,e),this.initialAstWithoutTokens&&!t&&(this.queuedTextEditsForInitialAstWithoutTokens=yM(this.queuedTextEditsForInitialAstWithoutTokens,e))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(e,t,i){let n=t;return _M(new aM(this.textModel,this.brackets),e,n,i)}getBracketsInRange(e,t){this.flushQueue();let i=TR(e.startLineNumber-1,e.startColumn-1),n=TR(e.endLineNumber-1,e.endColumn-1);return new eo(e=>{let s=this.initialAstWithoutTokens||this.astWithTokens;TM(s,0,s.length,i,n,e,0,0,new Map,t)})}getBracketPairsInRange(e,t){this.flushQueue();let i=PR(e.getStartPosition()),n=PR(e.getEndPosition());return new eo(e=>{let s=this.initialAstWithoutTokens||this.astWithTokens,r=new IM(e,t,this.textModel);xM(s,0,s.length,i,n,r,0,new Map)})}getFirstBracketAfter(e){this.flushQueue();let t=this.initialAstWithoutTokens||this.astWithTokens;return DM(t,0,t.length,PR(e))}getFirstBracketBefore(e){this.flushQueue();let t=this.initialAstWithoutTokens||this.astWithTokens;return EM(t,0,t.length,PR(e))}};function EM(e,t,i,n){if(e.kind===UR.List||e.kind===UR.Pair){let s=[];for(let n of e.children)i=LR(t,n.length),s.push({nodeOffsetStart:t,nodeOffsetEnd:i}),t=i;for(let t=s.length-1;t>=0;t--){let{nodeOffsetStart:i,nodeOffsetEnd:r}=s[t];if(OR(i,n)){let s=EM(e.children[t],i,r,n);if(s)return s}}return null}if(e.kind===UR.UnexpectedClosingBracket)return null;if(e.kind===UR.Bracket){let n=BR(t,i);return{bracketInfo:e.bracketInfo,range:n}}return null}function DM(e,t,i,n){if(e.kind===UR.List||e.kind===UR.Pair){for(let s of e.children){if(OR(n,i=LR(t,s.length))){let e=DM(s,t,i,n);if(e)return e}t=i}return null}if(e.kind===UR.UnexpectedClosingBracket)return null;if(e.kind===UR.Bracket){let n=BR(t,i);return{bracketInfo:e.bracketInfo,range:n}}return null}function TM(e,t,i,n,s,r,o,a,l,h){let d=arguments.length>10&&void 0!==arguments[10]&&arguments[10];if(o>200)return!0;e:for(;;)switch(e.kind){case UR.List:{let a=e.childrenLength;for(let d=0;d<a;d++){let a=e.getChild(d);if(a){if(i=LR(t,a.length),RR(t,s)&&MR(i,n)){if(MR(i,s)){e=a;continue e}if(!TM(a,t,i,n,s,r,o,0,l,h))return!1}t=i}}return!0}case UR.Pair:{let d=!h||!e.closingBracket||e.closingBracket.bracketInfo.closesColorized(e.openingBracket.bracketInfo),c=0;if(l){let t=l.get(e.openingBracket.text);void 0===t&&(t=0),c=t,d&&(t++,l.set(e.openingBracket.text,t))}let u=e.childrenLength;for(let g=0;g<u;g++){let u=e.getChild(g);if(u){if(i=LR(t,u.length),RR(t,s)&&MR(i,n)){if(MR(i,s)&&u.kind!==UR.Bracket){e=u,d?(o++,a=c+1):a=c;continue e}if((d||u.kind!==UR.Bracket||!e.closingBracket)&&!TM(u,t,i,n,s,r,d?o+1:o,d?c+1:c,l,h,!e.closingBracket))return!1}t=i}}return null!==l&&void 0!==l&&l.set(e.openingBracket.text,c),!0}case UR.UnexpectedClosingBracket:return r(new wR(BR(t,i),o-1,0,!0));case UR.Bracket:return r(new wR(BR(t,i),o-1,a-1,d));case UR.Text:return!0}}var IM=class{constructor(e,t,i){this.push=e,this.includeMinIndentation=t,this.textModel=i}};function xM(e,t,i,n,s,r,o,a){if(o>200)return!0;let l=!0;if(e.kind===UR.Pair){var h;let d=0;if(a){let t=a.get(e.openingBracket.text);void 0===t&&(t=0),d=t,t++,a.set(e.openingBracket.text,t)}let c=LR(t,e.openingBracket.length),u=-1;if(r.includeMinIndentation&&(u=e.computeMinIndentation(t,r.textModel)),l=r.push(new kR(BR(t,i),BR(t,c),e.closingBracket?BR(LR(c,(null===(h=e.child)||void 0===h?void 0:h.length)||0),i):void 0,o,d,e,u)),t=c,l&&e.child){let h=e.child;if(i=LR(t,h.length),RR(t,s)&&MR(i,n)&&(l=xM(h,t,i,n,s,r,o+1,a),!l))return!1}null===a||void 0===a||a.set(e.openingBracket.text,d)}else{let i=t;for(let t of e.children){let e=i;if(i=LR(i,t.length),RR(e,s)&&RR(n,i)&&(l=xM(t,e,i,n,s,r,o,a),!l))return!1}}return l}var LM=class extends Co{get canBuildAST(){return this.textModel.getValueLength()<=5e6}constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new yo),this.onDidChangeEmitter=new Ro,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1}handleLanguageConfigurationServiceChange(e){var t;(!e.languageId||(null===(t=this.bracketPairsTree.value)||void 0===t?void 0:t.object.didLanguageChange(e.languageId)))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){var t;null===(t=this.bracketPairsTree.value)||void 0===t||t.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){var e;null===(e=this.bracketPairsTree.value)||void 0===e||e.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){var t;null===(t=this.bracketPairsTree.value)||void 0===t||t.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){let e=new bo;this.bracketPairsTree.value=function(e,t){return{object:e,dispose:()=>null===t||void 0===t?void 0:t.dispose()}}(e.add(new kM(this.textModel,e=>this.languageConfigurationService.getLanguageConfiguration(e))),e),e.add(this.bracketPairsTree.value.object.onDidChange(e=>this.onDidChangeEmitter.fire(e))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),(null===(t=this.bracketPairsTree.value)||void 0===t?void 0:t.object.getBracketPairsInRange(e,!1))||eo.empty}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),(null===(t=this.bracketPairsTree.value)||void 0===t?void 0:t.object.getBracketPairsInRange(e,!0))||eo.empty}getBracketsInRange(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.bracketsRequested=!0,this.updateBracketPairsTree(),(null===(t=this.bracketPairsTree.value)||void 0===t?void 0:t.object.getBracketsInRange(e,i))||eo.empty}findMatchingBracketUp(e,t,i){let n=this.textModel.validatePosition(t),s=this.textModel.getLanguageIdAtPosition(n.lineNumber,n.column);if(this.canBuildAST){let i=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew.getClosingBracketInfo(e);if(!i)return null;let n=this.getBracketPairsInRange(dE.fromPositions(t,t)).findLast(e=>i.closes(e.openingBracketInfo));return n?n.openingBracketRange:null}{let t=e.toLowerCase(),r=this.languageConfigurationService.getLanguageConfiguration(s).brackets;if(!r)return null;let o=r.textIsBracket[t];return o?FM(this._findMatchingBracketUp(o,n,AM(i))):null}}matchBracket(e,t){if(this.canBuildAST){let t=this.getBracketPairsInRange(dE.fromPositions(e,e)).filter(t=>void 0!==t.closingBracketRange&&(t.openingBracketRange.containsPosition(e)||t.closingBracketRange.containsPosition(e))).findLastMaxBy(Yr(t=>t.openingBracketRange.containsPosition(e)?t.openingBracketRange:t.closingBracketRange,dE.compareRangesUsingStarts));return t?[t.openingBracketRange,t.closingBracketRange]:null}{let i=AM(t);return this._matchBracket(this.textModel.validatePosition(e),i)}}_establishBracketSearchOffsets(e,t,i,n){let s=t.getCount(),r=t.getLanguageId(n),o=Math.max(0,e.column-1-i.maxBracketLength);for(let l=n-1;l>=0;l--){let e=t.getEndOffset(l);if(e<=o)break;if(bR(t.getStandardTokenType(l))||t.getLanguageId(l)!==r){o=e;break}}let a=Math.min(t.getLineContent().length,e.column-1+i.maxBracketLength);for(let l=n+1;l<s;l++){let e=t.getStartOffset(l);if(e>=a)break;if(bR(t.getStandardTokenType(l))||t.getLanguageId(l)!==r){a=e;break}}return{searchStartOffset:o,searchEndOffset:a}}_matchBracket(e,t){let i=e.lineNumber,n=this.textModel.tokenization.getLineTokens(i),s=this.textModel.getLineContent(i),r=n.findTokenIndexAtOffset(e.column-1);if(r<0)return null;let o=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId(r)).brackets;if(o&&!bR(n.getStandardTokenType(r))){let{searchStartOffset:a,searchEndOffset:l}=this._establishBracketSearchOffsets(e,n,o,r),h=null;for(;;){let n=yR.findNextBracketInRange(o.forwardRegex,i,s,a,l);if(!n)break;if(n.startColumn<=e.column&&e.column<=n.endColumn){let e=s.substring(n.startColumn-1,n.endColumn-1).toLowerCase(),i=this._matchFoundBracket(n,o.textIsBracket[e],o.textIsOpenBracket[e],t);if(i){if(i instanceof NM)return null;h=i}}a=n.endColumn-1}if(h)return h}if(r>0&&n.getStartOffset(r)===e.column-1){let o=r-1,a=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId(o)).brackets;if(a&&!bR(n.getStandardTokenType(o))){let{searchStartOffset:r,searchEndOffset:l}=this._establishBracketSearchOffsets(e,n,a,o),h=yR.findPrevBracketInRange(a.reversedRegex,i,s,r,l);if(h&&h.startColumn<=e.column&&e.column<=h.endColumn){let e=s.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),i=this._matchFoundBracket(h,a.textIsBracket[e],a.textIsOpenBracket[e],t);if(i)return i instanceof NM?null:i}}}return null}_matchFoundBracket(e,t,i,n){if(!t)return null;let s=i?this._findMatchingBracketDown(t,e.getEndPosition(),n):this._findMatchingBracketUp(t,e.getStartPosition(),n);return s?s instanceof NM?s:[e,s]:null}_findMatchingBracketUp(e,t,i){let n=e.languageId,s=e.reversedRegex,r=-1,o=0,a=(t,n,a,l)=>{for(;;){if(i&&++o%100==0&&!i())return NM.INSTANCE;let h=yR.findPrevBracketInRange(s,t,n,a,l);if(!h)break;let d=n.substring(h.startColumn-1,h.endColumn-1).toLowerCase();if(e.isOpen(d)?r++:e.isClose(d)&&r--,0===r)return h;l=h.startColumn-1}return null};for(let l=t.lineNumber;l>=1;l--){let e=this.textModel.tokenization.getLineTokens(l),i=e.getCount(),s=this.textModel.getLineContent(l),r=i-1,o=s.length,h=s.length;l===t.lineNumber&&(r=e.findTokenIndexAtOffset(t.column-1),o=t.column-1,h=t.column-1);let d=!0;for(;r>=0;r--){let t=e.getLanguageId(r)===n&&!bR(e.getStandardTokenType(r));if(t)d?o=e.getStartOffset(r):(o=e.getStartOffset(r),h=e.getEndOffset(r));else if(d&&o!==h){let e=a(l,s,o,h);if(e)return e}d=t}if(d&&o!==h){let e=a(l,s,o,h);if(e)return e}}return null}_findMatchingBracketDown(e,t,i){let n=e.languageId,s=e.forwardRegex,r=1,o=0,a=(t,n,a,l)=>{for(;;){if(i&&++o%100==0&&!i())return NM.INSTANCE;let h=yR.findNextBracketInRange(s,t,n,a,l);if(!h)break;let d=n.substring(h.startColumn-1,h.endColumn-1).toLowerCase();if(e.isOpen(d)?r++:e.isClose(d)&&r--,0===r)return h;a=h.endColumn-1}return null},l=this.textModel.getLineCount();for(let h=t.lineNumber;h<=l;h++){let e=this.textModel.tokenization.getLineTokens(h),i=e.getCount(),s=this.textModel.getLineContent(h),r=0,o=0,l=0;h===t.lineNumber&&(r=e.findTokenIndexAtOffset(t.column-1),o=t.column-1,l=t.column-1);let d=!0;for(;r<i;r++){let t=e.getLanguageId(r)===n&&!bR(e.getStandardTokenType(r));if(t)d||(o=e.getStartOffset(r)),l=e.getEndOffset(r);else if(d&&o!==l){let e=a(h,s,o,l);if(e)return e}d=t}if(d&&o!==l){let e=a(h,s,o,l);if(e)return e}}return null}findPrevBracket(e){var t;let i=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),(null===(t=this.bracketPairsTree.value)||void 0===t?void 0:t.object.getFirstBracketBefore(i))||null;let n=null,s=null,r=null;for(let o=i.lineNumber;o>=1;o--){let e=this.textModel.tokenization.getLineTokens(o),t=e.getCount(),a=this.textModel.getLineContent(o),l=t-1,h=a.length,d=a.length;if(o===i.lineNumber){l=e.findTokenIndexAtOffset(i.column-1),h=i.column-1,d=i.column-1;let t=e.getLanguageId(l);n!==t&&(n=t,s=this.languageConfigurationService.getLanguageConfiguration(n).brackets,r=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew)}let c=!0;for(;l>=0;l--){let t=e.getLanguageId(l);if(n!==t){if(s&&r&&c&&h!==d){let e=yR.findPrevBracketInRange(s.reversedRegex,o,a,h,d);if(e)return this._toFoundBracket(r,e);c=!1}n=t,s=this.languageConfigurationService.getLanguageConfiguration(n).brackets,r=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew}let i=!!s&&!bR(e.getStandardTokenType(l));if(i)c?h=e.getStartOffset(l):(h=e.getStartOffset(l),d=e.getEndOffset(l));else if(r&&s&&c&&h!==d){let e=yR.findPrevBracketInRange(s.reversedRegex,o,a,h,d);if(e)return this._toFoundBracket(r,e)}c=i}if(r&&s&&c&&h!==d){let e=yR.findPrevBracketInRange(s.reversedRegex,o,a,h,d);if(e)return this._toFoundBracket(r,e)}}return null}findNextBracket(e){var t;let i=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),(null===(t=this.bracketPairsTree.value)||void 0===t?void 0:t.object.getFirstBracketAfter(i))||null;let n=this.textModel.getLineCount(),s=null,r=null,o=null;for(let a=i.lineNumber;a<=n;a++){let e=this.textModel.tokenization.getLineTokens(a),t=e.getCount(),n=this.textModel.getLineContent(a),l=0,h=0,d=0;if(a===i.lineNumber){l=e.findTokenIndexAtOffset(i.column-1),h=i.column-1,d=i.column-1;let t=e.getLanguageId(l);s!==t&&(s=t,r=this.languageConfigurationService.getLanguageConfiguration(s).brackets,o=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew)}let c=!0;for(;l<t;l++){let t=e.getLanguageId(l);if(s!==t){if(o&&r&&c&&h!==d){let e=yR.findNextBracketInRange(r.forwardRegex,a,n,h,d);if(e)return this._toFoundBracket(o,e);c=!1}s=t,r=this.languageConfigurationService.getLanguageConfiguration(s).brackets,o=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew}let i=!!r&&!bR(e.getStandardTokenType(l));if(i)c||(h=e.getStartOffset(l)),d=e.getEndOffset(l);else if(o&&r&&c&&h!==d){let e=yR.findNextBracketInRange(r.forwardRegex,a,n,h,d);if(e)return this._toFoundBracket(o,e)}c=i}if(o&&r&&c&&h!==d){let e=yR.findNextBracketInRange(r.forwardRegex,a,n,h,d);if(e)return this._toFoundBracket(o,e)}}return null}findEnclosingBrackets(e,t){let i=this.textModel.validatePosition(e);if(this.canBuildAST){let e=dE.fromPositions(i),t=this.getBracketPairsInRange(dE.fromPositions(i,i)).findLast(t=>void 0!==t.closingBracketRange&&t.range.strictContainsRange(e));return t?[t.openingBracketRange,t.closingBracketRange]:null}let n=AM(t),s=this.textModel.getLineCount(),r=new Map,o=[],a=(e,t)=>{if(!r.has(e)){let i=[];for(let e=0,n=t?t.brackets.length:0;e<n;e++)i[e]=0;r.set(e,i)}o=r.get(e)},l=0,h=(e,t,i,s,r)=>{for(;;){if(n&&++l%100==0&&!n())return NM.INSTANCE;let a=yR.findNextBracketInRange(e.forwardRegex,t,i,s,r);if(!a)break;let h=i.substring(a.startColumn-1,a.endColumn-1).toLowerCase(),d=e.textIsBracket[h];if(d&&(d.isOpen(h)?o[d.index]++:d.isClose(h)&&o[d.index]--,-1===o[d.index]))return this._matchFoundBracket(a,d,!1,n);s=a.endColumn-1}return null},d=null,c=null;for(let u=i.lineNumber;u<=s;u++){let e=this.textModel.tokenization.getLineTokens(u),t=e.getCount(),n=this.textModel.getLineContent(u),s=0,r=0,o=0;if(u===i.lineNumber){s=e.findTokenIndexAtOffset(i.column-1),r=i.column-1,o=i.column-1;let t=e.getLanguageId(s);d!==t&&(d=t,c=this.languageConfigurationService.getLanguageConfiguration(d).brackets,a(d,c))}let l=!0;for(;s<t;s++){let t=e.getLanguageId(s);if(d!==t){if(c&&l&&r!==o){let e=h(c,u,n,r,o);if(e)return FM(e);l=!1}d=t,c=this.languageConfigurationService.getLanguageConfiguration(d).brackets,a(d,c)}let i=!!c&&!bR(e.getStandardTokenType(s));if(i)l||(r=e.getStartOffset(s)),o=e.getEndOffset(s);else if(c&&l&&r!==o){let e=h(c,u,n,r,o);if(e)return FM(e)}l=i}if(c&&l&&r!==o){let e=h(c,u,n,r,o);if(e)return FM(e)}}return null}_toFoundBracket(e,t){if(!t)return null;let i=this.textModel.getValueInRange(t);i=i.toLowerCase();let n=e.getBracketInfo(i);return n?{range:t,bracketInfo:n}:null}};function AM(e){if(void 0===e)return()=>!0;{let t=Date.now();return()=>Date.now()-t<=e}}var NM=({_:(Rt=class{constructor(){this._searchCanceledBrand=void 0}}).INSTANCE=new Rt},Rt);function FM(e){return e instanceof NM?null:e}var OM=class extends Co{constructor(e){super(),this.textModel=e,this.colorProvider=new RM,this.onDidChangeEmitter=new Ro,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange(e=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,i,n){return n||void 0===t||!this.colorizationOptions.enabled?[]:this.textModel.bracketPairs.getBracketsInRange(e,!0).map(e=>({id:"bracket".concat(e.range.toString(),"-").concat(e.nestingLevel),options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(e,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:e.range})).toArray()}getAllDecorations(e,t){return void 0!==e&&this.colorizationOptions.enabled?this.getDecorationsInRange(new dE(1,1,this.textModel.getLineCount(),1),e,t):[]}},RM=class{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return"bracket-highlighting-".concat(e%30)}};du((e,t)=>{let i=[ku,Eu,Du,Tu,Iu,xu],n=new RM;t.addRule(".monaco-editor .".concat(n.unexpectedClosingBracketClassName," { color: ").concat(e.getColor(Lu),"; }"));let s=i.map(t=>e.getColor(t)).filter(e=>!!e).filter(e=>!e.isTransparent());for(let r=0;r<30;r++){let e=s[r%s.length];t.addRule(".monaco-editor .".concat(n.getInlineClassNameOfLevel(r)," { color: ").concat(e,"; }"))}});var MM,PM=class extends Co{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw Error("TextModelPart is disposed!")}};!function(e){e[e.Disabled=0]="Disabled",e[e.EnabledForActive=1]="EnabledForActive",e[e.Enabled=2]="Enabled"}(MM||(MM={}));var BM=class{constructor(e,t,i,n,s,r){if(this.visibleColumn=e,this.column=t,this.className=i,this.horizontalLine=n,this.forWrappedLinesAfterColumn=s,this.forWrappedLinesBeforeOrAtColumn=r,-1!==e==(-1!==t))throw Error()}},UM=class{constructor(e,t){this.top=e,this.endColumn=t}},HM=class extends PM{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return function(e,t){let i=0,n=0,s=e.length;for(;n<s;){let s=e.charCodeAt(n);if(s===En.Space)i++;else{if(s!==En.Tab)break;i=i-i%t+t}n++}return n===s?-1:i}(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,i){this.assertNotDisposed();let n=this.textModel.getLineCount();if(e<1||e>n)throw new qi("Illegal value for lineNumber");let s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=!(!s||!s.offSide),o=-2,a=-1,l=-2,h=-1,d=e=>{if(-1!==o&&(-2===o||o>e-1)){o=-1,a=-1;for(let t=e-2;t>=0;t--){let e=this._computeIndentLevel(t);if(e>=0){o=t,a=e;break}}}if(-2===l){l=-1,h=-1;for(let t=e;t<n;t++){let e=this._computeIndentLevel(t);if(e>=0){l=t,h=e;break}}}},c=-2,u=-1,g=-2,p=-1,f=e=>{if(-2===c){c=-1,u=-1;for(let t=e-2;t>=0;t--){let e=this._computeIndentLevel(t);if(e>=0){c=t,u=e;break}}}if(-1!==g&&(-2===g||g<e-1)){g=-1,p=-1;for(let t=e;t<n;t++){let e=this._computeIndentLevel(t);if(e>=0){g=t,p=e;break}}}},m=0,v=!0,_=0,b=!0,C=0,y=0;for(let w=0;v||b;w++){let s=e-w,o=e+w;w>1&&(s<1||s<t)&&(v=!1),w>1&&(o>n||o>i)&&(b=!1),w>5e4&&(v=!1,b=!1);let g=-1;if(v&&s>=1){let e=this._computeIndentLevel(s-1);e>=0?(l=s-1,h=e,g=Math.ceil(e/this.textModel.getOptions().indentSize)):(d(s),g=this._getIndentLevelForWhitespaceLine(r,a,h))}let S=-1;if(b&&o<=n){let e=this._computeIndentLevel(o-1);e>=0?(c=o-1,u=e,S=Math.ceil(e/this.textModel.getOptions().indentSize)):(f(o),S=this._getIndentLevelForWhitespaceLine(r,u,p))}if(0!==w){if(1===w){if(o<=n&&S>=0&&y+1===S){v=!1,m=o,_=o,C=S;continue}if(s>=1&&g>=0&&g-1===y){b=!1,m=s,_=s,C=g;continue}if(m=e,_=e,C=y,0===C)return{startLineNumber:m,endLineNumber:_,indent:C}}v&&(g>=C?m=s:v=!1),b&&(S>=C?_=o:b=!1)}else y=g}return{startLineNumber:m,endLineNumber:_,indent:C}}getLinesBracketGuides(e,t,i,n){var s;let r=[];for(let d=e;d<=t;d++)r.push([]);let o,a=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new dE(e,1,t,this.textModel.getLineMaxColumn(t))).toArray();i&&a.length>0&&(o=null===(s=Ar((e<=i.lineNumber&&i.lineNumber<=t?a:this.textModel.bracketPairs.getBracketPairsInRange(dE.fromPositions(i)).toArray()).filter(e=>dE.strictContainsPosition(e.range,i)),e=>!0))||void 0===s?void 0:s.range);let l=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,h=new WM;for(let d of a){if(!d.closingBracketRange)continue;let i=o&&d.range.equalsRange(o);if(!i&&!n.includeInactive)continue;let s=h.getInlineClassName(d.nestingLevel,d.nestingLevelOfEqualBracketType,l)+(n.highlightActive&&i?" "+h.activeClassName:""),a=d.openingBracketRange.getStartPosition(),c=d.closingBracketRange.getStartPosition(),u=n.horizontalGuides===MM.Enabled||n.horizontalGuides===MM.EnabledForActive&&i;if(d.range.startLineNumber===d.range.endLineNumber){u&&r[d.range.startLineNumber-e].push(new BM(-1,d.openingBracketRange.getEndPosition().column,s,new UM(!1,c.column),-1,-1));continue}let g=this.getVisibleColumnFromPosition(c),p=this.getVisibleColumnFromPosition(d.openingBracketRange.getStartPosition()),f=Math.min(p,g,d.minVisibleColumnIndentation+1),m=!1;aa(this.textModel.getLineContent(d.closingBracketRange.startLineNumber))<d.closingBracketRange.startColumn-1&&(m=!0);let v=Math.max(a.lineNumber,e),_=Math.min(c.lineNumber,t),b=m?1:0;for(let t=v;t<_+b;t++)r[t-e].push(new BM(f,-1,s,null,t===a.lineNumber?a.column:-1,t===c.lineNumber?c.column:-1));u&&(a.lineNumber>=e&&p>f&&r[a.lineNumber-e].push(new BM(f,-1,s,new UM(!1,a.column),-1,-1)),c.lineNumber<=t&&g>f&&r[c.lineNumber-e].push(new BM(f,-1,s,new UM(!m,c.column),-1,-1)))}for(let d of r)d.sort((e,t)=>e.visibleColumn-t.visibleColumn);return r}getVisibleColumnFromPosition(e){return fR.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();let i=this.textModel.getLineCount();if(e<1||e>i)throw Error("Illegal value for startLineNumber");if(t<1||t>i)throw Error("Illegal value for endLineNumber");let n=this.textModel.getOptions(),s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=!(!s||!s.offSide),o=Array(t-e+1),a=-2,l=-1,h=-2,d=-1;for(let c=e;c<=t;c++){let t=c-e,s=this._computeIndentLevel(c-1);if(s>=0)a=c-1,l=s,o[t]=Math.ceil(s/n.indentSize);else{if(-2===a){a=-1,l=-1;for(let e=c-2;e>=0;e--){let t=this._computeIndentLevel(e);if(t>=0){a=e,l=t;break}}}if(-1!==h&&(-2===h||h<c-1)){h=-1,d=-1;for(let e=c;e<i;e++){let t=this._computeIndentLevel(e);if(t>=0){h=e,d=t;break}}}o[t]=this._getIndentLevelForWhitespaceLine(r,l,d)}}return o}_getIndentLevelForWhitespaceLine(e,t,i){let n=this.textModel.getOptions();return-1===t||-1===i?0:t<i?1+Math.floor(t/n.indentSize):t===i||e?Math.ceil(i/n.indentSize):1+Math.floor(i/n.indentSize)}},WM=class{constructor(){this.activeClassName="indent-active"}getInlineClassName(e,t,i){return this.getInlineClassNameOfLevel(i?t:e)}getInlineClassNameOfLevel(e){return"bracket-indent-guide lvl-".concat(e%30)}},VM=class{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}};function zM(e,t,i,n,s){let r;for(s.spacesDiff=0,s.looksLikeAlignment=!1,r=0;r<t&&r<n&&e.charCodeAt(r)===i.charCodeAt(r);r++);let o=0,a=0;for(let u=r;u<t;u++)e.charCodeAt(u)===En.Space?o++:a++;let l=0,h=0;for(let u=r;u<n;u++)i.charCodeAt(u)===En.Space?l++:h++;if(o>0&&a>0||l>0&&h>0)return;let d=Math.abs(a-h),c=Math.abs(o-l);if(0===d)return s.spacesDiff=c,void(c>0&&0<=l-1&&l-1<e.length&&l<i.length&&i.charCodeAt(l)!==En.Space&&e.charCodeAt(l-1)===En.Space&&e.charCodeAt(e.length-1)===En.Comma&&(s.looksLikeAlignment=!0));c%d!==0||(s.spacesDiff=c/d)}function KM(e,t,i){let n=Math.min(e.getLineCount(),1e4),s=0,r=0,o="",a=0,l=[2,4,6,8,3,5,7],h=[0,0,0,0,0,0,0,0,0],d=new VM;for(let g=1;g<=n;g++){let n=e.getLineLength(g),l=e.getLineContent(g),c=n<=65536,u=!1,p=0,f=0,m=0;for(let t=0,i=n;t<i;t++){let i=c?l.charCodeAt(t):e.getLineCharCode(g,t);if(i===En.Tab)m++;else{if(i!==En.Space){u=!0,p=t;break}f++}}if(!u||(m>0?s++:f>1&&r++,zM(o,a,l,p,d),d.looksLikeAlignment&&(!i||t!==d.spacesDiff)))continue;let v=d.spacesDiff;v<=8&&h[v]++,o=l,a=p}let c=i;s!==r&&(c=s<r);let u=t;if(c){let e=c?0:.1*n;l.forEach(t=>{let i=h[t];i>e&&(e=i,u=t)}),4===u&&h[4]>0&&h[2]>0&&h[2]>=h[4]/2&&(u=2)}return{insertSpaces:c,tabSize:u}}var qM,GM=class{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==jM)return YM(this.right);let e=this;for(;e.parent!==jM&&e.parent.left!==e;)e=e.parent;return e.parent===jM?jM:e.parent}prev(){if(this.left!==jM)return QM(this.left);let e=this;for(;e.parent!==jM&&e.parent.right!==e;)e=e.parent;return e.parent===jM?jM:e.parent}detach(){this.parent=null,this.left=null,this.right=null}};!function(e){e[e.Black=0]="Black",e[e.Red=1]="Red"}(qM||(qM={}));var jM=new GM(null,qM.Black);function YM(e){for(;e.left!==jM;)e=e.left;return e}function QM(e){for(;e.right!==jM;)e=e.right;return e}function $M(e){return e===jM?0:e.size_left+e.piece.length+$M(e.right)}function XM(e){return e===jM?0:e.lf_left+e.piece.lineFeedCnt+XM(e.right)}function ZM(){jM.parent=jM}function JM(e,t){let i=t.right;i.size_left+=t.size_left+(t.piece?t.piece.length:0),i.lf_left+=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),t.right=i.left,i.left!==jM&&(i.left.parent=t),i.parent=t.parent,t.parent===jM?e.root=i:t.parent.left===t?t.parent.left=i:t.parent.right=i,i.left=t,t.parent=i}function eP(e,t){let i=t.left;t.left=i.right,i.right!==jM&&(i.right.parent=t),i.parent=t.parent,t.size_left-=i.size_left+(i.piece?i.piece.length:0),t.lf_left-=i.lf_left+(i.piece?i.piece.lineFeedCnt:0),t.parent===jM?e.root=i:t===t.parent.right?t.parent.right=i:t.parent.left=i,i.right=t,t.parent=i}function tP(e,t){let i,n;if(t.left===jM?(n=t,i=n.right):t.right===jM?(n=t,i=n.left):(n=YM(t.right),i=n.right),n===e.root)return e.root=i,i.color=qM.Black,t.detach(),ZM(),void(e.root.parent=jM);let s,r=n.color===qM.Red;if(n===n.parent.left?n.parent.left=i:n.parent.right=i,n===t?(i.parent=n.parent,sP(e,i)):(n.parent===t?i.parent=n:i.parent=n.parent,sP(e,i),n.left=t.left,n.right=t.right,n.parent=t.parent,n.color=t.color,t===e.root?e.root=n:t===t.parent.left?t.parent.left=n:t.parent.right=n,n.left!==jM&&(n.left.parent=n),n.right!==jM&&(n.right.parent=n),n.size_left=t.size_left,n.lf_left=t.lf_left,sP(e,n)),t.detach(),i.parent.left===i){let t=$M(i),n=XM(i);if(t!==i.parent.size_left||n!==i.parent.lf_left){let s=t-i.parent.size_left,r=n-i.parent.lf_left;i.parent.size_left=t,i.parent.lf_left=n,nP(e,i.parent,s,r)}}if(sP(e,i.parent),r)ZM();else{for(;i!==e.root&&i.color===qM.Black;)i===i.parent.left?(s=i.parent.right,s.color===qM.Red&&(s.color=qM.Black,i.parent.color=qM.Red,JM(e,i.parent),s=i.parent.right),s.left.color===qM.Black&&s.right.color===qM.Black?(s.color=qM.Red,i=i.parent):(s.right.color===qM.Black&&(s.left.color=qM.Black,s.color=qM.Red,eP(e,s),s=i.parent.right),s.color=i.parent.color,i.parent.color=qM.Black,s.right.color=qM.Black,JM(e,i.parent),i=e.root)):(s=i.parent.left,s.color===qM.Red&&(s.color=qM.Black,i.parent.color=qM.Red,eP(e,i.parent),s=i.parent.left),s.left.color===qM.Black&&s.right.color===qM.Black?(s.color=qM.Red,i=i.parent):(s.left.color===qM.Black&&(s.right.color=qM.Black,s.color=qM.Red,JM(e,s),s=i.parent.left),s.color=i.parent.color,i.parent.color=qM.Black,s.left.color=qM.Black,eP(e,i.parent),i=e.root));i.color=qM.Black,ZM()}}function iP(e,t){for(sP(e,t);t!==e.root&&t.parent.color===qM.Red;)if(t.parent===t.parent.parent.left){let i=t.parent.parent.right;i.color===qM.Red?(t.parent.color=qM.Black,i.color=qM.Black,t.parent.parent.color=qM.Red,t=t.parent.parent):(t===t.parent.right&&JM(e,t=t.parent),t.parent.color=qM.Black,t.parent.parent.color=qM.Red,eP(e,t.parent.parent))}else{let i=t.parent.parent.left;i.color===qM.Red?(t.parent.color=qM.Black,i.color=qM.Black,t.parent.parent.color=qM.Red,t=t.parent.parent):(t===t.parent.left&&eP(e,t=t.parent),t.parent.color=qM.Black,t.parent.parent.color=qM.Red,JM(e,t.parent.parent))}e.root.color=qM.Black}function nP(e,t,i,n){for(;t!==e.root&&t!==jM;)t.parent.left===t&&(t.parent.size_left+=i,t.parent.lf_left+=n),t=t.parent}function sP(e,t){let i=0,n=0;if(t!==e.root){for(;t!==e.root&&t===t.parent.right;)t=t.parent;if(t!==e.root)for(i=$M((t=t.parent).left)-t.size_left,n=XM(t.left)-t.lf_left,t.size_left+=i,t.lf_left+=n;t!==e.root&&(0!==i||0!==n);)t.parent.left===t&&(t.parent.size_left+=i,t.parent.lf_left+=n),t=t.parent}}jM.parent=jM,jM.left=jM,jM.right=jM,jM.color=qM.Black;var rP,oP,aP={DateTimeFormat:(e,t)=>new Jo(()=>{try{return new Intl.DateTimeFormat(e,t)}catch(i){return new Intl.DateTimeFormat(void 0,t)}}),Collator:(e,t)=>new Jo(()=>{try{return new Intl.Collator(e,t)}catch(i){return new Intl.Collator(void 0,t)}}),Segmenter:(e,t)=>new Jo(()=>{try{return new Intl.Segmenter(e,t)}catch(i){return new Intl.Segmenter(void 0,t)}}),Locale:(e,t)=>new Jo(()=>{try{return new Intl.Locale(e,t)}catch(i){return new Intl.Locale("en",t)}}),NumberFormat:(e,t)=>new Jo(()=>{try{return new Intl.NumberFormat(e,t)}catch(i){return new Intl.NumberFormat(void 0,t)}})},lP=class e{constructor(t){let i=ea(t);this._defaultValue=i,this._asciiMap=e._createAsciiMap(i),this._map=new Map}static _createAsciiMap(e){let t=new Uint8Array(256);return t.fill(e),t}set(e,t){let i=ea(t);e>=0&&e<256?this._asciiMap[e]=i:this._map.set(e,i)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}};!function(e){e[e.False=0]="False",e[e.True=1]="True"}(rP||(rP={})),function(e){e[e.Regular=0]="Regular",e[e.Whitespace=1]="Whitespace",e[e.WordSeparator=2]="WordSeparator"}(oP||(oP={}));var hP=class extends lP{constructor(e,t){super(oP.Regular),this._segmenter=null,this._cachedLine=null,this._cachedSegments=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this._segmenter=aP.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this._segmenter=null;for(let i=0,n=e.length;i<n;i++)this.set(e.charCodeAt(i),oP.WordSeparator);this.set(En.Space,oP.Whitespace),this.set(En.Tab,oP.Whitespace)}findPrevIntlWordBeforeOrAtOffset(e,t){let i=null;for(let n of this._getIntlSegmenterWordsOnLine(e)){if(n.index>t)break;i=n}return i}findNextIntlWordAtOrAfterOffset(e,t){for(let i of this._getIntlSegmenterWordsOnLine(e))if(!(i.index<t))return i;return null}_getIntlSegmenterWordsOnLine(e){return this._segmenter?(this._cachedLine===e||(this._cachedLine=e,this._cachedSegments=this._filterWordSegments(this._segmenter.value.segment(e))),this._cachedSegments):[]}_filterWordSegments(e){let t=[];for(let i of e)this._isWordLike(i)&&t.push(i);return t}_isWordLike(e){return!!e.isWordLike}},dP=new ho(10);var cP=class{constructor(e,t,i,n){this.searchString=e,this.isRegex=t,this.matchCase=i,this.wordSeparators=n}parseSearchRequest(){if(""===this.searchString)return null;let e;e=this.isRegex?function(e){if(!e||0===e.length)return!1;for(let t=0,i=e.length;t<i;t++){let n=e.charCodeAt(t);if(n===En.LineFeed)return!0;if(n===En.Backslash){if(t++,t>=i)break;let n=e.charCodeAt(t);if(n===En.n||n===En.r||n===En.W)return!0}}return!1}(this.searchString):this.searchString.indexOf("\n")>=0;let t=null;try{t=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw Error("Cannot create regex from empty string");t||(e=sa(e)),i.wholeWord&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e+="\\b"));let n="";return i.global&&(n+="g"),i.matchCase||(n+="i"),i.multiline&&(n+="m"),i.unicode&&(n+="u"),new RegExp(e,n)}(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch(n){return null}if(!t)return null;let i=!this.isRegex&&!e;return i&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(i=this.matchCase),new _S(t,this.wordSeparators?function(e,t){let i="".concat(e,"/").concat(t.join(",")),n=dP.get(i);return n||(n=new hP(e,t),dP.set(i,n)),n}(this.wordSeparators,[]):null,i?this.searchString:null)}};function uP(e,t,i){if(!i)return new mS(e,null);let n=[];for(let s=0,r=t.length;s<r;s++)n[s]=t[s];return new mS(e,n)}var gP=class{constructor(e){let t=[],i=0;for(let n=0,s=e.length;n<s;n++)e.charCodeAt(n)===En.LineFeed&&(t[i++]=n);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){let t=this._lineFeedsOffsets,i=0,n=t.length-1;if(-1===n||e<=t[0])return 0;for(;i<n;){let s=i+((n-i)/2|0);t[s]>=e?n=s-1:t[s+1]>=e?(i=s,n=s):i=s+1}return i+1}},pP=class{static findMatches(e,t,i,n,s){let r=t.parseSearchRequest();return r?r.regex.multiline?this._doFindMatchesMultiline(e,i,new mP(r.wordSeparators,r.regex),n,s):this._doFindMatchesLineByLine(e,i,r,n,s):[]}static _getMultilineMatchRange(e,t,i,n,s,r){let o,a,l=0;if(n?(l=n.findLineFeedCountBeforeOffset(s),o=t+s+l):o=t+s,n){let e=n.findLineFeedCountBeforeOffset(s+r.length)-l;a=o+r.length+e}else a=o+r.length;let h=e.getPositionAt(o),d=e.getPositionAt(a);return new dE(h.lineNumber,h.column,d.lineNumber,d.column)}static _doFindMatchesMultiline(e,t,i,n,s){let r,o=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,sS.LF),l="\r\n"===e.getEOL()?new gP(a):null,h=[],d=0;for(i.reset(0);r=i.next(a);)if(h[d++]=uP(this._getMultilineMatchRange(e,o,a,l,r.index,r[0]),r,n),d>=s)return h;return h}static _doFindMatchesLineByLine(e,t,i,n,s){let r=[],o=0;if(t.startLineNumber===t.endLineNumber){let a=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return o=this._findMatchesInLine(i,a,t.startLineNumber,t.startColumn-1,o,r,n,s),r}let a=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);o=this._findMatchesInLine(i,a,t.startLineNumber,t.startColumn-1,o,r,n,s);for(let l=t.startLineNumber+1;l<t.endLineNumber&&o<s;l++)o=this._findMatchesInLine(i,e.getLineContent(l),l,0,o,r,n,s);if(o<s){let a=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);o=this._findMatchesInLine(i,a,t.endLineNumber,0,o,r,n,s)}return r}static _findMatchesInLine(e,t,i,n,s,r,o,a){let l=e.wordSeparators;if(!o&&e.simpleSearch){let o=e.simpleSearch,h=o.length,d=t.length,c=-h;for(;-1!==(c=t.indexOf(o,c+h));)if((!l||fP(l,t,d,c,h))&&(r[s++]=new mS(new dE(i,c+1+n,i,c+1+h+n),null),s>=a))return s;return s}let h,d=new mP(e.wordSeparators,e.regex);d.reset(0);do{if(h=d.next(t),h&&(r[s++]=uP(new dE(i,h.index+1+n,i,h.index+1+h[0].length+n),h,o),s>=a))return s}while(h);return s}static findNextMatch(e,t,i,n){let s=t.parseSearchRequest();if(!s)return null;let r=new mP(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindNextMatchMultiline(e,i,r,n):this._doFindNextMatchLineByLine(e,i,r,n)}static _doFindNextMatchMultiline(e,t,i,n){let s=new hE(t.lineNumber,1),r=e.getOffsetAt(s),o=e.getLineCount(),a=e.getValueInRange(new dE(s.lineNumber,s.column,o,e.getLineMaxColumn(o)),sS.LF),l="\r\n"===e.getEOL()?new gP(a):null;i.reset(t.column-1);let h=i.next(a);return h?uP(this._getMultilineMatchRange(e,r,a,l,h.index,h[0]),h,n):1!==t.lineNumber||1!==t.column?this._doFindNextMatchMultiline(e,new hE(1,1),i,n):null}static _doFindNextMatchLineByLine(e,t,i,n){let s=e.getLineCount(),r=t.lineNumber,o=e.getLineContent(r),a=this._findFirstMatchInLine(i,o,r,t.column,n);if(a)return a;for(let l=1;l<=s;l++){let t=(r+l-1)%s,o=e.getLineContent(t+1),a=this._findFirstMatchInLine(i,o,t+1,1,n);if(a)return a}return null}static _findFirstMatchInLine(e,t,i,n,s){e.reset(n-1);let r=e.next(t);return r?uP(new dE(i,r.index+1,i,r.index+1+r[0].length),r,s):null}static findPreviousMatch(e,t,i,n){let s=t.parseSearchRequest();if(!s)return null;let r=new mP(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindPreviousMatchMultiline(e,i,r,n):this._doFindPreviousMatchLineByLine(e,i,r,n)}static _doFindPreviousMatchMultiline(e,t,i,n){let s=this._doFindMatchesMultiline(e,new dE(1,1,t.lineNumber,t.column),i,n,9990);if(s.length>0)return s[s.length-1];let r=e.getLineCount();return t.lineNumber!==r||t.column!==e.getLineMaxColumn(r)?this._doFindPreviousMatchMultiline(e,new hE(r,e.getLineMaxColumn(r)),i,n):null}static _doFindPreviousMatchLineByLine(e,t,i,n){let s=e.getLineCount(),r=t.lineNumber,o=e.getLineContent(r).substring(0,t.column-1),a=this._findLastMatchInLine(i,o,r,n);if(a)return a;for(let l=1;l<=s;l++){let t=(s+r-l-1)%s,o=e.getLineContent(t+1),a=this._findLastMatchInLine(i,o,t+1,n);if(a)return a}return null}static _findLastMatchInLine(e,t,i,n){let s,r=null;for(e.reset(0);s=e.next(t);)r=uP(new dE(i,s.index+1,i,s.index+1+s[0].length),s,n);return r}};function fP(e,t,i,n,s){return function(e,t,i,n,s){if(0===n)return!0;let r=t.charCodeAt(n-1);if(e.get(r)!==oP.Regular||r===En.CarriageReturn||r===En.LineFeed)return!0;if(s>0){let i=t.charCodeAt(n);if(e.get(i)!==oP.Regular)return!0}return!1}(e,t,0,n,s)&&function(e,t,i,n,s){if(n+s===i)return!0;let r=t.charCodeAt(n+s);if(e.get(r)!==oP.Regular||r===En.CarriageReturn||r===En.LineFeed)return!0;if(s>0){let i=t.charCodeAt(n+s-1);if(e.get(i)!==oP.Regular)return!0}return!1}(e,t,i,n,s)}var mP=class{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){let t,i=e.length;do{if(this._prevMatchStartIndex+this._prevMatchLength===i||(t=this._searchRegex.exec(e),!t))return null;let n=t.index,s=t[0].length;if(n===this._prevMatchStartIndex&&s===this._prevMatchLength){if(0===s){Sa(e,i,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=n,this._prevMatchLength=s,!this._wordSeparators||fP(this._wordSeparators,e,i,n,s))return t}while(t);return null}},vP=65535;function _P(e){let t;return t=e[e.length-1]<65536?new Uint16Array(e.length):new Uint32Array(e.length),t.set(e,0),t}var bP=class{constructor(e,t,i,n,s){this.lineStarts=e,this.cr=t,this.lf=i,this.crlf=n,this.isBasicASCII=s}};function CP(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=[0],n=1;for(let s=0,r=e.length;s<r;s++){let t=e.charCodeAt(s);t===En.CarriageReturn?s+1<r&&e.charCodeAt(s+1)===En.LineFeed?(i[n++]=s+2,s++):i[n++]=s+1:t===En.LineFeed&&(i[n++]=s+1)}return t?_P(i):i}var yP=class{constructor(e,t,i,n,s){this.bufferIndex=e,this.start=t,this.end=i,this.lineFeedCnt=n,this.length=s}},wP=class{constructor(e,t){this.buffer=e,this.lineStarts=t}},SP=class{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==jM&&e.iterate(e.root,e=>(e!==jM&&this._pieces.push(e.piece),!0))}read(){return 0===this._pieces.length?0===this._index?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:0===this._index?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}},kP=class{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){let i=this._cache[t];if(i.nodeStartOffset<=e&&i.nodeStartOffset+i.node.piece.length>=e)return i}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){let i=this._cache[t];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<e&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=e)return i}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1,i=this._cache;for(let n=0;n<i.length;n++){let s=i[n];(null===s.node.parent||s.nodeStartOffset>=e)&&(i[n]=null,t=!0)}if(t){let e=[];for(let t of i)null!==t&&e.push(t);this._cache=e}}},EP=class{constructor(e,t,i){this.create(e,t,i)}create(e,t,i){this._buffers=[new wP("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=jM,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=i;let n=null;for(let s=0,r=e.length;s<r;s++)if(e[s].buffer.length>0){e[s].lineStarts||(e[s].lineStarts=CP(e[s].buffer));let t=new yP(s+1,{line:0,column:0},{line:e[s].lineStarts.length-1,column:e[s].buffer.length-e[s].lineStarts[e[s].lineStarts.length-1]},e[s].lineStarts.length-1,e[s].buffer.length);this._buffers.push(e[s]),n=this.rbInsertRight(n,t)}this._searchCache=new kP(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){let t=vP,i=t-Math.floor(t/3),n=2*i,s="",r=0,o=[];if(this.iterate(this.root,t=>{let a=this.getNodeContent(t),l=a.length;if(r<=i||r+l<n)return s+=a,r+=l,!0;let h=s.replace(/\r\n|\r|\n/g,e);return o.push(new wP(h,CP(h))),s=a,r=l,!0}),r>0){let t=s.replace(/\r\n|\r|\n/g,e);o.push(new wP(t,CP(t)))}this.create(o,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new SP(this,e)}equal(e){if(this.getLength()!==e.getLength()||this.getLineCount()!==e.getLineCount())return!1;let t=0;return this.iterate(this.root,i=>{if(i===jM)return!0;let n=this.getNodeContent(i),s=n.length,r=e.nodeAt(t),o=e.nodeAt(t+s),a=e.getValueInRange2(r,o);return t+=s,n===a})}getOffsetAt(e,t){let i=0,n=this.root;for(;n!==jM;)if(n.left!==jM&&n.lf_left+1>=e)n=n.left;else{if(n.lf_left+n.piece.lineFeedCnt+1>=e){return i+=n.size_left,i+(this.getAccumulatedValue(n,e-n.lf_left-2)+t-1)}e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right}return i}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,i=0,n=e;for(;t!==jM;)if(0!==t.size_left&&t.size_left>=e)t=t.left;else{if(t.size_left+t.piece.length>=e){let s=this.getIndexOf(t,e-t.size_left);if(i+=t.lf_left+s.index,0===s.index){let e=n-this.getOffsetAt(i+1,1);return new hE(i+1,e+1)}return new hE(i+1,s.remainder+1)}if(e-=t.size_left+t.piece.length,i+=t.lf_left+t.piece.lineFeedCnt,t.right===jM){let t=this.getOffsetAt(i+1,1);return new hE(i+1,n-e-t+1)}t=t.right}return new hE(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";let i=this.nodeAt2(e.startLineNumber,e.startColumn),n=this.nodeAt2(e.endLineNumber,e.endColumn),s=this.getValueInRange2(i,n);return t?t===this._EOL&&this._EOLNormalized&&t===this.getEOL()&&this._EOLNormalized?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){let i=e.node,n=this._buffers[i.piece.bufferIndex].buffer,s=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return n.substring(s+e.remainder,s+t.remainder)}let i=e.node,n=this._buffers[i.piece.bufferIndex].buffer,s=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start),r=n.substring(s+e.remainder,s+i.piece.length);for(i=i.next();i!==jM;){let e=this._buffers[i.piece.bufferIndex].buffer,n=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(i===t.node){r+=e.substring(n,n+t.remainder);break}r+=e.substr(n,i.piece.length),i=i.next()}return r}getLinesContent(){let e=[],t=0,i="",n=!1;return this.iterate(this.root,s=>{if(s===jM)return!0;let r=s.piece,o=r.length;if(0===o)return!0;let a=this._buffers[r.bufferIndex].buffer,l=this._buffers[r.bufferIndex].lineStarts,h=r.start.line,d=r.end.line,c=l[h]+r.start.column;if(n&&(a.charCodeAt(c)===En.LineFeed&&(c++,o--),e[t++]=i,i="",n=!1,0===o))return!0;if(h===d)return this._EOLNormalized||a.charCodeAt(c+o-1)!==En.CarriageReturn?i+=a.substr(c,o):(n=!0,i+=a.substr(c,o-1)),!0;i+=this._EOLNormalized?a.substring(c,Math.max(c,l[h+1]-this._EOLLength)):a.substring(c,l[h+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;for(let n=h+1;n<d;n++)i=this._EOLNormalized?a.substring(l[n],l[n+1]-this._EOLLength):a.substring(l[n],l[n+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;return this._EOLNormalized||a.charCodeAt(l[d]+r.end.column-1)!==En.CarriageReturn?i=a.substr(l[d],r.end.column):(n=!0,0===r.end.column?t--:i=a.substr(l[d],r.end.column-1)),!0}),n&&(e[t++]=i,i=""),e[t++]=i,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e||(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,"")),this._lastVisitedLine.value}_getCharCode(e){if(e.remainder===e.node.piece.length){let t=e.node.next();if(!t)return 0;let i=this._buffers[t.piece.bufferIndex],n=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return i.buffer.charCodeAt(n)}{let t=this._buffers[e.node.piece.bufferIndex],i=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(i)}}getLineCharCode(e,t){let i=this.nodeAt2(e,t+1);return this._getCharCode(i)}getLineLength(e){if(e===this.getLineCount()){let t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}getCharCode(e){let t=this.nodeAt(e);return this._getCharCode(t)}getNearestChunk(e){let t=this.nodeAt(e);if(t.remainder===t.node.piece.length){let e=t.node.next();if(!e||e===jM)return"";let i=this._buffers[e.piece.bufferIndex],n=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start);return i.buffer.substring(n,n+e.piece.length)}{let e=this._buffers[t.node.piece.bufferIndex],i=this.offsetInBuffer(t.node.piece.bufferIndex,t.node.piece.start),n=i+t.remainder,s=i+t.node.piece.length;return e.buffer.substring(n,s)}}findMatchesInNode(e,t,i,n,s,r,o,a,l,h,d){let c,u,g,p=this._buffers[e.piece.bufferIndex],f=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),m=this.offsetInBuffer(e.piece.bufferIndex,s),v=this.offsetInBuffer(e.piece.bufferIndex,r),_={line:0,column:0};t._wordSeparators?(u=p.buffer.substring(m,v),g=e=>e+m,t.reset(0)):(u=p.buffer,g=e=>e,t.reset(m));do{if(c=t.next(u),c){if(g(c.index)>=v)return h;this.positionInBuffer(e,g(c.index)-f,_);let t=this.getLineFeedCnt(e.piece.bufferIndex,s,_),r=_.line===s.line?_.column-s.column+n:_.column+1,o=r+c[0].length;if(d[h++]=uP(new dE(i+t,r,i+t,o),c,a),g(c.index)+c[0].length>=v||h>=l)return h}}while(c);return h}findMatchesLineByLine(e,t,i,n){let s=[],r=0,o=new mP(t.wordSeparators,t.regex),a=this.nodeAt2(e.startLineNumber,e.startColumn);if(null===a)return[];let l=this.nodeAt2(e.endLineNumber,e.endColumn);if(null===l)return[];let h=this.positionInBuffer(a.node,a.remainder),d=this.positionInBuffer(l.node,l.remainder);if(a.node===l.node)return this.findMatchesInNode(a.node,o,e.startLineNumber,e.startColumn,h,d,t,i,n,r,s),s;let c=e.startLineNumber,u=a.node;for(;u!==l.node;){let l=this.getLineFeedCnt(u.piece.bufferIndex,h,u.piece.end);if(l>=1){let a=this._buffers[u.piece.bufferIndex].lineStarts,d=this.offsetInBuffer(u.piece.bufferIndex,u.piece.start),g=a[h.line+l],p=c===e.startLineNumber?e.startColumn:1;if(r=this.findMatchesInNode(u,o,c,p,h,this.positionInBuffer(u,g-d),t,i,n,r,s),r>=n)return s;c+=l}let d=c===e.startLineNumber?e.startColumn-1:0;if(c===e.endLineNumber){let a=this.getLineContent(c).substring(d,e.endColumn-1);return r=this._findMatchesInLine(t,o,a,e.endLineNumber,d,r,s,i,n),s}if(r=this._findMatchesInLine(t,o,this.getLineContent(c).substr(d),c,d,r,s,i,n),r>=n)return s;c++,a=this.nodeAt2(c,1),u=a.node,h=this.positionInBuffer(a.node,a.remainder)}if(c===e.endLineNumber){let a=c===e.startLineNumber?e.startColumn-1:0,l=this.getLineContent(c).substring(a,e.endColumn-1);return r=this._findMatchesInLine(t,o,l,e.endLineNumber,a,r,s,i,n),s}let g=c===e.startLineNumber?e.startColumn:1;return r=this.findMatchesInNode(l.node,o,c,g,h,d,t,i,n,r,s),s}_findMatchesInLine(e,t,i,n,s,r,o,a,l){let h,d=e.wordSeparators;if(!a&&e.simpleSearch){let t=e.simpleSearch,a=t.length,h=i.length,c=-a;for(;-1!==(c=i.indexOf(t,c+a));)if((!d||fP(d,i,h,c,a))&&(o[r++]=new mS(new dE(n,c+1+s,n,c+1+a+s),null),r>=l))return r;return r}t.reset(0);do{if(h=t.next(i),h&&(o[r++]=uP(new dE(n,h.index+1+s,n,h.index+1+h[0].length+s),h,a),r>=l))return r}while(h);return r}insert(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._EOLNormalized=this._EOLNormalized&&i,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==jM){let{node:i,remainder:n,nodeStartOffset:s}=this.nodeAt(e),r=i.piece,o=r.bufferIndex,a=this.positionInBuffer(i,n);if(0===i.piece.bufferIndex&&r.end.line===this._lastChangeBufferPos.line&&r.end.column===this._lastChangeBufferPos.column&&s+r.length===e&&t.length<vP)return this.appendToNode(i,t),void this.computeBufferMetadata();if(s===e)this.insertContentToNodeLeft(t,i),this._searchCache.validate(e);else if(s+i.piece.length>e){let e=[],s=new yP(r.bufferIndex,a,r.end,this.getLineFeedCnt(r.bufferIndex,a,r.end),this.offsetInBuffer(o,r.end)-this.offsetInBuffer(o,a));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&10===this.nodeCharCodeAt(i,n)){let e={line:s.start.line+1,column:0};s=new yP(s.bufferIndex,e,s.end,this.getLineFeedCnt(s.bufferIndex,e,s.end),s.length-1),t+="\n"}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(13===this.nodeCharCodeAt(i,n-1)){let s=this.positionInBuffer(i,n-1);this.deleteNodeTail(i,s),t="\r"+t,0===i.piece.length&&e.push(i)}else this.deleteNodeTail(i,a);else this.deleteNodeTail(i,a);let l=this.createNewPieces(t);s.length>0&&this.rbInsertRight(i,s);let h=i;for(let t=0;t<l.length;t++)h=this.rbInsertRight(h,l[t]);this.deleteNodes(e)}else this.insertContentToNodeRight(t,i)}else{let e=this.createNewPieces(t),i=this.rbInsertLeft(null,e[0]);for(let t=1;t<e.length;t++)i=this.rbInsertRight(i,e[t])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===jM)return;let i=this.nodeAt(e),n=this.nodeAt(e+t),s=i.node,r=n.node;if(s===r){let r=this.positionInBuffer(s,i.remainder),o=this.positionInBuffer(s,n.remainder);if(i.nodeStartOffset===e){if(t===s.piece.length){let e=s.next();return tP(this,s),this.validateCRLFWithPrevNode(e),void this.computeBufferMetadata()}return this.deleteNodeHead(s,o),this._searchCache.validate(e),this.validateCRLFWithPrevNode(s),void this.computeBufferMetadata()}return i.nodeStartOffset+s.piece.length===e+t?(this.deleteNodeTail(s,r),this.validateCRLFWithNextNode(s),void this.computeBufferMetadata()):(this.shrinkNode(s,r,o),void this.computeBufferMetadata())}let o=[],a=this.positionInBuffer(s,i.remainder);this.deleteNodeTail(s,a),this._searchCache.validate(e),0===s.piece.length&&o.push(s);let l=this.positionInBuffer(r,n.remainder);this.deleteNodeHead(r,l),0===r.piece.length&&o.push(r);for(let d=s.next();d!==jM&&d!==r;d=d.next())o.push(d);let h=0===s.piece.length?s.prev():s;this.deleteNodes(o),this.validateCRLFWithNextNode(h),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){let i=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){let n=t.piece,s={line:n.start.line+1,column:0};t.piece=new yP(n.bufferIndex,s,n.end,this.getLineFeedCnt(n.bufferIndex,s,n.end),n.length-1),e+="\n",nP(this,t,-1,-1),0===t.piece.length&&i.push(t)}let n=this.createNewPieces(e),s=this.rbInsertLeft(t,n[n.length-1]);for(let r=n.length-2;r>=0;r--)s=this.rbInsertLeft(s,n[r]);this.validateCRLFWithPrevNode(s),this.deleteNodes(i)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+="\n");let i=this.createNewPieces(e),n=this.rbInsertRight(t,i[0]),s=n;for(let r=1;r<i.length;r++)s=this.rbInsertRight(s,i[r]);this.validateCRLFWithPrevNode(n)}positionInBuffer(e,t,i){let n=e.piece,s=e.piece.bufferIndex,r=this._buffers[s].lineStarts,o=r[n.start.line]+n.start.column+t,a=n.start.line,l=n.end.line,h=0,d=0,c=0;for(;a<=l&&(h=a+(l-a)/2|0,c=r[h],h!==l);)if(d=r[h+1],o<c)l=h-1;else{if(!(o>=d))break;a=h+1}return i?(i.line=h,i.column=o-c,null):{line:h,column:o-c}}getLineFeedCnt(e,t,i){if(0===i.column)return i.line-t.line;let n=this._buffers[e].lineStarts;if(i.line===n.length-1)return i.line-t.line;let s=n[i.line+1],r=n[i.line]+i.column;if(s>r+1)return i.line-t.line;let o=r-1;return 13===this._buffers[e].buffer.charCodeAt(o)?i.line-t.line+1:i.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)tP(this,e[t])}createNewPieces(e){if(e.length>vP){let t=[];for(;e.length>vP;){let i,n=e.charCodeAt(65534);n===En.CarriageReturn||n>=55296&&n<=56319?(i=e.substring(0,65534),e=e.substring(65534)):(i=e.substring(0,vP),e=e.substring(vP));let s=CP(i);t.push(new yP(this._buffers.length,{line:0,column:0},{line:s.length-1,column:i.length-s[s.length-1]},s.length-1,i.length)),this._buffers.push(new wP(i,s))}let i=CP(e);return t.push(new yP(this._buffers.length,{line:0,column:0},{line:i.length-1,column:e.length-i[i.length-1]},i.length-1,e.length)),this._buffers.push(new wP(e,i)),t}let t=this._buffers[0].buffer.length,i=CP(e,!1),n=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&0!==t&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},n=this._lastChangeBufferPos;for(let e=0;e<i.length;e++)i[e]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(0!==t)for(let e=0;e<i.length;e++)i[e]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+=e}let s=this._buffers[0].buffer.length,r=this._buffers[0].lineStarts.length-1,o={line:r,column:s-this._buffers[0].lineStarts[r]},a=new yP(0,n,o,this.getLineFeedCnt(0,n,o),s-t);return this._lastChangeBufferPos=o,[a]}getLinesRawContent(){return this.getContentOfSubTree(this.root)}getLineRawContent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.root,n="",s=this._searchCache.get2(e);if(s){i=s.node;let r=this.getAccumulatedValue(i,e-s.nodeStartLineNumber-1),o=this._buffers[i.piece.bufferIndex].buffer,a=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(s.nodeStartLineNumber+i.piece.lineFeedCnt!==e){let n=this.getAccumulatedValue(i,e-s.nodeStartLineNumber);return o.substring(a+r,a+n-t)}n=o.substring(a+r,a+i.piece.length)}else{let s=0,r=e;for(;i!==jM;)if(i.left!==jM&&i.lf_left>=e-1)i=i.left;else{if(i.lf_left+i.piece.lineFeedCnt>e-1){let n=this.getAccumulatedValue(i,e-i.lf_left-2),o=this.getAccumulatedValue(i,e-i.lf_left-1),a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return s+=i.size_left,this._searchCache.set({node:i,nodeStartOffset:s,nodeStartLineNumber:r-(e-1-i.lf_left)}),a.substring(l+n,l+o-t)}if(i.lf_left+i.piece.lineFeedCnt===e-1){let t=this.getAccumulatedValue(i,e-i.lf_left-2),s=this._buffers[i.piece.bufferIndex].buffer,r=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);n=s.substring(r+t,r+i.piece.length);break}e-=i.lf_left+i.piece.lineFeedCnt,s+=i.size_left+i.piece.length,i=i.right}}for(i=i.next();i!==jM;){let e=this._buffers[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){let s=this.getAccumulatedValue(i,0),r=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return n+=e.substring(r,r+s-t),n}{let t=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);n+=e.substr(t,i.piece.length)}i=i.next()}return n}computeBufferMetadata(){let e=this.root,t=1,i=0;for(;e!==jM;)t+=e.lf_left+e.piece.lineFeedCnt,i+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=i,this._searchCache.validate(this._length)}getIndexOf(e,t){let i=e.piece,n=this.positionInBuffer(e,t),s=n.line-i.start.line;if(this.offsetInBuffer(i.bufferIndex,i.end)-this.offsetInBuffer(i.bufferIndex,i.start)===t){let t=this.getLineFeedCnt(e.piece.bufferIndex,i.start,n);if(t!==s)return{index:t,remainder:0}}return{index:s,remainder:n.column}}getAccumulatedValue(e,t){if(t<0)return 0;let i=e.piece,n=this._buffers[i.bufferIndex].lineStarts,s=i.start.line+t+1;return s>i.end.line?n[i.end.line]+i.end.column-n[i.start.line]-i.start.column:n[s]-n[i.start.line]-i.start.column}deleteNodeTail(e,t){let i=e.piece,n=i.lineFeedCnt,s=this.offsetInBuffer(i.bufferIndex,i.end),r=t,o=this.offsetInBuffer(i.bufferIndex,r),a=this.getLineFeedCnt(i.bufferIndex,i.start,r),l=a-n,h=o-s,d=i.length+h;e.piece=new yP(i.bufferIndex,i.start,r,a,d),nP(this,e,h,l)}deleteNodeHead(e,t){let i=e.piece,n=i.lineFeedCnt,s=this.offsetInBuffer(i.bufferIndex,i.start),r=t,o=this.getLineFeedCnt(i.bufferIndex,r,i.end),a=o-n,l=s-this.offsetInBuffer(i.bufferIndex,r),h=i.length+l;e.piece=new yP(i.bufferIndex,r,i.end,o,h),nP(this,e,l,a)}shrinkNode(e,t,i){let n=e.piece,s=n.start,r=n.end,o=n.length,a=n.lineFeedCnt,l=t,h=this.getLineFeedCnt(n.bufferIndex,n.start,l),d=this.offsetInBuffer(n.bufferIndex,t)-this.offsetInBuffer(n.bufferIndex,s);e.piece=new yP(n.bufferIndex,n.start,l,h,d),nP(this,e,d-o,h-a);let c=new yP(n.bufferIndex,i,r,this.getLineFeedCnt(n.bufferIndex,i,r),this.offsetInBuffer(n.bufferIndex,r)-this.offsetInBuffer(n.bufferIndex,i)),u=this.rbInsertRight(e,c);this.validateCRLFWithPrevNode(u)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+="\n");let i=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),n=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;let s=CP(t,!1);for(let c=0;c<s.length;c++)s[c]+=n;if(i){let e=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:n-e}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(s.slice(1));let r=this._buffers[0].lineStarts.length-1,o={line:r,column:this._buffers[0].buffer.length-this._buffers[0].lineStarts[r]},a=e.piece.length+t.length,l=e.piece.lineFeedCnt,h=this.getLineFeedCnt(0,e.piece.start,o),d=h-l;e.piece=new yP(e.piece.bufferIndex,e.piece.start,o,h,a),this._lastChangeBufferPos=o,nP(this,e,t.length,d)}nodeAt(e){let t=this.root,i=this._searchCache.get(e);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:e-i.nodeStartOffset};let n=0;for(;t!==jM;)if(t.size_left>e)t=t.left;else{if(t.size_left+t.piece.length>=e){n+=t.size_left;let i={node:t,remainder:e-t.size_left,nodeStartOffset:n};return this._searchCache.set(i),i}e-=t.size_left+t.piece.length,n+=t.size_left+t.piece.length,t=t.right}return null}nodeAt2(e,t){let i=this.root,n=0;for(;i!==jM;)if(i.left!==jM&&i.lf_left>=e-1)i=i.left;else{if(i.lf_left+i.piece.lineFeedCnt>e-1){let s=this.getAccumulatedValue(i,e-i.lf_left-2),r=this.getAccumulatedValue(i,e-i.lf_left-1);return n+=i.size_left,{node:i,remainder:Math.min(s+t-1,r),nodeStartOffset:n}}if(i.lf_left+i.piece.lineFeedCnt===e-1){let s=this.getAccumulatedValue(i,e-i.lf_left-2);if(s+t-1<=i.piece.length)return{node:i,remainder:s+t-1,nodeStartOffset:n};t-=i.piece.length-s;break}e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==jM;){if(i.piece.lineFeedCnt>0){let e=this.getAccumulatedValue(i,0),n=this.offsetOfNode(i);return{node:i,remainder:Math.min(t-1,e),nodeStartOffset:n}}if(i.piece.length>=t-1){return{node:i,remainder:t-1,nodeStartOffset:this.offsetOfNode(i)}}t-=i.piece.length,i=i.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;let i=this._buffers[e.piece.bufferIndex],n=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return i.buffer.charCodeAt(n)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&"\n"===this._EOL)}startWithLF(e){if("string"==typeof e)return 10===e.charCodeAt(0);if(e===jM||0===e.piece.lineFeedCnt)return!1;let t=e.piece,i=this._buffers[t.bufferIndex].lineStarts,n=t.start.line,s=i[n]+t.start.column;return!(n===i.length-1||i[n+1]>s+1)&&10===this._buffers[t.bufferIndex].buffer.charCodeAt(s)}endWithCR(e){return"string"==typeof e?13===e.charCodeAt(e.length-1):e!==jM&&0!==e.piece.lineFeedCnt&&13===this.nodeCharCodeAt(e,e.piece.length-1)}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){let t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){let i,n=[],s=this._buffers[e.piece.bufferIndex].lineStarts;i=0===e.piece.end.column?{line:e.piece.end.line-1,column:s[e.piece.end.line]-s[e.piece.end.line-1]-1}:{line:e.piece.end.line,column:e.piece.end.column-1};let r=e.piece.length-1,o=e.piece.lineFeedCnt-1;e.piece=new yP(e.piece.bufferIndex,e.piece.start,i,o,r),nP(this,e,-1,-1),0===e.piece.length&&n.push(e);let a={line:t.piece.start.line+1,column:0},l=t.piece.length-1,h=this.getLineFeedCnt(t.piece.bufferIndex,a,t.piece.end);t.piece=new yP(t.piece.bufferIndex,a,t.piece.end,h,l),nP(this,t,-1,-1),0===t.piece.length&&n.push(t);let d=this.createNewPieces("\r\n");this.rbInsertRight(e,d[0]);for(let c=0;c<n.length;c++)tP(this,n[c])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let i=t.next();if(this.startWithLF(i)){if(e+="\n",1===i.piece.length)tP(this,i);else{let e=i.piece,t={line:e.start.line+1,column:0},n=e.length-1,s=this.getLineFeedCnt(e.bufferIndex,t,e.end);i.piece=new yP(e.bufferIndex,t,e.end,s,n),nP(this,i,-1,-1)}return!0}}return!1}iterate(e,t){return e===jM?t(jM):this.iterate(e.left,t)&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===jM)return"";let t=this._buffers[e.piece.bufferIndex],i=e.piece,n=this.offsetInBuffer(i.bufferIndex,i.start),s=this.offsetInBuffer(i.bufferIndex,i.end);return t.buffer.substring(n,s)}getPieceContent(e){let t=this._buffers[e.bufferIndex],i=this.offsetInBuffer(e.bufferIndex,e.start),n=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(i,n)}rbInsertRight(e,t){let i=new GM(t,qM.Red);if(i.left=jM,i.right=jM,i.parent=jM,i.size_left=0,i.lf_left=0,this.root===jM)this.root=i,i.color=qM.Black;else if(e.right===jM)e.right=i,i.parent=e;else{let t=YM(e.right);t.left=i,i.parent=t}return iP(this,i),i}rbInsertLeft(e,t){let i=new GM(t,qM.Red);if(i.left=jM,i.right=jM,i.parent=jM,i.size_left=0,i.lf_left=0,this.root===jM)this.root=i,i.color=qM.Black;else if(e.left===jM)e.left=i,i.parent=e;else{let t=QM(e.left);t.right=i,i.parent=t}return iP(this,i),i}getContentOfSubTree(e){let t="";return this.iterate(e,e=>(t+=this.getNodeContent(e),!0)),t}},DP=class e extends Co{get onDidChangeContent(){return this._onDidChangeContent.event}constructor(e,t,i,n,s,r,o){super(),this._onDidChangeContent=this._register(new Ro),this._BOM=t,this._mightContainNonBasicASCII=!r,this._mightContainRTL=n,this._mightContainUnusualLineTerminators=s,this._pieceTree=new EP(e,i,o)}equals(t){return t instanceof e&&this._BOM===t._BOM&&this.getEOL()===t.getEOL()&&this._pieceTree.equal(t._pieceTree)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){let i=e+t,n=this.getPositionAt(e),s=this.getPositionAt(i);return new dE(n.lineNumber,n.column,s.lineNumber,s.column)}getValueInRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sS.TextDefined;if(e.isEmpty())return"";let i=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,i)}getValueLengthInRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sS.TextDefined;if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;let i=this.getOffsetAt(e.startLineNumber,e.startColumn),n=this.getOffsetAt(e.endLineNumber,e.endColumn),s=0,r=this._getEndOfLine(t),o=this.getEOL();return r.length!==o.length&&(s=(r.length-o.length)*(e.endLineNumber-e.startLineNumber)),n-i+s}getCharacterCountInRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sS.TextDefined;if(this._mightContainNonBasicASCII){let i=0,n=e.startLineNumber,s=e.endLineNumber;for(let t=n;t<=s;t++){let r=this.getLineContent(t),o=t===n?e.startColumn-1:0,a=t===s?e.endColumn-1:r.length;for(let e=o;e<a;e++)Ca(r.charCodeAt(e))?(i+=1,e+=1):i+=1}return i+=this._getEndOfLine(t).length*(s-n),i}return this.getValueLengthInRange(e,t)}getNearestChunk(e){return this._pieceTree.getNearestChunk(e)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getCharCode(e){return this._pieceTree.getCharCode(e)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineMinColumn(e){return 1}getLineMaxColumn(e){return this.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){let t=aa(this.getLineContent(e));return-1===t?0:t+1}getLineLastNonWhitespaceColumn(e){let t=function(e){for(let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length-1;t>=0;t--){let i=e.charCodeAt(t);if(i!==En.Space&&i!==En.Tab)return t}return-1}(this.getLineContent(e));return-1===t?0:t+2}_getEndOfLine(e){switch(e){case sS.LF:return"\n";case sS.CRLF:return"\r\n";case sS.TextDefined:return this.getEOL();default:throw Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(t,i,n){let s=this._mightContainRTL,r=this._mightContainUnusualLineTerminators,o=this._mightContainNonBasicASCII,a=!0,l=[];for(let e=0;e<t.length;e++){let i=t[e];a&&i._isTracked&&(a=!1);let n=i.range;if(i.text){let e=!0;o||(e=!Aa(i.text),o=e),!s&&e&&(s=xa(i.text)),!r&&e&&(r=Fa(i.text))}let h="",d=0,c=0,u=0;if(i.text){let e;[d,c,u,e]=cE(i.text);let t=this.getEOL(),n="\r\n"===t?lE.CRLF:lE.LF;h=e===lE.Unknown||e===n?i.text:i.text.replace(/\r\n|\r|\n/g,t)}l[e]={sortIndex:e,identifier:i.identifier||null,range:n,rangeOffset:this.getOffsetAt(n.startLineNumber,n.startColumn),rangeLength:this.getValueLengthInRange(n),text:h,eolCount:d,firstLineLength:c,lastLineLength:u,forceMoveMarkers:!!i.forceMoveMarkers,isAutoWhitespaceEdit:i.isAutoWhitespaceEdit||!1}}l.sort(e._sortOpsAscending);let h=!1;for(let e=0,f=l.length-1;e<f;e++){let t=l[e].range.getEndPosition(),i=l[e+1].range.getStartPosition();if(i.isBeforeOrEqual(t)){if(i.isBefore(t))throw Error("Overlapping ranges are not allowed!");h=!0}}a&&(l=this._reduceOperations(l));let d=n||i?e._getInverseEditRanges(l):[],c=[];if(i)for(let e=0;e<l.length;e++){let t=l[e],i=d[e];if(t.isAutoWhitespaceEdit&&t.range.isEmpty())for(let e=i.startLineNumber;e<=i.endLineNumber;e++){let n="";e===i.startLineNumber&&(n=this.getLineContent(t.range.startLineNumber),-1!==aa(n))||c.push({lineNumber:e,oldContent:n})}}let u=null;if(n){let e=0;u=[];for(let t=0;t<l.length;t++){let i=l[t],n=d[t],s=this.getValueInRange(i.range),r=i.rangeOffset+e;e+=i.text.length-s.length,u[t]={sortIndex:i.sortIndex,identifier:i.identifier,range:n,text:s,textChange:new LO(i.rangeOffset,s,r,i.text)}}h||u.sort((e,t)=>e.sortIndex-t.sortIndex)}this._mightContainRTL=s,this._mightContainUnusualLineTerminators=r,this._mightContainNonBasicASCII=o;let g=this._doApplyEdits(l),p=null;if(i&&c.length>0){c.sort((e,t)=>t.lineNumber-e.lineNumber),p=[];for(let e=0,t=c.length;e<t;e++){let t=c[e].lineNumber;if(e>0&&c[e-1].lineNumber===t)continue;let i=c[e].oldContent,n=this.getLineContent(t);0===n.length||n===i||-1!==aa(n)||p.push(t)}}return this._onDidChangeContent.fire(),new bS(u,g,p)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1,i=e[0].range,n=e[e.length-1].range,s=new dE(i.startLineNumber,i.startColumn,n.endLineNumber,n.endColumn),r=i.startLineNumber,o=i.startColumn,a=[];for(let u=0,g=e.length;u<g;u++){let i=e[u],n=i.range;t||(t=i.forceMoveMarkers),a.push(this.getValueInRange(new dE(r,o,n.startLineNumber,n.startColumn))),i.text.length>0&&a.push(i.text),r=n.endLineNumber,o=n.endColumn}let l=a.join(""),[h,d,c]=cE(l);return{sortIndex:0,identifier:e[0].identifier,range:s,rangeOffset:this.getOffsetAt(s.startLineNumber,s.startColumn),rangeLength:this.getValueLengthInRange(s,sS.TextDefined),text:l,eolCount:h,firstLineLength:d,lastLineLength:c,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(t){t.sort(e._sortOpsDescending);let i=[];for(let e=0;e<t.length;e++){let n=t[e],s=n.range.startLineNumber,r=n.range.startColumn,o=n.range.endLineNumber,a=n.range.endColumn;if(s===o&&r===a&&0===n.text.length)continue;n.text?(this._pieceTree.delete(n.rangeOffset,n.rangeLength),this._pieceTree.insert(n.rangeOffset,n.text,!0)):this._pieceTree.delete(n.rangeOffset,n.rangeLength);let l=new dE(s,r,o,a);i.push({range:l,rangeLength:n.rangeLength,text:n.text,rangeOffset:n.rangeOffset,forceMoveMarkers:n.forceMoveMarkers})}return i}findMatchesLineByLine(e,t,i,n){return this._pieceTree.findMatchesLineByLine(e,t,i,n)}getPieceTree(){return this._pieceTree}static _getInverseEditRange(e,t){let i,n=e.startLineNumber,s=e.startColumn,[r,o,a]=cE(t);if(t.length>0){let e=r+1;i=1===e?new dE(n,s,n,s+o):new dE(n,s,n+e-1,a+1)}else i=new dE(n,s,n,s);return i}static _getInverseEditRanges(e){let t=[],i=0,n=0,s=null;for(let r=0,o=e.length;r<o;r++){let o,a,l,h=e[r];if(s?s.range.endLineNumber===h.range.startLineNumber?(o=i,a=n+(h.range.startColumn-s.range.endColumn)):(o=i+(h.range.startLineNumber-s.range.endLineNumber),a=h.range.startColumn):(o=h.range.startLineNumber,a=h.range.startColumn),h.text.length>0){let e=h.eolCount+1;l=1===e?new dE(o,a,o,a+h.firstLineLength):new dE(o,a,o+e-1,h.lastLineLength+1)}else l=new dE(o,a,o,a);i=l.endLineNumber,n=l.endColumn,t.push(l),s=h}return t}static _sortOpsAscending(e,t){let i=dE.compareRangesUsingEnds(e.range,t.range);return 0===i?e.sortIndex-t.sortIndex:i}static _sortOpsDescending(e,t){let i=dE.compareRangesUsingEnds(e.range,t.range);return 0===i?t.sortIndex-e.sortIndex:-i}},TP=class{constructor(e,t,i,n,s,r,o,a,l){this._chunks=e,this._bom=t,this._cr=i,this._lf=n,this._crlf=s,this._containsRTL=r,this._containsUnusualLineTerminators=o,this._isBasicASCII=a,this._normalizeEOL=l}_getEOL(e){let t=this._cr+this._lf+this._crlf,i=this._cr+this._crlf;return 0===t?e===rS.LF?"\n":"\r\n":i>t/2?"\r\n":"\n"}create(e){let t=this._getEOL(e),i=this._chunks;if(this._normalizeEOL&&("\r\n"===t&&(this._cr>0||this._lf>0)||"\n"===t&&(this._cr>0||this._crlf>0)))for(let s=0,r=i.length;s<r;s++){let e=i[s].buffer.replace(/\r\n|\r|\n/g,t);i[s]=new wP(e,CP(e))}let n=new DP(i,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:n,disposable:n}}getFirstLineText(e){return this._chunks[0].buffer.substr(0,e).split(/\r\n|\r|\n/)[0]}},IP=class{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(0===e.length)return;0===this.chunks.length&&Pa(e)&&(this.BOM=Ma,e=e.substr(1));let t=e.charCodeAt(e.length-1);t===En.CarriageReturn||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&0===e.length||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){let t=function(e,t){e.length=0,e[0]=0;let i=1,n=0,s=0,r=0,o=!0;for(let l=0,h=t.length;l<h;l++){let a=t.charCodeAt(l);a===En.CarriageReturn?l+1<h&&t.charCodeAt(l+1)===En.LineFeed?(r++,e[i++]=l+2,l++):(n++,e[i++]=l+1):a===En.LineFeed?(s++,e[i++]=l+1):o&&a!==En.Tab&&(a<32||a>126)&&(o=!1)}let a=new bP(_P(e),n,s,r,o);return e.length=0,a}(this._tmpLineStarts,e);this.chunks.push(new wP(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=xa(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=Fa(e)))}finish(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._finish(),new TP(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(0===this.chunks.length&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;let e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar),e.lineStarts=CP(e.buffer),this._previousChar===En.CarriageReturn&&this.cr++}}},xP=(Mt=class e{static createEmpty(t,i){let n=e.defaultTokenMetadata,s=new Uint32Array(2);return s[0]=t.length,s[1]=n,new e(s,t,i)}static createFromTextAndMetadata(t,i){let n=0,s="",r=[];for(let{text:e,metadata:o}of t)r.push(n+e.length,o),n+=e.length,s+=e;return new e(new Uint32Array(r),s,i)}static convertToEndOffset(e,t){let i=(e.length>>>1)-1;for(let n=0;n<i;n++)e[n<<1]=e[n+1<<1];e[i<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let i=0,n=(e.length>>>1)-1;for(;i<n;){let s=i+Math.floor((n-i)/2),r=e[s<<1];if(r===t)return s+1;r<t?i=s+1:r>t&&(n=s)}return i}constructor(e,t,i){this._lineTokensBrand=void 0,(e.length>1?e[e.length-2]:0)!==t.length&&Ri(Error("Token length and text length do not match!")),this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this.languageIdCodec=i}getTextLength(){return this._text.length}equals(t){return t instanceof e&&this.slicedEquals(t,0,this._tokensCount)}slicedEquals(e,t,i){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;let n=t<<1,s=n+(i<<1);for(let r=n;r<s;r++)if(this._tokens[r]!==e._tokens[r])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[1+(e<<1)]}getLanguageId(e){let t=this._tokens[1+(e<<1)],i=Zp.getLanguageId(t);return this.languageIdCodec.decodeLanguageId(i)}getStandardTokenType(e){let t=this._tokens[1+(e<<1)];return Zp.getTokenType(t)}getForeground(e){let t=this._tokens[1+(e<<1)];return Zp.getForeground(t)}getClassName(e){let t=this._tokens[1+(e<<1)];return Zp.getClassNameFromMetadata(t)}getInlineStyle(e,t){let i=this._tokens[1+(e<<1)];return Zp.getInlineStyleFromMetadata(i,t)}getPresentation(e){let t=this._tokens[1+(e<<1)];return Zp.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(t){return e.findIndexInTokensArray(this._tokens,t)}inflate(){return this}sliceAndInflate(e,t,i){return new LP(this,e,t,i)}sliceZeroCopy(e){return this.sliceAndInflate(e.start,e.endExclusive,0)}withInserted(t){if(0===t.length)return this;let i=0,n=0,s="",r=[],o=0;for(;;){let e=i<this._tokensCount?this._tokens[i<<1]:-1,a=n<t.length?t[n]:null;if(-1!==e&&(null===a||e<=a.offset)){s+=this._text.substring(o,e);let t=this._tokens[1+(i<<1)];r.push(s.length,t),i++,o=e}else{if(!a)break;if(a.offset>o){s+=this._text.substring(o,a.offset);let e=this._tokens[1+(i<<1)];r.push(s.length,e),o=a.offset}s+=a.text,r.push(s.length,a.tokenMetadata),n++}}return new e(new Uint32Array(r),s,this.languageIdCodec)}getTokensInRange(e){let t=new FP,i=this.findTokenIndexAtOffset(e.start),n=this.findTokenIndexAtOffset(e.endExclusive);for(let s=i;s<=n;s++){let i=new NO(this.getStartOffset(s),this.getEndOffset(s)).intersectionLength(e);i>0&&t.add(i,this.getMetadata(s))}return t.build()}getTokenText(e){let t=this.getStartOffset(e),i=this.getEndOffset(e);return this._text.substring(t,i)}forEach(e){let t=this.getCount();for(let i=0;i<t;i++)e(i)}toString(){let e="";return this.forEach(t=>{e+="[".concat(this.getTokenText(t),"]{").concat(this.getClassName(t),"}")}),e}},{_:Mt.defaultTokenMetadata=(Yp.None<<Xp.FONT_STYLE_OFFSET|Qp.DefaultForeground<<Xp.FOREGROUND_OFFSET|Qp.DefaultBackground<<Xp.BACKGROUND_OFFSET)>>>0},Mt),LP=class e{constructor(e,t,i,n){this._source=e,this._startOffset=t,this._endOffset=i,this._deltaOffset=n,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this.languageIdCodec=e.languageIdCodec,this._tokensCount=0;for(let s=this._firstTokenIndex,r=e.getCount();s<r&&!(e.getStartOffset(s)>=i);s++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(t){return t instanceof e&&(this._startOffset===t._startOffset&&this._endOffset===t._endOffset&&this._deltaOffset===t._deltaOffset&&this._source.slicedEquals(t._source,this._firstTokenIndex,this._tokensCount))}getCount(){return this._tokensCount}getStandardTokenType(e){return this._source.getStandardTokenType(this._firstTokenIndex+e)}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){let t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}getTokenText(e){let t=this._firstTokenIndex+e,i=this._source.getStartOffset(t),n=this._source.getEndOffset(t),s=this._source.getTokenText(t);return i<this._startOffset&&(s=s.substring(this._startOffset-i)),n>this._endOffset&&(s=s.substring(0,s.length-(n-this._endOffset))),s}forEach(e){for(let t=0;t<this.getCount();t++)e(t)}},AP=class e{static fromLineTokens(t){let i=[];for(let e=0;e<t.getCount();e++)i.push(new NP(t.getEndOffset(e)-t.getStartOffset(e),t.getMetadata(e)));return e.create(i)}static create(t){return new e(t)}constructor(e){this._tokenInfo=e}toLineTokens(e,t){return xP.createFromTextAndMetadata(this.map((t,i)=>({text:t.substring(e),metadata:i.metadata})),t)}forEach(e){let t=0;for(let i of this._tokenInfo)e(new NO(t,t+i.length),i),t+=i.length}map(e){let t=[],i=0;for(let n of this._tokenInfo){let s=new NO(i,i+n.length);t.push(e(s,n)),i+=n.length}return t}slice(t){let i=[],n=0;for(let e of this._tokenInfo){let s=n,r=s+e.length;if(r>t.start){if(s>=t.endExclusive)break;let n=Math.max(0,t.start-s),o=Math.max(0,r-t.endExclusive);i.push(new NP(e.length-n-o,e.metadata))}n+=e.length}return e.create(i)}append(t){let i=this._tokenInfo.concat(t._tokenInfo);return e.create(i)}},NP=class{constructor(e,t){this.length=e,this.metadata=t}},FP=class{constructor(){this._tokens=[]}add(e,t){this._tokens.push(new NP(e,t))}build(){return AP.create(this._tokens)}},OP=class extends qm{get debugName(){var e;return null!==(e=this._debugNameData.getDebugName(this))&&void 0!==e?e:"LazyObservableValue"}constructor(e,t,i,n){super(n),this._debugNameData=e,this._equalityComparator=i,this._isUpToDate=!0,this._deltas=[],this._updateCounter=0,this._value=t}get(){return this._update(),this._value}_update(){if(!this._isUpToDate)if(this._isUpToDate=!0,this._deltas.length>0){for(let t of this._deltas){var e;null===(e=Dm())||void 0===e||e.handleObservableUpdated(this,{change:t,didChange:!0,oldValue:"(unknown)",newValue:this._value,hadValue:!0});for(let e of this._observers)e.handleChange(this,t)}this._deltas.length=0}else{var t;null===(t=Dm())||void 0===t||t.handleObservableUpdated(this,{change:void 0,didChange:!0,oldValue:"(unknown)",newValue:this._value,hadValue:!0});for(let e of this._observers)e.handleChange(this,void 0)}}_beginUpdate(){if(this._updateCounter++,1===this._updateCounter)for(let e of this._observers)e.beginUpdate(this)}_endUpdate(){if(this._updateCounter--,0===this._updateCounter){this._update();let e=[...this._observers];for(let t of e)t.endUpdate(this)}}addObserver(e){let t=!this._observers.has(e)&&this._updateCounter>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){let t=this._observers.has(e)&&this._updateCounter>0;super.removeObserver(e),t&&e.endUpdate(this)}set(e,t,i){if(void 0===i&&this._equalityComparator(this._value,e))return;let n;t||(t=n=new ov(()=>{},()=>"Setting ".concat(this.debugName)));try{if(this._isUpToDate=!1,this._setValue(e),void 0!==i&&this._deltas.push(i),t.updateObserver({beginUpdate:()=>this._beginUpdate(),endUpdate:()=>this._endUpdate(),handleChange:(e,t)=>{},handlePossibleChange:e=>{}},this),this._updateCounter>1)for(let e of this._observers)e.handlePossibleChange(this)}finally{n&&n.finish()}}toString(){return"".concat(this.debugName,": ").concat(this._value)}_setValue(e){this._value=e}};function RP(e,t){var i,n;let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Im.ofCaller();return e.lazy?new OP(new Am(e.owner,e.debugName,void 0),t,null!==(i=e.equalsFn)&&void 0!==i?i:Qm,s):new lv(new Am(e.owner,e.debugName,void 0),t,null!==(n=e.equalsFn)&&void 0!==n?n:Qm,s)}var MP=class{constructor(){this._onDidChangeVisibleRanges=new Ro,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set,this._viewsChanged=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Im.ofCaller();return"string"==typeof e?new cv(e,void 0,t):new cv(void 0,e,t)}(this),this.visibleLineRanges=tv({owner:this,equalsFn:$m((e,t)=>e.equals(t))},e=>(this._viewsChanged.read(e),FO.joinMany([...this._views].map(t=>{var i,n;return null!==(i=null===(n=t.state.read(e))||void 0===n?void 0:n.visibleLineRanges)&&void 0!==i?i:[]}))))}attachView(){let e=new BP(t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})});return this._views.add(e),this._viewsChanged.trigger(void 0),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0}),this._viewsChanged.trigger(void 0)}},PP=class{constructor(e,t){this.visibleLineRanges=e,this.stabilized=t}equals(e){return this===e||!(!Mr(this.visibleLineRanges,e.visibleLineRanges,(e,t)=>e.equals(t))||this.stabilized!==e.stabilized)}},BP=class{get state(){return this._state}constructor(e){this.handleStateChange=e,this._state=RP({owner:this,equalsFn:Xm((e,t)=>e.equals(t))},void 0)}setVisibleLines(e,t){let i=new PP(e.map(e=>new FO(e.startLineNumber,e.endLineNumber+1)),t);this._state.set(i,void 0,void 0),this.handleStateChange(i)}},UP=class extends Co{get lineRanges(){return this._lineRanges}constructor(e){super(),this._refreshTokens=e,this.runner=this._register(new Rl(()=>this.update(),50)),this._computedLineRanges=[],this._lineRanges=[]}update(){Mr(this._computedLineRanges,this._lineRanges,(e,t)=>e.equals(t))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(e){this._lineRanges=e.visibleLineRanges,e.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}},HP=class extends Co{get backgroundTokenizationState(){return this._backgroundTokenizationState}constructor(e,t){super(),this._languageIdCodec=e,this._textModel=t,this._onDidChangeTokens=this._register(new Ro),this.onDidChangeTokens=this._onDidChangeTokens.event}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}};function WP(e,t){let i=e.gotoNextSibling(),n=t.gotoNextSibling();if(i!==n)throw Error("Trees are out of sync");return i&&n}function VP(e,t){let i=e.gotoParent(),n=t.gotoParent();if(i!==n)throw Error("Trees are out of sync");return i&&n}function zP(e,t,i){let n=e.gotoFirstChild(),s=t.gotoFirstChild();if(n!==s)throw Error("Trees are out of sync");if(0===i)return n&&s;for(let r=1;r<=i;r++){let i=e.gotoNextSibling(),n=t.gotoNextSibling();if(i!==n)throw Error("Trees are out of sync");if(!i||!n)return!1}return n&&s}function KP(e,t){do{if(e.currentNode.nextSibling)return WP(e,t);e.currentNode.parent&&VP(e,t)}while(e.currentNode.nextSibling||e.currentNode.parent);return!1}function qP(e,t){let i=t.walk();i.resetTo(e);let n=e.currentNode;do{if(i.currentNode.previousSibling&&i.currentNode.endIndex-i.currentNode.startIndex!==0)i.gotoPreviousSibling();else{for(;!i.currentNode.previousSibling&&i.currentNode.parent;)i.gotoParent();i.gotoPreviousSibling()}}while(i.currentNode.endIndex>n.startIndex&&(i.currentNode.parent||i.currentNode.previousSibling)&&i.currentNode.id!==n.id);if(i.currentNode.id!==n.id&&i.currentNode.endIndex<=n.startIndex)return i.currentNode}var GP,jP=class extends Co{constructor(e,t,i,n,s,r,o){super(),this.languageId=e,this._ranges=t,this._parser=i,this._parserClass=n,this.textModel=s,this._logService=r,this._telemetryService=o,this._tree=av(this,void 0),this.tree=this._tree,this._treeLastParsedVersion=av(this,-1),this.treeLastParsedVersion=this._treeLastParsedVersion,this._onDidChangeContentQueue=new Nl,this._tree=av(this,void 0),this.tree=this._tree,this._register(vo(()=>{var e,t,i;null!==(e=this._tree.get())&&void 0!==e&&e.delete(),null!==(t=this._lastFullyParsed)&&void 0!==t&&t.delete(),null!==(i=this._lastFullyParsedWithEdits)&&void 0!==i&&i.delete(),this._parser.delete()})),this.handleContentChange(void 0,this._ranges)}handleContentChange(e,t){let i=this.textModel.getVersionId(),n=[];t&&(n=this._setRanges(t)),e&&this._applyEdits(e.changes),this._onDidChangeContentQueue.clearPending(),this._onDidChangeContentQueue.schedule(async()=>{if(this._store.isDisposed)return;let e,t=this._lastFullyParsed;this._lastFullyParsedWithEdits&&this._lastFullyParsed&&(e=this._findChangedNodes(this._lastFullyParsedWithEdits,this._lastFullyParsed));let s=await this._parseAndUpdateTree(i);if(s){let r;e?t&&e&&(r=this._findTreeChanges(s,e,n)):this._ranges&&(r=this._ranges.map(e=>({newRange:new dE(e.startPosition.row+1,e.startPosition.column+1,e.endPosition.row+1,e.endPosition.column+1),oldRangeLength:e.endIndex-e.startIndex,newRangeStartOffset:e.startIndex,newRangeEndOffset:e.endIndex}))),r||(r=[{newRange:this.textModel.getFullModelRange(),newRangeStartOffset:0,newRangeEndOffset:this.textModel.getValueLength()}]);let o=this._tree.get();rv(e=>{this._tree.set(s,e,{ranges:r,versionId:i}),this._treeLastParsedVersion.set(i,e)}),null===o||void 0===o||o.delete()}})}get ranges(){return this._ranges}getInjectionTrees(e,t){}_applyEdits(e){for(let n of e){var t,i;let e=RO.ofRange(dE.lift(n.range)),s=RO.ofText(n.text),r=0===n.text.length?s:e.add(s),o={startIndex:n.rangeOffset,oldEndIndex:n.rangeOffset+n.rangeLength,newEndIndex:n.rangeOffset+n.text.length,startPosition:{row:n.range.startLineNumber-1,column:n.range.startColumn-1},oldEndPosition:{row:n.range.endLineNumber-1,column:n.range.endColumn-1},newEndPosition:{row:n.range.startLineNumber+r.lineCount-1,column:r.lineCount?r.columnCount:n.range.endColumn+r.columnCount}};null!==(t=this._tree.get())&&void 0!==t&&t.edit(o),null===(i=this._lastFullyParsedWithEdits)||void 0===i||i.edit(o)}}_findChangedNodes(e,t){if(this._ranges&&this._ranges.every(t=>t.startPosition.row!==e.rootNode.startPosition.row)||0!==e.rootNode.startPosition.row)return[];let i=e.walk(),n=t.walk(),s=[],r=!0;do{if(i.currentNode.hasChanges){let t=i.currentNode.children,a=[],l=t.filter((e,t)=>!!(null!==e&&void 0!==e&&e.hasChanges||n.currentNode.children.length<=t)&&(a.push(t),!0));if(0===l.length||i.currentNode.hasError!==n.currentNode.hasError){for(var o;i.currentNode.parent&&r&&!i.currentNode.isNamed;)r=VP(i,n);let t=i.currentNode,a=null!==(o=qP(i,e))&&void 0!==o?o:t;s.push({startIndex:a.startIndex,endIndex:t.endIndex,startPosition:a.startPosition,endPosition:t.endPosition}),r=KP(i,n)}else l.length>=1&&(r=zP(i,n,a[0]))}else r=KP(i,n)}while(r);return i.delete(),n.delete(),s}_findTreeChanges(e,t,i){let n=0,s=[];for(let r=0;r<t.length;r++){let o=t[r];if(s.length>0&&o.startIndex>=s[s.length-1].newRangeStartOffset&&o.endIndex<=s[s.length-1].newRangeEndOffset)continue;let a=e.walk(),l=()=>a.startIndex<o.startIndex&&a.endIndex>o.endIndex;for(;l();){let e=a.gotoFirstChild(),t=!1;for(;e;){if(l()&&a.currentNode.isNamed){t=!0;break}e=a.gotoNextSibling()}if(!t){a.gotoParent();break}if(0===a.currentNode.childCount)break}let h=a.currentNode.startPosition,d=a.currentNode.endPosition,c=a.currentNode.startIndex,u=a.currentNode.endIndex,g={newRange:new dE(h.row+1,h.column+1,d.row+1,d.column+1),newRangeStartOffset:c,newRangeEndOffset:u};n<i.length&&QP(i[n],{startIndex:c,endIndex:u})?(i[n].startIndex<g.newRangeStartOffset&&(g.newRange=g.newRange.setStartPosition(i[n].startPosition.row+1,i[n].startPosition.column+1),g.newRangeStartOffset=i[n].startIndex),i[n].endIndex>g.newRangeEndOffset&&(g.newRange=g.newRange.setEndPosition(i[n].endPosition.row+1,i[n].endPosition.column+1),g.newRangeEndOffset=i[n].endIndex),n++):n<i.length&&i[n].endIndex<g.newRangeStartOffset&&s.push({newRange:new dE(i[n].startPosition.row+1,i[n].startPosition.column+1,i[n].endPosition.row+1,i[n].endPosition.column+1),newRangeStartOffset:i[n].startIndex,newRangeEndOffset:i[n].endIndex}),s.length>0&&s[s.length-1].newRangeEndOffset>=g.newRangeStartOffset?(s[s.length-1].newRange=dE.fromPositions(s[s.length-1].newRange.getStartPosition(),g.newRange.getEndPosition()),s[s.length-1].newRangeEndOffset=g.newRangeEndOffset):s.push(g)}return this._constrainRanges(s)}_constrainRanges(e){if(!this._ranges)return e;let t=[],i=0,n=0;for(;i<e.length&&n<this._ranges.length;){let s=e[i],r=this._ranges[n];if(s.newRangeEndOffset<r.startIndex)i++;else if(s.newRangeStartOffset>r.endIndex)n++;else{let e=Math.max(s.newRangeStartOffset,r.startIndex),n=Math.min(s.newRangeEndOffset,r.endIndex),o=s.newRange.intersectRanges(new dE(r.startPosition.row+1,r.startPosition.column+1,r.endPosition.row+1,r.endPosition.column+1));t.push({newRange:o,newRangeEndOffset:n,newRangeStartOffset:e}),n<s.newRangeEndOffset?(s.newRange=dE.fromPositions(o.getEndPosition(),s.newRange.getEndPosition()),s.newRangeStartOffset=n+1):i++}}return t}async _parseAndUpdateTree(e){var t,i;let n=await this._parse();if(n)return null!==(t=this._lastFullyParsed)&&void 0!==t&&t.delete(),this._lastFullyParsed=n.copy(),null!==(i=this._lastFullyParsedWithEdits)&&void 0!==i&&i.delete(),this._lastFullyParsedWithEdits=n.copy(),n;this._tree.get()||this._parser.reset()}_parse(){let e=GP.Full;return this._tree.get()&&(e=GP.Incremental),this._parseAndYield(e)}async _parseAndYield(e){let t,i=0,n=0,s=this.textModel.getVersionId(),r=function(){let e=performance.now();return function(t){let i=performance.now();return i-e>50&&(e=i,!0)}}();do{let e=performance.now();t=this._parser.parse((e,t)=>this._parseCallback(e),this._tree.get(),{progressCallback:r,includedRanges:this._ranges}),i+=performance.now()-e,n++,await new Promise(e=>ns(e))}while(!this._store.isDisposed&&!t&&s===this.textModel.getVersionId());return this._sendParseTimeTelemetry(e,i,n),t&&s===this.textModel.getVersionId()?t:void 0}_parseCallback(e){try{return this.textModel.getTextBuffer().getNearestChunk(e)}catch(e){this._logService.debug("Error getting chunk for tree-sitter parsing",e)}}_setRanges(e){let t=[];if(this._ranges)for(let i of e){let e=!1;for(let t=0;t<this._ranges.length;t++){let n=this._ranges[t];if(YP(n,i)||QP(n,i)){e=!0;break}}e||t.push(i)}else t.push(...e);return this._ranges=e,t}_sendParseTimeTelemetry(e,t,i){this._logService.debug("Tree parsing (".concat(e,") took ").concat(t," ms and ").concat(i," passes.")),e===GP.Full?this._telemetryService.publicLog2("treeSitter.fullParse",{languageId:this.languageId,time:t,passes:i}):this._telemetryService.publicLog2("treeSitter.incrementalParse",{languageId:this.languageId,time:t,passes:i})}createParsedTreeSync(e){let t=new this._parserClass;t.setLanguage(this._parser.language);let i=t.parse(e);return t.delete(),null!==i&&void 0!==i?i:void 0}};function YP(e,t){return e.startPosition.row===t.startPosition.row&&e.startPosition.column===t.startPosition.column&&e.endPosition.row===t.endPosition.row&&e.endPosition.column===t.endPosition.column&&e.startIndex===t.startIndex&&e.endIndex===t.endIndex}function QP(e,t){return e.startIndex<=t.startIndex&&e.endIndex>=t.startIndex||t.startIndex<=e.startIndex&&t.endIndex>=e.startIndex}jP=ki([Ei(5,Np),Ei(6,kn)],jP),function(e){e.Full="fullParse",e.Incremental="incrementalParse"}(GP||(GP={}));var $P=new class{clone(){return this}equals(e){return this===e}};var XP=class{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,i){if(e>=this._store.length)return;if(0===t)return void this.insert(e,i);if(0===i)return void this.delete(e,t);let n=this._store.slice(0,e),s=this._store.slice(e+t),r=function(e,t){let i=[];for(let n=0;n<e;n++)i[n]=t;return i}(i,this._default);this._store=n.concat(r,s)}delete(e,t){0===t||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(0===t||e>=this._store.length)return;let i=[];for(let n=0;n<t;n++)i[n]=this._default;this._store=Hr(this._store,e,i)}};var ZP=(new Uint32Array).buffer,JP=class e{static deleteBeginning(t,i){return null===t||t===ZP?t:e.delete(t,0,i)}static deleteEnding(t,i){if(null===t||t===ZP)return t;let n=eB(t),s=n[n.length-2];return e.delete(t,i,s)}static delete(e,t,i){if(null===e||e===ZP||t===i)return e;let n=eB(e),s=n.length>>>1;if(0===t&&n[n.length-2]===i)return ZP;let r,o,a=xP.findIndexInTokensArray(n,t),l=a>0?n[a-1<<1]:0;if(i<n[a<<1]){let r=i-t;for(let e=a;e<s;e++)n[e<<1]-=r;return e}l===t?(r=a<<1,o=l):(n[a<<1]=t,r=a+1<<1,o=t);let h=i-t;for(let c=a+1;c<s;c++){let e=n[c<<1]-h;e>o&&(n[r++]=e,n[r++]=n[1+(c<<1)],o=e)}if(r===n.length)return e;let d=new Uint32Array(r);return d.set(n.subarray(0,r),0),d.buffer}static append(e,t){if(t===ZP)return e;if(e===ZP)return t;if(null===e)return e;if(null===t)return null;let i=eB(e),n=eB(t),s=n.length>>>1,r=new Uint32Array(i.length+n.length);r.set(i,0);let o=i.length,a=i[i.length-2];for(let l=0;l<s;l++)r[o++]=n[l<<1]+a,r[o++]=n[1+(l<<1)];return r.buffer}static insert(e,t,i){if(null===e||e===ZP)return e;let n=eB(e),s=n.length>>>1,r=xP.findIndexInTokensArray(n,t);r>0&&n[r-1<<1]===t&&r--;for(let o=r;o<s;o++)n[o<<1]+=i;return e}};function eB(e){return e instanceof Uint32Array?e:new Uint32Array(e)}var tB,iB=class e{static deserialize(t,i,n){let s=new Uint32Array(t.buffer),r=mg(t,i),o=mg(t,i+=4);i+=4;let a=[];for(let e=0;e<o;e++){let e=mg(t,i);i+=4,a.push(s.subarray(i/4,i/4+e/4)),i+=e}return n.push(new e(r,a)),i}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineRange(){return new FO(this._startLineNumber,this._startLineNumber+this._tokens.length)}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}serializeSize(){let e=0;e+=4,e+=4;for(let t=0;t<this._tokens.length;t++){let i=this._tokens[t];if(!(i instanceof Uint32Array))throw Error("Not supported!");e+=4,e+=i.byteLength}return e}serialize(e,t){vg(e,this._startLineNumber,t),t+=4,vg(e,this._tokens.length,t),t+=4;for(let i=0;i<this._tokens.length;i++){let n=this._tokens[i];if(!(n instanceof Uint32Array))throw Error("Not supported!");vg(e,n.byteLength,t),t+=4,e.set(new Uint8Array(n.buffer),t),t+=n.byteLength}return t}applyEdit(e,t){let[i,n]=cE(t);this._acceptDeleteRange(e),this._acceptInsertText(new hE(e.startLineNumber,e.startColumn),i,n)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;let t=e.startLineNumber-this._startLineNumber,i=e.endLineNumber-this._startLineNumber;if(i<0){let e=i-t;return void(this._startLineNumber-=e)}if(!(t>=this._tokens.length)){if(t<0&&i>=this._tokens.length)return this._startLineNumber=0,void(this._tokens=[]);if(t===i)return void(this._tokens[t]=JP.delete(this._tokens[t],e.startColumn-1,e.endColumn-1));if(t>=0)if(this._tokens[t]=JP.deleteEnding(this._tokens[t],e.startColumn-1),i<this._tokens.length){let n=JP.deleteBeginning(this._tokens[i],e.endColumn-1);this._tokens[t]=JP.append(this._tokens[t],n),this._tokens.splice(t+1,i-t)}else this._tokens[t]=JP.append(this._tokens[t],null),this._tokens=this._tokens.slice(0,t+1);else{let n=-t;this._startLineNumber-=n,this._tokens[i]=JP.deleteBeginning(this._tokens[i],e.endColumn-1),this._tokens=this._tokens.slice(i)}}}_acceptInsertText(e,t,i){if(0===t&&0===i)return;let n=e.lineNumber-this._startLineNumber;if(n<0)this._startLineNumber+=t;else if(!(n>=this._tokens.length)){if(0===t)return void(this._tokens[n]=JP.insert(this._tokens[n],e.column-1,i));this._tokens[n]=JP.deleteEnding(this._tokens[n],e.column-1),this._tokens[n]=JP.insert(this._tokens[n],e.column-1,i),this._insertLines(e.lineNumber,t)}}_insertLines(e,t){if(0===t)return;let i=[];for(let n=0;n<t;n++)i[n]=null;this._tokens=Hr(this._tokens,e,i)}},nB=class{static deserialize(e){let t=0,i=mg(e,t);t+=4;let n=[];for(let s=0;s<i;s++)t=iB.deserialize(e,t,n);return n}constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){let i=this._tokens[this._tokens.length-1];if(i.endLineNumber+1===e)return void i.appendLineTokens(t)}this._tokens.push(new iB(e,[t]))}finalize(){return this._tokens}serialize(){let e=this._serializeSize(),t=new Uint8Array(e);return this._serialize(t),t}_serializeSize(){let e=0;e+=4;for(let t=0;t<this._tokens.length;t++)e+=this._tokens[t].serializeSize();return e}_serialize(e){let t=0;vg(e,this._tokens.length,t),t+=4;for(let i=0;i<this._tokens.length;i++)t=this._tokens[i].serialize(e,t)}};!function(e){e[e.CHEAP_TOKENIZATION_LENGTH_LIMIT=2048]="CHEAP_TOKENIZATION_LENGTH_LIMIT"}(tB||(tB={}));var sB=class{constructor(e,t){this.tokenizationSupport=t,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new aB(e)}getStartState(e){return this.store.getStartState(e,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}},rB=class extends sB{constructor(e,t,i,n){super(e,t),this._textModel=i,this._languageIdCodec=n}updateTokensUntilLine(e,t){let i=this._textModel.getLanguageId();for(;;){let n=this.getFirstInvalidLine();if(!n||n.lineNumber>t)break;let s=this._textModel.getLineContent(n.lineNumber),r=dB(this._languageIdCodec,i,this.tokenizationSupport,s,!0,n.startState);e.add(n.lineNumber,r.tokens),this.store.setEndState(n.lineNumber,r.endState)}}getTokenTypeIfInsertingCharacter(e,t){let i=this.getStartState(e.lineNumber);if(!i)return $p.Other;let n=this._textModel.getLanguageId(),s=this._textModel.getLineContent(e.lineNumber),r=s.substring(0,e.column-1)+t+s.substring(e.column-1),o=new xP(dB(this._languageIdCodec,n,this.tokenizationSupport,r,!0,i).tokens,r,this._languageIdCodec);if(0===o.getCount())return $p.Other;let a=o.findTokenIndexAtOffset(e.column-1);return o.getStandardTokenType(a)}tokenizeLinesAt(e,t){let i=this.getStartState(e);if(!i)return null;let n=this._textModel.getLanguageId(),s=[],r=i;for(let o of t){let e=dB(this._languageIdCodec,n,this.tokenizationSupport,o,!0,r);s.push(new xP(e.tokens,o,this._languageIdCodec)),r=e.endState}return s}hasAccurateTokensForLine(e){return e<this.store.getFirstInvalidEndStateLineNumberOrMax()}isCheapToTokenize(e){let t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t||e===t&&this._textModel.getLineLength(e)<tB.CHEAP_TOKENIZATION_LENGTH_LIMIT}tokenizeHeuristically(e,t,i){if(i<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(t<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(e,i),{heuristicTokens:!1};let n=this.guessStartState(t),s=this._textModel.getLanguageId();for(let r=t;r<=i;r++){let t=this._textModel.getLineContent(r),i=dB(this._languageIdCodec,s,this.tokenizationSupport,t,!0,n);e.add(r,i.tokens),n=i.endState}return{heuristicTokens:!0}}guessStartState(e){let{likelyRelevantLines:t,initialState:i}=oB(this._textModel,e,this);i||(i=this.tokenizationSupport.getInitialState());let n=this._textModel.getLanguageId(),s=i;for(let r of t)s=dB(this._languageIdCodec,n,this.tokenizationSupport,r,!1,s).endState;return s}};function oB(e,t,i){let n=e.getLineFirstNonWhitespaceColumn(t),s=[],r=null;for(let o=t-1;n>1&&o>=1;o--){let t=e.getLineFirstNonWhitespaceColumn(o);if(0!==t&&t<n&&(s.push(e.getLineContent(o)),n=t,r=null===i||void 0===i?void 0:i.getStartState(o),r))break}return s.reverse(),{likelyRelevantLines:s,initialState:null!==r&&void 0!==r?r:void 0}}var aB=class{constructor(e){this.lineCount=e,this._tokenizationStateStore=new lB,this._invalidEndStatesLineNumbers=new hB,this._invalidEndStatesLineNumbers.addRange(new NO(1,e+1))}getEndState(e){return this._tokenizationStateStore.getEndState(e)}setEndState(e,t){if(!t)throw new qi("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(e);let i=this._tokenizationStateStore.setEndState(e,t);return i&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new NO(e+1,e+2)),i}acceptChange(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new NO(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(let t of e){let[e]=cE(t.text);this.acceptChange(new FO(t.range.startLineNumber,t.range.endLineNumber+1),e+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new NO(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||2**53-1}allStatesValid(){return null===this._invalidEndStatesLineNumbers.min}getStartState(e,t){return 1===e?t:this.getEndState(e-1)}getFirstInvalidLine(e){let t=this.getFirstInvalidEndStateLineNumber();if(null===t)return null;let i=this.getStartState(t,e);if(!i)throw new qi("Start state must be defined");return{lineNumber:t,startState:i}}},lB=class{constructor(){this._lineEndStates=new XP(null)}getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){let i=this._lineEndStates.get(e);return(!i||!i.equals(t))&&(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let i=e.length;t>0&&i>0&&(i--,t--),this._lineEndStates.replace(e.startLineNumber,i,t)}acceptChanges(e){for(let t of e){let[e]=cE(t.text);this.acceptChange(new FO(t.range.startLineNumber,t.range.endLineNumber+1),e+1)}}},hB=class{constructor(){this._ranges=[]}getRanges(){return this._ranges}get min(){return 0===this._ranges.length?null:this._ranges[0].start}removeMin(){if(0===this._ranges.length)return null;let e=this._ranges[0];return e.start+1===e.endExclusive?this._ranges.shift():this._ranges[0]=new NO(e.start+1,e.endExclusive),e.start}delete(e){let t=this._ranges.findIndex(t=>t.contains(e));if(-1!==t){let i=this._ranges[t];i.start===e?i.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new NO(e+1,i.endExclusive):i.endExclusive===e+1?this._ranges[t]=new NO(i.start,e):this._ranges.splice(t,1,new NO(i.start,e),new NO(e+1,i.endExclusive))}}addRange(e){NO.addRange(e,this._ranges)}addRangeAndResize(e,t){let i=0;for(;!(i>=this._ranges.length||e.start<=this._ranges[i].endExclusive);)i++;let n=i;for(;!(n>=this._ranges.length||e.endExclusive<this._ranges[n].start);)n++;let s=t-e.length;for(let r=n;r<this._ranges.length;r++)this._ranges[r]=this._ranges[r].delta(s);if(i===n){let n=new NO(e.start,e.start+t);n.isEmpty||this._ranges.splice(i,0,n)}else{let t=new NO(Math.min(e.start,this._ranges[i].start),Math.max(e.endExclusive,this._ranges[n-1].endExclusive)+s);t.isEmpty?this._ranges.splice(i,n-i):this._ranges.splice(i,n-i,t)}}toString(){return this._ranges.map(e=>e.toString()).join(" + ")}};function dB(e,t,i,n,s,r){let o=null;if(i)try{o=i.tokenizeEncoded(n,s,r.clone())}catch(e){Ri(e)}return o||(o=function(e,t){let i=new Uint32Array(2);return i[0]=0,i[1]=(e<<Xp.LANGUAGEID_OFFSET|$p.Other<<Xp.TOKEN_TYPE_OFFSET|Yp.None<<Xp.FONT_STYLE_OFFSET|Qp.DefaultForeground<<Xp.FOREGROUND_OFFSET|Qp.DefaultBackground<<Xp.BACKGROUND_OFFSET)>>>0,new DL(i,null===t?$P:t)}(e.encodeLanguageId(t),r)),xP.convertToEndOffset(o.tokens,n.length),o}var cB,uB=class{constructor(e,t){this._tokenizerWithStateStore=e,this._backgroundTokenStore=t,this._isDisposed=!1,this._isScheduled=!1}dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,Tl(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){let t=Date.now()+e.timeRemaining(),i=()=>{this._isDisposed||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?ns(i):this._beginBackgroundTokenization())};i()}_backgroundTokenizeForAtLeast1ms(){let e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new nB,i=To.create(!1);do{if(i.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break}while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return!!this._tokenizerWithStateStore&&!this._tokenizerWithStateStore.store.allStatesValid()}_tokenizeOneInvalidLine(e){var t;let i=null===(t=this._tokenizerWithStateStore)||void 0===t?void 0:t.getFirstInvalidLine();return i?(this._tokenizerWithStateStore.updateTokensUntilLine(e,i.lineNumber),i.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new FO(e,t))}},gB=class e{get children(){return this._children}get length(){return this._length}constructor(e){this.height=e,this._children=[],this._length=0}static create(t,i){let n=new e(t.height+1);return n.appendChild(t),n.appendChild(i),n}canAppendChild(){return this._children.length<3}appendChild(e){if(!this.canAppendChild())throw Error("Cannot insert more than 3 children in a ListNode");this._children.push(e),this._length+=e.length,this._updateParentLength(e.length),pB(e)||(e.parent=this)}_updateParentLength(e){let t=this.parent;for(;t;)t._length+=e,t=t.parent}unappendChild(){let e=this._children.pop();return this._length-=e.length,this._updateParentLength(-e.length),e}prependChild(e){if(this._children.length>=3)throw Error("Cannot prepend more than 3 children in a ListNode");this._children.unshift(e),this._length+=e.length,this._updateParentLength(e.length),pB(e)||(e.parent=this)}unprependChild(){let e=this._children.shift();return this._length-=e.length,this._updateParentLength(-e.length),e}lastChild(){return this._children[this._children.length-1]}dispose(){this._children.splice(0,this._children.length)}};function pB(e){return void 0!==e.token}function fB(e,t){let i,n=e,s=[];for(;;){if(t.height===n.height){i=t;break}if(pB(n))throw Error("unexpected");s.push(n),n=n.lastChild()}for(let r=s.length-1;r>=0;r--){let e=s[r];i&&(e.children.length>=3?i=gB.create(e.unappendChild(),i):(e.appendChild(i),i=void 0))}if(i){let t=new gB(i.height+1);return t.appendChild(e),t.appendChild(i),t}return e}function mB(e,t){return e.height===t.height?gB.create(e,t):e.height>t.height?fB(e,t):function(e,t){let i=e,n=[];for(;t.height!==i.height;){if(pB(i))throw Error("unexpected");n.push(i),i=i.children[0]}let s=t;for(let r=n.length-1;r>=0;r--){let e=n[r];s&&(e.children.length>=3?s=gB.create(s,e.unprependChild()):(e.prependChild(s),s=void 0))}return s?gB.create(s,e):e}(t,e)}!function(e){e[e.None=0]="None",e[e.ViewportGuess=1]="ViewportGuess",e[e.EditGuess=2]="EditGuess",e[e.Accurate=3]="Accurate"}(cB||(cB={}));var vB=class e{get root(){return this._root}constructor(e){this._textModel=e,this._root=this.createEmptyRoot()}createEmptyRoot(){return{length:this._textModel.getValueLength(),token:0,height:0,tokenQuality:cB.None}}buildStore(e,t){this._root=this.createFromUpdates(e,t)}createFromUpdates(e,t){if(0===e.length)return this.createEmptyRoot();let i={length:e[0].length,token:e[0].token,height:0,tokenQuality:t};for(let n=1;n<e.length;n++)i=fB(i,{length:e[n].length,token:e[n].token,height:0,tokenQuality:t});return i}update(e,t,i){0!==t.length&&this.replace(e,t[0].startOffsetInclusive,t,i)}delete(e,t){this.replace(e,t,[],cB.EditGuess)}replace(e,t,i,n){let s,r=t+e,o=[],a=[],l=[{node:this._root,offset:0}];for(;l.length>0;){let e=l.pop(),i=e.offset;if(i<t&&i+e.node.length<=t)pB(e.node)||(e.node.parent=void 0),o.push(e.node);else if(pB(e.node)&&i<t&&o.push({length:t-i,token:e.node.token,height:0,tokenQuality:e.node.tokenQuality}),!(t<=i&&i+e.node.length<=r)){if(i>=r){pB(e.node)||(e.node.parent=void 0),a.push(e.node);continue}if(pB(e.node)&&i+e.node.length>r){a.push({length:i+e.node.length-r,token:e.node.token,height:0,tokenQuality:e.node.tokenQuality});continue}if(!pB(e.node)){let t=i+e.node.length;for(let i=e.node.children.length-1;i>=0;i--)t-=e.node.children[i].length,l.push({node:e.node.children[i],offset:t})}}}s=i.length>0?o.concat(this.createFromUpdates(i,n),a):o.concat(a);let h=s[0];for(let d=1;d<s.length;d++)h=mB(h,s[d]);this._root=null!==h&&void 0!==h?h:this.createEmptyRoot()}traverseInOrderInRange(e,t,i){let n=[{node:this._root,offset:0}];for(;n.length>0;){let{node:s,offset:r}=n.pop();if(!(r+s.length<=e||r>=t)){if(i(s,r))return;if(!pB(s)){let e=r+s.length;for(let t=s.children.length-1;t>=0;t--)e-=s.children[t].length,n.push({node:s.children[t],offset:e})}}}}getTokenAt(e){let t;return this.traverseInOrderInRange(e,this._root.length,(e,i)=>!!pB(e)&&(t={token:e.token,startOffsetInclusive:i,length:e.length},!0)),t}getTokensInRange(e,t){let i=[];return this.traverseInOrderInRange(e,t,(n,s)=>{if(pB(n)){let r=n.length,o=s;s<e&&s+n.length>t?(o=e,r=t-e):s<e?(r-=e-s,o=e):s+n.length>t&&(r-=s+n.length-t),i.push({token:n.token,startOffsetInclusive:o,length:r})}return!1}),i}markForRefresh(e,t){this.traverseInOrderInRange(e,t,e=>(pB(e)&&(e.tokenQuality=cB.None),!1))}rangeHasTokens(e,t,i){let n=!0;return this.traverseInOrderInRange(e,t,e=>(pB(e)&&e.tokenQuality<i&&(n=!1),!1)),n}rangeNeedsRefresh(e,t){let i=!1;return this.traverseInOrderInRange(e,t,e=>(pB(e)&&e.tokenQuality!==cB.Accurate&&(i=!0),!1)),i}getNeedsRefresh(){let e=[];return this.traverseInOrderInRange(0,this._textModel.getValueLength(),(t,i)=>(pB(t)&&t.tokenQuality!==cB.Accurate&&(e.length>0&&e[e.length-1].endOffset===i?e[e.length-1].endOffset+=t.length:e.push({startOffset:i,endOffset:i+t.length})),!1)),e}deepCopy(){let t=new e(this._textModel);return t._root=this._copyNodeIterative(this._root),t}_copyNodeIterative(e){let t=pB(e)?{length:e.length,token:e.token,tokenQuality:e.tokenQuality,height:e.height}:new gB(e.height),i=[[e,t]];for(;i.length>0;){let[e,t]=i.pop();if(!pB(e))for(let n of e.children){let e=pB(n)?{length:n.length,token:n.token,tokenQuality:n.tokenQuality,height:n.height}:new gB(n.height);t.appendChild(e),i.push([n,e])}}return t}printTree(){let e=[],t=[[arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._root,0]];for(;t.length>0;){let[i,n]=t.pop(),s="  ".repeat(n);if(pB(i))e.push("".concat(s,"Leaf(length: ").concat(i.length,", token: ").concat(i.token,", refresh: ").concat(i.tokenQuality,")\n"));else{e.push("".concat(s,"List(length: ").concat(i.length,")\n"));for(let e=i.children.length-1;e>=0;e--)t.push([i.children[e],n+1])}}return e.join("")}dispose(){let e=[[this._root,!1]];for(;e.length>0;){let[t,i]=e.pop();if(!pB(t))if(i)t.dispose(),t.parent=void 0;else{e.push([t,!0]);for(let i=t.children.length-1;i>=0;i--)e.push([t.children[i],!1])}}this._root=void 0}},_B=fn("treeSitterThemeService");function bB(e,t){let i,n=!0;return function(e,t){var i;let n=new bo,s=nv({owner:e.owner,debugName:e.debugName,debugReferenceFn:null!==(i=e.debugReferenceFn)&&void 0!==i?i:t,changeTracker:e.changeTracker},(e,i)=>{n.clear(),t(e,i,n)});return vo(()=>{s.dispose(),n.dispose()})}({changeTracker:{createChangeSummary:()=>({deltas:[],didChange:!1}),handleChange:(t,i)=>{if(t.didChange(e)){let e=t.change;void 0!==e&&i.deltas.push(e),i.didChange=!0}return!0}}},(s,r)=>{let o=e.read(s),a=i;r.didChange&&(i=o,t(o,a,r.deltas)),n&&(n=!1,i=o)})}function CB(e){return{createChangeSummary:e=>({changes:[]}),handleChange(t,i){for(let n in e)t.didChange(e[n])&&i.changes.push({key:n,change:t.change});return!0},beforeUpdate(t,i){for(let n in e){if("changes"===n)throw new qi('property name "changes" is reserved for change tracking');i[n]=e[n].read(t)}}}}var yB=class extends Co{get _textModel(){return this._tree.textModel}constructor(e,t,i,n,s){super(),this._tree=e,this._highlightingQueries=t,this._languageIdCodec=i,this._visibleLineRanges=n,this._treeSitterThemeService=s,this._onDidChangeTokens=this._register(new Ro),this.onDidChangeTokens=this._onDidChangeTokens.event,this._onDidCompleteBackgroundTokenization=this._register(new Ro),this.onDidChangeBackgroundTokenization=this._onDidCompleteBackgroundTokenization.event,this._encodedLanguageId=this._languageIdCodec.encodeLanguageId(this._tree.languageId),this._register(bB(this._treeSitterThemeService.onChange,()=>{this._updateTheme()})),this._tokenStore=this._register(new vB(this._textModel)),this._accurateVersion=this._textModel.getVersionId(),this._guessVersion=this._textModel.getVersionId(),this._tokenStore.buildStore(this._createEmptyTokens(),cB.None),this._register(iv(e=>{let t=this._visibleLineRanges.read(e);this._parseAndTokenizeViewPort(t)})),this._register(nv({owner:this,changeTracker:CB({tree:this._tree.tree})},(e,t)=>{var i;let n=null===(i=t.changes.at(0))||void 0===i?void 0:i.change;if(t.changes.length>1)throw new qi("The tree changed twice in one transaction. This is currently not supported and should not happen.");if(n){if(this.hasTokens())for(let e of n.ranges)this._markForRefresh(e.newRange);this.hasTokens()?this._handleTreeUpdate(n.ranges,n.versionId):this._firstTreeUpdate(n.versionId)}else t.tree&&this._firstTreeUpdate(this._tree.treeLastParsedVersion.read(e))}))}handleContentChanged(e){this._guessVersion=e.versionId;for(let i of e.changes)if(i.text.length>i.rangeLength){var t;let e,n=i.rangeOffset>0?i.rangeOffset-1:i.rangeOffset,s=this._tokenStore.getTokenAt(n);s?(e={startOffsetInclusive:s.startOffsetInclusive,length:s.length+i.text.length-i.rangeLength,token:s.token},this._tokenStore.markForRefresh(n,i.rangeOffset+(i.text.length>i.rangeLength?i.text.length:i.rangeLength))):e={startOffsetInclusive:n,length:i.text.length,token:0},this._tokenStore.update(null!==(t=null===s||void 0===s?void 0:s.length)&&void 0!==t?t:0,[e],cB.EditGuess)}else if(i.text.length<i.rangeLength){let e=i.rangeLength-i.text.length;this._tokenStore.delete(e,i.rangeOffset)}}getLineTokens(e){let t=this._textModel.getLineContent(e);return new xP(this.getTokens(e),t,this._languageIdCodec)}_createEmptyTokens(){let e=this._emptyToken(),t=this._textModel.getValueLength();return[this._emptyTokensForOffsetAndLength(0,t,e)]}_emptyToken(){return this._treeSitterThemeService.findMetadata([],this._encodedLanguageId,!1,void 0)}_emptyTokensForOffsetAndLength(e,t,i){return{token:i,length:e+t,startOffsetInclusive:0}}hasAccurateTokensForLine(e){return this.hasTokens(new dE(e,1,e,this._textModel.getLineMaxColumn(e)))}tokenizeLinesAt(e,t){let i=this._guessTokensForLinesContent(e,t),n=[];if(!i)return null;for(let s=0;s<i.length;s++)n.push(new xP(i[s],t[s],this._languageIdCodec));return n}_rangeHasTokens(e,t){return this._tokenStore.rangeHasTokens(this._textModel.getOffsetAt(e.getStartPosition()),this._textModel.getOffsetAt(e.getEndPosition()),t)}hasTokens(e){return!e||this._guessVersion===this._accurateVersion||!this._tokenStore.rangeNeedsRefresh(this._textModel.getOffsetAt(e.getStartPosition()),this._textModel.getOffsetAt(e.getEndPosition()))}getTokens(e){let t=this._textModel.getOffsetAt({lineNumber:e,column:1}),i=this._textModel.getOffsetAt({lineNumber:e,column:this._textModel.getLineLength(e)+1}),n=this._tokenStore.getTokensInRange(t,i),s=new Uint32Array(2*n.length);for(let r=0;r<n.length;r++)s[2*r]=n[r].startOffsetInclusive-t+n[r].length,s[2*r+1]=n[r].token;return s}getTokensInRange(e,t,i,n){let s=n?this._tokenizeCapturesWithMetadata(n,t,i):this._tokenize(e,t,i);if(null!==s&&void 0!==s&&s.endOffsetsAndMetadata)return this._rangeTokensAsUpdates(t,s.endOffsetsAndMetadata)}_updateTokensInStore(e,t,i){this._accurateVersion=e;for(let n of t){let t,s=n.newTokens.length>0?n.newTokens[n.newTokens.length-1]:void 0;t=s&&this._guessVersion>=e?s.startOffsetInclusive+s.length-n.newTokens[0].startOffsetInclusive:n.oldRangeLength?n.oldRangeLength:0,this._tokenStore.update(t,n.newTokens,i)}}_markForRefresh(e){this._tokenStore.markForRefresh(this._textModel.getOffsetAt(e.getStartPosition()),this._textModel.getOffsetAt(e.getEndPosition()))}_getNeedsRefresh(){let e=this._tokenStore.getNeedsRefresh();return e?e.map(e=>({range:dE.fromPositions(this._textModel.getPositionAt(e.startOffset),this._textModel.getPositionAt(e.endOffset)),startOffset:e.startOffset,endOffset:e.endOffset})):[]}_parseAndTokenizeViewPort(e){let t=e.map(e=>e.toInclusiveRange()).filter(sn);for(let i of t){let e=this._textModel.getOffsetAt(i.getStartPosition()),t=this._textModel.getOffsetAt(i.getEndPosition()),n=this._textModel.getVersionId();if(this._rangeHasTokens(i,cB.ViewportGuess))continue;let s=this._textModel.getValueInRange(i),r=this._forceParseAndTokenizeContent(i,e,t,s,!0);if(!r||this._rangeHasTokens(i,cB.ViewportGuess)||0===r.length)continue;let o=r[r.length-1],a=o.startOffsetInclusive+o.length-r[0].startOffsetInclusive;this._updateTokensInStore(n,[{newTokens:r,oldRangeLength:a}],cB.ViewportGuess),this._onDidChangeTokens.fire({changes:{semanticTokensApplied:!1,ranges:[{fromLineNumber:i.startLineNumber,toLineNumber:i.endLineNumber}]}})}}_guessTokensForLinesContent(e,t){if(0===t.length)return;let i=t.join(this._textModel.getEOL()),n=new dE(1,1,e+t.length,t[t.length-1].length+1),s=this._textModel.getOffsetAt({lineNumber:e,column:1}),r=this._forceParseAndTokenizeContent(n,s,s+i.length,i,!1);if(!r)return;let o=Array(t.length),a=0,l=0,h=0;for(let d=0;d<t.length;d++){let e=[],i=!1;for(let n=a;!i&&n<r.length;n++){let s=r[n],o=s.endOffset-h,c=l-h;if(o<=t[d].length)e.push({endOffset:o,metadata:s.metadata}),a++;else if(c<t[d].length){let n={endOffset:t[d].length,metadata:s.metadata};e.push(n),i=!0}else i=!0;l=s.endOffset}o[d]=this._endOffsetTokensToUint32Array(e),h+=t[d].length+this._textModel.getEOL().length}return o}_forceParseAndTokenizeContent(e,t,i,n,s){let r=oB(this._textModel,e.startLineNumber).likelyRelevantLines,o=r.join(this._textModel.getEOL()),a=this._tree.createParsedTreeSync("".concat(o).concat(n));if(!a)return;let l=new dE(1,1,e.endLineNumber-e.startLineNumber+1+r.length,e.endColumn),h=this.captureAtRange(l),d=this._tokenizeCapturesWithMetadata(h,o.length,i-t+o.length);return a.delete(),d?s?this._rangeTokensAsUpdates(t,d.endOffsetsAndMetadata,o.length):d.endOffsetsAndMetadata:void 0}_firstTreeUpdate(e){return this._setViewPortTokens(e)}_setViewPortTokens(e){let t=this._visibleLineRanges.get().map(e=>{let t=e.toInclusiveRange();if(!t)return;let i=this._textModel.getOffsetAt(t.getStartPosition());return{newRange:t,newRangeEndOffset:this._textModel.getOffsetAt(t.getEndPosition()),newRangeStartOffset:i}}).filter(sn);return this._handleTreeUpdate(t,e)}_handleTreeUpdate(e,t){let i=[],n=1e3;for(let r=0;r<e.length;r++)if(e[r].newRange.endLineNumber-e[r].newRange.startLineNumber>n){let t=e[r].newRange.endLineNumber,s=e[r].newRange.startLineNumber,o=e[r].newRange.startColumn,a=s+n;do{let l=new hE(s,o),h=a===e[r].newRange.endLineNumber?e[r].newRange.endColumn:this._textModel.getLineMaxColumn(a),d=new hE(a,h),c=dE.fromPositions(l,d);i.push({range:c,startOffset:this._textModel.getOffsetAt(c.getStartPosition()),endOffset:this._textModel.getOffsetAt(c.getEndPosition())}),s=a+1,o=1,a<t&&a+n>t?a=t:a+=n}while(a<=t)}else if(0===r||i[r-1].endOffset<e[r].newRangeStartOffset)i.push({range:e[r].newRange,startOffset:e[r].newRangeStartOffset,endOffset:e[r].newRangeEndOffset});else if(i[r-1].endOffset<e[r].newRangeEndOffset){let t=this._textModel.getPositionAt(i[r-1].endOffset+1),n=new dE(t.lineNumber,t.column,e[r].newRange.endLineNumber,e[r].newRange.endColumn);i.push({range:n,startOffset:i[r-1].endOffset+1,endOffset:e[r].newRangeEndOffset})}let s=i.map(e=>this._getCaptures(e.range));return this._updateTreeForRanges(i,t,s).then(()=>{!this._textModel.isDisposed()&&this._tree.treeLastParsedVersion.get()===this._textModel.getVersionId()&&this._refreshNeedsRefresh(t)})}async _updateTreeForRanges(e,t,i){let n;for(let s=0;s<e.length&&(this._textModel.isDisposed()||t===this._textModel.getVersionId());s++){let r=i[s],o=e[s],a=this.getTokensInRange(o.range,o.startOffset,o.endOffset,r);n=a?{newTokens:a}:{newTokens:[]},this._updateTokensInStore(t,[n],cB.Accurate),this._onDidChangeTokens.fire({changes:{semanticTokensApplied:!1,ranges:[{fromLineNumber:o.range.getStartPosition().lineNumber,toLineNumber:o.range.getEndPosition().lineNumber}]}}),await new Promise(e=>ns(e))}this._onDidCompleteBackgroundTokenization.fire()}_refreshNeedsRefresh(e){let t=this._getNeedsRefresh();if(0===t.length)return;let i=Array(t.length);for(let n=0;n<t.length;n++){let e=t[n];i[n]={newRange:e.range,newRangeStartOffset:e.startOffset,newRangeEndOffset:e.endOffset}}this._handleTreeUpdate(i,e)}_rangeTokensAsUpdates(e,t,i){let n=[],s=0;for(let r of t){if(r.endOffset<=s||i&&r.endOffset<i)continue;let t;t=i&&s<i?{startOffsetInclusive:e+i,length:r.endOffset-i,token:r.metadata}:{startOffsetInclusive:e+s,length:r.endOffset-s,token:r.metadata},n.push(t),s=r.endOffset}return n}_updateTheme(){let e=this._textModel.getFullModelRange();this._markForRefresh(e),this._parseAndTokenizeViewPort(this._visibleLineRanges.get())}captureAtPosition(e,t){return this.captureAtRangeWithInjections(new dE(e,t,e,t+1))}captureAtRangeTree(e){return this.captureAtRangeWithInjections(e)}captureAtRange(e){let t=this._tree.tree.get();return t?this._highlightingQueries.captures(t.rootNode,{startPosition:{row:e.startLineNumber-1,column:e.startColumn-1},endPosition:{row:e.endLineNumber-1,column:e.endColumn-1}}).map(e=>({name:e.name,text:e.node.text,node:{startIndex:e.node.startIndex,endIndex:e.node.endIndex,startPosition:{lineNumber:e.node.startPosition.row+1,column:e.node.startPosition.column+1},endPosition:{lineNumber:e.node.endPosition.row+1,column:e.node.endPosition.column+1}},encodedLanguageId:this._encodedLanguageId})):[]}captureAtRangeWithInjections(e){let t=this.captureAtRange(e);for(let i=0;i<t.length;i++){let n=t[i],s=n.node.startPosition.lineNumber,r=n.node.endPosition.lineNumber,o=n.node.startPosition.column,a=n.node.endPosition.column,l=s>e.startLineNumber&&s<e.endLineNumber?s:e.startLineNumber,h=r>e.startLineNumber&&r<e.endLineNumber?r:e.endLineNumber,d=new dE(l,s===e.startLineNumber?o<e.startColumn?e.startColumn:o:s<e.startLineNumber?e.startColumn:o,h,r===e.endLineNumber?a>e.endColumn?e.endColumn:a:r>e.endLineNumber?e.endColumn:a),c=this._getInjectionCaptures(n,d);c&&c.length>0&&(t.splice(i+1,0,...c),i+=c.length)}return t}tokenizeEncoded(e){let t=this._tokenizeEncoded(e);if(!t)return;let i=this._rangeTokensAsUpdates(this._textModel.getOffsetAt({lineNumber:e,column:1}),t.result);t.versionId===this._textModel.getVersionId()&&this._updateTokensInStore(t.versionId,[{newTokens:i,oldRangeLength:this._textModel.getLineLength(e)}],cB.Accurate)}tokenizeEncodedInstrumented(e){let t=this._tokenizeEncoded(e);if(t)return{result:this._endOffsetTokensToUint32Array(t.result),captureTime:t.captureTime,metadataTime:t.metadataTime}}_getCaptures(e){return this.captureAtRangeWithInjections(e)}_tokenize(e,t,i){let n=this._getCaptures(e),s=this._tokenizeCapturesWithMetadata(n,t,i);if(s)return(0,r.A)((0,r.A)({},s),{},{versionId:this._tree.treeLastParsedVersion.get()})}_createTokensFromCaptures(e,t,i){let n=this._tree.tree.get(),s=To.create(),r=i-t,o=this._languageIdCodec.encodeLanguageId(this._tree.languageId),a=wB[this._tree.languageId]||"source";if(0===e.length)return n?(s.stop(),{endOffsets:[{endOffset:r,scopes:[],encodedLanguageId:o}],captureTime:s.elapsed()}):void 0;let l=Array(e.length);l.fill({endOffset:0,scopes:[a],encodedLanguageId:o});let h=0,d=()=>{l.push({endOffset:0,scopes:[a],encodedLanguageId:o})},c=(e,t)=>e.name.includes("punctuation")&&e.text?Array.from(e.text.matchAll(SB)).map(e=>t+e.index):void 0,u=(e,t,i,n)=>{if(void 0!==n){let s=l[n].scopes,r=l[n].bracket;if((n>0?l[n-1].endOffset:0)!==t){let o;if(r&&r.length>0){o=[];let e=[];for(let n=0;n<r.length;n++){let s=r[n];s<t?o.push(s):s>i&&e.push(s)}0===o.length&&(o=void 0),r=0===e.length?void 0:e}l.splice(n,0,{endOffset:t,scopes:[...s],bracket:o,encodedLanguageId:e.encodedLanguageId}),n++,d(),h++}l.splice(n,0,{endOffset:i,scopes:[...s,e.name],bracket:c(e,t),encodedLanguageId:e.encodedLanguageId}),l[h].bracket=r}else l[h]={endOffset:i,scopes:[a,e.name],bracket:c(e,t),encodedLanguageId:e.encodedLanguageId};h++};for(let g=0;g<e.length;g++){let n,s=e[g],r=s.node.endIndex<i?s.node.endIndex<t?t:s.node.endIndex:i,o=s.node.startIndex<t?t:s.node.startIndex,p=r-t,f=r-o;n=g>0?l[h-1].endOffset:o-t-1;let m=p-f;if(n>=0&&n<m&&(l[h]={endOffset:m,scopes:[a],encodedLanguageId:this._encodedLanguageId},h++,d()),!(f<0))if(n>=p){let e=h-1,t=l[e].endOffset,i=e>=2?l[e-1].endOffset:0;do{if(i+f===t){if(i===m){l[e].scopes.push(s.name);let t=l[e].bracket;l[e].bracket=t&&t.length>0?t:c(s,m)}}else if(i<=m){u(s,m,p,e);break}e--,i=e>=1?l[e-1].endOffset:0,t=e>=0?l[e].endOffset:0}while(t>m)}else u(s,m,p)}l[h-1].endOffset<r&&r-l[h-1].endOffset>0&&(d(),l[h]={endOffset:r,scopes:l[h].scopes,encodedLanguageId:this._encodedLanguageId},h++);for(let g=0;g<l.length;g++)if(0===l[g].endOffset&&0!==g){l.splice(g,l.length-g);break}return{endOffsets:l,captureTime:s.elapsed()}}_getInjectionCaptures(e,t){return[]}_tokenizeCapturesWithMetadata(e,t,i){let n=To.create(),s=this._createTokensFromCaptures(e,t,i);if(!s)return;let r=s.endOffsets;for(let a=0;a<r.length;a++){let e=r[a];e.metadata=this._treeSitterThemeService.findMetadata(e.scopes,e.encodedLanguageId,!!e.bracket&&e.bracket.length>0,void 0)}let o=n.elapsed();return{endOffsetsAndMetadata:r,captureTime:s.captureTime,metadataTime:o}}_tokenizeEncoded(e){let t=this._textModel.getOffsetAt({lineNumber:e,column:1}),i=e+1<=this._textModel.getLineCount()?this._textModel.getOffsetAt({lineNumber:e+1,column:1}):this._textModel.getValueLength(),n=i-t,s=this._tokenize(new dE(e,1,e,n+1),t,i);if(s)return{result:s.endOffsetsAndMetadata,captureTime:s.captureTime,metadataTime:s.metadataTime,versionId:s.versionId}}_endOffsetTokensToUint32Array(e){let t=new Uint32Array(2*e.length);for(let i=0;i<e.length;i++)t[2*i]=e[i].endOffset,t[2*i+1]=e[i].metadata;return t}};yB=ki([Ei(4,_B)],yB);var wB={css:"source.css",typescript:"source.ts",ini:"source.ini",regex:"source.regex"},SB=/[\{\}\[\]\<\>\(\)]/g,kB=fn("treeSitterLibraryService"),EB=class e{static fromFn(t){return new e(t())}static resolved(t){return new e(Promise.resolve(t))}constructor(e){this._value=av(this,void 0),this.promiseResult=this._value,this.resolvedValue=ev(this,e=>{let t=this.promiseResult.read(e);if(t)return t.getDataOrThrow()}),this.promise=e.then(e=>(rv(t=>{this._value.set(new DB(e,void 0),t)}),e),e=>{throw rv(t=>{this._value.set(new DB(void 0,e),t)}),e})}},DB=class{constructor(e,t){this.data=e,this.error=t}getDataOrThrow(){if(this.error)throw this.error;return this.data}},TB=class extends HP{constructor(e,t,i,n,s,r){super(t,i),this._languageIdObs=e,this._treeSitterLibraryService=s,this._instantiationService=r,this._backgroundTokenizationState=bM.InProgress,this._onDidChangeBackgroundTokenizationState=this._register(new Ro),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event;let o=new EB(this._treeSitterLibraryService.getParserClass()),a=ev(this,e=>{var t;return null===(t=o.promiseResult)||void 0===t||null===(t=t.read(e))||void 0===t?void 0:t.getDataOrThrow()});this._tree=ev(this,e=>{let t=a.read(e);if(!t)return;let i=this._languageIdObs.read(e),n=this._treeSitterLibraryService.getLanguage(i,!1,e);if(!n)return;let s=new t;return e.store.add(vo(()=>{s.delete()})),s.setLanguage(n),void 0!==this._treeSitterLibraryService.getInjectionQueries(i,e)?e.store.add(this._instantiationService.createInstance(jP,i,void 0,s,t,this._textModel)):void 0}),this._tokenizationImpl=ev(this,e=>{let t=this._tree.read(e);if(!t)return;let i=this._treeSitterLibraryService.getHighlightingQueries(t.languageId,e);return i?e.store.add(this._instantiationService.createInstance(yB,t,i,this._languageIdCodec,n)):void 0}),this._register(iv(e=>{let t=this._tokenizationImpl.read(e);t&&(e.store.add(t.onDidChangeTokens(e=>{this._onDidChangeTokens.fire(e.changes)})),e.store.add(t.onDidChangeBackgroundTokenization(e=>{this._backgroundTokenizationState=bM.Completed,this._onDidChangeBackgroundTokenizationState.fire()})))}))}get tree(){return this._tree}get tokenizationImpl(){return this._tokenizationImpl}getLineTokens(e){let t=this._tokenizationImpl.get();if(!t){let t=this._textModel.getLineContent(e);return xP.createEmpty(t,this._languageIdCodec)}return t.getLineTokens(e)}todo_resetTokenization(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}handleDidChangeAttached(){}handleDidChangeContent(e){var t,i;e.isFlush?this.todo_resetTokenization(!1):null===(t=this._tokenizationImpl.get())||void 0===t||t.handleContentChanged(e),null===(i=this._tree.get())||void 0===i||i.handleContentChange(e)}forceTokenization(e){let t=this._tokenizationImpl.get();t&&(t.hasAccurateTokensForLine(e)||t.tokenizeEncoded(e))}hasAccurateTokensForLine(e){let t=this._tokenizationImpl.get();return!!t&&t.hasAccurateTokensForLine(e)}isCheapToTokenize(e){return!0}getTokenTypeIfInsertingCharacter(e,t,i){return $p.Other}tokenizeLinesAt(e,t){let i=this._tokenizationImpl.get();return i?i.tokenizeLinesAt(e,t):null}get hasTokens(){let e=this._tokenizationImpl.get();return!!e&&e.hasTokens()}};TB=ki([Ei(4,kB),Ei(5,pn)],TB);var IB=class e{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return 0===this._pieces.length}set(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(this._pieces=e||[],this._isComplete=t,i)for(let n of this._pieces)n.reportIfInvalid(i)}setPartial(e,t){let i=e;if(t.length>0){let n=t[0].getRange(),s=t[t.length-1].getRange();if(!n||!s)return e;i=e.plusRange(n).plusRange(s)}let n=null;for(let s=0,r=this._pieces.length;s<r;s++){let e=this._pieces[s];if(e.endLineNumber<i.startLineNumber)continue;if(e.startLineNumber>i.endLineNumber){n||(n={index:s});break}if(e.removeTokens(i),e.isEmpty()){this._pieces.splice(s,1),s--,r--;continue}if(e.endLineNumber<i.startLineNumber)continue;if(e.startLineNumber>i.endLineNumber){n||(n={index:s});continue}let[t,o]=e.split(i);t.isEmpty()?n||(n={index:s}):o.isEmpty()||(this._pieces.splice(s,1,t,o),s++,r++,n||(n={index:s}))}return n||(n={index:this._pieces.length}),t.length>0&&(this._pieces=Hr(this._pieces,n.index,t)),i}isComplete(){return this._isComplete}addSparseTokens(t,i){if(0===i.getTextLength())return i;let n=this._pieces;if(0===n.length)return i;let s=n[e._findFirstPieceWithLine(n,t)].getLineTokens(t);if(!s)return i;let r=i.getCount(),o=s.getCount(),a=0,l=[],h=0,d=0,c=(e,t)=>{e!==d&&(d=e,l[h++]=e,l[h++]=t)};for(let e=0;e<o;e++){let t=Math.min(s.getStartCharacter(e),i.getTextLength()),n=Math.min(s.getEndCharacter(e),i.getTextLength()),o=s.getMetadata(e),l=((o&Xp.SEMANTIC_USE_ITALIC?Xp.ITALIC_MASK:0)|(o&Xp.SEMANTIC_USE_BOLD?Xp.BOLD_MASK:0)|(o&Xp.SEMANTIC_USE_UNDERLINE?Xp.UNDERLINE_MASK:0)|(o&Xp.SEMANTIC_USE_STRIKETHROUGH?Xp.STRIKETHROUGH_MASK:0)|(o&Xp.SEMANTIC_USE_FOREGROUND?Xp.FOREGROUND_MASK:0)|(o&Xp.SEMANTIC_USE_BACKGROUND?Xp.BACKGROUND_MASK:0))>>>0,h=~l>>>0;for(;a<r&&i.getEndOffset(a)<=t;)c(i.getEndOffset(a),i.getMetadata(a)),a++;for(a<r&&i.getStartOffset(a)<t&&c(t,i.getMetadata(a));a<r&&i.getEndOffset(a)<n;)c(i.getEndOffset(a),i.getMetadata(a)&h|o&l),a++;if(a<r)c(n,i.getMetadata(a)&h|o&l),i.getEndOffset(a)===n&&a++;else{let e=Math.min(Math.max(0,a-1),r-1);c(n,i.getMetadata(e)&h|o&l)}}for(;a<r;)c(i.getEndOffset(a),i.getMetadata(a)),a++;return new xP(new Uint32Array(l),i.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let i=0,n=e.length-1;for(;i<n;){let s=i+Math.floor((n-i)/2);if(e[s].endLineNumber<t)i=s+1;else{if(!(e[s].startLineNumber>t)){for(;s>i&&e[s-1].startLineNumber<=t&&t<=e[s-1].endLineNumber;)s--;return s}n=s-1}}return i}acceptEdit(e,t,i,n,s){for(let r=0;r<this._pieces.length;r++){let o=this._pieces[r];o.acceptEdit(e,t,i,n,s),o.isEmpty()&&(this._pieces.splice(r,1),r--)}}},xB=class e{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,i){let n=null;if(t<this._len&&(n=this._lineTokens[t]),null!==n&&n!==ZP)return new xP(eB(n),i,this._languageIdCodec);let s=new Uint32Array(2);return s[0]=i.length,s[1]=LB(this._languageIdCodec.encodeLanguageId(e)),new xP(s,i,this._languageIdCodec)}static _massageTokens(e,t,i){let n=i?eB(i):null;if(0===t){let t=!1;if(n&&n.length>1&&(t=Zp.getLanguageId(n[1])!==e),!t)return ZP}if(!n||0===n.length){let i=new Uint32Array(2);return i[0]=t,i[1]=LB(e),i.buffer}return n[n.length-2]=t,0===n.byteOffset&&n.byteLength===n.buffer.byteLength?n.buffer:n}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){0!==t&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(0===t)return;let i=[];for(let n=0;n<t;n++)i[n]=null;this._lineTokens=Hr(this._lineTokens,e,i),this._len+=t}setTokens(t,i,n,s,r){let o=e._massageTokens(this._languageIdCodec.encodeLanguageId(t),n,s);this._ensureLine(i);let a=this._lineTokens[i];return this._lineTokens[i]=o,!!r&&!e._equals(a,o)}static _equals(e,t){if(!e||!t)return!e&&!t;let i=eB(e),n=eB(t);if(i.length!==n.length)return!1;for(let s=0,r=i.length;s<r;s++)if(i[s]!==n[s])return!1;return!0}acceptEdit(e,t,i){this._acceptDeleteRange(e),this._acceptInsertText(new hE(e.startLineNumber,e.startColumn),t,i)}_acceptDeleteRange(e){let t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;return void(this._lineTokens[t]=JP.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1))}this._lineTokens[t]=JP.deleteEnding(this._lineTokens[t],e.startColumn-1);let i=e.endLineNumber-1,n=null;i<this._len&&(n=JP.deleteBeginning(this._lineTokens[i],e.endColumn-1)),this._lineTokens[t]=JP.append(this._lineTokens[t],n),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,i){if(0===t&&0===i)return;let n=e.lineNumber-1;if(!(n>=this._len)){if(0===t)return void(this._lineTokens[n]=JP.insert(this._lineTokens[n],e.column-1,i));this._lineTokens[n]=JP.deleteEnding(this._lineTokens[n],e.column-1),this._lineTokens[n]=JP.insert(this._lineTokens[n],e.column-1,i),this._insertLines(e.lineNumber,t)}}setMultilineTokens(e,t){if(0===e.length)return{changes:[]};let i=[];for(let n=0,s=e.length;n<s;n++){let s=e[n],r=0,o=0,a=!1;for(let e=s.startLineNumber;e<=s.endLineNumber;e++)a?(this.setTokens(t.getLanguageId(),e-1,t.getLineLength(e),s.getLineTokens(e),!1),o=e):this.setTokens(t.getLanguageId(),e-1,t.getLineLength(e),s.getLineTokens(e),!0)&&(a=!0,r=e,o=e);a&&i.push({fromLineNumber:r,toLineNumber:o})}return{changes:i}}};function LB(e){return(e<<Xp.LANGUAGEID_OFFSET|$p.Other<<Xp.TOKEN_TYPE_OFFSET|Yp.None<<Xp.FONT_STYLE_OFFSET|Qp.DefaultForeground<<Xp.FOREGROUND_OFFSET|Qp.DefaultBackground<<Xp.BACKGROUND_OFFSET|Xp.BALANCED_BRACKETS_MASK)>>>0}var AB,NB,FB=class extends HP{constructor(e,t,i,n){super(e,t),this.getLanguageId=i,this._tokenizer=null,this._backgroundTokenizationState=bM.InProgress,this._onDidChangeBackgroundTokenizationState=this._register(new Ro),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event,this._defaultBackgroundTokenizer=null,this._backgroundTokenizer=this._register(new yo),this._tokens=new xB(this._languageIdCodec),this._debugBackgroundTokenizer=this._register(new yo),this._attachedViewStates=this._register(new So),this._register(IL.onDidChange(e=>{let t=this.getLanguageId();-1!==e.changedLanguages.indexOf(t)&&this.todo_resetTokenization()})),this.todo_resetTokenization(),this._register(n.onDidChangeVisibleRanges(e=>{let{view:t,state:i}=e;if(i){let e=this._attachedViewStates.get(t);e||(e=new UP(()=>this.refreshRanges(e.lineRanges)),this._attachedViewStates.set(t,e)),e.handleStateChange(i)}else this._attachedViewStates.deleteAndDispose(t)}))}todo_resetTokenization(){var e;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._tokens.flush(),null!==(e=this._debugBackgroundTokens)&&void 0!==e&&e.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new aB(this._textModel.getLineCount())),t&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});let[i,n]=(()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];let e,t=IL.get(this.getLanguageId());if(!t)return[null,null];try{e=t.getInitialState()}catch(t){return Ri(t),[null,null]}return[t,e]})();if(this._tokenizer=i&&n?new rB(this._textModel.getLineCount(),i,this._textModel,this._languageIdCodec):null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){let e={setTokens:e=>{this.setTokens(e)},backgroundTokenizationFinished:()=>{this._backgroundTokenizationState!==bM.Completed&&(this._backgroundTokenizationState=bM.Completed,this._onDidChangeBackgroundTokenizationState.fire())},setEndState:(e,t)=>{var i;if(!this._tokenizer)return;let n=this._tokenizer.store.getFirstInvalidEndStateLineNumber();null!==n&&e>=n&&(null===(i=this._tokenizer)||void 0===i||i.store.setEndState(e,t))}};i&&i.createBackgroundTokenizer&&!i.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=i.createBackgroundTokenizer(this._textModel,e)),!this._backgroundTokenizer.value&&!this._textModel.isTooLargeForTokenization()&&(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new uB(this._tokenizer,e),this._defaultBackgroundTokenizer.handleChanges()),null!==i&&void 0!==i&&i.backgroundTokenizerShouldOnlyVerifyTokens&&i.createBackgroundTokenizer?(this._debugBackgroundTokens=new xB(this._languageIdCodec),this._debugBackgroundStates=new aB(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=i.createBackgroundTokenizer(this._textModel,{setTokens:e=>{var t;null===(t=this._debugBackgroundTokens)||void 0===t||t.setMultilineTokens(e,this._textModel)},backgroundTokenizationFinished(){},setEndState:(e,t)=>{var i;null===(i=this._debugBackgroundStates)||void 0===i||i.setEndState(e,t)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){var e;null===(e=this._defaultBackgroundTokenizer)||void 0===e||e.handleChanges()}handleDidChangeContent(e){if(e.isFlush)this.todo_resetTokenization(!1);else if(!e.isEolChange){var t,i;for(let t of e.changes){var n;let[e,i]=cE(t.text);this._tokens.acceptEdit(t.range,e,i),null===(n=this._debugBackgroundTokens)||void 0===n||n.acceptEdit(t.range,e,i)}null!==(t=this._debugBackgroundStates)&&void 0!==t&&t.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),null===(i=this._defaultBackgroundTokenizer)||void 0===i||i.handleChanges()}}setTokens(e){let{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}refreshAllVisibleLineTokens(){let e=FO.joinMany([...this._attachedViewStates].map(e=>{let[t,i]=e;return i.lineRanges}));this.refreshRanges(e)}refreshRanges(e){for(let t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){var i;if(!this._tokenizer)return;e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);let n=new nB,{heuristicTokens:s}=this._tokenizer.tokenizeHeuristically(n,e,t),r=this.setTokens(n.finalize());if(s)for(let a of r.changes){var o;null===(o=this._backgroundTokenizer.value)||void 0===o||o.requestTokens(a.fromLineNumber,a.toLineNumber+1)}null===(i=this._defaultBackgroundTokenizer)||void 0===i||i.checkFinished()}forceTokenization(e){var t,i;let n=new nB;null!==(t=this._tokenizer)&&void 0!==t&&t.updateTokensUntilLine(n,e),this.setTokens(n.finalize()),null===(i=this._defaultBackgroundTokenizer)||void 0===i||i.checkFinished()}hasAccurateTokensForLine(e){return!this._tokenizer||this._tokenizer.hasAccurateTokensForLine(e)}isCheapToTokenize(e){return!this._tokenizer||this._tokenizer.isCheapToTokenize(e)}getLineTokens(e){let t=this._textModel.getLineContent(e),i=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,t);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){var n;let s=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,t);!i.equals(s)&&(null===(n=this._debugBackgroundTokenizer.value)||void 0===n?void 0:n.reportMismatchingTokens)&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return i}getTokenTypeIfInsertingCharacter(e,t,i){if(!this._tokenizer)return $p.Other;let n=this._textModel.validatePosition(new hE(e,t));return this.forceTokenization(n.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(n,i)}tokenizeLinesAt(e,t){return this._tokenizer?(this.forceTokenization(e),this._tokenizer.tokenizeLinesAt(e,t)):null}get hasTokens(){return this._tokens.hasTokens}},OB=AB=class extends PM{constructor(e,t,i,n,s,r,o,a){super(),this._textModel=e,this._bracketPairsTextModelPart=t,this._languageId=i,this._attachedViews=n,this._languageService=s,this._languageConfigurationService=r,this._instantiationService=o,this._treeSitterLibraryService=a,this._languageIdObs=av(this,this._languageId),this._useTreeSitter=ev(this,e=>{let t=this._languageIdObs.read(e);return this._treeSitterLibraryService.supportsLanguage(t,e)}),this.tokens=ev(this,e=>{let t;return t=this._useTreeSitter.read(e)?e.store.add(this._instantiationService.createInstance(TB,this._languageIdObs,this._languageService.languageIdCodec,this._textModel,this._attachedViews.visibleLineRanges)):e.store.add(new FB(this._languageService.languageIdCodec,this._textModel,()=>this._languageId,this._attachedViews)),e.store.add(t.onDidChangeTokens(e=>{this._emitModelTokensChangedEvent(e)})),e.store.add(t.onDidChangeBackgroundTokenizationState(e=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()})),t});let l=!1;this.tokens.recomputeInitiallyAndOnChange(this._store,e=>{l&&e.todo_resetTokenization(),l=!0}),this._semanticTokens=new IB(this._languageService.languageIdCodec),this._onDidChangeLanguage=this._register(new Ro),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new Ro),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new Ro),this.onDidChangeTokens=this._onDidChangeTokens.event}_hasListeners(){return this._onDidChangeLanguage.hasListeners()||this._onDidChangeLanguageConfiguration.hasListeners()||this._onDidChangeTokens.hasListeners()}handleLanguageConfigurationServiceChange(e){e.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}handleDidChangeContent(e){if(e.isFlush)this._semanticTokens.flush();else if(!e.isEolChange)for(let t of e.changes){let[e,i,n]=cE(t.text);this._semanticTokens.acceptEdit(t.range,e,i,n,t.text.length>0?t.text.charCodeAt(0):En.Null)}this.tokens.get().handleDidChangeContent(e)}handleDidChangeAttached(){this.tokens.get().handleDidChangeAttached()}getLineTokens(e){this.validateLineNumber(e);let t=this.tokens.get().getLineTokens(e);return this._semanticTokens.addSparseTokens(e,t)}_emitModelTokensChangedEvent(e){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}validateLineNumber(e){if(e<1||e>this._textModel.getLineCount())throw new qi("Illegal value for lineNumber")}get hasTokens(){return this.tokens.get().hasTokens}resetTokenization(){this.tokens.get().todo_resetTokenization()}get backgroundTokenizationState(){return this.tokens.get().backgroundTokenizationState}forceTokenization(e){this.validateLineNumber(e),this.tokens.get().forceTokenization(e)}hasAccurateTokensForLine(e){return this.validateLineNumber(e),this.tokens.get().hasAccurateTokensForLine(e)}isCheapToTokenize(e){return this.validateLineNumber(e),this.tokens.get().isCheapToTokenize(e)}tokenizeIfCheap(e){this.validateLineNumber(e),this.tokens.get().tokenizeIfCheap(e)}getTokenTypeIfInsertingCharacter(e,t,i){return this.tokens.get().getTokenTypeIfInsertingCharacter(e,t,i)}tokenizeLinesAt(e,t){return this.tokens.get().tokenizeLinesAt(e,t)}setSemanticTokens(e,t){this._semanticTokens.set(e,t,this._textModel),this._emitModelTokensChangedEvent({semanticTokensApplied:null!==e,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;let i=this._textModel.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:i.startLineNumber,toLineNumber:i.endLineNumber}]})}getWordAtPosition(e){this.assertNotDisposed();let t=this._textModel.validatePosition(e),i=this._textModel.getLineContent(t.lineNumber),n=this.getLineTokens(t.lineNumber),s=n.findTokenIndexAtOffset(t.column-1),[r,o]=AB._findLanguageBoundaries(n,s),a=BT(t.column,this.getLanguageConfiguration(n.getLanguageId(s)).getWordDefinition(),i.substring(r,o),r);if(a&&a.startColumn<=e.column&&e.column<=a.endColumn)return a;if(s>0&&r===t.column-1){let[r,o]=AB._findLanguageBoundaries(n,s-1),a=BT(t.column,this.getLanguageConfiguration(n.getLanguageId(s-1)).getWordDefinition(),i.substring(r,o),r);if(a&&a.startColumn<=e.column&&e.column<=a.endColumn)return a}return null}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}static _findLanguageBoundaries(e,t){let i=e.getLanguageId(t),n=0;for(let r=t;r>=0&&e.getLanguageId(r)===i;r--)n=e.getStartOffset(r);let s=e.getLineContent().length;for(let r=t,o=e.getCount();r<o&&e.getLanguageId(r)===i;r++)s=e.getEndOffset(r);return[n,s]}getWordUntilPosition(e){let t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(e,t){let i=this._textModel.validatePosition(new hE(e,t)),n=this.getLineTokens(i.lineNumber);return n.getLanguageId(n.findTokenIndexAtOffset(i.column-1))}setLanguageId(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";if(this._languageId===e)return;let i={oldLanguage:this._languageId,newLanguage:e,source:t};this._languageId=e,this._languageIdObs.set(e,void 0),this._bracketPairsTextModelPart.handleDidChangeLanguage(i),this._onDidChangeLanguage.fire(i),this._onDidChangeLanguageConfiguration.fire({})}};OB=AB=ki([Ei(4,Pw),Ei(5,_R),Ei(6,pn),Ei(7,kB)],OB),function(e){e[e.Flush=1]="Flush",e[e.LineChanged=2]="LineChanged",e[e.LinesDeleted=3]="LinesDeleted",e[e.LinesInserted=4]="LinesInserted",e[e.EOLChanged=5]="EOLChanged"}(NB||(NB={}));var RB,MB=class{constructor(){this.changeType=NB.Flush}},PB=class e{static applyInjectedText(e,t){if(!t||0===t.length)return e;let i="",n=0;for(let s of t)i+=e.substring(n,s.column-1),n=s.column-1,i+=s.options.content;return i+=e.substring(n),i}static fromDecorations(t){let i=[];for(let n of t)n.options.before&&n.options.before.content.length>0&&i.push(new e(n.ownerId,n.range.startLineNumber,n.range.startColumn,n.options.before,0)),n.options.after&&n.options.after.content.length>0&&i.push(new e(n.ownerId,n.range.endLineNumber,n.range.endColumn,n.options.after,1));return i.sort((e,t)=>e.lineNumber===t.lineNumber?e.column===t.column?e.order-t.order:e.column-t.column:e.lineNumber-t.lineNumber),i}constructor(e,t,i,n,s){this.ownerId=e,this.lineNumber=t,this.column=i,this.options=n,this.order=s}withText(t){return new e(this.ownerId,this.lineNumber,this.column,(0,r.A)((0,r.A)({},this.options),{},{content:t}),this.order)}},BB=class{constructor(e,t,i){this.changeType=NB.LineChanged,this.lineNumber=e,this.detail=t,this.injectedText=i}},UB=class{constructor(e,t,i,n){this.ownerId=e,this.decorationId=t,this.lineNumber=i,this.lineHeight=n}},HB=class{constructor(e,t){this.ownerId=e,this.lineNumber=t}},WB=class{constructor(e,t){this.changeType=NB.LinesDeleted,this.fromLineNumber=e,this.toLineNumber=t}},VB=class{constructor(e,t,i,n){this.changeType=NB.LinesInserted,this.injectedTexts=n,this.fromLineNumber=e,this.toLineNumber=t,this.detail=i}},zB=class{constructor(){this.changeType=NB.EOLChanged}},KB=class e{constructor(e,t,i,n){this.changes=e,this.versionId=t,this.isUndoing=i,this.isRedoing=n,this.resultingSelection=null}containsEvent(e){for(let t=0,i=this.changes.length;t<i;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(t,i){let n=[].concat(t.changes,i.changes),s=i.versionId;return new e(n,s,t.isUndoing||i.isUndoing,t.isRedoing||i.isRedoing)}},qB=class{constructor(e){this.changes=e}},GB=class{constructor(e){this.changes=e}affects(e){if(dE.isIRange(e)){for(let t of this.changes)if(t.lineNumber>=e.startLineNumber&&t.lineNumber<=e.endLineNumber)return!0;return!1}for(let t of this.changes)if(t.lineNumber===e.lineNumber)return!0;return!1}},jB=class{constructor(e){this.changes=e}},YB=class e{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(t){return new e(KB.merge(this.rawContentChangedEvent,t.rawContentChangedEvent),e._mergeChangeEvents(this.contentChangedEvent,t.contentChangedEvent))}static _mergeChangeEvents(e,t){let i=[].concat(e.changes,t.changes),n=t.eol,s=t.versionId,r=e.isUndoing||t.isUndoing,o=e.isRedoing||t.isRedoing,a=e.isFlush||t.isFlush;return{changes:i,eol:n,isEolChange:e.isEolChange&&t.isEolChange,versionId:s,isUndoing:r,isRedoing:o,isFlush:a,detailedReasons:e.detailedReasons.concat(t.detailedReasons),detailedReasonsChangeLengths:e.detailedReasonsChangeLengths.concat(t.detailedReasonsChangeLengths)}}};function QB(e){let t=new IP;return t.acceptChunk(e),t.finish()}function $B(e){return new Promise((t,i)=>{let n=new IP,s=!1;lg(e,{onData:e=>{n.acceptChunk("string"==typeof e?e:e.toString())},onError:e=>{s||(s=!0,i(e))},onEnd:()=>{s||(s=!0,t(n.finish()))}})})}function XB(e){let t,i=new IP;for(;"string"==typeof(t=e.read());)i.acceptChunk(t);return i.finish()}function ZB(e,t){let i;return i="string"==typeof e?QB(e):function(e){return!!e&&"function"==typeof e.read}(e)?XB(e):e,i.create(t)}var JB,eU=0,tU=class{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;let e=[],t=0,i=0;for(;;){let n=this._source.read();if(null===n)return this._eos=!0,0===t?null:e.join("");if(n.length>0&&(e[t++]=n,i+=n.length),i>=65536)return e.join("")}}},iU=()=>{throw Error("Invalid change accessor")};!function(e){e[e.Relaxed=0]="Relaxed",e[e.SurrogatePairs=1]="SurrogatePairs"}(JB||(JB={}));var nU=(Pt=class extends Co{static resolveOptions(e,t){if(t.detectIndentation){let i=KM(e,t.tabSize,t.insertSpaces);return new fS({tabSize:i.tabSize,indentSize:"tabSize",insertSpaces:i.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new fS(t)}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}get onDidChangeOptions(){return this._onDidChangeOptions.event}get onDidChangeAttached(){return this._onDidChangeAttached.event}get onDidChangeLineHeight(){return this._onDidChangeLineHeight.event}get onDidChangeFont(){return this._onDidChangeFont.event}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}onDidChangeContentOrInjectedText(e){return fo(this._eventEmitter.fastEvent(t=>e(t)),this._onDidChangeInjectedText.event(t=>e(t)))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,a=arguments.length>7?arguments[7]:void 0;super(),this._undoRedoService=s,this._languageService=r,this._languageConfigurationService=o,this.instantiationService=a,this._onWillDispose=this._register(new Ro),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new bU((e,t,i)=>this.handleBeforeFireDecorationsChangedEvent(e,t,i))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new Ro),this._onDidChangeAttached=this._register(new Ro),this._onDidChangeInjectedText=this._register(new Ro),this._onDidChangeLineHeight=this._register(new Ro),this._onDidChangeFont=this._register(new Ro),this._eventEmitter=this._register(new CU),this._languageSelectionListener=this._register(new yo),this._deltaDecorationCallCnt=0,this._attachedViews=new MP,eU++,this.id="$model"+eU,this.isForSimpleWidget=i.isForSimpleWidget,this._associatedResource=null==n?Gs.parse("inmemory://model/"+eU):n,this._attachedEditorCount=0;let{textBuffer:l,disposable:h}=ZB(e,i.defaultEOL);this._buffer=l,this._bufferDisposable=h;let d=this._buffer.getLineCount(),c=this._buffer.getValueLengthInRange(new dE(1,1,d,this._buffer.getLineLength(d)+1),sS.TextDefined);i.largeFileOptimizations?(this._isTooLargeForTokenization=c>RB.LARGE_FILE_SIZE_THRESHOLD||d>RB.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=c>RB.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1),this._options=RB.resolveOptions(this._buffer,i);let u="string"==typeof t?t:t.languageId;"string"!=typeof t&&(this._languageSelectionListener.value=t.onDidChange(()=>this._setLanguage(t.languageId))),this._bracketPairs=this._register(new LM(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new HM(this,this._languageConfigurationService)),this._decorationProvider=this._register(new OM(this)),this._tokenizationTextModelPart=this.instantiationService.createInstance(OB,this,this._bracketPairs,u,this._attachedViews),this._isTooLargeForSyncing=c>RB._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=function(e){let t=En.Z-En.A+1;return(e%=2*t)<t?String.fromCharCode(En.a+e):String.fromCharCode(En.A+e-t)}(eU),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new oU,this._commandManager=new pR(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})),this._languageService.requestRichLanguageFeatures(u),this._register(this._languageConfigurationService.onDidChange(e=>{this._bracketPairs.handleLanguageConfigurationServiceChange(e),this._tokenizationTextModelPart.handleLanguageConfigurationServiceChange(e)}))}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;let e=new DP([],"","\n",!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=Co.None}_hasListeners(){return this._onWillDispose.hasListeners()||this._onDidChangeDecorations.hasListeners()||this._tokenizationTextModelPart._hasListeners()||this._onDidChangeOptions.hasListeners()||this._onDidChangeAttached.hasListeners()||this._onDidChangeInjectedText.hasListeners()||this._onDidChangeLineHeight.hasListeners()||this._onDidChangeFont.hasListeners()||this._eventEmitter.hasListeners()}_assertNotDisposed(){if(this._isDisposed)throw new qi("Model is disposed!")}equalsTextBuffer(e){return this._assertNotDisposed(),this._buffer.equals(e)}getTextBuffer(){return this._assertNotDisposed(),this._buffer}_emitContentChangedEvent(e,t){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(t),this._bracketPairs.handleDidChangeContent(t),this._eventEmitter.fire(new YB(e,t)))}setValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rR.setValue();if(this._assertNotDisposed(),null==e)throw Hi();let{textBuffer:i,disposable:n}=ZB(e,this._options.defaultEOL);this._setValueFromTextBuffer(i,n,t)}_createContentChanged2(e,t,i,n,s,r,o,a,l,h){return{changes:[{range:e,rangeOffset:t,rangeLength:i,text:s}],eol:this._buffer.getEOL(),isEolChange:l,versionId:this.getVersionId(),isUndoing:r,isRedoing:o,isFlush:a,detailedReasons:[h],detailedReasonsChangeLengths:[1]}}_setValueFromTextBuffer(e,t,i){this._assertNotDisposed();let n=this.getFullModelRange(),s=this.getValueLengthInRange(n),r=this.getLineCount(),o=this.getLineMaxColumn(r);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new oU,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new KB([new MB],this._versionId,!1,!1),this._createContentChanged2(new dE(1,1,r,o),0,s,new hE(r,o),this.getValue(),!1,!1,!0,!1,i))}setEOL(e){this._assertNotDisposed();let t=e===oS.CRLF?"\r\n":"\n";if(this._buffer.getEOL()===t)return;let i=this.getFullModelRange(),n=this.getValueLengthInRange(i),s=this.getLineCount(),r=this.getLineMaxColumn(s);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new KB([new zB],this._versionId,!1,!1),this._createContentChanged2(new dE(1,1,s,r),0,n,new hE(s,r),this.getValue(),!1,!1,!1,!0,rR.eolChange()))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){let e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let i=0,n=t.length;i<n;i++){let n=t[i],s=n.range,r=n.cachedAbsoluteStart-n.start,o=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),a=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);n.cachedAbsoluteStart=o,n.cachedAbsoluteEnd=a,n.cachedVersionId=e,n.start=o-r,n.end=a-r,pO(n)}}onBeforeAttached(){return this._attachedEditorCount++,1===this._attachedEditorCount&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(e){this._attachedEditorCount--,0===this._attachedEditorCount&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(e)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0,i=this._buffer.getLineCount();for(let n=1;n<=i;n++){let i=this._buffer.getLineLength(n);i>=1e4?t+=i:e+=i}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();let t=void 0===e.tabSize?this._options.tabSize:e.tabSize,i=void 0===e.indentSize?this._options.originalIndentSize:e.indentSize,n=void 0===e.insertSpaces?this._options.insertSpaces:e.insertSpaces,s=void 0===e.trimAutoWhitespace?this._options.trimAutoWhitespace:e.trimAutoWhitespace,r=void 0===e.bracketColorizationOptions?this._options.bracketPairColorizationOptions:e.bracketColorizationOptions,o=new fS({tabSize:t,indentSize:i,insertSpaces:n,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:s,bracketPairColorizationOptions:r});if(this._options.equals(o))return;let a=this._options.createChangeEvent(o);this._options=o,this._bracketPairs.handleDidChangeOptions(a),this._decorationProvider.handleDidChangeOptions(a),this._onDidChangeOptions.fire(a)}detectIndentation(e,t){this._assertNotDisposed();let i=KM(this._buffer,t,e);this.updateOptions({insertSpaces:i.insertSpaces,tabSize:i.tabSize,indentSize:i.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),mR(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.findMatches(Na.source,!1,!0,!1,null,!1,Zo.MAX_SAFE_SMALL_INTEGER);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(e=>({range:e.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();let t=this._validatePosition(e.lineNumber,e.column,JB.Relaxed);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();let t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId+=1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new qi("Operation would exceed heap memory limits");let i=this.getFullModelRange(),n=this.getValueInRange(i,e);return t?this._buffer.getBOM()+n:n}createSnapshot(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new tU(this._buffer.createSnapshot(e))}getValueLength(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._assertNotDisposed();let i=this.getFullModelRange(),n=this.getValueLengthInRange(i,e);return t?this._buffer.getBOM().length+n:n}getValueInRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sS.TextDefined;return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sS.TextDefined;return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sS.TextDefined;return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new qi("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new qi("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new qi("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),"\n"===this._buffer.getEOL()?oS.LF:oS.CRLF}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new qi("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new qi("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new qi("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){let t=this._buffer.getLineCount(),i=e.startLineNumber,n=e.startColumn,s=Math.floor("number"!=typeof i||isNaN(i)?1:i),r=Math.floor("number"!=typeof n||isNaN(n)?1:n);if(s<1)s=1,r=1;else if(s>t)s=t,r=this.getLineMaxColumn(s);else if(r<=1)r=1;else{let e=this.getLineMaxColumn(s);r>=e&&(r=e)}let o=e.endLineNumber,a=e.endColumn,l=Math.floor("number"!=typeof o||isNaN(o)?1:o),h=Math.floor("number"!=typeof a||isNaN(a)?1:a);if(l<1)l=1,h=1;else if(l>t)l=t,h=this.getLineMaxColumn(l);else if(h<=1)h=1;else{let e=this.getLineMaxColumn(l);h>=e&&(h=e)}return i===s&&n===r&&o===l&&a===h&&e instanceof dE&&!(e instanceof EO)?e:new dE(s,r,l,h)}_isValidPosition(e,t,i){return!("number"!=typeof e||"number"!=typeof t||isNaN(e)||isNaN(t)||e<1||t<1||(0|e)!==e||(0|t)!==t||e>this._buffer.getLineCount())&&(1===t||!(t>this.getLineMaxColumn(e)||i===JB.SurrogatePairs&&Ca(this._buffer.getLineCharCode(e,t-2))))}_validatePosition(e,t,i){let n=Math.floor("number"!=typeof e||isNaN(e)?1:e),s=Math.floor("number"!=typeof t||isNaN(t)?1:t),r=this._buffer.getLineCount();if(n<1)return new hE(1,1);if(n>r)return new hE(r,this.getLineMaxColumn(r));if(s<=1)return new hE(n,1);let o=this.getLineMaxColumn(n);return s>=o?new hE(n,o):i===JB.SurrogatePairs&&Ca(this._buffer.getLineCharCode(n,s-2))?new hE(n,s-1):new hE(n,s)}validatePosition(e){let t=JB.SurrogatePairs;return this._assertNotDisposed(),e instanceof hE&&this._isValidPosition(e.lineNumber,e.column,t)?e:this._validatePosition(e.lineNumber,e.column,t)}isValidRange(e){return this._isValidRange(e,JB.SurrogatePairs)}_isValidRange(e,t){let i=e.startLineNumber,n=e.startColumn,s=e.endLineNumber,r=e.endColumn;if(!this._isValidPosition(i,n,JB.Relaxed)||!this._isValidPosition(s,r,JB.Relaxed))return!1;if(t===JB.SurrogatePairs){let e=n>1?this._buffer.getLineCharCode(i,n-2):0,t=r>1&&r<=this._buffer.getLineLength(s)?this._buffer.getLineCharCode(s,r-2):0,o=Ca(e),a=Ca(t);return!o&&!a}return!0}validateRange(e){let t=JB.SurrogatePairs;if(this._assertNotDisposed(),e instanceof dE&&!(e instanceof EO)&&this._isValidRange(e,t))return e;let i=this._validatePosition(e.startLineNumber,e.startColumn,JB.Relaxed),n=this._validatePosition(e.endLineNumber,e.endColumn,JB.Relaxed),s=i.lineNumber,r=i.column,o=n.lineNumber,a=n.column;if(t===JB.SurrogatePairs){let e=r>1?this._buffer.getLineCharCode(s,r-2):0,t=a>1&&a<=this._buffer.getLineLength(o)?this._buffer.getLineCharCode(o,a-2):0,i=Ca(e),n=Ca(t);return i||n?s===o&&r===a?new dE(s,r-1,o,a-1):i&&n?new dE(s,r-1,o,a+1):i?new dE(s,r-1,o,a):new dE(s,r,o,a+1):new dE(s,r,o,a)}return new dE(s,r,o,a)}modifyPosition(e,t){this._assertNotDisposed();let i=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,i)))}getFullModelRange(){this._assertNotDisposed();let e=this.getLineCount();return new dE(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,i,n){return this._buffer.findMatchesLineByLine(e,t,i,n)}findMatches(e,t,i,n,s,r){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:999;this._assertNotDisposed();let a=null;null!==t&&"boolean"!=typeof t&&(Array.isArray(t)||(t=[t]),t.every(e=>dE.isIRange(e))&&(a=t.map(e=>this.validateRange(e)))),null===a&&(a=[this.getFullModelRange()]),a=a.sort((e,t)=>e.startLineNumber-t.startLineNumber||e.startColumn-t.startColumn);let l,h=[];if(h.push(a.reduce((e,t)=>dE.areIntersecting(e,t)?e.plusRange(t):(h.push(e),t))),!i&&e.indexOf("\n")<0){let t=new cP(e,i,n,s).parseSearchRequest();if(!t)return[];l=e=>this.findMatchesLineByLine(e,t,r,o)}else l=t=>pP.findMatches(this,new cP(e,i,n,s),t,r,o);return h.map(l).reduce((e,t)=>e.concat(t),[])}findNextMatch(e,t,i,n,s,r){this._assertNotDisposed();let o=this.validatePosition(t);if(!i&&e.indexOf("\n")<0){let t=new cP(e,i,n,s).parseSearchRequest();if(!t)return null;let a=this.getLineCount(),l=new dE(o.lineNumber,o.column,a,this.getLineMaxColumn(a)),h=this.findMatchesLineByLine(l,t,r,1);return pP.findNextMatch(this,new cP(e,i,n,s),o,r),h.length>0||(l=new dE(1,1,o.lineNumber,this.getLineMaxColumn(o.lineNumber)),h=this.findMatchesLineByLine(l,t,r,1),h.length>0)?h[0]:null}return pP.findNextMatch(this,new cP(e,i,n,s),o,r)}findPreviousMatch(e,t,i,n,s,r){this._assertNotDisposed();let o=this.validatePosition(t);return pP.findPreviousMatch(this,new cP(e,i,n,s),o,r)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if(("\n"===this.getEOL()?oS.LF:oS.CRLF)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),null===this._initialUndoRedoSnapshot&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof vS?e:new vS(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){let t=[];for(let i=0,n=e.length;i<n;i++)t[i]=this._validateEditOperation(e[i]);return t}edit(e,t){this.pushEditOperations(null,e.replacements.map(e=>({range:e.range,text:e.text})),null)}pushEditOperations(e,t,i,n,s){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),i,n,s)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,i,n,s){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){let i=t.map(e=>({range:this.validateRange(e.range),text:e.text})),n=!0;if(e)for(let t=0,s=e.length;t<s;t++){let s=e[t],r=!1;for(let e=0,t=i.length;e<t;e++){let t=i[e].range,n=t.startLineNumber>s.endLineNumber,o=s.startLineNumber>t.endLineNumber;if(!n&&!o){r=!0;break}}if(!r){n=!1;break}}if(n)for(let e=0,s=this._trimAutoWhitespaceLines.length;e<s;e++){let n=this._trimAutoWhitespaceLines[e],s=this.getLineMaxColumn(n),r=!0;for(let e=0,t=i.length;e<t;e++){let t=i[e].range,o=i[e].text;if(!(n<t.startLineNumber||n>t.endLineNumber)&&!(n===t.startLineNumber&&t.startColumn===s&&t.isEmpty()&&o&&o.length>0&&"\n"===o.charAt(0))&&!(n===t.startLineNumber&&1===t.startColumn&&t.isEmpty()&&o&&o.length>0&&"\n"===o.charAt(o.length-1))){r=!1;break}}if(r){let e=new dE(n,1,n,s);t.push(new vS(null,e,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return null===this._initialUndoRedoSnapshot&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,i,n,s)}_applyUndo(e,t,i,n){let s=e.map(e=>{let t=this.getPositionAt(e.newPosition),i=this.getPositionAt(e.newEnd);return{range:new dE(t.lineNumber,t.column,i.lineNumber,i.column),text:e.oldText}});this._applyUndoRedoEdits(s,t,!0,!1,i,n)}_applyRedo(e,t,i,n){let s=e.map(e=>{let t=this.getPositionAt(e.oldPosition),i=this.getPositionAt(e.oldEnd);return{range:new dE(t.lineNumber,t.column,i.lineNumber,i.column),text:e.newText}});this._applyUndoRedoEdits(s,t,!1,!0,i,n)}_applyUndoRedoEdits(e,t,i,n,s,r){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=i,this._isRedoing=n,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(s)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(r),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t,i){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();let n=this._validateEditOperations(e);return this._doApplyEdits(n,null!==t&&void 0!==t&&t,null!==i&&void 0!==i?i:rR.applyEdits())}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t,i){let n=this._buffer.getLineCount(),s=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),r=this._buffer.getLineCount(),o=s.changes;if(this._trimAutoWhitespaceLines=s.trimAutoWhitespaceLineNumbers,0!==o.length){for(let i=0,n=o.length;i<n;i++){let e=o[i];this._decorationsTree.acceptReplace(e.rangeOffset,e.rangeLength,e.text.length,e.forceMoveMarkers)}let e=[];this._increaseVersionId();let t=n;for(let i=0,n=o.length;i<n;i++){let n=o[i],[s]=cE(n.text);this._onDidChangeDecorations.fire();let a=n.range.startLineNumber,l=n.range.endLineNumber,h=l-a,d=s,c=Math.min(h,d),u=d-h,g=r-t-u+a,p=g,f=g+d,m=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new hE(p,1)),this.getOffsetAt(new hE(f,this.getLineMaxColumn(f))),0),v=PB.fromDecorations(m),_=new Jr(v);for(let t=c;t>=0;t--){let i=a+t,n=g+t;_.takeFromEndWhile(e=>e.lineNumber>n);let s=_.takeFromEndWhile(e=>e.lineNumber===n);e.push(new BB(i,this.getLineContent(n),s))}if(c<h){let t=a+c;e.push(new WB(t+1,l))}if(c<d){let i=new Jr(v),n=a+c,s=d-c,o=r-t-s+n+1,l=[],h=[];for(let e=0;e<s;e++){let t=o+e;h[e]=this.getLineContent(t),i.takeWhile(e=>e.lineNumber<t),l[e]=i.takeWhile(e=>e.lineNumber===t)}e.push(new VB(n+1,a+d,h,l))}t+=u}this._emitContentChangedEvent(new KB(e,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:o,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1,detailedReasons:[i],detailedReasonsChangeLengths:[o.length]})}return null===s.reverseEdits?void 0:s.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e,t,i){if(e&&e.size>0){let t=Array.from(e).map(e=>new BB(e,this.getLineContent(e),this._getInjectedTextInLine(e)));this._onDidChangeInjectedText.fire(new qB(t))}if(t&&t.size>0){let e=Array.from(t).map(e=>new UB(e.ownerId,e.decorationId,e.lineNumber,e.lineHeight));this._onDidChangeLineHeight.fire(new GB(e))}if(i&&i.size>0){let e=Array.from(i).map(e=>new HB(e.ownerId,e.lineNumber));this._onDidChangeFont.fire(new jB(e))}}changeDecorations(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){let i={addDecoration:(t,i)=>this._deltaDecorationsImpl(e,[],[{range:t,options:i}])[0],changeDecoration:(t,i)=>{this._changeDecorationImpl(e,t,i)},changeDecorationOptions:(t,i)=>{this._changeDecorationOptionsImpl(e,t,fU(i))},removeDecoration:t=>{this._deltaDecorationsImpl(e,[t],[])},deltaDecorations:(t,i)=>0===t.length&&0===i.length?[]:this._deltaDecorationsImpl(e,t,i)},n=null;try{n=t(i)}catch(e){Ri(e)}return i.addDecoration=iU,i.changeDecoration=iU,i.changeDecorationOptions=iU,i.removeDecoration=iU,i.deltaDecorations=iU,n}deltaDecorations(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this._assertNotDisposed(),e||(e=[]),0===e.length&&0===t.length)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),Ri(Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(i,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,i){let n=e?this._decorations[e]:null;if(!n)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:pU[i]}],!0)[0]:null;if(!t)return this._decorationsTree.delete(n),delete this._decorations[n.id],null;let s=this._validateRangeRelaxedNoAllocations(t),r=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),o=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);return this._decorationsTree.delete(n),n.reset(this.getVersionId(),r,o,s),n.setOptions(pU[i]),this._decorationsTree.insert(n),n.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;let t=this._decorationsTree.collectNodesFromOwner(e);for(let i=0,n=t.length;i<n;i++){let e=t[i];this._decorationsTree.delete(e),delete this._decorations[e.id]}}getDecorationOptions(e){let t=this._decorations[e];return t?t.options:null}getDecorationRange(e){let t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,i,n)}getLinesDecorations(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=this.getLineCount(),a=Math.min(o,Math.max(1,e)),l=Math.min(o,Math.max(1,t)),h=new dE(a,1,l,this.getLineMaxColumn(l)),d=this._getDecorationsInRange(h,i,n,s,r);return Kr(d,this._decorationProvider.getDecorationsInRange(h,i,n)),d}getDecorationsInRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=this.validateRange(e),a=this._getDecorationsInRange(o,t,i,n,r);return Kr(a,this._decorationProvider.getDecorationsInRange(o,t,i,s)),a}getOverviewRulerDecorations(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._decorationsTree.getAll(this,e,t,i,!0,!1)}getInjectedTextDecorations(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._decorationsTree.getAllInjectedText(this,e)}getCustomLineHeightsDecorations(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._decorationsTree.getAllCustomLineHeights(this,e)}_getInjectedTextInLine(e){let t=this._buffer.getOffsetAt(e,1),i=t+this._buffer.getLineLength(e),n=this._decorationsTree.getInjectedTextInInterval(this,t,i,0);return PB.fromDecorations(n).filter(t=>t.lineNumber===e)}getFontDecorationsInRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),n=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getFontDecorationsInInterval(this,i,n,t)}getAllDecorations(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this._decorationsTree.getAll(this,e,t,i,!1,!1);return n=n.concat(this._decorationProvider.getAllDecorations(e,t)),n}getAllMarginDecorations(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._decorationsTree.getAll(this,e,!1,!1,!1,!0)}_getDecorationsInRange(e,t,i,n,s){let r=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),o=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,r,o,t,i,n,s)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t,i){let n=this._decorations[t];if(!n)return;if(n.options.after){let e=this.getDecorationRange(t);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.endLineNumber)}if(n.options.before){let e=this.getDecorationRange(t);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.startLineNumber)}if(null!==n.options.lineHeight){let i=this.getDecorationRange(t);this._onDidChangeDecorations.recordLineAffectedByLineHeightChange(e,t,i.startLineNumber,null)}if(n.options.affectsFont){let i=this.getDecorationRange(t);this._onDidChangeDecorations.recordLineAffectedByFontChange(e,n.id,i.startLineNumber)}let s=this._validateRangeRelaxedNoAllocations(i),r=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),o=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);this._decorationsTree.delete(n),n.reset(this.getVersionId(),r,o,s),this._decorationsTree.insert(n),this._onDidChangeDecorations.checkAffectedAndFire(n.options),n.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.endLineNumber),n.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.startLineNumber),null!==n.options.lineHeight&&this._onDidChangeDecorations.recordLineAffectedByLineHeightChange(e,t,s.startLineNumber,n.options.lineHeight),n.options.affectsFont&&this._onDidChangeDecorations.recordLineAffectedByFontChange(e,n.id,s.startLineNumber)}_changeDecorationOptionsImpl(e,t,i){let n=this._decorations[t];if(!n)return;let s=!(!n.options.overviewRuler||!n.options.overviewRuler.color),r=!(!i.overviewRuler||!i.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(n.options),this._onDidChangeDecorations.checkAffectedAndFire(i),n.options.after||i.after){let e=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.endLineNumber)}if(n.options.before||i.before){let e=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.startLineNumber)}if(null!==n.options.lineHeight||null!==i.lineHeight){let s=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByLineHeightChange(e,t,s.startLineNumber,i.lineHeight)}if(n.options.affectsFont||i.affectsFont){let i=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByFontChange(e,t,i.startLineNumber)}let o=s!==r,a=function(e){return!!e.after||!!e.before}(i)!==rU(n);o||a?(this._decorationsTree.delete(n),n.setOptions(i),this._decorationsTree.insert(n)):n.setOptions(i)}_deltaDecorationsImpl(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=this.getVersionId(),r=t.length,o=0,a=i.length,l=0;this._onDidChangeDecorations.beginDeferredEmit();try{let h=Array(a);for(;o<r||l<a;){let d=null;if(o<r){let i;do{i=t[o++],d=this._decorations[i]}while(!d&&o<r);if(d){if(d.options.after){let e=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.endLineNumber)}if(d.options.before){let e=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.startLineNumber)}if(null!==d.options.lineHeight){let t=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByLineHeightChange(e,i,t.startLineNumber,null)}if(d.options.affectsFont){let t=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByFontChange(e,i,t.startLineNumber)}this._decorationsTree.delete(d),n||this._onDidChangeDecorations.checkAffectedAndFire(d.options)}}if(l<a){if(!d){let e=++this._lastDecorationId,t="".concat(this._instanceId,";").concat(e);d=new tO(t,0,0),this._decorations[t]=d}let t=i[l],r=this._validateRangeRelaxedNoAllocations(t.range),o=fU(t.options),a=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),c=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);d.ownerId=e,d.reset(s,a,c,r),d.setOptions(o),d.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.endLineNumber),d.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.startLineNumber),null!==d.options.lineHeight&&this._onDidChangeDecorations.recordLineAffectedByLineHeightChange(e,d.id,r.startLineNumber,d.options.lineHeight),d.options.affectsFont&&this._onDidChangeDecorations.recordLineAffectedByFontChange(e,d.id,r.startLineNumber),n||this._onDidChangeDecorations.checkAffectedAndFire(o),this._decorationsTree.insert(d),h[l]=d.id,l++}else d&&delete this._decorations[d.id]}return h}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(e,t){"string"==typeof e?(this._languageSelectionListener.clear(),this._setLanguage(e,t)):(this._languageSelectionListener.value=e.onDidChange(()=>this._setLanguage(e.languageId,t)),this._setLanguage(e.languageId,t))}_setLanguage(e,t){this.tokenization.setLanguageId(e,t),this._languageService.requestRichLanguageFeatures(e)}getLanguageIdAtPosition(e,t){return this.tokenization.getLanguageIdAtPosition(e,t)}getWordAtPosition(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}getWordUntilPosition(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}normalizePosition(e,t){return e}getLineIndentColumn(e){return function(e){let t=0;for(let i of e){if(" "!==i&&"\t"!==i)break;t++}return t}(this.getLineContent(e))+1}toString(){return"TextModel(".concat(this.uri.toString(),")")}},{_:RB=Pt},{_:Pt._MODEL_SYNC_LIMIT=52428800},{_:Pt.LARGE_FILE_SIZE_THRESHOLD=20971520},{_:Pt.LARGE_FILE_LINE_COUNT_THRESHOLD=3e5},{_:Pt.LARGE_FILE_HEAP_OPERATION_THRESHOLD=268435456},{_:Pt.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:NT.tabSize,indentSize:NT.indentSize,insertSpaces:NT.insertSpaces,detectIndentation:!1,defaultEOL:rS.LF,trimAutoWhitespace:NT.trimAutoWhitespace,largeFileOptimizations:NT.largeFileOptimizations,bracketPairColorizationOptions:NT.bracketPairColorizationOptions}},Pt);function sU(e){return!(!e.options.overviewRuler||!e.options.overviewRuler.color)}function rU(e){return!!e.options.after||!!e.options.before}nU=RB=ki([Ei(4,yO),Ei(5,Pw),Ei(6,_R),Ei(7,pn)],nU);var oU=class{constructor(){this._decorationsTree0=new sO,this._decorationsTree1=new sO,this._injectedTextDecorationsTree=new sO}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1,!1,!1)}_ensureNodesHaveRanges(e,t){for(let i of t)null===i.range&&(i.range=e.getRangeAt(i.cachedAbsoluteStart,i.cachedAbsoluteEnd));return t}getAllInInterval(e,t,i,n,s,r,o){let a=e.getVersionId(),l=this._intervalSearch(t,i,n,s,r,a,o);return this._ensureNodesHaveRanges(e,l)}_intervalSearch(e,t,i,n,s,r,o){let a=this._decorationsTree0.intervalSearch(e,t,i,n,s,r,o),l=this._decorationsTree1.intervalSearch(e,t,i,n,s,r,o),h=this._injectedTextDecorationsTree.intervalSearch(e,t,i,n,s,r,o);return a.concat(l).concat(h)}getInjectedTextInInterval(e,t,i,n){let s=e.getVersionId(),r=this._injectedTextDecorationsTree.intervalSearch(t,i,n,!1,!1,s,!1);return this._ensureNodesHaveRanges(e,r).filter(e=>e.options.showIfCollapsed||!e.range.isEmpty())}getFontDecorationsInInterval(e,t,i,n){let s=e.getVersionId(),r=this._decorationsTree0.intervalSearch(t,i,n,!1,!1,s,!1);return this._ensureNodesHaveRanges(e,r).filter(e=>e.options.affectsFont)}getAllInjectedText(e,t){let i=e.getVersionId(),n=this._injectedTextDecorationsTree.search(t,!1,!1,i,!1);return this._ensureNodesHaveRanges(e,n).filter(e=>e.options.showIfCollapsed||!e.range.isEmpty())}getAllCustomLineHeights(e,t){let i=e.getVersionId(),n=this._search(t,!1,!1,!1,i,!1);return this._ensureNodesHaveRanges(e,n).filter(e=>"number"==typeof e.options.lineHeight)}getAll(e,t,i,n,s,r){let o=e.getVersionId(),a=this._search(t,i,n,s,o,r);return this._ensureNodesHaveRanges(e,a)}_search(e,t,i,n,s,r){if(n)return this._decorationsTree1.search(e,t,i,s,r);{let n=this._decorationsTree0.search(e,t,i,s,r),o=this._decorationsTree1.search(e,t,i,s,r),a=this._injectedTextDecorationsTree.search(e,t,i,s,r);return n.concat(o).concat(a)}}collectNodesFromOwner(e){let t=this._decorationsTree0.collectNodesFromOwner(e),i=this._decorationsTree1.collectNodesFromOwner(e),n=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(i).concat(n)}collectNodesPostOrder(){let e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),i=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(i)}insert(e){rU(e)?this._injectedTextDecorationsTree.insert(e):sU(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){rU(e)?this._injectedTextDecorationsTree.delete(e):sU(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){let i=e.getVersionId();return t.cachedVersionId!==i&&this._resolveNode(t,i),null===t.range&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){rU(e)?this._injectedTextDecorationsTree.resolveNode(e,t):sU(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,i,n){this._decorationsTree0.acceptReplace(e,t,i,n),this._decorationsTree1.acceptReplace(e,t,i,n),this._injectedTextDecorationsTree.acceptReplace(e,t,i,n)}};function aU(e){return e.replace(/[^a-z0-9\-_]/gi," ")}var lU=class{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}},hU=class extends lU{constructor(e){super(e),this._resolvedColor=null,this.position="number"==typeof e.position?e.position:Zw.Center}getColor(e){return this._resolvedColor||(ou(e.type)&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if("string"==typeof e)return e;let i=e?t.getColor(e.id):null;return i?i.toString():""}},dU=class{constructor(e){var t;this.position=null!==(t=null===e||void 0===e?void 0:e.position)&&void 0!==t?t:Jw.Center,this.persistLane=null===e||void 0===e?void 0:e.persistLane}},cU=class extends lU{constructor(e){var t,i;super(e),this.position=e.position,this.sectionHeaderStyle=null!==(t=e.sectionHeaderStyle)&&void 0!==t?t:null,this.sectionHeaderText=null!==(i=e.sectionHeaderText)&&void 0!==i?i:null}getColor(e){return this._resolvedColor||(ou(e.type)&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return"string"==typeof e?Ir.fromHex(e):t.getColor(e.id)}},uU=class e{static from(t){return t instanceof e?t:new e(t)}constructor(e){var t;this.content=e.content||"",this.tokens=null!==(t=e.tokens)&&void 0!==t?t:null,this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}},gU=class e{static register(t){return new e(t)}static createDynamic(t){return new e(t)}constructor(e){var t,i,n,s,r,o,a;this.description=e.description,this.blockClassName=e.blockClassName?aU(e.blockClassName):null,this.blockDoesNotCollapse=null!==(t=e.blockDoesNotCollapse)&&void 0!==t?t:null,this.blockIsAfterEnd=null!==(i=e.blockIsAfterEnd)&&void 0!==i?i:null,this.blockPadding=null!==(n=e.blockPadding)&&void 0!==n?n:null,this.stickiness=e.stickiness||uS.AlwaysGrowsWhenTypingAtEdges,this.zIndex=e.zIndex||0,this.className=e.className?aU(e.className):null,this.shouldFillLineOnLineBreak=null!==(s=e.shouldFillLineOnLineBreak)&&void 0!==s?s:null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=e.lineNumberHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.lineHeight=e.lineHeight?Math.min(e.lineHeight,300):null,this.fontSize=e.fontSize||null,this.affectsFont=!!e.fontSize||!!e.fontFamily||!!e.fontWeight||!!e.fontStyle,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new hU(e.overviewRuler):null,this.minimap=e.minimap?new cU(e.minimap):null,this.glyphMargin=e.glyphMarginClassName?new dU(e.glyphMargin):null,this.glyphMarginClassName=e.glyphMarginClassName?aU(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?aU(e.linesDecorationsClassName):null,this.lineNumberClassName=e.lineNumberClassName?aU(e.lineNumberClassName):null,this.linesDecorationsTooltip=e.linesDecorationsTooltip?function(e){return e.replace(/[<>"'&]/g,e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return e})}(e.linesDecorationsTooltip):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?aU(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?aU(e.marginClassName):null,this.inlineClassName=e.inlineClassName?aU(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?aU(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?aU(e.afterContentClassName):null,this.after=e.after?uU.from(e.after):null,this.before=e.before?uU.from(e.before):null,this.hideInCommentTokens=null!==(r=e.hideInCommentTokens)&&void 0!==r&&r,this.hideInStringTokens=null!==(o=e.hideInStringTokens)&&void 0!==o&&o,this.textDirection=null!==(a=e.textDirection)&&void 0!==a?a:null}};gU.EMPTY=gU.register({description:"empty"});var pU=[gU.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:uS.AlwaysGrowsWhenTypingAtEdges}),gU.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:uS.NeverGrowsWhenTypingAtEdges}),gU.register({description:"tracked-range-grows-only-when-typing-before",stickiness:uS.GrowsOnlyWhenTypingBefore}),gU.register({description:"tracked-range-grows-only-when-typing-after",stickiness:uS.GrowsOnlyWhenTypingAfter})];function fU(e){return e instanceof gU?e:gU.createDynamic(e)}var mU,vU=class{static toKey(e){return"".concat(e.ownerId,";").concat(e.decorationId,";").concat(e.lineNumber)}constructor(e,t,i,n){this.ownerId=e,this.decorationId=t,this.lineNumber=i,this.lineHeight=n}},_U=class{static toKey(e){return"".concat(e.ownerId,";").concat(e.decorationId,";").concat(e.lineNumber)}constructor(e,t,i){this.ownerId=e,this.decorationId=t,this.lineNumber=i}},bU=class extends Co{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new Ro),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._affectedLineHeights=null,this._affectedFontLines=null,this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._affectsLineNumber=!1}hasListeners(){return this._actual.hasListeners()}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e,t,i;this._deferredCnt--,0===this._deferredCnt&&(this._shouldFireDeferred&&this.doFire(),null!==(e=this._affectedInjectedTextLines)&&void 0!==e&&e.clear(),this._affectedInjectedTextLines=null,null!==(t=this._affectedLineHeights)&&void 0!==t&&t.clear(),this._affectedLineHeights=null,null!==(i=this._affectedFontLines)&&void 0!==i&&i.clear(),this._affectedFontLines=null)}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}recordLineAffectedByLineHeightChange(e,t,i,n){this._affectedLineHeights||(this._affectedLineHeights=new Lr([],vU.toKey)),this._affectedLineHeights.add(new vU(e,t,i,n))}recordLineAffectedByFontChange(e,t,i){this._affectedFontLines||(this._affectedFontLines=new Lr([],_U.toKey)),this._affectedFontLines.add(new _U(e,t,i))}checkAffectedAndFire(e){var t,i;this._affectsMinimap||(this._affectsMinimap=!(null===(t=e.minimap)||void 0===t||!t.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!(null===(i=e.overviewRuler)||void 0===i||!i.color)),this._affectsGlyphMargin||(this._affectsGlyphMargin=!!e.glyphMarginClassName),this._affectsLineNumber||(this._affectsLineNumber=!!e.lineNumberClassName),this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){0===this._deferredCnt?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines,this._affectedLineHeights,this._affectedFontLines);let e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(e)}},CU=class extends Co{constructor(){super(),this._fastEmitter=this._register(new Ro),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new Ro),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}hasListeners(){return this._fastEmitter.hasListeners()||this._slowEmitter.hasListeners()}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this._deferredCnt--,0===this._deferredCnt&&null!==this._deferredEvent){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;let t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){this._deferredCnt>0?this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e:(this._fastEmitter.fire(e),this._slowEmitter.fire(e))}};function yU(e){return e.toString()}var wU=class{constructor(e,t,i){this.model=e,this._modelEventListeners=new bo,this.model=e,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(t=>i(e,t)))}dispose(){this._modelEventListeners.dispose()}},SU=Gn||qn?rS.LF:rS.CRLF,kU=class{constructor(e,t,i,n,s,r,o,a){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=i,this.sharesUndoRedoStack=n,this.heapSize=s,this.sha1=r,this.versionId=o,this.alternativeVersionId=a}},EU=(Bt=class extends Co{constructor(e,t,i,n){super(),this._configurationService=e,this._resourcePropertiesService=t,this._undoRedoService=i,this._instantiationService=n,this._onModelAdded=this._register(new Ro),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new Ro),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new Ro),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._register(this._configurationService.onDidChangeConfiguration(e=>this._updateModelOptions(e))),this._updateModelOptions(void 0)}static _readModelOptions(e,t){var i;let n=NT.tabSize;e.editor&&void 0!==e.editor.tabSize&&(n=$T(e.editor.tabSize,NT.tabSize,1,100));let s="tabSize";e.editor&&void 0!==e.editor.indentSize&&"tabSize"!==e.editor.indentSize&&(s=$T(e.editor.indentSize,"tabSize",1,100));let r=NT.insertSpaces;e.editor&&void 0!==e.editor.insertSpaces&&(r="false"!==e.editor.insertSpaces&&!!e.editor.insertSpaces);let o=SU,a=e.eol;"\r\n"===a?o=rS.CRLF:"\n"===a&&(o=rS.LF);let l=NT.trimAutoWhitespace;e.editor&&void 0!==e.editor.trimAutoWhitespace&&(l="false"!==e.editor.trimAutoWhitespace&&!!e.editor.trimAutoWhitespace);let h=NT.detectIndentation;e.editor&&void 0!==e.editor.detectIndentation&&(h="false"!==e.editor.detectIndentation&&!!e.editor.detectIndentation);let d=NT.largeFileOptimizations;e.editor&&void 0!==e.editor.largeFileOptimizations&&(d="false"!==e.editor.largeFileOptimizations&&!!e.editor.largeFileOptimizations);let c=NT.bracketPairColorizationOptions;if(null!==(i=e.editor)&&void 0!==i&&i.bracketPairColorization&&"object"==typeof e.editor.bracketPairColorization){let t=e.editor.bracketPairColorization;c={enabled:!!t.enabled,independentColorPoolPerBracketType:!!t.independentColorPoolPerBracketType}}return{isForSimpleWidget:t,tabSize:n,indentSize:s,insertSpaces:r,detectIndentation:h,defaultEOL:o,trimAutoWhitespace:l,largeFileOptimizations:d,bracketPairColorizationOptions:c}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);let i=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return i&&"string"==typeof i&&"auto"!==i?i:ss===ts.Linux||ss===ts.Macintosh?"\n":"\r\n"}_shouldRestoreUndoStack(){let e=this._configurationService.getValue("files.restoreUndoStack");return"boolean"!=typeof e||e}getCreationOptions(e,t,i){let n="string"==typeof e?e:e.languageId,s=this._modelCreationOptionsByLanguageAndResource[n+t];if(!s){let e=this._configurationService.getValue("editor",{overrideIdentifier:n,resource:t}),r=this._getEOL(t,n);s=mU._readModelOptions({editor:e,eol:r},i),this._modelCreationOptionsByLanguageAndResource[n+t]=s}return s}_updateModelOptions(e){let t=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);let i=Object.keys(this._models);for(let n=0,s=i.length;n<s;n++){let s=i[n],r=this._models[s],o=r.model.getLanguageId(),a=r.model.uri;if(e&&!e.affectsConfiguration("editor",{overrideIdentifier:o,resource:a})&&!e.affectsConfiguration("files.eol",{overrideIdentifier:o,resource:a}))continue;let l=t[o+a],h=this.getCreationOptions(o,a,r.model.isForSimpleWidget);mU._setModelOptionsForModel(r.model,h,l)}}static _setModelOptionsForModel(e,t,i){i&&i.defaultEOL!==t.defaultEOL&&1===e.getLineCount()&&e.setEOL(t.defaultEOL===rS.LF?oS.LF:oS.CRLF),(!i||i.detectIndentation!==t.detectIndentation||i.insertSpaces!==t.insertSpaces||i.tabSize!==t.tabSize||i.indentSize!==t.indentSize||i.trimAutoWhitespace!==t.trimAutoWhitespace||!dS(i.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(yU(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){let t=this._disposedModels.get(yU(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(yU(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){let t=[];for(this._disposedModels.forEach(e=>{e.sharesUndoRedoStack||t.push(e)}),t.sort((e,t)=>e.time-t.time);t.length>0&&this._disposedModelsHeapSize>e;){let e=t.shift();this._removeDisposedModel(e.uri),null!==e.initialUndoRedoSnapshot&&this._undoRedoService.restoreSnapshot(e.initialUndoRedoSnapshot)}}}_createModelData(e,t,i,n){let s=this.getCreationOptions(t,i,n),r=this._instantiationService.createInstance(nU,e,t,s,i);if(i&&this._disposedModels.has(yU(i))){let e=this._removeDisposedModel(i),t=this._undoRedoService.getElements(i),n=this._getSHA1Computer(),s=!!n.canComputeSHA1(r)&&n.computeSHA1(r)===e.sha1;if(s||e.sharesUndoRedoStack){for(let e of t.past)gR(e)&&e.matchesResource(i)&&e.setModel(r);for(let e of t.future)gR(e)&&e.matchesResource(i)&&e.setModel(r);this._undoRedoService.setElementsValidFlag(i,!0,e=>gR(e)&&e.matchesResource(i)),s&&(r._overwriteVersionId(e.versionId),r._overwriteAlternativeVersionId(e.alternativeVersionId),r._overwriteInitialUndoRedoSnapshot(e.initialUndoRedoSnapshot))}else null!==e.initialUndoRedoSnapshot&&this._undoRedoService.restoreSnapshot(e.initialUndoRedoSnapshot)}let o=yU(r.uri);if(this._models[o])throw Error("ModelService: Cannot add model because it already exists!");let a=new wU(r,e=>this._onWillDispose(e),(e,t)=>this._onDidChangeLanguage(e,t));return this._models[o]=a,a}updateModel(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rR.unknown({name:"updateModel"}),{textBuffer:n,disposable:s}=ZB(t,this.getCreationOptions(e.getLanguageId(),e.uri,e.isForSimpleWidget).defaultEOL);e.equalsTextBuffer(n)||(e.pushStackElement(),e.pushEOL("\r\n"===n.getEOL()?oS.CRLF:oS.LF),e.pushEditOperations([],mU._computeEdits(e,n),()=>[],void 0,i),e.pushStackElement()),s.dispose()}static _commonPrefix(e,t,i,n,s,r){let o=Math.min(t,s),a=0;for(let l=0;l<o&&e.getLineContent(i+l)===n.getLineContent(r+l);l++)a++;return a}static _commonSuffix(e,t,i,n,s,r){let o=Math.min(t,s),a=0;for(let l=0;l<o&&e.getLineContent(i+t-l)===n.getLineContent(r+s-l);l++)a++;return a}static _computeEdits(e,t){let i=e.getLineCount(),n=t.getLineCount(),s=this._commonPrefix(e,i,1,t,n,1);if(i===n&&s===i)return[];let r,o,a=this._commonSuffix(e,i-s,s,t,n-s,s);return a>0?(r=new dE(s+1,1,i-a+1,1),o=new dE(s+1,1,n-a+1,1)):s>0?(r=new dE(s,e.getLineMaxColumn(s),i,e.getLineMaxColumn(i)),o=new dE(s,1+t.getLineLength(s),n,1+t.getLineLength(n))):(r=new dE(1,1,i,e.getLineMaxColumn(i)),o=new dE(1,1,n,1+t.getLineLength(n))),[xI.replaceMove(r,t.getValueInRange(o,sS.TextDefined))]}createModel(e,t,i){let n,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return n=t?this._createModelData(e,t,i,s):this._createModelData(e,bm,i,s),this._onModelAdded.fire(n.model),n.model}destroyModel(e){let t=this._models[yU(e)];t&&t.model.dispose()}getModels(){let e=[],t=Object.keys(this._models);for(let i=0,n=t.length;i<n;i++){let n=t[i];e.push(this._models[n].model)}return e}getModel(e){let t=yU(e),i=this._models[t];return i?i.model:null}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===Ha.file||e.scheme===Ha.vscodeRemote||e.scheme===Ha.vscodeUserData||e.scheme===Ha.vscodeNotebookCell||"fake-fs"===e.scheme}_onWillDispose(e){let t=yU(e.uri),i=this._models[t],n=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString(),s=!1,r=0;if(n||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){let t=this._undoRedoService.getElements(e.uri);if(t.past.length>0||t.future.length>0){for(let i of t.past)gR(i)&&i.matchesResource(e.uri)&&(s=!0,r+=i.heapSize(e.uri),i.setModel(e.uri));for(let i of t.future)gR(i)&&i.matchesResource(e.uri)&&(s=!0,r+=i.heapSize(e.uri),i.setModel(e.uri))}}let o=mU.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK,a=this._getSHA1Computer();if(s)if(n||!(r>o)&&a.canComputeSHA1(e))this._ensureDisposedModelsHeapSize(o-r),this._undoRedoService.setElementsValidFlag(e.uri,!1,t=>gR(t)&&t.matchesResource(e.uri)),this._insertDisposedModel(new kU(e.uri,i.model.getInitialUndoRedoSnapshot(),Date.now(),n,r,a.computeSHA1(e),e.getVersionId(),e.getAlternativeVersionId()));else{let e=i.model.getInitialUndoRedoSnapshot();null!==e&&this._undoRedoService.restoreSnapshot(e)}else if(!n){let e=i.model.getInitialUndoRedoSnapshot();null!==e&&this._undoRedoService.restoreSnapshot(e)}delete this._models[t],i.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){let i=t.oldLanguage,n=e.getLanguageId(),s=this.getCreationOptions(i,e.uri,e.isForSimpleWidget),r=this.getCreationOptions(n,e.uri,e.isForSimpleWidget);mU._setModelOptionsForModel(e,r,s),this._onModelModeChanged.fire({model:e,oldLanguageId:i})}_getSHA1Computer(){return new TU}},{_:mU=Bt},{_:Bt.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20971520},Bt);EU=mU=ki([Ei(0,fr),Ei(1,FI),Ei(2,yO),Ei(3,pn)],EU);var DU,TU=(Ut=class e{canComputeSHA1(t){return t.getValueLength()<=e.MAX_MODEL_SIZE}computeSHA1(e){let t,i=new Ug,n=e.createSnapshot();for(;t=n.read();)i.update(t);return i.digest()}},{_:Ut.MAX_MODEL_SIZE=10485760},Ut),IU=(Ht=class e{static getRegisteredCommands(){return[...e.REGISTERED_COMMANDS]}static registerCommand(t){e.REGISTERED_COMMANDS.add(t)}},{_:Ht.REGISTERED_COMMANDS=new Set},Ht);!function(e){e[e.Eager=0]="Eager",e[e.AfterFirstRender=1]="AfterFirstRender",e[e.BeforeFirstInteraction=2]="BeforeFirstInteraction",e[e.Eventually=3]="Eventually",e[e.Lazy=4]="Lazy"}(DU||(DU={}));var xU,LU=class{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this.metadata=e.metadata,this.canTriggerInlineEdits=e.canTriggerInlineEdits}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){let e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(let t of e){let e=t.kbExpr;this.precondition&&(e=e?Dk.and(e,this.precondition):this.precondition);let i={id:this.id,weight:t.weight,args:t.args,when:e,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};ND.registerKeybindingRule(i)}}AD.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),metadata:this.metadata}),this.canTriggerInlineEdits&&IU.registerCommand(this.id)}_registerMenuItem(e){XD.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}},AU=class extends LU{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,i,n){return this._implementations.push({priority:e,name:t,implementation:i,when:n}),this._implementations.sort((e,t)=>t.priority-e.priority),{dispose:()=>{for(let e=0;e<this._implementations.length;e++)if(this._implementations[e].implementation===i)return void this._implementations.splice(e,1)}}}runCommand(e,t){let i=e.get(Np),n=e.get(AS);i.trace("Executing Command '".concat(this.id,"' which has ").concat(this._implementations.length," bound."));for(let s of this._implementations){if(s.when){let e=n.getContext(hb());if(!s.when.evaluate(e))continue}let r=s.implementation(e,t);if(r)return i.trace("Command '".concat(this.id,"' was handled by '").concat(s.name,"'.")),"boolean"==typeof r?void 0:r}i.trace("The Command '".concat(this.id,"' was not handled by any implementation."))}},NU=class extends LU{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}};!function(e){e.getEditorCommand=function(e){return FU.INSTANCE.getEditorCommand(e)},e.getEditorActions=function(){return FU.INSTANCE.getEditorActions()},e.getEditorContributions=function(){return FU.INSTANCE.getEditorContributions()},e.getSomeEditorContributions=function(e){return FU.INSTANCE.getEditorContributions().filter(t=>e.indexOf(t.id)>=0)},e.getDiffEditorContributions=function(){return FU.INSTANCE.getDiffEditorContributions()}}(xU||(xU={}));var FU=(Wt=class{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t,i){this.editorContributions.push({id:e,ctor:t,instantiation:i})}getEditorContributions(){return this.editorContributions.slice(0)}registerDiffEditorContribution(e,t){this.diffEditorContributions.push({id:e,ctor:t})}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}},{_:Wt.INSTANCE=new Wt},Wt);function OU(e){return e.register(),e}Tn.add("editor.contributions",FU.INSTANCE),OU(new NU(OU(new AU({id:"undo",precondition:void 0,kbOpts:{weight:TD.EditorCore,primary:Yv.CtrlCmd|Kv.KeyZ},menuOpts:[{menuId:QD.MenubarEditMenu,group:"1_do",title:Li(138,"&&Undo"),order:1},{menuId:QD.CommandPalette,group:"",title:Li(139,"Undo"),order:1},{menuId:QD.SimpleEditorContext,group:"1_do",title:Li(139,"Undo"),order:1}]})),{id:"default:undo",precondition:void 0})),OU(new NU(OU(new AU({id:"redo",precondition:void 0,kbOpts:{weight:TD.EditorCore,primary:Yv.CtrlCmd|Kv.KeyY,secondary:[Yv.CtrlCmd|Yv.Shift|Kv.KeyZ],mac:{primary:Yv.CtrlCmd|Yv.Shift|Kv.KeyZ}},menuOpts:[{menuId:QD.MenubarEditMenu,group:"1_do",title:Li(140,"&&Redo"),order:2},{menuId:QD.CommandPalette,group:"",title:Li(141,"Redo"),order:1},{menuId:QD.SimpleEditorContext,group:"1_do",title:Li(141,"Redo"),order:2}]})),{id:"default:redo",precondition:void 0})),OU(new AU({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:TD.EditorCore,kbExpr:null,primary:Yv.CtrlCmd|Kv.KeyA},menuOpts:[{menuId:QD.MenubarSelectionMenu,group:"1_basic",title:Li(142,"&&Select All"),order:1},{menuId:QD.CommandPalette,group:"",title:Li(143,"Select All"),order:1},{menuId:QD.SimpleEditorContext,group:"9_select",title:Li(143,"Select All"),order:1}]}));var RU,MU=fn("openerService");!function(e){e[e.PRESERVE=0]="PRESERVE",e[e.LAST=1]="LAST"}(RU||(RU={}));var PU="workbench.contributions.quickaccess";Tn.add(PU,new class{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return 0===e.prefix.length?this.defaultProvider=e:this.providers.push(e),this.providers.sort((e,t)=>t.prefix.length-e.prefix.length),vo(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return Pr([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(t=>e.startsWith(t.prefix))||this.defaultProvider}clear(){let e=[...this.providers],t=this.defaultProvider;return this.providers=[],this.defaultProvider=void 0,()=>{this.providers=e,this.defaultProvider=t}}});var BU,UU,HU,WU,VU,zU={ctrlCmd:!1,alt:!1};!function(e){e[e.Blur=1]="Blur",e[e.Gesture=2]="Gesture",e[e.Other=3]="Other"}(BU||(BU={})),function(e){e.QuickPick="quickPick",e.InputBox="inputBox",e.QuickWidget="quickWidget",e.QuickTree="quickTree"}(UU||(UU={})),function(e){e[e.NONE=0]="NONE",e[e.FIRST=1]="FIRST",e[e.SECOND=2]="SECOND",e[e.LAST=3]="LAST"}(HU||(HU={})),function(e){e[e.First=1]="First",e[e.Second=2]="Second",e[e.Last=3]="Last",e[e.Next=4]="Next",e[e.Previous=5]="Previous",e[e.NextPage=6]="NextPage",e[e.PreviousPage=7]="PreviousPage",e[e.NextSeparator=8]="NextSeparator",e[e.PreviousSeparator=9]="PreviousSeparator"}(WU||(WU={})),function(e){e[e.Title=1]="Title",e[e.Inline=2]="Inline",e[e.Input=3]="Input"}(VU||(VU={})),new class{constructor(e){this.options=e}getItemLabel(e){return e.label}getItemDescription(e){var t;if(null===(t=this.options)||void 0===t||!t.skipDescription)return e.description}getItemPath(e){var t,i,n;if(null===(t=this.options)||void 0===t||!t.skipPath)return(null===(i=e.resource)||void 0===i?void 0:i.scheme)===Ha.file?e.resource.fsPath:null===(n=e.resource)||void 0===n?void 0:n.path}};var KU=class extends Co{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=Tn.as(PU),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0,this._register(vo(()=>{var e;for(let t of this.mapProviderToDescriptor.values())go(t)&&t.dispose();null===(e=this.visibleQuickAccess)||void 0===e||e.picker.dispose()}))}pick(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return this.doShowOrPick(e,!0,t)}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,i){var n,s,r,o,a;let[l,h]=this.getOrInstantiateProvider(e,null===i||void 0===i?void 0:i.enabledProviderPrefixes),d=this.visibleQuickAccess,c=null===d||void 0===d?void 0:d.descriptor;if(d&&h&&c===h)return e!==h.prefix&&!(null!==i&&void 0!==i&&i.preserveValue)&&(d.picker.value=e),void this.adjustValueSelection(d.picker,h,i);if(h&&(null===i||void 0===i||!i.preserveValue)){let t;if(d&&c&&c!==h){let e=d.value.substr(c.prefix.length);e&&(t="".concat(h.prefix).concat(e))}if(!t){let e=null===l||void 0===l?void 0:l.defaultFilterValue;e===RU.LAST?t=this.lastAcceptedPickerValues.get(h):"string"==typeof e&&(t="".concat(h.prefix).concat(e))}"string"==typeof t&&(e=t)}let u,g=null===d||void 0===d||null===(n=d.picker)||void 0===n?void 0:n.valueSelection,p=null===d||void 0===d||null===(s=d.picker)||void 0===s?void 0:s.value,f=new bo,m=f.add(this.quickInputService.createQuickPick({useSeparators:!0}));m.value=e,this.adjustValueSelection(m,h,i),m.placeholder=null!==(r=null===i||void 0===i?void 0:i.placeholder)&&void 0!==r?r:null===h||void 0===h?void 0:h.placeholder,m.quickNavigate=null===i||void 0===i?void 0:i.quickNavigateConfiguration,m.hideInput=!!m.quickNavigate&&!d,("number"==typeof(null===i||void 0===i?void 0:i.itemActivation)||null!==i&&void 0!==i&&i.quickNavigateConfiguration)&&(m.itemActivation=null!==(o=null===i||void 0===i?void 0:i.itemActivation)&&void 0!==o?o:HU.SECOND),m.contextKey=null===h||void 0===h?void 0:h.contextKey,m.filterValue=e=>e.substring(h?h.prefix.length:0),t&&(u=new Vl,f.add(_o.once(m.onWillAccept)(e=>{e.veto(),m.hide()}))),f.add(this.registerPickerListeners(m,l,h,e,i));let v=f.add(new Qo);return l&&f.add(l.provide(m,v.token,null===i||void 0===i?void 0:i.providerOptions)),_o.once(m.onDidHide)(()=>{var e;0===m.selectedItems.length&&v.cancel(),f.dispose(),null===(e=u)||void 0===e||e.complete(m.selectedItems.slice(0))}),m.show(),g&&p===e&&(m.valueSelection=g),t?null===(a=u)||void 0===a?void 0:a.p:void 0}adjustValueSelection(e,t,i){var n;let s;s=null!==i&&void 0!==i&&i.preserveValue?[e.value.length,e.value.length]:[null!==(n=null===t||void 0===t?void 0:t.prefix.length)&&void 0!==n?n:0,e.value.length],e.valueSelection=s}registerPickerListeners(e,t,i,n,s){let r=new bo,o=this.visibleQuickAccess={picker:e,descriptor:i,value:n};return r.add(vo(()=>{o===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),r.add(e.onDidChangeValue(e=>{let[i]=this.getOrInstantiateProvider(e,null===s||void 0===s?void 0:s.enabledProviderPrefixes);i===t?o.value=e:this.show(e,{enabledProviderPrefixes:null===s||void 0===s?void 0:s.enabledProviderPrefixes,preserveValue:!0,providerOptions:null===s||void 0===s?void 0:s.providerOptions})})),i&&r.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(i,e.value)})),r}getOrInstantiateProvider(e,t){let i=this.registry.getQuickAccessProvider(e);if(!i||t&&(null===t||void 0===t||!t.includes(i.prefix)))return[void 0,void 0];let n=this.mapProviderToDescriptor.get(i);return n||(n=this.instantiationService.createInstance(i.ctor),this.mapProviderToDescriptor.set(i,n)),[n,i]}};KU=ki([Ei(0,nT),Ei(1,pn)],KU),wE({});var qU={inputActiveOptionBorder:"#007ACC00",inputActiveOptionForeground:"#FFFFFF",inputActiveOptionBackground:"#0E639C50"},GU=class extends AE{get onChange(){return this._onChange.event}get onKeyDown(){return this._onKeyDown.event}constructor(e){super(),this._onChange=this._register(new Ro),this._onKeyDown=this._register(new Ro),this._opts=e,this._title=this._opts.title,this._checked=this._opts.isChecked;let t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...yf.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=mb("div"),this._register(EN().setupDelayedHover(this.domNode,()=>({content:this._title,style:gD.Pointer}),this._opts.hoverLifecycleOptions)),this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.setTitle(this._opts.title),this.applyStyles(),this.onclick(this.domNode,e=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),e.preventDefault())}),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,e=>{if(this.enabled){if(e.keyCode===Kv.Space||e.keyCode===Kv.Enter)return this.checked=!this._checked,this._onChange.fire(!0),e.preventDefault(),void e.stopPropagation();this._onKeyDown.fire(e)}})}get enabled(){return"true"!==this.domNode.getAttribute("aria-disabled")}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}setIcon(e){this._icon&&this.domNode.classList.remove(...yf.asClassNameArray(this._icon)),this._icon=e,this._icon&&this.domNode.classList.add(...yf.asClassNameArray(this._icon))}width(){return 22}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled","false"),this.domNode.classList.remove("disabled")}disable(){this.domNode.setAttribute("aria-disabled","true"),this.domNode.classList.add("disabled")}setTitle(e){this._title=e,this.domNode.setAttribute("aria-label",e)}set visible(e){this.domNode.style.display=e?"":"none"}get visible(){return"none"!==this.domNode.style.display}},jU=(Vt=class extends AE{constructor(e,t,i){super(),this.checkbox=e,this.domNode=t,this.styles=i,this._onChange=this._register(new Ro),this.onChange=this._onChange.event,this.applyStyles()}get enabled(){return this.checkbox.enabled}focus(){this.domNode.focus()}hasFocus(){return cb(this.domNode)}enable(){this.checkbox.enable(),this.applyStyles(!0)}disable(){this.checkbox.disable(),this.applyStyles(!1)}setTitle(e){this.checkbox.setTitle(e)}applyStyles(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.enabled;this.domNode.style.color=(e?this.styles.checkboxForeground:this.styles.checkboxDisabledForeground)||"",this.domNode.style.backgroundColor=(e?this.styles.checkboxBackground:this.styles.checkboxDisabledBackground)||"",this.domNode.style.borderColor=(e?this.styles.checkboxBorder:this.styles.checkboxDisabledBackground)||"";let t=this.styles.size||18;this.domNode.style.width=this.domNode.style.height=this.domNode.style.fontSize="".concat(t,"px"),this.domNode.style.fontSize="".concat(t-2,"px")}},{_:Vt.CLASS_NAME="monaco-checkbox"},Vt),YU=class extends jU{constructor(e,t,i){let n=new GU((0,r.A)({title:e,isChecked:t,icon:su.check,actionClassName:jU.CLASS_NAME,hoverLifecycleOptions:i.hoverLifecycleOptions},qU));super(n,n.domNode,i),this._register(n),this._register(this.checkbox.onChange(e=>{this.applyStyles(),this._onChange.fire(e)}))}get checked(){return this.checkbox.checked}set checked(e){this.checkbox.checked=e,this.applyStyles()}applyStyles(e){this.checkbox.checked?this.checkbox.setIcon(su.check):this.checkbox.setIcon(void 0),super.applyStyles(e)}},QU=class extends jU{constructor(e,t,i){let n;switch(t){case!0:n=su.check;break;case"mixed":n=su.dash;break;case!1:n=void 0}let s=new GU((0,r.A)({title:e,isChecked:!0===t,icon:n,actionClassName:YU.CLASS_NAME,hoverLifecycleOptions:i.hoverLifecycleOptions},qU));super(s,s.domNode,i),this._state=t,this._register(s),this._register(this.checkbox.onChange(e=>{this._state=this.checkbox.checked,this.applyStyles(),this._onChange.fire(e)}))}get checked(){return this._state}set checked(e){this._state!==e&&(this._state=e,this.checkbox.checked=!0===e,this.applyStyles())}applyStyles(e){switch(this._state){case!0:this.checkbox.setIcon(su.check);break;case"mixed":this.checkbox.setIcon(su.dash);break;case!1:this.checkbox.setIcon(void 0)}super.applyStyles(e)}},$U={},XU=class{constructor(e){this.nodes=e}toString(){return this.nodes.map(e=>"string"==typeof e?e:e.label).join("")}};XU.__decorator=ki([BL],XU.prototype,"toString",null);var ZU=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;wE($U);var JU={},eH=new AA("quick-input-button-icon-");function tH(e,t,i){let n=e.iconClass||function(e){if(!e)return;let t,i=e.dark.toString();return JU[i]?t=JU[i]:(t=eH.nextId(),lC(".".concat(t,", .hc-light .").concat(t),"background-image: ".concat(Gf(e.light||e.dark))),lC(".vs-dark .".concat(t,", .hc-black .").concat(t),"background-image: ".concat(Gf(e.dark))),JU[i]=t),t}(e.iconPath);return e.alwaysVisible&&(n=n?"".concat(n," always-visible"):"always-visible"),{id:t,label:"",tooltip:e.tooltip||"",class:n,enabled:!0,run:i}}function iH(e,t,i){Ab(t);let n=function(e){let t,i=[],n=0;for(;t=ZU.exec(e);){t.index-n>0&&i.push(e.substring(n,t.index));let[,s,r,,o]=t;o?i.push({label:s,href:r,title:o}):i.push({label:s,href:r}),n=t.index+t[0].length}return n<e.length&&i.push(e.substring(n)),new XU(i)}(e),s=0;for(let r of n.nodes)if("string"==typeof r)t.append(...qA(r));else{let e=r.title;!e&&r.href.startsWith("command:")?e=Li(2031,"Click to execute command '{0}'",r.href.substring(8)):e||(e=r.href);let n=Mb("a",{href:r.href,title:e,tabIndex:s++},r.label);n.style.textDecoration="underline";let o=e=>{Eb(e)&&Db(e,!0),i.callback(r.href)},a=i.disposables.add(new ML(n,kb.CLICK)).event,l=i.disposables.add(new ML(n,kb.KEY_DOWN)).event,h=_o.chain(l,e=>e.filter(e=>{let t=new C_(e);return t.equals(Kv.Space)||t.equals(Kv.Enter)}));i.disposables.add(LE.addTarget(n));let d=i.disposables.add(new ML(n,TE.Tap)).event;_o.any(a,d,h)(o,null,i.disposables),t.appendChild(n)}}var nH=fn("hoverService"),sH=class extends Co{get delay(){var e;return this.isInstantlyHovering()?0:null!==(e=this.hoverOptions)&&void 0!==e&&e.dynamicDelay?e=>{var t,i,n;return null!==(t=null===(i=this.hoverOptions)||void 0===i||null===(n=i.dynamicDelay)||void 0===n?void 0:n.call(i,e))&&void 0!==t?t:this._delay}:this._delay}constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;super(),this.placement=e,this.hoverOptions=t,this.overrideOptions=i,this.configurationService=n,this.hoverService=s,this.lastHoverHideTime=0,this.timeLimit=200,this.hoverDisposables=this._register(new bo),this._delay=this.configurationService.getValue("workbench.hover.delay"),this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration("workbench.hover.delay")&&(this._delay=this.configurationService.getValue("workbench.hover.delay"))}))}showHover(e,t){let i="function"==typeof this.overrideOptions?this.overrideOptions(e,t):this.overrideOptions;this.hoverDisposables.clear();let n=bb(e.target)?[e.target]:e.target.targetElements;for(let r of n)this.hoverDisposables.add(z_(r,"keydown",e=>{e.equals(Kv.Escape)&&this.hoverService.hideHover()}));let s=bb(e.content)?void 0:"string"==typeof e.content?e.content.toString():e.content.value;return this.hoverService.showInstantHover((0,r.A)((0,r.A)((0,r.A)({},e),i),{},{persistence:(0,r.A)({hideOnKeyDown:!0},i.persistence),id:s,appearance:(0,r.A)((0,r.A)({},e.appearance),{},{compact:!0,skipFadeInAnimation:this.isInstantlyHovering()},i.appearance)}),t)}isInstantlyHovering(){var e;return!(null===(e=this.hoverOptions)||void 0===e||!e.instantHover)&&Date.now()-this.lastHoverHideTime<this.timeLimit}setInstantHoverTimeLimit(e){var t;if(null===(t=this.hoverOptions)||void 0===t||!t.instantHover)throw Error("Instant hover is not enabled");this.timeLimit=e}onDidHideHover(){var e;this.hoverDisposables.clear(),(null===(e=this.hoverOptions)||void 0===e?void 0:e.instantHover)&&(this.lastHoverHideTime=Date.now())}};sH=ki([Ei(3,fr),Ei(4,nH)],sH),wE($U);var rH="inQuickInput",oH=new jk(rH,!1,Li(2008,"Whether keyboard focus is inside the quick input control")),aH=Dk.has(rH),lH=new jk("quickInputAlignment","top",Li(2009,"The alignment of the quick input")),hH="quickInputType",dH=new jk(hH,void 0,Li(2010,"The type of the currently visible quick input")),cH="cursorAtEndOfQuickInputBox",uH=new jk(cH,!1,Li(2011,"Whether the cursor in the quick input is at the end of the input box")),gH=Dk.has(cH),pH={iconClass:yf.asClassName(su.quickInputBack),tooltip:Li(2012,"Back"),handle:-1},fH=(zt=class e extends Co{constructor(t){super(),this.ui=t,this._visible=av("visible",!1),this._widgetUpdated=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._leftButtons=[],this._rightButtons=[],this._inlineButtons=[],this.buttonsUpdated=!1,this._toggles=[],this.togglesUpdated=!1,this.noValidationMessage=e.noPromptMessage,this._severity=xC.Ignore,this.onDidTriggerButtonEmitter=this._register(new Ro),this.onDidHideEmitter=this._register(new Ro),this.onWillHideEmitter=this._register(new Ro),this.onDisposeEmitter=this._register(new Ro),this.visibleDisposables=this._register(new bo),this.onDidTriggerButton=this.onDidTriggerButtonEmitter.event,this.onDidHide=this.onDidHideEmitter.event,this.onWillHide=this.onWillHideEmitter.event,this.onDispose=this.onDisposeEmitter.event}get visible(){return this._visible.get()}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get widget(){return this._widget}set widget(e){bb(e)&&this._widget!==e&&(this._widget=e,this._widgetUpdated=!0,this.update())}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){let t=this._ignoreFocusOut!==e&&!$n;this._ignoreFocusOut=e&&!$n,t&&this.update()}get titleButtons(){return this._leftButtons.length?[...this._leftButtons,this._rightButtons]:this._rightButtons}get buttons(){return[...this._leftButtons,...this._rightButtons,...this._inlineButtons]}set buttons(e){this._leftButtons=e.filter(e=>e===pH),this._rightButtons=e.filter(e=>e!==pH&&e.location!==VU.Inline),this._inlineButtons=e.filter(e=>e.location===VU.Inline),this.buttonsUpdated=!0,this.update()}get toggles(){return this._toggles}set toggles(e){this._toggles=null!==e&&void 0!==e?e:[],this.togglesUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{-1!==this.buttons.indexOf(e)&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this._visible.set(!0,void 0),this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.toggles.length&&(this.togglesUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:BU.Other;this._visible.set(!1,void 0),this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}willHide(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:BU.Other;this.onWillHideEmitter.fire({reason:e})}update(){if(!this.visible)return;let e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&"&nbsp;"!==this.ui.title.innerHTML&&(this.ui.title.innerText="\xa0");let t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this._widgetUpdated&&(this._widgetUpdated=!1,this._widget?Ab(this.ui.widget,this._widget):Ab(this.ui.widget)),this.busy&&!this.busyDelay&&(this.busyDelay=new Fl,this.busyDelay.setIfNotSet(()=>{this.visible&&(this.ui.progressBar.infinite(),this.ui.progressBar.getContainer().removeAttribute("aria-hidden"))},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.ui.progressBar.getContainer().setAttribute("aria-hidden","true"),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();let e=this._leftButtons.map((e,t)=>tH(e,"id-".concat(t),async()=>this.onDidTriggerButtonEmitter.fire(e)));this.ui.leftActionBar.push(e,{icon:!0,label:!1}),this.ui.rightActionBar.clear();let t=this._rightButtons.map((e,t)=>tH(e,"id-".concat(t),async()=>this.onDidTriggerButtonEmitter.fire(e)));this.ui.rightActionBar.push(t,{icon:!0,label:!1}),this.ui.inlineActionBar.clear();let i=this._inlineButtons.map((e,t)=>tH(e,"id-".concat(t),async()=>this.onDidTriggerButtonEmitter.fire(e)));this.ui.inlineActionBar.push(i,{icon:!0,label:!1})}if(this.togglesUpdated){var i,n;this.togglesUpdated=!1;let e=null!==(i=null===(n=this.toggles)||void 0===n?void 0:n.filter(e=>e instanceof GU))&&void 0!==i?i:[];this.ui.inputBox.toggles=e;let t=22*e.length;this.ui.countContainer.style.right=t>0?"".concat(4+t,"px"):"4px"}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);let s=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==s&&(this._lastValidationMessage=s,Ab(this.ui.message),s&&iH(s,this.ui.message,{callback:e=>{this.ui.linkOpenerDelegate(e)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?"".concat(this.title," (").concat(this.getSteps(),")"):this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?Li(2014,"{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==xC.Ignore){let t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?"".concat(t.foreground):"",this.ui.message.style.backgroundColor=t.background?"".concat(t.background):"",this.ui.message.style.border=t.border?"1px solid ".concat(t.border):"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}},{_:zt.noPromptMessage=Li(2013,"Press 'Enter' to confirm your input or 'Escape' to cancel")},zt),mH=(Kt=class e extends fH{constructor(e){super(e),this._value="",this.onDidChangeValueEmitter=this._register(new Ro),this.onWillAcceptEmitter=this._register(new Ro),this.onDidAcceptEmitter=this._register(new Ro),this.onDidCustomEmitter=this._register(new Ro),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._keepScrollPosition=!1,this._itemActivation=HU.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new Ro),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new Ro),this.onDidTriggerItemButtonEmitter=this._register(new Ro),this.onDidTriggerSeparatorButtonEmitter=this._register(new Ro),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this._focusEventBufferer=new Ho,this.type=UU.QuickPick,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidCustom=this.onDidCustomEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event,this.onDidTriggerSeparatorButton=this.onDidTriggerSeparatorButtonEmitter.event,this.noValidationMessage=void 0}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,t){this._value!==e&&(this._value=e,t||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get prompt(){return this.noValidationMessage}set prompt(e){this.noValidationMessage=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?zU:this.ui.keyMods}get valueSelection(){let e=this.ui.inputBox.getSelection();if(e)return[e.start,e.end]}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get okLabel(){var e;return null!==(e=this._okLabel)&&void 0!==e?e:Li(2016,"OK")}set okLabel(e){this._okLabel=e,this.update()}inputHasFocus(){return!!this.visible&&this.ui.inputBox.hasFocus()}focusOnInput(){this.ui.inputBox.setFocus()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}get hideCountBadge(){return!!this._hideCountBadge}set hideCountBadge(e){this._hideCountBadge=e,this.update()}get hideCheckAll(){return!!this._hideCheckAll}set hideCheckAll(e){this._hideCheckAll=e,this.update()}trySelectFirst(){this.canSelectMany||this.ui.list.focus(WU.First)}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{this.doSetValue(e,!0)})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this._focusEventBufferer.wrapEvent(this.ui.list.onDidChangeFocus,(e,t)=>t)(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&Mr(e,this._activeItems,(e,t)=>e===t)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(e=>{let{items:t,event:i}=e;!this.canSelectMany||t.some(e=>!1===e.pickable)?this.selectedItemsToConfirm!==this._selectedItems&&Mr(t,this._selectedItems,(e,t)=>e===t)||(this._selectedItems=t,this.onDidChangeSelectionEmitter.fire(t),t.length&&this.handleAccept(wb(i)&&1===i.button)):t.length&&this.ui.list.setSelectedElements([])})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{!this.canSelectMany||!this.visible||this.selectedItemsToConfirm!==this._selectedItems&&Mr(e,this._selectedItems,(e,t)=>e===t)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered(e=>this.onDidTriggerSeparatorButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return W_(this.ui.container,kb.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;let t=new C_(e),i=t.keyCode;this._quickNavigate.keybindings.some(e=>{let n=e.getChords();return!(n.length>1)&&(n[0].shiftKey&&i===Kv.Shift?!(t.ctrlKey||t.altKey||t.metaKey):!!(n[0].altKey&&i===Kv.Alt||n[0].ctrlKey&&i===Kv.Ctrl||n[0].metaKey&&i===Kv.Meta))})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;let t=this.keepScrollPosition?this.scrollTop:0,i=!!this.description,n={title:!!this.title||!!this.step||!!this.titleButtons.length,description:i,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||i,visibleCount:!0,count:this.canSelectMany&&!this._hideCountBadge,ok:"default"===this.ok?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage||!!this.prompt,customButton:this.customButton};this.ui.setVisibilities(n),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let s=this.ariaLabel;!s&&n.inputBox&&(s=this.placeholder,this.title&&(s=s?"".concat(s," - ").concat(this.title):this.title),s||(s=e.DEFAULT_ARIA_LABEL)),this.ui.list.ariaLabel!==s&&(this.ui.list.ariaLabel=null!==s&&void 0!==s?s:null),this.ui.inputBox.ariaLabel!==s&&(this.ui.inputBox.ariaLabel=null!==s&&void 0!==s?s:"input"),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated&&(this.itemsUpdated=!1,this._focusEventBufferer.bufferEvents(()=>{switch(this.ui.list.setElements(this.items),this.ui.list.shouldLoop=!this.canSelectMany,this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this._itemActivation){case HU.NONE:this._itemActivation=HU.FIRST;break;case HU.SECOND:this.ui.list.focus(WU.Second),this._itemActivation=HU.FIRST;break;case HU.LAST:this.ui.list.focus(WU.Last),this._itemActivation=HU.FIRST;break;default:this.trySelectFirst()}})),this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.ok.label=this.okLabel||"",this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",n.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(WU.First)),this.keepScrollPosition&&(this.scrollTop=t)}focus(e){this.ui.list.focus(e),this.canSelectMany&&this.ui.list.domFocus()}accept(e){e&&!this._canAcceptInBackground||(this.activeItems[0]&&!this._canSelectMany&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(null!==e&&void 0!==e&&e))}},{_:Kt.DEFAULT_ARIA_LABEL=Li(2015,"Type to narrow down results.")},Kt),vH=class extends fH{constructor(){super(...arguments),this._value="",this.valueSelectionUpdated=!0,this._password=!1,this.onDidValueChangeEmitter=this._register(new Ro),this.onDidAcceptEmitter=this._register(new Ro),this.type=UU.InputBox,this.onDidChangeValue=this.onDidValueChangeEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event}get value(){return this._value}set value(e){this._value=e||"",this.update()}get valueSelection(){let e=this.ui.inputBox.getSelection();if(e)return[e.start,e.end]}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.update()}get password(){return this._password}set password(e){this._password=e,this.update()}get prompt(){return this._prompt}set prompt(e){this._prompt=e,this.noValidationMessage=e?Li(2017,"{0} (Press 'Enter' to confirm or 'Escape' to cancel)",e):fH.noPromptMessage,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{e!==this.value&&(this._value=e,this.onDidValueChangeEmitter.fire(e))})),this.visibleDisposables.add(this.ui.onDidAccept(()=>this.onDidAcceptEmitter.fire())),this.valueSelectionUpdated=!0),super.show()}accept(){this.onDidAcceptEmitter.fire()}update(){if(!this.visible)return;this.ui.container.classList.remove("hidden-input");let e={title:!!this.title||!!this.step||!!this.titleButtons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0,progressBar:!0};this.ui.setVisibilities(e),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||""),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password);let t=this.ariaLabel;!t&&e.inputBox&&(t=this.placeholder?this.title?"".concat(this.placeholder," - ").concat(this.title):this.placeholder:this.title?this.title:"input"),this.ui.inputBox.ariaLabel!==t&&(this.ui.inputBox.ariaLabel=t||"input")}},_H=class extends fH{constructor(){super(...arguments),this.type=UU.QuickWidget}update(){if(!this.visible)return;let e={title:!!this.title||!!this.step||!!this.titleButtons.length,description:!!this.description||!!this.step};this.ui.setVisibilities(e),super.update()}},bH=class extends sH{constructor(e,t){super("mouse",void 0,e=>this.getOverrideOptions(e),e,t)}getOverrideOptions(e){var t;return{persistence:{hideOnKeyDown:!1},appearance:{showHoverHint:(bb(e.content)?null!==(t=e.content.textContent)&&void 0!==t?t:"":"string"==typeof e.content?e.content:e.content.value).includes("\n"),skipFadeInAnimation:!0}}}};bH=ki([Ei(0,fr),Ei(1,nH)],bH),wE({}),Ir.white.toString(),Ir.white.toString();var CH,yH=Object.freeze({allowedTags:{override:["b","i","u","code","span"]},allowedAttributes:{override:["class"]}}),wH=class extends Co{get onDidClick(){return this._onDidClick.event}get onDidEscape(){return this._onDidEscape.event}constructor(e,t){super(),this._label="",this._onDidClick=this._register(new Ro),this._onDidEscape=this._register(new Ro),this.options=t,this._element=mb("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!t.secondary);let i=t.secondary?t.buttonSecondaryBackground:t.buttonBackground,n=t.secondary?t.buttonSecondaryForeground:t.buttonForeground;this._element.style.color=n||"",this._element.style.backgroundColor=i||"",t.supportShortLabel&&(this._labelShortElement=mb("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=mb("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),"string"==typeof t.title&&this.setTitle(t.title),"string"==typeof t.ariaLabel&&this._element.setAttribute("aria-label",t.ariaLabel),e.appendChild(this._element),this.enabled=!t.disabled,this._register(LE.addTarget(this._element)),[kb.CLICK,TE.Tap].forEach(e=>{this._register(W_(this._element,e,e=>{this.enabled?this._onDidClick.fire(e):Db(e)}))}),this._register(W_(this._element,kb.KEY_DOWN,e=>{let t=new C_(e),i=!1;this.enabled&&(t.equals(Kv.Enter)||t.equals(Kv.Space))?(this._onDidClick.fire(e),i=!0):t.equals(Kv.Escape)&&(this._onDidEscape.fire(e),this._element.blur(),i=!0),i&&Db(t,!0)})),this._register(W_(this._element,kb.MOUSE_OVER,e=>{this._element.classList.contains("disabled")||this.updateBackground(!0)})),this._register(W_(this._element,kb.MOUSE_OUT,e=>{this.updateBackground(!1)})),this.focusTracker=this._register(Ib(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.updateBackground(!0)})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.updateBackground(!1)}))}dispose(){super.dispose(),this._element.remove()}getContentElements(e){let t=[];for(let i of qA(e))if("string"==typeof i){if(i=i.trim(),""===i)continue;let e=mb("span");e.textContent=i,t.push(e)}else t.push(i);return t}updateBackground(e){let t;t=this.options.secondary?e?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:e?this.options.buttonHoverBackground:this.options.buttonBackground,t&&(this._element.style.backgroundColor=t)}get element(){return this._element}set label(e){if(this._label===e||$y(this._label)&&$y(e)&&function(e,t){return e===t||!(!e||!t)&&e.value===t.value&&e.isTrusted===t.isTrusted&&e.supportThemeIcons===t.supportThemeIcons&&e.supportHtml===t.supportHtml&&e.supportAlertSyntax===t.supportAlertSyntax&&(e.baseUri===t.baseUri||!!e.baseUri&&!!t.baseUri&&nl(Gs.from(e.baseUri),Gs.from(t.baseUri)))}(this._label,e))return;this._element.classList.add("monaco-text-button");let t=this.options.supportShortLabel?this._labelElement:this._element;if($y(e)){var i;let n=YA(e,void 0,mb("span"));n.dispose();let s=null===(i=n.element.querySelector("p"))||void 0===i?void 0:i.innerHTML;s?zA(t,s,yH):Ab(t)}else this.options.supportIcons?Ab(t,...this.getContentElements(e)):t.textContent=e;let n="";"string"==typeof this.options.title?n=this.options.title:this.options.title&&(n=sN(e)),this.setTitle(n),this._setAriaLabel(),this._label=e}get label(){return this._label}set labelShort(e){!this.options.supportShortLabel||!this._labelShortElement||(this.options.supportIcons?Ab(this._labelShortElement,...this.getContentElements(e)):this._labelShortElement.textContent=e)}_setAriaLabel(){"string"==typeof this.options.ariaLabel?this._element.setAttribute("aria-label",this.options.ariaLabel):"string"==typeof this.options.title&&this._element.setAttribute("aria-label",this.options.title)}set icon(e){this._setAriaLabel();let t=Array.from(this._element.classList).filter(e=>e.startsWith("codicon-"));this._element.classList.remove(...t),this._element.classList.add(...yf.asClassNameArray(e))}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled","false"),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled","true"))}get enabled(){return!this._element.classList.contains("disabled")}set checked(e){e?(this._element.classList.add("checked"),this._element.setAttribute("aria-checked","true")):(this._element.classList.remove("checked"),this._element.setAttribute("aria-checked","false"))}get checked(){return this._element.classList.contains("checked")}setTitle(e){var t;this._hover||""===e?this._hover&&this._hover.update(e):this._hover=this._register(EN().setupManagedHover(null!==(t=this.options.hoverDelegate)&&void 0!==t?t:RL("element"),this._element,e))}focus(){this._element.focus()}hasFocus(){return cb(this._element)}};(function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical"})(CH||(CH={})),wE({});var SH=class extends Co{constructor(e,t,i){super(),this.options=t,this.styles=i,this.count=0,this.hover=this._register(new yo),this.element=xb(e,Mb(".monaco-count-badge")),this._register(vo(()=>e.removeChild(this.element))),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0),this.updateHover()}setCount(e){this.count=e,this.render()}setCountFormat(e){this.countFormat=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.updateHover(),this.render()}updateHover(){""===this.titleFormat||this.hover.value?""===this.titleFormat&&this.hover.value&&(this.hover.value=void 0):this.hover.value=EN().setupDelayedHoverAtMouse(this.element,()=>({content:ia(this.titleFormat,this.count),appearance:{compact:!0}}))}render(){var e,t;this.element.textContent=ia(this.countFormat,this.count),this.element.style.backgroundColor=null!==(e=this.styles.badgeBackground)&&void 0!==e?e:"",this.element.style.color=null!==(t=this.styles.badgeForeground)&&void 0!==t?t:"",this.styles.badgeBorder&&(this.element.style.border="1px solid ".concat(this.styles.badgeBorder))}};wE({});var kH="done",EH="active",DH="infinite",TH="infinite-long-running",IH="discrete",xH=(qt=class e extends Co{constructor(t,i){super(),this.progressSignal=this._register(new yo),this.workedVal=0,this.showDelayedScheduler=this._register(new Rl(()=>Pb(this.element),0)),this.longRunningScheduler=this._register(new Rl(()=>this.infiniteLongRunning(),e.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(t,i)}create(e,t){this.element=mb("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=mb("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=(null===t||void 0===t?void 0:t.progressBarBackground)||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(EH,DH,TH,IH),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel(),this.progressSignal.clear()}done(){return this.doDone(!0)}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(kH),this.element.classList.contains(DH)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(IH,kH,TH),this.element.classList.add(EH,DH),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(TH)}total(e){return this.workedVal=0,this.totalWork=e,this.element.setAttribute("aria-valuemax",e.toString()),this}hasTotal(){return Ji(this.totalWork)}worked(e){return e=Math.max(1,Number(e)),this.doSetWorked(this.workedVal+e)}setWorked(e){return e=Math.max(1,Number(e)),this.doSetWorked(e)}doSetWorked(e){let t=this.totalWork||100;return this.workedVal=e,this.workedVal=Math.min(t,this.workedVal),this.element.classList.remove(DH,TH,kH),this.element.classList.add(EH,IH),this.element.setAttribute("aria-valuenow",e.toString()),this.bit.style.width=this.workedVal/t*100+"%",this}getContainer(){return this.element}show(t){this.showDelayedScheduler.cancel(),this.progressSignal.value=(e.PROGRESS_SIGNAL_DEFAULT_DELAY,{msLoopTime:-1,msDelayTime:-1,dispose:()=>{}}),"number"==typeof t?this.showDelayedScheduler.schedule(t):Pb(this.element)}hide(){Bb(this.element),this.showDelayedScheduler.cancel(),this.progressSignal.clear()}},{_:qt.LONG_RUNNING_INFINITE_THRESHOLD=1e4},{_:qt.PROGRESS_SIGNAL_DEFAULT_DELAY=3e3},qt),LH=Li(11,"Match Case"),AH=Li(12,"Match Whole Word"),NH=Li(13,"Use Regular Expression"),FH=class extends GU{constructor(e){super({icon:su.caseSensitive,title:LH+e.appendTitle,isChecked:e.isChecked,hoverLifecycleOptions:e.hoverLifecycleOptions,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}},OH=class extends GU{constructor(e){super({icon:su.wholeWord,title:AH+e.appendTitle,isChecked:e.isChecked,hoverLifecycleOptions:e.hoverLifecycleOptions,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}},RH=class extends GU{constructor(e){super({icon:su.regex,title:NH+e.appendTitle,isChecked:e.isChecked,hoverLifecycleOptions:e.hoverLifecycleOptions,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}};function MH(e,t,i){let n=null!==i&&void 0!==i?i:mb("div");return n.textContent="",UH(n,function(e,t){let i={type:PH.Root,children:[]},n=0,s=i,r=[],o=new BH(e);for(;!o.eos();){let e=o.next(),i="\\"===e&&WH(o.peek(),t)!==PH.Invalid;if(i&&(e=o.next()),!i&&HH(e,t)&&e===o.peek()){o.advance(),s.type===PH.Text&&(s=r.pop());let i=WH(e,t);if(s.type===i||s.type===PH.Action&&i===PH.ActionClose)s=r.pop();else{let e={type:i,children:[]};i===PH.Action&&(e.index=n,n++),s.children.push(e),r.push(s),s=e}}else if("\n"===e)s.type===PH.Text&&(s=r.pop()),s.children.push({type:PH.NewLine});else if(s.type!==PH.Text){let t={type:PH.Text,content:e};s.children.push(t),r.push(s),s=t}else s.content+=e}return s.type===PH.Text&&(s=r.pop()),i}(e,!(null===t||void 0===t||!t.renderCodeSegments)),null===t||void 0===t?void 0:t.actionHandler,null===t||void 0===t?void 0:t.renderCodeSegments),n}var PH,BH=class{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){let e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}};function UH(e,t,i,n){let s;if(t.type===PH.Text)s=function(e){return Lv.document.createTextNode(e)}(t.content||"");else if(t.type===PH.Bold)s=mb("b");else if(t.type===PH.Italics)s=mb("i");else if(t.type===PH.Code&&n)s=mb("code");else if(t.type===PH.Action&&i){let e=mb("a");i.disposables.add(z_(e,"click",e=>{i.callback(String(t.index),e)})),s=e}else t.type===PH.NewLine?s=mb("br"):t.type===PH.Root&&(s=e);s&&e!==s&&e.appendChild(s),s&&Array.isArray(t.children)&&t.children.forEach(e=>{UH(s,e,i,n)})}function HH(e,t){return WH(e,t)!==PH.Invalid}function WH(e,t){switch(e){case"*":return PH.Bold;case"_":return PH.Italics;case"[":return PH.Action;case"]":return PH.ActionClose;case"`":return t?PH.Code:PH.Invalid;default:return PH.Invalid}}!function(e){e[e.Invalid=0]="Invalid",e[e.Root=1]="Root",e[e.Text=2]="Text",e[e.Bold=3]="Bold",e[e.Italics=4]="Italics",e[e.Action=5]="Action",e[e.ActionClose=6]="ActionClose",e[e.Code=7]="Code",e[e.NewLine=8]="NewLine"}(PH||(PH={}));var VH=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t-1;this.items=e,this.start=t,this.end=i,this.index=n}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}},zH=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;this._history=e,this._limit=t,this._onChange(),this._history.onDidChange&&(this._disposable=this._history.onDidChange(()=>this._onChange()))}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._navigator.next()}previous(){return 0===this._currentPosition()?null:this._navigator.previous()}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isFirst(){return 0===this._currentPosition()}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return null===this._navigator.current()}has(e){return this._history.has(e)}clear(){this._history.clear(),this._onChange()}_onChange(){this._reduceToLimit();let e=this._elements;this._navigator=new VH(e,0,e.length,e.length)}_reduceToLimit(){let e=this._elements;if(e.length>this._limit){let t=e.slice(e.length-this._limit);this._history.replace?this._history.replace(t):this._history=new Set(t)}}_currentPosition(){let e=this._navigator.current();return e?this._elements.indexOf(e):-1}get _elements(){let e=[];return this._history.forEach(t=>e.push(t)),e}dispose(){this._disposable&&(this._disposable=void this._disposable.dispose())}};wE({});var KH,qH=Mb;!function(e){e[e.INFO=1]="INFO",e[e.WARNING=2]="WARNING",e[e.ERROR=3]="ERROR"}(KH||(KH={}));var GH=class extends AE{get onDidChange(){return this._onDidChange.event}get onDidHeightChange(){return this._onDidHeightChange.event}constructor(e,t,i){var n;super(),this.state="idle",this.maxHeight=1/0,this.hover=this._register(new yo),this._onDidChange=this._register(new Ro),this._onDidHeightChange=this._register(new Ro),this.contextViewProvider=t,this.options=i,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=null!==(n=this.options.tooltip)&&void 0!==n?n:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=xb(e,qH(".monaco-inputbox.idle"));let s=this.options.flexibleHeight?"textarea":"input",r=xb(this.element,qH(".ibwrapper"));if(this.input=xb(r,qH(s+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight="number"==typeof this.options.flexibleMaxHeight?this.options.flexibleMaxHeight:1/0,this.mirror=xb(r,qH("div.mirror")),this.mirror.innerText="\xa0",this.scrollableElement=new GE(this.element,{vertical:xE.Auto}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),xb(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(e=>this.input.scrollTop=e.scrollTop));let t=this._register(new ML(e.ownerDocument,"selectionchange")),i=_o.filter(t.event,()=>{var t;return(null===(t=e.getRootNode().getSelection())||void 0===t?void 0:t.anchorNode)===r});this._register(i(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this._register(this.ignoreGesture(this.input)),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new mF(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.hover.value||(this.hover.value=this._register(EN().setupDelayedHoverAtMouse(this.input,()=>({content:this.tooltip,appearance:{compact:!0}}))))}setAriaLabel(e){this.ariaLabel=e,e?this.input.setAttribute("aria-label",this.ariaLabel):this.input.removeAttribute("aria-label")}getAriaLabel(){return this.ariaLabel}get mirrorElement(){return this.mirror}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get step(){return this.input.step}set step(e){this.input.step=e}get height(){return"number"==typeof this.cachedHeight?this.cachedHeight:nb(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return cb(this.input)}select(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}getSelection(){var e;let t=this.input.selectionStart;return null===t?null:{start:t,end:null!==(e=this.input.selectionEnd)&&void 0!==e?e:t}}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}setEnabled(e){e?this.enable():this.disable()}get width(){return eb(this.input)}set width(e){if(this.options.flexibleHeight&&this.options.flexibleWidth){let t=0;this.mirror&&(t=(parseFloat(this.mirror.style.paddingLeft||"")||0)+(parseFloat(this.mirror.style.paddingRight||"")||0)),this.input.style.width=e-t+"px"}else this.input.style.width=e+"px";this.mirror&&(this.mirror.style.width=e+"px")}set paddingRight(e){this.input.style.width="calc(100% - ".concat(e,"px)"),this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if("number"!=typeof this.cachedContentHeight||"number"!=typeof this.cachedHeight||!this.scrollableElement)return;let e=this.cachedContentHeight,t=this.cachedHeight,i=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:i})}showMessage(e,t){if("open"===this.state&&dS(this.message,e))return;this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));let i=this.stylesForType(this.message.type);this.element.style.border="1px solid ".concat(Wf(i.border,"transparent")),this.message.content&&(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}isInputValid(){return!!this.validation&&!this.validation(this.value)}validate(){var e;let t=null;return this.validation&&(t=this.validation(this.value),t?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(t)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),null===(e=t)||void 0===e?void 0:e.type}stylesForType(e){let t=this.options.inputBoxStyles;switch(e){case KH.INFO:return{border:t.inputValidationInfoBorder,background:t.inputValidationInfoBackground,foreground:t.inputValidationInfoForeground};case KH.WARNING:return{border:t.inputValidationWarningBorder,background:t.inputValidationWarningBackground,foreground:t.inputValidationWarningForeground};default:return{border:t.inputValidationErrorBorder,background:t.inputValidationErrorBackground,foreground:t.inputValidationErrorForeground}}}classForType(e){switch(e){case KH.INFO:return"info";case KH.WARNING:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e,t,i=()=>e.style.width=eb(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:tD.RIGHT,render:t=>{var n,s;if(!this.message)return null;e=xb(t,qH(".monaco-inputbox-container")),i();let r=qH("span.monaco-inputbox-message");this.message.formatContent?MH(this.message.content,void 0,r):function(e,t,i){let n=null!==i&&void 0!==i?i:mb("div");n.textContent=e}(this.message.content,0,r),r.classList.add(this.classForType(this.message.type));let o=this.stylesForType(this.message.type);return r.style.backgroundColor=null!==(n=o.background)&&void 0!==n?n:"",r.style.color=null!==(s=o.foreground)&&void 0!==s?s:"",r.style.border=o.border?"1px solid ".concat(o.border):"",xb(e,r),null},onHide:()=>{this.state="closed"},layout:i}),t=this.message.type===KH.ERROR?Li(20,"Error: {0}",this.message.content):this.message.type===KH.WARNING?Li(21,"Warning: {0}",this.message.content):Li(22,"Info: {0}",this.message.content),this.state="open"}_hideMessage(){this.contextViewProvider&&("open"===this.state&&this.contextViewProvider.hideContextView(),this.state="idle")}layoutMessage(){"open"===this.state&&this.contextViewProvider&&this.contextViewProvider.layout()}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),"open"===this.state&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;let e=this.value,t=10===e.charCodeAt(e.length-1)?" ":"";(e+t).replace(/\u000c/g,"")?this.mirror.textContent=e+t:this.mirror.innerText="\xa0",this.layout()}applyStyles(){var e,t,i;let n=this.options.inputBoxStyles,s=null!==(e=n.inputBackground)&&void 0!==e?e:"",r=null!==(t=n.inputForeground)&&void 0!==t?t:"",o=null!==(i=n.inputBorder)&&void 0!==i?i:"";this.element.style.backgroundColor=s,this.element.style.color=r,this.input.style.backgroundColor="inherit",this.input.style.color=r,this.element.style.border="1px solid ".concat(Wf(o,"transparent"))}layout(){if(!this.mirror)return void this.layoutMessage();let e=this.cachedContentHeight;this.cachedContentHeight=nb(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight)),this.layoutMessage()}insertAtCursor(e){let t=this.inputElement,i=t.selectionStart,n=t.selectionEnd,s=t.value;null!==i&&null!==n&&(this.value=s.substr(0,i)+e+s.substr(n),t.setSelectionRange(i+1,i+1),this.layout())}dispose(){var e;this._hideMessage(),this.message=null,null!==(e=this.actionbar)&&void 0!==e&&e.dispose(),super.dispose()}},jH=class extends GH{constructor(e,t,i){let n=Li(23," or {0} for history","\u21c5"),s=Li(24," ({0} for history)","\u21c5");super(e,t,i),this._onDidFocus=this._register(new Ro),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new Ro),this.onDidBlur=this._onDidBlur.event,this.history=this._register(new zH(i.history,100));let r=()=>{if(i.showHistoryHint&&i.showHistoryHint()&&!this.placeholder.endsWith(n)&&!this.placeholder.endsWith(s)&&this.history.getHistory().length){let e=this.placeholder.endsWith(")")?n:s,t=this.placeholder+e;i.showPlaceholderOnFocus&&!cb(this.input)?this.placeholder=t:this.setPlaceHolder(t)}};this.observer=new MutationObserver((e,t)=>{e.forEach(e=>{e.target.textContent||r()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>r()),this.onblur(this.input,()=>{let e=e=>{if(this.placeholder.endsWith(e)){let t=this.placeholder.slice(0,this.placeholder.length-e.length);return i.showPlaceholderOnFocus?this.placeholder=t:this.setPlaceHolder(t),!0}return!1};e(s)||e(n)})}dispose(){super.dispose(),this.observer&&(this.observer=void this.observer.disconnect())}addToHistory(e){this.value&&(e||this.value!==this.getCurrentValue())&&this.history.add(this.value)}prependHistory(e){let t=this.getHistory();this.clearHistory(),e.forEach(e=>{this.history.add(e)}),t.forEach(e=>{this.history.add(e)})}getHistory(){return this.history.getHistory()}isAtFirstInHistory(){return this.history.isFirst()}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),this.value=null!==e&&void 0!==e?e:"",this.value?this.value:Li(25,"Cleared Input")}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,this.value)}clearHistory(){this.history.clear()}setPlaceHolder(e){super.setPlaceHolder(e),this.setTooltip(e)}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}};wE({});var YH=Li(10,"input"),QH=(Gt=class extends AE{get onDidOptionChange(){return this._onDidOptionChange.event}get onKeyDown(){return this._onKeyDown.event}get onMouseDown(){return this._onMouseDown.event}get onInput(){return this._onInput.event}get onKeyUp(){return this._onKeyUp.event}get onCaseSensitiveKeyDown(){return this._onCaseSensitiveKeyDown.event}get onRegexKeyDown(){return this._onRegexKeyDown.event}constructor(e,t,i){super(),this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalTogglesDisposables=this._register(new yo),this.additionalToggles=[],this._onDidOptionChange=this._register(new Ro),this._onKeyDown=this._register(new Ro),this._onMouseDown=this._register(new Ro),this._onInput=this._register(new Ro),this._onKeyUp=this._register(new Ro),this._onCaseSensitiveKeyDown=this._register(new Ro),this._onRegexKeyDown=this._register(new Ro),this._lastHighlightFindOptions=0,this.placeholder=i.placeholder||"",this.validation=i.validation,this.label=i.label||YH,this.showCommonFindToggles=!!i.showCommonFindToggles;let n=i.appendCaseSensitiveLabel||"",s=i.appendWholeWordsLabel||"",o=i.appendRegexLabel||"",a=!!i.flexibleHeight,l=!!i.flexibleWidth,h=i.flexibleMaxHeight;if(this.domNode=mb("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new jH(this.domNode,t,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},showHistoryHint:i.showHistoryHint,flexibleHeight:a,flexibleWidth:l,flexibleMaxHeight:h,inputBoxStyles:i.inputBoxStyles,history:i.history})),this.showCommonFindToggles){let e=(null===i||void 0===i?void 0:i.hoverLifecycleOptions)||{groupId:"find-input"};this.regex=this._register(new RH((0,r.A)({appendTitle:o,isChecked:!1,hoverLifecycleOptions:e},i.toggleStyles))),this._register(this.regex.onChange(e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(e=>{this._onRegexKeyDown.fire(e)})),this.wholeWords=this._register(new OH((0,r.A)({appendTitle:s,isChecked:!1,hoverLifecycleOptions:e},i.toggleStyles))),this._register(this.wholeWords.onChange(e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new FH((0,r.A)({appendTitle:n,isChecked:!1,hoverLifecycleOptions:e},i.toggleStyles))),this._register(this.caseSensitive.onChange(e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(e=>{this._onCaseSensitiveKeyDown.fire(e)}));let t=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,e=>{if(e.equals(Kv.LeftArrow)||e.equals(Kv.RightArrow)||e.equals(Kv.Escape)){let i=t.indexOf(hb(this.domNode.ownerDocument));if(i>=0){let n=-1;e.equals(Kv.RightArrow)?n=(i+1)%t.length:e.equals(Kv.LeftArrow)&&(n=0===i?t.length-1:i-1),e.equals(Kv.Escape)?(t[i].blur(),this.inputBox.focus()):n>=0&&t[n].focus(),Db(e,!0)}}})}this.controls=mb("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(null===i||void 0===i?void 0:i.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),null!==e&&void 0!==e&&e.appendChild(this.domNode),this._register(W_(this.inputBox.inputElement,"compositionstart",e=>{this.imeSessionInProgress=!0})),this._register(W_(this.inputBox.inputElement,"compositionend",e=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,e=>this._onKeyDown.fire(e)),this.onkeyup(this.inputBox.inputElement,e=>this._onKeyUp.fire(e)),this.oninput(this.inputBox.inputElement,e=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,e=>this._onMouseDown.fire(e))}get isImeSessionInProgress(){return this.imeSessionInProgress}get onDidChange(){return this.inputBox.onDidChange}layout(e){this.inputBox.layout(),this.updateInputBoxPadding(e.collapsedFindWidget)}enable(){var e,t,i;this.domNode.classList.remove("disabled"),this.inputBox.enable(),null!==(e=this.regex)&&void 0!==e&&e.enable(),null!==(t=this.wholeWords)&&void 0!==t&&t.enable(),null===(i=this.caseSensitive)||void 0===i||i.enable();for(let n of this.additionalToggles)n.enable()}disable(){var e,t,i;this.domNode.classList.add("disabled"),this.inputBox.disable(),null!==(e=this.regex)&&void 0!==e&&e.disable(),null!==(t=this.wholeWords)&&void 0!==t&&t.disable(),null===(i=this.caseSensitive)||void 0===i||i.disable();for(let n of this.additionalToggles)n.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}setAdditionalToggles(e){for(let t of this.additionalToggles)t.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.value=new bo;for(let t of null!==e&&void 0!==e?e:[])this.additionalTogglesDisposables.value.add(t),this.controls.appendChild(t.domNode),this.additionalTogglesDisposables.value.add(t.onChange(e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(t);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(){var e,t,i,n,s,r;let o=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.inputBox.paddingRight=o?0:(null!==(e=null===(t=this.caseSensitive)||void 0===t?void 0:t.width())&&void 0!==e?e:0)+(null!==(i=null===(n=this.wholeWords)||void 0===n?void 0:n.width())&&void 0!==i?i:0)+(null!==(s=null===(r=this.regex)||void 0===r?void 0:r.width())&&void 0!==s?s:0)+this.additionalToggles.reduce((e,t)=>e+t.width(),0)}clear(){this.clearValidation(),this.setValue(""),this.focus()}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}onSearchSubmit(){this.inputBox.addToHistory()}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){var e,t;return null!==(e=null===(t=this.caseSensitive)||void 0===t?void 0:t.checked)&&void 0!==e&&e}setCaseSensitive(e){this.caseSensitive&&(this.caseSensitive.checked=e)}getWholeWords(){var e,t;return null!==(e=null===(t=this.wholeWords)||void 0===t?void 0:t.checked)&&void 0!==e&&e}setWholeWords(e){this.wholeWords&&(this.wholeWords.checked=e)}getRegex(){var e,t;return null!==(e=null===(t=this.regex)||void 0===t?void 0:t.checked)&&void 0!==e&&e}setRegex(e){this.regex&&(this.regex.checked=e,this.validate())}focusOnCaseSensitive(){var e;null===(e=this.caseSensitive)||void 0===e||e.focus()}focusOnRegex(){var e;null===(e=this.regex)||void 0===e||e.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}clearValidation(){this.inputBox.hideMessage()}},{_:Gt.OPTION_CHANGE="optionChange"},Gt);wE($U);var $H=Mb,XH=class extends Co{constructor(e,t,i){super(),this.parent=e,this.onDidChange=e=>this.findInput.onDidChange(e),this.container=xb(this.parent,$H(".quick-input-box")),this.findInput=this._register(new QH(this.container,void 0,{label:"",inputBoxStyles:t,toggleStyles:i}));let n=this.findInput.inputBox.inputElement;n.role="textbox",n.ariaHasPopup="menu",n.ariaAutoComplete="list"}get onKeyDown(){return this.findInput.onKeyDown}get onMouseDown(){return this.findInput.onMouseDown}get value(){return this.findInput.getValue()}set value(e){this.findInput.setValue(e)}select(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.findInput.inputBox.select(e)}getSelection(){return this.findInput.inputBox.getSelection()}isSelectionAtEnd(){return this.findInput.inputBox.isSelectionAtEnd()}setPlaceholder(e){this.findInput.inputBox.setPlaceHolder(e)}get placeholder(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.findInput.inputBox.setPlaceHolder(e)}get password(){return"password"===this.findInput.inputBox.inputElement.type}set password(e){this.findInput.inputBox.inputElement.type=e?"password":"text"}set enabled(e){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!e)}set toggles(e){this.findInput.setAdditionalToggles(e)}get ariaLabel(){return this.findInput.inputBox.inputElement.getAttribute("aria-label")||""}set ariaLabel(e){this.findInput.inputBox.inputElement.setAttribute("aria-label",e)}hasFocus(){return this.findInput.inputBox.hasFocus()}setAttribute(e,t){this.findInput.inputBox.inputElement.setAttribute(e,t)}removeAttribute(e){this.findInput.inputBox.inputElement.removeAttribute(e)}showDecoration(e){e===xC.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:e===xC.Info?KH.INFO:e===xC.Warning?KH.WARNING:KH.ERROR,content:""})}stylesForType(e){return this.findInput.inputBox.stylesForType(e===xC.Info?KH.INFO:e===xC.Warning?KH.WARNING:KH.ERROR)}setFocus(){this.findInput.focus()}layout(){this.findInput.inputBox.layout()}},ZH=class e extends Co{constructor(e,t){super(),this.options=t,this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.domNode=xb(e,Mb("span.monaco-highlighted-label"))}get element(){return this.domNode}set(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>4?arguments[4]:void 0;t||(t=""),(arguments.length>3?arguments[3]:void 0)&&(t=e.escapeNewLines(t,i)),(!this.didEverRender||this.text!==t||this.title!==n||!dS(this.highlights,i))&&(this.text=t,this.title=n,this.highlights=i,this.render(s))}render(e){let t=[],i=0;for(let r of this.highlights){if(r.end===r.start)continue;if(i<r.start){let n=this.text.substring(i,r.start);e?t.push(...qA(n)):t.push(n),i=r.start}let n=this.text.substring(i,r.end),s=Mb("span.highlight",void 0,...e?qA(n):[n]);r.extraClasses&&s.classList.add(...r.extraClasses),t.push(s),i=r.end}if(i<this.text.length){let n=this.text.substring(i);e?t.push(...qA(n)):t.push(n)}if(Ab(this.domNode,...t),this.customHover||""===this.title)this.customHover&&this.customHover.update(this.title);else{var n,s;let e=null!==(n=null===(s=this.options)||void 0===s?void 0:s.hoverDelegate)&&void 0!==n?n:RL("mouse");this.customHover=this._register(EN().setupManagedHover(e,this.domNode,this.title))}this.didEverRender=!0}static escapeNewLines(e,t){let i=0,n=0;return e.replace(/\r\n|\r|\n/g,(e,s)=>{n="\r\n"===e?-1:0,s+=i;for(let i of t)i.end<=s||(i.start>=s&&(i.start+=n),i.end>=s&&(i.end+=n));return i+=n,"\u23ce"})}};wE({});var JH=class{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set classNames(e){this.disposed||dS(e,this._classNames)||(this._classNames=e,this._element.classList.value="",this._element.classList.add(...e))}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}},eW=class extends Co{constructor(e,t){var i;super(),this.customHovers=new Map,this.creationOptions=t,this.domNode=this._register(new JH(xb(e,Mb(".monaco-icon-label")))),this.labelContainer=xb(this.domNode.element,Mb(".monaco-icon-label-container")),this.nameContainer=xb(this.labelContainer,Mb("span.monaco-icon-name-container")),null!==t&&void 0!==t&&t.supportHighlights||null!==t&&void 0!==t&&t.supportIcons?this.nameNode=this._register(new iW(this.nameContainer,!!t.supportIcons)):this.nameNode=new tW(this.nameContainer),this.hoverDelegate=null!==(i=null===t||void 0===t?void 0:t.hoverDelegate)&&void 0!==i?i:RL("mouse")}get element(){return this.domNode.element}setLabel(e,t,i){let n=["monaco-icon-label"],s=["monaco-icon-label-container"],r="";i&&(i.extraClasses&&n.push(...i.extraClasses),i.bold&&n.push("bold"),i.italic&&n.push("italic"),i.strikethrough&&n.push("strikethrough"),i.disabledCommand&&s.push("disabled"),i.title&&("string"==typeof i.title?r+=i.title:r+=e));let o=this.domNode.element.querySelector(".monaco-icon-label-iconpath");if(null!==i&&void 0!==i&&i.iconPath){let e;o&&bb(o)?e=o:(e=Mb(".monaco-icon-label-iconpath"),this.domNode.element.prepend(e)),yf.isThemeIcon(i.iconPath)?(e.className="monaco-icon-label-iconpath ".concat(yf.asClassName(i.iconPath)),e.style.backgroundImage=""):e.style.backgroundImage=Gf(null===i||void 0===i?void 0:i.iconPath),e.style.backgroundRepeat="no-repeat",e.style.backgroundPosition="center",e.style.backgroundSize="contain"}else o&&o.remove();if(this.domNode.classNames=n,this.domNode.element.setAttribute("aria-label",r),this.labelContainer.classList.value="",this.labelContainer.classList.add(...s),this.setupHover(null!==i&&void 0!==i&&i.descriptionTitle?this.labelContainer:this.element,null===i||void 0===i?void 0:i.title),this.nameNode.setLabel(e,i),t||this.descriptionNode){let e=this.getOrCreateDescriptionNode();if(e instanceof ZH){var a,l;let n=null!==(a=null===i||void 0===i?void 0:i.supportIcons)&&void 0!==a?a:null===(l=this.creationOptions)||void 0===l?void 0:l.supportIcons;e.set(t||"",i?i.descriptionMatches:void 0,void 0,null===i||void 0===i?void 0:i.labelEscapeNewLines,n),this.setupHover(e.element,null===i||void 0===i?void 0:i.descriptionTitle)}else e.textContent=t&&null!==i&&void 0!==i&&i.labelEscapeNewLines?ZH.escapeNewLines(t,[]):t||"",this.setupHover(e.element,(null===i||void 0===i?void 0:i.descriptionTitle)||""),e.empty=!t}if(null!==i&&void 0!==i&&i.suffix||this.suffixNode){var h;this.getOrCreateSuffixNode().textContent=null!==(h=null===i||void 0===i?void 0:i.suffix)&&void 0!==h?h:""}}setupHover(e,t){var i;let n=this.customHovers.get(e);if(n&&(n.dispose(),this.customHovers.delete(e)),!t)return void e.removeAttribute("title");let s=e;if(null!==(i=this.creationOptions)&&void 0!==i&&i.hoverTargetOverride){if(!sb(e,this.creationOptions.hoverTargetOverride))throw Error("hoverTargetOverrride must be an ancestor of the htmlElement");s=this.creationOptions.hoverTargetOverride}let r=EN().setupManagedHover(this.hoverDelegate,s,t);r&&this.customHovers.set(e,r)}dispose(){super.dispose();for(let e of this.customHovers.values())e.dispose();this.customHovers.clear()}getOrCreateSuffixNode(){if(!this.suffixNode){let e=this._register(new JH(function(e,t){return e.after(t),t}(this.nameContainer,Mb("span.monaco-icon-suffix-container"))));this.suffixNode=this._register(new JH(xb(e.element,Mb("span.label-suffix"))))}return this.suffixNode}getOrCreateDescriptionNode(){if(!this.descriptionNode){var e;let t=this._register(new JH(xb(this.labelContainer,Mb("span.monaco-icon-description-container"))));null!==(e=this.creationOptions)&&void 0!==e&&e.supportDescriptionHighlights?this.descriptionNode=this._register(new ZH(xb(t.element,Mb("span.label-description")))):this.descriptionNode=this._register(new JH(xb(t.element,Mb("span.label-description"))))}return this.descriptionNode}},tW=class{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(this.label!==e||!dS(this.options,t))if(this.label=e,this.options=t,"string"==typeof e)this.singleLabel||(this.singleLabel=(this.container.textContent="",this.container.classList.remove("multiple"),xb(this.container,Mb("a.label-name",{id:null===t||void 0===t?void 0:t.domId})))),this.singleLabel.textContent=e;else{this.container.textContent="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let i=0;i<e.length;i++){let n=e[i],s=(null===t||void 0===t?void 0:t.domId)&&"".concat(null===t||void 0===t?void 0:t.domId,"_").concat(i);xb(this.container,Mb("a.label-name",{id:s,"data-icon-label-count":e.length,"data-icon-label-index":i,role:"treeitem"},n)),i<e.length-1&&xb(this.container,Mb("span.label-separator",void 0,(null===t||void 0===t?void 0:t.separator)||"/"))}}}};var iW=class extends Co{constructor(e,t){super(),this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){var i;if(this.label===e&&dS(this.options,t))return;this.label=e,this.options=t;let n=null!==(i=null===t||void 0===t?void 0:t.supportIcons)&&void 0!==i?i:this.supportIcons;if("string"==typeof e)this.singleLabel||(this.singleLabel=(this.container.textContent="",this.container.classList.remove("multiple"),this._register(new ZH(xb(this.container,Mb("a.label-name",{id:null===t||void 0===t?void 0:t.domId})))))),this.singleLabel.set(e,null===t||void 0===t?void 0:t.matches,void 0,null===t||void 0===t?void 0:t.labelEscapeNewLines,n);else{this.container.textContent="",this.container.classList.add("multiple"),this.singleLabel=void 0;let i=(null===t||void 0===t?void 0:t.separator)||"/",s=function(e,t,i){if(!i)return;let n=0;return e.map(e=>{let s={start:n,end:n+e.length},r=i.map(e=>JE.intersect(s,e)).filter(e=>!JE.isEmpty(e)).map(e=>{let{start:t,end:i}=e;return{start:t-n,end:i-n}});return n=s.end+t.length,r})}(e,i,null===t||void 0===t?void 0:t.matches);for(let r=0;r<e.length;r++){let o=e[r],a=s?s[r]:void 0,l=Mb("a.label-name",{id:(null===t||void 0===t?void 0:t.domId)&&"".concat(null===t||void 0===t?void 0:t.domId,"_").concat(r),"data-icon-label-count":e.length,"data-icon-label-index":r,role:"treeitem"});this._register(new ZH(xb(this.container,l))).set(o,a,void 0,null===t||void 0===t?void 0:t.labelEscapeNewLines,n),r<e.length-1&&xb(l,Mb("span.label-separator",void 0,i))}}}};wE({});var nW,sW,rW,oW,aW=Mb,lW=class e extends Co{constructor(e,t,i){super(),this.os=t,this.keyElements=new Set,this.options=i||Object.create(null);let n=this.options.keybindingLabelForeground;this.domNode=xb(e,aW(".monaco-keybinding")),n&&(this.domNode.style.color=n),this.hover=this._register(EN().setupManagedHover(RL("mouse"),this.domNode,"")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(t,i){this.didEverRender&&this.keybinding===t&&e.areSame(this.matches,i)||(this.keybinding=t,this.matches=i,this.render())}render(){if(this.clear(),this.keybinding){var e;let t=this.keybinding.getChords();t[0]&&this.renderChord(this.domNode,t[0],this.matches?this.matches.firstPart:null);for(let e=1;e<t.length;e++)xb(this.domNode,aW("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,t[e],this.matches?this.matches.chordPart:null);let i=null!==(e=this.options.disableTitle)&&void 0!==e&&e?void 0:this.keybinding.getAriaLabel()||void 0;this.hover.update(i),this.domNode.setAttribute("aria-label",i||"")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){U_(this.domNode),this.keyElements.clear()}renderChord(e,t,i){let n=QI.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,n.ctrlKey,!(null===i||void 0===i||!i.ctrlKey),n.separator),t.shiftKey&&this.renderKey(e,n.shiftKey,!(null===i||void 0===i||!i.shiftKey),n.separator),t.altKey&&this.renderKey(e,n.altKey,!(null===i||void 0===i||!i.altKey),n.separator),t.metaKey&&this.renderKey(e,n.metaKey,!(null===i||void 0===i||!i.metaKey),n.separator);let s=t.keyLabel;s&&this.renderKey(e,s,!(null===i||void 0===i||!i.keyCode),"")}renderKey(e,t,i,n){xb(e,this.createKeyElement(t,i?".highlight":"")),n&&xb(e,aW("span.monaco-keybinding-key-separator",void 0,n))}renderUnbound(e){xb(e,this.createKeyElement(Li(26,"Unbound")))}createKeyElement(e){let t=aW("span.monaco-keybinding-key"+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:""),void 0,e);return this.keyElements.add(t),this.options.keybindingLabelBackground&&(t.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(t.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(t.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(t.style.boxShadow="inset 0 -1px 0 ".concat(this.options.keybindingLabelShadow)),t}static areSame(e,t){return e===t||!e&&!t||!!e&&!!t&&dS(e.firstPart,t.firstPart)&&dS(e.chordPart,t.chordPart)}};!function(e){e[e.Hidden=0]="Hidden",e[e.Visible=1]="Visible",e[e.Recurse=2]="Recurse"}(nW||(nW={})),function(e){e[e.Expanded=0]="Expanded",e[e.Collapsed=1]="Collapsed",e[e.PreserveOrExpanded=2]="PreserveOrExpanded",e[e.PreserveOrCollapsed=3]="PreserveOrCollapsed"}(sW||(sW={})),function(e){e[e.Unknown=0]="Unknown",e[e.Twistie=1]="Twistie",e[e.Element=2]="Element",e[e.Filter=3]="Filter"}(rW||(rW={})),function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"}(oW||(oW={}));var hW,dW=class extends Error{constructor(e,t){super("TreeError [".concat(e,"] ").concat(t))}},cW=class{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}},uW=class{constructor(e,t,i,n){this.originalStart=e,this.originalLength=t,this.modifiedStart=i,this.modifiedLength=n}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}},gW=class{static Assert(e,t){if(!e)throw Error(t)}},pW=class{static Copy(e,t,i,n,s){for(let r=0;r<s;r++)i[n+r]=e[t+r]}static Copy2(e,t,i,n,s){for(let r=0;r<s;r++)i[n+r]=e[t+r]}};!function(e){e[e.MaxDifferencesHistory=1447]="MaxDifferencesHistory"}(hW||(hW={}));var fW=class{constructor(){this.m_changes=[],this.m_originalStart=Zo.MAX_SAFE_SMALL_INTEGER,this.m_modifiedStart=Zo.MAX_SAFE_SMALL_INTEGER,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new uW(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=Zo.MAX_SAFE_SMALL_INTEGER,this.m_modifiedStart=Zo.MAX_SAFE_SMALL_INTEGER}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},mW=class e{constructor(t,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.ContinueProcessingPredicate=n,this._originalSequence=t,this._modifiedSequence=i;let[s,r,o]=e._getElements(t),[a,l,h]=e._getElements(i);this._hasStrings=o&&h,this._originalStringElements=s,this._originalElementsOrHash=r,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&"string"==typeof e[0]}static _getElements(t){let i=t.getElements();if(e._isStringArray(i)){let e=new Int32Array(i.length);for(let t=0,n=i.length;t<n;t++)e[t]=Rg(i[t],0);return[i,e,!0]}return i instanceof Int32Array?[[],i,!1]:[[],new Int32Array(i),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]===this._modifiedElementsOrHash[t]&&(!this._hasStrings||this._originalStringElements[e]===this._modifiedStringElements[t])}ElementsAreStrictEqual(t,i){return!!this.ElementsAreEqual(t,i)&&e._getStrictElement(this._originalSequence,t)===e._getStrictElement(this._modifiedSequence,i)}static _getStrictElement(e,t){return"function"==typeof e.getStrictElement?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]===this._originalElementsOrHash[t]&&(!this._hasStrings||this._originalStringElements[e]===this._originalStringElements[t])}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]===this._modifiedElementsOrHash[t]&&(!this._hasStrings||this._modifiedStringElements[e]===this._modifiedStringElements[t])}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,i,n,s){let r=[!1],o=this.ComputeDiffRecursive(e,t,i,n,r);return s&&(o=this.PrettifyChanges(o)),{quitEarly:r[0],changes:o}}ComputeDiffRecursive(e,t,i,n,s){for(s[0]=!1;e<=t&&i<=n&&this.ElementsAreEqual(e,i);)e++,i++;for(;t>=e&&n>=i&&this.ElementsAreEqual(t,n);)t--,n--;if(e>t||i>n){let s;return i<=n?(gW.Assert(e===t+1,"originalStart should only be one more than originalEnd"),s=[new uW(e,0,i,n-i+1)]):e<=t?(gW.Assert(i===n+1,"modifiedStart should only be one more than modifiedEnd"),s=[new uW(e,t-e+1,i,0)]):(gW.Assert(e===t+1,"originalStart should only be one more than originalEnd"),gW.Assert(i===n+1,"modifiedStart should only be one more than modifiedEnd"),s=[]),s}let r=[0],o=[0],a=this.ComputeRecursionPoint(e,t,i,n,r,o,s),l=r[0],h=o[0];if(null!==a)return a;if(!s[0]){let r=this.ComputeDiffRecursive(e,l,i,h,s),o=[];return o=s[0]?[new uW(l+1,t-(l+1)+1,h+1,n-(h+1)+1)]:this.ComputeDiffRecursive(l+1,t,h+1,n,s),this.ConcatenateChanges(r,o)}return[new uW(e,t-e+1,i,n-i+1)]}WALKTRACE(e,t,i,n,s,r,o,a,l,h,d,c,u,g,p,f,m,v){let _=null,b=null,C=new fW,y=t,w=i,S=u[0]-f[0]-n,k=Zo.MIN_SAFE_SMALL_INTEGER,E=this.m_forwardHistory.length-1;do{let t=S+e;t===y||t<w&&l[t-1]<l[t+1]?(g=(d=l[t+1])-S-n,d<k&&C.MarkNextChange(),k=d,C.AddModifiedElement(d+1,g),S=t+1-e):(g=(d=l[t-1]+1)-S-n,d<k&&C.MarkNextChange(),k=d-1,C.AddOriginalElement(d,g+1),S=t-1-e),E>=0&&(e=(l=this.m_forwardHistory[E])[0],y=1,w=l.length-1)}while(--E>=-1);if(_=C.getReverseChanges(),v[0]){let e=u[0]+1,t=f[0]+1;if(null!==_&&_.length>0){let i=_[_.length-1];e=Math.max(e,i.getOriginalEnd()),t=Math.max(t,i.getModifiedEnd())}b=[new uW(e,c-e+1,t,p-t+1)]}else{C=new fW,y=r,w=o,S=u[0]-f[0]-a,k=Zo.MAX_SAFE_SMALL_INTEGER,E=m?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let e=S+s;e===y||e<w&&h[e-1]>=h[e+1]?(g=(d=h[e+1]-1)-S-a,d>k&&C.MarkNextChange(),k=d+1,C.AddOriginalElement(d+1,g+1),S=e+1-s):(g=(d=h[e-1])-S-a,d>k&&C.MarkNextChange(),k=d,C.AddModifiedElement(d+1,g+1),S=e-1-s),E>=0&&(s=(h=this.m_reverseHistory[E])[0],y=1,w=h.length-1)}while(--E>=-1);b=C.getChanges()}return this.ConcatenateChanges(_,b)}ComputeRecursionPoint(e,t,i,n,s,r,o){let a=0,l=0,h=0,d=0,c=0,u=0;e--,i--,s[0]=0,r[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let g=t-e+(n-i),p=g+1,f=new Int32Array(p),m=new Int32Array(p),v=n-i,_=t-e,b=e-i,C=t-n,y=(_-v)%2==0;f[v]=e,m[_]=t,o[0]=!1;for(let w=1;w<=g/2+1;w++){let g=0,S=0;h=this.ClipDiagonalBound(v-w,w,v,p),d=this.ClipDiagonalBound(v+w,w,v,p);for(let e=h;e<=d;e+=2){a=e===h||e<d&&f[e-1]<f[e+1]?f[e+1]:f[e-1]+1,l=a-(e-v)-b;let i=a;for(;a<t&&l<n&&this.ElementsAreEqual(a+1,l+1);)a++,l++;if(f[e]=a,a+l>g+S&&(g=a,S=l),!y&&Math.abs(e-_)<=w-1&&a>=m[e])return s[0]=a,r[0]=l,i<=m[e]&&hW.MaxDifferencesHistory>0&&w<=hW.MaxDifferencesHistory+1?this.WALKTRACE(v,h,d,b,_,c,u,C,f,m,a,t,s,l,n,r,y,o):null}let k=(g-e+(S-i)-w)/2;if(null!==this.ContinueProcessingPredicate&&!this.ContinueProcessingPredicate(g,k))return o[0]=!0,s[0]=g,r[0]=S,k>0&&hW.MaxDifferencesHistory>0&&w<=hW.MaxDifferencesHistory+1?this.WALKTRACE(v,h,d,b,_,c,u,C,f,m,a,t,s,l,n,r,y,o):(e++,i++,[new uW(e,t-e+1,i,n-i+1)]);c=this.ClipDiagonalBound(_-w,w,_,p),u=this.ClipDiagonalBound(_+w,w,_,p);for(let p=c;p<=u;p+=2){a=p===c||p<u&&m[p-1]>=m[p+1]?m[p+1]-1:m[p-1],l=a-(p-_)-C;let g=a;for(;a>e&&l>i&&this.ElementsAreEqual(a,l);)a--,l--;if(m[p]=a,y&&Math.abs(p-v)<=w&&a<=f[p])return s[0]=a,r[0]=l,g>=f[p]&&hW.MaxDifferencesHistory>0&&w<=hW.MaxDifferencesHistory+1?this.WALKTRACE(v,h,d,b,_,c,u,C,f,m,a,t,s,l,n,r,y,o):null}if(w<=hW.MaxDifferencesHistory){let e=new Int32Array(d-h+2);e[0]=v-h+1,pW.Copy2(f,h,e,1,d-h+1),this.m_forwardHistory.push(e),e=new Int32Array(u-c+2),e[0]=_-c+1,pW.Copy2(m,c,e,1,u-c+1),this.m_reverseHistory.push(e)}}return this.WALKTRACE(v,h,d,b,_,c,u,C,f,m,a,t,s,l,n,r,y,o)}PrettifyChanges(e){for(let t=0;t<e.length;t++){let i=e[t],n=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,s=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,r=i.originalLength>0,o=i.modifiedLength>0;for(;i.originalStart+i.originalLength<n&&i.modifiedStart+i.modifiedLength<s&&(!r||this.OriginalElementsAreEqual(i.originalStart,i.originalStart+i.originalLength))&&(!o||this.ModifiedElementsAreEqual(i.modifiedStart,i.modifiedStart+i.modifiedLength));){let e=this.ElementsAreStrictEqual(i.originalStart,i.modifiedStart);if(this.ElementsAreStrictEqual(i.originalStart+i.originalLength,i.modifiedStart+i.modifiedLength)&&!e)break;i.originalStart++,i.modifiedStart++}let a=[null];t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],a)&&(e[t]=a[0],e.splice(t+1,1),t--)}for(let t=e.length-1;t>=0;t--){let i=e[t],n=0,s=0;if(t>0){let i=e[t-1];n=i.originalStart+i.originalLength,s=i.modifiedStart+i.modifiedLength}let r=i.originalLength>0,o=i.modifiedLength>0,a=0,l=this._boundaryScore(i.originalStart,i.originalLength,i.modifiedStart,i.modifiedLength);for(let e=1;;e++){let t=i.originalStart-e,h=i.modifiedStart-e;if(t<n||h<s||r&&!this.OriginalElementsAreEqual(t,t+i.originalLength)||o&&!this.ModifiedElementsAreEqual(h,h+i.modifiedLength))break;let d=(t===n&&h===s?5:0)+this._boundaryScore(t,i.originalLength,h,i.modifiedLength);d>l&&(l=d,a=e)}i.originalStart-=a,i.modifiedStart-=a;let h=[null];t>0&&this.ChangesOverlap(e[t-1],e[t],h)&&(e[t-1]=h[0],e.splice(t,1),t++)}if(this._hasStrings)for(let t=1,i=e.length;t<i;t++){let i=e[t-1],n=e[t],s=n.originalStart-i.originalStart-i.originalLength,r=i.originalStart,o=n.originalStart+n.originalLength,a=o-r,l=i.modifiedStart,h=n.modifiedStart+n.modifiedLength,d=h-l;if(s<5&&a<20&&d<20){let e=this._findBetterContiguousSequence(r,a,l,d,s);if(e){let[t,r]=e;(t!==i.originalStart+i.originalLength||r!==i.modifiedStart+i.modifiedLength)&&(i.originalLength=t-i.originalStart,i.modifiedLength=r-i.modifiedStart,n.originalStart=t+s,n.modifiedStart=r+s,n.originalLength=o-n.originalStart,n.modifiedLength=h-n.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,i,n,s){if(t<s||n<s)return null;let r=e+t-s+1,o=i+n-s+1,a=0,l=0,h=0;for(let d=e;d<r;d++)for(let e=i;e<o;e++){let t=this._contiguousSequenceScore(d,e,s);t>0&&t>a&&(a=t,l=d,h=e)}return a>0?[l,h]:null}_contiguousSequenceScore(e,t,i){let n=0;for(let s=0;s<i;s++){if(!this.ElementsAreEqual(e+s,t+s))return 0;n+=this._originalStringElements[e+s].length}return n}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1||this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){let i=e+t;if(this._OriginalIsBoundary(i-1)||this._OriginalIsBoundary(i))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1||this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){let i=e+t;if(this._ModifiedIsBoundary(i-1)||this._ModifiedIsBoundary(i))return!0}return!1}_boundaryScore(e,t,i,n){return(this._OriginalRegionIsBoundary(e,t)?1:0)+(this._ModifiedRegionIsBoundary(i,n)?1:0)}ConcatenateChanges(e,t){let i=[];if(0===e.length||0===t.length)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],i)){let n=Array(e.length+t.length-1);return pW.Copy(e,0,n,0,e.length-1),n[e.length-1]=i[0],pW.Copy(t,1,n,e.length,t.length-1),n}{let i=Array(e.length+t.length);return pW.Copy(e,0,i,0,e.length),pW.Copy(t,0,i,e.length,t.length),i}}ChangesOverlap(e,t,i){if(gW.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),gW.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){let n=e.originalStart,s=e.originalLength,r=e.modifiedStart,o=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(s=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(o=t.modifiedStart+t.modifiedLength-e.modifiedStart),i[0]=new uW(n,s,r,o),!0}return i[0]=null,!1}ClipDiagonalBound(e,t,i,n){if(e>=0&&e<n)return e;let s=t%2==0;return e<0?s===(i%2==0)?0:1:s===((n-i-1)%2==0)?n-1:n-2}};function vW(e){return!!e&&void 0!==e.visibility}function _W(e){switch(e){case!0:return nW.Visible;case!1:return nW.Hidden;default:return e}}function bW(e){return"collapsible"in e}new Uint32Array(65536);var CW=class{constructor(e,t){var i;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.user=e,this.rootRef=[],this.eventBufferer=new Ho,this._onDidSpliceModel=new Ro,this.onDidSpliceModel=this._onDidSpliceModel.event,this._onDidSpliceRenderedNodes=new Ro,this.onDidSpliceRenderedNodes=this._onDidSpliceRenderedNodes.event,this._onDidChangeCollapseState=new Ro,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new Ro,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this.refilterDelayer=new Sl(vl),this.collapseByDefault=void 0!==n.collapseByDefault&&n.collapseByDefault,this.allowNonCollapsibleParents=null!==(i=n.allowNonCollapsibleParents)&&void 0!==i&&i,this.filter=n.filter,this.autoExpandSingleChildren=void 0!==n.autoExpandSingleChildren&&n.autoExpandSingleChildren,this.root={parent:void 0,element:t,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:nW.Visible,visible:!0,filterData:void 0}}splice(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oo.empty(),n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(0===e.length)throw new dW(this.user,"Invalid tree location");n.diffIdentityProvider?this.spliceSmart(n.diffIdentityProvider,e,t,i,n):this.spliceSimple(e,t,i,n)}spliceSmart(e,t,i){var n;let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:oo.empty(),r=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null!==(n=r.diffDepth)&&void 0!==n?n:0,{parentNode:a}=this.getParentNodeWithListIndex(t);if(!a.lastDiffIds)return this.spliceSimple(t,i,s,r);let l=[...s],h=t[t.length-1],d=new mW({getElements:()=>a.lastDiffIds},{getElements:()=>[...a.children.slice(0,h),...l,...a.children.slice(h+i)].map(t=>e.getId(t.element).toString())}).ComputeDiff(!1);if(d.quitEarly)return a.lastDiffIds=void 0,this.spliceSimple(t,i,l,r);let c=t.slice(0,-1),u=(t,i,n)=>{if(o>0)for(let s=0;s<n;s++)t--,i--,this.spliceSmart(e,[...c,t,0],2**53-1,l[i].children,r,o-1)},g=Math.min(a.children.length,h+i),p=l.length;for(let f of d.changes.sort((e,t)=>t.originalStart-e.originalStart))u(g,p,g-(f.originalStart+f.originalLength)),g=f.originalStart,p=f.modifiedStart-h,this.spliceSimple([...c,g],f.originalLength,oo.slice(l,p,p+f.modifiedLength),r);u(g,p,g)}spliceSimple(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oo.empty(),{onDidCreateNode:n,onDidDeleteNode:s,diffIdentityProvider:r}=arguments.length>3?arguments[3]:void 0,{parentNode:o,listIndex:a,revealed:l,visible:h}=this.getParentNodeWithListIndex(e),d=[],c=oo.map(i,e=>this.createTreeNode(e,o,o.visible?nW.Visible:nW.Hidden,l,d,n)),u=e[e.length-1],g=0;for(let C=u;C>=0&&C<o.children.length;C--){let e=o.children[C];if(e.visible){g=e.visibleChildIndex;break}}let p=[],f=0,m=0;for(let C of c)p.push(C),m+=C.renderNodeCount,C.visible&&(C.visibleChildIndex=g+f++);let v=Gr(o.children,u,t,p);r?o.lastDiffIds?Gr(o.lastDiffIds,u,t,p.map(e=>r.getId(e.element).toString())):o.lastDiffIds=o.children.map(e=>r.getId(e.element).toString()):o.lastDiffIds=void 0;let _=0;for(let C of v)C.visible&&_++;if(0!==_)for(let C=u+p.length;C<o.children.length;C++){let e=o.children[C];e.visible&&(e.visibleChildIndex-=_)}if(o.visibleChildrenCount+=f-_,v.length>0&&s){let e=t=>{s(t),t.children.forEach(e)};v.forEach(e)}if(l&&h){let e=v.reduce((e,t)=>e+(t.visible?t.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(o,m-e),this._onDidSpliceRenderedNodes.fire({start:a,deleteCount:e,elements:d})}this._onDidSpliceModel.fire({insertedNodes:p,deletedNodes:v});let b=o;for(;b;){if(b.visibility===nW.Recurse){this.refilterDelayer.trigger(()=>this.refilter());break}b=b.parent}}rerender(e){if(0===e.length)throw new dW(this.user,"Invalid tree location");let{node:t,listIndex:i,revealed:n}=this.getTreeNodeWithListIndex(e);t.visible&&n&&this._onDidSpliceRenderedNodes.fire({start:i,deleteCount:1,elements:[t]})}has(e){return this.hasTreeNode(e)}getListIndex(e){let{listIndex:t,visible:i,revealed:n}=this.getTreeNodeWithListIndex(e);return i&&n?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){let i=this.getTreeNode(e);void 0===t&&(t=!i.collapsible);let n={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,n))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,i){let n=this.getTreeNode(e);void 0===t&&(t=!n.collapsed);let s={collapsed:t,recursive:i||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,s))}_setCollapseState(e,t){let{node:i,listIndex:n,revealed:s}=this.getTreeNodeWithListIndex(e),r=this._setListNodeCollapseState(i,n,s,t);if(i!==this.root&&this.autoExpandSingleChildren&&r&&!bW(t)&&i.collapsible&&!i.collapsed&&!t.recursive){let n=-1;for(let e=0;e<i.children.length;e++)if(i.children[e].visible){if(n>-1){n=-1;break}n=e}n>-1&&this._setCollapseState([...e,n],t)}return r}_setListNodeCollapseState(e,t,i,n){let s=this._setNodeCollapseState(e,n,!1);if(!i||!e.visible||!s)return s;let r=e.renderNodeCount,o=this.updateNodeAfterCollapseChange(e),a=r-(-1===t?0:1);return this._onDidSpliceRenderedNodes.fire({start:t+1,deleteCount:a,elements:o.slice(1)}),s}_setNodeCollapseState(e,t,i){let n;if(e===this.root?n=!1:(bW(t)?(n=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(n=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):n=!1,n&&this._onDidChangeCollapseState.fire({node:e,deep:i})),!bW(t)&&t.recursive)for(let s of e.children)n=this._setNodeCollapseState(s,t,!0)||n;return n}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){let e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this._onDidSpliceRenderedNodes.fire({start:0,deleteCount:e,elements:t}),this.refilterDelayer.cancel()}createTreeNode(e,t,i,n,s,r){let o={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:"boolean"==typeof e.collapsible?e.collapsible:void 0!==e.collapsed,collapsed:void 0===e.collapsed?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:nW.Visible,visible:!0,filterData:void 0},a=this._filterNode(o,i);o.visibility=a,n&&s.push(o);let l=e.children||oo.empty(),h=n&&a!==nW.Hidden&&!o.collapsed,d=0,c=1;for(let u of l){let e=this.createTreeNode(u,o,a,h,s,r);o.children.push(e),c+=e.renderNodeCount,e.visible&&(e.visibleChildIndex=d++)}return this.allowNonCollapsibleParents||(o.collapsible=o.collapsible||o.children.length>0),o.visibleChildrenCount=d,o.visible=a===nW.Recurse?d>0:a===nW.Visible,o.visible?o.collapsed||(o.renderNodeCount=c):(o.renderNodeCount=0,n&&s.pop()),null!==r&&void 0!==r&&r(o),o}updateNodeAfterCollapseChange(e){let t=e.renderNodeCount,i=[];return this._updateNodeAfterCollapseChange(e,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterCollapseChange(e,t){if(!1===e.visible)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(let i of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(i,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){let t=e.renderNodeCount,i=[];return this._updateNodeAfterFilterChange(e,e.visible?nW.Visible:nW.Hidden,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterFilterChange(e,t,i){let n,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e!==this.root){if(n=this._filterNode(e,t),n===nW.Hidden)return e.visible=!1,e.renderNodeCount=0,!1;s&&i.push(e)}let r=i.length;e.renderNodeCount=e===this.root?0:1;let o=!1;if(e.collapsed&&n===nW.Hidden)e.visibleChildrenCount=0;else{let t=0;for(let r of e.children)o=this._updateNodeAfterFilterChange(r,n,i,s&&!e.collapsed)||o,r.visible&&(r.visibleChildIndex=t++);e.visibleChildrenCount=t}return e!==this.root&&(e.visible=n===nW.Recurse?o:n===nW.Visible,e.visibility=n),e.visible?e.collapsed||(e.renderNodeCount+=i.length-r):(e.renderNodeCount=0,s&&i.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(0!==t)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){let i=this.filter?this.filter.filter(e.element,t):nW.Visible;return"boolean"==typeof i?(e.filterData=void 0,i?nW.Visible:nW.Hidden):vW(i)?(e.filterData=i.data,_W(i.visibility)):(e.filterData=void 0,_W(i))}hasTreeNode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root;if(!e||0===e.length)return!0;let[i,...n]=e;return!(i<0||i>t.children.length)&&this.hasTreeNode(n,t.children[i])}getTreeNode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root;if(!e||0===e.length)return t;let[i,...n]=e;if(i<0||i>t.children.length)throw new dW(this.user,"Invalid tree location");return this.getTreeNode(n,t.children[i])}getTreeNodeWithListIndex(e){if(0===e.length)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};let{parentNode:t,listIndex:i,revealed:n,visible:s}=this.getParentNodeWithListIndex(e),r=e[e.length-1];if(r<0||r>t.children.length)throw new dW(this.user,"Invalid tree location");let o=t.children[r];return{node:o,listIndex:i,revealed:n,visible:s&&o.visible}}getParentNodeWithListIndex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],[r,...o]=e;if(r<0||r>t.children.length)throw new dW(this.user,"Invalid tree location");for(let a=0;a<r;a++)i+=t.children[a].renderNodeCount;return n&&(n=!t.collapsed),s&&(s=t.visible),0===o.length?{parentNode:t,listIndex:i,revealed:n,visible:s}:this.getParentNodeWithListIndex(o,t.children[r],i+1,n,s)}getNode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.getTreeNode(e)}getNodeLocation(e){let t=[],i=e;for(;i.parent;)t.push(i.parent.children.indexOf(i)),i=i.parent;return t.reverse()}getParentNodeLocation(e){if(0!==e.length)return 1===e.length?[]:function(e){if(0===e.length)throw Error("Invalid tail call");return[e.slice(0,e.length-1),e[e.length-1]]}(e)[0]}getFirstElementChild(e){let t=this.getTreeNode(e);if(0!==t.children.length)return t.children[0].element}getLastElementAncestor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.getTreeNode(e);if(0!==t.children.length)return this._getLastElementAncestor(t)}_getLastElementAncestor(e){return 0===e.children.length?e.element:this._getLastElementAncestor(e.children[e.children.length-1])}};wE({});var yW=class extends $L{set context(e){this.data.context=e}get context(){return this.data.context}constructor(e){super(e.elements.map(e=>e.element)),this.data=e}};function wW(e){return e instanceof $L?new yW(e):e}var SW=class{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=Co.None,this.disposables=new bo}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(e=>e.element),t)}onDragStart(e,t){var i,n;null===(i=(n=this.dnd).onDragStart)||void 0===i||i.call(n,wW(e),t)}onDragOver(e,t,i,n,s){let o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=this.dnd.onDragOver(wW(e),t&&t.element,i,n,s),l=this.autoExpandNode!==t;if(l&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),void 0===t)return a;if(l&&"boolean"!=typeof a&&a.autoExpand&&(this.autoExpandDisposable=Dl(()=>{let e=this.modelProvider(),i=e.getNodeLocation(t);e.isCollapsed(i)&&e.setCollapsed(i,!1),this.autoExpandNode=void 0},500,this.disposables)),"boolean"==typeof a||!a.accept||void 0===a.bubble||a.feedback)return o?a:{accept:"boolean"==typeof a?a:a.accept,effect:"boolean"==typeof a?void 0:a.effect,feedback:[i]};if(a.bubble===oW.Up){let i=this.modelProvider(),r=i.getNodeLocation(t),o=i.getParentNodeLocation(r),a=i.getNode(o),l=o&&i.getListIndex(o);return this.onDragOver(e,a,l,n,s,!1)}let h=this.modelProvider(),d=h.getNodeLocation(t),c=h.getListIndex(d),u=h.getListRenderCount(d);return(0,r.A)((0,r.A)({},a),{},{feedback:Ur(c,c+u)})}drop(e,t,i,n,s){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(wW(e),t&&t.element,i,n,s)}onDragEnd(e){var t,i;null===(t=(i=this.dnd).onDragEnd)||void 0===t||t.call(i,e)}dispose(){this.disposables.dispose(),this.dnd.dispose()}};var kW,EW=class{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){var i,n;null===(i=(n=this.delegate).setDynamicHeight)||void 0===i||i.call(n,e.element,t)}},DW=class e{static lift(t){return t instanceof e?t:new e(t)}static empty(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new e({focus:[],selection:[],expanded:Object.create(null),scrollTop:t})}constructor(e){if(this.focus=new Set(e.focus),this.selection=new Set(e.selection),e.expanded instanceof Array){this.expanded=Object.create(null);for(let t of e.expanded)this.expanded[t]=1}else this.expanded=e.expanded;this.expanded=e.expanded,this.scrollTop=e.scrollTop}toJSON(){return{focus:Array.from(this.focus),selection:Array.from(this.selection),expanded:this.expanded,scrollTop:this.scrollTop}}};!function(e){e.None="none",e.OnHover="onHover",e.Always="always"}(kW||(kW={}));var TW=class{get elements(){return this._elements}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this._elements=t,this.disposables=new bo,this.onDidChange=_o.forEach(e,e=>this._elements=e,this.disposables)}dispose(){this.disposables.dispose()}},IW=(jt=class e{constructor(t,i,n,s,r){var o;let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.renderer=t,this.model=i,this.activeNodes=s,this.renderedIndentGuides=r,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=e.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=Co.None,this.disposables=new bo,this.templateId=t.templateId,this.updateOptions(a),_o.map(n,e=>e.node)(this.onDidChangeNodeTwistieState,this,this.disposables),null===(o=t.onDidChangeTwistieState)||void 0===o||o.call(t,this.onDidChangeTwistieState,this,this.disposables)}updateOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(void 0!==t.indent){let i=D_(t.indent,0,40);if(i!==this.indent){this.indent=i;for(let[t,i]of this.renderedNodes)i.indentSize=e.DefaultIndent+(t.depth-1)*this.indent,this.renderTreeElement(t,i)}}if(void 0!==t.renderIndentGuides){let e=t.renderIndentGuides!==kW.None;if(e!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=e;for(let[e,t]of this.renderedNodes)this._renderIndentGuides(e,t);if(this.indentGuidesDisposable.dispose(),e){let e=new bo;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,e),this.indentGuidesDisposable=e,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}void 0!==t.hideTwistiesOfChildlessElements&&(this.hideTwistiesOfChildlessElements=t.hideTwistiesOfChildlessElements),void 0!==t.twistieAdditionalCssClass&&(this.twistieAdditionalCssClass=t.twistieAdditionalCssClass)}renderTemplate(e){let t=xb(e,Mb(".monaco-tl-row")),i=xb(t,Mb(".monaco-tl-indent")),n=xb(t,Mb(".monaco-tl-twistie")),s=xb(t,Mb(".monaco-tl-contents")),r=this.renderer.renderTemplate(s);return{container:e,indent:i,twistie:n,indentGuidesDisposable:Co.None,indentSize:0,templateData:r}}renderElement(t,i,n,s){n.indentSize=e.DefaultIndent+(t.depth-1)*this.indent,this.renderedNodes.set(t,n),this.renderedElements.set(t.element,t),this.renderTreeElement(t,n),this.renderer.renderElement(t,i,n.templateData,(0,r.A)((0,r.A)({},s),{},{indent:n.indentSize}))}disposeElement(e,t,i,n){var s,o;i.indentGuidesDisposable.dispose(),null!==(s=(o=this.renderer).disposeElement)&&void 0!==s&&s.call(o,e,t,i.templateData,(0,r.A)((0,r.A)({},n),{},{indent:i.indentSize})),"number"==typeof(null===n||void 0===n?void 0:n.height)&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){let t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){let t=this.renderedNodes.get(e);t&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(e,t))}renderTreeElement(e,t){t.twistie.className=t.twistie.classList.item(0),t.twistie.style.paddingLeft="".concat(t.indentSize,"px"),t.indent.style.width="".concat(t.indentSize+this.indent-16,"px"),e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded"),t.twistie.classList.remove(...yf.asClassNameArray(su.treeItemExpanded));let i=!1;if(this.renderer.renderTwistie&&(i=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(i||t.twistie.classList.add(...yf.asClassNameArray(su.treeItemExpanded)),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),this.twistieAdditionalCssClass){let i=this.twistieAdditionalCssClass(e.element);i&&t.twistie.classList.add(i)}this._renderIndentGuides(e,t)}_renderIndentGuides(e,t){if(U_(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;let i=new bo;for(;;){let n=this.model.getNodeLocation(e),s=this.model.getParentNodeLocation(n);if(!s)break;let r=this.model.getNode(s),o=Mb(".indent-guide",{style:"width: ".concat(this.indent,"px")});this.activeIndentNodes.has(r)&&o.classList.add("active"),0===t.indent.childElementCount?t.indent.appendChild(o):t.indent.insertBefore(o,t.indent.firstElementChild),this.renderedIndentGuides.add(r,o),i.add(vo(()=>this.renderedIndentGuides.delete(r,o))),e=r}t.indentGuidesDisposable=i}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;let t=new Set;e.forEach(e=>{let i=this.model.getNodeLocation(e);try{let n=this.model.getParentNodeLocation(i);e.collapsible&&e.children.length>0&&!e.collapsed?t.add(e):n&&t.add(this.model.getNode(n))}catch(n){}}),this.activeIndentNodes.forEach(e=>{t.has(e)||this.renderedIndentGuides.forEach(e,e=>e.classList.remove("active"))}),t.forEach(e=>{this.activeIndentNodes.has(e)||this.renderedIndentGuides.forEach(e,e=>e.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),po(this.disposables)}},{_:jt.DefaultIndent=8},jt);function xW(e,t){let i,n=t.toLowerCase().indexOf(e);if(n>-1){i=[2**53-1,0];for(let t=e.length;t>0;t--)i.push(n+t-1)}return i}var LW,AW,NW=class{get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}set findMatchType(e){this._findMatchType=e}get findMatchType(){return this._findMatchType}set findMode(e){this._findMode=e}get findMode(){return this._findMode}set pattern(e){this._pattern=e,this._lowercasePattern=e.toLowerCase()}constructor(e,t,i){this._keyboardNavigationLabelProvider=e,this._filter=t,this._defaultFindVisibility=i,this._totalCount=0,this._matchCount=0,this._findMatchType=AW.Fuzzy,this._findMode=LW.Highlight,this._pattern="",this._lowercasePattern="",this.disposables=new bo}filter(e,t){let i=nW.Visible;if(this._filter){let n=this._filter.filter(e,t);if(i="boolean"==typeof n?n?nW.Visible:nW.Hidden:vW(n)?_W(n.visibility):n,i===nW.Hidden)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:Ty.Default,visibility:i};let n=this._keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),s=Array.isArray(n)?n:[n];for(let r of s){let e,t=r&&r.toString();if(void 0===t)return{data:Ty.Default,visibility:i};if(e=this._findMatchType===AW.Contiguous?xW(this._lowercasePattern,t.toLowerCase()):Py(this._pattern,this._lowercasePattern,0,t,t.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0}),e)return this._matchCount++,1===s.length?{data:e,visibility:i}:{data:{label:t,score:e},visibility:i}}return this._findMode===LW.Filter?"number"==typeof this._defaultFindVisibility?this._defaultFindVisibility:this._defaultFindVisibility?this._defaultFindVisibility(e):nW.Recurse:{data:Ty.Default,visibility:i}}reset(){this._totalCount=0,this._matchCount=0}dispose(){po(this.disposables)}},FW=class extends GU{constructor(e,t,i){super({icon:e.icon,title:e.title,isChecked:e.isChecked,inputActiveOptionBorder:t.inputActiveOptionBorder,inputActiveOptionForeground:t.inputActiveOptionForeground,inputActiveOptionBackground:t.inputActiveOptionBackground,hoverLifecycleOptions:i}),this.id=e.id}},OW=class{constructor(e){this.stateMap=new Map(e.map(e=>[e.id,(0,r.A)({},e)]))}states(){return Array.from(this.stateMap.values())}get(e){let t=this.stateMap.get(e);if(void 0===t)throw Error("No state found for toggle id ".concat(e));return t.isChecked}set(e,t){let i=this.stateMap.get(e);if(void 0===i)throw Error("No state found for toggle id ".concat(e));return i.isChecked!==t&&(i.isChecked=t,!0)}},RW={inputBoxStyles:{inputBackground:"#3C3C3C",inputForeground:"#CCCCCC",inputValidationInfoBorder:"#55AAFF",inputValidationInfoBackground:"#063B49",inputValidationWarningBorder:"#B89500",inputValidationWarningBackground:"#352A05",inputValidationErrorBorder:"#BE1100",inputValidationErrorBackground:"#5A1D1D",inputBorder:void 0,inputValidationErrorForeground:void 0,inputValidationInfoForeground:void 0,inputValidationWarningForeground:void 0},toggleStyles:qU,listFilterWidgetBackground:void 0,listFilterWidgetShadow:void 0};!function(e){e[e.Highlight=0]="Highlight",e[e.Filter=1]="Filter"}(LW||(LW={})),function(e){e[e.Fuzzy=0]="Fuzzy",e[e.Contiguous=1]="Contiguous"}(AW||(AW={}));var MW,PW=class extends Co{get value(){return this.findInput.inputBox.value}set value(e){this.findInput.inputBox.value=e}constructor(e,t,i,n){var s;let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=arguments.length>5?arguments[5]:void 0;super(),this.tree=t,this.elements=zb(".monaco-tree-type-filter",[zb(".monaco-tree-type-filter-input@findInput"),zb(".monaco-tree-type-filter-actionbar@actionbar")]),this.toggles=[],this._onDidDisable=new Ro,this.onDidDisable=this._onDidDisable.event,e.appendChild(this.elements.root),this._register(vo(()=>this.elements.root.remove()));let a=null!==(s=null===o||void 0===o?void 0:o.styles)&&void 0!==s?s:RW;a.listFilterWidgetBackground&&(this.elements.root.style.backgroundColor=a.listFilterWidgetBackground),a.listFilterWidgetShadow&&(this.elements.root.style.boxShadow="0 0 8px 2px ".concat(a.listFilterWidgetShadow));let l={groupId:"abstract-tree"};this.toggles=r.map(e=>this._register(new FW(e,a.toggleStyles,l))),this.onDidToggleChange=_o.any(...this.toggles.map(e=>_o.map(e.onChange,()=>({id:e.id,isChecked:e.checked}))));let h=(null===o||void 0===o?void 0:o.history)||[];this.findInput=this._register(new QH(this.elements.findInput,i,{label:Li(32,"Type to search"),placeholder:n,additionalToggles:this.toggles,showCommonFindToggles:!1,inputBoxStyles:a.inputBoxStyles,toggleStyles:a.toggleStyles,history:new Set(h),hoverLifecycleOptions:l})),this.actionbar=this._register(new mF(this.elements.actionbar));let d=this._register(new ML(this.findInput.inputBox.inputElement,"keydown")),c=_o.chain(d.event,e=>e.map(e=>new C_(e)));this._register(c(e=>e.equals(Kv.Enter)?(e.preventDefault(),e.stopPropagation(),this.findInput.inputBox.addToHistory(),void this.tree.domFocus()):e.equals(Kv.DownArrow)?(e.preventDefault(),e.stopPropagation(),void(this.findInput.inputBox.isAtLastInHistory()||this.findInput.inputBox.isNowhereInHistory()?(this.findInput.inputBox.addToHistory(),this.tree.domFocus()):this.findInput.inputBox.showNextValue())):e.equals(Kv.UpArrow)?(e.preventDefault(),e.stopPropagation(),void this.findInput.inputBox.showPreviousValue()):void 0));let u=this._register(new VD("close",Li(33,"Close"),"codicon codicon-close",!0,()=>this.dispose()));this.actionbar.push(u,{icon:!0,label:!1}),this.onDidChangeValue=this.findInput.onDidChange}setToggleState(e,t){let i=this.toggles.find(t=>t.id===e);i&&(i.checked=t)}setPlaceHolder(e){this.findInput.inputBox.setPlaceHolder(e)}getHistory(){return this.findInput.inputBox.getHistory()}focus(){this.findInput.focus()}select(){this.findInput.select(),this.findInput.inputBox.addToHistory(!0)}showMessage(e){this.findInput.showMessage(e)}clearMessage(){this.findInput.clearMessage()}async dispose(){this._onDidDisable.fire(),this.elements.root.classList.add("disabled"),await El(300),super.dispose()}};!function(e){e.Mode="mode",e.MatchType="matchType"}(MW||(MW={}));var BW=class{get pattern(){return this._pattern}get placeholder(){return this._placeholder}set placeholder(e){var t;this._placeholder=e,null===(t=this.widget)||void 0===t||t.setPlaceHolder(e)}constructor(e,t,i){var n,s;let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.tree=e,this.filter=t,this.contextViewProvider=i,this.options=r,this._pattern="",this.previousPattern="",this._onDidChangePattern=new Ro,this.onDidChangePattern=this._onDidChangePattern.event,this._onDidChangeOpenState=new Ro,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new bo,this.disposables=new bo,this.toggles=new OW(null!==(n=r.toggles)&&void 0!==n?n:[]),this._placeholder=null!==(s=r.placeholder)&&void 0!==s?s:Li(32,"Type to search")}isOpened(){return!!this.widget}open(){if(this.widget)return this.widget.focus(),void this.widget.select();this.tree.updateOptions({paddingTop:30}),this.widget=new PW(this.tree.getHTMLElement(),this.tree,this.contextViewProvider,this.placeholder,this.toggles.states(),(0,r.A)((0,r.A)({},this.options),{},{history:this._history})),this.enabledDisposables.add(this.widget),this.widget.onDidChangeValue(this.onDidChangeValue,this,this.enabledDisposables),this.widget.onDidDisable(this.close,this,this.enabledDisposables),this.widget.onDidToggleChange(this.onDidToggleChange,this,this.enabledDisposables),this.widget.focus(),this.widget.value=this.previousPattern,this.widget.select(),this._onDidChangeOpenState.fire(!0)}close(){this.widget&&(this.tree.updateOptions({paddingTop:0}),this._history=this.widget.getHistory(),this.widget=void 0,this.enabledDisposables.clear(),this.previousPattern=this.pattern,this.onDidChangeValue(""),this.tree.domFocus(),this._onDidChangeOpenState.fire(!1))}onDidChangeValue(e){this._pattern=e,this._onDidChangePattern.fire(e),this.filter.pattern=e,this.applyPattern(e)}onDidToggleChange(e){this.toggles.set(e.id,e.isChecked)}updateToggleState(e,t){var i;this.toggles.set(e,t),null===(i=this.widget)||void 0===i||i.setToggleState(e,t)}renderMessage(e,t){var i,n,s,r;e?null===(i=this.tree.options.showNotFoundMessage)||void 0===i||i?null===(n=this.widget)||void 0===n||n.showMessage({type:KH.WARNING,content:null!==t&&void 0!==t?t:Li(34,"No results found.")}):null===(s=this.widget)||void 0===s||s.showMessage({type:KH.WARNING}):null===(r=this.widget)||void 0===r||r.clearMessage()}alertResults(e){e?Li(36,"{0} results",e):Li(35,"No results")}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}},UW=class extends BW{get mode(){return this.toggles.get(MW.Mode)?LW.Filter:LW.Highlight}set mode(e){if(e===this.mode)return;let t=e===LW.Filter;this.updateToggleState(MW.Mode,t),this.placeholder=t?Li(37,"Type to filter"):Li(32,"Type to search"),this.filter.findMode=e,this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e)}get matchType(){return this.toggles.get(MW.MatchType)?AW.Fuzzy:AW.Contiguous}set matchType(e){e!==this.matchType&&(this.updateToggleState(MW.MatchType,e===AW.Fuzzy),this.filter.findMatchType=e,this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(e))}constructor(e,t,i){var n,s;let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=null!==(n=o.defaultFindMode)&&void 0!==n?n:LW.Highlight,l=null!==(s=o.defaultFindMatchType)&&void 0!==s?s:AW.Fuzzy,h=[{id:MW.Mode,icon:su.listFilter,title:Li(38,"Filter"),isChecked:a===LW.Filter},{id:MW.MatchType,icon:su.searchFuzzy,title:Li(39,"Fuzzy Match"),isChecked:l===AW.Fuzzy}];t.findMatchType=l,t.findMode=a,super(e,t,i,(0,r.A)((0,r.A)({},o),{},{toggles:h})),this.filter=t,this._onDidChangeMode=new Ro,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new Ro,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this.disposables.add(this.tree.onDidChangeModel(()=>{this.isOpened()&&(0!==this.pattern.length&&this.tree.refilter(),this.render())})),this.disposables.add(this.tree.onWillRefilter(()=>this.filter.reset()))}updateOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};void 0!==e.defaultFindMode&&(this.mode=e.defaultFindMode),void 0!==e.defaultFindMatchType&&(this.matchType=e.defaultFindMatchType)}applyPattern(e){this.tree.refilter(),e&&this.tree.focusNext(0,!0,void 0,e=>!Ty.isDefault(e.filterData));let t=this.tree.getFocus();if(t.length>0){let e=t[0];null===this.tree.getRelativeTop(e)&&this.tree.reveal(e,.5)}this.render()}shouldAllowFocus(e){return!this.isOpened()||!this.pattern||this.filter.totalCount>0&&this.filter.matchCount<=1||!Ty.isDefault(e.filterData)}onDidToggleChange(e){e.id===MW.Mode?this.mode=e.isChecked?LW.Filter:LW.Highlight:e.id===MW.MatchType&&(this.matchType=e.isChecked?AW.Fuzzy:AW.Contiguous)}render(){let e=0===this.filter.matchCount&&this.filter.totalCount>0&&this.pattern.length>0;this.renderMessage(e),this.pattern.length&&this.alertResults(this.filter.matchCount)}};function HW(e,t){return e.position===t.position&&WW(e,t)}function WW(e,t){return e.node.element===t.node.element&&e.startIndex===t.startIndex&&e.height===t.height&&e.endIndex===t.endIndex}var VW=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.stickyNodes=e}get count(){return this.stickyNodes.length}equal(e){return Mr(this.stickyNodes,e.stickyNodes,HW)}contains(e){return this.stickyNodes.some(t=>t.node.element===e.element)}lastNodePartiallyVisible(){if(0===this.count)return!1;let e=this.stickyNodes[this.count-1];if(1===this.count)return 0!==e.position;let t=this.stickyNodes[this.count-2];return t.position+t.height!==e.position}animationStateChanged(e){if(!Mr(this.stickyNodes,e.stickyNodes,WW)||0===this.count)return!1;let t=this.stickyNodes[this.count-1],i=e.stickyNodes[e.count-1];return t.position!==i.position}},zW=class{constrainStickyScrollNodes(e,t,i){for(let n=0;n<e.length;n++){let s=e[n];if(s.position+s.height>i||n>=t)return e.slice(0,n)}return e}},KW=class extends Co{constructor(e,t,i,n,s){var r,o;let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};super(),this.tree=e,this.model=t,this.view=i,this.treeDelegate=s,this.maxWidgetViewRatio=.4,this.stickyScrollMaxItemCount=this.validateStickySettings(a).stickyScrollMaxItemCount,this.stickyScrollDelegate=null!==(r=a.stickyScrollDelegate)&&void 0!==r?r:new zW,this.paddingTop=null!==(o=a.paddingTop)&&void 0!==o?o:0,this._widget=this._register(new qW(i.getScrollableElement(),i,e,n,s,a.accessibilityProvider)),this.onDidChangeHasFocus=this._widget.onDidChangeHasFocus,this.onContextMenu=this._widget.onContextMenu,this._register(i.onDidScroll(()=>this.update())),this._register(i.onDidChangeContentHeight(()=>this.update())),this._register(e.onDidChangeCollapseState(()=>this.update())),this._register(t.onDidSpliceRenderedNodes(e=>{let t=this._widget.state;if(t){if(e.deleteCount>0&&t.stickyNodes.some(e=>!this.model.has(this.model.getNodeLocation(e.node))))return void this.update();t.stickyNodes.some(i=>{let n=this.model.getListIndex(this.model.getNodeLocation(i.node));return n>=e.start&&n<e.start+e.deleteCount&&t.contains(i.node)})&&this._widget.rerender()}})),this.update()}get height(){return this._widget.height}get count(){return this._widget.count}getNode(e){return this._widget.getNode(e)}getNodeAtHeight(e){let t;if(t=0===e?this.view.firstVisibleIndex:this.view.indexAt(e+this.view.scrollTop),!(t<0||t>=this.view.length))return this.view.element(t)}update(){let e=this.getNodeAtHeight(this.paddingTop);if(!e||this.tree.scrollTop<=this.paddingTop)return void this._widget.setState(void 0);let t=this.findStickyState(e);this._widget.setState(t)}findStickyState(e){let t=[],i=e,n=0,s=this.getNextStickyNode(i,void 0,n);for(;s&&(t.push(s),n+=s.height,!(t.length<=this.stickyScrollMaxItemCount)||(i=this.getNextVisibleNode(s),i));)s=this.getNextStickyNode(i,s.node,n);let r=this.constrainStickyNodes(t);return r.length?new VW(r):void 0}getNextVisibleNode(e){return this.getNodeAtHeight(e.position+e.height)}getNextStickyNode(e,t,i){let n=this.getAncestorUnderPrevious(e,t);if(n&&(n!==e||this.nodeIsUncollapsedParent(e)&&!this.nodeTopAlignsWithStickyNodesBottom(e,i)))return this.createStickyScrollNode(n,i)}nodeTopAlignsWithStickyNodesBottom(e,t){let i=this.getNodeIndex(e),n=this.view.getElementTop(i),s=t;return this.view.scrollTop===n-s}createStickyScrollNode(e,t){let i=this.treeDelegate.getHeight(e),{startIndex:n,endIndex:s}=this.getNodeRange(e);return{node:e,position:this.calculateStickyNodePosition(s,t,i),height:i,startIndex:n,endIndex:s}}getAncestorUnderPrevious(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=e,n=this.getParentNode(i);for(;n;){if(n===t)return i;i=n,n=this.getParentNode(i)}if(void 0===t)return i}calculateStickyNodePosition(e,t,i){let n=this.view.getRelativeTop(e);if(null===n&&this.view.firstVisibleIndex===e&&e+1<this.view.length){let t=this.treeDelegate.getHeight(this.view.element(e)),i=this.view.getRelativeTop(e+1);n=i?i-t/this.view.renderHeight:null}if(null===n)return t;let s=this.view.element(e),r=this.treeDelegate.getHeight(s),o=n*this.view.renderHeight+r;return t+i>o&&t<=o?o-i:t}constrainStickyNodes(e){if(0===e.length)return[];let t=this.view.renderHeight*this.maxWidgetViewRatio,i=e[e.length-1];if(e.length<=this.stickyScrollMaxItemCount&&i.position+i.height<=t)return e;let n=this.stickyScrollDelegate.constrainStickyScrollNodes(e,this.stickyScrollMaxItemCount,t);if(!n.length)return[];let s=n[n.length-1];if(n.length>this.stickyScrollMaxItemCount||s.position+s.height>t)throw Error("stickyScrollDelegate violates constraints");return n}getParentNode(e){let t=this.model.getNodeLocation(e),i=this.model.getParentNodeLocation(t);return i?this.model.getNode(i):void 0}nodeIsUncollapsedParent(e){let t=this.model.getNodeLocation(e);return this.model.getListRenderCount(t)>1}getNodeIndex(e){let t=this.model.getNodeLocation(e);return this.model.getListIndex(t)}getNodeRange(e){let t=this.model.getNodeLocation(e),i=this.model.getListIndex(t);if(i<0)throw Error("Node not found in tree");return{startIndex:i,endIndex:i+this.model.getListRenderCount(t)-1}}nodePositionTopBelowWidget(e){let t=[],i=this.getParentNode(e);for(;i;)t.push(i),i=this.getParentNode(i);let n=0;for(let s=0;s<t.length&&s<this.stickyScrollMaxItemCount;s++)n+=this.treeDelegate.getHeight(t[s]);return n}getFocus(){return this._widget.getFocus()}domFocus(){this._widget.domFocus()}focusedLast(){return this._widget.focusedLast()}updateOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(void 0!==e.paddingTop&&(this.paddingTop=e.paddingTop),void 0!==e.stickyScrollMaxItemCount){let t=this.validateStickySettings(e);this.stickyScrollMaxItemCount!==t.stickyScrollMaxItemCount&&(this.stickyScrollMaxItemCount=t.stickyScrollMaxItemCount,this.update())}}validateStickySettings(e){let t=7;return"number"==typeof e.stickyScrollMaxItemCount&&(t=Math.max(e.stickyScrollMaxItemCount,1)),{stickyScrollMaxItemCount:t}}},qW=class{get state(){return this._previousState}constructor(e,t,i,n,s,r){this.view=t,this.tree=i,this.treeRenderers=n,this.treeDelegate=s,this.accessibilityProvider=r,this._previousElements=[],this._previousStateDisposables=new bo,this._rootDomNode=Mb(".monaco-tree-sticky-container.empty"),e.appendChild(this._rootDomNode);let o=Mb(".monaco-tree-sticky-container-shadow");this._rootDomNode.appendChild(o),this.stickyScrollFocus=new GW(this._rootDomNode,t),this.onDidChangeHasFocus=this.stickyScrollFocus.onDidChangeHasFocus,this.onContextMenu=this.stickyScrollFocus.onContextMenu}get height(){if(!this._previousState)return 0;let e=this._previousState.stickyNodes[this._previousState.count-1];return e.position+e.height}get count(){var e,t;return null!==(e=null===(t=this._previousState)||void 0===t?void 0:t.count)&&void 0!==e?e:0}getNode(e){var t;return null===(t=this._previousState)||void 0===t?void 0:t.stickyNodes.find(t=>t.node===e)}setState(e){let t=!!this._previousState&&this._previousState.count>0,i=!!e&&e.count>0;if(!t&&!i||t&&i&&this._previousState.equal(e))return;if(t!==i&&this.setVisible(i),!i)return this._previousState=void 0,this._previousElements=[],void this._previousStateDisposables.clear();let n=e.stickyNodes[e.count-1];this._previousState&&e.animationStateChanged(this._previousState)?this._previousElements[this._previousState.count-1].style.top="".concat(n.position,"px"):this.renderState(e),this._previousState=e,this._rootDomNode.style.height="".concat(n.position+n.height,"px")}renderState(e){this._previousStateDisposables.clear();let t=Array(e.count);for(let i=e.count-1;i>=0;i--){let n=e.stickyNodes[i],{element:s,disposable:r}=this.createElement(n,i,e.count);t[i]=s,this._rootDomNode.appendChild(s),this._previousStateDisposables.add(r)}this.stickyScrollFocus.updateElements(t,e),this._previousElements=t}rerender(){this._previousState&&this.renderState(this._previousState)}createElement(e,t,i){let n=e.startIndex,s=mb("div");s.style.top="".concat(e.position,"px"),!1!==this.tree.options.setRowHeight&&(s.style.height="".concat(e.height,"px")),!1!==this.tree.options.setRowLineHeight&&(s.style.lineHeight="".concat(e.height,"px")),s.classList.add("monaco-tree-sticky-row"),s.classList.add("monaco-list-row"),s.setAttribute("data-index","".concat(n)),s.setAttribute("data-parity",n%2==0?"even":"odd"),s.setAttribute("id",this.view.getElementID(n));let r=this.setAccessibilityAttributes(s,e.node.element,t,i),o=this.treeDelegate.getTemplateId(e.node),a=this.treeRenderers.find(e=>e.templateId===o);if(!a)throw Error("No renderer found for template id ".concat(o));let l=e.node;l===this.tree.getNode(this.tree.getNodeLocation(e.node))&&(l=new Proxy(e.node,{}));let h=a.renderTemplate(s);return a.renderElement(l,e.startIndex,h,{height:e.height}),{element:s,disposable:vo(()=>{r.dispose(),a.disposeElement(l,e.startIndex,h,{height:e.height}),a.disposeTemplate(h),s.remove()})}}setAccessibilityAttributes(e,t,i,n){var s;if(!this.accessibilityProvider)return Co.None;this.accessibilityProvider.getSetSize&&e.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(t,i,n))),this.accessibilityProvider.getPosInSet&&e.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(t,i))),this.accessibilityProvider.getRole&&e.setAttribute("role",null!==(s=this.accessibilityProvider.getRole(t))&&void 0!==s?s:"treeitem");let r=this.accessibilityProvider.getAriaLabel(t),o=r&&"string"!=typeof r?r:tA(r),a=iv(t=>{let i=t.readObservable(o);i?e.setAttribute("aria-label",i):e.removeAttribute("aria-label")});"string"==typeof r||r&&e.setAttribute("aria-label",r.get());let l=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(t);return"number"==typeof l&&e.setAttribute("aria-level","".concat(l)),e.setAttribute("aria-selected","false"),a}setVisible(e){this._rootDomNode.classList.toggle("empty",!e),e||this.stickyScrollFocus.updateElements([],void 0)}getFocus(){return this.stickyScrollFocus.getFocus()}domFocus(){this.stickyScrollFocus.domFocus()}focusedLast(){return this.stickyScrollFocus.focusedLast()}dispose(){this.stickyScrollFocus.dispose(),this._previousStateDisposables.dispose(),this._rootDomNode.remove()}},GW=class extends Co{get domHasFocus(){return this._domHasFocus}set domHasFocus(e){e!==this._domHasFocus&&(this._onDidChangeHasFocus.fire(e),this._domHasFocus=e)}constructor(e,t){super(),this.container=e,this.view=t,this.focusedIndex=-1,this.elements=[],this._onDidChangeHasFocus=new Ro,this.onDidChangeHasFocus=this._onDidChangeHasFocus.event,this._onContextMenu=new Ro,this.onContextMenu=this._onContextMenu.event,this._domHasFocus=!1,this._register(W_(this.container,"focus",()=>this.onFocus())),this._register(W_(this.container,"blur",()=>this.onBlur())),this._register(this.view.onDidFocus(()=>this.toggleStickyScrollFocused(!1))),this._register(this.view.onKeyDown(e=>this.onKeyDown(e))),this._register(this.view.onMouseDown(e=>this.onMouseDown(e))),this._register(this.view.onContextMenu(e=>this.handleContextMenu(e)))}handleContextMenu(e){let t=e.browserEvent.target;if(!dA(t)&&!hA(t))return void(this.focusedLast()&&this.view.domFocus());if(!Sb(e.browserEvent)){if(!this.state)throw Error("Context menu should not be triggered when state is undefined");let t=this.state.stickyNodes.findIndex(t=>{var i;return t.node.element===(null===(i=e.element)||void 0===i?void 0:i.element)});if(-1===t)throw Error("Context menu should not be triggered when element is not in sticky scroll widget");return this.container.focus(),void this.setFocus(t)}if(!this.state||this.focusedIndex<0)throw Error("Context menu key should not be triggered when focus is not in sticky scroll widget");let i=this.state.stickyNodes[this.focusedIndex].node.element,n=this.elements[this.focusedIndex];this._onContextMenu.fire({element:i,anchor:n,browserEvent:e.browserEvent,isStickyScroll:!0})}onKeyDown(e){if(this.domHasFocus&&this.state)if("ArrowUp"===e.key)this.setFocusedElement(Math.max(0,this.focusedIndex-1)),e.preventDefault(),e.stopPropagation();else if("ArrowDown"===e.key||"ArrowRight"===e.key){if(this.focusedIndex>=this.state.count-1){let e=this.state.stickyNodes[this.state.count-1].startIndex+1;this.view.domFocus(),this.view.setFocus([e]),this.scrollNodeUnderWidget(e,this.state)}else this.setFocusedElement(this.focusedIndex+1);e.preventDefault(),e.stopPropagation()}}onMouseDown(e){let t=e.browserEvent.target;!dA(t)&&!hA(t)||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation())}updateElements(e,t){if(t&&0===t.count)throw Error("Sticky scroll state must be undefined when there are no sticky nodes");if(t&&t.count!==e.length)throw Error("Sticky scroll focus received illigel state");let i=this.focusedIndex;if(this.removeFocus(),this.elements=e,this.state=t,t){let e=D_(i,0,t.count-1);this.setFocus(e)}else this.domHasFocus&&this.view.domFocus();this.container.tabIndex=t?0:-1}setFocusedElement(e){let t=this.state;if(!t)throw Error("Cannot set focus when state is undefined");if(this.setFocus(e),!(e<t.count-1)&&t.lastNodePartiallyVisible()){let i=t.stickyNodes[e];this.scrollNodeUnderWidget(i.endIndex+1,t)}}scrollNodeUnderWidget(e,t){let i=t.stickyNodes[t.count-1],n=t.count>1?t.stickyNodes[t.count-2]:void 0,s=this.view.getElementTop(e),r=n?n.position+n.height+i.height:i.height;this.view.scrollTop=s-r}getFocus(){if(this.state&&-1!==this.focusedIndex)return this.state.stickyNodes[this.focusedIndex].node.element}domFocus(){if(!this.state)throw Error("Cannot focus when state is undefined");this.container.focus()}focusedLast(){return!!this.state&&this.view.getHTMLElement().classList.contains("sticky-scroll-focused")}removeFocus(){-1!==this.focusedIndex&&(this.toggleElementFocus(this.elements[this.focusedIndex],!1),this.focusedIndex=-1)}setFocus(e){if(0>e)throw Error("addFocus() can not remove focus");if(!this.state&&e>=0)throw Error("Cannot set focus index when state is undefined");if(this.state&&e>=this.state.count)throw Error("Cannot set focus index to an index that does not exist");let t=this.focusedIndex;t>=0&&this.toggleElementFocus(this.elements[t],!1),e>=0&&this.toggleElementFocus(this.elements[e],!0),this.focusedIndex=e}toggleElementFocus(e,t){this.toggleElementActiveFocus(e,t&&this.domHasFocus),this.toggleElementPassiveFocus(e,t)}toggleCurrentElementActiveFocus(e){-1!==this.focusedIndex&&this.toggleElementActiveFocus(this.elements[this.focusedIndex],e)}toggleElementActiveFocus(e,t){e.classList.toggle("focused",t)}toggleElementPassiveFocus(e,t){e.classList.toggle("passive-focused",t)}toggleStickyScrollFocused(e){this.view.getHTMLElement().classList.toggle("sticky-scroll-focused",e)}onFocus(){if(!this.state||0===this.elements.length)throw Error("Cannot focus when state is undefined or elements are empty");this.domHasFocus=!0,this.toggleStickyScrollFocused(!0),this.toggleCurrentElementActiveFocus(!0),-1===this.focusedIndex&&this.setFocus(0)}onBlur(){this.domHasFocus=!1,this.toggleCurrentElementActiveFocus(!1)}dispose(){this.toggleStickyScrollFocused(!1),this._onDidChangeHasFocus.fire(!1),super.dispose()}};function jW(e){let t=rW.Unknown;return rb(e.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?t=rW.Twistie:rb(e.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?t=rW.Element:rb(e.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(t=rW.Filter),{browserEvent:e.browserEvent,element:e.element?e.element.element:null,target:t}}function YW(e){let t=dA(e.browserEvent.target);return{element:e.element?e.element.element:null,browserEvent:e.browserEvent,anchor:e.anchor,isStickyScroll:t}}function QW(e,t){t(e),e.children.forEach(e=>QW(e,t))}var $W,XW=class{get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new Ro,this.onDidChange=this._onDidChange.event}set(e,t){(null===t||void 0===t||!t.__forceEvent)&&Mr(this.nodes,e)||this._set(e,!1,t)}_set(e,t,i){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){let e=this;this._onDidChange.fire({get elements(){return e.get()},browserEvent:i})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice(e){let{insertedNodes:t,deletedNodes:i}=e;if(!this.identityProvider){let e=this.createNodeSet(),t=t=>e.delete(t);return i.forEach(e=>QW(e,t)),void this.set([...e.values()])}let n=new Set,s=e=>n.add(this.identityProvider.getId(e.element).toString());i.forEach(e=>QW(e,s));let r=new Map,o=e=>r.set(this.identityProvider.getId(e.element).toString(),e);t.forEach(e=>QW(e,o));let a=[];for(let l of this.nodes){let e=this.identityProvider.getId(l.element).toString();if(n.has(e)){let t=r.get(e);t&&t.visible&&a.push(t)}else a.push(l)}if(this.nodes.length>0&&0===a.length){let e=this.getFirstViewElementWithTrait();e&&a.push(e)}this._set(a,!0)}createNodeSet(){let e=new Set;for(let t of this.nodes)e.add(t);return e}},ZW=class extends yA{constructor(e,t,i){super(e),this.tree=t,this.stickyScrollProvider=i}onViewPointer(e){if(cA(e.browserEvent.target)||qb(e.browserEvent.target)||lA(e.browserEvent.target)||e.browserEvent.isHandledByList)return;let t=e.element;if(!t||this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);let i=e.browserEvent.target,n=i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&e.browserEvent.offsetX<16,s=hA(e.browserEvent.target),r=!1;if(r=!!s||("function"==typeof this.tree.expandOnlyOnTwistieClick?this.tree.expandOnlyOnTwistieClick(t.element):!!this.tree.expandOnlyOnTwistieClick),s)this.handleStickyScrollMouseEvent(e,t);else if(r&&!n&&2!==e.browserEvent.detail||!this.tree.expandOnDoubleClick&&2===e.browserEvent.detail)return super.onViewPointer(e);if(t.collapsible&&(!s||n)){let i=this.tree.getNodeLocation(t),s=e.browserEvent.altKey;if(this.tree.setFocus([i]),this.tree.toggleCollapsed(i,s),n)return void(e.browserEvent.isHandledByList=!0)}s||super.onViewPointer(e)}handleStickyScrollMouseEvent(e,t){if(function(e){return aA(e,"monaco-custom-toggle")}(e.browserEvent.target)||function(e){return aA(e,"action-item")}(e.browserEvent.target))return;let i=this.stickyScrollProvider();if(!i)throw Error("Sticky scroll controller not found");let n=this.list.indexOf(t),s=this.list.getElementTop(n),r=i.nodePositionTopBelowWidget(t);this.tree.scrollTop=s-r,this.list.domFocus(),this.list.setFocus([n]),this.list.setSelection([n])}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||e.browserEvent.isHandledByList||super.onDoubleClick(e)}onMouseDown(e){let t=e.browserEvent.target;dA(t)||hA(t)||super.onMouseDown(e)}onContextMenu(e){let t=e.browserEvent.target;dA(t)||hA(t)||super.onContextMenu(e)}},JW=class extends LA{constructor(e,t,i,n,s,r,o,a){super(e,t,i,n,a),this.focusTrait=s,this.selectionTrait=r,this.anchorTrait=o}createMouseController(e){return new ZW(this,e.tree,e.stickyScrollProvider)}splice(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(super.splice(e,t,i),0===i.length)return;let n,s=[],r=[];i.forEach((t,i)=>{this.focusTrait.has(t)&&s.push(e+i),this.selectionTrait.has(t)&&r.push(e+i),this.anchorTrait.has(t)&&(n=e+i)}),s.length>0&&super.setFocus(Br([...super.getFocus(),...s])),r.length>0&&super.setSelection(Br([...super.getSelection(),...r])),"number"==typeof n&&super.setAnchor(n)}setFocus(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super.setFocus(e,t),i||this.focusTrait.set(e.map(e=>this.element(e)),t)}setSelection(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super.setSelection(e,t),i||this.selectionTrait.set(e.map(e=>this.element(e)),t)}setAnchor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super.setAnchor(e),t||(void 0===e?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}};!function(e){e[e.Tree=0]="Tree",e[e.StickyScroll=1]="StickyScroll"}($W||($W={}));var eV=class{get onDidScroll(){return this.view.onDidScroll}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseClick(){return _o.map(this.view.onMouseClick,jW)}get onMouseDblClick(){return _o.filter(_o.map(this.view.onMouseDblClick,jW),e=>e.target!==rW.Filter)}get onMouseOver(){return _o.map(this.view.onMouseOver,jW)}get onMouseOut(){return _o.map(this.view.onMouseOut,jW)}get onContextMenu(){var e,t;return _o.any(_o.filter(_o.map(this.view.onContextMenu,YW),e=>!e.isStickyScroll),null!==(e=null===(t=this.stickyScrollController)||void 0===t?void 0:t.onContextMenu)&&void 0!==e?e:_o.None)}get onTap(){return _o.map(this.view.onTap,jW)}get onPointer(){return _o.map(this.view.onPointer,jW)}get onKeyDown(){return this.view.onKeyDown}get onKeyUp(){return this.view.onKeyUp}get onKeyPress(){return this.view.onKeyPress}get onDidFocus(){return this.view.onDidFocus}get onDidBlur(){return this.view.onDidBlur}get onDidChangeModel(){return _o.any(this.onDidChangeModelRelay.event,this.onDidSwapModel.event)}get onDidChangeCollapseState(){return this.onDidChangeCollapseStateRelay.event}get onDidChangeRenderNodeCount(){return this.onDidChangeRenderNodeCountRelay.event}get findMode(){var e,t;return null!==(e=null===(t=this.findController)||void 0===t?void 0:t.mode)&&void 0!==e?e:LW.Highlight}set findMode(e){this.findController&&(this.findController.mode=e)}get findMatchType(){var e,t;return null!==(e=null===(t=this.findController)||void 0===t?void 0:t.matchType)&&void 0!==e?e:AW.Fuzzy}set findMatchType(e){this.findController&&(this.findController.matchType=e)}get onDidChangeFindPattern(){return this.findController?this.findController.onDidChangePattern:_o.None}get expandOnDoubleClick(){return void 0===this._options.expandOnDoubleClick||this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return void 0===this._options.expandOnlyOnTwistieClick||this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}constructor(e,t,i,n){var s,o;let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this._user=e,this._options=a,this.eventBufferer=new Ho,this.onDidChangeFindOpenState=_o.None,this.onDidChangeStickyScrollFocused=_o.None,this.disposables=new bo,this.onDidSwapModel=this.disposables.add(new Ro),this.onDidChangeModelRelay=this.disposables.add(new Wo),this.onDidSpliceModelRelay=this.disposables.add(new Wo),this.onDidChangeCollapseStateRelay=this.disposables.add(new Wo),this.onDidChangeRenderNodeCountRelay=this.disposables.add(new Wo),this.onDidChangeActiveNodesRelay=this.disposables.add(new Wo),this._onWillRefilter=new Ro,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new Ro,this.onDidUpdateOptions=this._onDidUpdateOptions.event,this.modelDisposables=new bo,a.keyboardNavigationLabelProvider&&(null===(s=a.findWidgetEnabled)||void 0===s||s)&&(this.findFilter=new NW(a.keyboardNavigationLabelProvider,a.filter,a.defaultFindVisibility),a=(0,r.A)((0,r.A)({},a),{},{filter:this.findFilter}),this.disposables.add(this.findFilter)),this.model=this.createModel(e,a),this.treeDelegate=new EW(i);let l=this.disposables.add(new TW(this.onDidChangeActiveNodesRelay.event)),h=new uo;this.renderers=n.map(e=>new IW(e,this.model,this.onDidChangeCollapseStateRelay.event,l,h,a));for(let r of this.renderers)this.disposables.add(r);if(this.focus=new XW(()=>this.view.getFocusedElements()[0],a.identityProvider),this.selection=new XW(()=>this.view.getSelectedElements()[0],a.identityProvider),this.anchor=new XW(()=>this.view.getAnchorElement(),a.identityProvider),this.view=new JW(e,t,this.treeDelegate,this.renderers,this.focus,this.selection,this.anchor,(0,r.A)((0,r.A)({},function(e,t,i){return i&&(0,r.A)((0,r.A)({},i),{},{identityProvider:i.identityProvider&&{getId:e=>i.identityProvider.getId(e.element)},dnd:i.dnd&&t.add(new SW(e,i.dnd)),multipleSelectionController:i.multipleSelectionController&&{isSelectionSingleChangeEvent:e=>i.multipleSelectionController.isSelectionSingleChangeEvent((0,r.A)((0,r.A)({},e),{},{element:e.element})),isSelectionRangeChangeEvent:e=>i.multipleSelectionController.isSelectionRangeChangeEvent((0,r.A)((0,r.A)({},e),{},{element:e.element}))},accessibilityProvider:i.accessibilityProvider&&(0,r.A)((0,r.A)({},i.accessibilityProvider),{},{getSetSize(t){let i=e(),n=i.getNodeLocation(t),s=i.getParentNodeLocation(n);return i.getNode(s).visibleChildrenCount},getPosInSet:e=>e.visibleChildIndex+1,isChecked:i.accessibilityProvider&&i.accessibilityProvider.isChecked?e=>i.accessibilityProvider.isChecked(e.element):void 0,getRole:i.accessibilityProvider&&i.accessibilityProvider.getRole?e=>i.accessibilityProvider.getRole(e.element):()=>"treeitem",getAriaLabel:e=>i.accessibilityProvider.getAriaLabel(e.element),getWidgetAriaLabel:()=>i.accessibilityProvider.getWidgetAriaLabel(),getWidgetRole:i.accessibilityProvider&&i.accessibilityProvider.getWidgetRole?()=>i.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:i.accessibilityProvider&&i.accessibilityProvider.getAriaLevel?e=>i.accessibilityProvider.getAriaLevel(e.element):e=>e.depth,getActiveDescendantId:i.accessibilityProvider.getActiveDescendantId&&(e=>i.accessibilityProvider.getActiveDescendantId(e.element))}),keyboardNavigationLabelProvider:i.keyboardNavigationLabelProvider&&(0,r.A)((0,r.A)({},i.keyboardNavigationLabelProvider),{},{getKeyboardNavigationLabel:e=>i.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)})})}(()=>this.model,this.disposables,a)),{},{tree:this,stickyScrollProvider:()=>this.stickyScrollController})),this.setupModel(this.model),!1!==a.keyboardSupport){let e=_o.chain(this.view.onKeyDown,e=>e.filter(e=>!qb(e.target)).map(e=>new C_(e)));_o.chain(e,e=>e.filter(e=>e.keyCode===Kv.LeftArrow))(this.onLeftArrow,this,this.disposables),_o.chain(e,e=>e.filter(e=>e.keyCode===Kv.RightArrow))(this.onRightArrow,this,this.disposables),_o.chain(e,e=>e.filter(e=>e.keyCode===Kv.Space))(this.onSpace,this,this.disposables)}if((null===(o=a.findWidgetEnabled)||void 0===o||o)&&a.keyboardNavigationLabelProvider&&a.contextViewProvider){let e={styles:a.findWidgetStyles,defaultFindMode:a.defaultFindMode,defaultFindMatchType:a.defaultFindMatchType,showNotFoundMessage:a.showNotFoundMessage};this.findController=this.disposables.add(new UW(this,this.findFilter,a.contextViewProvider,e)),this.focusNavigationFilter=e=>this.findController.shouldAllowFocus(e),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=_o.None,this.onDidChangeFindMatchType=_o.None;a.enableStickyScroll&&(this.stickyScrollController=new KW(this,this.model,this.view,this.renderers,this.treeDelegate,a),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus),this.styleElement=nC(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===kW.Always)}updateOptions(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options=(0,r.A)((0,r.A)({},this._options),t);for(let i of this.renderers)i.updateOptions(t);this.view.updateOptions(this._options),null!==(e=this.findController)&&void 0!==e&&e.updateOptions(t),this.updateStickyScroll(t),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===kW.Always)}get options(){return this._options}updateStickyScroll(e){var t;!this.stickyScrollController&&this._options.enableStickyScroll?(this.stickyScrollController=new KW(this,this.model,this.view,this.renderers,this.treeDelegate,this._options),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus):this.stickyScrollController&&!this._options.enableStickyScroll&&(this.onDidChangeStickyScrollFocused=_o.None,this.stickyScrollController.dispose(),this.stickyScrollController=void 0),null===(t=this.stickyScrollController)||void 0===t||t.updateOptions(e)}updateWidth(e){let t=this.model.getListIndex(e);-1!==t&&this.view.updateWidth(t)}getHTMLElement(){return this.view.getHTMLElement()}get contentHeight(){return this.view.contentHeight}get contentWidth(){return this.view.contentWidth}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get onDidChangeContentWidth(){return this.view.onDidChangeContentWidth}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}get scrollLeft(){return this.view.scrollLeft}set scrollLeft(e){this.view.scrollLeft=e}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleElement(){let e=this.view.firstVisibleIndex;if(this.stickyScrollController&&(e+=this.stickyScrollController.count),!(e<0||e>=this.view.length))return this.view.element(e).element}get lastVisibleElement(){let e=this.view.lastVisibleIndex;return this.view.element(e).element}get ariaLabel(){return this.view.ariaLabel}set ariaLabel(e){this.view.ariaLabel=e}get selectionSize(){return this.selection.getNodes().length}domFocus(){var e;null!==(e=this.stickyScrollController)&&void 0!==e&&e.focusedLast()?this.stickyScrollController.domFocus():this.view.domFocus()}isDOMFocused(){return cb(this.getHTMLElement())}layout(e,t){this.view.layout(e,t)}style(e){var t,i;let n=".".concat(this.view.domId),s=[];e.treeIndentGuidesStroke&&(s.push(".monaco-list".concat(n,":hover .monaco-tl-indent > .indent-guide, .monaco-list").concat(n,".always .monaco-tl-indent > .indent-guide  { opacity: 1; border-color: ").concat(e.treeInactiveIndentGuidesStroke,"; }")),s.push(".monaco-list".concat(n," .monaco-tl-indent > .indent-guide.active { opacity: 1; border-color: ").concat(e.treeIndentGuidesStroke,"; }")));let r=null!==(t=e.treeStickyScrollBackground)&&void 0!==t?t:e.listBackground;r&&(s.push(".monaco-list".concat(n," .monaco-scrollable-element .monaco-tree-sticky-container { background-color: ").concat(r,"; }")),s.push(".monaco-list".concat(n," .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row { background-color: ").concat(r,"; }"))),e.treeStickyScrollBorder&&s.push(".monaco-list".concat(n," .monaco-scrollable-element .monaco-tree-sticky-container { border-bottom: 1px solid ").concat(e.treeStickyScrollBorder,"; }")),e.treeStickyScrollShadow&&s.push(".monaco-list".concat(n," .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-container-shadow { box-shadow: ").concat(e.treeStickyScrollShadow," 0 6px 6px -6px inset; height: 3px; }")),e.listFocusForeground&&(s.push(".monaco-list".concat(n,".sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { color: ").concat(e.listFocusForeground,"; }")),s.push(".monaco-list".concat(n,":not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { color: inherit; }")));let o=Wf(e.listFocusAndSelectionOutline,Wf(e.listSelectionOutline,null!==(i=e.listFocusOutline)&&void 0!==i?i:""));o&&(s.push(".monaco-list".concat(n,".sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused.selected { outline: 1px solid ").concat(o,"; outline-offset: -1px;}")),s.push(".monaco-list".concat(n,":not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused.selected { outline: inherit;}"))),e.listFocusOutline&&(s.push(".monaco-list".concat(n,".sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { outline: 1px solid ").concat(e.listFocusOutline,"; outline-offset: -1px; }")),s.push(".monaco-list".concat(n,":not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { outline: inherit; }")),s.push(".context-menu-visible .monaco-list".concat(n,".last-focused.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.passive-focused { outline: 1px solid ").concat(e.listFocusOutline,"; outline-offset: -1px; }")),s.push(".context-menu-visible .monaco-list".concat(n,".last-focused.sticky-scroll-focused .monaco-list-rows .monaco-list-row.focused { outline: inherit; }")),s.push(".context-menu-visible .monaco-list".concat(n,".last-focused:not(.sticky-scroll-focused) .monaco-tree-sticky-container .monaco-list-rows .monaco-list-row.focused { outline: inherit; }"))),this.styleElement.textContent=s.join("\n"),this.view.style(e)}getParentElement(e){let t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}getNodeLocation(e){return this.model.getNodeLocation(e)}collapse(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.model.setCollapsed(e,!0,t)}expand(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.model.setCollapsed(e,!1,t)}toggleCollapsed(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.model.setCollapsed(e,void 0,t)}expandAll(){this.model.setCollapsed(this.model.rootRef,!1,!0)}collapseAll(){this.model.setCollapsed(this.model.rootRef,!0,!0)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}expandTo(e){this.model.expandTo(e)}triggerTypeNavigation(){this.view.triggerTypeNavigation()}openFind(){var e;null===(e=this.findController)||void 0===e||e.open()}closeFind(){var e;null===(e=this.findController)||void 0===e||e.close()}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setAnchor(e){if(void 0===e)return this.view.setAnchor(void 0);this.eventBufferer.bufferEvents(()=>{let t=this.model.getNode(e);this.anchor.set([t]);let i=this.model.getListIndex(e);i>-1&&this.view.setAnchor(i,!0)})}getAnchor(){return this.anchor.get().at(0)}setSelection(e,t){this.eventBufferer.bufferEvents(()=>{let i=e.map(e=>this.model.getNode(e));this.selection.set(i,t);let n=e.map(e=>this.model.getListIndex(e)).filter(e=>e>-1);this.view.setSelection(n,t,!0)})}getSelection(){return this.selection.get()}setFocus(e,t){this.eventBufferer.bufferEvents(()=>{let i=e.map(e=>this.model.getNode(e));this.focus.set(i,t);let n=e.map(e=>this.model.getListIndex(e)).filter(e=>e>-1);this.view.setFocus(n,t,!0)})}focusNext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Sb(i)&&i.altKey?void 0:this.focusNavigationFilter;this.view.focusNext(e,t,i,n)}focusPrevious(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Sb(i)&&i.altKey?void 0:this.focusNavigationFilter;this.view.focusPrevious(e,t,i,n)}focusNextPage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sb(e)&&e.altKey?void 0:this.focusNavigationFilter;return this.view.focusNextPage(e,t)}focusPreviousPage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sb(e)&&e.altKey?void 0:this.focusNavigationFilter;return this.view.focusPreviousPage(e,t,()=>{var e,t;return null!==(e=null===(t=this.stickyScrollController)||void 0===t?void 0:t.height)&&void 0!==e?e:0})}focusLast(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sb(e)&&e.altKey?void 0:this.focusNavigationFilter;this.view.focusLast(e,t)}focusFirst(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sb(e)&&e.altKey?void 0:this.focusNavigationFilter;this.view.focusFirst(e,t)}getFocus(){return this.focus.get()}getStickyScrollFocus(){var e;let t=null===(e=this.stickyScrollController)||void 0===e?void 0:e.getFocus();return void 0===t?[]:[t]}getFocusedPart(){var e;return null!==(e=this.stickyScrollController)&&void 0!==e&&e.focusedLast()?$W.StickyScroll:$W.Tree}reveal(e,t){this.model.expandTo(e);let i=this.model.getListIndex(e);if(-1!==i)if(this.stickyScrollController){let n=this.stickyScrollController.nodePositionTopBelowWidget(this.getNode(e));this.view.reveal(i,t,n)}else this.view.reveal(i,t)}getRelativeTop(e){var t,i,n;let s=this.model.getListIndex(e);if(-1===s)return null;let r=null===(t=this.stickyScrollController)||void 0===t?void 0:t.getNode(this.getNode(e));return this.view.getRelativeTop(s,null!==(i=null===r||void 0===r?void 0:r.position)&&void 0!==i?i:null===(n=this.stickyScrollController)||void 0===n?void 0:n.height)}getViewState(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.identityProvider;if(!e)throw new dW(this._user,"Can't get tree view state without an identity provider");let t=t=>e.getId(t).toString(),i=DW.empty(this.scrollTop);for(let r of this.getFocus())i.focus.add(t(r));for(let r of this.getSelection())i.selection.add(t(r));let n=this.model.getNode(),s=[n];for(;s.length>0;){let e=s.pop();e!==n&&e.collapsible&&(i.expanded[t(e.element)]=e.collapsed?0:1),qr(s,s.length,e.children)}return i}onLeftArrow(e){e.preventDefault(),e.stopPropagation();let t=this.view.getFocusedElements();if(0===t.length)return;let i=t[0],n=this.model.getNodeLocation(i);if(!this.model.setCollapsed(n,!0)){let e=this.model.getParentNodeLocation(n);if(!e)return;let t=this.model.getListIndex(e);this.view.reveal(t),this.view.setFocus([t])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();let t=this.view.getFocusedElements();if(0===t.length)return;let i=t[0],n=this.model.getNodeLocation(i);if(!this.model.setCollapsed(n,!1)){if(!i.children.some(e=>e.visible))return;let[e]=this.view.getFocus(),t=e+1;this.view.reveal(t),this.view.setFocus([t])}}onSpace(e){e.preventDefault(),e.stopPropagation();let t=this.view.getFocusedElements();if(0===t.length)return;let i=t[0],n=this.model.getNodeLocation(i),s=e.browserEvent.altKey;this.model.setCollapsed(n,void 0,s)}setupModel(e){this.modelDisposables.clear(),this.modelDisposables.add(e.onDidSpliceRenderedNodes(e=>{let{start:t,deleteCount:i,elements:n}=e;return this.view.splice(t,i,n)}));let t=_o.forEach(e.onDidSpliceModel,e=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(e),this.selection.onDidModelSplice(e)})},this.modelDisposables);t(()=>null,null,this.modelDisposables);let i=this.modelDisposables.add(new Ro),n=this.modelDisposables.add(new Sl(0));this.modelDisposables.add(_o.any(t,this.focus.onDidChange,this.selection.onDidChange)(()=>{n.trigger(()=>{let e=new Set;for(let t of this.focus.getNodes())e.add(t);for(let t of this.selection.getNodes())e.add(t);i.fire([...e.values()])})})),this.onDidChangeActiveNodesRelay.input=i.event,this.onDidChangeModelRelay.input=_o.signal(e.onDidSpliceModel),this.onDidChangeCollapseStateRelay.input=e.onDidChangeCollapseState,this.onDidChangeRenderNodeCountRelay.input=e.onDidChangeRenderNodeCount,this.onDidSpliceModelRelay.input=e.onDidSpliceModel}navigate(e){return new tV(this.view,this.model,e)}delegateScrollFromMouseWheelEvent(e){this.view.delegateScrollFromMouseWheelEvent(e)}dispose(){var e;po(this.disposables),null!==(e=this.stickyScrollController)&&void 0!==e&&e.dispose(),this.view.dispose(),this.modelDisposables.dispose()}},tV=class{constructor(e,t,i){this.view=e,this.model=t,this.index=i?this.model.getListIndex(i):-1}current(){return this.index<0||this.index>=this.view.length?null:this.view.element(this.index).element}previous(){return this.index--,this.current()}next(){return this.index++,this.current()}first(){return this.index=0,this.current()}last(){return this.index=this.view.length-1,this.current()}},iV=new Jo(()=>{let e=aP.Collator(void 0,{numeric:!0,sensitivity:"base"}).value;return{collator:e,collatorIsNumeric:e.resolvedOptions().numeric}});function nV(e,t,i){let n=e.toLowerCase(),s=t.toLowerCase(),r=function(e,t,i){let n=e.toLowerCase(),s=t.toLowerCase(),r=n.startsWith(i),o=s.startsWith(i);if(r!==o)return r?-1:1;if(r&&o){if(n.length<s.length)return-1;if(n.length>s.length)return 1}return 0}(e,t,i);if(r)return r;let o=n.endsWith(i);if(o!==s.endsWith(i))return o?-1:1;let a=function(e,t){let i=e||"",n=t||"",s=iV.value.collator.compare(i,n);return iV.value.collatorIsNumeric&&0===s&&i!==n?i<n?-1:1:s}(n,s);return 0===a?n.localeCompare(s):a}new Jo(()=>({collator:aP.Collator(void 0,{numeric:!0}).value})),new Jo(()=>({collator:aP.Collator(void 0,{numeric:!0,sensitivity:"accent"}).value})),wE(WL);var sV=class{get templateId(){return this.renderer.templateId}constructor(e,t){this.renderer=e,this.modelProvider=t}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:Co.None}}renderElement(e,t,i,n){var s;if(null!==(s=i.disposable)&&void 0!==s&&s.dispose(),!i.data)return;let r=this.modelProvider();if(r.isResolved(e))return this.renderer.renderElement(r.get(e),e,i.data,n);let o=new Qo,a=r.resolve(e,o.token);i.disposable={dispose:()=>o.cancel()},this.renderer.renderPlaceholder(e,i.data),a.then(t=>this.renderer.renderElement(t,e,i.data,n))}disposeTemplate(e){e.disposable&&(e.disposable=void e.disposable.dispose()),e.data&&(e.data=void this.renderer.disposeTemplate(e.data))}},rV=class{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){let t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}};var oV=class{constructor(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.modelDisposables=new bo;let o=()=>this.model;this.list=new LA(e,t,i,n.map(e=>new sV(e,o)),function(e,t){return(0,r.A)((0,r.A)({},t),{},{accessibilityProvider:t.accessibilityProvider&&new rV(e,t.accessibilityProvider)})}(o,s))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}isDOMFocused(){return cb(this.getHTMLElement())}domFocus(){this.list.domFocus()}get onDidFocus(){return this.list.onDidFocus}get onDidBlur(){return this.list.onDidBlur}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseClick(){return _o.map(this.list.onMouseClick,e=>{let{element:t,index:i,browserEvent:n}=e;return{element:void 0===t?void 0:this._model.get(t),index:i,browserEvent:n}})}get onMouseDblClick(){return _o.map(this.list.onMouseDblClick,e=>{let{element:t,index:i,browserEvent:n}=e;return{element:void 0===t?void 0:this._model.get(t),index:i,browserEvent:n}})}get onTap(){return _o.map(this.list.onTap,e=>{let{element:t,index:i,browserEvent:n}=e;return{element:void 0===t?void 0:this._model.get(t),index:i,browserEvent:n}})}get onPointer(){return _o.map(this.list.onPointer,e=>{let{element:t,index:i,browserEvent:n}=e;return{element:void 0===t?void 0:this._model.get(t),index:i,browserEvent:n}})}get onDidChangeFocus(){return _o.map(this.list.onDidChangeFocus,e=>{let{elements:t,indexes:i,browserEvent:n}=e;return{elements:t.map(e=>this._model.get(e)),indexes:i,browserEvent:n}})}get onDidChangeSelection(){return _o.map(this.list.onDidChangeSelection,e=>{let{elements:t,indexes:i,browserEvent:n}=e;return{elements:t.map(e=>this._model.get(e)),indexes:i,browserEvent:n}})}get onContextMenu(){return _o.map(this.list.onContextMenu,e=>{let{element:t,index:i,anchor:n,browserEvent:s}=e;return void 0===t?{element:t,index:i,anchor:n,browserEvent:s}:{element:this._model.get(t),index:i,anchor:n,browserEvent:s}})}get model(){return this._model}set model(e){this.modelDisposables.clear(),this._model=e,this.list.splice(0,this.list.length,Ur(e.length)),this.modelDisposables.add(e.onDidIncrementLength(e=>this.list.splice(this.list.length,0,Ur(this.list.length,e))))}get length(){return this.list.length}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollLeft(){return this.list.scrollLeft}set scrollLeft(e){this.list.scrollLeft=e}setAnchor(e){this.list.setAnchor(e)}getAnchor(){return this.list.getAnchor()}setFocus(e){this.list.setFocus(e)}focusNext(e,t){this.list.focusNext(e,t)}focusPrevious(e,t){this.list.focusPrevious(e,t)}focusNextPage(){return this.list.focusNextPage()}focusPreviousPage(){return this.list.focusPreviousPage()}focusLast(){this.list.focusLast()}focusFirst(){this.list.focusFirst()}getFocus(){return this.list.getFocus()}setSelection(e,t){this.list.setSelection(e,t)}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}layout(e,t){this.list.layout(e,t)}triggerTypeNavigation(){this.list.triggerTypeNavigation()}reveal(e,t){this.list.reveal(e,t)}style(e){this.list.style(e)}dispose(){this.list.dispose(),this.modelDisposables.dispose()}};wE({});var aV,lV,hV;!function(e){e.North="north",e.South="south",e.East="east",e.West="west"}(aV||(aV={})),function(e){e[e.VERTICAL=0]="VERTICAL",e[e.HORIZONTAL=1]="HORIZONTAL"}(lV||(lV={})),function(e){e[e.Disabled=0]="Disabled",e[e.AtMinimum=1]="AtMinimum",e[e.AtMaximum=2]="AtMaximum",e[e.Enabled=3]="Enabled"}(hV||(hV={}));var dV=new Ro,cV=new Ro,uV=class{constructor(e){this.el=e,this.disposables=new bo}get onPointerMove(){return this.disposables.add(new ML(L_(this.el),"mousemove")).event}get onPointerUp(){return this.disposables.add(new ML(L_(this.el),"mouseup")).event}dispose(){this.disposables.dispose()}};uV.__decorator=ki([BL],uV.prototype,"onPointerMove",null),uV.__decorator=ki([BL],uV.prototype,"onPointerUp",null);var gV=class{get onPointerMove(){return this.disposables.add(new ML(this.el,TE.Change)).event}get onPointerUp(){return this.disposables.add(new ML(this.el,TE.End)).event}constructor(e){this.el=e,this.disposables=new bo}dispose(){this.disposables.dispose()}};gV.__decorator=ki([BL],gV.prototype,"onPointerMove",null),gV.__decorator=ki([BL],gV.prototype,"onPointerUp",null);var pV=class{get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}constructor(e){this.factory=e}dispose(){}};pV.__decorator=ki([BL],pV.prototype,"onPointerMove",null),pV.__decorator=ki([BL],pV.prototype,"onPointerUp",null);var fV="pointer-events-disabled",mV=class e extends Co{get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===hV.Disabled),this.el.classList.toggle("minimum",e===hV.AtMinimum),this.el.classList.toggle("maximum",e===hV.AtMaximum),this._state=e,this.onDidEnablementChange.fire(e))}get onDidStart(){return this._onDidStart.event}get onDidChange(){return this._onDidChange.event}get onDidReset(){return this._onDidReset.event}get onDidEnd(){return this._onDidEnd.event}set orthogonalStartSash(t){if(this._orthogonalStartSash!==t){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),t){let i=i=>{this.orthogonalStartDragHandleDisposables.clear(),i!==hV.Disabled&&(this._orthogonalStartDragHandle=xb(this.el,Mb(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(vo(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(W_(this._orthogonalStartDragHandle,"mouseenter",()=>e.onMouseEnter(t))),this.orthogonalStartDragHandleDisposables.add(W_(this._orthogonalStartDragHandle,"mouseleave",()=>e.onMouseLeave(t))))};this.orthogonalStartSashDisposables.add(t.onDidEnablementChange.event(i,this)),i(t.state)}this._orthogonalStartSash=t}}set orthogonalEndSash(t){if(this._orthogonalEndSash!==t){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),t){let i=i=>{this.orthogonalEndDragHandleDisposables.clear(),i!==hV.Disabled&&(this._orthogonalEndDragHandle=xb(this.el,Mb(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(vo(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(W_(this._orthogonalEndDragHandle,"mouseenter",()=>e.onMouseEnter(t))),this.orthogonalEndDragHandleDisposables.add(W_(this._orthogonalEndDragHandle,"mouseleave",()=>e.onMouseLeave(t))))};this.orthogonalEndSashDisposables.add(t.onDidEnablementChange.event(i,this)),i(t.state)}this._orthogonalEndSash=t}}constructor(t,i,n){let s;super(),this.hoverDelay=300,this.hoverDelayer=this._register(new Sl(this.hoverDelay)),this._state=hV.Enabled,this.onDidEnablementChange=this._register(new Ro),this._onDidStart=this._register(new Ro),this._onDidChange=this._register(new Ro),this._onDidReset=this._register(new Ro),this._onDidEnd=this._register(new Ro),this.orthogonalStartSashDisposables=this._register(new bo),this.orthogonalStartDragHandleDisposables=this._register(new bo),this.orthogonalEndSashDisposables=this._register(new bo),this.orthogonalEndDragHandleDisposables=this._register(new bo),this.linkedSash=void 0,this.el=xb(t,Mb(".monaco-sash")),n.orthogonalEdge&&this.el.classList.add("orthogonal-edge-".concat(n.orthogonalEdge)),qn&&this.el.classList.add("mac"),this._register(W_(this.el,"mousedown",e=>this.onPointerStart(e,new uV(t)))),this._register(W_(this.el,"dblclick",e=>this.onPointerDoublePress(e))),this._register(W_(this.el,"mouseenter",()=>e.onMouseEnter(this))),this._register(W_(this.el,"mouseleave",()=>e.onMouseLeave(this))),this._register(LE.addTarget(this.el)),this._register(W_(this.el,TE.Start,e=>this.onPointerStart(e,new gV(this.el)))),this._register(W_(this.el,TE.Tap,e=>{if(s)return clearTimeout(s),s=void 0,void this.onPointerDoublePress(e);clearTimeout(s),s=setTimeout(()=>s=void 0,250)})),"number"==typeof n.size?(this.size=n.size,n.orientation===lV.VERTICAL?this.el.style.width="".concat(this.size,"px"):this.el.style.height="".concat(this.size,"px")):(this.size=4,this._register(dV.event(e=>{this.size=e,this.layout()}))),this._register(cV.event(e=>this.hoverDelay=e)),this.layoutProvider=i,this.orthogonalStartSash=n.orthogonalStartSash,this.orthogonalEndSash=n.orthogonalEndSash,this.orientation=n.orientation||lV.VERTICAL,this.orientation===lV.HORIZONTAL?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",false),this.layout()}onPointerStart(e,t){Db(e);let i=!1;if(!e.__orthogonalSashEvent){let n=this.getOrthogonalSash(e);n&&(i=!0,e.__orthogonalSashEvent=!0,n.onPointerStart(e,new pV(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new pV(t))),!this.state)return;let n=this.el.getRootNode().querySelectorAll("iframe");for(let c of n)c.classList.add(fV);let s=e.pageX,r=e.pageY,o=e.altKey,a={startX:s,currentX:s,startY:r,currentY:r,altKey:o};this.el.classList.add("active"),this._onDidStart.fire(a);let l=nC(this.el),h=()=>{let e="";e=i?"all-scroll":this.orientation===lV.HORIZONTAL?this.state===hV.AtMinimum?"s-resize":this.state===hV.AtMaximum?"n-resize":qn?"row-resize":"ns-resize":this.state===hV.AtMinimum?"e-resize":this.state===hV.AtMaximum?"w-resize":qn?"col-resize":"ew-resize",l.textContent="* { cursor: ".concat(e," !important; }")},d=new bo;h(),i||this.onDidEnablementChange.event(h,null,d),t.onPointerMove(e=>{Db(e,!1);let t={startX:s,currentX:e.pageX,startY:r,currentY:e.pageY,altKey:o};this._onDidChange.fire(t)},null,d),t.onPointerUp(e=>{Db(e,!1),l.remove(),this.el.classList.remove("active"),this._onDidEnd.fire(),d.dispose();for(let t of n)t.classList.remove(fV)},null,d),d.add(t)}onPointerDoublePress(e){let t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(t){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.el.classList.contains("active")?(t.hoverDelayer.cancel(),t.el.classList.add("hover")):t.hoverDelayer.trigger(()=>t.el.classList.add("hover"),t.hoverDelay).then(void 0,()=>{}),!i&&t.linkedSash&&e.onMouseEnter(t.linkedSash,!0)}static onMouseLeave(t){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.hoverDelayer.cancel(),t.el.classList.remove("hover"),!i&&t.linkedSash&&e.onMouseLeave(t.linkedSash,!0)}clearSashHoverState(){e.onMouseLeave(this)}layout(){if(this.orientation===lV.VERTICAL){let e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{let e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){var t;let i=null!==(t=e.initialTarget)&&void 0!==t?t:e.target;if(i&&bb(i)&&i.classList.contains("orthogonal-drag-handle"))return i.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}};wE({});var vV,_V={separatorBorder:Ir.transparent};!function(e){e[e.Normal=0]="Normal",e[e.Low=1]="Low",e[e.High=2]="High"}(vV||(vV={}));var bV,CV,yV=class{set size(e){this._size=e}get size(){return this._size}get cachedVisibleSize(){return this._cachedVisibleSize}get visible(){return void 0===this._cachedVisibleSize}setVisible(e,t){if(e!==this.visible){e?(this.size=D_(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize="number"==typeof t?t:this.size,this.size=0),this.container.classList.toggle("visible",e);try{var i,n;null===(i=(n=this.view).setVisible)||void 0===i||i.call(n,e)}catch(e){console.error("Splitview: Failed to set visible view"),console.error(e)}}}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){var e;return null===(e=this.view.proportionalLayout)||void 0===e||e}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}constructor(e,t,i,n){this.container=e,this.view=t,this.disposable=n,this._cachedVisibleSize=void 0,"number"==typeof i?(this._size=i,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=i.cachedVisibleSize)}layout(e,t){this.layoutContainer(e);try{this.view.layout(this.size,e,t)}catch(e){console.error("Splitview: Failed to layout view"),console.error(e)}}dispose(){this.disposable.dispose()}},wV=class extends yV{layoutContainer(e){this.container.style.top="".concat(e,"px"),this.container.style.height="".concat(this.size,"px")}},SV=class extends yV{layoutContainer(e){this.container.style.left="".concat(e,"px"),this.container.style.width="".concat(this.size,"px")}};!function(e){e[e.Idle=0]="Idle",e[e.Busy=1]="Busy"}(bV||(bV={})),function(e){e.Distribute={type:"distribute"},e.Split=function(e){return{type:"split",index:e}},e.Auto=function(e){return{type:"auto",index:e}},e.Invisible=function(e){return{type:"invisible",cachedVisibleSize:e}}}(CV||(CV={}));var kV=class extends Co{get contentSize(){return this._contentSize}get length(){return this.viewItems.length}get minimumSize(){return this.viewItems.reduce((e,t)=>e+t.minimumSize,0)}get maximumSize(){return 0===this.length?1/0:this.viewItems.reduce((e,t)=>e+t.maximumSize,0)}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(let t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(let t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}get sashes(){return this.sashItems.map(e=>e.sash)}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e){var t,i,n,s,r;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.size=0,this._contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=bV.Idle,this._onDidSashChange=this._register(new Ro),this._onDidSashReset=this._register(new Ro),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=null!==(t=o.orientation)&&void 0!==t?t:lV.VERTICAL,this.inverseAltBehavior=null!==(i=o.inverseAltBehavior)&&void 0!==i&&i,this.proportionalLayout=null===(n=o.proportionalLayout)||void 0===n||n,this.getSashOrthogonalSize=o.getSashOrthogonalSize,this.el=mb("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===lV.VERTICAL?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=xb(this.el,Mb(".sash-container")),this.viewContainer=Mb(".split-view-container"),this.scrollable=this._register(new OE({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:e=>q_(L_(this.el),e)})),this.scrollableElement=this._register(new jE(this.viewContainer,{vertical:this.orientation===lV.VERTICAL?null!==(s=o.scrollbarVisibility)&&void 0!==s?s:xE.Auto:xE.Hidden,horizontal:this.orientation===lV.HORIZONTAL?null!==(r=o.scrollbarVisibility)&&void 0!==r?r:xE.Auto:xE.Hidden},this.scrollable));let a=this._register(new ML(this.viewContainer,"scroll")).event;this._register(a(e=>{let t=this.scrollableElement.getScrollPosition(),i=Math.abs(this.viewContainer.scrollLeft-t.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,n=Math.abs(this.viewContainer.scrollTop-t.scrollTop)<=1?void 0:this.viewContainer.scrollTop;(void 0!==i||void 0!==n)&&this.scrollableElement.setScrollPosition({scrollLeft:i,scrollTop:n})})),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(e=>{e.scrollTopChanged&&(this.viewContainer.scrollTop=e.scrollTop),e.scrollLeftChanged&&(this.viewContainer.scrollLeft=e.scrollLeft)})),xb(this.el,this.scrollableElement.getDomNode()),this.style(o.styles||_V),o.descriptor&&(this.size=o.descriptor.size,o.descriptor.views.forEach((e,t)=>{let i=nn(e.visible)||e.visible?e.size:{type:"invisible",cachedVisibleSize:e.size},n=e.view;this.doAddView(n,i,t,!0)}),this._contentSize=this.viewItems.reduce((e,t)=>e+t.size,0),this.saveProportions())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.viewItems.length,n=arguments.length>3?arguments[3]:void 0;this.doAddView(e,t,i,n)}removeView(e,t){if(e<0||e>=this.viewItems.length)throw Error("Index out of bounds");if(this.state!==bV.Idle)throw Error("Cant modify splitview");this.state=bV.Busy;try{var i,n,s;"auto"===(null===(i=t)||void 0===i?void 0:i.type)&&(t=this.areViewsDistributed()?{type:"distribute"}:{type:"split",index:t.index});let r="split"===(null===(n=t)||void 0===n?void 0:n.type)?this.viewItems[t.index]:void 0,o=this.viewItems.splice(e,1)[0];if(r&&(r.size+=o.size),this.viewItems.length>=1){let t=Math.max(e-1,0);this.sashItems.splice(t,1)[0].disposable.dispose()}this.relayout(),"distribute"===(null===(s=t)||void 0===s?void 0:s.type)&&this.distributeViewSizes();let a=o.view;return o.dispose(),a}finally{this.state=bV.Idle}}removeAllViews(){if(this.state!==bV.Idle)throw Error("Cant modify splitview");this.state=bV.Busy;try{let e=this.viewItems.splice(0,this.viewItems.length);for(let i of e)i.dispose();let t=this.sashItems.splice(0,this.sashItems.length);for(let i of t)i.disposable.dispose();return this.relayout(),e.map(e=>e.view)}finally{this.state=bV.Idle}}moveView(e,t){if(this.state!==bV.Idle)throw Error("Cant modify splitview");let i=this.getViewCachedVisibleSize(e),n=void 0===i?this.getViewSize(e):CV.Invisible(i),s=this.removeView(e);this.addView(s,n,t)}swapViews(e,t){if(this.state!==bV.Idle)throw Error("Cant modify splitview");if(e>t)return this.swapViews(t,e);let i=this.getViewSize(e),n=this.getViewSize(t),s=this.removeView(t),r=this.removeView(e);this.addView(s,i,e),this.addView(r,n,t)}isViewVisible(e){if(e<0||e>=this.viewItems.length)throw Error("Index out of bounds");return this.viewItems[e].visible}setViewVisible(e,t){if(e<0||e>=this.viewItems.length)throw Error("Index out of bounds");this.viewItems[e].setVisible(t),this.distributeEmptySpace(e),this.layoutViews(),this.saveProportions()}getViewCachedVisibleSize(e){if(e<0||e>=this.viewItems.length)throw Error("Index out of bounds");return this.viewItems[e].cachedVisibleSize}layout(e,t){let i=Math.max(this.size,this._contentSize);if(this.size=e,this.layoutContext=t,this.proportions){let t=0;for(let i=0;i<this.viewItems.length;i++){let n=this.viewItems[i],s=this.proportions[i];"number"==typeof s?t+=s:e-=n.size}for(let i=0;i<this.viewItems.length;i++){let n=this.viewItems[i],s=this.proportions[i];"number"==typeof s&&t>0&&(n.size=D_(Math.round(s*e/t),n.minimumSize,n.maximumSize))}}else{let t=Ur(this.viewItems.length),n=t.filter(e=>this.viewItems[e].priority===vV.Low),s=t.filter(e=>this.viewItems[e].priority===vV.High);this.resize(this.viewItems.length-1,e-i,void 0,n,s)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this._contentSize>0&&(this.proportions=this.viewItems.map(e=>e.proportionalLayout&&e.visible?e.size/this._contentSize:void 0))}onSashStart(e){let{sash:t,start:i,alt:n}=e;for(let a of this.viewItems)a.enabled=!1;let s=this.sashItems.findIndex(e=>e.sash===t),r=fo(W_(db(this.el),"keydown",e=>o(this.sashDragState.current,e.altKey)),W_(db(this.el),"keyup",()=>o(this.sashDragState.current,!1))),o=(e,t)=>{let i,n,o=this.viewItems.map(e=>e.size),a=-1/0,l=1/0;if(this.inverseAltBehavior&&(t=!t),t)if(s===this.sashItems.length-1){let e=this.viewItems[s];a=(e.minimumSize-e.size)/2,l=(e.maximumSize-e.size)/2}else{let e=this.viewItems[s+1];a=(e.size-e.maximumSize)/2,l=(e.size-e.minimumSize)/2}if(!t){let e=Ur(s,-1),t=Ur(s+1,this.viewItems.length),r=e.reduce((e,t)=>e+(this.viewItems[t].minimumSize-o[t]),0),a=e.reduce((e,t)=>e+(this.viewItems[t].viewMaximumSize-o[t]),0),l=0===t.length?1/0:t.reduce((e,t)=>e+(o[t]-this.viewItems[t].minimumSize),0),h=0===t.length?-1/0:t.reduce((e,t)=>e+(o[t]-this.viewItems[t].viewMaximumSize),0),d=Math.max(r,h),c=Math.min(l,a),u=this.findFirstSnapIndex(e),g=this.findFirstSnapIndex(t);if("number"==typeof u){let e=this.viewItems[u],t=Math.floor(e.viewMinimumSize/2);i={index:u,limitDelta:e.visible?d-t:d+t,size:e.size}}if("number"==typeof g){let e=this.viewItems[g],t=Math.floor(e.viewMinimumSize/2);n={index:g,limitDelta:e.visible?c+t:c-t,size:e.size}}}this.sashDragState={start:e,current:e,index:s,sizes:o,minDelta:a,maxDelta:l,alt:t,snapBefore:i,snapAfter:n,disposable:r}};o(i,n)}onSashChange(e){let{current:t}=e,{index:i,start:n,sizes:s,alt:r,minDelta:o,maxDelta:a,snapBefore:l,snapAfter:h}=this.sashDragState;this.sashDragState.current=t;let d=t-n,c=this.resize(i,d,s,void 0,void 0,o,a,l,h);if(r){let e=i===this.sashItems.length-1,t=this.viewItems.map(e=>e.size),n=e?i:i+1,s=this.viewItems[n],r=s.size-s.maximumSize,o=s.size-s.minimumSize,a=e?i-1:i+1;this.resize(a,-c,t,void 0,void 0,r,o)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(let t of this.viewItems)t.enabled=!0}onViewChange(e,t){let i=this.viewItems.indexOf(e);i<0||i>=this.viewItems.length||(t=D_(t="number"==typeof t?t:e.size,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&i>0?(this.resize(i-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([i],void 0)))}resizeView(e,t){if(!(e<0||e>=this.viewItems.length)){if(this.state!==bV.Idle)throw Error("Cant modify splitview");this.state=bV.Busy;try{let i=Ur(this.viewItems.length).filter(t=>t!==e),n=[...i.filter(e=>this.viewItems[e].priority===vV.Low),e],s=i.filter(e=>this.viewItems[e].priority===vV.High),r=this.viewItems[e];t=D_(t=Math.round(t),r.minimumSize,Math.min(r.maximumSize,this.size)),r.size=t,this.relayout(n,s)}finally{this.state=bV.Idle}}}isViewExpanded(e){if(e<0||e>=this.viewItems.length)return!1;for(let t of this.viewItems)if(t!==this.viewItems[e]&&t.size>t.minimumSize)return!1;return!0}distributeViewSizes(){let e=[],t=0;for(let o of this.viewItems)o.maximumSize-o.minimumSize>0&&(e.push(o),t+=o.size);let i=Math.floor(t/e.length);for(let o of e)o.size=D_(i,o.minimumSize,o.maximumSize);let n=Ur(this.viewItems.length),s=n.filter(e=>this.viewItems[e].priority===vV.Low),r=n.filter(e=>this.viewItems[e].priority===vV.High);this.relayout(s,r)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.viewItems.length,n=arguments.length>3?arguments[3]:void 0;if(this.state!==bV.Idle)throw Error("Cant modify splitview");this.state=bV.Busy;try{let s=Mb(".split-view-view");i===this.viewItems.length?this.viewContainer.appendChild(s):this.viewContainer.insertBefore(s,this.viewContainer.children.item(i));let o,a=fo(e.onDidChange(e=>this.onViewChange(h,e)),vo(()=>s.remove()));"number"==typeof t?o=t:("auto"===t.type&&(t=this.areViewsDistributed()?{type:"distribute"}:{type:"split",index:t.index}),o="split"===t.type?this.getViewSize(t.index)/2:"invisible"===t.type?{cachedVisibleSize:t.cachedVisibleSize}:e.minimumSize);let l,h=this.orientation===lV.VERTICAL?new wV(s,e,o,a):new SV(s,e,o,a);if(this.viewItems.splice(i,0,h),this.viewItems.length>1){let e={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},t=this.orientation===lV.VERTICAL?new mV(this.sashContainer,{getHorizontalSashTop:e=>this.getSashPosition(e),getHorizontalSashWidth:this.getSashOrthogonalSize},(0,r.A)((0,r.A)({},e),{},{orientation:lV.HORIZONTAL})):new mV(this.sashContainer,{getVerticalSashLeft:e=>this.getSashPosition(e),getVerticalSashHeight:this.getSashOrthogonalSize},(0,r.A)((0,r.A)({},e),{},{orientation:lV.VERTICAL})),n=this.orientation===lV.VERTICAL?e=>({sash:t,start:e.startY,current:e.currentY,alt:e.altKey}):e=>({sash:t,start:e.startX,current:e.currentX,alt:e.altKey}),s={sash:t,disposable:fo(_o.map(t.onDidStart,n)(this.onSashStart,this),_o.map(t.onDidChange,n)(this.onSashChange,this),_o.map(t.onDidEnd,()=>this.sashItems.findIndex(e=>e.sash===t))(this.onSashEnd,this),t.onDidReset(()=>{let e=this.sashItems.findIndex(e=>e.sash===t),i=Ur(e,-1),n=Ur(e+1,this.viewItems.length),s=this.findFirstSnapIndex(i),r=this.findFirstSnapIndex(n);"number"==typeof s&&!this.viewItems[s].visible||"number"==typeof r&&!this.viewItems[r].visible||this._onDidSashReset.fire(e)}),t)};this.sashItems.splice(i-1,0,s)}s.appendChild(e.element),"number"!=typeof t&&"split"===t.type&&(l=[t.index]),n||this.relayout([i],l),!n&&"number"!=typeof t&&"distribute"===t.type&&this.distributeViewSizes()}finally{this.state=bV.Idle}}relayout(e,t){let i=this.viewItems.reduce((e,t)=>e+t.size,0);this.resize(this.viewItems.length-1,this.size-i,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.viewItems.map(e=>e.size),n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1/0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1/0,a=arguments.length>7?arguments[7]:void 0,l=arguments.length>8?arguments[8]:void 0;if(e<0||e>=this.viewItems.length)return 0;let h=Ur(e,-1),d=Ur(e+1,this.viewItems.length);if(s)for(let w of s)Vr(h,w),Vr(d,w);if(n)for(let w of n)zr(h,w),zr(d,w);let c=h.map(e=>this.viewItems[e]),u=h.map(e=>i[e]),g=d.map(e=>this.viewItems[e]),p=d.map(e=>i[e]),f=h.reduce((e,t)=>e+(this.viewItems[t].minimumSize-i[t]),0),m=h.reduce((e,t)=>e+(this.viewItems[t].maximumSize-i[t]),0),v=0===d.length?1/0:d.reduce((e,t)=>e+(i[t]-this.viewItems[t].minimumSize),0),_=0===d.length?-1/0:d.reduce((e,t)=>e+(i[t]-this.viewItems[t].maximumSize),0),b=Math.max(f,_,r),C=Math.min(v,m,o),y=!1;if(a){let e=this.viewItems[a.index],i=t>=a.limitDelta;y=i!==e.visible,e.setVisible(i,a.size)}if(!y&&l){let e=this.viewItems[l.index],i=t<l.limitDelta;y=i!==e.visible,e.setVisible(i,l.size)}if(y)return this.resize(e,t,i,n,s,r,o);for(let w=0,S=t=D_(t,b,C);w<c.length;w++){let e=c[w],t=D_(u[w]+S,e.minimumSize,e.maximumSize);S-=t-u[w],e.size=t}for(let w=0,S=t;w<g.length;w++){let e=g[w],t=D_(p[w]-S,e.minimumSize,e.maximumSize);S+=t-p[w],e.size=t}return t}distributeEmptySpace(e){let t=this.viewItems.reduce((e,t)=>e+t.size,0),i=this.size-t,n=Ur(this.viewItems.length-1,-1),s=n.filter(e=>this.viewItems[e].priority===vV.Low),r=n.filter(e=>this.viewItems[e].priority===vV.High);for(let o of r)Vr(n,o);for(let o of s)zr(n,o);"number"==typeof e&&zr(n,e);for(let o=0;0!==i&&o<n.length;o++){let e=this.viewItems[n[o]],t=D_(e.size+i,e.minimumSize,e.maximumSize);i-=t-e.size,e.size=t}}layoutViews(){this._contentSize=this.viewItems.reduce((e,t)=>e+t.size,0);let e=0;for(let t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(e=>e.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===lV.VERTICAL?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this._contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this._contentSize})}updateSashEnablement(){let e=!1,t=this.viewItems.map(t=>e=t.size-t.minimumSize>0||e);e=!1;let i=this.viewItems.map(t=>e=t.maximumSize-t.size>0||e),n=[...this.viewItems].reverse();e=!1;let s=n.map(t=>e=t.size-t.minimumSize>0||e).reverse();e=!1;let r=n.map(t=>e=t.maximumSize-t.size>0||e).reverse(),o=0;for(let a=0;a<this.sashItems.length;a++){let{sash:e}=this.sashItems[a];o+=this.viewItems[a].size;let n=!(t[a]&&r[a+1]),l=!(i[a]&&s[a+1]);if(n&&l){let i=Ur(a,-1),n=Ur(a+1,this.viewItems.length),r=this.findFirstSnapIndex(i),l=this.findFirstSnapIndex(n),h="number"==typeof r&&!this.viewItems[r].visible,d="number"==typeof l&&!this.viewItems[l].visible;h&&s[a]&&(o>0||this.startSnappingEnabled)?e.state=hV.AtMinimum:d&&t[a]&&(o<this._contentSize||this.endSnappingEnabled)?e.state=hV.AtMaximum:e.state=hV.Disabled}else e.state=n&&!l?hV.AtMinimum:!n&&l?hV.AtMaximum:hV.Enabled}}getSashPosition(e){let t=0;for(let i=0;i<this.sashItems.length;i++)if(t+=this.viewItems[i].size,this.sashItems[i].sash===e)return t;return 0}findFirstSnapIndex(e){for(let t of e){let e=this.viewItems[t];if(e.visible&&e.snap)return t}for(let t of e){let e=this.viewItems[t];if(e.visible&&e.maximumSize-e.minimumSize>0)return;if(!e.visible&&e.snap)return t}}areViewsDistributed(){let e,t;for(let i of this.viewItems)if(e=void 0===e?i.size:Math.min(e,i.size),t=void 0===t?i.size:Math.max(t,i.size),t-e>2)return!1;return!0}dispose(){var e;null!==(e=this.sashDragState)&&void 0!==e&&e.disposable.dispose(),po(this.viewItems),this.viewItems=[],this.sashItems.forEach(e=>e.disposable.dispose()),this.sashItems=[],super.dispose()}};wE({});var EV=(Yt=class e{constructor(t,i,n){this.columns=t,this.getColumnSize=n,this.templateId=e.TemplateId,this.renderedTemplates=new Set;let s=new Map(i.map(e=>[e.templateId,e]));this.renderers=[];for(let e of t){let t=s.get(e.templateId);if(!t)throw Error("Table cell renderer for template id ".concat(e.templateId," not found."));this.renderers.push(t)}}renderTemplate(e){let t=xb(e,Mb(".monaco-table-tr")),i=[],n=[];for(let r=0;r<this.columns.length;r++){let e=this.renderers[r],s=xb(t,Mb(".monaco-table-td",{"data-col-index":r}));s.style.width="".concat(this.getColumnSize(r),"px"),i.push(s),n.push(e.renderTemplate(s))}let s={container:e,cellContainers:i,cellTemplateData:n};return this.renderedTemplates.add(s),s}renderElement(e,t,i,n){for(let s=0;s<this.columns.length;s++){let r=this.columns[s].project(e);this.renderers[s].renderElement(r,t,i.cellTemplateData[s],n)}}disposeElement(e,t,i,n){for(let s=0;s<this.columns.length;s++){let r=this.renderers[s];if(r.disposeElement){let o=this.columns[s].project(e);r.disposeElement(o,t,i.cellTemplateData[s],n)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);U_(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(let{cellContainers:i}of this.renderedTemplates)i[e].style.width="".concat(t,"px")}},{_:Yt.TemplateId="row"},Yt);var DV=class extends Co{get minimumSize(){var e;return null!==(e=this.column.minimumWidth)&&void 0!==e?e:120}get maximumSize(){var e;return null!==(e=this.column.maximumWidth)&&void 0!==e?e:1/0}get onDidChange(){var e;return null!==(e=this.column.onDidChangeWidthConstraints)&&void 0!==e?e:_o.None}constructor(e,t){super(),this.column=e,this.index=t,this._onDidLayout=new Ro,this.onDidLayout=this._onDidLayout.event,this.element=Mb(".monaco-table-th",{"data-col-index":t},e.label),e.tooltip&&this._register(EN().setupManagedHover(RL("mouse"),this.element,e.tooltip))}layout(e){this._onDidLayout.fire([this.index,e])}},TV=(Qt=class e{get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onDidScroll(){return this.list.onDidScroll}get onMouseClick(){return this.list.onMouseClick}get onMouseDblClick(){return this.list.onMouseDblClick}get onMouseMiddleClick(){return this.list.onMouseMiddleClick}get onPointer(){return this.list.onPointer}get onMouseUp(){return this.list.onMouseUp}get onMouseDown(){return this.list.onMouseDown}get onMouseOver(){return this.list.onMouseOver}get onMouseMove(){return this.list.onMouseMove}get onMouseOut(){return this.list.onMouseOut}get onTouchStart(){return this.list.onTouchStart}get onTap(){return this.list.onTap}get onContextMenu(){return this.list.onContextMenu}get onDidFocus(){return this.list.onDidFocus}get onDidBlur(){return this.list.onDidBlur}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollLeft(){return this.list.scrollLeft}set scrollLeft(e){this.list.scrollLeft=e}get scrollHeight(){return this.list.scrollHeight}get renderHeight(){return this.list.renderHeight}get onDidDispose(){return this.list.onDidDispose}constructor(t,i,n,s,r,o){this.virtualDelegate=n,this.columns=s,this.domId="table_id_".concat(++e.InstanceCount),this.disposables=new bo,this.cachedWidth=0,this.cachedHeight=0,this.domNode=xb(i,Mb(".monaco-table.".concat(this.domId)));let a=s.map((e,t)=>this.disposables.add(new DV(e,t))),l={size:a.reduce((e,t)=>e+t.column.weight,0),views:a.map(e=>({size:e.column.weight,view:e}))};this.splitview=this.disposables.add(new kV(this.domNode,{orientation:lV.HORIZONTAL,scrollbarVisibility:xE.Hidden,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l})),this.splitview.el.style.height="".concat(n.headerRowHeight,"px"),this.splitview.el.style.lineHeight="".concat(n.headerRowHeight,"px");let h=new EV(s,r,e=>this.splitview.getViewSize(e));this.list=this.disposables.add(new LA(t,this.domNode,function(e){return{getHeight:t=>e.getHeight(t),getTemplateId:()=>EV.TemplateId}}(n),[h],o)),_o.any(...a.map(e=>e.onDidLayout))(e=>{let[t,i]=e;return h.layoutColumn(t,i)},null,this.disposables),this.splitview.onDidSashReset(e=>{let t=s.reduce((e,t)=>e+t.weight,0),i=s[e].weight/t*this.cachedWidth;this.splitview.resizeView(e,i)},null,this.disposables),this.styleElement=nC(this.domNode),this.style(SA)}getColumnLabels(){return this.columns.map(e=>e.label)}resizeColumn(e,t){let i=Math.round(t/100*this.cachedWidth);this.splitview.resizeView(e,i)}updateOptions(e){this.list.updateOptions(e)}splice(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.list.splice(e,t,i)}rerender(){this.list.rerender()}row(e){return this.list.element(e)}indexOf(e){return this.list.indexOf(e)}get length(){return this.list.length}getHTMLElement(){return this.domNode}layout(e,t){null!==e&&void 0!==e||(e=ib(this.domNode)),null!==t&&void 0!==t||(t=tb(this.domNode)),this.cachedWidth=t,this.cachedHeight=e,this.splitview.layout(t);let i=e-this.virtualDelegate.headerRowHeight;this.list.getHTMLElement().style.height="".concat(i,"px"),this.list.layout(i,t)}triggerTypeNavigation(){this.list.triggerTypeNavigation()}style(e){let t=[];t.push(".monaco-table.".concat(this.domId," > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\ttop: ").concat(this.virtualDelegate.headerRowHeight+1,"px;\n\t\t\theight: calc(100% - ").concat(this.virtualDelegate.headerRowHeight,"px);\n\t\t}")),this.styleElement.textContent=t.join("\n"),this.list.style(e)}domFocus(){this.list.domFocus()}setAnchor(e){this.list.setAnchor(e)}getAnchor(){return this.list.getAnchor()}getSelectedElements(){return this.list.getSelectedElements()}setSelection(e,t){this.list.setSelection(e,t)}getSelection(){return this.list.getSelection()}setFocus(e,t){this.list.setFocus(e,t)}focusNext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;this.list.focusNext(e,t,i)}focusPrevious(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;this.list.focusPrevious(e,t,i)}focusNextPage(e){return this.list.focusNextPage(e)}focusPreviousPage(e){return this.list.focusPreviousPage(e)}focusFirst(e){this.list.focusFirst(e)}focusLast(e){this.list.focusLast(e)}getFocus(){return this.list.getFocus()}getFocusedElements(){return this.list.getFocusedElements()}getRelativeTop(e){return this.list.getRelativeTop(e)}reveal(e,t){this.list.reveal(e,t)}dispose(){this.disposables.dispose()}},{_:Qt.InstanceCount=0},Qt),IV=class{get size(){return this.nodes.size}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new CW(e,null,t),this.onDidSpliceModel=this.model.onDidSpliceModel,this.onDidSpliceRenderedNodes=this.model.onDidSpliceRenderedNodes,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,t.sorter&&(this.sorter={compare:(e,i)=>t.sorter.compare(e.element,i.element)}),this.identityProvider=t.identityProvider}setChildren(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oo.empty(),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.getElementLocation(e);this._setChildren(n,this.preserveCollapseState(t),i)}_setChildren(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oo.empty(),i=arguments.length>2?arguments[2]:void 0,n=new Set,s=new Set;this.model.splice([...e,0],Number.MAX_VALUE,t,(0,r.A)((0,r.A)({},i),{},{onDidCreateNode:e=>{var t;if(null===e.element)return;let r=e;if(n.add(r.element),this.nodes.set(r.element,r),this.identityProvider){let e=this.identityProvider.getId(r.element).toString();s.add(e),this.nodesByIdentity.set(e,r)}null===(t=i.onDidCreateNode)||void 0===t||t.call(i,r)},onDidDeleteNode:e=>{var t;if(null===e.element)return;let r=e;if(n.has(r.element)||this.nodes.delete(r.element),this.identityProvider){let e=this.identityProvider.getId(r.element).toString();s.has(e)||this.nodesByIdentity.delete(e)}null===(t=i.onDidDeleteNode)||void 0===t||t.call(i,r)}}))}preserveCollapseState(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oo.empty();return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),oo.map(e,e=>{let t=this.nodes.get(e.element);if(!t&&this.identityProvider){let i=this.identityProvider.getId(e.element).toString();t=this.nodesByIdentity.get(i)}if(!t){let t;return t=void 0===e.collapsed?void 0:e.collapsed===sW.Collapsed||e.collapsed===sW.PreserveOrCollapsed||e.collapsed!==sW.Expanded&&e.collapsed!==sW.PreserveOrExpanded&&!!e.collapsed,(0,r.A)((0,r.A)({},e),{},{children:this.preserveCollapseState(e.children),collapsed:t})}let i,n="boolean"==typeof e.collapsible?e.collapsible:t.collapsible;return i=void 0===e.collapsed||e.collapsed===sW.PreserveOrCollapsed||e.collapsed===sW.PreserveOrExpanded?t.collapsed:e.collapsed===sW.Collapsed||e.collapsed!==sW.Expanded&&!!e.collapsed,(0,r.A)((0,r.A)({},e),{},{collapsible:n,collapsed:i,children:this.preserveCollapseState(e.children)})})}rerender(e){let t=this.getElementLocation(e);this.model.rerender(t)}resort(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.sorter)return;let i=this.getElementLocation(e),n=this.model.getNode(i);this._setChildren(i,this.resortChildren(n,t),{})}resortChildren(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=[...e.children];return(t||i)&&(n=n.sort(this.sorter.compare.bind(this.sorter))),oo.map(n,e=>({element:e.element,collapsible:e.collapsible,collapsed:e.collapsed,children:this.resortChildren(e,t,!1)}))}getFirstElementChild(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}getLastElementAncestor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.getElementLocation(e);return this.model.getLastElementAncestor(t)}has(e){return this.nodes.has(e)}getListIndex(e){let t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){let t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){let t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){let i=this.getElementLocation(e);return this.model.setCollapsible(i,t)}isCollapsed(e){let t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){let n=this.getElementLocation(e);return this.model.setCollapsed(n,t,i)}expandTo(e){let t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===e)return this.model.getNode(this.model.rootRef);let t=this.nodes.get(e);if(!t)throw new dW(this.user,"Tree element not found: ".concat(e));return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(null===e)throw new dW(this.user,"Invalid getParentNodeLocation call");let t=this.nodes.get(e);if(!t)throw new dW(this.user,"Tree element not found: ".concat(e));let i=this.model.getNodeLocation(t),n=this.model.getParentNodeLocation(i);return this.model.getNode(n).element}getElementLocation(e){if(null===e)return[];let t=this.nodes.get(e);if(!t)throw new dW(this.user,"Tree element not found: ".concat(e));return this.model.getNodeLocation(t)}};function xV(e){return{element:{elements:[e.element],incompressible:e.incompressible||!1},children:oo.map(oo.from(e.children),xV),collapsible:e.collapsible,collapsed:e.collapsed}}function LV(e){let t,i,n=[e.element],s=e.incompressible||!1;for(;[i,t]=oo.consume(oo.from(e.children),2),1===i.length&&!i[0].incompressible;)e=i[0],n.push(e.element);return{element:{elements:n,incompressible:s},children:oo.map(oo.concat(i,t),LV),collapsible:e.collapsible,collapsed:e.collapsed}}function AV(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t=i<e.element.elements.length-1?[AV(e,i+1)]:oo.map(oo.from(e.children),e=>AV(e,0)),0===i&&e.element.incompressible?{element:e.element.elements[i],children:t,incompressible:!0,collapsible:e.collapsible,collapsed:e.collapsed}:{element:e.element.elements[i],children:t,collapsible:e.collapsible,collapsed:e.collapsed}}function NV(e){return AV(e,0)}function FV(e,t,i){return e.element===t?(0,r.A)((0,r.A)({},e),{},{children:i}):(0,r.A)((0,r.A)({},e),{},{children:oo.map(oo.from(e.children),e=>FV(e,t,i))})}var OV=class{get onDidSpliceRenderedNodes(){return this.model.onDidSpliceRenderedNodes}get onDidSpliceModel(){return this.model.onDidSpliceModel}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}get size(){return this.nodes.size}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new IV(e,t),this.enabled=void 0===t.compressionEnabled||t.compressionEnabled,this.identityProvider=t.identityProvider}setChildren(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oo.empty(),i=arguments.length>2?arguments[2]:void 0,n=i.diffIdentityProvider&&(e=>({getId:t=>t.elements.map(t=>e.getId(t).toString()).join("\0")}))(i.diffIdentityProvider);if(null===e){let e=oo.map(t,this.enabled?LV:xV);return void this._setChildren(null,e,{diffIdentityProvider:n,diffDepth:1/0})}let s=this.nodes.get(e);if(!s)throw new dW(this.user,"Unknown compressed tree node");let r=this.model.getNode(s),o=this.model.getParentNodeLocation(s),a=this.model.getNode(o),l=FV(NV(r),e,t),h=(this.enabled?LV:xV)(l),d=i.diffIdentityProvider?(e,t)=>i.diffIdentityProvider.getId(e)===i.diffIdentityProvider.getId(t):void 0;if(Mr(h.element.elements,r.element.elements,d))return void this._setChildren(s,h.children||oo.empty(),{diffIdentityProvider:n,diffDepth:1});let c=a.children.map(e=>e===r?h:e);this._setChildren(a.element,c,{diffIdentityProvider:n,diffDepth:r.depth-a.depth})}isCompressionEnabled(){return this.enabled}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;let t=this.model.getNode().children,i=oo.map(t,NV),n=oo.map(i,e?LV:xV);this._setChildren(null,n,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,i){let n=new Set;this.model.setChildren(e,t,(0,r.A)((0,r.A)({},i),{},{onDidCreateNode:e=>{for(let t of e.element.elements)n.add(t),this.nodes.set(t,e.element)},onDidDeleteNode:e=>{for(let t of e.element.elements)n.has(t)||this.nodes.delete(t)}}))}has(e){return this.nodes.has(e)}getListIndex(e){let t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){let t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(void 0===e)return this.model.getNode();let t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){let t=this.model.getNodeLocation(e);return null===t?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){let t=this.getCompressedNode(e),i=this.model.getParentNodeLocation(t);return null===i?null:i.elements[i.elements.length-1]}getFirstElementChild(e){let t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}getLastElementAncestor(e){let t=void 0===e?void 0:this.getCompressedNode(e);return this.model.getLastElementAncestor(t)}isCollapsible(e){let t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){let i=this.getCompressedNode(e);return this.model.setCollapsible(i,t)}isCollapsed(e){let t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){let n=this.getCompressedNode(e);return this.model.setCollapsed(n,t,i)}expandTo(e){let t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){let t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}resort(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.getCompressedNode(e);this.model.resort(i,t)}getCompressedNode(e){if(null===e)return null;let t=this.nodes.get(e);if(!t)throw new dW(this.user,"Tree element not found: ".concat(e));return t}},RV=e=>e[e.length-1],MV=class e{get element(){return null===this.node.element?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(t=>new e(this.unwrapper,t))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e,t){this.unwrapper=e,this.node=t}};var PV=class{get onDidSpliceModel(){return _o.map(this.model.onDidSpliceModel,e=>{let{insertedNodes:t,deletedNodes:i}=e;return{insertedNodes:t.map(e=>this.nodeMapper.map(e)),deletedNodes:i.map(e=>this.nodeMapper.map(e))}})}get onDidSpliceRenderedNodes(){return _o.map(this.model.onDidSpliceRenderedNodes,e=>{let{start:t,deleteCount:i,elements:n}=e;return{start:t,deleteCount:i,elements:n.map(e=>this.nodeMapper.map(e))}})}get onDidChangeCollapseState(){return _o.map(this.model.onDidChangeCollapseState,e=>{let{node:t,deep:i}=e;return{node:this.nodeMapper.map(t),deep:i}})}get onDidChangeRenderNodeCount(){return _o.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.rootRef=null,this.elementMapper=t.elementMapper||RV;let i=e=>this.elementMapper(e.elements);this.nodeMapper=new cW(e=>new MV(i,e)),this.model=new OV(e,function(e,t){return(0,r.A)((0,r.A)({},t),{},{identityProvider:t.identityProvider&&{getId:i=>t.identityProvider.getId(e(i))},sorter:t.sorter&&{compare:(e,i)=>t.sorter.compare(e.elements[0],i.elements[0])},filter:t.filter&&{filter(e,i){let n=e.elements;for(let s=0;s<n.length-1;s++){let e=t.filter.filter(n[s],i);i=_W(vW(e)?e.visibility:e)}return t.filter.filter(n[n.length-1],i)}}})}(i,t))}setChildren(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oo.empty(),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.model.setChildren(e,t,i)}isCompressionEnabled(){return this.model.isCompressionEnabled()}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){let t=this.model.getFirstElementChild(e);return null==t?t:this.elementMapper(t.elements)}getLastElementAncestor(e){let t=this.model.getLastElementAncestor(e);return null==t?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,i){return this.model.setCollapsed(e,t,i)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}resort(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.model.resort(e,t)}getCompressedTreeNode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.model.getNode(e)}},BV=class extends eV{get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}constructor(e,t,i,n){super(e,t,i,n,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}),this.user=e}setChildren(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oo.empty(),i=arguments.length>2?arguments[2]:void 0;this.model.setChildren(e,t,i)}rerender(e){void 0!==e?this.model.rerender(e):this.view.rerender()}updateElementHeight(e,t){let i=this.model.getListIndex(e);-1!==i&&this.view.updateElementHeight(i,t)}resort(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.model.resort(e,t)}hasElement(e){return this.model.has(e)}createModel(e,t){return new IV(e,t)}},UV=class{get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}constructor(e,t,i){this._compressedTreeNodeProvider=e,this.stickyScrollDelegate=t,this.renderer=i,this.templateId=i.templateId,i.onDidChangeTwistieState&&(this.onDidChangeTwistieState=i.onDidChangeTwistieState)}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,i,n){let s=this.stickyScrollDelegate.getCompressedNode(e);s||(s=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element)),1===s.element.elements.length?(i.compressedTreeNode=void 0,this.renderer.renderElement(e,t,i.data,n)):(i.compressedTreeNode=s,this.renderer.renderCompressedElements(s,t,i.data,n))}disposeElement(e,t,i,n){var s,r,o,a;i.compressedTreeNode?null===(s=(r=this.renderer).disposeCompressedElements)||void 0===s||s.call(r,i.compressedTreeNode,t,i.data,n):null===(o=(a=this.renderer).disposeElement)||void 0===o||o.call(a,e,t,i.data,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){var i,n,s;return null!==(i=null===(n=(s=this.renderer).renderTwistie)||void 0===n?void 0:n.call(s,e,t))&&void 0!==i&&i}};UV.__decorator=ki([BL],UV.prototype,"compressedTreeNodeProvider",null);var HV=class{constructor(e){this.modelProvider=e,this.compressedStickyNodes=new Map}getCompressedNode(e){return this.compressedStickyNodes.get(e)}constrainStickyScrollNodes(e,t,i){if(this.compressedStickyNodes.clear(),0===e.length)return[];for(let n=0;n<e.length;n++){let s=e[n],r=s.position+s.height;if(n+1<e.length&&r+e[n+1].height>i||n>=t-1&&t<e.length){let t=e.slice(0,n),i=e.slice(n);return[...t,this.compressStickyNodes(i)]}}return e}compressStickyNodes(e){if(0===e.length)throw Error("Can't compress empty sticky nodes");let t=this.modelProvider();if(!t.isCompressionEnabled())return e[0];let i=[];for(let r=0;r<e.length;r++){let n=e[r],s=t.getCompressedTreeNode(n.node.element);if(s.element){if(0!==r&&s.element.incompressible)break;i.push(...s.element.elements)}}if(i.length<2)return e[0];let n=e[e.length-1],s={elements:i,incompressible:!1},o=(0,r.A)((0,r.A)({},n.node),{},{children:[],element:s}),a=new Proxy(e[0].node,{}),l={node:a,startIndex:e[0].startIndex,endIndex:n.endIndex,position:e[0].position,height:e[0].height};return this.compressedStickyNodes.set(a,o),l}};var WV=class extends BV{constructor(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=()=>this,a=new HV(()=>this.model),l=n.map(e=>new UV(o,a,e));super(e,t,i,l,(0,r.A)((0,r.A)({},function(e,t){return t&&(0,r.A)((0,r.A)({},t),{},{keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(i){let n;try{n=e().getCompressedTreeNode(i)}catch(s){return t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(i)}return 1===n.element.elements.length?t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(i):t.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(n.element.elements)}}})}(o,s)),{},{stickyScrollDelegate:a}))}setChildren(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oo.empty(),i=arguments.length>2?arguments[2]:void 0;this.model.setChildren(e,t,i)}createModel(e,t){return new PV(e,t)}updateOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super.updateOptions(e),void 0!==e.compressionEnabled&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.model.getCompressedTreeNode(e)}};function VV(e){return(0,r.A)((0,r.A)({},e),{},{children:[],refreshPromise:void 0,stale:!0,slow:!1,forceExpanded:!1})}function zV(e,t){return!!t.parent&&(t.parent===e||zV(e,t.parent))}var KV=class e{get element(){return this.node.element.element}get children(){return this.node.children.map(t=>new e(t))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}},qV=class{constructor(e,t,i){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,n){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,n)}renderTwistie(e,t){return e.slow?(t.classList.add(...yf.asClassNameArray(su.treeItemLoading)),!0):(t.classList.remove(...yf.asClassNameArray(su.treeItemLoading)),!1)}disposeElement(e,t,i,n){var s,r;null===(s=(r=this.renderer).disposeElement)||void 0===s||s.call(r,this.nodeMapper.map(e),t,i.templateData,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}};function GV(e){return{browserEvent:e.browserEvent,elements:e.elements.map(e=>e.element)}}function jV(e){return{browserEvent:e.browserEvent,element:e.element&&e.element.element,target:e.target}}function YV(e){return{browserEvent:e.browserEvent,element:e.element&&e.element.element,anchor:e.anchor,isStickyScroll:e.isStickyScroll}}var QV=class extends $L{set context(e){this.data.context=e}get context(){return this.data.context}constructor(e){super(e.elements.map(e=>e.element)),this.data=e}};function $V(e){return e instanceof $L?new QV(e):e}var XV=class{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(e=>e.element),t)}onDragStart(e,t){var i,n;null===(i=(n=this.dnd).onDragStart)||void 0===i||i.call(n,$V(e),t)}onDragOver(e,t,i,n,s){return this.dnd.onDragOver($V(e),t&&t.element,i,n,s)}drop(e,t,i,n,s){this.dnd.drop($V(e),t&&t.element,i,n,s)}onDragEnd(e){var t,i;null===(t=(i=this.dnd).onDragEnd)||void 0===t||t.call(i,e)}dispose(){this.dnd.dispose()}},ZV=class extends NW{constructor(e,t,i){super(t,i),this.findProvider=e,this.isFindSessionActive=!1}filter(e,t){let i=super.filter(e,t);return this.isFindSessionActive&&this.findMode!==LW.Highlight&&this.findProvider.isVisible?_W(vW(i)?i.visibility:i)===nW.Hidden?nW.Hidden:this.findProvider.isVisible(e)?i:nW.Hidden:i}},JV=class extends UW{constructor(e,t,i,n,s){super(e,i,n,s),this.findProvider=t,this.filter=i,this.activeSession=!1,this.asyncWorkInProgress=!1,this.taskQueue=new kl(250),this.disposables.add(vo(async()=>{var e,t;this.activeSession&&await(null===(e=(t=this.findProvider).endSession)||void 0===e?void 0:e.call(t))}))}applyPattern(e){var t;this.renderMessage(!1),null!==(t=this.activeTokenSource)&&void 0!==t&&t.cancel(),this.activeTokenSource=new Qo,this.taskQueue.trigger(()=>this.applyPatternAsync())}async applyPatternAsync(){var e;let t=null===(e=this.activeTokenSource)||void 0===e?void 0:e.token;if(!t||t.isCancellationRequested)return;let i=this.pattern;if(""===i)return void(this.activeSession&&(this.asyncWorkInProgress=!0,await this.deactivateFindSession(),this.asyncWorkInProgress=!1,t.isCancellationRequested||(this.filter.reset(),super.applyPattern(""))));this.activeSession||this.activateFindSession(),this.asyncWorkInProgress=!0,this.activeFindMetadata=void 0;let n=await this.findProvider.find(i,{matchType:this.matchType,findMode:this.mode},t);t.isCancellationRequested||void 0===n||(this.asyncWorkInProgress=!1,this.activeFindMetadata=n,this.filter.reset(),super.applyPattern(i),n.warningMessage&&this.renderMessage(!0,n.warningMessage))}activateFindSession(){var e,t;this.activeSession=!0,this.filter.isFindSessionActive=!0,null===(e=(t=this.findProvider).startSession)||void 0===e||e.call(t)}async deactivateFindSession(){var e,t;this.activeSession=!1,this.filter.isFindSessionActive=!1,await(null===(e=(t=this.findProvider).endSession)||void 0===e?void 0:e.call(t))}render(){if(this.asyncWorkInProgress||!this.activeFindMetadata)return;let e=0===this.activeFindMetadata.matchCount&&this.pattern.length>0;this.renderMessage(e),this.pattern.length&&this.alertResults(this.activeFindMetadata.matchCount)}onDidToggleChange(e){this.toggles.set(e.id,e.isChecked),this.filter.findMode=this.mode,this.filter.findMatchType=this.matchType,this.placeholder=this.mode===LW.Filter?Li(40,"Type to filter"):Li(41,"Type to search"),this.applyPattern(this.pattern)}shouldAllowFocus(e){return this.shouldFocusWhenNavigating(e)}shouldFocusWhenNavigating(e){var t;if(!this.activeSession||!this.activeFindMetadata)return!0;let i=null===(t=e.element)||void 0===t?void 0:t.element;return!(!i||!this.activeFindMetadata.isMatch(i))||!Ty.isDefault(e.filterData)}};function ez(e){return e&&(0,r.A)((0,r.A)({},e),{},{collapseByDefault:!0,identityProvider:e.identityProvider&&{getId:t=>e.identityProvider.getId(t.element)},dnd:e.dnd&&new XV(e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent:t=>e.multipleSelectionController.isSelectionSingleChangeEvent((0,r.A)((0,r.A)({},t),{},{element:t.element})),isSelectionRangeChangeEvent:t=>e.multipleSelectionController.isSelectionRangeChangeEvent((0,r.A)((0,r.A)({},t),{},{element:t.element}))},accessibilityProvider:e.accessibilityProvider&&(0,r.A)((0,r.A)({},e.accessibilityProvider),{},{getPosInSet:void 0,getSetSize:void 0,getRole:e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",isChecked:e.accessibilityProvider.isChecked?t=>{var i;return!(null===(i=e.accessibilityProvider)||void 0===i||!i.isChecked(t.element))}:void 0,getAriaLabel:t=>e.accessibilityProvider.getAriaLabel(t.element),getWidgetAriaLabel:()=>e.accessibilityProvider.getWidgetAriaLabel(),getWidgetRole:e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider.getAriaLevel&&(t=>e.accessibilityProvider.getAriaLevel(t.element)),getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))}),filter:e.filter&&{filter:(t,i)=>e.filter.filter(t.element,i)},keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&(0,r.A)((0,r.A)({},e.keyboardNavigationLabelProvider),{},{getKeyboardNavigationLabel:t=>e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}),sorter:void 0,expandOnlyOnTwistieClick:void 0===e.expandOnlyOnTwistieClick?void 0:"function"==typeof e.expandOnlyOnTwistieClick?t=>e.expandOnlyOnTwistieClick(t.element):e.expandOnlyOnTwistieClick,twistieAdditionalCssClass:void 0===e.twistieAdditionalCssClass?void 0:t=>e.twistieAdditionalCssClass(t.element),defaultFindVisibility:t=>t.hasChildren&&t.stale?nW.Visible:"number"==typeof e.defaultFindVisibility?e.defaultFindVisibility:void 0===e.defaultFindVisibility?nW.Recurse:e.defaultFindVisibility(t.element),stickyScrollDelegate:e.stickyScrollDelegate})}function tz(e,t){t(e),e.children.forEach(e=>tz(e,t))}var iz=class{get onDidScroll(){return this.tree.onDidScroll}get onDidChangeFocus(){return _o.map(this.tree.onDidChangeFocus,GV)}get onDidChangeSelection(){return _o.map(this.tree.onDidChangeSelection,GV)}get onKeyDown(){return this.tree.onKeyDown}get onMouseClick(){return _o.map(this.tree.onMouseClick,jV)}get onMouseDblClick(){return _o.map(this.tree.onMouseDblClick,jV)}get onContextMenu(){return _o.map(this.tree.onContextMenu,YV)}get onTap(){return _o.map(this.tree.onTap,jV)}get onPointer(){return _o.map(this.tree.onPointer,jV)}get onDidFocus(){return this.tree.onDidFocus}get onDidBlur(){return this.tree.onDidBlur}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidUpdateOptions(){return this.tree.onDidUpdateOptions}get onDidChangeStickyScrollFocused(){return this.tree.onDidChangeStickyScrollFocused}get findMode(){return this.findController?this.findController.mode:this.tree.findMode}set findMode(e){this.findController?this.findController.mode=e:this.tree.findMode=e}get findMatchType(){return this.findController?this.findController.matchType:this.tree.findMatchType}set findMatchType(e){this.findController?this.findController.matchType=e:this.tree.findMatchType=e}get expandOnlyOnTwistieClick(){if("boolean"==typeof this.tree.expandOnlyOnTwistieClick)return this.tree.expandOnlyOnTwistieClick;let e=this.tree.expandOnlyOnTwistieClick;return t=>e(this.nodes.get(t===this.root.element?null:t)||null)}get onDidDispose(){return this.tree.onDidDispose}constructor(e,t,i,n,s){var o;let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.user=e,this.dataSource=s,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new Ro,this._onDidChangeNodeSlowState=new Ro,this.nodeMapper=new cW(e=>new KV(e)),this.disposables=new bo,this.identityProvider=a.identityProvider,this.autoExpandSingleChildren=void 0!==a.autoExpandSingleChildren&&a.autoExpandSingleChildren,this.sorter=a.sorter,this.getDefaultCollapseState=e=>a.collapseByDefault?a.collapseByDefault(e)?sW.PreserveOrCollapsed:sW.PreserveOrExpanded:void 0;let l,h=!1;if(a.findProvider&&(null===(o=a.findWidgetEnabled)||void 0===o||o)&&a.keyboardNavigationLabelProvider&&a.contextViewProvider&&(h=!0,l=new ZV(a.findProvider,a.keyboardNavigationLabelProvider,a.filter)),this.tree=this.createTree(e,t,i,n,(0,r.A)((0,r.A)({},a),{},{findWidgetEnabled:!h,filter:null!==l&&void 0!==l?l:a.filter})),this.root=VV({element:void 0,parent:null,hasChildren:!0,defaultCollapseState:void 0}),this.identityProvider&&(this.root=(0,r.A)((0,r.A)({},this.root),{},{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables),h){let e={styles:a.findWidgetStyles,showNotFoundMessage:a.showNotFoundMessage,defaultFindMatchType:a.defaultFindMatchType,defaultFindMode:a.defaultFindMode};this.findController=this.disposables.add(new JV(this.tree,a.findProvider,l,this.tree.options.contextViewProvider,e)),this.focusNavigationFilter=e=>this.findController.shouldFocusWhenNavigating(e),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindOpenState=this.tree.onDidChangeFindOpenState,this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.onDidChangeFindMatchType=this.tree.onDidChangeFindMatchType}createTree(e,t,i,n,s){return new BV(e,t,new EW(i),n.map(e=>new qV(e,this.nodeMapper,this._onDidChangeNodeSlowState.event)),ez(s)||{})}updateOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.findController&&(void 0!==e.defaultFindMode&&(this.findController.mode=e.defaultFindMode),void 0!==e.defaultFindMatchType&&(this.findController.matchType=e.defaultFindMatchType)),this.tree.updateOptions(e)}get options(){return this.tree.options}getHTMLElement(){return this.tree.getHTMLElement()}get contentHeight(){return this.tree.contentHeight}get contentWidth(){return this.tree.contentWidth}get onDidChangeContentHeight(){return this.tree.onDidChangeContentHeight}get onDidChangeContentWidth(){return this.tree.onDidChangeContentWidth}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}get scrollLeft(){return this.tree.scrollLeft}set scrollLeft(e){this.tree.scrollLeft=e}get scrollHeight(){return this.tree.scrollHeight}get renderHeight(){return this.tree.renderHeight}get lastVisibleElement(){return this.tree.lastVisibleElement.element}get ariaLabel(){return this.tree.ariaLabel}set ariaLabel(e){this.tree.ariaLabel=e}domFocus(){this.tree.domFocus()}isDOMFocused(){return this.tree.isDOMFocused()}navigate(e){let t;return e&&(t=this.getDataNode(e)),new oz(this.tree.navigate(t))}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}async setInput(e,t){this.cancelAllRefreshPromises(),this.root.element=e;let i=t&&{viewState:t,focus:[],selection:[]};await this._updateChildren(e,!0,!1,i),i&&(this.tree.setFocus(i.focus),this.tree.setSelection(i.selection)),t&&"number"==typeof t.scrollTop&&(this.scrollTop=t.scrollTop)}async updateChildren(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root.element,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;await this._updateChildren(e,t,i,void 0,n)}cancelAllRefreshPromises(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.refreshPromises.forEach(e=>e.cancel()),this.refreshPromises.clear(),e&&(this.subTreeRefreshPromises.forEach(e=>e.cancel()),this.subTreeRefreshPromises.clear())}async _updateChildren(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root.element,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;if(void 0===this.root.element)throw new dW(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await _o.toPromise(this._onDidRender.event));let r=this.getDataNode(e);if(await this.refreshAndRenderNode(r,t,n,s),i)try{this.tree.rerender(r)}catch(o){}}resort(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root.element,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.tree.resort(this.getDataNode(e),t)}hasNode(e){return e===this.root.element||this.nodes.has(e)}rerender(e){if(void 0===e||e===this.root.element)return void this.tree.rerender();let t=this.getDataNode(e);this.tree.rerender(t)}updateElementHeight(e,t){let i=this.getDataNode(e);this.tree.updateElementHeight(i,t)}updateWidth(e){let t=this.getDataNode(e);this.tree.updateWidth(t)}getNode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root.element,t=this.getDataNode(e),i=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(i)}collapse(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.getDataNode(e);return this.tree.collapse(i===this.root?null:i,t)}async expand(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(void 0===this.root.element)throw new dW(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await _o.toPromise(this._onDidRender.event));let i=this.getDataNode(e);if(this.tree.hasElement(i)&&!this.tree.isCollapsible(i)||(i.refreshPromise&&(await i.refreshPromise,await _o.toPromise(this._onDidRender.event)),i!==this.root&&!i.refreshPromise&&!this.tree.isCollapsed(i)))return!1;let n=this.tree.expand(i===this.root?null:i,t);return i.refreshPromise&&(await i.refreshPromise,await _o.toPromise(this._onDidRender.event)),n}toggleCollapsed(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.tree.toggleCollapsed(this.getDataNode(e),t)}expandAll(){this.tree.expandAll()}async expandTo(e){if(!this.dataSource.getParent)throw Error("Can't expand to element without getParent method");let t=[];for(;!this.hasNode(e);)(e=this.dataSource.getParent(e))!==this.root.element&&t.push(e);for(let i of oo.reverse(t))await this.expand(i);this.tree.expandTo(this.getDataNode(e))}collapseAll(){this.tree.collapseAll()}isCollapsible(e){return this.tree.isCollapsible(this.getDataNode(e))}isCollapsed(e){return this.tree.isCollapsed(this.getDataNode(e))}triggerTypeNavigation(){this.tree.triggerTypeNavigation()}openFind(){this.findController?this.findController.open():this.tree.openFind()}closeFind(){this.findController?this.findController.close():this.tree.closeFind()}refilter(){this.tree.refilter()}setAnchor(e){this.tree.setAnchor(void 0===e?void 0:this.getDataNode(e))}getAnchor(){var e;return null===(e=this.tree.getAnchor())||void 0===e?void 0:e.element}setSelection(e,t){let i=e.map(e=>this.getDataNode(e));this.tree.setSelection(i,t)}getSelection(){return this.tree.getSelection().map(e=>e.element)}setFocus(e,t){let i=e.map(e=>this.getDataNode(e));this.tree.setFocus(i,t)}focusNext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;this.tree.focusNext(e,t,i,this.focusNavigationFilter)}focusPrevious(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;this.tree.focusPrevious(e,t,i,this.focusNavigationFilter)}focusNextPage(e){return this.tree.focusNextPage(e,this.focusNavigationFilter)}focusPreviousPage(e){return this.tree.focusPreviousPage(e,this.focusNavigationFilter)}focusLast(e){this.tree.focusLast(e,this.focusNavigationFilter)}focusFirst(e){this.tree.focusFirst(e,this.focusNavigationFilter)}getFocus(){return this.tree.getFocus().map(e=>e.element)}getStickyScrollFocus(){return this.tree.getStickyScrollFocus().map(e=>e.element)}getFocusedPart(){return this.tree.getFocusedPart()}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getRelativeTop(e){return this.tree.getRelativeTop(this.getDataNode(e))}getParentElement(e){let t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root.element,t=this.getDataNode(e),i=this.tree.getFirstElementChild(t===this.root?null:t);return i&&i.element}getDataNode(e){let t=this.nodes.get(e===this.root.element?null:e);if(!t){var i;let t=null===(i=this.identityProvider)||void 0===i?void 0:i.getId(e).toString();throw new dW(this.user,"Data tree node not found".concat(t?": ".concat(t):""))}return t}async refreshAndRenderNode(e,t,i,n){this.disposables.isDisposed||(await this.refreshNode(e,t,i),!this.disposables.isDisposed&&this.render(e,i,n))}async refreshNode(e,t,i){let n;return this.subTreeRefreshPromises.forEach((s,r)=>{!n&&function(e,t){return e===t||zV(e,t)||zV(t,e)}(r,e)&&(n=s.then(()=>this.refreshNode(e,t,i)))}),n||(e!==this.root&&this.tree.getNode(e).collapsed?(e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0,void this.setChildren(e,[],t,i)):this.doRefreshSubTree(e,t,i))}async doRefreshSubTree(e,t,i){let n=bl(async()=>{let n=await this.doRefreshNode(e,t,i);e.stale=!1,await Hl.settled(n.map(e=>this.doRefreshSubTree(e,t,i)))});return e.refreshPromise=n,this.subTreeRefreshPromises.set(e,n),n.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)}),n}async doRefreshNode(e,t,i){let n;if(e.hasChildren=!!this.dataSource.hasChildren(e.element),e.hasChildren){let t=this.doGetChildren(e);if(en(t))n=Promise.resolve(t);else{let i=El(800);i.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},e=>null),n=t.finally(()=>i.cancel())}}else n=Promise.resolve(oo.empty());try{let s=await n;return this.setChildren(e,s,t,i)}catch(t){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),Bi(t))return[];throw t}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;let i=this.dataSource.getChildren(e.element);return en(i)?this.processChildren(i):(t=bl(async()=>this.processChildren(await i)),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState(e){let{node:t,deep:i}=e;null!==t.element&&!t.collapsed&&t.element.stale&&(i?this.collapse(t.element.element):this.refreshAndRenderNode(t.element,!1).catch(Ri))}setChildren(e,t,i,n){let s=[...t];if(0===e.children.length&&0===s.length)return[];let r=new Map,o=new Map;for(let h of e.children)r.set(h.element,h),this.identityProvider&&o.set(h.id,{node:h,collapsed:this.tree.hasElement(h)&&this.tree.isCollapsed(h)});let a=[],l=s.map(t=>{let s=!!this.dataSource.hasChildren(t);if(!this.identityProvider){let i=VV({element:t,parent:e,hasChildren:s,defaultCollapseState:this.getDefaultCollapseState(t)});return s&&i.defaultCollapseState===sW.PreserveOrExpanded&&a.push(i),i}let l=this.identityProvider.getId(t).toString(),h=o.get(l);if(h){let e=h.node;return r.delete(e.element),this.nodes.delete(e.element),this.nodes.set(t,e),e.element=t,e.hasChildren=s,i?h.collapsed?(e.children.forEach(e=>tz(e,e=>this.nodes.delete(e.element))),e.children.splice(0,e.children.length),e.stale=!0):a.push(e):s&&!h.collapsed&&a.push(e),e}let d=VV({element:t,parent:e,id:l,hasChildren:s,defaultCollapseState:this.getDefaultCollapseState(t)});return n&&n.viewState.focus&&n.viewState.focus.indexOf(l)>-1&&n.focus.push(d),n&&n.viewState.selection&&n.viewState.selection.indexOf(l)>-1&&n.selection.push(d),(n&&n.viewState.expanded&&n.viewState.expanded.indexOf(l)>-1||s&&d.defaultCollapseState===sW.PreserveOrExpanded)&&a.push(d),d});for(let h of r.values())tz(h,e=>this.nodes.delete(e.element));for(let h of l)this.nodes.set(h.element,h);return Gr(e.children,0,e.children.length,l),e!==this.root&&this.autoExpandSingleChildren&&1===l.length&&0===a.length&&(l[0].forceExpanded=!0,a.push(l[0])),a}render(e,t,i){let n=e.children.map(e=>this.asTreeElement(e,t)),s=i&&(0,r.A)((0,r.A)({},i),{},{diffIdentityProvider:i.diffIdentityProvider&&{getId:e=>i.diffIdentityProvider.getId(e.element)}});this.tree.setChildren(e===this.root?null:e,n,s),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let i;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?i=!1:e.forceExpanded?(i=!1,e.forceExpanded=!1):i=e.defaultCollapseState,{element:e,children:e.hasChildren?oo.map(e.children,e=>this.asTreeElement(e,t)):[],collapsible:e.hasChildren,collapsed:i}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}getViewState(){if(!this.identityProvider)throw new dW(this.user,"Can't get tree view state without an identity provider");let e=e=>this.identityProvider.getId(e).toString(),t=this.getFocus().map(e),i=this.getSelection().map(e),n=[],s=this.tree.getNode(),r=[s];for(;r.length>0;){let t=r.pop();t!==s&&t.collapsible&&!t.collapsed&&n.push(e(t.element.element)),qr(r,r.length,t.children)}return{focus:t,selection:i,expanded:n,scrollTop:this.scrollTop}}dispose(){this.disposables.dispose(),this.tree.dispose()}},nz=class e{get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(t=>new e(t))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}},sz=class{constructor(e,t,i,n){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=i,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,n){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,n)}renderCompressedElements(e,t,i,n){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,i.templateData,n)}renderTwistie(e,t){return e.slow?(t.classList.add(...yf.asClassNameArray(su.treeItemLoading)),!0):(t.classList.remove(...yf.asClassNameArray(su.treeItemLoading)),!1)}disposeElement(e,t,i,n){var s,r;null===(s=(r=this.renderer).disposeElement)||void 0===s||s.call(r,this.nodeMapper.map(e),t,i.templateData,n)}disposeCompressedElements(e,t,i,n){var s,r;null===(s=(r=this.renderer).disposeCompressedElements)||void 0===s||s.call(r,this.compressibleNodeMapperProvider().map(e),t,i.templateData,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=po(this.disposables)}};var rz=class extends iz{constructor(e,t,i,n,s,r){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};super(e,t,i,s,r,o),this.compressionDelegate=n,this.compressibleNodeMapper=new cW(e=>new nz(e)),this.filter=o.filter}getCompressedTreeNode(e){let t=this.getDataNode(e);return this.tree.getCompressedTreeNode(t).element}createTree(e,t,i,n,s){return new WV(e,t,new EW(i),n.map(e=>new sz(e,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),function(e){let t=e&&ez(e);return t&&(0,r.A)((0,r.A)({},t),{},{keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&(0,r.A)((0,r.A)({},t.keyboardNavigationLabelProvider),{},{getCompressedNodeKeyboardNavigationLabel:t=>e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(e=>e.element))}),stickyScrollDelegate:t.stickyScrollDelegate})}(s)||{})}asTreeElement(e,t){return(0,r.A)({incompressible:this.compressionDelegate.isIncompressible(e.element)},super.asTreeElement(e,t))}getViewState(){if(!this.identityProvider)throw new dW(this.user,"Can't get tree view state without an identity provider");let e=e=>this.identityProvider.getId(e).toString(),t=this.getFocus().map(e),i=this.getSelection().map(e),n=[],s=this.tree.getCompressedTreeNode(),r=[s];for(;r.length>0;){let t=r.pop();if(t!==s&&t.collapsible&&!t.collapsed)for(let i of t.element.elements)n.push(e(i.element));r.push(...t.children)}return{focus:t,selection:i,expanded:n,scrollTop:this.scrollTop}}render(e,t,i){if(!this.identityProvider)return super.render(e,t);let n=e=>this.identityProvider.getId(e).toString(),s=e=>{let t=new Set;for(let i of e){let e=this.tree.getCompressedTreeNode(i===this.root?null:i);if(e.element)for(let i of e.element.elements)t.add(n(i.element))}return t},r=s(this.tree.getSelection()),o=s(this.tree.getFocus());super.render(e,t,i);let a=this.getSelection(),l=!1,h=this.getFocus(),d=!1,c=e=>{let t=e.element;if(t)for(let i=0;i<t.elements.length;i++){let e=n(t.elements[i].element),s=t.elements[t.elements.length-1].element;r.has(e)&&-1===a.indexOf(s)&&(a.push(s),l=!0),o.has(e)&&-1===h.indexOf(s)&&(h.push(s),d=!0)}e.children.forEach(c)};c(this.tree.getCompressedTreeNode(e===this.root?null:e)),l&&this.setSelection(a),d&&this.setFocus(h)}processChildren(e){return this.filter&&(e=oo.filter(e,e=>{let t=function(e){return"boolean"==typeof e?e?nW.Visible:nW.Hidden:vW(e)?_W(e.visibility):_W(e)}(this.filter.filter(e,nW.Visible));if(t===nW.Recurse)throw Error("Recursive tree visibility not supported in async data compressed trees");return t===nW.Visible})),super.processChildren(e)}navigate(e){return super.navigate(e)}};var oz=class{constructor(e){this.navigator=e}current(){let e=this.navigator.current();return null===e?null:e.element}previous(){return this.navigator.previous(),this.current()}first(){return this.navigator.first(),this.current()}last(){return this.navigator.last(),this.current()}next(){return this.navigator.next(),this.current()}},az=class extends eV{constructor(e,t,i,n,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};super(e,t,i,n,r),this.user=e,this.dataSource=s,this.nodesByIdentity=new Map,this.identityProvider=r.identityProvider}getInput(){return this.input}setInput(e,t){if(t&&!this.identityProvider)throw new dW(this.user,"Can't restore tree view state without an identity provider");if(this.input=e,!e)return this.nodesByIdentity.clear(),void this.model.setChildren(null,oo.empty());if(!t)return void this._refresh(e);let i=[],n=[];this._refresh(e,e=>{let i=this.identityProvider.getId(e).toString();return!t.expanded[i]},e=>{let s=this.identityProvider.getId(e.element).toString();t.focus.has(s)&&i.push(e.element),t.selection.has(s)&&n.push(e.element)}),this.setFocus(i),this.setSelection(n),t&&"number"==typeof t.scrollTop&&(this.scrollTop=t.scrollTop)}updateChildren(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.input;if(void 0===this.input)throw new dW(this.user,"Tree input not set");this.identityProvider&&(e=e=>{let t=this.identityProvider.getId(e).toString(),i=this.nodesByIdentity.get(t);if(i)return i.collapsed}),this._refresh(t,e)}resort(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.input,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.model.resort(e===this.input?null:e,t)}refresh(e){void 0!==e?this.model.rerender(e):this.view.rerender()}_refresh(e,t,i){let n;if(this.identityProvider){let e=new Set,t=i;i=i=>{let n=this.identityProvider.getId(i.element).toString();e.add(n),this.nodesByIdentity.set(n,i),null===t||void 0===t||t(i)},n=t=>{let i=this.identityProvider.getId(t.element).toString();e.has(i)||this.nodesByIdentity.delete(i)}}this.model.setChildren(e===this.input?null:e,this.iterate(e,t).elements,{onDidCreateNode:i,onDidDeleteNode:n})}iterate(e,t){let i=[...this.dataSource.getChildren(e)];return{elements:oo.map(i,e=>{let{elements:i,size:n}=this.iterate(e,t);return{element:e,children:i,collapsible:this.dataSource.hasChildren?this.dataSource.hasChildren(e):void 0,collapsed:0===n?void 0:t&&t(e)}}),size:i.length}}createModel(e,t){return new IV(e,t)}},lz=new jk("isMac",qn,Li(1781,"Whether the operating system is macOS")),hz=new jk("isLinux",Gn,Li(1782,"Whether the operating system is Linux")),dz=new jk("isWindows",Kn,Li(1783,"Whether the operating system is Windows")),cz=new jk("isWeb",Yn,Li(1784,"Whether the platform is a web browser")),uz=new jk("isMacNative",qn&&!Yn,Li(1785,"Whether the operating system is macOS on a non-browser platform")),gz=new jk("isIOS",$n,Li(1786,"Whether the operating system is iOS")),pz=new jk("isMobile",Xn,Li(1787,"Whether the platform is a mobile web browser")),fz=new jk("isDevelopment",!1,!0),mz=new jk("productQualityType","",Li(1788,"Quality type of VS Code")),vz="inputFocus",_z=new jk(vz,!1,Li(1789,"Whether keyboard focus is inside an input box")),bz=fn("listService"),Cz=new jk("listScrollAtBoundary","none");Dk.or(Cz.isEqualTo("top"),Cz.isEqualTo("both")),Dk.or(Cz.isEqualTo("bottom"),Cz.isEqualTo("both"));var yz=new jk("listFocus",!0),wz=new jk("treestickyScrollFocused",!1),Sz=new jk("listSupportsMultiselect",!0);Dk.and(yz,Dk.not(vz),wz.negate());var kz=new jk("listHasSelectionOrFocus",!1),Ez=new jk("listDoubleSelection",!1),Dz=new jk("listMultiSelection",!1),Tz=new jk("listSelectionNavigation",!1),Iz=new jk("listSupportsFind",!0),xz=new jk("treeElementCanCollapse",!1),Lz=new jk("treeElementHasParent",!1),Az=new jk("treeElementCanExpand",!1),Nz=new jk("treeElementHasChild",!1),Fz=new jk("treeFindOpen",!1),Oz="listTypeNavigationMode",Rz="listAutomaticKeyboardNavigation";function Mz(e,t){let i=e.createScoped(t.getHTMLElement());return yz.bindTo(i),i}function Pz(e,t){let i=Cz.bindTo(e),n=()=>{let e=0===t.scrollTop,n=t.scrollHeight-t.renderHeight-t.scrollTop<1;e&&n?i.set("both"):e?i.set("top"):n?i.set("bottom"):i.set("none")};return n(),t.onDidScroll(n)}var Bz="workbench.list.multiSelectModifier",Uz="workbench.list.openMode",Hz="workbench.list.horizontalScrolling",Wz="workbench.list.defaultFindMode",Vz="workbench.list.typeNavigationMode",zz="workbench.list.keyboardNavigation",Kz="workbench.list.scrollByPage",qz="workbench.list.defaultFindMatchType",Gz="workbench.tree.indent",jz="workbench.tree.renderIndentGuides",Yz="workbench.list.smoothScrolling",Qz="workbench.list.mouseWheelScrollSensitivity",$z="workbench.list.fastScrollSensitivity",Xz="workbench.tree.expandMode",Zz="workbench.tree.enableStickyScroll",Jz="workbench.tree.stickyScrollMaxItemCount";function eK(e){return"alt"===e.getValue(Bz)}var tK=class extends Co{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=eK(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(Bz)&&(this.useAltAsMultipleSelectionModifier=eK(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:_A(e)}isSelectionRangeChangeEvent(e){return bA(e)}};function iK(e,t){var i;let n=e.get(fr),s=e.get(SE),o=new bo;return[(0,r.A)((0,r.A)({},t),{},{keyboardNavigationDelegate:{mightProducePrintableCharacter:e=>s.mightProducePrintableCharacter(e)},smoothScrolling:!!n.getValue(Yz),mouseWheelScrollSensitivity:n.getValue(Qz),fastScrollSensitivity:n.getValue($z),multipleSelectionController:null!==(i=t.multipleSelectionController)&&void 0!==i?i:o.add(new tK(n)),keyboardNavigationEventFilter:dK(s),scrollByPage:!!n.getValue(Kz)}),o]}var nK=class extends LA{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,i,n,s,o,a,l,h){let d=void 0===s.horizontalScrolling?!!l.getValue(Hz):s.horizontalScrolling,[c,u]=h.invokeFunction(iK,s);super(e,t,i,n,(0,r.A)((0,r.A)({keyboardSupport:!1},c),{},{horizontalScrolling:d})),this.disposables.add(u),this.contextKeyService=Mz(o,this),this.disposables.add(Pz(this.contextKeyService,this)),this.listSupportsMultiSelect=Sz.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(!1!==s.multipleSelectionSupport),Tz.bindTo(this.contextKeyService).set(!!s.selectionNavigation),this.listHasSelectionOrFocus=kz.bindTo(this.contextKeyService),this.listDoubleSelection=Ez.bindTo(this.contextKeyService),this.listMultiSelection=Dz.bindTo(this.contextKeyService),this.horizontalScrolling=s.horizontalScrolling,this._useAltAsMultipleSelectionModifier=eK(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(s.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{let e=this.getSelection(),t=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(e.length>0||t.length>0),this.listMultiSelection.set(e.length>1),this.listDoubleSelection.set(2===e.length)})})),this.disposables.add(this.onDidChangeFocus(()=>{let e=this.getSelection(),t=this.getFocus();this.listHasSelectionOrFocus.set(e.length>0||t.length>0)})),this.disposables.add(l.onDidChangeConfiguration(e=>{e.affectsConfiguration(Bz)&&(this._useAltAsMultipleSelectionModifier=eK(l));let t={};if(e.affectsConfiguration(Hz)&&void 0===this.horizontalScrolling){let e=!!l.getValue(Hz);t=(0,r.A)((0,r.A)({},t),{},{horizontalScrolling:e})}if(e.affectsConfiguration(Kz)){let e=!!l.getValue(Kz);t=(0,r.A)((0,r.A)({},t),{},{scrollByPage:e})}if(e.affectsConfiguration(Yz)){let e=!!l.getValue(Yz);t=(0,r.A)((0,r.A)({},t),{},{smoothScrolling:e})}if(e.affectsConfiguration(Qz)){let e=l.getValue(Qz);t=(0,r.A)((0,r.A)({},t),{},{mouseWheelScrollSensitivity:e})}if(e.affectsConfiguration($z)){let e=l.getValue($z);t=(0,r.A)((0,r.A)({},t),{},{fastScrollSensitivity:e})}Object.keys(t).length>0&&this.updateOptions(t)})),this.navigator=new aK(this,(0,r.A)({configurationService:l},s)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),void 0!==e.overrideStyles&&this.updateStyles(e.overrideStyles),void 0!==e.multipleSelectionSupport&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?$N(e):QN)}get useAltAsMultipleSelectionModifier(){return this._useAltAsMultipleSelectionModifier}};nK=ki([Ei(5,AS),Ei(6,bz),Ei(7,fr),Ei(8,pn)],nK);var sK=class extends oV{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,i,n,s,o,a,l,h){let d=void 0===s.horizontalScrolling?!!l.getValue(Hz):s.horizontalScrolling,[c,u]=h.invokeFunction(iK,s);super(e,t,i,n,(0,r.A)((0,r.A)({keyboardSupport:!1},c),{},{horizontalScrolling:d})),this.disposables=new bo,this.disposables.add(u),this.contextKeyService=Mz(o,this),this.disposables.add(Pz(this.contextKeyService,this.widget)),this.horizontalScrolling=s.horizontalScrolling,this.listSupportsMultiSelect=Sz.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(!1!==s.multipleSelectionSupport),Tz.bindTo(this.contextKeyService).set(!!s.selectionNavigation),this._useAltAsMultipleSelectionModifier=eK(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(s.overrideStyles),this.disposables.add(l.onDidChangeConfiguration(e=>{e.affectsConfiguration(Bz)&&(this._useAltAsMultipleSelectionModifier=eK(l));let t={};if(e.affectsConfiguration(Hz)&&void 0===this.horizontalScrolling){let e=!!l.getValue(Hz);t=(0,r.A)((0,r.A)({},t),{},{horizontalScrolling:e})}if(e.affectsConfiguration(Kz)){let e=!!l.getValue(Kz);t=(0,r.A)((0,r.A)({},t),{},{scrollByPage:e})}if(e.affectsConfiguration(Yz)){let e=!!l.getValue(Yz);t=(0,r.A)((0,r.A)({},t),{},{smoothScrolling:e})}if(e.affectsConfiguration(Qz)){let e=l.getValue(Qz);t=(0,r.A)((0,r.A)({},t),{},{mouseWheelScrollSensitivity:e})}if(e.affectsConfiguration($z)){let e=l.getValue($z);t=(0,r.A)((0,r.A)({},t),{},{fastScrollSensitivity:e})}Object.keys(t).length>0&&this.updateOptions(t)})),this.navigator=new aK(this,(0,r.A)({configurationService:l},s)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),void 0!==e.overrideStyles&&this.updateStyles(e.overrideStyles),void 0!==e.multipleSelectionSupport&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?$N(e):QN)}get useAltAsMultipleSelectionModifier(){return this._useAltAsMultipleSelectionModifier}dispose(){this.disposables.dispose(),super.dispose()}};sK=ki([Ei(5,AS),Ei(6,bz),Ei(7,fr),Ei(8,pn)],sK);var rK=class extends TV{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,i,n,s,o,a,l,h,d){let c=void 0===o.horizontalScrolling?!!h.getValue(Hz):o.horizontalScrolling,[u,g]=d.invokeFunction(iK,o);super(e,t,i,n,s,(0,r.A)((0,r.A)({keyboardSupport:!1},u),{},{horizontalScrolling:c})),this.disposables.add(g),this.contextKeyService=Mz(a,this),this.disposables.add(Pz(this.contextKeyService,this)),this.listSupportsMultiSelect=Sz.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(!1!==o.multipleSelectionSupport),Tz.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this.listHasSelectionOrFocus=kz.bindTo(this.contextKeyService),this.listDoubleSelection=Ez.bindTo(this.contextKeyService),this.listMultiSelection=Dz.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=eK(h),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{let e=this.getSelection(),t=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(e.length>0||t.length>0),this.listMultiSelection.set(e.length>1),this.listDoubleSelection.set(2===e.length)})})),this.disposables.add(this.onDidChangeFocus(()=>{let e=this.getSelection(),t=this.getFocus();this.listHasSelectionOrFocus.set(e.length>0||t.length>0)})),this.disposables.add(h.onDidChangeConfiguration(e=>{e.affectsConfiguration(Bz)&&(this._useAltAsMultipleSelectionModifier=eK(h));let t={};if(e.affectsConfiguration(Hz)&&void 0===this.horizontalScrolling){let e=!!h.getValue(Hz);t=(0,r.A)((0,r.A)({},t),{},{horizontalScrolling:e})}if(e.affectsConfiguration(Kz)){let e=!!h.getValue(Kz);t=(0,r.A)((0,r.A)({},t),{},{scrollByPage:e})}if(e.affectsConfiguration(Yz)){let e=!!h.getValue(Yz);t=(0,r.A)((0,r.A)({},t),{},{smoothScrolling:e})}if(e.affectsConfiguration(Qz)){let e=h.getValue(Qz);t=(0,r.A)((0,r.A)({},t),{},{mouseWheelScrollSensitivity:e})}if(e.affectsConfiguration($z)){let e=h.getValue($z);t=(0,r.A)((0,r.A)({},t),{},{fastScrollSensitivity:e})}Object.keys(t).length>0&&this.updateOptions(t)})),this.navigator=new lK(this,(0,r.A)({configurationService:h},o)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),void 0!==e.overrideStyles&&this.updateStyles(e.overrideStyles),void 0!==e.multipleSelectionSupport&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?$N(e):QN)}get useAltAsMultipleSelectionModifier(){return this._useAltAsMultipleSelectionModifier}dispose(){this.disposables.dispose(),super.dispose()}};rK=ki([Ei(6,AS),Ei(7,bz),Ei(8,fr),Ei(9,pn)],rK);var oK=class extends Co{constructor(e,t){var i;super(),this.widget=e,this._onDidOpen=this._register(new Ro),this.onDidOpen=this._onDidOpen.event,this._register(_o.filter(this.widget.onDidChangeSelection,e=>Sb(e.browserEvent))(e=>this.onSelectionFromKeyboard(e))),this._register(this.widget.onPointer(e=>this.onPointer(e.element,e.browserEvent))),this._register(this.widget.onMouseDblClick(e=>this.onMouseDblClick(e.element,e.browserEvent))),"boolean"!=typeof(null===t||void 0===t?void 0:t.openOnSingleClick)&&null!==t&&void 0!==t&&t.configurationService?(this.openOnSingleClick="doubleClick"!==(null===t||void 0===t?void 0:t.configurationService.getValue(Uz)),this._register(null===t||void 0===t?void 0:t.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(Uz)&&(this.openOnSingleClick="doubleClick"!==(null===t||void 0===t?void 0:t.configurationService.getValue(Uz)))}))):this.openOnSingleClick=null===(i=null===t||void 0===t?void 0:t.openOnSingleClick)||void 0===i||i}onSelectionFromKeyboard(e){if(1!==e.elements.length)return;let t=e.browserEvent,i="boolean"!=typeof t.preserveFocus||t.preserveFocus,n="boolean"==typeof t.pinned?t.pinned:!i;this._open(this.getSelectedElement(),i,n,!1,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||2===t.detail)return;let i=1===t.button,n=t.ctrlKey||t.metaKey||t.altKey;this._open(e,!0,i,n,t)}onMouseDblClick(e,t){if(!t)return;let i=t.target;if(i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&t.offsetX<16)return;let n=t.ctrlKey||t.metaKey||t.altKey;this._open(e,!1,!0,n,t)}_open(e,t,i,n,s){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:i,revealIfVisible:!0},sideBySide:n,element:e,browserEvent:s})}},aK=class extends oK{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}},lK=class extends oK{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}},hK=class extends oK{constructor(e,t){super(e,t)}getSelectedElement(){var e;return null!==(e=this.widget.getSelection()[0])&&void 0!==e?e:void 0}};function dK(e){let t=!1;return i=>{if(i.toKeyCodeChord().isModifierKey())return!1;if(t)return t=!1,!1;let n=e.softDispatch(i,i.target);return n.kind===_D.MoreChordsNeeded?(t=!0,!1):(t=!1,n.kind===_D.NoMatchingKb)}}var cK=class extends BV{get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,i,n,s,r,o,a,l){let{options:h,getTypeNavigationMode:d,disposable:c}=r.invokeFunction(_K,s);super(e,t,i,n,h),this.disposables.add(c),this.internals=new bK(this,s,d,s.overrideStyles,o,a,l),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};cK=ki([Ei(5,pn),Ei(6,AS),Ei(7,bz),Ei(8,fr)],cK);var uK=class extends WV{get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,i,n,s,r,o,a,l){let{options:h,getTypeNavigationMode:d,disposable:c}=r.invokeFunction(_K,s);super(e,t,i,n,h),this.disposables.add(c),this.internals=new bK(this,s,d,s.overrideStyles,o,a,l),this.disposables.add(this.internals)}updateOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};uK=ki([Ei(5,pn),Ei(6,AS),Ei(7,bz),Ei(8,fr)],uK);var gK=class extends az{get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,i,n,s,r,o,a,l,h){let{options:d,getTypeNavigationMode:c,disposable:u}=o.invokeFunction(_K,r);super(e,t,i,n,s,d),this.disposables.add(u),this.internals=new bK(this,r,c,r.overrideStyles,a,l,h),this.disposables.add(this.internals)}updateOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super.updateOptions(e),void 0!==e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};gK=ki([Ei(6,pn),Ei(7,AS),Ei(8,bz),Ei(9,fr)],gK);var pK=class extends iz{get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,i,n,s,r,o,a,l,h){let{options:d,getTypeNavigationMode:c,disposable:u}=o.invokeFunction(_K,r);super(e,t,i,n,s,d),this.disposables.add(u),this.internals=new bK(this,r,c,r.overrideStyles,a,l,h),this.disposables.add(this.internals)}updateOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};pK=ki([Ei(6,pn),Ei(7,AS),Ei(8,bz),Ei(9,fr)],pK);var fK=class extends rz{get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,i,n,s,r,o,a,l,h,d){let{options:c,getTypeNavigationMode:u,disposable:g}=a.invokeFunction(_K,o);super(e,t,i,n,s,r,c),this.disposables.add(g),this.internals=new bK(this,o,u,o.overrideStyles,l,h,d),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};function mK(e){let t=e.getValue(Wz);if("highlight"===t)return LW.Highlight;if("filter"===t)return LW.Filter;let i=e.getValue(zz);return"simple"===i||"highlight"===i?LW.Highlight:"filter"===i?LW.Filter:void 0}function vK(e){let t=e.getValue(qz);return"fuzzy"===t?AW.Fuzzy:"contiguous"===t?AW.Contiguous:void 0}function _K(e,t){var i,n,s;let o=e.get(fr),a=e.get(bE),l=e.get(AS),h=e.get(pn),d=void 0===t.horizontalScrolling?!!o.getValue(Hz):t.horizontalScrolling,[c,u]=h.invokeFunction(iK,t),g=t.paddingBottom,p=void 0===t.renderIndentGuides?o.getValue(jz):t.renderIndentGuides;return{getTypeNavigationMode:()=>{let e=l.getContextKeyValue(Oz);if("automatic"===e)return uA.Automatic;if("trigger"===e||!1===l.getContextKeyValue(Rz))return uA.Trigger;let t=o.getValue(Vz);return"automatic"===t?uA.Automatic:"trigger"===t?uA.Trigger:void 0},disposable:u,options:(0,r.A)((0,r.A)({keyboardSupport:!1},c),{},{indent:"number"==typeof o.getValue(Gz)?o.getValue(Gz):void 0,renderIndentGuides:p,smoothScrolling:!!o.getValue(Yz),defaultFindMode:null!==(i=t.defaultFindMode)&&void 0!==i?i:mK(o),defaultFindMatchType:null!==(n=t.defaultFindMatchType)&&void 0!==n?n:vK(o),horizontalScrolling:d,scrollByPage:!!o.getValue(Kz),paddingBottom:g,hideTwistiesOfChildlessElements:t.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:null!==(s=t.expandOnlyOnTwistieClick)&&void 0!==s?s:"doubleClick"===o.getValue(Xz),contextViewProvider:a,findWidgetStyles:jN,enableStickyScroll:!!o.getValue(Zz),stickyScrollMaxItemCount:Number(o.getValue(Jz))})}}fK=ki([Ei(7,pn),Ei(8,AS),Ei(9,bz),Ei(10,fr)],fK);var bK=class{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,i,n,s,o,a){var l;this.tree=e,this.disposables=[],this.contextKeyService=Mz(s,e),this.disposables.push(Pz(this.contextKeyService,e)),this.listSupportsMultiSelect=Sz.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(!1!==t.multipleSelectionSupport),Tz.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.listSupportFindWidget=Iz.bindTo(this.contextKeyService),this.listSupportFindWidget.set(null===(l=t.findWidgetEnabled)||void 0===l||l),this.hasSelectionOrFocus=kz.bindTo(this.contextKeyService),this.hasDoubleSelection=Ez.bindTo(this.contextKeyService),this.hasMultiSelection=Dz.bindTo(this.contextKeyService),this.treeElementCanCollapse=xz.bindTo(this.contextKeyService),this.treeElementHasParent=Lz.bindTo(this.contextKeyService),this.treeElementCanExpand=Az.bindTo(this.contextKeyService),this.treeElementHasChild=Nz.bindTo(this.contextKeyService),this.treeFindOpen=Fz.bindTo(this.contextKeyService),this.treeStickyScrollFocused=wz.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=eK(a),this.updateStyleOverrides(n);let h=()=>{let t=e.getFocus()[0];if(!t)return;let i=e.getNode(t);this.treeElementCanCollapse.set(i.collapsible&&!i.collapsed),this.treeElementHasParent.set(!!e.getParentElement(t)),this.treeElementCanExpand.set(i.collapsible&&i.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(t))},d=new Set;d.add(Oz),d.add(Rz),this.disposables.push(this.contextKeyService,o.register(e),e.onDidChangeSelection(()=>{let t=e.getSelection(),i=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(t.length>0||i.length>0),this.hasMultiSelection.set(t.length>1),this.hasDoubleSelection.set(2===t.length)})}),e.onDidChangeFocus(()=>{let t=e.getSelection(),i=e.getFocus();this.hasSelectionOrFocus.set(t.length>0||i.length>0),h()}),e.onDidChangeCollapseState(h),e.onDidChangeModel(h),e.onDidChangeFindOpenState(e=>this.treeFindOpen.set(e)),e.onDidChangeStickyScrollFocused(e=>this.treeStickyScrollFocused.set(e)),a.onDidChangeConfiguration(n=>{let s={};if(n.affectsConfiguration(Bz)&&(this._useAltAsMultipleSelectionModifier=eK(a)),n.affectsConfiguration(Gz)){let e=a.getValue(Gz);s=(0,r.A)((0,r.A)({},s),{},{indent:e})}if(n.affectsConfiguration(jz)&&void 0===t.renderIndentGuides){let e=a.getValue(jz);s=(0,r.A)((0,r.A)({},s),{},{renderIndentGuides:e})}if(n.affectsConfiguration(Yz)){let e=!!a.getValue(Yz);s=(0,r.A)((0,r.A)({},s),{},{smoothScrolling:e})}if(n.affectsConfiguration(Wz)||n.affectsConfiguration(zz)){let e=mK(a);s=(0,r.A)((0,r.A)({},s),{},{defaultFindMode:e})}if(n.affectsConfiguration(Vz)||n.affectsConfiguration(zz)){let e=i();s=(0,r.A)((0,r.A)({},s),{},{typeNavigationMode:e})}if(n.affectsConfiguration(qz)){let e=vK(a);s=(0,r.A)((0,r.A)({},s),{},{defaultFindMatchType:e})}if(n.affectsConfiguration(Hz)&&void 0===t.horizontalScrolling){let e=!!a.getValue(Hz);s=(0,r.A)((0,r.A)({},s),{},{horizontalScrolling:e})}if(n.affectsConfiguration(Kz)){let e=!!a.getValue(Kz);s=(0,r.A)((0,r.A)({},s),{},{scrollByPage:e})}if(n.affectsConfiguration(Xz)&&void 0===t.expandOnlyOnTwistieClick&&(s=(0,r.A)((0,r.A)({},s),{},{expandOnlyOnTwistieClick:"doubleClick"===a.getValue(Xz)})),n.affectsConfiguration(Zz)){let e=a.getValue(Zz);s=(0,r.A)((0,r.A)({},s),{},{enableStickyScroll:e})}if(n.affectsConfiguration(Jz)){let e=Math.max(1,a.getValue(Jz));s=(0,r.A)((0,r.A)({},s),{},{stickyScrollMaxItemCount:e})}if(n.affectsConfiguration(Qz)){let e=a.getValue(Qz);s=(0,r.A)((0,r.A)({},s),{},{mouseWheelScrollSensitivity:e})}if(n.affectsConfiguration($z)){let e=a.getValue($z);s=(0,r.A)((0,r.A)({},s),{},{fastScrollSensitivity:e})}Object.keys(s).length>0&&e.updateOptions(s)}),this.contextKeyService.onDidChangeContext(t=>{t.affectsSome(d)&&e.updateOptions({typeNavigationMode:i()})})),this.navigator=new hK(e,(0,r.A)({configurationService:a},t)),this.disposables.push(this.navigator)}get useAltAsMultipleSelectionModifier(){return this._useAltAsMultipleSelectionModifier}updateOptions(e){void 0!==e.multipleSelectionSupport&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){this.tree.style(e?$N(e):QN)}dispose(){this.disposables=po(this.disposables)}};bK=ki([Ei(4,AS),Ei(5,bz),Ei(6,fr)],bK),Tn.as(em).registerConfiguration({id:"workbench",order:7,title:Li(1952,"Workbench"),type:"object",properties:{[Bz]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[Li(1953,"Maps to `Control` on Windows and Linux and to `Command` on macOS."),Li(1954,"Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:Li(1955,"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[Uz]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:Li(1956,"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[Hz]:{type:"boolean",default:!1,description:Li(1957,"Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[Kz]:{type:"boolean",default:!1,description:Li(1958,"Controls whether clicks in the scrollbar scroll page by page.")},[Gz]:{type:"number",default:8,minimum:4,maximum:40,description:Li(1959,"Controls tree indentation in pixels.")},[jz]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:Li(1960,"Controls whether the tree should render indent guides.")},[Yz]:{type:"boolean",default:!1,description:Li(1961,"Controls whether lists and trees have smooth scrolling.")},[Qz]:{type:"number",default:1,markdownDescription:Li(1962,"A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[$z]:{type:"number",default:5,markdownDescription:Li(1963,"Scrolling speed multiplier when pressing `Alt`.")},[Wz]:{type:"string",enum:["highlight","filter"],enumDescriptions:[Li(1964,"Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),Li(1965,"Filter elements when searching.")],default:"highlight",description:Li(1966,"Controls the default find mode for lists and trees in the workbench.")},[zz]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[Li(1967,"Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),Li(1968,"Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),Li(1969,"Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:Li(1970,"Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:Li(1971,"Please use 'workbench.list.defaultFindMode' and\t'workbench.list.typeNavigationMode' instead.")},[qz]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[Li(1972,"Use fuzzy matching when searching."),Li(1973,"Use contiguous matching when searching.")],default:"fuzzy",description:Li(1974,"Controls the type of matching used when searching lists and trees in the workbench.")},[Xz]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:Li(1975,"Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[Zz]:{type:"boolean",default:!0,description:Li(1976,"Controls whether sticky scrolling is enabled in trees.")},[Jz]:{type:"number",minimum:1,default:7,markdownDescription:Li(1977,"Controls the number of sticky elements displayed in the tree when {0} is enabled.","`#workbench.tree.enableStickyScroll#`")},[Vz]:{type:"string",enum:["automatic","trigger"],default:"automatic",markdownDescription:Li(1978,"Controls how type navigation works in lists and trees in the workbench. When set to `trigger`, type navigation begins once the `list.triggerTypeNavigation` command is run.")}}});var CK,yK,wK=Mb,SK=class{constructor(e,t,i){this.index=e,this.hasCheckbox=t,this._hidden=!1,this._init=new Jo(()=>{var e;let t=null!==(e=i.label)&&void 0!==e?e:"";return{saneLabel:t,saneSortLabel:jy(t).text.trim(),saneAriaLabel:i.ariaLabel||[t,this.saneDescription,this.saneDetail].map(e=>Ky(e)).filter(e=>!!e).join(", ")}}),this._saneDescription=i.description,this._saneTooltip=i.tooltip}get saneLabel(){return this._init.value.saneLabel}get saneSortLabel(){return this._init.value.saneSortLabel}get saneAriaLabel(){return this._init.value.saneAriaLabel}get element(){return this._element}set element(e){this._element=e}get hidden(){return this._hidden}set hidden(e){this._hidden=e}get saneDescription(){return this._saneDescription}set saneDescription(e){this._saneDescription=e}get saneDetail(){return this._saneDetail}set saneDetail(e){this._saneDetail=e}get saneTooltip(){return this._saneTooltip}set saneTooltip(e){this._saneTooltip=e}get labelHighlights(){return this._labelHighlights}set labelHighlights(e){this._labelHighlights=e}get descriptionHighlights(){return this._descriptionHighlights}set descriptionHighlights(e){this._descriptionHighlights=e}get detailHighlights(){return this._detailHighlights}set detailHighlights(e){this._detailHighlights=e}},kK=class extends SK{constructor(e,t,i,n,s,r,o){var a,l,h;super(e,i,r),this.childIndex=t,this.fireButtonTriggered=n,this._onChecked=s,this.item=r,this._separator=o,this._checked=!1,this.onChecked=i?_o.map(_o.filter(this._onChecked.event,e=>e.element===this),e=>e.checked):_o.None,this._saneDetail=r.detail,this._labelHighlights=null===(a=r.highlights)||void 0===a?void 0:a.label,this._descriptionHighlights=null===(l=r.highlights)||void 0===l?void 0:l.description,this._detailHighlights=null===(h=r.highlights)||void 0===h?void 0:h.detail}get separator(){return this._separator}set separator(e){this._separator=e}get checked(){return this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire({element:this,checked:e}))}get checkboxDisabled(){return!!this.item.disabled}};!function(e){e[e.NONE=0]="NONE",e[e.MOUSE_HOVER=1]="MOUSE_HOVER",e[e.ACTIVE_ITEM=2]="ACTIVE_ITEM"}(yK||(yK={}));var EK=class extends SK{constructor(e,t,i){super(e,!1,i),this.fireSeparatorButtonTriggered=t,this.separator=i,this.children=[],this.focusInsideSeparator=yK.NONE}},DK=class{getHeight(e){return e instanceof EK?30:e.saneDetail?44:22}getTemplateId(e){return e instanceof kK?xK.ID:LK.ID}},TK=class{getWidgetAriaLabel(){return Li(2030,"Quick Input")}getAriaLabel(e){var t;return null!==(t=e.separator)&&void 0!==t&&t.label?"".concat(e.saneAriaLabel,", ").concat(e.separator.label):e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(e.hasCheckbox&&e instanceof kK)return{get value(){return e.checked},onDidChange:t=>e.onChecked(()=>t())}}},IK=class{constructor(e){this.hoverDelegate=e}renderTemplate(e){let t=Object.create(null);t.toDisposeElement=new bo,t.toDisposeTemplate=new bo,t.entry=xb(e,wK(".quick-input-list-entry"));let i=xb(t.entry,wK("label.quick-input-list-label"));t.outerLabel=i,t.checkbox=t.toDisposeTemplate.add(new yo),t.toDisposeTemplate.add(z_(i,kb.CLICK,e=>{if(t.checkbox.value&&!e.defaultPrevented&&t.checkbox.value.enabled){let e=!t.checkbox.value.checked;t.checkbox.value.checked=e,t.element.checked=e}}));let n=xb(i,wK(".quick-input-list-rows")),s=xb(n,wK(".quick-input-list-row")),r=xb(n,wK(".quick-input-list-row"));return t.label=new eW(s,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.label),t.icon=Lb(t.label.element,wK(".quick-input-list-icon")),t.keybinding=new lW(xb(s,wK(".quick-input-list-entry-keybinding")),ss),t.toDisposeTemplate.add(t.keybinding),t.detail=new eW(xb(r,wK(".quick-input-list-label-meta")),{supportHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.detail),t.separator=xb(t.entry,wK(".quick-input-list-separator")),t.actionBar=new mF(t.entry,this.hoverDelegate?{hoverDelegate:this.hoverDelegate}:void 0),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.add(t.actionBar),t}disposeTemplate(e){e.toDisposeElement.dispose(),e.toDisposeTemplate.dispose()}disposeElement(e,t,i){i.toDisposeElement.clear(),i.actionBar.clear()}},xK=($t=class extends IK{constructor(e,t){super(e),this.themeService=t,this._itemsWithSeparatorsFrequency=new Map}get templateId(){return CK.ID}ensureCheckbox(e,t){var i;if(!e.hasCheckbox)return null!==(i=t.checkbox.value)&&void 0!==i&&i.domNode.remove(),void t.checkbox.clear();let n=t.checkbox.value;n?n.setTitle(e.saneLabel):(n=new YU(e.saneLabel,e.checked,(0,r.A)((0,r.A)({},qN),{},{size:15})),t.checkbox.value=n,t.outerLabel.prepend(n.domNode),n.domNode.tabIndex=-1),e.checkboxDisabled?n.disable():n.enable(),n.checked=e.checked,t.toDisposeElement.add(e.onChecked(e=>n.checked=e)),t.toDisposeElement.add(n.onChange(()=>e.checked=n.checked))}renderElement(e,t,i){var n,s;let r=e.element;i.element=r,r.element=null!==(n=i.entry)&&void 0!==n?n:void 0;let o=r.item;r.element.classList.toggle("not-pickable",!1===r.item.pickable),this.ensureCheckbox(r,i);let a,{labelHighlights:l,descriptionHighlights:h,detailHighlights:d}=r;if(o.iconPath){var c;let e=ou(this.themeService.getColorTheme().type)?o.iconPath.dark:null!==(c=o.iconPath.light)&&void 0!==c?c:o.iconPath.dark,t=Gs.revive(e);i.icon.className="quick-input-list-icon",i.icon.style.backgroundImage=Gf(t)}else i.icon.style.backgroundImage="",i.icon.className=o.iconClass?"quick-input-list-icon ".concat(o.iconClass):"";!r.saneTooltip&&r.saneDescription&&(a={markdown:{value:na(r.saneDescription),supportThemeIcons:!0},markdownNotSupportedFallback:r.saneDescription});let u={matches:l||[],descriptionTitle:a,descriptionMatches:h||[],labelEscapeNewLines:!0};if(u.extraClasses=o.iconClasses,u.italic=o.italic,u.strikethrough=o.strikethrough,i.entry.classList.remove("quick-input-list-separator-as-item"),i.label.setLabel(r.saneLabel,r.saneDescription,u),i.keybinding.set(o.keybinding),r.saneDetail){let e;r.saneTooltip||(e={markdown:{value:na(r.saneDetail),supportThemeIcons:!0},markdownNotSupportedFallback:r.saneDetail}),i.detail.element.style.display="",i.detail.setLabel(r.saneDetail,void 0,{matches:d,title:e,labelEscapeNewLines:!0})}else i.detail.element.style.display="none";null!==(s=r.separator)&&void 0!==s&&s.label?(i.separator.textContent=r.separator.label,i.separator.style.display="",this.addItemWithSeparator(r)):i.separator.style.display="none",i.entry.classList.toggle("quick-input-list-separator-border",!!r.separator&&0!==r.childIndex);let g=o.buttons;g&&g.length?(i.actionBar.push(g.map((e,t)=>tH(e,"id-".concat(t),()=>r.fireButtonTriggered({button:e,item:r.item}))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions")}disposeElement(e,t,i){this.removeItemWithSeparator(e.element),super.disposeElement(e,t,i)}isItemWithSeparatorVisible(e){return this._itemsWithSeparatorsFrequency.has(e)}addItemWithSeparator(e){this._itemsWithSeparatorsFrequency.set(e,(this._itemsWithSeparatorsFrequency.get(e)||0)+1)}removeItemWithSeparator(e){let t=this._itemsWithSeparatorsFrequency.get(e)||0;t>1?this._itemsWithSeparatorsFrequency.set(e,t-1):this._itemsWithSeparatorsFrequency.delete(e)}},{_:CK=$t},{_:$t.ID="quickpickitem"},$t);xK=CK=ki([Ei(1,$w)],xK);var LK=(Xt=class e extends IK{constructor(){super(...arguments),this._visibleSeparatorsFrequency=new Map}get templateId(){return e.ID}get visibleSeparators(){return[...this._visibleSeparatorsFrequency.keys()]}isSeparatorVisible(e){return this._visibleSeparatorsFrequency.has(e)}renderElement(e,t,i){var n;let s=e.element;i.element=s,s.element=null!==(n=i.entry)&&void 0!==n?n:void 0,s.element.classList.toggle("focus-inside",!!s.focusInsideSeparator);let r,o=s.separator,{labelHighlights:a,descriptionHighlights:l}=s;i.icon.style.backgroundImage="",i.icon.className="",!s.saneTooltip&&s.saneDescription&&(r={markdown:{value:na(s.saneDescription),supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDescription});let h={matches:a||[],descriptionTitle:r,descriptionMatches:l||[],labelEscapeNewLines:!0};i.entry.classList.add("quick-input-list-separator-as-item"),i.label.setLabel(s.saneLabel,s.saneDescription,h),i.separator.style.display="none",i.entry.classList.add("quick-input-list-separator-border");let d=o.buttons;d&&d.length?(i.actionBar.push(d.map((e,t)=>tH(e,"id-".concat(t),()=>s.fireSeparatorButtonTriggered({button:e,separator:s.separator}))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions"),this.addSeparator(s)}disposeElement(e,t,i){var n;this.removeSeparator(e.element),this.isSeparatorVisible(e.element)||null!==(n=e.element.element)&&void 0!==n&&n.classList.remove("focus-inside"),super.disposeElement(e,t,i)}addSeparator(e){this._visibleSeparatorsFrequency.set(e,(this._visibleSeparatorsFrequency.get(e)||0)+1)}removeSeparator(e){let t=this._visibleSeparatorsFrequency.get(e)||0;t>1?this._visibleSeparatorsFrequency.set(e,t-1):this._visibleSeparatorsFrequency.delete(e)}},{_:Xt.ID="quickpickseparator"},Xt),AK=class extends Co{constructor(e,t,i,n,s,r){super(),this.parent=e,this.hoverDelegate=t,this.linkOpenerDelegate=i,this.accessibilityService=r,this._onKeyDown=new Ro,this.onKeyDown=this._onKeyDown.event,this._onLeave=new Ro,this.onLeave=this._onLeave.event,this._visibleCountObservable=av("VisibleCount",0),this.onChangedVisibleCount=_o.fromObservable(this._visibleCountObservable,this._store),this._allVisibleCheckedObservable=av("AllVisibleChecked",!1),this.onChangedAllVisibleChecked=_o.fromObservable(this._allVisibleCheckedObservable,this._store),this._checkedCountObservable=av("CheckedCount",0),this.onChangedCheckedCount=_o.fromObservable(this._checkedCountObservable,this._store),this._checkedElementsObservable=RP({equalsFn:Mr},[]),this.onChangedCheckedElements=_o.fromObservable(this._checkedElementsObservable,this._store),this._onButtonTriggered=new Ro,this.onButtonTriggered=this._onButtonTriggered.event,this._onSeparatorButtonTriggered=new Ro,this.onSeparatorButtonTriggered=this._onSeparatorButtonTriggered.event,this._elementChecked=new Ro,this._elementCheckedEventBufferer=new Ho,this._hasCheckboxes=!1,this._inputElements=[],this._elementTree=[],this._itemElements=[],this._elementDisposable=this._register(new bo),this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._matchOnMeta=!0,this._sortByLabel=!0,this._shouldLoop=!0,this._container=xb(this.parent,wK(".quick-input-list")),this._separatorRenderer=new LK(t),this._itemRenderer=s.createInstance(xK,t),this._tree=this._register(s.createInstance(cK,"QuickInput",this._container,new DK,[this._itemRenderer,this._separatorRenderer],{filter:{filter:e=>e.hidden?nW.Hidden:e instanceof EK?nW.Recurse:nW.Visible},sorter:{compare:(e,t)=>this.sortByLabel&&this._lastQueryString?function(e,t,i){let n=e.labelHighlights||[],s=t.labelHighlights||[];return n.length&&!s.length?-1:!n.length&&s.length?1:0===n.length&&0===s.length?0:nV(e.saneSortLabel,t.saneSortLabel,i)}(e,t,this._lastQueryString.toLowerCase()):0},accessibilityProvider:new TK,setRowLineHeight:!1,multipleSelectionSupport:!1,hideTwistiesOfChildlessElements:!0,renderIndentGuides:kW.None,findWidgetEnabled:!1,indent:0,horizontalScrolling:!1,allowNonCollapsibleParents:!0,alwaysConsumeMouseWheel:!0})),this._tree.getHTMLElement().id=n,this._registerListeners()}get onDidChangeFocus(){return _o.map(this._tree.onDidChangeFocus,e=>e.elements.filter(e=>e instanceof kK).map(e=>e.item),this._store)}get onDidChangeSelection(){return _o.map(this._tree.onDidChangeSelection,e=>({items:e.elements.filter(e=>e instanceof kK).map(e=>e.item),event:e.browserEvent}),this._store)}get displayed(){return"none"!==this._container.style.display}set displayed(e){this._container.style.display=e?"":"none"}get scrollTop(){return this._tree.scrollTop}set scrollTop(e){this._tree.scrollTop=e}get ariaLabel(){return this._tree.ariaLabel}set ariaLabel(e){this._tree.ariaLabel=null!==e&&void 0!==e?e:""}set enabled(e){this._tree.getHTMLElement().style.pointerEvents=e?"":"none"}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e}get matchOnMeta(){return this._matchOnMeta}set matchOnMeta(e){this._matchOnMeta=e}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e}get shouldLoop(){return this._shouldLoop}set shouldLoop(e){this._shouldLoop=e}_registerListeners(){this._registerOnKeyDown(),this._registerOnContainerClick(),this._registerOnMouseMiddleClick(),this._registerOnTreeModelChanged(),this._registerOnElementChecked(),this._registerOnContextMenu(),this._registerHoverListeners(),this._registerSelectionChangeListener(),this._registerSeparatorActionShowingListeners()}_registerOnKeyDown(){this._register(this._tree.onKeyDown(e=>{let t=new C_(e);if(t.keyCode===Kv.Space)this.toggleCheckbox();this._onKeyDown.fire(t)}))}_registerOnContainerClick(){this._register(W_(this._container,kb.CLICK,e=>{(e.x||e.y)&&this._onLeave.fire()}))}_registerOnMouseMiddleClick(){this._register(W_(this._container,kb.AUXCLICK,e=>{1===e.button&&this._onLeave.fire()}))}_registerOnTreeModelChanged(){this._register(this._tree.onDidChangeModel(()=>{let e=this._itemElements.filter(e=>!e.hidden).length;this._visibleCountObservable.set(e,void 0),this._hasCheckboxes&&this._updateCheckedObservables()}))}_registerOnElementChecked(){this._register(this._elementCheckedEventBufferer.wrapEvent(this._elementChecked.event,(e,t)=>t)(e=>this._updateCheckedObservables()))}_registerOnContextMenu(){this._register(this._tree.onContextMenu(e=>{e.element&&(e.browserEvent.preventDefault(),this._tree.setSelection([e.element]))}))}_registerHoverListeners(){let e=this._register(new kl("function"==typeof this.hoverDelegate.delay?this.hoverDelegate.delay():this.hoverDelegate.delay));this._register(this._tree.onMouseOver(async t=>{var i;if(Cb(t.browserEvent.target))e.cancel();else if(Cb(t.browserEvent.relatedTarget)||!sb(t.browserEvent.relatedTarget,null===(i=t.element)||void 0===i?void 0:i.element))try{await e.trigger(async()=>{t.element instanceof kK&&this.showHover(t.element)})}catch(e){if(!Bi(e))throw e}})),this._register(this._tree.onMouseOut(t=>{var i;sb(t.browserEvent.relatedTarget,null===(i=t.element)||void 0===i?void 0:i.element)||e.cancel()}))}_registerSeparatorActionShowingListeners(){this._register(this._tree.onDidChangeFocus(e=>{let t=e.elements[0]?this._tree.getParentElement(e.elements[0]):null;for(let i of this._separatorRenderer.visibleSeparators){let e=i===t;!!(i.focusInsideSeparator&yK.ACTIVE_ITEM)!==e&&(e?i.focusInsideSeparator|=yK.ACTIVE_ITEM:i.focusInsideSeparator&=~yK.ACTIVE_ITEM,this._tree.rerender(i))}})),this._register(this._tree.onMouseOver(e=>{let t=e.element?this._tree.getParentElement(e.element):null;for(let i of this._separatorRenderer.visibleSeparators)i===t&&(i.focusInsideSeparator&yK.MOUSE_HOVER||(i.focusInsideSeparator|=yK.MOUSE_HOVER,this._tree.rerender(i)))})),this._register(this._tree.onMouseOut(e=>{let t=e.element?this._tree.getParentElement(e.element):null;for(let i of this._separatorRenderer.visibleSeparators)i===t&&i.focusInsideSeparator&yK.MOUSE_HOVER&&(i.focusInsideSeparator&=~yK.MOUSE_HOVER,this._tree.rerender(i))}))}_registerSelectionChangeListener(){this._register(this._tree.onDidChangeSelection(e=>{let t=e.elements.filter(e=>e instanceof kK);t.length!==e.elements.length&&(1===e.elements.length&&e.elements[0]instanceof EK&&(this._tree.setFocus([e.elements[0].children[0]]),this._tree.reveal(e.elements[0],0)),this._tree.setSelection(t))}))}setAllVisibleChecked(e){this._elementCheckedEventBufferer.bufferEvents(()=>{this._itemElements.forEach(t=>{!t.hidden&&!t.checkboxDisabled&&!1!==t.item.pickable&&(t.checked=e)})})}setElements(e){let t;this._elementDisposable.clear(),this._lastQueryString=void 0,this._inputElements=e,this._hasCheckboxes=this.parent.classList.contains("show-checkboxes"),this._itemElements=[],this._elementTree=e.reduce((i,n,s)=>{let r;if("separator"===n.type){if(!n.buttons)return i;t=new EK(s,e=>this._onSeparatorButtonTriggered.fire(e),n),r=t}else{var o;let a,l=s>0?e[s-1]:void 0;l&&"separator"===l.type&&!l.buttons&&(a=l);let h=new kK(s,null!==(o=t)&&void 0!==o&&o.children?t.children.length:s,this._hasCheckboxes&&!1!==n.pickable,e=>this._onButtonTriggered.fire(e),this._elementChecked,n,a);if(this._itemElements.push(h),t)return t.children.push(h),i;r=h}return i.push(r),i},[]),this._setElementsToTree(this._elementTree),this.accessibilityService.isScreenReaderOptimized()&&setTimeout(()=>{let e=this._tree.getHTMLElement().querySelector(".monaco-list-row.focused"),t=null===e||void 0===e?void 0:e.parentNode;if(e&&t){let i=e.nextSibling;e.remove(),t.insertBefore(e,i)}},0)}setFocusedElements(e){let t=e.map(e=>this._itemElements.find(t=>t.item===e)).filter(e=>!!e).filter(e=>!e.hidden);if(this._tree.setFocus(t),e.length>0){let e=this._tree.getFocus()[0];e&&this._tree.reveal(e)}}getActiveDescendant(){return this._tree.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){let t=e.map(e=>this._itemElements.find(t=>t.item===e)).filter(e=>!!e);this._tree.setSelection(t)}getCheckedElements(){return this._itemElements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){this._elementCheckedEventBufferer.bufferEvents(()=>{let t=new Set;for(let i of e)t.add(i);for(let e of this._itemElements)e.checked=t.has(e.item)})}focus(e){if(this._itemElements.length)switch(e===WU.Second&&this._itemElements.length<2&&(e=WU.First),e){case WU.First:this._tree.scrollTop=0,this._tree.focusFirst(void 0,e=>e.element instanceof kK);break;case WU.Second:{this._tree.scrollTop=0;let e=!1;this._tree.focusFirst(void 0,t=>t.element instanceof kK&&(!!e||(e=!e,!1)));break}case WU.Last:this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,e=>e.element instanceof kK);break;case WU.Next:{let e=this._tree.getFocus();this._tree.focusNext(void 0,this._shouldLoop,void 0,e=>e.element instanceof kK&&(this._tree.reveal(e.element),!0));let t=this._tree.getFocus();e.length&&e[0]===t[0]&&this._onLeave.fire();break}case WU.Previous:{let e=this._tree.getFocus();this._tree.focusPrevious(void 0,this._shouldLoop,void 0,e=>{if(!(e.element instanceof kK))return!1;let t=this._tree.getParentElement(e.element);return null===t||t.children[0]!==e.element?this._tree.reveal(e.element):this._tree.reveal(t),!0});let t=this._tree.getFocus();e.length&&e[0]===t[0]&&this._onLeave.fire();break}case WU.NextPage:this._tree.focusNextPage(void 0,e=>e.element instanceof kK&&(this._tree.reveal(e.element),!0));break;case WU.PreviousPage:this._tree.focusPreviousPage(void 0,e=>{if(!(e.element instanceof kK))return!1;let t=this._tree.getParentElement(e.element);return null===t||t.children[0]!==e.element?this._tree.reveal(e.element):this._tree.reveal(t),!0});break;case WU.NextSeparator:{let e=!1,t=this._tree.getFocus()[0];this._tree.focusNext(void 0,!0,void 0,t=>{if(e)return!0;if(t.element instanceof EK)e=!0,this._separatorRenderer.isSeparatorVisible(t.element)?this._tree.reveal(t.element.children[0]):this._tree.reveal(t.element,0);else if(t.element instanceof kK){if(t.element.separator)return this._itemRenderer.isItemWithSeparatorVisible(t.element)?this._tree.reveal(t.element):this._tree.reveal(t.element,0),!0;if(t.element===this._elementTree[0])return this._tree.reveal(t.element,0),!0}return!1}),t===this._tree.getFocus()[0]&&(this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,e=>e.element instanceof kK));break}case WU.PreviousSeparator:{var t;let e,i=!(null===(t=this._tree.getFocus()[0])||void 0===t||!t.separator);this._tree.focusPrevious(void 0,!0,void 0,t=>{if(t.element instanceof EK)i?e||(this._separatorRenderer.isSeparatorVisible(t.element)?this._tree.reveal(t.element):this._tree.reveal(t.element,0),e=t.element.children[0]):i=!0;else if(t.element instanceof kK&&!e)if(t.element.separator)this._itemRenderer.isItemWithSeparatorVisible(t.element)?this._tree.reveal(t.element):this._tree.reveal(t.element,0),e=t.element;else if(t.element===this._elementTree[0])return this._tree.reveal(t.element,0),!0;return!1}),e&&this._tree.setFocus([e]);break}}}clearFocus(){this._tree.setFocus([])}domFocus(){this._tree.domFocus()}layout(e){this._tree.getHTMLElement().style.maxHeight=e?"".concat(44*Math.floor(e/44)+6,"px"):"",this._tree.layout()}filter(e){if(this._lastQueryString=e,!(this._sortByLabel||this._matchOnLabel||this._matchOnDescription||this._matchOnDetail))return this._tree.layout(),!1;let t=e;if((e=e.trim())&&(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail)){let i;this._itemElements.forEach(n=>{var s,r,o,a;let l;l="fuzzy"===this.matchOnLabelMode?this.matchOnLabel&&null!==(s=Yy(e,jy(n.saneLabel)))&&void 0!==s?s:void 0:this.matchOnLabel&&null!==(r=function(e,t){let{text:i,iconOffsets:n}=t;if(!n||0===n.length)return NK(e,i);let s=ra(i," "),r=i.length-s.length,o=NK(e,s);if(o)for(let a of o){let e=n[a.start+r]+r;a.start+=e,a.end+=e}return o}(t,jy(n.saneLabel)))&&void 0!==r?r:void 0;let h=this.matchOnDescription&&null!==(o=Yy(e,jy(n.saneDescription||"")))&&void 0!==o?o:void 0,d=this.matchOnDetail&&null!==(a=Yy(e,jy(n.saneDetail||"")))&&void 0!==a?a:void 0;if(l||h||d?(n.labelHighlights=l,n.descriptionHighlights=h,n.detailHighlights=d,n.hidden=!1):(n.labelHighlights=void 0,n.descriptionHighlights=void 0,n.detailHighlights=void 0,n.hidden=!n.item||!n.item.alwaysShow),n.item?n.separator=void 0:n.separator&&(n.hidden=!0),!this.sortByLabel){let e=n.index&&this._inputElements[n.index-1]||void 0;"separator"===(null===e||void 0===e?void 0:e.type)&&!e.buttons&&(i=e),i&&!n.hidden&&(n.separator=i,i=void 0)}})}else this._itemElements.forEach(e=>{e.labelHighlights=void 0,e.descriptionHighlights=void 0,e.detailHighlights=void 0,e.hidden=!1;let t=e.index&&this._inputElements[e.index-1];e.item&&(e.separator=t&&"separator"===t.type&&!t.buttons?t:void 0)});return this._setElementsToTree(this._sortByLabel&&e?this._itemElements:this._elementTree),this._tree.layout(),!0}toggleCheckbox(){this._elementCheckedEventBufferer.bufferEvents(()=>{let e=this._tree.getFocus().filter(e=>e instanceof kK),t=this._allVisibleChecked(e);for(let i of e)i.checkboxDisabled||(i.checked=!t)})}style(e){this._tree.style(e)}toggleHover(){let e=this._tree.getFocus()[0];if(null===e||void 0===e||!e.saneTooltip||!(e instanceof kK))return;if(this._lastHover&&!this._lastHover.isDisposed)return void this._lastHover.dispose();this.showHover(e);let t=new bo;t.add(this._tree.onDidChangeFocus(e=>{e.elements[0]instanceof kK&&this.showHover(e.elements[0])})),this._lastHover&&t.add(this._lastHover),this._elementDisposable.add(t)}_setElementsToTree(e){let t=[];for(let i of e)i instanceof EK?t.push({element:i,collapsible:!1,collapsed:!1,children:i.children.map(e=>({element:e,collapsible:!1,collapsed:!1}))}):t.push({element:i,collapsible:!1,collapsed:!1});this._tree.setChildren(null,t)}_allVisibleChecked(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(let i=0,n=e.length;i<n;i++){let n=e[i];if(!n.hidden&&!1!==n.item.pickable){if(!n.checked)return!1;t=!0}}return t}_updateCheckedObservables(){rv(e=>{this._allVisibleCheckedObservable.set(this._allVisibleChecked(this._itemElements,!1),e);let t=this._itemElements.filter(e=>e.checked).length;this._checkedCountObservable.set(t,e),this._checkedElementsObservable.set(this.getCheckedElements(),e)})}showHover(e){var t,i,n;this._lastHover&&!this._lastHover.isDisposed&&(null!==(t=(i=this.hoverDelegate).onDidHideHover)&&void 0!==t&&t.call(i),null!==(n=this._lastHover)&&void 0!==n&&n.dispose()),e.element&&e.saneTooltip&&(this._lastHover=this.hoverDelegate.showHover({content:e.saneTooltip,target:e.element,linkHandler:e=>{this.linkOpenerDelegate(e)},appearance:{showPointer:!0},container:this._container,position:{hoverPosition:QE.RIGHT}},!1))}};function NK(e,t){let i=t.toLowerCase().indexOf(e.toLowerCase());return-1===i?null:[{start:i,end:i+e.length}]}function FK(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ND.registerCommandAndKeybindingRule((0,r.A)((0,r.A)({weight:TD.WorkbenchContrib,when:Dk.and(Dk.or(Dk.equals(hH,UU.QuickPick),Dk.equals(hH,UU.QuickTree)),aH),metadata:{description:Li(2019,"Used while in the context of the quick pick. If you change one keybinding for this command, you should change all of the other keybindings (modifier variants) of this command as well.")}},e),{},{secondary:RK(e.primary,null!==(t=e.secondary)&&void 0!==t?t:[],i)}))}AK.__decorator=ki([BL],AK.prototype,"onDidChangeFocus",null),AK.__decorator=ki([BL],AK.prototype,"onDidChangeSelection",null),AK=ki([Ei(4,pn),Ei(5,uD)],AK);var OK=qn?Yv.WinCtrl:Yv.CtrlCmd;function RK(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i.withAltMod&&t.push(Yv.Alt+e),i.withCtrlMod&&(t.push(OK+e),i.withAltMod&&t.push(Yv.Alt+OK+e)),i.withCmdMod&&qn&&(t.push(Yv.CtrlCmd+e),i.withCtrlMod&&t.push(Yv.CtrlCmd+Yv.WinCtrl+e),i.withAltMod&&(t.push(Yv.CtrlCmd+Yv.Alt+e),i.withCtrlMod&&t.push(Yv.CtrlCmd+Yv.Alt+Yv.WinCtrl+e))),t}function MK(e,t){return i=>{let n=i.get(nT).currentQuickInput;if(n)return t&&n.quickNavigate?n.focus(t):n.focus(e)}}FK({id:"quickInput.pageNext",primary:Kv.PageDown,handler:MK(WU.NextPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0}),FK({id:"quickInput.pagePrevious",primary:Kv.PageUp,handler:MK(WU.PreviousPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0}),FK({id:"quickInput.first",primary:OK+Kv.Home,handler:MK(WU.First)},{withAltMod:!0,withCmdMod:!0}),FK({id:"quickInput.last",primary:OK+Kv.End,handler:MK(WU.Last)},{withAltMod:!0,withCmdMod:!0}),FK({id:"quickInput.next",primary:Kv.DownArrow,handler:MK(WU.Next)},{withCtrlMod:!0}),FK({id:"quickInput.previous",primary:Kv.UpArrow,handler:MK(WU.Previous)},{withCtrlMod:!0});var PK=Li(2020,"If we're in quick access mode, this will navigate to the next item. If we are not in quick access mode, this will navigate to the next separator."),BK=Li(2021,"If we're in quick access mode, this will navigate to the previous item. If we are not in quick access mode, this will navigate to the previous separator.");qn?(FK({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:Yv.CtrlCmd+Kv.DownArrow,handler:MK(WU.NextSeparator,WU.Next),metadata:{description:PK}}),FK({id:"quickInput.nextSeparator",primary:Yv.CtrlCmd+Yv.Alt+Kv.DownArrow,secondary:[Yv.CtrlCmd+Yv.WinCtrl+Kv.DownArrow],handler:MK(WU.NextSeparator)},{withCtrlMod:!0}),FK({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:Yv.CtrlCmd+Kv.UpArrow,handler:MK(WU.PreviousSeparator,WU.Previous),metadata:{description:BK}}),FK({id:"quickInput.previousSeparator",primary:Yv.CtrlCmd+Yv.Alt+Kv.UpArrow,secondary:[Yv.CtrlCmd+Yv.WinCtrl+Kv.UpArrow],handler:MK(WU.PreviousSeparator)},{withCtrlMod:!0})):(FK({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:Yv.Alt+Kv.DownArrow,handler:MK(WU.NextSeparator,WU.Next),metadata:{description:PK}}),FK({id:"quickInput.nextSeparator",primary:Yv.CtrlCmd+Yv.Alt+Kv.DownArrow,handler:MK(WU.NextSeparator)}),FK({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:Yv.Alt+Kv.UpArrow,handler:MK(WU.PreviousSeparator,WU.Previous),metadata:{description:BK}}),FK({id:"quickInput.previousSeparator",primary:Yv.CtrlCmd+Yv.Alt+Kv.UpArrow,handler:MK(WU.PreviousSeparator)})),ND.registerCommandAndKeybindingRule({id:"quickInput.accept",primary:Kv.Enter,weight:TD.WorkbenchContrib,when:Dk.and(Dk.notEquals(hH,UU.QuickWidget),aH,Dk.not("isComposing")),metadata:{description:Li(2022,"Used while in the context of some quick input. If you change one keybinding for this command, you should change all of the other keybindings (modifier variants) of this command as well.")},handler:e=>{var t;null===(t=e.get(nT).currentQuickInput)||void 0===t||t.accept()},secondary:RK(Kv.Enter,[],{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0})}),FK({id:"quickInput.acceptInBackground",when:Dk.and(aH,Dk.equals(hH,UU.QuickPick),Dk.or(_z.negate(),gH)),primary:Kv.RightArrow,weight:TD.WorkbenchContrib+50,handler:e=>{var t;null===(t=e.get(nT).currentQuickInput)||void 0===t||t.accept(!0)}},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0}),function(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ND.registerCommandAndKeybindingRule((0,r.A)((0,r.A)({weight:TD.WorkbenchContrib,when:aH,metadata:{description:Li(2018,"Used while in the context of any kind of quick input. If you change one keybinding for this command, you should change all of the other keybindings (modifier variants) of this command as well.")}},e),{},{secondary:RK(e.primary,null!==(t=e.secondary)&&void 0!==t?t:[],i)}))}({id:"quickInput.hide",primary:Kv.Escape,handler:e=>{var t;null===(t=e.get(nT).currentQuickInput)||void 0===t||t.hide()}},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0}),FK({id:"quickInput.toggleHover",primary:OK|Kv.Space,handler:e=>{e.get(nT).toggleHover()}});var UK,HK=Mb,WK=class extends Co{constructor(){super(...arguments),this._onDidChangeCheckboxState=this._register(new Ro),this.onDidChangeCheckboxState=this._onDidChangeCheckboxState.event}setCheckboxState(e,t){this._onDidChangeCheckboxState.fire({item:e,checked:t})}},VK=(Zt=class extends Co{constructor(e,t,i,n,s){super(),this._hoverDelegate=e,this._buttonTriggeredEmitter=t,this.onCheckedEvent=i,this._checkboxStateHandler=n,this._themeService=s,this.templateId=UK.ID}renderTemplate(e){let t=new bo,i=xb(e,HK(".quick-input-tree-entry")),n=t.add(new QU("",!1,(0,r.A)((0,r.A)({},qN),{},{size:15})));i.appendChild(n.domNode);let s=xb(xb(xb(i,HK("label.quick-input-tree-label")),HK(".quick-input-tree-rows")),HK(".quick-input-tree-row")),o=Lb(s,HK(".quick-input-tree-icon")),a=t.add(new eW(s,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0,hoverDelegate:this._hoverDelegate})),l=t.add(new mF(i,this._hoverDelegate?{hoverDelegate:this._hoverDelegate}:void 0));return l.domNode.classList.add("quick-input-tree-entry-action-bar"),{toDisposeTemplate:t,entry:i,checkbox:n,icon:o,label:a,actionBar:l,toDisposeElement:new bo}}renderElement(e,t,i,n){let s=i.toDisposeElement,r=e.element;if(!1===r.pickable)i.checkbox.domNode.style.display="none";else{var o;let e=i.checkbox;e.domNode.style.display="",e.checked=null!==(o=r.checked)&&void 0!==o&&o,s.add(_o.filter(this.onCheckedEvent,e=>e.item===r)(t=>e.checked=t.checked)),r.disabled&&e.disable(),s.add(e.onChange(t=>this._checkboxStateHandler.setCheckboxState(r,e.checked)))}if(r.iconPath){var a;let e=ou(this._themeService.getColorTheme().type)?r.iconPath.dark:null!==(a=r.iconPath.light)&&void 0!==a?a:r.iconPath.dark,t=Gs.revive(e);i.icon.className="quick-input-tree-icon",i.icon.style.backgroundImage=Gf(t)}else i.icon.style.backgroundImage="",i.icon.className=r.iconClass?"quick-input-tree-icon ".concat(r.iconClass):"";let l,{labelHighlights:h,descriptionHighlights:d}=e.filterData||{};r.description&&(l={markdown:{value:na(r.description),supportThemeIcons:!0},markdownNotSupportedFallback:r.description}),i.label.setLabel(r.label,r.description,{matches:h,descriptionMatches:d,extraClasses:r.iconClasses,italic:r.italic,strikethrough:r.strikethrough,labelEscapeNewLines:!0,descriptionTitle:l});let c=r.buttons;c&&c.length?(i.actionBar.push(c.map((e,t)=>tH(e,"tree-".concat(t),()=>this._buttonTriggeredEmitter.fire({item:r,button:e}))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions")}disposeElement(e,t,i,n){i.toDisposeElement.clear(),i.actionBar.clear()}disposeTemplate(e){e.toDisposeElement.dispose(),e.toDisposeTemplate.dispose()}},{_:UK=Zt},{_:Zt.ID="quickInputTreeElement"},Zt);VK=UK=ki([Ei(4,$w)],VK);var zK=class{getHeight(e){return 22}getTemplateId(e){return VK.ID}};function KK(e){let t=!1,i=!1,n=!1;for(let r of e){var s;switch(null===(s=r.element)||void 0===s?void 0:s.checked){case"mixed":n=!0;break;case!0:t=!0;break;default:i=!0}if(t&&i&&n)break}return i?!(!n&&!t)&&"mixed":n?"mixed":t}var qK=class{constructor(e){this.onCheckedEvent=e}getWidgetAriaLabel(){return Li(2035,"Quick Tree")}getAriaLabel(e){return e.ariaLabel||[e.label,e.description].map(e=>Ky(e)).filter(e=>!!e).join(", ")}getWidgetRole(){return"tree"}getRole(e){return"checkbox"}isChecked(e){return{get value(){return"mixed"===e.checked?"mixed":!!e.checked},onDidChange:t=>_o.filter(this.onCheckedEvent,t=>t.item===e)(e=>t())}}},GK=class{constructor(){this.filterValue="",this.matchOnLabel=!0,this.matchOnDescription=!1}filter(e,t){var i,n;if(!this.filterValue||!this.matchOnLabel&&!this.matchOnDescription)return e.children?{visibility:nW.Recurse,data:{}}:{visibility:nW.Visible,data:{}};let s=this.matchOnLabel&&null!==(i=Yy(this.filterValue,jy(e.label)))&&void 0!==i?i:void 0,r=this.matchOnDescription&&null!==(n=Yy(this.filterValue,jy(e.description||"")))&&void 0!==n?n:void 0;return{visibility:t===nW.Visible||s||r?nW.Visible:e.children?nW.Recurse:nW.Hidden,data:{labelHighlights:s,descriptionHighlights:r}}}},jK=class extends Co{constructor(){super(...arguments),this._sortByLabel=!0}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e}compare(e,t){if(!this._sortByLabel)return 0;if(e.label<t.label)return-1;if(e.label>t.label)return 1;if(e.description&&t.description){if(e.description<t.description)return-1;if(e.description>t.description)return 1}else{if(e.description)return-1;if(t.description)return 1}return 0}},YK=Mb,QK=class{constructor(){this._elementIds=new WeakMap,this._counter=0}getId(e){let t=e.id;return void 0!==t||(t=this._elementIds.get(e),void 0!==t)||(t="__generated_".concat(this._counter++),this._elementIds.set(e,t)),t}},$K=class extends Co{constructor(e,t,i){super(),this.instantiationService=i,this._onDidTriggerButton=this._register(new Ro),this.onDidTriggerButton=this._onDidTriggerButton.event,this._onDidChangeCheckboxState=this._register(new Ro),this.onDidChangeCheckboxState=this._onDidChangeCheckboxState.event,this._onDidCheckedLeafItemsChange=this._register(new Ro),this.onDidChangeCheckedLeafItems=this._onDidCheckedLeafItemsChange.event,this._onLeave=new Ro,this.onLeave=this._onLeave.event,this._onDidAccept=this._register(new Ro),this.onDidAccept=this._onDidAccept.event,this._container=xb(e,YK(".quick-input-tree")),this._checkboxStateHandler=this._register(new WK),this._renderer=this._register(this.instantiationService.createInstance(VK,t,this._onDidTriggerButton,this.onDidChangeCheckboxState,this._checkboxStateHandler)),this._filter=this.instantiationService.createInstance(GK),this._sorter=this._register(new jK),this._tree=this._register(this.instantiationService.createInstance(cK,"QuickInputTree",this._container,new zK,[this._renderer],{accessibilityProvider:new qK(this.onDidChangeCheckboxState),horizontalScrolling:!1,multipleSelectionSupport:!1,findWidgetEnabled:!1,alwaysConsumeMouseWheel:!0,hideTwistiesOfChildlessElements:!0,renderIndentGuides:kW.None,expandOnDoubleClick:!0,expandOnlyOnTwistieClick:!0,disableExpandOnSpacebar:!0,sorter:this._sorter,filter:this._filter,identityProvider:new QK})),this.registerCheckboxStateListeners(),this.registerOnDidChangeFocus()}get tree(){return this._tree}get renderer(){return this._renderer}get displayed(){return"none"!==this._container.style.display}set displayed(e){this._container.style.display=e?"":"none"}get sortByLabel(){return this._sorter.sortByLabel}set sortByLabel(e){this._sorter.sortByLabel=e,this._tree.resort(null,!0)}getActiveDescendant(){return this._tree.getHTMLElement().getAttribute("aria-activedescendant")}filter(e){this._filter.filterValue=e,this._tree.refilter()}updateFilterOptions(e){void 0!==e.matchOnLabel&&(this._filter.matchOnLabel=e.matchOnLabel),void 0!==e.matchOnDescription&&(this._filter.matchOnDescription=e.matchOnDescription),this._tree.refilter()}setTreeData(e){let t=!1,i=e=>{let n;return e.children&&e.children.length>0&&(t=!0,n=e.children.map(e=>i(e)),e.checked=KK(n)),{element:e,children:n,collapsible:!!n,collapsed:e.collapsed?sW.PreserveOrCollapsed:sW.PreserveOrExpanded}},n=e.map(e=>i(e));this._tree.setChildren(null,n),this._container.classList.toggle("quick-input-tree-flat",!t)}layout(e){this._tree.getHTMLElement().style.maxHeight=e?"".concat(44*Math.floor(e/44)+6,"px"):"",this._tree.layout()}focus(e){switch(e){case WU.First:this._tree.scrollTop=0,this._tree.focusFirst();break;case WU.Second:{this._tree.scrollTop=0;let e=!1;this._tree.focusFirst(void 0,t=>!!e||(e=!e,!1));break}case WU.Last:this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast();break;case WU.Next:{let e=this._tree.getFocus();this._tree.focusNext(void 0,!1,void 0,e=>(this._tree.reveal(e.element),!0));let t=this._tree.getFocus();e.length&&e[0]===t[0]&&this._onLeave.fire();break}case WU.Previous:{let e=this._tree.getFocus();this._tree.focusPrevious(void 0,!1,void 0,e=>(this._tree.reveal(e.element),!0));let t=this._tree.getFocus();e.length&&e[0]===t[0]&&this._onLeave.fire();break}case WU.NextPage:this._tree.focusNextPage(void 0,e=>(this._tree.reveal(e.element),!0));break;case WU.PreviousPage:this._tree.focusPreviousPage(void 0,e=>(this._tree.reveal(e.element),!0));break;case WU.NextSeparator:case WU.PreviousSeparator:return}}registerCheckboxStateListeners(){this._register(this._tree.onDidOpen(e=>{var t;let i=e.element;if(!i||i.disabled)return;if(!1===i.pickable)return this._tree.setFocus([i]),void this._onDidAccept.fire();let n=null===(t=e.browserEvent)||void 0===t?void 0:t.target;n&&n.classList.contains(YU.CLASS_NAME)||this.updateCheckboxState(i,!0===i.checked)})),this._register(this._checkboxStateHandler.onDidChangeCheckboxState(e=>{this.updateCheckboxState(e.item,!0===e.checked)}))}updateCheckboxState(e,t){var i,n;if((null!==(i=e.checked)&&void 0!==i&&i)===t)return;e.checked=t,this._tree.rerender(e);let s=new Set,r=[...this._tree.getNode(e).children];for(;r.length;){var o;let t=r.shift();(null===t||void 0===t?void 0:t.element)&&!s.has(t.element)&&(s.add(t.element),(null!==(o=t.element.checked)&&void 0!==o&&o)!==e.checked&&(t.element.checked=e.checked,this._tree.rerender(t.element)),r.push(...t.children))}let a=this._tree.getParentElement(e);for(;a;){var l;let e=KK([...this._tree.getNode(a).children]);(null!==(l=a.checked)&&void 0!==l&&l)!==e&&(a.checked=e,this._tree.rerender(a)),a=this._tree.getParentElement(a)}this._onDidChangeCheckboxState.fire({item:e,checked:null!==(n=e.checked)&&void 0!==n&&n}),this._onDidCheckedLeafItemsChange.fire(this.getCheckedLeafItems())}registerOnDidChangeFocus(){this._register(this._tree.onDidChangeFocus(e=>{let t=this._tree.getFocus().findLast(e=>null!==e);this._tree.setSelection(t?[t]:[],e.browserEvent)}))}getCheckedLeafItems(){let e=new Set,t=[...this._tree.getNode().children],i=[];for(;t.length;){let n=t.shift();null===n||void 0===n||!n.element||e.has(n.element)||n.element.checked&&(e.add(n.element),t.push(...n.children),n.element.children||i.push(n.element))}return i}getActiveItems(){return this._tree.getFocus().filter(e=>null!==e)}check(e,t){e.checked!==t&&(e.checked=t,this._onDidCheckedLeafItemsChange.fire(this.getCheckedLeafItems()))}checkAll(e){let t=new Set,i=[...this._tree.getNode().children],n=!1;for(;i.length;){let s=i.shift();null===s||void 0===s||!s.element||t.has(s.element)||s.element.checked!==e&&(n=!0,s.element.checked=e,i.push(...s.children),t.add(s.element),this._tree.rerender(s.element),this._onDidChangeCheckboxState.fire({item:s.element,checked:s.element.checked}))}n&&this._onDidCheckedLeafItemsChange.fire(this.getCheckedLeafItems())}};$K=ki([Ei(2,pn)],$K);var XK,ZK=(Jt=class e extends fH{constructor(e){super(e),this.type=UU.QuickTree,this._value=av("value",""),this._ariaLabel=av("ariaLabel",void 0),this._placeholder=av("placeholder",void 0),this._matchOnDescription=av("matchOnDescription",!1),this._matchOnLabel=av("matchOnLabel",!0),this._sortByLabel=av("sortByLabel",!0),this._activeItems=av("activeItems",[]),this._itemTree=av("itemTree",[]),this.onDidChangeValue=_o.fromObservable(this._value,this._store),this.onDidChangeActive=_o.fromObservable(this._activeItems,this._store),this._onDidChangeCheckedLeafItems=this._register(new Ro),this.onDidChangeCheckedLeafItems=this._onDidChangeCheckedLeafItems.event,this._onDidChangeCheckboxState=this._register(new Ro),this.onDidChangeCheckboxState=this._onDidChangeCheckboxState.event,this.onDidAccept=e.onDidAccept,this._registerAutoruns(),this._register(e.tree.onDidChangeCheckedLeafItems(e=>this._onDidChangeCheckedLeafItems.fire(e))),this._register(e.tree.onDidChangeCheckboxState(e=>this._onDidChangeCheckboxState.fire(e.item))),this._register(e.tree.tree.onDidChangeFocus(t=>{this._activeItems.set(e.tree.getActiveItems(),void 0)}))}get value(){return this._value.get()}set value(e){this._value.set(e,void 0)}get ariaLabel(){return this._ariaLabel.get()}set ariaLabel(e){this._ariaLabel.set(e,void 0)}get placeholder(){return this._placeholder.get()}set placeholder(e){this._placeholder.set(e,void 0)}get matchOnDescription(){return this._matchOnDescription.get()}set matchOnDescription(e){this._matchOnDescription.set(e,void 0)}get matchOnLabel(){return this._matchOnLabel.get()}set matchOnLabel(e){this._matchOnLabel.set(e,void 0)}get sortByLabel(){return this._sortByLabel.get()}set sortByLabel(e){this._sortByLabel.set(e,void 0)}get activeItems(){return this._activeItems.get()}set activeItems(e){this._activeItems.set(e,void 0)}get itemTree(){return this._itemTree.get()}get onDidTriggerItemButton(){return this.ui.tree.onDidTriggerButton}get checkedLeafItems(){return this.ui.tree.getCheckedLeafItems()}setItemTree(e){this._itemTree.set(e,void 0)}getParent(e){var t;return null!==(t=this.ui.tree.tree.getParentElement(e))&&void 0!==t?t:void 0}setCheckboxState(e,t){this.ui.tree.check(e,t)}expand(e){this.ui.tree.tree.expand(e)}collapse(e){this.ui.tree.tree.collapse(e)}isCollapsed(e){return this.ui.tree.tree.isCollapsed(e)}focusOnInput(){this.ui.inputBox.setFocus()}show(){if(!this.visible){let e={title:!!this.title||!!this.step||!!this.titleButtons.length,description:!!this.description,checkAll:!0,checkBox:!0,inputBox:!0,progressBar:!0,visibleCount:!0,count:!0,ok:!0,list:!1,tree:!0,message:!!this.validationMessage,customButton:!1};this.ui.setVisibilities(e),this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{this._value.set(e,void 0)})),this.visibleDisposables.add(this.ui.tree.onDidChangeCheckboxState(e=>{let t=KK([...this.ui.tree.tree.getNode().children]);this.ui.checkAll.checked!==t&&(this.ui.checkAll.checked=t)})),this.visibleDisposables.add(this.ui.checkAll.onChange(e=>{let t=this.ui.checkAll.checked;this.ui.tree.checkAll(t)})),this.visibleDisposables.add(this.ui.tree.onDidChangeCheckedLeafItems(e=>{this.ui.count.setCount(e.length)}))}super.show(),ns(()=>this.ui.count.setCount(this.ui.tree.getCheckedLeafItems().length));let e=KK([...this.ui.tree.tree.getNode().children]);this.ui.checkAll.checked!==e&&(this.ui.checkAll.checked=e)}update(){if(!this.visible)return;let e={title:!!this.title||!!this.step||!!this.titleButtons.length,description:!!this.description,checkAll:!0,checkBox:!0,inputBox:!0,progressBar:!0,visibleCount:!0,count:!0,ok:!0,tree:!0,message:!!this.validationMessage};this.ui.setVisibilities(e),super.update()}_registerListeners(){}_registerAutoruns(){this.registerVisibleAutorun(e=>{let t=this._value.read(e);this.ui.inputBox.value=t,this.ui.tree.filter(t)}),this.registerVisibleAutorun(t=>{let i=this._ariaLabel.read(t);i||(i=this.placeholder||e.DEFAULT_ARIA_LABEL,this.title&&(i+=" - ".concat(this.title))),this.ui.list.ariaLabel!==i&&(this.ui.list.ariaLabel=null!==i&&void 0!==i?i:null),this.ui.inputBox.ariaLabel!==i&&(this.ui.inputBox.ariaLabel=null!==i&&void 0!==i?i:"input")}),this.registerVisibleAutorun(e=>{let t=this._placeholder.read(e);this.ui.inputBox.placeholder!==t&&(this.ui.inputBox.placeholder=null!==t&&void 0!==t?t:"")}),this.registerVisibleAutorun(e=>{let t=this._matchOnLabel.read(e),i=this._matchOnDescription.read(e);this.ui.tree.updateFilterOptions({matchOnLabel:t,matchOnDescription:i})}),this.registerVisibleAutorun(e=>{let t=this._sortByLabel.read(e);this.ui.tree.sortByLabel=t}),this.registerVisibleAutorun(e=>{let t=this._itemTree.read(e);this.ui.tree.setTreeData(t)})}registerVisibleAutorun(e){this._register(iv(t=>{this._visible.read(t)&&e(t)}))}focus(e){this.ui.tree.focus(e),this.ui.tree.tree.domFocus()}accept(e){}},{_:Jt.DEFAULT_ARIA_LABEL=Li(2036,"Type to narrow down results.")},Jt),JK=Mb,eq="workbench.quickInput.viewState",tq=(ei=class extends Co{get currentQuickInput(){var e;return null!==(e=this.controller)&&void 0!==e?e:void 0}get container(){return this._container}constructor(e,t,i,n,s,r){super(),this.options=e,this.layoutService=t,this.instantiationService=i,this.storageService=s,this.keybindingService=r,this.enabled=!0,this.onDidAcceptEmitter=this._register(new Ro),this.onDidCustomEmitter=this._register(new Ro),this.onDidTriggerButtonEmitter=this._register(new Ro),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new Ro),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new Ro),this.onHide=this.onHideEmitter.event,this.backButton=pH,this.inQuickInputContext=oH.bindTo(n),this.quickInputTypeContext=dH.bindTo(n),this.endOfQuickInputBoxContext=uH.bindTo(n),this.idPrefix=e.idPrefix,this._container=e.container,this.styles=e.styles,this._register(_o.runAndSubscribe(M_,e=>{let{window:t,disposables:i}=e;return this.registerKeyModsListeners(t,i)},{window:Lv,disposables:this._store})),this._register(P_(e=>{this.ui&&L_(this.ui.container)===e&&(this.reparentUI(this.layoutService.mainContainer),this.layout(this.layoutService.mainContainerDimension,this.layoutService.mainContainerOffset.quickPickTop))})),this.viewState=this.loadViewState()}registerKeyModsListeners(e,t){let i=e=>{this.keyMods.ctrlCmd=e.ctrlKey||e.metaKey,this.keyMods.alt=e.altKey};for(let n of[kb.KEY_DOWN,kb.KEY_UP,kb.MOUSE_DOWN])t.add(W_(e,n,i,!0))}getUI(e){if(this.ui)return e&&L_(this._container)!==L_(this.layoutService.activeContainer)&&(this.reparentUI(this.layoutService.activeContainer),this.layout(this.layoutService.activeContainerDimension,this.layoutService.activeContainerOffset.quickPickTop)),this.ui;let t=xb(this._container,JK(".quick-input-widget.show-file-icons"));this._register(this.keybindingService.registerContainer(t)),t.tabIndex=-1,t.style.display="none";let i=nC(t),n=xb(t,JK(".quick-input-titlebar")),s=this._register(new mF(n,{hoverDelegate:this.options.hoverDelegate}));s.domNode.classList.add("quick-input-left-action-bar");let o=xb(n,JK(".quick-input-title")),a=this._register(new mF(n,{hoverDelegate:this.options.hoverDelegate}));a.domNode.classList.add("quick-input-right-action-bar");let l=xb(t,JK(".quick-input-header")),h=this._register(new QU(Li(2023,"Toggle all checkboxes"),!1,(0,r.A)((0,r.A)({},qN),{},{size:15})));xb(l,h.domNode),this._register(h.onChange(()=>{let e=h.checked;I.setAllVisibleChecked(!0===e)})),this._register(W_(h.domNode,kb.CLICK,e=>{(e.x||e.y)&&g.setFocus()}));let d=xb(l,JK(".quick-input-description")),c=xb(l,JK(".quick-input-and-message")),u=xb(c,JK(".quick-input-filter")),g=this._register(new XH(u,this.styles.inputBox,this.styles.toggle));g.setAttribute("aria-describedby","".concat(this.idPrefix,"message"));let p=xb(u,JK(".quick-input-visible-count"));p.setAttribute("aria-live","polite"),p.setAttribute("aria-atomic","true");let f=this._register(new SH(p,{countFormat:Li(2024,"{0} Results")},this.styles.countBadge)),m=xb(u,JK(".quick-input-count"));m.setAttribute("aria-live","polite");let v=this._register(new SH(m,{countFormat:Li(2025,"{0} Selected")},this.styles.countBadge)),_=this._register(new mF(l,{hoverDelegate:this.options.hoverDelegate}));_.domNode.classList.add("quick-input-inline-action-bar");let b=xb(l,JK(".quick-input-action")),C=this._register(new wH(b,this.styles.button));C.label=Li(2026,"OK"),this._register(C.onDidClick(e=>{this.onDidAcceptEmitter.fire()}));let y=xb(l,JK(".quick-input-action")),w=this._register(new wH(y,(0,r.A)((0,r.A)({},this.styles.button),{},{supportIcons:!0})));w.label=Li(2027,"Custom"),this._register(w.onDidClick(e=>{this.onDidCustomEmitter.fire()}));let S=xb(c,JK("#".concat(this.idPrefix,"message.quick-input-message"))),k=this._register(new xH(t,this.styles.progressBar));k.getContainer().classList.add("quick-input-progress");let E=xb(t,JK(".quick-input-html-widget"));E.tabIndex=-1;let D=xb(t,JK(".quick-input-description")),T=this.idPrefix+"list",I=this._register(this.instantiationService.createInstance(AK,t,this.options.hoverDelegate,this.options.linkOpenerDelegate,T));g.setAttribute("aria-controls",T),this._register(I.onDidChangeFocus(()=>{if(g.hasFocus()){let e=I.getActiveDescendant();e?g.setAttribute("aria-activedescendant",e):g.removeAttribute("aria-activedescendant")}})),this._register(I.onChangedAllVisibleChecked(e=>{h.checked=e})),this._register(I.onChangedVisibleCount(e=>{f.setCount(e)})),this._register(I.onChangedCheckedCount(e=>{ns(()=>v.setCount(e))})),this._register(I.onLeave(()=>{setTimeout(()=>{this.controller&&(g.setFocus(),this.controller instanceof mH&&this.controller.canSelectMany&&I.clearFocus())},0)}));let x=this._register(this.instantiationService.createInstance($K,t,this.options.hoverDelegate));this._register(x.tree.onDidChangeFocus(()=>{if(g.hasFocus()){let e=x.getActiveDescendant();e?g.setAttribute("aria-activedescendant",e):g.removeAttribute("aria-activedescendant")}})),this._register(x.onLeave(()=>{setTimeout(()=>{this.controller&&(g.setFocus(),x.tree.setFocus([]))},0)})),this._register(x.onDidAccept(()=>{this.onDidAcceptEmitter.fire()})),this._register(x.tree.onDidChangeContentHeight(()=>this.updateLayout()));let L=Ib(t);return this._register(L),this._register(W_(t,kb.FOCUS,e=>{let t=this.getUI();if(sb(e.relatedTarget,t.inputContainer)){let e=t.inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==e&&this.endOfQuickInputBoxContext.set(e)}sb(e.relatedTarget,t.container)||(this.inQuickInputContext.set(!0),this.previousFocusElement=bb(e.relatedTarget)?e.relatedTarget:void 0)},!0)),this._register(L.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(BU.Blur),this.inQuickInputContext.set(!1),this.endOfQuickInputBoxContext.set(!1),this.previousFocusElement=void 0})),this._register(g.onKeyDown(e=>{let t=this.getUI().inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==t&&this.endOfQuickInputBoxContext.set(t),l_(e.keyCode)||g.removeAttribute("aria-activedescendant")})),this._register(W_(t,kb.FOCUS,e=>{g.setFocus()})),this.dndController=this._register(this.instantiationService.createInstance(iq,this._container,t,[{node:n,includeChildren:!0,excludeNodes:[s.domNode,a.domNode]},{node:l,includeChildren:!1}],this.viewState)),this._register(iv(e=>{var t;let i=null===(t=this.dndController)||void 0===t?void 0:t.dndViewState.read(e);i&&(void 0!==i.top&&void 0!==i.left?this.viewState=(0,r.A)((0,r.A)({},this.viewState),{},{top:i.top,left:i.left}):this.viewState=void 0,this.updateLayout(),i.done&&this.saveViewState(this.viewState))})),this.ui={container:t,styleSheet:i,leftActionBar:s,titleBar:n,title:o,description1:D,description2:d,widget:E,rightActionBar:a,inlineActionBar:_,checkAll:h,inputContainer:c,filterContainer:u,inputBox:g,visibleCountContainer:p,visibleCount:f,countContainer:m,count:v,okContainer:b,ok:C,message:S,customButtonContainer:y,customButton:w,list:I,tree:x,progressBar:k,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:e=>this.show(e),hide:()=>this.hide(),setVisibilities:e=>this.setVisibilities(e),setEnabled:e=>this.setEnabled(e),setContextKey:e=>this.options.setContextKey(e),linkOpenerDelegate:e=>this.options.linkOpenerDelegate(e)},this.updateStyles(),this.ui}reparentUI(e){var t;this.ui&&(this._container=e,xb(this._container,this.ui.container),null===(t=this.dndController)||void 0===t||t.reparentUI(this._container))}pick(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Go.None;return new Promise((n,s)=>{let o=e=>{var i;o=n,null!==(i=t.onKeyMods)&&void 0!==i&&i.call(t,l.keyMods),n(e)};if(i.isCancellationRequested)return void o(void 0);let a,l=this.createQuickPick({useSeparators:!0}),h=[l,l.onDidAccept(()=>{if(l.canSelectMany)o(l.selectedItems.slice()),l.hide();else{let e=l.activeItems[0];e&&(o(e),l.hide())}}),l.onDidChangeActive(e=>{let i=e[0];i&&t.onDidFocus&&t.onDidFocus(i)}),l.onDidChangeSelection(e=>{if(!l.canSelectMany){let t=e[0];t&&(o(t),l.hide())}}),l.onDidTriggerItemButton(e=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton((0,r.A)((0,r.A)({},e),{},{removeItem:()=>{let t=l.items.indexOf(e.item);if(-1!==t){let e=l.items.slice(),i=e.splice(t,1),n=l.activeItems.filter(e=>e!==i[0]),s=l.keepScrollPosition;l.keepScrollPosition=!0,l.items=e,n&&(l.activeItems=n),l.keepScrollPosition=s}}}))),l.onDidTriggerSeparatorButton(e=>{var i;return null===(i=t.onDidTriggerSeparatorButton)||void 0===i?void 0:i.call(t,e)}),l.onDidChangeValue(e=>{a&&!e&&(1!==l.activeItems.length||l.activeItems[0]!==a)&&(l.activeItems=[a])}),i.onCancellationRequested(()=>{l.hide()}),l.onDidHide(()=>{po(h),o(void 0)})];l.title=t.title,t.value&&(l.value=t.value),l.canSelectMany=!!t.canPickMany,l.placeholder=t.placeHolder,l.prompt=t.prompt,l.ignoreFocusOut=!!t.ignoreFocusLost,l.matchOnDescription=!!t.matchOnDescription,l.matchOnDetail=!!t.matchOnDetail,void 0!==t.sortByLabel&&(l.sortByLabel=t.sortByLabel),l.matchOnLabel=void 0===t.matchOnLabel||t.matchOnLabel,l.quickNavigate=t.quickNavigate,l.hideInput=!!t.hideInput,l.contextKey=t.contextKey,l.busy=!0,Promise.all([e,t.activeItem]).then(e=>{let[t,i]=e;a=i,l.busy=!1,l.items=t,l.canSelectMany&&(l.selectedItems=t.filter(e=>"separator"!==e.type&&e.picked)),a&&(l.activeItems=[a])}),l.show(),Promise.resolve(e).then(void 0,e=>{s(e),l.hide()})})}setValidationOnInput(e,t){t&&$i(t)?(e.severity=xC.Error,e.validationMessage=t):t&&!$i(t)?(e.severity=t.severity,e.validationMessage=t.content):(e.severity=xC.Ignore,e.validationMessage=void 0)}input(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Go.None;return new Promise(i=>{if(t.isCancellationRequested)return void i(void 0);let n=this.createInputBox(),s=e.validateInput||(()=>Promise.resolve(void 0)),r=_o.debounce(n.onDidChangeValue,(e,t)=>t,100),o=e.value||"",a=Promise.resolve(s(o)),l=[n,r(e=>{e!==o&&(a=Promise.resolve(s(e)),o=e),a.then(t=>{e===o&&this.setValidationOnInput(n,t)})}),n.onDidAccept(()=>{let e=n.value;e!==o&&(a=Promise.resolve(s(e)),o=e),a.then(t=>{!t||!$i(t)&&t.severity!==xC.Error?(i(e),n.hide()):e===o&&this.setValidationOnInput(n,t)})}),t.onCancellationRequested(()=>{n.hide()}),n.onDidHide(()=>{po(l),i(void 0)})];n.title=e.title,n.value=e.value||"",n.valueSelection=e.valueSelection,n.prompt=e.prompt,n.placeholder=e.placeHolder,n.password=!!e.password,n.ignoreFocusOut=!!e.ignoreFocusLost,n.show()})}createQuickPick(){return new mH(this.getUI(!0))}createInputBox(){return new vH(this.getUI(!0))}setAlignment(e){var t;null===(t=this.dndController)||void 0===t||t.setAlignment(e)}createQuickWidget(){return new _H(this.getUI(!0))}createQuickTree(){return new ZK(this.getUI(!0))}show(e){var t;let i=this.getUI(!0);this.onShowEmitter.fire();let n=this.controller;this.controller=e,null!==n&&void 0!==n&&n.didHide(),this.setEnabled(!0),i.leftActionBar.clear(),i.title.textContent="",i.description1.textContent="",i.description2.textContent="",Ab(i.widget),i.rightActionBar.clear(),i.inlineActionBar.clear(),i.checkAll.checked=!1,i.inputBox.placeholder="",i.inputBox.password=!1,i.inputBox.showDecoration(xC.Ignore),i.visibleCount.setCount(0),i.count.setCount(0),Ab(i.message),i.progressBar.stop(),i.progressBar.getContainer().setAttribute("aria-hidden","true"),i.list.setElements([]),i.list.matchOnDescription=!1,i.list.matchOnDetail=!1,i.list.matchOnLabel=!0,i.list.sortByLabel=!0,i.tree.updateFilterOptions({matchOnDescription:!1,matchOnLabel:!0}),i.tree.sortByLabel=!0,i.ignoreFocusOut=!1,i.inputBox.toggles=void 0;let s=this.options.backKeybindingLabel();pH.tooltip=s?Li(2028,"Back ({0})",s):Li(2029,"Back"),i.container.style.display="",this.updateLayout(),null!==(t=this.dndController)&&void 0!==t&&t.layoutContainer(),i.inputBox.setFocus(),this.quickInputTypeContext.set(e.type)}isVisible(){return!!this.ui&&"none"!==this.ui.container.style.display}setVisibilities(e){let t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=!e.description||e.inputBox||e.checkAll?"none":"",t.checkAll.domNode.style.display=e.checkAll?"":"none",t.inputContainer.style.display=e.inputBox?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.displayed=!!e.list,t.tree.displayed=!!e.tree,t.container.classList.toggle("show-checkboxes",!!e.checkBox),t.container.classList.toggle("hidden-input",!e.inputBox&&!e.description),this.updateLayout()}setEnabled(e){if(e!==this.enabled){this.enabled=e;let t=this.getUI();for(let i of t.leftActionBar.viewItems)i.action.enabled=e;for(let i of t.rightActionBar.viewItems)i.action.enabled=e;e?t.checkAll.enable():t.checkAll.disable(),t.inputBox.enabled=e,t.ok.enabled=e,t.list.enabled=e}}hide(e){var t;let i=this.controller;if(!i)return;i.willHide(e);let n=null===(t=this.ui)||void 0===t?void 0:t.container,s=n&&!ub(n);if(this.controller=null,this.onHideEmitter.fire(),n&&(n.style.display="none"),!s){var r;let e=this.previousFocusElement;for(;e&&!e.offsetParent;){var o;e=null!==(o=e.parentElement)&&void 0!==o?o:void 0}null!==(r=e)&&void 0!==r&&r.offsetParent?(e.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}i.didHide(e)}focus(){if(this.isVisible()){let e=this.getUI();e.inputBox.enabled?e.inputBox.setFocus():e.list.domFocus()}}toggle(){this.isVisible()&&this.controller instanceof mH&&this.controller.canSelectMany&&this.getUI().list.toggleCheckbox()}toggleHover(){this.isVisible()&&this.controller instanceof mH&&this.getUI().list.toggleHover()}navigate(e,t){this.isVisible()&&this.getUI().list.displayed&&(this.getUI().list.focus(e?WU.Next:WU.Previous),t&&this.controller instanceof mH&&(this.controller.quickNavigate=t))}async accept(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{alt:!1,ctrlCmd:!1};this.keyMods.alt=e.alt,this.keyMods.ctrlCmd=e.ctrlCmd,this.onDidAcceptEmitter.fire()}async back(){this.onDidTriggerButtonEmitter.fire(this.backButton)}async cancel(e){this.hide(e)}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui&&this.isVisible()){var e,t,i;let n=this.ui.container.style,s=Math.min(.62*this.dimension.width,XK.MAX_WIDTH);n.width=s+"px",n.top="".concat(null!==(e=this.viewState)&&void 0!==e&&e.top?Math.round(this.dimension.height*this.viewState.top):this.titleBarOffset,"px"),n.left="".concat(Math.round(this.dimension.width*(null!==(t=null===(i=this.viewState)||void 0===i?void 0:i.left)&&void 0!==t?t:.5)-s/2),"px"),this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&.4*this.dimension.height),this.ui.tree.layout(this.dimension&&.4*this.dimension.height)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){let{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:i,widgetBorder:n,widgetShadow:s}=this.styles.widget;this.ui.titleBar.style.backgroundColor=null!==e&&void 0!==e?e:"",this.ui.container.style.backgroundColor=null!==t&&void 0!==t?t:"",this.ui.container.style.color=null!==i&&void 0!==i?i:"",this.ui.container.style.border=n?"1px solid ".concat(n):"",this.ui.container.style.boxShadow=s?"0 0 8px 2px ".concat(s):"",this.ui.list.style(this.styles.list),this.ui.tree.tree.style(this.styles.list);let r=[];this.styles.pickerGroup.pickerGroupBorder&&r.push(".quick-input-list .quick-input-list-entry { border-top-color:  ".concat(this.styles.pickerGroup.pickerGroupBorder,"; }")),this.styles.pickerGroup.pickerGroupForeground&&r.push(".quick-input-list .quick-input-list-separator { color:  ".concat(this.styles.pickerGroup.pickerGroupForeground,"; }")),this.styles.pickerGroup.pickerGroupForeground&&r.push(".quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }"),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(r.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&r.push("background-color: ".concat(this.styles.keybindingLabel.keybindingLabelBackground,";")),this.styles.keybindingLabel.keybindingLabelBorder&&r.push("border-color: ".concat(this.styles.keybindingLabel.keybindingLabelBorder,";")),this.styles.keybindingLabel.keybindingLabelBottomBorder&&r.push("border-bottom-color: ".concat(this.styles.keybindingLabel.keybindingLabelBottomBorder,";")),this.styles.keybindingLabel.keybindingLabelShadow&&r.push("box-shadow: inset 0 -1px 0 ".concat(this.styles.keybindingLabel.keybindingLabelShadow,";")),this.styles.keybindingLabel.keybindingLabelForeground&&r.push("color: ".concat(this.styles.keybindingLabel.keybindingLabelForeground,";")),r.push("}"));let o=r.join("\n");o!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=o)}}loadViewState(){try{let e=JSON.parse(this.storageService.get(eq,Vp.APPLICATION,"{}"));if(void 0!==e.top||void 0!==e.left)return e}catch(e){}}saveViewState(e){this.layoutService.activeContainer===this.layoutService.mainContainer&&(void 0===e?this.storageService.remove(eq,Vp.APPLICATION):this.storageService.store(eq,JSON.stringify(e),Vp.APPLICATION,zp.MACHINE))}},{_:XK=ei},{_:ei.MAX_WIDTH=600},ei);tq=XK=ki([Ei(1,EC),Ei(2,pn),Ei(3,AS),Ei(4,Sn),Ei(5,SE)],tq);var iq=class extends Co{constructor(e,t,i,n,s,o,a){super(),this._container=e,this._quickInputContainer=t,this._quickInputDragAreas=i,this._layoutService=s,this.configurationService=a,this.dndViewState=av(this,void 0),this._snapThreshold=20,this._snapLineHorizontalRatio=.25,this._quickInputAlignmentContext=lH.bindTo(o);let l=function(e){var t;if(Yn||qn||oF(e)===eF.NATIVE)return tF.NATIVE;let i=null===(t=e.getValue("window"))||void 0===t?void 0:t.controlsStyle;return i===tF.CUSTOM||i===tF.HIDDEN?i:tF.NATIVE}(this.configurationService)===tF.CUSTOM;this._controlsOnLeft=l&&Zn===Un.Mac,this._controlsOnRight=l&&(Zn===Un.Windows||Zn===Un.Linux),this._registerLayoutListener(),this.registerMouseListeners(),this.dndViewState.set((0,r.A)((0,r.A)({},n),{},{done:!0}),void 0)}reparentUI(e){this._container=e}layoutContainer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._layoutService.activeContainerDimension,t=this.dndViewState.get(),i=this._quickInputContainer.getBoundingClientRect();if(null!==t&&void 0!==t&&t.top&&null!==t&&void 0!==t&&t.left){let n=Math.round(100*t.left)/100*e.width-i.width/2;this._layout(t.top*e.height,n)}}setAlignment(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"top"===e?(this.dndViewState.set({top:this._getTopSnapValue()/this._container.clientHeight,left:(this._getCenterXSnapValue()+this._quickInputContainer.clientWidth/2)/this._container.clientWidth,done:t},void 0),this._quickInputAlignmentContext.set("top")):"center"===e?(this.dndViewState.set({top:this._getCenterYSnapValue()/this._container.clientHeight,left:(this._getCenterXSnapValue()+this._quickInputContainer.clientWidth/2)/this._container.clientWidth,done:t},void 0),this._quickInputAlignmentContext.set("center")):(this.dndViewState.set({top:e.top,left:e.left,done:t},void 0),this._quickInputAlignmentContext.set(void 0))}_registerLayoutListener(){this._register(_o.filter(this._layoutService.onDidLayoutContainer,e=>e.container===this._container)(e=>this.layoutContainer(e.dimension)))}registerMouseListeners(){let e=this._quickInputContainer;this._register(K_(e,t=>{var i;let n=new k_(L_(e),t);if(2!==n.detail)return;let s=this._quickInputDragAreas.find(e=>{let{node:t,includeChildren:i}=e;return i?sb(n.target,t):n.target===t});!s||(null===(i=s.excludeNodes)||void 0===i?void 0:i.some(e=>sb(n.target,e)))||this.dndViewState.set({top:void 0,left:void 0,done:!0},void 0)})),this._register(function(e,t,i){return W_(e,$n&&Gv?kb.POINTER_DOWN:kb.MOUSE_DOWN,t,i)}(e,e=>{var t;let i=L_(this._layoutService.activeContainer),n=new k_(i,e),s=this._quickInputDragAreas.find(e=>{let{node:t,includeChildren:i}=e;return i?sb(n.target,t):n.target===t});if(!s||null!==(t=s.excludeNodes)&&void 0!==t&&t.some(e=>sb(n.target,e)))return;let r=this._quickInputContainer.getBoundingClientRect(),o=n.browserEvent.clientX-r.left,a=n.browserEvent.clientY-r.top,l=!1,h=function(e,t,i){return W_(e,$n&&Gv?kb.POINTER_MOVE:kb.MOUSE_MOVE,t,i)}(i,e=>{new k_(i,e).preventDefault(),l||(l=!0),this._layout(e.clientY-a,e.clientX-o)}),d=K_(i,e=>{if(l){let e=this.dndViewState.get();this.dndViewState.set({top:null===e||void 0===e?void 0:e.top,left:null===e||void 0===e?void 0:e.left,done:!0},void 0)}h.dispose(),d.dispose()})}))}_layout(e,t){let i=this._getTopSnapValue(),n=this._getCenterYSnapValue(),s=this._getCenterXSnapValue();(e=Math.max(0,Math.min(e,this._container.clientHeight-this._quickInputContainer.clientHeight)))<this._layoutService.activeContainerOffset.top&&(this._controlsOnLeft?t=Math.max(t,80/Fv(pb())):this._controlsOnRight&&(t=Math.min(t,this._container.clientWidth-this._quickInputContainer.clientWidth-140/Fv(pb()))));let r=Math.abs(e-i)<this._snapThreshold;e=r?i:e;let o=Math.abs(e-n)<this._snapThreshold,a=(e=o?n:e)/this._container.clientHeight;t=Math.max(0,Math.min(t,this._container.clientWidth-this._quickInputContainer.clientWidth));let l=Math.abs(t-s)<this._snapThreshold;t=l?s:t;let h=this._container.clientWidth,d=(t+this._quickInputContainer.clientWidth/2)/h;if(this.dndViewState.set({top:a,left:d,done:!1},void 0),l){if(r)return void this._quickInputAlignmentContext.set("top");if(o)return void this._quickInputAlignmentContext.set("center")}this._quickInputAlignmentContext.set(void 0)}_getTopSnapValue(){return this._layoutService.activeContainerOffset.quickPickTop}_getCenterYSnapValue(){return Math.round(this._container.clientHeight*this._snapLineHorizontalRatio)}_getCenterXSnapValue(){return Math.round(this._container.clientWidth/2)-Math.round(this._quickInputContainer.clientWidth/2)}};iq=ki([Ei(4,EC),Ei(5,AS),Ei(6,fr)],iq);var nq=class extends cu{get backButton(){return this.controller.backButton}get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get hasController(){return!!this._controller}get currentQuickInput(){return this.controller.currentQuickInput}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(KU))),this._quickAccess}constructor(e,t,i,n,s){super(i),this.instantiationService=e,this.contextKeyService=t,this.layoutService=n,this.configurationService=s,this._onShow=this._register(new Ro),this.onShow=this._onShow.event,this._onHide=this._register(new Ro),this.onHide=this._onHide.event,this.contexts=new Map}createController(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.layoutService,t=arguments.length>1?arguments[1]:void 0,i={idPrefix:"quickInput_",container:e.activeContainer,ignoreFocusOut:()=>!1,backKeybindingLabel:()=>{},setContextKey:e=>this.setContextKey(e),linkOpenerDelegate:e=>{this.instantiationService.invokeFunction(t=>{t.get(MU).open(e,{allowCommands:!0,fromUserGesture:!0})})},returnFocus:()=>e.focus(),styles:this.computeStyles(),hoverDelegate:this._register(this.instantiationService.createInstance(bH))},n=this._register(this.instantiationService.createInstance(tq,(0,r.A)((0,r.A)({},i),t)));return n.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop),this._register(e.onDidLayoutActiveContainer(t=>{L_(e.activeContainer)===L_(n.container)&&n.layout(t,e.activeContainerOffset.quickPickTop)})),this._register(e.onDidChangeActiveContainer(()=>{n.isVisible()||n.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop)})),this._register(n.onShow(()=>{this.resetContextKeys(),this._onShow.fire()})),this._register(n.onHide(()=>{this.resetContextKeys(),this._onHide.fire()})),n}setContextKey(e){var t;let i;e&&(i=this.contexts.get(e),i||(i=new jk(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,i))),(!i||!i.get())&&(this.resetContextKeys(),null===(t=i)||void 0===t||t.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Go.None;return this.controller.pick(e,t,i)}input(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Go.None;return this.controller.input(e,t)}createQuickPick(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{useSeparators:!1};return this.controller.createQuickPick(e)}createInputBox(){return this.controller.createInputBox()}createQuickWidget(){return this.controller.createQuickWidget()}createQuickTree(){return this.controller.createQuickTree()}focus(){this.controller.focus()}toggle(){this.controller.toggle()}navigate(e,t){this.controller.navigate(e,t)}accept(e){return this.controller.accept(e)}back(){return this.controller.back()}cancel(e){return this.controller.cancel(e)}setAlignment(e){this.controller.setAlignment(e)}toggleHover(){this.hasController&&this.controller.toggleHover()}updateStyles(){this.hasController&&this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:{quickInputBackground:Xl(Vc),quickInputForeground:Xl(zc),quickInputTitleBackground:Xl(Kc),widgetBorder:Xl(Jh),widgetShadow:Xl(Zh)},inputBox:GN,toggle:KN,countBadge:YN,button:VN,progressBar:zN,keybindingLabel:WN,list:$N({listBackground:Vc,listFocusBackground:$c,listFocusForeground:Yc,listInactiveFocusForeground:Yc,listInactiveSelectionIconForeground:Qc,listInactiveFocusBackground:$c,listFocusOutline:vh,listInactiveFocusOutline:vh,treeStickyScrollBackground:Vc}),pickerGroup:{pickerGroupBorder:Xl(Gc),pickerGroupForeground:Xl(qc)}}}};nq=ki([Ei(0,pn),Ei(1,AS),Ei(2,$w),Ei(3,EC),Ei(4,fr)],nq),wE({});var sq=class extends nq{constructor(e,t,i,n,s,r){super(t,i,n,new OS(e.getContainerDomNode(),s),r),this.host=void 0;let o=oq.get(e);if(o){let t=o.widget;this.host={_serviceBrand:void 0,get mainContainer(){return t.getDomNode()},getContainer:()=>t.getDomNode(),whenContainerStylesLoaded(){},get containers(){return[t.getDomNode()]},get activeContainer(){return t.getDomNode()},get mainContainerDimension(){return e.getLayoutInfo()},get activeContainerDimension(){return e.getLayoutInfo()},get onDidLayoutMainContainer(){return e.onDidLayoutChange},get onDidLayoutActiveContainer(){return e.onDidLayoutChange},get onDidLayoutContainer(){return _o.map(e.onDidLayoutChange,e=>({container:t.getDomNode(),dimension:e}))},get onDidChangeActiveContainer(){return _o.None},get onDidAddContainer(){return _o.None},get mainContainerOffset(){return{top:0,quickPickTop:0}},get activeContainerOffset(){return{top:0,quickPickTop:0}},focus:()=>e.focus()}}else this.host=void 0}createController(){return super.createController(this.host)}};sq=ki([Ei(1,pn),Ei(2,AS),Ei(3,$w),Ei(4,LS),Ei(5,fr)],sq);var rq=class{get activeService(){let e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){let i=t=this.instantiationService.createInstance(sq,e);this.mapEditorToService.set(e,t),function(e,t){let i,n=this,s=!1;return function(){if(s)return i;if(s=!0,t)try{i=e.apply(n,arguments)}finally{t()}else i=e.apply(n,arguments);return i}}(e.onDidDispose)(()=>{i.dispose(),this.mapEditorToService.delete(e)})}return t}get currentQuickInput(){return this.activeService.currentQuickInput}get quickAccess(){return this.activeService.quickAccess}get backButton(){return this.activeService.backButton}get onShow(){return this.activeService.onShow}get onHide(){return this.activeService.onHide}constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}pick(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Go.None;return this.activeService.pick(e,t,i)}input(e,t){return this.activeService.input(e,t)}createQuickPick(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{useSeparators:!1};return this.activeService.createQuickPick(e)}createInputBox(){return this.activeService.createInputBox()}createQuickWidget(){return this.activeService.createQuickWidget()}createQuickTree(){return this.activeService.createQuickTree()}focus(){return this.activeService.focus()}toggle(){return this.activeService.toggle()}navigate(e,t){return this.activeService.navigate(e,t)}accept(){return this.activeService.accept()}back(){return this.activeService.back()}cancel(){return this.activeService.cancel()}setAlignment(e){return this.activeService.setAlignment(e)}toggleHover(){return this.activeService.toggleHover()}};rq=ki([Ei(0,pn),Ei(1,LS)],rq);var oq=(ti=class e{static get(t){return t.getContribution(e.ID)}constructor(e){this.editor=e,this.widget=new aq(this.editor)}dispose(){this.widget.dispose()}},{_:ti.ID="editor.controller.quickInput"},ti),aq=(ii=class e{constructor(e){this.codeEditor=e,this.domNode=mb("div"),this.codeEditor.addOverlayWidget(this)}getId(){return e.ID}getDomNode(){return this.domNode}getPosition(){return{preference:{top:0,left:0}}}dispose(){this.codeEditor.removeOverlayWidget(this)}},{_:ii.ID="editor.contrib.quickInputWidget"},ii);!function(e,t,i){FU.INSTANCE.registerEditorContribution(e,t,i)}(oq.ID,oq,DU.Lazy);var lq={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Dh]:"#FFFFFE",[Th]:"#000000",[Bh]:"#E5EBF1",[bu]:"#D3D3D3",[Cu]:"#939393",[Uh]:"#ADD6FF4D"}},hq={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Dh]:"#1E1E1E",[Th]:"#D4D4D4",[Bh]:"#3A3D41",[bu]:"#404040",[Cu]:"#707070",[Uh]:"#ADD6FF26"}},dq={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Dh]:"#000000",[Th]:"#FFFFFF",[bu]:"#FFFFFF",[Cu]:"#FFFFFF"}},cq={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Dh]:"#FFFFFF",[Th]:"#292929",[bu]:"#292929",[Cu]:"#292929"}},uq="vs-dark",gq="hc-black",pq="hc-light",fq=Tn.as(Zl),mq=Tn.as(lu),vq=class{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;let i=t.base;e.length>0?(_q(e)?this.id=e:this.id=i+" "+e,this.themeName=e):(this.id=i,this.themeName=i),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get label(){return this.themeName}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){let e=new Map;for(let t in this.themeData.colors)e.set(t,Ir.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){let t=bq(this.themeData.base);for(let i in t.colors)e.has(i)||e.set(i,Ir.fromHex(t.colors[i]))}this.colors=e}return this.colors}getColor(e,t){let i=this.getColors().get(e);return i||(!1!==t?this.getDefault(e):void 0)}getDefault(e){let t=this.defaultColors[e];return t||(t=fq.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return this.getColors().has(e)}get type(){switch(this.base){case"vs":return eu.LIGHT;case gq:return eu.HIGH_CONTRAST_DARK;case pq:return eu.HIGH_CONTRAST_LIGHT;default:return eu.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){let i=bq(this.themeData.base);e=i.rules,i.encodedTokensColors&&(t=i.encodedTokensColors)}let i=this.themeData.colors["editor.foreground"],n=this.themeData.colors["editor.background"];if(i||n){let t={token:""};i&&(t.foreground=i),n&&(t.background=n),e.push(t)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=nf.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,i){let n=this.tokenTheme._match([e].concat(t).join(".")).metadata,s=Zp.getForeground(n),r=Zp.getFontStyle(n);return{foreground:s,italic:!!(r&Yp.Italic),bold:!!(r&Yp.Bold),underline:!!(r&Yp.Underline),strikethrough:!!(r&Yp.Strikethrough)}}get tokenColorMap(){return[]}};function _q(e){return"vs"===e||"vs-dark"===e||"hc-black"===e||"hc-light"===e}function bq(e){switch(e){case"vs":return lq;case uq:return hq;case gq:return dq;case pq:return cq}}function Cq(e){return new vq(e,bq(e))}var yq=fn("themeService"),wq=class extends Co{constructor(e,t,i){super(),this._contextKeyService=e,this._layoutService=t,this._configurationService=i,this._accessibilitySupport=MT.Unknown,this._onDidChangeScreenReaderOptimized=new Ro,this._onDidChangeReducedMotion=new Ro,this._onDidChangeLinkUnderline=new Ro,this._accessibilityModeEnabledContext=WT.bindTo(this._contextKeyService);let n=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration("editor.accessibilitySupport")&&(n(),this._onDidChangeScreenReaderOptimized.fire()),e.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())})),n(),this._register(this.onDidChangeScreenReaderOptimized(()=>n()));let s=Lv.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=s.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._linkUnderlinesEnabled=this._configurationService.getValue("accessibility.underlineLinks"),this.initReducedMotionListeners(s),this.initLinkUnderlineListeners()}initReducedMotionListeners(e){this._register(W_(e,"change",()=>{this._systemMotionReduced=e.matches,"auto"===this._configMotionReduced&&this._onDidChangeReducedMotion.fire()}));let t=()=>{let e=this.isMotionReduced();this._layoutService.mainContainer.classList.toggle("monaco-reduce-motion",e),this._layoutService.mainContainer.classList.toggle("monaco-enable-motion",!e)};t(),this._register(this.onDidChangeReducedMotion(()=>t()))}initLinkUnderlineListeners(){this._register(this._configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration("accessibility.underlineLinks")&&(this._linkUnderlinesEnabled=this._configurationService.getValue("accessibility.underlineLinks"),this._onDidChangeLinkUnderline.fire())}));let e=()=>{let e=this._linkUnderlinesEnabled;this._layoutService.mainContainer.classList.toggle("underline-links",e)};e(),this._register(this.onDidChangeLinkUnderlines(()=>e()))}onDidChangeLinkUnderlines(e){return this._onDidChangeLinkUnderline.event(e)}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){let e=this._configurationService.getValue("editor.accessibilitySupport");return"on"===e||"auto"===e&&this._accessibilitySupport===MT.Enabled}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){let e=this._configMotionReduced;return"on"===e||"auto"===e&&this._systemMotionReduced}alwaysUnderlineAccessKeys(){return Promise.resolve(!1)}getAccessibilitySupport(){return this._accessibilitySupport}setAccessibilitySupport(e){this._accessibilitySupport!==e&&(this._accessibilitySupport=e,this._onDidChangeScreenReaderOptimized.fire())}alert(e){}status(e){}};wq=ki([Ei(0,AS),Ei(1,EC),Ei(2,fr)],wq);var Sq,kq,Eq=class{constructor(e,t,i){this._commandService=e,this._keybindingService=t,this._hiddenStates=new Dq(i)}createMenu(e,t,i){return new xq(e,this._hiddenStates,(0,r.A)({emitEventsForSubmenuChanges:!1,eventDebounceDelay:50},i),this._commandService,this._keybindingService,t)}getMenuActions(e,t,i){let n=new xq(e,this._hiddenStates,(0,r.A)({emitEventsForSubmenuChanges:!1,eventDebounceDelay:50},i),this._commandService,this._keybindingService,t),s=n.getActions(i);return n.dispose(),s}getMenuContexts(e){let t=new Tq(e,!1);return new Set([...t.structureContextKeys,...t.preconditionContextKeys,...t.toggledContextKeys])}resetHiddenStates(e){this._hiddenStates.reset(e)}};Eq=ki([Ei(0,LD),Ei(1,SE),Ei(2,Sn)],Eq);var Dq=(ni=class{constructor(e){this._storageService=e,this._disposables=new bo,this._onDidChange=new Ro,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{let t=e.get(Sq._key,Vp.PROFILE,"{}");this._data=JSON.parse(t)}catch(t){this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(Vp.PROFILE,Sq._key,this._disposables)(()=>{if(!this._ignoreChangeEvent)try{let t=e.get(Sq._key,Vp.PROFILE,"{}");this._data=JSON.parse(t)}catch(e){console.log("FAILED to read storage after UPDATE",e)}this._onDidChange.fire()}))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(e,t){var i;return null!==(i=this._hiddenByDefaultCache.get("".concat(e.id,"/").concat(t)))&&void 0!==i&&i}setDefaultState(e,t,i){this._hiddenByDefaultCache.set("".concat(e.id,"/").concat(t),i)}isHidden(e,t){var i,n;let s=this._isHiddenByDefault(e,t),r=null!==(i=null===(n=this._data[e.id])||void 0===n?void 0:n.includes(t))&&void 0!==i&&i;return s?!r:r}updateHidden(e,t,i){this._isHiddenByDefault(e,t)&&(i=!i);let n=this._data[e.id];if(i)n?n.indexOf(t)<0&&n.push(t):this._data[e.id]=[t];else if(n){let i=n.indexOf(t);i>=0&&function(e,t){let i=e.length-1;t<i&&(e[t]=e[i]),e.pop()}(n,i),0===n.length&&delete this._data[e.id]}this._persist()}reset(e){if(void 0===e)this._data=Object.create(null),this._persist();else{for(let{id:t}of e)this._data[t]&&delete this._data[t];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;let e=JSON.stringify(this._data);this._storageService.store(Sq._key,e,Vp.PROFILE,zp.USER)}finally{this._ignoreChangeEvent=!1}}},{_:Sq=ni},{_:ni._key="menu.hiddenCommands"},ni);Dq=Sq=ki([Ei(0,Sn)],Dq);var Tq=class e{constructor(e,t){this._id=e,this._collectContextKeysForSubmenus=t,this._menuGroups=[],this._allMenuIds=new Set,this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}get allMenuIds(){return this._allMenuIds}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._allMenuIds.clear(),this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();let e,t=this._sort(XD.getMenuItems(this._id));for(let i of t){let t=i.group||"";(!e||e[0]!==t)&&(e=[t,[]],this._menuGroups.push(e)),e[1].push(i),this._collectContextKeysAndSubmenuIds(i)}this._allMenuIds.add(this._id)}_sort(e){return e}_collectContextKeysAndSubmenuIds(t){if(e._fillInKbExprKeys(t.when,this._structureContextKeys),YD(t)){if(t.command.precondition&&e._fillInKbExprKeys(t.command.precondition,this._preconditionContextKeys),t.command.toggled){let i=t.command.toggled.condition||t.command.toggled;e._fillInKbExprKeys(i,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&(XD.getMenuItems(t.submenu).forEach(this._collectContextKeysAndSubmenuIds,this),this._allMenuIds.add(t.submenu))}static _fillInKbExprKeys(e,t){if(e)for(let i of e.keys())t.add(i)}},Iq=kq=class extends Tq{constructor(e,t,i,n,s,r){super(e,i),this._hiddenStates=t,this._commandService=n,this._keybindingService=s,this._contextKeyService=r,this.refresh()}createActionGroups(e){let t=[];for(let i of this._menuGroups){let n,[s,r]=i;for(let t of r)if(this._contextKeyService.contextMatchesRules(t.when)){let i=YD(t);i&&this._hiddenStates.setDefaultState(this._id,t.command.id,!!t.isHiddenByDefault);let s=Lq(this._id,i?t.command:t,this._hiddenStates);if(i){let i=Aq(this._commandService,this._keybindingService,t.command.id,t.when);(null!==n&&void 0!==n?n:n=[]).push(new JD(t.command,t.alt,e,s,i,this._contextKeyService,this._commandService))}else{let i=new kq(t.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._keybindingService,this._contextKeyService).createActionGroups(e),r=KD.join(...i.map(e=>e[1]));r.length>0&&(null!==n&&void 0!==n?n:n=[]).push(new ZD(t,s,r))}}n&&n.length>0&&t.push([s,n])}return t}_sort(e){return e.sort(kq._compareMenuItems)}static _compareMenuItems(e,t){let i=e.group,n=t.group;if(i!==n){if(!i)return 1;if(!n)return-1;if("navigation"===i)return-1;if("navigation"===n)return 1;let e=i.localeCompare(n);if(0!==e)return e}let s=e.order||0,r=t.order||0;return s<r?-1:s>r?1:kq._compareTitles(YD(e)?e.command.title:e.title,YD(t)?t.command.title:t.title)}static _compareTitles(e,t){let i="string"==typeof e?e:e.original,n="string"==typeof t?t:t.original;return i.localeCompare(n)}};Iq=kq=ki([Ei(3,LD),Ei(4,SE),Ei(5,AS)],Iq);var xq=class{constructor(e,t,i,n,s,r){this._disposables=new bo,this._menuInfo=new Iq(e,t,i.emitEventsForSubmenuChanges,n,s,r);let o=new Rl(()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})},i.eventDebounceDelay);this._disposables.add(o),this._disposables.add(XD.onDidChangeMenu(e=>{for(let t of this._menuInfo.allMenuIds)if(e.has(t)){o.schedule();break}}));let a=this._disposables.add(new bo);this._onDidChange=new Bo({onWillAddFirstListener:()=>{a.add(r.onDidChangeContext(e=>{let t=e.affectsSome(this._menuInfo.structureContextKeys),i=e.affectsSome(this._menuInfo.preconditionContextKeys),n=e.affectsSome(this._menuInfo.toggledContextKeys);(t||i||n)&&this._onDidChange.fire({menu:this,isStructuralChange:t,isEnablementChange:i,isToggleChange:n})})),a.add(t.onDidChange(e=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})}))},onDidRemoveLastListener:a.clear.bind(a),delay:i.eventDebounceDelay,merge:e=>{let t=!1,i=!1,n=!1;for(let s of e)if(t||(t=s.isStructuralChange),i||(i=s.isEnablementChange),n||(n=s.isToggleChange),t&&i&&n)break;return{menu:this,isStructuralChange:t,isEnablementChange:i,isToggleChange:n}}}),this.onDidChange=this._onDidChange.event}getActions(e){return this._menuInfo.createActionGroups(e)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}};function Lq(e,t,i){let n=function(e){return void 0!==e.submenu}(t)?t.submenu.id:t.id,s="string"==typeof t.title?t.title:t.title.value,r=jD({id:"hide/".concat(e.id,"/").concat(n),label:Li(1759,"Hide '{0}'",s),run(){i.updateHidden(e,n,!0)}}),o=jD({id:"toggle/".concat(e.id,"/").concat(n),label:s,get checked(){return!i.isHidden(e,n)},run(){i.updateHidden(e,n,!!this.checked)}});return{hide:r,toggle:o,get isHidden(){return!o.checked}}}function Aq(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return jD({id:"configureKeybinding/".concat(i),label:Li(1760,"Configure Keybinding"),enabled:s,run(){let s=!t.lookupKeybinding(i)&&n?n.serialize():void 0;e.executeCommand("workbench.action.openGlobalKeybindings","@command:".concat(i)+(s?" +when:".concat(s):""))}})}xq=ki([Ei(3,LD),Ei(4,SE),Ei(5,AS)],xq);var Nq,Fq="application/vnd.code.resources",Oq=(si=class extends Co{constructor(e,t){super(),this.layoutService=e,this.logService=t,this.mapTextToType=new Map,this.findText="",this.resources=[],this.resourcesStateHash=void 0,(Uv||Hv)&&this.installWebKitWriteTextWorkaround(),this._register(_o.runAndSubscribe(M_,e=>{let{window:t,disposables:i}=e;i.add(W_(t.document,"copy",()=>this.clearResourcesState()))},{window:Lv,disposables:this._store}))}triggerPaste(){this.logService.trace("BrowserClipboardService#triggerPaste")}async readImage(){try{let e=(await Lv.navigator.clipboard.read())[0],t=["image/png","image/jpeg","image/gif","image/tiff","image/bmp"].find(t=>e.types.includes(t));if(t){let i=await(await e.getType(t)).arrayBuffer();return new Uint8Array(i)}console.error("No supported image type found in the clipboard")}catch(hn){console.error("Error reading image from clipboard:",hn)}return new Uint8Array}installWebKitWriteTextWorkaround(){let e=()=>{let e=new Vl;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=e,pb().navigator.clipboard.write([new ClipboardItem({"text/plain":e.p})]).catch(async t=>{(!(t instanceof Error)||"NotAllowedError"!==t.name||!e.isRejected)&&this.logService.error(t)})};this._register(_o.runAndSubscribe(this.layoutService.onDidAddContainer,t=>{let{container:i,disposables:n}=t;n.add(W_(i,"click",e)),n.add(W_(i,"keydown",e))},{container:this.layoutService.mainContainer,disposables:this._store}))}async writeText(e,t){if(this.logService.trace("BrowserClipboardService#writeText called with type:",t," text.length:",e.length),this.clearResourcesState(),t)return this.mapTextToType.set(t,e),void this.logService.trace("BrowserClipboardService#writeText");if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(e);try{return this.logService.trace("before navigator.clipboard.writeText"),await pb().navigator.clipboard.writeText(e)}catch(e){console.error(e)}this.fallbackWriteText(e)}fallbackWriteText(e){this.logService.trace("BrowserClipboardService#fallbackWriteText");let t=gb(),i=hb(),n=t.body.appendChild(Mb("textarea",{"aria-hidden":!0}));n.style.height="1px",n.style.width="1px",n.style.position="absolute",n.value=e,n.focus(),n.select(),t.execCommand("copy"),bb(i)&&i.focus(),n.remove()}async readText(e){if(this.logService.trace("BrowserClipboardService#readText called with type:",e),e){let t=this.mapTextToType.get(e)||"";return this.logService.trace("BrowserClipboardService#readText text.length:",t.length),t}try{let e=await pb().navigator.clipboard.readText();return this.logService.trace("BrowserClipboardService#readText text.length:",e.length),e}catch(e){console.error(e)}return""}async readFindText(){return this.findText}async writeFindText(e){this.findText=e}async writeResources(e){try{await pb().navigator.clipboard.write([new ClipboardItem({["web ".concat(Fq)]:new Blob([JSON.stringify(e.map(e=>e.toJSON()))],{type:Fq})})])}catch(t){}0===e.length?this.clearResourcesState():(this.resources=e,this.resourcesStateHash=await this.computeResourcesStateHash())}async readResources(){try{let e=await pb().navigator.clipboard.read();for(let t of e)if(t.types.includes("web ".concat(Fq))){let e=await t.getType("web ".concat(Fq));return JSON.parse(await e.text()).map(e=>Gs.from(e))}}catch(t){}let e=await this.computeResourcesStateHash();return this.resourcesStateHash!==e&&this.clearResourcesState(),this.resources}async computeResourcesStateHash(){if(0!==this.resources.length)return Ng((await this.readText()).substring(0,Nq.MAX_RESOURCE_STATE_SOURCE_LENGTH))}async hasResources(){try{let e=await pb().navigator.clipboard.read();for(let t of e)if(t.types.includes("web ".concat(Fq)))return!0}catch(e){}return this.resources.length>0}clearInternalState(){this.clearResourcesState()}clearResourcesState(){this.resources=[],this.resourcesStateHash=void 0}},{_:Nq=si},{_:si.MAX_RESOURCE_STATE_SOURCE_LENGTH=1e3},si);Oq=Nq=ki([Ei(0,EC),Ei(1,Np)],Oq);var Rq=fn("clipboardService"),Mq="data-keybinding-context",Pq=class{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}get value(){return(0,r.A)({},this._value)}setValue(e,t){return!dS(this._value[e],t)&&(this._value[e]=t,!0)}removeValue(e){return e in this._value&&(delete this._value[e],!0)}getValue(e){let t=this._value[e];return void 0===t&&this._parent?this._parent.getValue(e):t}updateParent(e){this._parent=e}collectAllValues(){let e=this._parent?this._parent.collectAllValues():Object.create(null);return e=(0,r.A)((0,r.A)({},e),this._value),delete e._contextId,e}},Bq=({_:(ri=class extends Pq{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}collectAllValues(){return Object.create(null)}}).INSTANCE=new ri},ri),Uq=(oi=class e extends Pq{constructor(e,t,i){super(e,null),this._configurationService=t,this._values=Jg.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(e=>{if(e.source===tr.DEFAULT){let e=Array.from(this._values,e=>{let[t]=e;return t});this._values.clear(),i.fire(new Vq(e))}else{let t=[];for(let i of e.affectedKeys){let e="config.".concat(i),n=this._values.findSuperstr(e);void 0!==n&&(t.push(...oo.map(n,e=>{let[t]=e;return t})),this._values.deleteSuperstr(e)),this._values.has(e)&&(t.push(e),this._values.delete(e))}i.fire(new Vq(t))}})}dispose(){this._listener.dispose()}getValue(t){if(0!==t.indexOf(e._keyPrefix))return super.getValue(t);if(this._values.has(t))return this._values.get(t);let i,n=t.substr(e._keyPrefix.length),s=this._configurationService.getValue(n);switch(typeof s){case"number":case"boolean":case"string":i=s;break;default:i=Array.isArray(s)?JSON.stringify(s):s}return this._values.set(t,i),i}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}collectAllValues(){let e=Object.create(null);return this._values.forEach((t,i)=>e[i]=t),(0,r.A)((0,r.A)({},e),super.collectAllValues())}},{_:oi._keyPrefix="config."},oi),Hq=class{constructor(e,t,i){this._service=e,this._key=t,this._defaultValue=i,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){void 0===this._defaultValue?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}},Wq=class{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}allKeysContainedIn(e){return this.affectsSome(e)}},Vq=class{constructor(e){this.keys=e}affectsSome(e){for(let t of this.keys)if(e.has(t))return!0;return!1}allKeysContainedIn(e){return this.keys.every(t=>e.has(t))}},zq=class{constructor(e){this.events=e}affectsSome(e){for(let t of this.events)if(t.affectsSome(e))return!0;return!1}allKeysContainedIn(e){return this.events.every(t=>t.allKeysContainedIn(e))}};var Kq=class extends Co{get onDidChangeContext(){return this._onDidChangeContext.event}constructor(e){super(),this._onDidChangeContext=this._register(new Po({merge:e=>new zq(e)})),this._isDisposed=!1,this._myContextId=e}get contextId(){return this._myContextId}createKey(e,t){if(this._isDisposed)throw Error("AbstractContextKeyService has been disposed");return new Hq(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw Error("AbstractContextKeyService has been disposed");return new Gq(this,e)}createOverlay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oo.empty();if(this._isDisposed)throw Error("AbstractContextKeyService has been disposed");return new Yq(this,e)}contextMatchesRules(e){if(this._isDisposed)throw Error("AbstractContextKeyService has been disposed");let t=this.getContextValuesContainer(this._myContextId);return!e||e.evaluate(t)}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;let i=this.getContextValuesContainer(this._myContextId);i&&i.setValue(e,t)&&this._onDidChangeContext.fire(new Wq(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new Wq(e))}getContext(e){return this._isDisposed?Bq.INSTANCE:this.getContextValuesContainer(function(e){for(;e;){if(e.hasAttribute(Mq)){let t=e.getAttribute(Mq);return t?parseInt(t,10):NaN}e=e.parentElement}return 0}(e))}dispose(){super.dispose(),this._isDisposed=!0}},qq=class extends Kq{constructor(e){super(0),this._contexts=new Map,this._lastContextId=0,this.inputFocusedContext=_z.bindTo(this);let t=this._register(new Uq(this._myContextId,e,this._onDidChangeContext));this._contexts.set(this._myContextId,t),this._register(_o.runAndSubscribe(M_,e=>{let{window:t,disposables:i}=e,n=i.add(new yo);i.add(function(e){return new V_(e)}(t)).onDidChangeActiveElement(e=>{n.value=new bo,this.updateInputContextKeys(t.document,e,n.value)})},{window:Lv,disposables:this._store}))}updateInputContextKeys(e,t,i){function n(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hb(e);return!!t&&qb(t)}let s=n(t);if(this.inputFocusedContext.set(s),s){let s=i.add(Ib(t));_o.once(s.onDidBlur)(()=>{gb()===e&&this.inputFocusedContext.set(n()),s.dispose()},void 0,i)}}getContextValuesContainer(e){return this._isDisposed?Bq.INSTANCE:this._contexts.get(e)||Bq.INSTANCE}createChildContext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._myContextId;if(this._isDisposed)throw Error("ContextKeyService has been disposed");let t=++this._lastContextId;return this._contexts.set(t,new Pq(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}updateParent(e){throw Error("Cannot update parent of root ContextKeyService")}};qq=ki([Ei(0,fr)],qq);var Gq=class extends Kq{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=this._register(new yo),this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(Mq)){let e="";this._domNode.classList&&(e=Array.from(this._domNode.classList.values()).join(", ")),console.error("Element already has context attribute".concat(e?": "+e:""))}this._domNode.setAttribute(Mq,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(e=>{(function(e,t){return e.allKeysContainedIn(new Set(Object.keys(t)))})(e,this._parent.getContextValuesContainer(this._myContextId).value)||this._onDidChangeContext.fire(e)})}dispose(){this._isDisposed||(this._parent.disposeContext(this._myContextId),this._domNode.removeAttribute(Mq),super.dispose())}getContextValuesContainer(e){return this._isDisposed?Bq.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._myContextId;if(this._isDisposed)throw Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}updateParent(e){if(this._parent===e)return;let t=this._parent.getContextValuesContainer(this._myContextId),i=t.collectAllValues();this._parent=e,this._updateParentChangeListener();let n=this._parent.getContextValuesContainer(this._parent.contextId);t.updateParent(n);let s=t.collectAllValues(),o=(0,r.A)((0,r.A)({},cS(i,s)),cS(s,i)),a=Object.keys(o);this._onDidChangeContext.fire(new Vq(a))}},jq=class{constructor(e,t){this.parent=e,this.overlay=t}getValue(e){return this.overlay.has(e)?this.overlay.get(e):this.parent.getValue(e)}},Yq=class e{get contextId(){return this.parent.contextId}get onDidChangeContext(){return this.parent.onDidChangeContext}constructor(e,t){this.parent=e,this.overlay=new Map(t)}bufferChangeEvents(e){this.parent.bufferChangeEvents(e)}createKey(){throw Error("Not supported.")}getContext(e){return new jq(this.parent.getContext(e),this.overlay)}getContextValuesContainer(e){return new jq(this.parent.getContextValuesContainer(e),this.overlay)}contextMatchesRules(e){let t=this.getContextValuesContainer(this.contextId);return!e||e.evaluate(t)}getContextKeyValue(e){return this.overlay.has(e)?this.overlay.get(e):this.parent.getContextKeyValue(e)}createScoped(){throw Error("Not supported.")}createOverlay(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oo.empty();return new e(this,t)}updateParent(){throw Error("Not supported.")}};AD.registerCommand("_setContext",function(e,t,i){e.get(AS).createKey(String(t),function(e){return lS(e,e=>"object"==typeof e&&e.$mid===Dn.Uri?Gs.revive(e).toString():e instanceof Gs?e.toString():void 0)}(i))}),AD.registerCommand({id:"getContextKeyInfo",handler:()=>[...jk.all()].sort((e,t)=>e.key.localeCompare(t.key)),metadata:{description:Li(1769,"A command that returns information about context keys"),args:[]}}),AD.registerCommand("_generateContextKeyInfo",function(){let e=[],t=new Set;for(let i of jk.all())t.has(i.key)||(t.add(i.key),e.push(i));e.sort((e,t)=>e.key.localeCompare(t.key)),console.log(JSON.stringify(e,void 0,2))});var Qq,$q=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}},Xq=class{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){let e=[];for(let t of this._nodes.values())0===t.outgoing.size&&e.push(t);return e}insertEdge(e,t){let i=this.lookupOrInsertNode(e),n=this.lookupOrInsertNode(t);i.outgoing.set(n.key,n),n.incoming.set(i.key,i)}removeNode(e){let t=this._hashFn(e);this._nodes.delete(t);for(let i of this._nodes.values())i.outgoing.delete(t),i.incoming.delete(t)}lookupOrInsertNode(e){let t=this._hashFn(e),i=this._nodes.get(t);return i||(i=new $q(t,e),this._nodes.set(t,i)),i}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return 0===this._nodes.size}toString(){let e=[];for(let[t,i]of this._nodes)e.push("".concat(t,"\n\t(-> incoming)[").concat([...i.incoming.keys()].join(", "),"]\n\t(outgoing ->)[").concat([...i.outgoing.keys()].join(","),"]\n"));return e.join("\n")}findCycleSlow(){for(let[e,t]of this._nodes){let i=new Set([e]),n=this._findCycle(t,i);if(n)return n}}_findCycle(e,t){for(let[i,n]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);let e=this._findCycle(n,t);if(e)return e;t.delete(i)}}},Zq=class{constructor(){this._entries=new Map;for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(let[n,s]of t)this.set(n,s)}set(e,t){let i=this._entries.get(e);return this._entries.set(e,t),i}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}},Jq=class extends Error{constructor(e){var t;super("cyclic dependency between services"),this.message=null!==(t=e.findCycleSlow())&&void 0!==t?t:"UNABLE to detect cycle, dumping graph: \n".concat(e.toString())}},eG=class e{constructor(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Zq,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._services=t,this._strict=i,this._parent=n,this._enableTracing=s,this._isDisposed=!1,this._servicesToMaybeDispose=new Set,this._children=new Set,this._activeInstantiations=new Set,this._services.set(pn,this),this._globalGraph=s?null!==(e=null===n||void 0===n?void 0:n._globalGraph)&&void 0!==e?e:new Xq(e=>e):void 0}dispose(){if(!this._isDisposed){this._isDisposed=!0,po(this._children),this._children.clear();for(let e of this._servicesToMaybeDispose)go(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw Error("InstantiationService has been disposed")}createChild(t,i){this._throwIfDisposed();let n=this,s=new class extends e{dispose(){n._children.delete(s),super.dispose()}}(t,this._strict,this,this._enableTracing);return this._children.add(s),null!==i&&void 0!==i&&i.add(s),s}invokeFunction(e){this._throwIfDisposed();let t=tG.traceInvocation(this._enableTracing,e),i=!1;try{for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];return e({get:e=>{if(i)throw Wi("service accessor is only valid during the invocation of its target method");let n=this._getOrCreateServiceInstance(e,t);return n||this._throwIfStrict("[invokeFunction] unknown service '".concat(e,"'"),!1),n}},...s)}finally{i=!0,t.stop()}}createInstance(e){let t,i;this._throwIfDisposed();for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];return e instanceof bC?(t=tG.traceCreation(this._enableTracing,e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(s),t)):(t=tG.traceCreation(this._enableTracing,e),i=this._createInstance(e,s,t)),t.stop(),i}_createInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,n=ln.getServiceDependencies(e).sort((e,t)=>e.index-t.index),s=[];for(let o of n){let t=this._getOrCreateServiceInstance(o.id,i);t||this._throwIfStrict("[createInstance] ".concat(e.name," depends on UNKNOWN service ").concat(o.id,"."),!1),s.push(t)}let r=n.length>0?n[0].index:t.length;if(t.length!==r){console.trace("[createInstance] First service dependency of ".concat(e.name," at position ").concat(r+1," conflicts with ").concat(t.length," static arguments"));let i=r-t.length;t=i>0?t.concat(Array(i)):t.slice(0,r)}return Reflect.construct(e,t.concat(s))}_setCreatedServiceInstance(e,t){if(this._services.get(e)instanceof bC)this._services.set(e,t);else{if(!this._parent)throw Error("illegalState - setting UNKNOWN service instance");this._parent._setCreatedServiceInstance(e,t)}}_getServiceInstanceOrDescriptor(e){let t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));let i=this._getServiceInstanceOrDescriptor(e);return i instanceof bC?this._safeCreateAndCacheServiceInstance(e,i,t.branch(e,!0)):(t.branch(e,!1),i)}_safeCreateAndCacheServiceInstance(e,t,i){if(this._activeInstantiations.has(e))throw Error("illegal state - RECURSIVELY instantiating service '".concat(e,"'"));this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,i)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,i){let n=new Xq(e=>e.id.toString()),s=0,r=[{id:e,desc:t,_trace:i}],o=new Set;for(;r.length;){let t=r.pop();if(!o.has(String(t.id))){if(o.add(String(t.id)),n.lookupOrInsertNode(t),s++>1e3)throw new Jq(n);for(let i of ln.getServiceDependencies(t.desc.ctor)){var a;let s=this._getServiceInstanceOrDescriptor(i.id);if(s||this._throwIfStrict("[createInstance] ".concat(e," depends on ").concat(i.id," which is NOT registered."),!0),null!==(a=this._globalGraph)&&void 0!==a&&a.insertEdge(String(t.id),String(i.id)),s instanceof bC){let e={id:i.id,desc:s,_trace:t._trace.branch(i.id,!0)};n.lookup(e)||r.push(e),n.insertEdge(t,e)}}}}for(;;){let e=n.roots();if(0===e.length){if(!n.isEmpty())throw new Jq(n);break}for(let{data:t}of e){if(this._getServiceInstanceOrDescriptor(t.id)instanceof bC){let e=this._createServiceInstanceWithOwner(t.id,t.desc.ctor,t.desc.staticArguments,t.desc.supportsDelayedInstantiation,t._trace);this._setCreatedServiceInstance(t.id,e)}n.removeNode(t)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;if(this._services.get(e)instanceof bC)return this._createServiceInstance(e,t,i,n,s,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,i,n,s);throw Error("illegalState - creating UNKNOWN service instance ".concat(t.name))}_createServiceInstance(t,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;if(arguments.length>3?arguments[3]:void 0){let o=new e(void 0,this._strict,this,this._enableTracing);o._globalGraphImplicitDependency=String(t);let a=new Map,l=new Bl(()=>{let e=o._createInstance(i,n,s);for(let[t,i]of a){let n=e[t];if("function"==typeof n)for(let t of i)t.disposable=n.apply(e,t.listener)}return a.clear(),r.add(e),e});return new Proxy(Object.create(null),{get(e,t){if(!l.isInitialized&&"string"==typeof t&&(t.startsWith("onDid")||t.startsWith("onWill"))){let e=a.get(t);return e||(e=new Eo,a.set(t,e)),(i,n,s)=>{if(l.isInitialized)return l.value[t](i,n,s);{let t={listener:[i,n,s],disposable:void 0},r=e.push(t);return vo(()=>{var e;r(),null===(e=t.disposable)||void 0===e||e.dispose()})}}}if(t in e)return e[t];let i=l.value,n=i[t];return"function"==typeof n?(n=n.bind(i),e[t]=n,n):n},set:(e,t,i)=>(l.value[t]=i,!0),getPrototypeOf:e=>i.prototype})}{let e=this._createInstance(i,n,s);return r.add(e),e}}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw Error(e)}};!function(e){e[e.None=0]="None",e[e.Creation=1]="Creation",e[e.Invocation=2]="Invocation",e[e.Branch=3]="Branch"}(Qq||(Qq={}));var tG=(ai=class e{static traceInvocation(t,i){return t?new e(Qq.Invocation,i.name||Error().stack.split("\n").slice(3,4).join("\n")):e._None}static traceCreation(t,i){return t?new e(Qq.Creation,i.name):e._None}constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}branch(t,i){let n=new e(Qq.Branch,t.toString());return this._dep.push([t,i,n]),n}stop(){let t=Date.now()-this._start;e._totals+=t;let i=!1;let n=["".concat(this.type===Qq.Creation?"CREATE":"CALL"," ").concat(this.name),"".concat(function e(t,n){let s=[],r=Array(t+1).join("\t");for(let[o,a,l]of n._dep)if(a&&l){i=!0,s.push("".concat(r,"CREATES -> ").concat(o));let n=e(t+1,l);n&&s.push(n)}else s.push("".concat(r,"uses -> ").concat(o));return s.join("\n")}(1,this)),"DONE, took ".concat(t.toFixed(2),"ms (grand total ").concat(e._totals.toFixed(2),"ms)")];(t>2||i)&&e.all.add(n.join("\n"))}},{_:ai.all=new Set},{_:ai._None=new class extends ai{constructor(){super(Qq.None,null)}stop(){}branch(){return this}}},{_:ai._totals=0},ai),iG=new Set([Ha.inMemory,Ha.vscodeSourceControl,Ha.walkThrough,Ha.walkThroughSnippet,Ha.vscodeChatCodeBlock,Ha.vscodeTerminal]),nG=class{constructor(){this._byResource=new so,this._byOwner=new Map}set(e,t,i){let n=this._byResource.get(e);n||(n=new Map,this._byResource.set(e,n)),n.set(t,i);let s=this._byOwner.get(t);s||(s=new so,this._byOwner.set(t,s)),s.set(e,i)}get(e,t){var i;return null===(i=this._byResource.get(e))||void 0===i?void 0:i.get(t)}delete(e,t){let i=!1,n=!1,s=this._byResource.get(e);s&&(i=s.delete(t));let r=this._byOwner.get(t);if(r&&(n=r.delete(e)),i!==n)throw Error("illegal state");return i&&n}values(e){var t,i,n,s;return"string"==typeof e?null!==(t=null===(i=this._byOwner.get(e))||void 0===i?void 0:i.values())&&void 0!==t?t:oo.empty():Gs.isUri(e)?null!==(n=null===(s=this._byResource.get(e))||void 0===s?void 0:s.values())&&void 0!==n?n:oo.empty():oo.map(oo.concat(...this._byOwner.values()),e=>e[1])}},sG=class{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new so,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(let t of e){let e=this._data.get(t);e&&this._substract(e);let i=this._resourceStats(t);this._add(i),this._data.set(t,i)}}_resourceStats(e){let t={errors:0,warnings:0,infos:0,unknowns:0};if(iG.has(e.scheme))return t;for(let{severity:i}of this._service.read({resource:e}))i===MF.Error?t.errors+=1:i===MF.Warning?t.warnings+=1:i===MF.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}},rG=fn("policy"),oG=class extends Co{get configurationModel(){return this._configurationModel}constructor(e){super(),this.logService=e,this._onDidChangeConfiguration=this._register(new Ro),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configurationModel=RI.createEmptyModel(e)}async initialize(){return this.resetConfigurationModel(),this._register(Tn.as(em).onDidUpdateConfiguration(e=>{let{properties:t,defaultsOverrides:i}=e;return this.onDidUpdateConfiguration(Array.from(t),i)})),this.configurationModel}reload(){return this.resetConfigurationModel(),this.configurationModel}onDidUpdateConfiguration(e,t){this.updateConfigurationModel(e,Tn.as(em).getConfigurationProperties()),this._onDidChangeConfiguration.fire({defaults:this.configurationModel,properties:e})}getConfigurationDefaultOverrides(){return{}}resetConfigurationModel(){this._configurationModel=RI.createEmptyModel(this.logService);let e=Tn.as(em).getConfigurationProperties();this.updateConfigurationModel(Object.keys(e),e)}updateConfigurationModel(e,t){let i=this.getConfigurationDefaultOverrides();for(let n of e){let e=i[n],s=t[n];void 0===e?s?this._configurationModel.setValue(n,Xw(s.default)):this._configurationModel.removeValue(n):this._configurationModel.setValue(n,e)}}},aG=class extends Co{get configurationModel(){return this._configurationModel}constructor(e,t,i){super(),this.defaultConfiguration=e,this.policyService=t,this.logService=i,this._onDidChangeConfiguration=this._register(new Ro),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configurationModel=RI.createEmptyModel(this.logService),this.configurationRegistry=Tn.as(em)}async initialize(){return this.logService.trace("PolicyConfiguration#initialize"),this.update(await this.updatePolicyDefinitions(this.defaultConfiguration.configurationModel.keys),!1),this.update(await this.updatePolicyDefinitions(Object.keys(this.configurationRegistry.getExcludedConfigurationProperties())),!1),this._register(this.policyService.onDidChange(e=>this.onDidChangePolicies(e))),this._register(this.defaultConfiguration.onDidChangeConfiguration(async e=>{let{properties:t}=e;return this.update(await this.updatePolicyDefinitions(t),!0)})),this._configurationModel}async updatePolicyDefinitions(e){this.logService.trace("PolicyConfiguration#updatePolicyDefinitions",e);let t={},i=[],n=this.configurationRegistry.getConfigurationProperties(),s=this.configurationRegistry.getExcludedConfigurationProperties();for(let o of e){var r;let e=null!==(r=n[o])&&void 0!==r?r:s[o];if(e){if(e.policy){if("string"!==e.type&&"number"!==e.type&&"array"!==e.type&&"object"!==e.type&&"boolean"!==e.type){this.logService.warn("Policy ".concat(e.policy.name," has unsupported type ").concat(e.type));continue}let{value:n}=e.policy;i.push(o),t[e.policy.name]={type:"number"===e.type?"number":"boolean"===e.type?"boolean":"string",value:n}}}else i.push(o)}return cn(t)||await this.policyService.updatePolicyDefinitions(t),i}onDidChangePolicies(e){this.logService.trace("PolicyConfiguration#onDidChangePolicies",e);let t=this.configurationRegistry.getPolicyConfigurations(),i=Pr(e.map(e=>t.get(e)));this.update(i,!0)}update(e,t){this.logService.trace("PolicyConfiguration#update",e);let i=this.configurationRegistry.getConfigurationProperties(),n=this.configurationRegistry.getExcludedConfigurationProperties(),s=[],r=this._configurationModel.isEmpty();for(let l of e){var o,a;let t=null!==(o=i[l])&&void 0!==o?o:n[l],h=null===t||void 0===t||null===(a=t.policy)||void 0===a?void 0:a.name;if(h){let i=this.policyService.getPolicyValue(h);if($i(i)&&"string"!==t.type)try{i=this.parse(i)}catch(e){this.logService.error("Error parsing policy value ".concat(h,":"),Vi(e));continue}(r?void 0!==i:!dS(this._configurationModel.getValue(l),i))&&s.push([l,i])}else void 0!==this._configurationModel.getValue(l)&&s.push([l,void 0])}if(s.length){this.logService.trace("PolicyConfiguration#changed",s);let e=this._configurationModel;this._configurationModel=RI.createEmptyModel(this.logService);for(let t of e.keys)this._configurationModel.setValue(t,e.getValue(t));for(let[t,i]of s)void 0===i?this._configurationModel.removeValue(t):this._configurationModel.setValue(t,i);t&&this._onDidChangeConfiguration.fire(this._configurationModel)}}parse(e){let t={},i=null,n=[],s=[],r=[];function o(e){if(Array.isArray(n))n.push(e);else if(null!==i){if(void 0!==n[i])throw Error("Duplicate property found: ".concat(i));n[i]=e}}if(e&&(yr(e,{onObjectBegin:()=>{let e={};o(e),s.push(n),n=e,i=null},onObjectProperty:e=>{i=e},onObjectEnd:()=>{n=s.pop()},onArrayBegin:()=>{let e=[];o(e),s.push(n),n=e,i=null},onArrayEnd:()=>{n=s.pop()},onLiteralValue:o,onError:(e,t,i)=>{r.push({error:e,offset:t,length:i})}}),t=n[0]||t),r.length>0)throw Error(r.map(e=>Vi(e.error)).join("\n"));return t}};aG=ki([Ei(1,rG),Ei(2,Np)],aG);var lG=fn("accessibilitySignalService"),hG=class extends Co{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];super(),this.logger=new rE([e,...t]),this._register(e.onDidChangeLogLevel(e=>this.setLevel(e)))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(e){this.logger.setLevel(e)}getLevel(){return this.logger.getLevel()}trace(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.logger.trace(e,...i)}debug(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.logger.debug(e,...i)}info(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.logger.info(e,...i)}warn(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.logger.warn(e,...i)}error(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.logger.error(e,...i)}flush(){this.logger.flush()}},dG=fn("dataChannelService"),cG=fn("IWebWorkerService");var uG,gG="default",pG=!1;!function(e){e[e.Request=0]="Request",e[e.Reply=1]="Reply",e[e.SubscribeEvent=2]="SubscribeEvent",e[e.Event=3]="Event",e[e.UnsubscribeEvent=4]="UnsubscribeEvent"}(uG||(uG={}));var fG=class{constructor(e,t,i,n,s){this.vsWorker=e,this.req=t,this.channel=i,this.method=n,this.args=s,this.type=uG.Request}},mG=class{constructor(e,t,i,n){this.vsWorker=e,this.seq=t,this.res=i,this.err=n,this.type=uG.Reply}},vG=class{constructor(e,t,i,n,s){this.vsWorker=e,this.req=t,this.channel=i,this.eventName=n,this.arg=s,this.type=uG.SubscribeEvent}},_G=class{constructor(e,t,i){this.vsWorker=e,this.req=t,this.event=i,this.type=uG.Event}},bG=class{constructor(e,t){this.vsWorker=e,this.req=t,this.type=uG.UnsubscribeEvent}},CG=class{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}async sendMessage(e,t,i){let n=String(++this._lastSentReq);return new Promise((s,r)=>{this._pendingReplies[n]={resolve:s,reject:r},this._send(new fG(this._workerId,n,e,t,i))})}listen(e,t,i){let n=null,s=new Ro({onWillAddFirstListener:()=>{n=String(++this._lastSentReq),this._pendingEmitters.set(n,s),this._send(new vG(this._workerId,n,e,t,i))},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(n),this._send(new bG(this._workerId,n)),n=null}});return s.event}handleMessage(e){!e||!e.vsWorker||-1!==this._workerId&&e.vsWorker!==this._workerId||this._handleMessage(e)}createProxyToRemoteChannel(e,t){var i=this;return new Proxy(Object.create(null),{get:(n,s)=>("string"==typeof s&&!n[s]&&(SG(s)?n[s]=t=>this.listen(e,s,t):wG(s)?n[s]=this.listen(e,s,void 0):s.charCodeAt(0)===En.DollarSign&&(n[s]=async function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return await(null===t||void 0===t?void 0:t()),i.sendMessage(e,s,r)})),n[s])})}_handleMessage(e){switch(e.type){case uG.Reply:return this._handleReplyMessage(e);case uG.Request:return this._handleRequestMessage(e);case uG.SubscribeEvent:return this._handleSubscribeEventMessage(e);case uG.Event:return this._handleEventMessage(e);case uG.UnsubscribeEvent:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq])return void console.warn("Got reply to unknown seq");let t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let i=e.err;if(e.err.$isError){let t=Error();t.name=e.err.name,t.message=e.err.message,t.stack=e.err.stack,i=t}return void t.reject(i)}t.resolve(e.res)}_handleRequestMessage(e){let t=e.req;this._handler.handleMessage(e.channel,e.method,e.args).then(e=>{this._send(new mG(this._workerId,t,e,void 0))},e=>{e.detail instanceof Error&&(e.detail=Mi(e.detail)),this._send(new mG(this._workerId,t,void 0,Mi(e)))})}_handleSubscribeEventMessage(e){let t=e.req,i=this._handler.handleEvent(e.channel,e.eventName,e.arg)(e=>{this._send(new _G(this._workerId,t,e))});this._pendingEvents.set(t,i)}_handleEventMessage(e){let t=this._pendingEmitters.get(e.req);void 0!==t?t.fire(e.event):console.warn("Got event for unknown req")}_handleUnsubscribeEventMessage(e){let t=this._pendingEvents.get(e.req);void 0!==t?(t.dispose(),this._pendingEvents.delete(e.req)):console.warn("Got unsubscribe for unknown req")}_send(e){let t=[];if(e.type===uG.Request)for(let i=0;i<e.args.length;i++){let n=e.args[i];n instanceof ArrayBuffer&&t.push(n)}else e.type===uG.Reply&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}},yG=class extends Co{constructor(e){super(),this._localChannels=new Map,this._remoteChannels=new Map,this._worker=this._register(e),this._register(this._worker.onMessage(e=>{this._protocol.handleMessage(e)})),this._register(this._worker.onError(e=>{(function(e){Yn&&(pG||(pG=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(e.message))})(e),Ri(e)})),this._protocol=new CG({sendMessage:(e,t)=>{this._worker.postMessage(e,t)},handleMessage:(e,t,i)=>this._handleMessage(e,t,i),handleEvent:(e,t,i)=>this._handleEvent(e,t,i)}),this._protocol.setWorkerId(this._worker.getId()),this._onModuleLoaded=this._protocol.sendMessage(gG,"$initialize",[this._worker.getId()]).then(()=>{}),this.proxy=this._protocol.createProxyToRemoteChannel(gG,async()=>{await this._onModuleLoaded}),this._onModuleLoaded.catch(e=>{this._onError("Worker failed to load ",e)})}_handleMessage(e,t,i){let n=this._localChannels.get(e);if(!n)return Promise.reject(Error("Missing channel ".concat(e," on main thread")));let s=n[t];if("function"!=typeof s)return Promise.reject(Error("Missing method ".concat(t," on main thread channel ").concat(e)));try{return Promise.resolve(s.apply(n,i))}catch(e){return Promise.reject(e)}}_handleEvent(e,t,i){let n=this._localChannels.get(e);if(!n)throw Error("Missing channel ".concat(e," on main thread"));if(SG(t)){let s=n[t];if("function"!=typeof s)throw Error("Missing dynamic event ".concat(t," on main thread channel ").concat(e,"."));let r=s.call(n,i);if("function"!=typeof r)throw Error("Missing dynamic event ".concat(t," on main thread channel ").concat(e,"."));return r}if(wG(t)){let i=n[t];if("function"!=typeof i)throw Error("Missing event ".concat(t," on main thread channel ").concat(e,"."));return i}throw Error("Malformed event name ".concat(t))}setChannel(e,t){this._localChannels.set(e,t)}getChannel(e){let t=this._remoteChannels.get(e);return void 0===t&&(t=this._protocol.createProxyToRemoteChannel(e,async()=>{await this._onModuleLoaded}),this._remoteChannels.set(e,t)),t}_onError(e,t){console.error(e),console.info(t)}};function wG(e){return"o"===e[0]&&"n"===e[1]&&ga(e.charCodeAt(2))}function SG(e){return/^onDynamic/.test(e)&&ga(e.charCodeAt(9))}var kG=(li=class e{createWorkerClient(t){let i,n=++e._workerIdPool;return i=t instanceof Worker||function(e){return!!e&&"function"==typeof e.then}(t)?Promise.resolve(t):this._createWorker(t),new yG(new DG(i,n))}_createWorker(e){let t=this.getWorkerUrl(e),i=(0,r.A)({name:e.label,type:"module"},this.getWorkerOptions(e)),n=function(e,t,i){if(!/^((http:)|(https:)|(file:))/.test(t)||t.substring(0,globalThis.origin.length)===globalThis.origin){let i=t.lastIndexOf("?"),n=t.lastIndexOf("#",i),s=i>0?new URLSearchParams(t.substring(i+1,~n?n:void 0)):new URLSearchParams;Xa.addSearchParam(s,!0,!0),t=s.toString()?"".concat(t,"?").concat(s.toString(),"#").concat(e):"".concat(t,"#").concat(e)}let n=new Blob([Pr(["/*".concat(e,"*/"),"globalThis._VSCODE_NLS_MESSAGES = ".concat(JSON.stringify(Di()),";"),"globalThis._VSCODE_NLS_LANGUAGE = ".concat(JSON.stringify(Ti()),";"),"globalThis._VSCODE_FILE_ROOT = ".concat(JSON.stringify(globalThis._VSCODE_FILE_ROOT),";"),"const ttPolicy = globalThis.trustedTypes?.createPolicy('defaultWorkerFactory', { createScriptURL: value => value });","globalThis.workerttPolicy = ttPolicy;","".concat("module"===i.type?"await import":"importScripts","(ttPolicy?.createScriptURL(").concat(JSON.stringify(t),") ?? ").concat(JSON.stringify(t),");"),"globalThis.postMessage({ type: 'vscode-worker-ready' });","/*".concat(e,"*/")]).join("")],{type:"application/javascript"});return URL.createObjectURL(n)}(e.label,t,i);return function(e){return new Promise((t,i)=>{e.onmessage=function(i){"vscode-worker-ready"===i.data.type&&(e.onmessage=null,t(e))},e.onerror=i})}(new Worker(EG?EG.createScriptURL(n):n,i))}getWorkerUrl(e){if(!e.esmModuleLocation)throw Error("Missing esmModuleLocation in WebWorkerDescriptor");return("function"==typeof e.esmModuleLocation?e.esmModuleLocation():e.esmModuleLocation).toString(!0)}getWorkerOptions(e){}},{_:li._workerIdPool=0},li),EG=(()=>{let e=globalThis;return"object"==typeof self&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name&&void 0!==e.workerttPolicy?e.workerttPolicy:function(e,t){let i=zv();if(null!==i&&void 0!==i&&i.createTrustedTypesPolicy)try{return i.createTrustedTypesPolicy(e,t)}catch(e){return void Ri(e)}try{var n;return null===(n=globalThis.trustedTypes)||void 0===n?void 0:n.createPolicy(e,t)}catch(e){return void Ri(e)}}("defaultWorkerFactory",{createScriptURL:e=>e})})();var DG=class extends Co{constructor(e,t){super(),this._onMessage=this._register(new Ro),this.onMessage=this._onMessage.event,this._onError=this._register(new Ro),this.onError=this._onError.event,this.id=t,this.worker=e,this.postMessage("-please-ignore-",[]);let i=e=>{this._onError.fire(e)};this.worker.then(e=>{e.onmessage=e=>{this._onMessage.fire(e.data)},e.onmessageerror=e=>{this._onError.fire(e)},"function"==typeof e.addEventListener&&e.addEventListener("error",i)}),this._register(vo(()=>{var e;null!==(e=this.worker)&&void 0!==e&&e.then(e=>{e.onmessage=null,e.onmessageerror=null,e.removeEventListener("error",i),e.terminate()}),this.worker=null}))}getId(){return this.id}postMessage(e,t){var i;null===(i=this.worker)||void 0===i||i.then(i=>{try{i.postMessage(e,t)}catch(e){Ri(e),Ri(Error("FAILED to post message to worker",{cause:e}))}})}},TG=fn("defaultAccountService"),IG=class{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new Ro}get onWillDispose(){return this._onWillDispose.event}resolve(){return Promise.resolve()}get textEditorModel(){return this.model}createSnapshot(){return this.model.createSnapshot()}isReadonly(){return!1}dispose(){this.disposed=!0,this._onWillDispose.fire()}isDisposed(){return this.disposed}isResolved(){return!0}getLanguageId(){return this.model.getLanguageId()}},xG=class{constructor(e){this.modelService=e}createModelReference(e){let t=this.modelService.getModel(e);return t?Promise.resolve(new wo(new IG(t))):Promise.reject(Error("Model not found"))}registerTextModelContentProvider(e,t){return{dispose:function(){}}}canHandleResource(e){return!1}};xG=ki([Ei(0,LI)],xG);var LG=(hi=class e{show(){return e.NULL_PROGRESS_RUNNER}async showWhile(e,t){await e}},{_:hi.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}}},hi),AG=(di=class e{constructor(){this.onDidChangeFilter=_o.None}info(e){return this.notify({severity:xC.Info,message:e})}warn(e){return this.notify({severity:xC.Warning,message:e})}error(e){return this.notify({severity:xC.Error,message:e})}notify(t){switch(t.severity){case xC.Error:console.error(t.message);break;case xC.Warning:console.warn(t.message);break;default:console.log(t.message)}return e.NO_OP}prompt(t,i,n,s){return e.NO_OP}status(e,t){return{close:()=>{}}}setFilter(e){}getFilter(e){return ix.OFF}getFilters(){return[]}removeFilter(e){}},{_:di.NO_OP=new class{constructor(){this.progress=new lx,this.onDidClose=_o.None,this.onDidChangeVisibility=_o.None}updateSeverity(e){}updateMessage(e){}updateActions(e){}close(){}}},di),NG=class{constructor(e){this._onWillExecuteCommand=new Ro,this._onDidExecuteCommand=new Ro,this.onWillExecuteCommand=this._onWillExecuteCommand.event,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e){let t=AD.getCommand(e);if(!t)return Promise.reject(Error("command '".concat(e,"' not found")));try{for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];this._onWillExecuteCommand.fire({commandId:e,args:n});let r=this._instantiationService.invokeFunction.apply(this._instantiationService,[t.handler,...n]);return this._onDidExecuteCommand.fire({commandId:e,args:n}),Promise.resolve(r)}catch(e){return Promise.reject(e)}}};NG=ki([Ei(0,pn)],NG);var FG=class extends KI{constructor(e,t,i,n,s,r){super(e,t,i,n,s),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[]}registerContainer(e){let t=new bo;return t.add(W_(e,kb.KEY_DOWN,e=>{let t=new C_(e);this._dispatch(t,t.target)&&(t.preventDefault(),t.stopPropagation())})),t.add(W_(e,kb.KEY_UP,e=>{let t=new C_(e);this._singleModifierDispatch(t,t.target)&&t.preventDefault()})),this._domNodeListeners.push(new OG(e,t)),t.add(vo(()=>{for(let t=0;t<this._domNodeListeners.length;t++){let i=this._domNodeListeners[t];i.domNode===e&&(this._domNodeListeners.splice(t,1),i.dispose())}})),t}addDynamicKeybinding(e,t,i,n){return fo(AD.registerCommand(e,i),this.addDynamicKeybindings([{keybinding:t,command:e,when:n}]))}addDynamicKeybindings(e){let t=e.map(e=>{var t;return{keybinding:h_(e.keybinding,ss),command:null!==(t=e.command)&&void 0!==t?t:null,commandArgs:e.commandArgs,when:e.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}});return this._dynamicKeybindings=this._dynamicKeybindings.concat(t),this.updateResolver(),vo(()=>{for(let e=0;e<this._dynamicKeybindings.length;e++)if(this._dynamicKeybindings[e]===t[0])return this._dynamicKeybindings.splice(e,t.length),void this.updateResolver()})}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}getUserKeybindingItems(){return this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1)}_getResolver(){return this._cachedResolver||(this._cachedResolver=new SD(this._toNormalizedKeybindingItems(ND.getDefaultKeybindings(),!0),this.getUserKeybindingItems(),e=>this._log(e))),this._cachedResolver}_documentHasFocus(){return Lv.document.hasFocus()}_toNormalizedKeybindingItems(e,t){let i=[],n=0;for(let s of e){let e=s.when||void 0,r=s.keybinding;if(r){let o=this.resolveKeybinding(r);for(let r of o)i[n++]=new GI(r,s.command,s.commandArgs,e,t,null,!1)}else i[n++]=new GI(void 0,s.command,s.commandArgs,e,t,null,!1)}return i}resolveKeybinding(e){return sx.resolveKeybinding(e,ss)}resolveKeyboardEvent(e){return new sx([new c_(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode)],ss)}resolveUserBinding(e){return[]}_dumpDebugInfo(){return""}_dumpDebugInfoJSON(){return""}registerSchemaContribution(e){return Co.None}enableKeybindingHoldMode(e){}};FG=ki([Ei(0,AS),Ei(1,LD),Ei(2,kn),Ei(3,BS),Ei(4,Np),Ei(5,LS)],FG);var OG=class extends Co{constructor(e,t){super(),this.domNode=e,this._register(t)}};function RG(e){return!!e&&"object"==typeof e&&(!e.overrideIdentifier||"string"==typeof e.overrideIdentifier)&&(!e.resource||e.resource instanceof Gs)}var MG=class{constructor(e){this.logService=e,this._onDidChangeConfiguration=new Ro,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;let t=new oG(e);this._configuration=new BI(t.reload(),RI.createEmptyModel(e),RI.createEmptyModel(e),RI.createEmptyModel(e),RI.createEmptyModel(e),RI.createEmptyModel(e),new so,RI.createEmptyModel(e),new so,e),t.dispose()}getValue(e,t){let i="string"==typeof e?e:void 0,n=RG(e)?e:RG(t)?t:{};return this._configuration.getValue(i,n,void 0)}updateValues(e){let t={data:this._configuration.toData()},i=[];for(let n of e){let[e,t]=n;this.getValue(e)!==t&&(this._configuration.updateValue(e,t),i.push(e))}if(i.length>0){let e=new UI({keys:i,overrides:[]},t,this._configuration,void 0,this.logService);e.source=tr.MEMORY,this._onDidChangeConfiguration.fire(e)}return Promise.resolve()}updateValue(e,t,i,n){return this.updateValues([[e,t]])}inspect(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._configuration.inspect(e,t,void 0)}keys(){return this._configuration.keys(void 0)}reloadConfiguration(){return Promise.resolve(void 0)}getConfigurationData(){let e={contents:{},keys:[],overrides:[]};return{defaults:e,policy:e,application:e,userLocal:e,userRemote:e,workspace:e,folders:[]}}};MG=ki([Ei(0,Np)],MG);var PG=class{constructor(e,t,i){this.configurationService=e,this.modelService=t,this.languageService=i,this._onDidChangeConfiguration=new Ro,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this.configurationService.onDidChangeConfiguration(e=>{this._onDidChangeConfiguration.fire({affectedKeys:e.affectedKeys,affectsConfiguration:(t,i)=>e.affectsConfiguration(i)})})}getValue(e,t,i){let n=hE.isIPosition(t)?t:null,s=n?"string"==typeof i?i:void 0:"string"==typeof t?t:void 0,r=e?this.getLanguage(e,n):void 0;return void 0===s?this.configurationService.getValue({resource:e,overrideIdentifier:r}):this.configurationService.getValue(s,{resource:e,overrideIdentifier:r})}inspect(e,t,i){let n=e?this.getLanguage(e,t):void 0;return this.configurationService.inspect(i,{resource:e,overrideIdentifier:n})}getLanguage(e,t){let i=this.modelService.getModel(e);return i?t?i.getLanguageIdAtPosition(t.lineNumber,t.column):i.getLanguageId():this.languageService.guessLanguageIdByFilepathOrFirstLine(e)}updateValue(e,t,i,n){return this.configurationService.updateValue(t,i,{resource:e},n)}};PG=ki([Ei(0,fr),Ei(1,LI),Ei(2,Pw)],PG);var BG=class{constructor(e){this.configurationService=e}getEOL(e,t){let i=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return i&&"string"==typeof i&&"auto"!==i?i:Gn||qn?"\n":"\r\n"}};BG=ki([Ei(0,fr)],BG);var UG=(ci=class e{constructor(){this._onDidChangeWorkspaceName=new Ro,this.onDidChangeWorkspaceName=this._onDidChangeWorkspaceName.event,this._onWillChangeWorkspaceFolders=new Ro,this.onWillChangeWorkspaceFolders=this._onWillChangeWorkspaceFolders.event,this._onDidChangeWorkspaceFolders=new Ro,this.onDidChangeWorkspaceFolders=this._onDidChangeWorkspaceFolders.event,this._onDidChangeWorkbenchState=new Ro,this.onDidChangeWorkbenchState=this._onDidChangeWorkbenchState.event,this.workspace={id:"4064f6ec-cb38-4ad0-af64-ee6467e63c82",folders:[new Op({uri:Gs.from({scheme:e.SCHEME,authority:"model",path:"/"}),name:"",index:0})]}}getCompleteWorkspace(){return Promise.resolve(this.getWorkspace())}getWorkspace(){return this.workspace}getWorkbenchState(){return this.workspace?this.workspace.configuration?Lp.WORKSPACE:Lp.FOLDER:Lp.EMPTY}getWorkspaceFolder(t){return t&&t.scheme===e.SCHEME?this.workspace.folders[0]:null}isInsideWorkspace(t){return t&&t.scheme===e.SCHEME}isCurrentWorkspace(e){return!0}},{_:ci.SCHEME="inmemory"},ci),HG=class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}setPreviewHandler(){return Co.None}async apply(e,t){let i=Array.isArray(e)?e:lT.convert(e),n=new Map;for(let o of i){if(!(o instanceof hT))throw Error("bad edit - only text edits are supported");let e=this._modelService.getModel(o.resource);if(!e)throw Error("bad edit - model not found");if("number"==typeof o.versionId&&e.getVersionId()!==o.versionId)throw Error("bad state - model changed in the meantime");let t=n.get(e);t||(t=[],n.set(e,t)),t.push(xI.replaceMove(dE.lift(o.textEdit.range),o.textEdit.text))}let s=0,r=0;for(let[o,a]of n)o.pushStackElement(),o.pushEditOperations([],a,()=>[]),o.pushStackElement(),r+=1,s+=a.length;return{ariaSummary:ia(bx.bulkEditServiceSummary,s,r),isApplied:s>0}}};HG=ki([Ei(0,LI)],HG);var WG=class extends ID{constructor(e,t){super(e),this._codeEditorService=t}showContextView(e,t,i){if(!t){let e=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();e&&(t=e.getContainerDomNode())}return super.showContextView(e,t,i)}};WG=ki([Ei(0,EC),Ei(1,LS)],WG);var VG=class extends AF{constructor(e,t,i,n,s,r){super(e,t,i,n,s,r),this.configure({blockMouse:!1})}};VG=ki([Ei(0,kn),Ei(1,BS),Ei(2,bE),Ei(3,SE),Ei(4,aF),Ei(5,AS)],VG);var zG,KG;async function qG(e,t,i,n,s,r){let o;try{await async function(e,t,i,n,s,r){GG(r);let o=await e.open(t,{create:!1});try{GG(r);let t=0,a=0,l=s&&"number"==typeof s.length?s.length:void 0,h=gg.alloc(Math.min(s.bufferSize,"number"==typeof l?l:s.bufferSize)),d=s&&"number"==typeof s.position?s.position:0,c=0;do{a=await e.read(o,d,h.buffer,c,h.byteLength-c),d+=a,c+=a,t+=a,"number"==typeof l&&(l-=a),c===h.byteLength&&(await i.write(n(h)),h=gg.alloc(Math.min(s.bufferSize,"number"==typeof l?l:s.bufferSize)),c=0)}while(a>0&&("number"!=typeof l||l>0)&&GG(r)&&jG(t,s));if(c>0){let e=c;"number"==typeof l&&(e=Math.min(c,l)),i.write(n(h.slice(0,e)))}}catch(e){throw hp(e)}finally{await e.close(o)}}(e,t,i,n,s,r)}catch(e){o=e}finally{o&&s.errorTransformer&&(o=s.errorTransformer(o)),void 0!==o&&i.error(o),i.end()}}function GG(e){if(e.isCancellationRequested)throw function(){let e=Error(Pi);return e.name=e.message,e}();return!0}function jG(e,t){var i;if("number"==typeof(null===t||void 0===t||null===(i=t.limits)||void 0===i?void 0:i.size)&&e>t.limits.size)throw lp(Li(1938,"File is too large to open"),Zg.FileTooLarge);return!0}function YG(e){return e.scheme===Ha.file?e.fsPath:e.toString(!0)}async function QG(e,t,i){let n=[];for(;!e.isEqual(i,e.dirname(i));)try{if(0===((await t.stat(i)).type&Yg.Directory))throw Error(Li(1906,"Unable to create folder '{0}' that already exists but is not a directory",YG(i)));break}catch(t){if(dp(t)!==Zg.FileNotFound)throw t;n.push(e.basename(i)),i=e.dirname(i)}for(let s=n.length-1;s>=0;s--){i=e.joinPath(i,n[s]);try{await t.mkdir(i)}catch(e){if(dp(e)!==Zg.FileExists)throw e}}}yC(cG,class extends kG{_createWorker(e){let t=zv();if(t&&"function"==typeof t.getWorker){let i=t.getWorker("workerMain.js",e.label);if(void 0!==i)return Promise.resolve(i)}return super._createWorker(e)}getWorkerUrl(e){let t=zv();if(t&&"function"==typeof t.getWorkerUrl){let i=t.getWorkerUrl("workerMain.js",e.label);if(void 0!==i)return new URL(i,document.baseURI).toString()}if(!e.esmModuleLocationBundler)throw Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker for the worker label: ".concat(e.label));return("function"==typeof e.esmModuleLocationBundler?e.esmModuleLocationBundler():e.esmModuleLocationBundler).toString()}getWorkerOptions(e){var t,i;return null===(t=zv())||void 0===t||null===(i=t.getWorkerOptions)||void 0===i?void 0:i.call(t,"workerMain.js",e.label)}},_C.Eager),yC(Np,class extends hG{constructor(){super(new sE)}},_C.Eager),yC(fr,MG,_C.Eager),yC(NI,PG,_C.Eager),yC(FI,BG,_C.Eager),yC(Cx,UG,_C.Eager),yC(rx,class{constructor(){this.onDidChangeFormatters=_o.None}getUriLabel(e,t){return"file"===e.scheme?e.fsPath:e.path}getUriBasenameLabel(e){return ol(e)}getWorkspaceLabel(e,t){return""}getSeparator(e,t){return"/"}registerFormatter(e){throw Error("Not implemented")}registerCachedFormatter(e){return this.registerFormatter(e)}getHostLabel(){return""}getHostTooltip(){}},_C.Eager),yC(kn,class{constructor(){this.telemetryLevel=ox.NONE,this.sessionId="someValue.sessionId",this.machineId="someValue.machineId",this.sqmId="someValue.sqmId",this.devDeviceId="someValue.devDeviceId",this.firstSessionDate="someValue.firstSessionDate",this.sendErrorTelemetry=!1}setEnabled(){}setExperimentProperty(){}publicLog(){}publicLog2(){}publicLogError(){}publicLogError2(){}},_C.Eager),yC(MS,class{constructor(){this.onWillShowDialog=_o.None,this.onDidShowDialog=_o.None}async confirm(e){return{confirmed:this.doConfirm(e.message,e.detail),checkboxChecked:!1}}doConfirm(e,t){let i=e;return t&&(i=i+"\n\n"+t),Lv.confirm(i)}async prompt(e){let t;if(this.doConfirm(e.message,e.detail)){var i,n;let s=[...null!==(i=e.buttons)&&void 0!==i?i:[]];e.cancelButton&&"string"!=typeof e.cancelButton&&"boolean"!=typeof e.cancelButton&&s.push(e.cancelButton),t=await(null===(n=s[0])||void 0===n?void 0:n.run({checkboxChecked:!1}))}return{result:t}}async info(e,t){await this.prompt({type:xC.Info,message:e,detail:t})}async warn(e,t){await this.prompt({type:xC.Warning,message:e,detail:t})}async error(e,t){await this.prompt({type:xC.Error,message:e,detail:t})}input(){return Promise.resolve({confirmed:!1})}about(){return Promise.resolve(void 0)}},_C.Eager),yC(Hg,class{constructor(){this.stateResource=Gs.from({scheme:"monaco",authority:"stateResource"}),this.userRoamingDataHome=Gs.from({scheme:"monaco",authority:"userRoamingDataHome"}),this.keyboardLayoutResource=Gs.from({scheme:"monaco",authority:"keyboardLayoutResource"}),this.argvResource=Gs.from({scheme:"monaco",authority:"argvResource"}),this.untitledWorkspacesHome=Gs.from({scheme:"monaco",authority:"untitledWorkspacesHome"}),this.workspaceStorageHome=Gs.from({scheme:"monaco",authority:"workspaceStorageHome"}),this.localHistoryHome=Gs.from({scheme:"monaco",authority:"localHistoryHome"}),this.cacheHome=Gs.from({scheme:"monaco",authority:"cacheHome"}),this.userDataSyncHome=Gs.from({scheme:"monaco",authority:"userDataSyncHome"}),this.sync=void 0,this.continueOn=void 0,this.editSessionId=void 0,this.debugExtensionHost={port:null,break:!1},this.isExtensionDevelopment=!1,this.disableExtensions=!1,this.disableExperiments=!1,this.enableExtensions=void 0,this.extensionDevelopmentLocationURI=void 0,this.extensionDevelopmentKind=void 0,this.extensionTestsLocationURI=void 0,this.logsHome=Gs.from({scheme:"monaco",authority:"logsHome"}),this.logLevel=void 0,this.extensionLogLevel=void 0,this.verbose=!1,this.isBuilt=!1,this.disableTelemetry=!1,this.serviceMachineIdResource=Gs.from({scheme:"monaco",authority:"serviceMachineIdResource"}),this.policyFile=void 0}},_C.Eager),yC(BS,AG,_C.Eager),yC(VF,class e{constructor(){this._onMarkerChanged=new Bo({delay:0,merge:e._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new nG,this._stats=new sG(this),this._filteredResources=new so}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}getStatistics(){return this._stats}remove(e,t){for(let i of t||[])this.changeOne(e,i,[])}changeOne(t,i,n){if(function(e){return!Array.isArray(e)||0===e.length}(n))this._data.delete(i,t)&&this._onMarkerChanged.fire([i]);else{let s=[];for(let r of n){let n=e._toMarker(t,i,r);n&&s.push(n)}this._data.set(i,t,s),this._onMarkerChanged.fire([i])}}installResourceFilter(e,t){let i=this._filteredResources.get(e);return i||(i=[],this._filteredResources.set(e,i)),i.push(t),this._onMarkerChanged.fire([e]),vo(()=>{let i=this._filteredResources.get(e);if(!i)return;let n=i.indexOf(t);-1!==n&&(i.splice(n,1),0===i.length&&this._filteredResources.delete(e),this._onMarkerChanged.fire([e]))})}static _toMarker(e,t,i){let{code:n,severity:s,message:r,source:o,startLineNumber:a,startColumn:l,endLineNumber:h,endColumn:d,relatedInformation:c,tags:u,origin:g}=i;if(r)return a=a>0?a:1,l=l>0?l:1,h=h>=a?h:a,d=d>0?d:l,{resource:t,owner:e,code:n,severity:s,message:r,source:o,startLineNumber:a,startColumn:l,endLineNumber:h,endColumn:d,relatedInformation:c,tags:u,origin:g}}changeAll(t,i){let n=[],s=this._data.values(t);if(s)for(let e of s){let i=oo.first(e);i&&(n.push(i.resource),this._data.delete(i.resource,t))}if(function(e){return Array.isArray(e)&&e.length>0}(i)){let s=new so;for(let{resource:r,marker:o}of i){let i=e._toMarker(t,r,o);if(!i)continue;let a=s.get(r);a?a.push(i):(s.set(r,[i]),n.push(r))}for(let[e,i]of s)this._data.set(e,t,i)}n.length>0&&this._onMarkerChanged.fire(n)}_createFilteredMarker(e,t){let i=1===t.length?Li(1985,'Problems are paused because: "{0}"',t[0]):Li(1986,'Problems are paused because: "{0}" and {1} more',t[0],t.length-1);return{owner:"markersFilter",resource:e,severity:MF.Info,message:i,startLineNumber:1,startColumn:1,endLineNumber:1,endColumn:1}}read(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.create(null),{owner:i,resource:n,severities:s,take:r}=t;if((!r||r<0)&&(r=-1),i&&n){let o=t.ignoreResourceFilters?void 0:this._filteredResources.get(n);if(null!==o&&void 0!==o&&o.length)return[this._createFilteredMarker(n,o)];let a=this._data.get(n,i);if(!a)return[];let l=[];for(let i of a){if(r>0&&l.length===r)break;let o=t.ignoreResourceFilters?void 0:this._filteredResources.get(n);null!==o&&void 0!==o&&o.length?l.push(this._createFilteredMarker(n,o)):e._accept(i,s)&&l.push(i)}return l}{let o=i||n?this._data.values(null!==n&&void 0!==n?n:i):this._data.values(),a=[],l=new ro;for(let i of o)for(let n of i){if(l.has(n.resource))continue;if(r>0&&a.length===r)break;let i=t.ignoreResourceFilters?void 0:this._filteredResources.get(n.resource);null!==i&&void 0!==i&&i.length?(a.push(this._createFilteredMarker(n.resource,i)),l.add(n.resource)):e._accept(n,s)&&a.push(n)}return a}}static _accept(e,t){return void 0===t||(t&e.severity)===e.severity}static _merge(e){let t=new so;for(let i of e)for(let e of i)t.set(e,!0);return Array.from(t.keys())}},_C.Eager),yC(Pw,class extends xL{constructor(){super()}},_C.Eager),yC(yq,class extends Co{constructor(){super(),this._onColorThemeChange=this._register(new Ro),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onFileIconThemeChange=this._register(new Ro),this.onDidFileIconThemeChange=this._onFileIconThemeChange.event,this._onProductIconThemeChange=this._register(new Ro),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new Mw,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set("vs",Cq("vs")),this._knownThemes.set(uq,Cq(uq)),this._knownThemes.set(gq,Cq(gq)),this._knownThemes.set(pq,Cq(pq));let e=this._register(Rw(this));this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS="".concat(this._codiconCSS,"\n").concat(this._themeCSS),this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme("vs"),this._onOSSchemeChanged(),this._register(e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()})),Nv(Lv,"(forced-colors: active)",()=>{this._onOSSchemeChanged()})}registerEditorContainer(e){return ab(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=nC(void 0,e=>{e.className="monaco-colors",e.textContent=this._allCSS}),this._styleElements.push(this._globalStyleElement)),Co.None}_registerShadowDomContainer(e){let t=nC(e,e=>{e.className="monaco-colors",e.textContent=this._allCSS});return this._styleElements.push(t),{dispose:()=>{for(let e=0;e<this._styleElements.length;e++)if(this._styleElements[e]===t)return void this._styleElements.splice(e,1)}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw Error("Illegal theme name!");if(!_q(t.base)&&!_q(e))throw Error("Illegal theme base!");this._knownThemes.set(e,new vq(e,t)),_q(e)&&this._knownThemes.forEach(t=>{t.base===e&&t.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;t=this._knownThemes.has(e)?this._knownThemes.get(e):this._knownThemes.get("vs"),this._updateActualTheme(t)}_updateActualTheme(e){!e||this._theme===e||(this._theme=e,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){let e=Lv.matchMedia("(forced-colors: active)").matches;if(e!==ru(this._theme.type)){let t;t=ou(this._theme.type)?e?gq:uq:e?pq:"vs",this._updateActualTheme(this._knownThemes.get(t))}}}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._onOSSchemeChanged()}_updateThemeOrColorMap(){let e=[],t={},i={addRule:i=>{t[i]||(e.push(i),t[i]=!0)}};mq.getThemingParticipants().forEach(e=>e(this._theme,i,this._environment));let n=[];for(let r of fq.getColors()){let e=this._theme.getColor(r.id,!0);e&&n.push("".concat($l(r.id),": ").concat(e.toString(),";"))}i.addRule(".monaco-editor, .monaco-diff-editor, .monaco-component { ".concat(n.join("\n")," }"));let s=this._colorMapOverride||this._theme.tokenTheme.getColorMap();i.addRule(function(e){let t=[];for(let i=1,n=e.length;i<n;i++){let n=e[i];t[i]=".mtk".concat(i," { color: ").concat(n,"; }")}return t.push(".mtki { font-style: italic; }"),t.push(".mtkb { font-weight: bold; }"),t.push(".mtku { text-decoration: underline; text-underline-position: under; }"),t.push(".mtks { text-decoration: line-through; }"),t.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),t.join("\n")}(s)),i.addRule(".monaco-editor, .monaco-diff-editor, .monaco-component { forced-color-adjust: none; }"),this._themeCSS=e.join("\n"),this._updateCSS(),IL.setColorMap(s),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS="".concat(this._codiconCSS,"\n").concat(this._themeCSS),this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}},_C.Eager),yC(LI,EU,_C.Eager),yC(CO,vO,_C.Eager),yC(AS,qq,_C.Eager),yC(hx,class{withProgress(e,t,i){return t({report:()=>{}})}},_C.Eager),yC(dx,LG,_C.Eager),yC(Sn,class extends qp{constructor(){super(),this.applicationStorage=this._register(new Lg(new Ag,{hint:Sg.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new Lg(new Ag,{hint:Sg.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new Lg(new Ag,{hint:Sg.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(Vp.WORKSPACE,e))),this._register(this.profileStorage.onDidChangeStorage(e=>this.emitDidChangeValue(Vp.PROFILE,e))),this._register(this.applicationStorage.onDidChangeStorage(e=>this.emitDidChangeValue(Vp.APPLICATION,e)))}getStorage(e){switch(e){case Vp.APPLICATION:return this.applicationStorage;case Vp.PROFILE:return this.profileStorage;default:return this.workspaceStorage}}getLogDetails(e){switch(e){case Vp.APPLICATION:return"inMemory (application)";case Vp.PROFILE:return"inMemory (profile)";default:return"inMemory (workspace)"}}async doInitialize(){}async switchToProfile(){}async switchToWorkspace(){}shouldFlushWhenIdle(){return!1}hasScope(e){return!1}},_C.Eager),yC(cT,HG,_C.Eager),yC(yx,class{constructor(){this._neverEmitter=new Ro,this.onDidChangeTrust=this._neverEmitter.event,this.onDidChangeTrustedFolders=this._neverEmitter.event,this.workspaceResolved=Promise.resolve(),this.workspaceTrustInitialized=Promise.resolve(),this.acceptsOutOfWorkspaceFiles=!0}isWorkspaceTrusted(){return!0}isWorkspaceTrustForced(){return!1}canSetParentFolderTrust(){return!1}async setParentFolderTrust(e){}canSetWorkspaceTrust(){return!1}async setWorkspaceTrust(e){}getUriTrustInfo(e){throw Error("Method not supported.")}async setUrisTrust(e,t){}getTrustedUris(){return[]}async setTrustedUris(e){}addWorkspaceTrustTransitionParticipant(e){throw Error("Method not supported.")}},_C.Eager),yC(AI,xG,_C.Eager),yC(uD,wq,_C.Eager),yC(bz,class{get lastFocusedList(){return this._lastFocusedWidget}constructor(){this.disposables=new bo,this.lists=[],this._lastFocusedWidget=void 0}setLastFocusedList(e){var t,i;e!==this._lastFocusedWidget&&(null!==(t=this._lastFocusedWidget)&&void 0!==t&&t.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,null===(i=this._lastFocusedWidget)||void 0===i||i.getHTMLElement().classList.add("last-focused"))}register(e,t){if(this.lists.some(t=>t.widget===e))throw Error("Cannot register the same widget multiple times");let i={widget:e,extraContextKeys:t};return this.lists.push(i),cb(e.getHTMLElement())&&this.setLastFocusedList(e),fo(e.onDidFocus(()=>this.setLastFocusedList(e)),vo(()=>this.lists.splice(this.lists.indexOf(i),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(e=>e!==i),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}},_C.Eager),yC(LD,NG,_C.Eager),yC(SE,FG,_C.Eager),yC(nT,rq,_C.Eager),yC(bE,WG,_C.Eager),yC(MU,BF,_C.Eager),yC(Rq,Oq,_C.Eager),yC(CE,VG,_C.Eager),yC(aF,Eq,_C.Eager),yC(lG,class{async playSignal(e,t){}async playSignals(e){}getEnabledState(e,t,i){return Vo.const(!1)}getDelayMs(e,t){return 0}isSoundEnabled(e){return!1}isAnnouncementEnabled(e){return!1}onSoundEnabledChanged(e){return _o.None}async playSound(e,t){}playSignalLoop(e){return vo(()=>{})}},_C.Eager),yC(kB,class{getParserClass(){throw Error("not implemented in StandaloneTreeSitterLibraryService")}supportsLanguage(e,t){return!1}getLanguage(e,t,i){}async getLanguagePromise(e){}getInjectionQueries(e,t){return null}getHighlightingQueries(e,t){return null}async createQuery(e,t){throw Error("not implemented in StandaloneTreeSitterLibraryService")}},_C.Eager),yC(Fp,class extends oE{constructor(){super(Kk.Off,Gs.parse("log:///log"))}doCreateLogger(e,t,i){return new aE}},_C.Eager),yC(dG,class{get onDidSendData(){return _o.None}getDataChannel(e){return{sendData:()=>{}}}},_C.Eager),yC(TG,class{constructor(){this.onDidChangeDefaultAccount=_o.None}async getDefaultAccount(){return null}setDefaultAccount(e){}},_C.Eager),function(e){let t=new Zq;for(let[o,a]of wC())t.set(o,a);let i=new eG(t,!0);t.set(pn,i),e.get=function(e){n||r({});let s=t.get(e);if(!s)throw Error("Missing service "+e);return s instanceof bC?i.invokeFunction(t=>t.get(e)):s};let n=!1,s=new Ro;function r(e){if(n)return i;n=!0;for(let[i,n]of wC())t.get(i)||t.set(i,n);for(let i in e)if(e.hasOwnProperty(i)){let n=fn(i);t.get(n)instanceof bC&&t.set(n,e[i])}return s.fire(),i}e.initialize=r,e.withServices=function(e){if(n)return e();let t=new bo,i=t.add(s.event(()=>{i.dispose(),t.add(e())}));return t}}(zG||(zG={}));var $G=(ui=class extends Co{constructor(e){super(),this.logService=e,this.BUFFER_SIZE=262144,this._onDidChangeFileSystemProviderRegistrations=this._register(new Ro),this.onDidChangeFileSystemProviderRegistrations=this._onDidChangeFileSystemProviderRegistrations.event,this._onWillActivateFileSystemProvider=this._register(new Ro),this.onWillActivateFileSystemProvider=this._onWillActivateFileSystemProvider.event,this._onDidChangeFileSystemProviderCapabilities=this._register(new Ro),this.onDidChangeFileSystemProviderCapabilities=this._onDidChangeFileSystemProviderCapabilities.event,this.provider=new Map,this._onDidRunOperation=this._register(new Ro),this.onDidRunOperation=this._onDidRunOperation.event,this.internalOnDidFilesChange=this._register(new Ro),this._onDidUncorrelatedFilesChange=this._register(new Ro),this.onDidFilesChange=this._onDidUncorrelatedFilesChange.event,this._onDidWatchError=this._register(new Ro),this.onDidWatchError=this._onDidWatchError.event,this.activeWatchers=new Map,this.writeQueue=this._register(new Al)}registerProvider(e,t){if(this.provider.has(e))throw Error("A filesystem provider for the scheme '".concat(e,"' is already registered."));ig("code/registerFilesystem/".concat(e));let i=new bo;return this.provider.set(e,t),this._onDidChangeFileSystemProviderRegistrations.fire({added:!0,scheme:e,provider:t}),i.add(t.onDidChangeFile(e=>{let i=new fp(e,!this.isPathCaseSensitive(t));this.internalOnDidFilesChange.fire(i),i.hasCorrelation()||this._onDidUncorrelatedFilesChange.fire(i)})),"function"==typeof t.onDidWatchError&&i.add(t.onDidWatchError(e=>this._onDidWatchError.fire(Error(e)))),i.add(t.onDidChangeCapabilities(()=>this._onDidChangeFileSystemProviderCapabilities.fire({provider:t,scheme:e}))),vo(()=>{this._onDidChangeFileSystemProviderRegistrations.fire({added:!1,scheme:e,provider:t}),this.provider.delete(e),po(i)})}getProvider(e){return this.provider.get(e)}async activateProvider(e){let t=[];this._onWillActivateFileSystemProvider.fire({scheme:e,join(e){t.push(e)}}),!this.provider.has(e)&&await Hl.settled(t)}async canHandleResource(e){return await this.activateProvider(e.scheme),this.hasProvider(e)}hasProvider(e){return this.provider.has(e.scheme)}hasCapability(e,t){let i=this.provider.get(e.scheme);return!!(i&&i.capabilities&t)}listCapabilities(){return oo.map(this.provider,e=>{let[t,i]=e;return{scheme:t,capabilities:i.capabilities}})}async withProvider(e){if(!gl(e))throw new mp(Li(1907,"Unable to resolve filesystem provider with relative file path '{0}'",this.resourceForError(e)),pp.FILE_INVALID_PATH);await this.activateProvider(e.scheme);let t=this.provider.get(e.scheme);if(!t){let t=new Ki;throw t.message=Li(1908,"ENOPRO: No file system provider found for resource '{0}'",e.toString()),t}return t}async withReadProvider(e){let t=await this.withProvider(e);if(ip(t)||ep(t)||np(t))return t;throw Error("Filesystem provider for scheme '".concat(e.scheme,"' neither has FileReadWrite, FileReadStream nor FileOpenReadWriteClose capability which is needed for the read operation."))}async withWriteProvider(e){let t=await this.withProvider(e);if(ip(t)||ep(t))return t;throw Error("Filesystem provider for scheme '".concat(e.scheme,"' neither has FileReadWrite nor FileOpenReadWriteClose capability which is needed for the write operation."))}async resolve(e,t){try{return await this.doResolveFile(e,t)}catch(t){throw dp(t)===Zg.FileNotFound?new mp(Li(1909,"Unable to resolve nonexistent file '{0}'",this.resourceForError(e)),pp.FILE_NOT_FOUND):hp(t)}}async doResolveFile(e,t){let i,n=await this.withProvider(e),s=this.isPathCaseSensitive(n),r=null===t||void 0===t?void 0:t.resolveTo,o=null===t||void 0===t?void 0:t.resolveSingleChildDescendants,a=null===t||void 0===t?void 0:t.resolveMetadata,l=await n.stat(e);return this.toFileStat(n,e,l,void 0,!!a,(t,n)=>(i||(i=Jg.forUris(()=>!s),i.set(e,!0),r&&i.fill(!0,r)),!(!i.get(t.resource)&&!i.findSuperstr(t.resource.with({query:null,fragment:null})))||!(!t.isDirectory||!o)&&1===n))}async toFileStat(e,t,i,n,s,r){var o,a;let{providerExtUri:l}=this.getExtUri(e),h={resource:t,name:l.basename(t),isFile:0!==(i.type&Yg.File),isDirectory:0!==(i.type&Yg.Directory),isSymbolicLink:0!==(i.type&Yg.SymbolicLink),mtime:i.mtime,ctime:i.ctime,size:i.size,readonly:!!((null!==(o=i.permissions)&&void 0!==o?o:0)&Qg.Readonly)||!!(e.capabilities&Xg.Readonly),locked:!!((null!==(a=i.permissions)&&void 0!==a?a:0)&Qg.Locked),etag:xp({mtime:i.mtime,size:i.size}),children:void 0};if(h.isDirectory&&r(h,n)){try{let i=await e.readdir(t);h.children=Pr(await Hl.settled(i.map(async n=>{let[o,a]=n;try{let n=l.joinPath(t,o),h=s?await e.stat(n):{type:a};return await this.toFileStat(e,n,h,i.length,s,r)}catch(e){return this.logService.trace(e),null}})))}catch(e){this.logService.trace(e),h.children=[]}return h}return h}async resolveAll(e){return Hl.settled(e.map(async e=>{try{return{stat:await this.doResolveFile(e.resource,e.options),success:!0}}catch(e){return this.logService.trace(e),{stat:void 0,success:!1}}}))}async stat(e){let t=await this.withProvider(e),i=await t.stat(e);return this.toFileStat(t,e,i,void 0,!0,()=>!1)}async realpath(e){let t=await this.withProvider(e);if(function(e){return!!(e.capabilities&Xg.FileRealpath)}(t)){let i=await t.realpath(e);return e.with({path:i})}}async exists(e){let t=await this.withProvider(e);try{return!!await t.stat(e)}catch(i){return!1}}async canCreateFile(e,t){try{await this.doValidateCreateFile(e,t)}catch(e){return e}return!0}async doValidateCreateFile(e,t){if((null===t||void 0===t||!t.overwrite)&&await this.exists(e))throw new mp(Li(1910,"Unable to create file '{0}' that already exists when overwrite flag is not set",this.resourceForError(e)),pp.FILE_MODIFIED_SINCE,t)}async createFile(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gg.fromString(""),i=arguments.length>2?arguments[2]:void 0;await this.doValidateCreateFile(e,i);let n=await this.writeFile(e,t);return this._onDidRunOperation.fire(new gp(e,op.CREATE,n)),n}async writeFile(e,t,i){var n;let s=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(e),e),{providerExtUri:o}=this.getExtUri(s),a=i;if(rp(s)&&(null===(n=a)||void 0===n||!n.atomic)){var l;let t=null===(l=s.enforceAtomicWriteFile)||void 0===l?void 0:l.call(s,e);t&&(a=(0,r.A)((0,r.A)({},i),{},{atomic:t}))}try{var h;let{stat:i,buffer:n}=await this.validateWriteFile(s,e,t,a);i||await this.mkdirp(s,o.dirname(e)),n||(n=await this.peekBufferForWriting(s,t)),!ip(s)||ep(s)&&n instanceof gg||ep(s)&&rp(s)&&null!==(h=a)&&void 0!==h&&h.atomic?await this.doWriteUnbuffered(s,e,a,n):await this.doWriteBuffered(s,e,a,n instanceof gg?Cg(n):n),this._onDidRunOperation.fire(new gp(e,op.WRITE))}catch(t){throw new mp(Li(1911,"Unable to write file '{0}' ({1})",this.resourceForError(e),hp(t).toString()),cp(t),a)}return this.resolve(e,{resolveMetadata:!0})}async peekBufferForWriting(e,t){let i;if(!ep(e)||t instanceof gg)i=t;else if(ng(t)){let e=await function(e,t){return new Promise((i,n)=>{let s=new bo,r=[],o=n=>{if(r.push(n),r.length>t)return s.dispose(),e.pause(),i({stream:e,buffer:r,ended:!1})},a=e=>(s.dispose(),n(e)),l=()=>(s.dispose(),i({stream:e,buffer:r,ended:!0}));s.add(vo(()=>e.removeListener("error",a))),e.on("error",a),s.add(vo(()=>e.removeListener("end",l))),e.on("end",l),s.add(vo(()=>e.removeListener("data",o))),e.on("data",o)})}(t,3);i=e.ended?gg.concat(e.buffer):e}else i=function(e,t,i){let n,s=[];for(;null!==(n=e.read())&&s.length<i;)s.push(n);return null===n&&s.length>0?t(s):{read:()=>{if(s.length>0)return s.shift();if(void 0!==n){let e=n;return n=void 0,e}return e.read()}}}(t,e=>gg.concat(e),3);return i}async validateWriteFile(e,t,i,n){let s,r,o=!(null===n||void 0===n||!n.unlock);if(o&&!(e.capabilities&Xg.FileWriteUnlock))throw Error(Li(1912,"Unable to unlock file '{0}' because provider does not support it.",this.resourceForError(t)));if(null!==n&&void 0!==n&&n.atomic){if(!(e.capabilities&Xg.FileAtomicWrite))throw Error(Li(1913,"Unable to atomically write file '{0}' because provider does not support it.",this.resourceForError(t)));if(!(e.capabilities&Xg.FileReadWrite))throw Error(Li(1914,"Unable to atomically write file '{0}' because provider does not support unbuffered writes.",this.resourceForError(t)));if(o)throw Error(Li(1915,"Unable to unlock file '{0}' because atomic write is enabled.",this.resourceForError(t)))}try{s=await e.stat(t)}catch(a){return Object.create(null)}if(0!==(s.type&Yg.Directory))throw new mp(Li(1916,"Unable to write file '{0}' that is actually a directory",this.resourceForError(t)),pp.FILE_IS_DIRECTORY,n);if(this.throwIfFileIsReadonly(t,s),"number"==typeof(null===n||void 0===n?void 0:n.mtime)&&"string"==typeof n.etag&&""!==n.etag&&"number"==typeof s.mtime&&"number"==typeof s.size&&n.mtime<s.mtime&&n.etag!==xp({mtime:n.mtime,size:s.size})){if(r=await this.peekBufferForWriting(e,i),r instanceof gg&&r.byteLength===s.size)try{let{value:e}=await this.readFile(t,{limits:{size:s.size}});if(r.equals(e))return{stat:s,buffer:r}}catch(l){}throw new mp(Li(1917,"File Modified Since"),pp.FILE_MODIFIED_SINCE,n)}return{stat:s,buffer:r}}async readFile(e,t,i){let n=await this.withReadProvider(e);return null!==t&&void 0!==t&&t.atomic?this.doReadFileAtomic(n,e,t,i):this.doReadFile(n,e,t,i)}async doReadFileAtomic(e,t,i,n){return new Promise((s,r)=>{this.writeQueue.queueFor(t,async()=>{try{s(await this.doReadFile(e,t,i,n))}catch(e){r(e)}},this.getExtUri(e).providerExtUri)})}async doReadFile(e,t,i,n){let s=await this.doReadFileStream(e,t,(0,r.A)((0,r.A)({},i),{},{preferUnbuffered:!0}),n);return(0,r.A)((0,r.A)({},s),{},{value:await yg(s.value)})}async readFileStream(e,t,i){let n=await this.withReadProvider(e);return this.doReadFileStream(n,e,t,i)}async doReadFileStream(e,t,i,n){var s;let o=new Qo(n),a=i;sp(e)&&(null===(s=e.enforceAtomicReadFile)||void 0===s?void 0:s.call(e,t))&&(a=(0,r.A)((0,r.A)({},i),{},{atomic:!0}));let l,h=this.validateReadFile(t,a).then(e=>e,e=>{throw o.dispose(!0),e});try{var d,c,u;return"string"==typeof(null===(d=a)||void 0===d?void 0:d.etag)&&""!==a.etag&&await h,l=null!==(c=a)&&void 0!==c&&c.atomic&&sp(e)||!ip(e)&&!np(e)||ep(e)&&null!==(u=a)&&void 0!==u&&u.preferUnbuffered?this.readFileUnbuffered(e,t,a):np(e)?this.readFileStreamed(e,t,o.token,a):this.readFileBuffered(e,t,o.token,a),l.on("end",()=>o.dispose()),l.on("error",()=>o.dispose()),(0,r.A)((0,r.A)({},await h),{},{value:l})}catch(e){throw l&&await ag(l),this.restoreReadError(e,t,a)}}restoreReadError(e,t,i){let n=Li(1918,"Unable to read file '{0}' ({1})",this.resourceForError(t),hp(e).toString());return e instanceof _p?new _p(n,e.stat,i):e instanceof vp?new vp(n,e.fileOperationResult,e.size,e.options):new mp(n,cp(e),i)}readFileStreamed(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Object.create(null);return function(e,t,i){let n=rg(i);return lg(e,{onData:e=>n.write(t.data(e)),onError:e=>n.error(t.error?t.error(e):e),onEnd:()=>n.end()}),n}(e.readFileStream(t,n,i),{data:e=>e instanceof gg?e:gg.wrap(e),error:e=>this.restoreReadError(e,t,n)},e=>gg.concat(e))}readFileBuffered(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Object.create(null),s=function(e){return rg(e=>gg.concat(e),e)}();return qG(e,t,s,e=>e,(0,r.A)((0,r.A)({},n),{},{bufferSize:this.BUFFER_SIZE,errorTransformer:e=>this.restoreReadError(e,t,n)}),i),s}readFileUnbuffered(e,t,i){let n=rg(e=>gg.concat(e));return(async()=>{try{let s;s=null!==i&&void 0!==i&&i.atomic&&sp(e)?await e.readFile(t,{atomic:!0}):await e.readFile(t),"number"==typeof(null===i||void 0===i?void 0:i.position)&&(s=s.slice(i.position)),"number"==typeof(null===i||void 0===i?void 0:i.length)&&(s=s.slice(0,i.length)),this.validateReadFileLimits(t,s.byteLength,i),n.end(gg.wrap(s))}catch(e){n.error(e),n.end()}})(),n}async validateReadFile(e,t){let i=await this.resolve(e,{resolveMetadata:!0});if(i.isDirectory)throw new mp(Li(1919,"Unable to read file '{0}' that is actually a directory",this.resourceForError(e)),pp.FILE_IS_DIRECTORY,t);if("string"==typeof(null===t||void 0===t?void 0:t.etag)&&""!==t.etag&&t.etag===i.etag)throw new _p(Li(1920,"File not modified since"),i,t);return this.validateReadFileLimits(e,i.size,t),i}validateReadFileLimits(e,t,i){var n;if("number"==typeof(null===i||void 0===i||null===(n=i.limits)||void 0===n?void 0:n.size)&&t>i.limits.size)throw new vp(Li(1921,"Unable to read file '{0}' that is too large to open",this.resourceForError(e)),pp.FILE_TOO_LARGE,t,i)}async canMove(e,t,i){return this.doCanMoveCopy(e,t,"move",i)}async canCopy(e,t,i){return this.doCanMoveCopy(e,t,"copy",i)}async doCanMoveCopy(e,t,i,n){if(e.toString()!==t.toString())try{let s="move"===i?this.throwIfFileSystemIsReadonly(await this.withWriteProvider(e),e):await this.withReadProvider(e),r=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(t),t);await this.doValidateMoveCopy(s,e,r,t,i,n)}catch(e){return e}return!0}async move(e,t,i){let n=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(e),e),s=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(t),t),r=await this.doMoveCopy(n,e,s,t,"move",!!i),o=await this.resolve(t,{resolveMetadata:!0});return this._onDidRunOperation.fire(new gp(e,"move"===r?op.MOVE:op.COPY,o)),o}async copy(e,t,i){let n=await this.withReadProvider(e),s=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(t),t),r=await this.doMoveCopy(n,e,s,t,"copy",!!i),o=await this.resolve(t,{resolveMetadata:!0});return this._onDidRunOperation.fire(new gp(e,"copy"===r?op.COPY:op.MOVE,o)),o}async doMoveCopy(e,t,i,n,s,r){if(t.toString()===n.toString())return s;let{exists:o,isSameResourceWithDifferentPathCase:a}=await this.doValidateMoveCopy(e,t,i,n,s,r);if(o&&!a&&r&&await this.del(n,{recursive:!0}),await this.mkdirp(i,this.getExtUri(i).providerExtUri.dirname(n)),"copy"===s){if(e===i&&tp(e))await e.copy(t,n,{overwrite:r});else{let s=await this.resolve(t);s.isDirectory?await this.doCopyFolder(e,s,i,n):await this.doCopyFile(e,t,i,n)}return s}return e===i?(await e.rename(t,n,{overwrite:r}),s):(await this.doMoveCopy(e,t,i,n,"copy",r),await this.del(t,{recursive:!0}),"copy")}async doCopyFile(e,t,i,n){return ip(e)&&ip(i)?this.doPipeBuffered(e,t,i,n):ip(e)&&ep(i)?this.doPipeBufferedToUnbuffered(e,t,i,n):ep(e)&&ip(i)?this.doPipeUnbufferedToBuffered(e,t,i,n):ep(e)&&ep(i)?this.doPipeUnbuffered(e,t,i,n):void 0}async doCopyFolder(e,t,i,n){await i.mkdir(n),Array.isArray(t.children)&&await Hl.settled(t.children.map(async t=>{let s=this.getExtUri(i).providerExtUri.joinPath(n,t.name);return t.isDirectory?this.doCopyFolder(e,await this.resolve(t.resource),i,s):this.doCopyFile(e,t.resource,i,s)}))}async doValidateMoveCopy(e,t,i,n,s,r){let o=!1;if(e===i){let{providerExtUri:i,isPathCaseSensitive:r}=this.getExtUri(e);if(r||(o=i.isEqual(t,n)),o&&"copy"===s)throw Error(Li(1922,"Unable to copy when source '{0}' is same as target '{1}' with different path case on a case insensitive file system",this.resourceForError(t),this.resourceForError(n)));if(!o&&i.isEqualOrParent(n,t))throw Error(Li(1923,"Unable to move/copy when source '{0}' is parent of target '{1}'.",this.resourceForError(t),this.resourceForError(n)))}let a=await this.exists(n);if(a&&!o){if(!r)throw new mp(Li(1924,"Unable to move/copy '{0}' because target '{1}' already exists at destination.",this.resourceForError(t),this.resourceForError(n)),pp.FILE_MOVE_CONFLICT);if(e===i){let{providerExtUri:i}=this.getExtUri(e);if(i.isEqualOrParent(t,n))throw Error(Li(1925,"Unable to move/copy '{0}' into '{1}' since a file would replace the folder it is contained in.",this.resourceForError(t),this.resourceForError(n)))}}return{exists:a,isSameResourceWithDifferentPathCase:o}}getExtUri(e){let t=this.isPathCaseSensitive(e);return{providerExtUri:t?tl:il,isPathCaseSensitive:t}}isPathCaseSensitive(e){return!!(e.capabilities&Xg.PathCaseSensitive)}async createFolder(e){let t=this.throwIfFileSystemIsReadonly(await this.withProvider(e),e);await this.mkdirp(t,e);let i=await this.resolve(e,{resolveMetadata:!0});return this._onDidRunOperation.fire(new gp(e,op.CREATE,i)),i}async mkdirp(e,t){let{providerExtUri:i}=this.getExtUri(e);return QG(i,e,t)}async canDelete(e,t){try{await this.doValidateDelete(e,t)}catch(e){return e}return!0}async doValidateDelete(e,t){let i=this.throwIfFileSystemIsReadonly(await this.withProvider(e),e),n=!(null===t||void 0===t||!t.useTrash);if(n&&!(i.capabilities&Xg.Trash))throw Error(Li(1926,"Unable to delete file '{0}' via trash because provider does not support it.",this.resourceForError(e)));let s,r=null===t||void 0===t?void 0:t.atomic;if(r&&!(i.capabilities&Xg.FileAtomicDelete))throw Error(Li(1927,"Unable to delete file '{0}' atomically because provider does not support it.",this.resourceForError(e)));if(n&&r)throw Error(Li(1928,"Unable to atomically delete file '{0}' because using trash is enabled.",this.resourceForError(e)));try{s=await i.stat(e)}catch(o){}if(!s)throw new mp(Li(1929,"Unable to delete nonexistent file '{0}'",this.resourceForError(e)),pp.FILE_NOT_FOUND);if(this.throwIfFileIsReadonly(e,s),null===t||void 0===t||!t.recursive){let t=await this.resolve(e);if(t.isDirectory&&Array.isArray(t.children)&&t.children.length>0)throw Error(Li(1930,"Unable to delete non-empty folder '{0}'.",this.resourceForError(e)))}return i}async del(e,t){var i,n,s,o,a;let l=await this.doValidateDelete(e,t),h=t;if(function(e){return!!(e.capabilities&Xg.FileAtomicDelete)}(l)&&(null===(i=h)||void 0===i||!i.atomic)){var d;let i=null===(d=l.enforceAtomicDelete)||void 0===d?void 0:d.call(l,e);i&&(h=(0,r.A)((0,r.A)({},t),{},{atomic:i}))}let c=!(null===(n=h)||void 0===n||!n.useTrash),u=!(null===(s=h)||void 0===s||!s.recursive),g=null!==(o=null===(a=h)||void 0===a?void 0:a.atomic)&&void 0!==o&&o;await l.delete(e,{recursive:u,useTrash:c,atomic:g}),this._onDidRunOperation.fire(new gp(e,op.DELETE))}async cloneFile(e,t){let i=await this.withProvider(e),n=this.throwIfFileSystemIsReadonly(await this.withWriteProvider(t),t);if(i!==n||!this.getExtUri(i).providerExtUri.isEqual(e,t))return i===n&&function(e){return!!(e.capabilities&Xg.FileClone)}(i)?i.cloneFile(e,t):(await this.mkdirp(n,this.getExtUri(n).providerExtUri.dirname(t)),i===n&&tp(i)?this.writeQueue.queueFor(e,()=>i.copy(e,t,{overwrite:!0}),this.getExtUri(i).providerExtUri):this.writeQueue.queueFor(e,()=>this.doCopyFile(i,e,n,t),this.getExtUri(i).providerExtUri))}createWatcher(e,t){return this.watch(e,(0,r.A)((0,r.A)({},t),{},{correlationId:KG.WATCHER_CORRELATION_IDS++}))}watch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{recursive:!1,excludes:[]},i=new bo,n=!1,s=()=>{n=!0};i.add(vo(()=>s())),(async()=>{try{let i=await this.doWatch(e,t);n?po(i):s=()=>po(i)}catch(e){this.logService.error(e)}})();let r=t.correlationId;if("number"==typeof r){let e=i.add(new Ro);return i.add(this.internalOnDidFilesChange.event(t=>{t.correlates(r)&&e.fire(t)})),{onDidChange:e.event,dispose:()=>i.dispose()}}return i}async doWatch(e,t){let i=await this.withProvider(e),n=Ng([this.getExtUri(i).providerExtUri.getComparisonKey(e),t]),s=this.activeWatchers.get(n);return s||(s={count:0,disposable:i.watch(e,t)},this.activeWatchers.set(n,s)),s.count+=1,vo(()=>{s&&(s.count--,0===s.count&&(po(s.disposable),this.activeWatchers.delete(n)))})}dispose(){super.dispose();for(let[,e]of this.activeWatchers)po(e.disposable);this.activeWatchers.clear()}async doWriteBuffered(e,t,i,n){return this.writeQueue.queueFor(t,async()=>{var s;let r=await e.open(t,{create:!0,unlock:null!==(s=null===i||void 0===i?void 0:i.unlock)&&void 0!==s&&s});try{ng(n)||sg(n)?await this.doWriteStreamBufferedQueued(e,r,n):await this.doWriteReadableBufferedQueued(e,r,n)}catch(e){throw hp(e)}finally{await e.close(r)}},this.getExtUri(e).providerExtUri)}async doWriteStreamBufferedQueued(e,t,i){let n,s=0;if(sg(i)){if(i.buffer.length>0){let n=gg.concat(i.buffer);await this.doWriteBuffer(e,t,n,n.byteLength,s,0),s+=n.byteLength}if(i.ended)return;n=i.stream}else n=i;return new Promise((i,r)=>{lg(n,{onData:async i=>{n.pause();try{await this.doWriteBuffer(e,t,i,i.byteLength,s,0)}catch(e){return r(e)}s+=i.byteLength,setTimeout(()=>n.resume())},onError:e=>r(e),onEnd:()=>i()})})}async doWriteReadableBufferedQueued(e,t,i){let n,s=0;for(;null!==(n=i.read());)await this.doWriteBuffer(e,t,n,n.byteLength,s,0),s+=n.byteLength}async doWriteBuffer(e,t,i,n,s,r){let o=0;for(;o<n;){o+=await e.write(t,s+o,i.buffer,r+o,n-o)}}async doWriteUnbuffered(e,t,i,n){return this.writeQueue.queueFor(t,()=>this.doWriteUnbufferedQueued(e,t,i,n),this.getExtUri(e).providerExtUri)}async doWriteUnbufferedQueued(e,t,i,n){var s,r;let o;o=n instanceof gg?n:ng(n)?await yg(n):sg(n)?await async function(e){return e.ended?gg.concat(e.buffer):gg.concat([...e.buffer,await yg(e.stream)])}(n):function(e){return function(e,t){let i,n=[];for(;null!==(i=e.read());)n.push(i);return t(n)}(e,e=>gg.concat(e))}(n),await e.writeFile(t,o.buffer,{create:!0,overwrite:!0,unlock:null!==(s=null===i||void 0===i?void 0:i.unlock)&&void 0!==s&&s,atomic:null!==(r=null===i||void 0===i?void 0:i.atomic)&&void 0!==r&&r})}async doPipeBuffered(e,t,i,n){return this.writeQueue.queueFor(n,()=>this.doPipeBufferedQueued(e,t,i,n),this.getExtUri(i).providerExtUri)}async doPipeBufferedQueued(e,t,i,n){let s,r;try{s=await e.open(t,{create:!1}),r=await i.open(n,{create:!0,unlock:!1});let o=gg.alloc(this.BUFFER_SIZE),a=0,l=0,h=0;do{h=await e.read(s,a,o.buffer,l,o.byteLength-l),await this.doWriteBuffer(i,r,o,h,a,l),a+=h,l+=h,l===o.byteLength&&(l=0)}while(h>0)}catch(e){throw hp(e)}finally{await Hl.settled(["number"==typeof s?e.close(s):Promise.resolve(),"number"==typeof r?i.close(r):Promise.resolve()])}}async doPipeUnbuffered(e,t,i,n){return this.writeQueue.queueFor(n,()=>this.doPipeUnbufferedQueued(e,t,i,n),this.getExtUri(i).providerExtUri)}async doPipeUnbufferedQueued(e,t,i,n){return i.writeFile(n,await e.readFile(t),{create:!0,overwrite:!0,unlock:!1,atomic:!1})}async doPipeUnbufferedToBuffered(e,t,i,n){return this.writeQueue.queueFor(n,()=>this.doPipeUnbufferedToBufferedQueued(e,t,i,n),this.getExtUri(i).providerExtUri)}async doPipeUnbufferedToBufferedQueued(e,t,i,n){let s=await i.open(n,{create:!0,unlock:!1});try{let n=await e.readFile(t);await this.doWriteBuffer(i,s,gg.wrap(n),n.byteLength,0,0)}catch(e){throw hp(e)}finally{await i.close(s)}}async doPipeBufferedToUnbuffered(e,t,i,n){let s=await yg(this.readFileBuffered(e,t,Go.None));await this.doWriteUnbuffered(i,n,void 0,s)}throwIfFileSystemIsReadonly(e,t){if(e.capabilities&Xg.Readonly)throw new mp(Li(1931,"Unable to modify read-only file '{0}'",this.resourceForError(t)),pp.FILE_PERMISSION_DENIED);return e}throwIfFileIsReadonly(e,t){var i;if((null!==(i=t.permissions)&&void 0!==i?i:0)&Qg.Readonly)throw new mp(Li(1931,"Unable to modify read-only file '{0}'",this.resourceForError(e)),pp.FILE_PERMISSION_DENIED)}resourceForError(e){return YG(e)}},{_:KG=ui},{_:ui.WATCHER_CORRELATION_IDS=0},ui);$G=KG=ki([Ei(0,Np)],$G);var XG,ZG,JG=class{constructor(e){this.type=Yg.File,this.ctime=Date.now(),this.mtime=Date.now(),this.size=0,this.name=e}},ej=class{constructor(e){this.type=Yg.Directory,this.ctime=Date.now(),this.mtime=Date.now(),this.size=0,this.name=e,this.entries=new Map}},tj=class extends Co{constructor(){super(...arguments),this.memoryFdCounter=0,this.fdMemory=new Map,this._onDidChangeCapabilities=this._register(new Ro),this.onDidChangeCapabilities=this._onDidChangeCapabilities.event,this._capabilities=Xg.FileReadWrite|Xg.PathCaseSensitive,this.root=new ej(""),this._onDidChangeFile=this._register(new Ro),this.onDidChangeFile=this._onDidChangeFile.event,this._bufferedChanges=[]}get capabilities(){return this._capabilities}setReadOnly(e){e!==!!(this._capabilities&Xg.Readonly)&&(this._capabilities=e?Xg.Readonly|Xg.PathCaseSensitive|Xg.FileReadWrite:Xg.FileReadWrite|Xg.PathCaseSensitive,this._onDidChangeCapabilities.fire())}async stat(e){return this._lookup(e,!1)}async readdir(e){let t=this._lookupAsDirectory(e,!1),i=[];return t.entries.forEach((e,t)=>i.push([t,e.type])),i}async readFile(e){let t=this._lookupAsFile(e,!1).data;if(t)return t;throw lp("file not found",Zg.FileNotFound)}readFileStream(e){let t=this._lookupAsFile(e,!1).data,i=rg(e=>gg.concat(e.map(e=>gg.wrap(e))).buffer);return i.end(t),i}async writeFile(e,t,i){let n=ol(e),s=this._lookupParentDirectory(e),r=s.entries.get(n);if(r instanceof ej)throw lp("file is directory",Zg.FileIsADirectory);if(!r&&!i.create)throw lp("file not found",Zg.FileNotFound);if(r&&i.create&&!i.overwrite)throw lp("file exists already",Zg.FileExists);r||(r=new JG(n),s.entries.set(n,r),this._fireSoon({type:up.ADDED,resource:e})),r.mtime=Date.now(),r.size=t.byteLength,r.data=t,this._fireSoon({type:up.UPDATED,resource:e})}open(e,t){let i=this._lookupAsFile(e,!1).data;if(i){let e=this.memoryFdCounter++;return this.fdMemory.set(e,i),Promise.resolve(e)}throw lp("file not found",Zg.FileNotFound)}close(e){return this.fdMemory.delete(e),Promise.resolve()}read(e,t,i,n,s){let r=this.fdMemory.get(e);if(!r)throw lp("No file with that descriptor open",Zg.Unavailable);let o=gg.wrap(r).slice(t,t+s);return i.set(o.buffer,n),Promise.resolve(o.byteLength)}write(e,t,i,n,s){let r=this.fdMemory.get(e);if(!r)throw lp("No file with that descriptor open",Zg.Unavailable);let o=gg.wrap(i).slice(n,n+s);return r.set(o.buffer,t),Promise.resolve(o.byteLength)}async rename(e,t,i){if(!i.overwrite&&this._lookup(t,!0))throw lp("file exists already",Zg.FileExists);let n=this._lookup(e,!1),s=this._lookupParentDirectory(e),r=this._lookupParentDirectory(t),o=ol(t);s.entries.delete(n.name),n.name=o,r.entries.set(o,n),this._fireSoon({type:up.DELETED,resource:e},{type:up.ADDED,resource:t})}async delete(e,t){let i=ll(e),n=ol(e),s=this._lookupAsDirectory(i,!1);s.entries.delete(n)&&(s.mtime=Date.now(),--s.size,this._fireSoon({type:up.UPDATED,resource:i},{resource:e,type:up.DELETED}))}async mkdir(e){if(this._lookup(e,!0))throw lp("file exists already",Zg.FileExists);let t=ol(e),i=ll(e),n=this._lookupAsDirectory(i,!1),s=new ej(t);n.entries.set(s.name,s),n.mtime=Date.now(),n.size+=1,this._fireSoon({type:up.UPDATED,resource:i},{type:up.ADDED,resource:e})}_lookup(e,t){let i=e.path.split("/"),n=this.root;for(let s of i){if(!s)continue;let e;if(n instanceof ej&&(e=n.entries.get(s)),!e){if(t)return;throw lp("file not found",Zg.FileNotFound)}n=e}return n}_lookupAsDirectory(e,t){let i=this._lookup(e,t);if(i instanceof ej)return i;throw lp("file not a directory",Zg.FileNotADirectory)}_lookupAsFile(e,t){let i=this._lookup(e,t);if(i instanceof JG)return i;throw lp("file is a directory",Zg.FileIsADirectory)}_lookupParentDirectory(e){let t=ll(e);return this._lookupAsDirectory(t,!1)}watch(e,t){return Co.None}_fireSoon(){this._bufferedChanges.push(...arguments),this._fireSoonHandle&&clearTimeout(this._fireSoonHandle),this._fireSoonHandle=setTimeout(()=>{this._onDidChangeFile.fire(this._bufferedChanges),this._bufferedChanges.length=0},5)}dispose(){super.dispose(),this.fdMemory.clear()}};!function(e){e.supported=function(e){return"function"==typeof(null===e||void 0===e?void 0:e.showDirectoryPicker)},e.isFileSystemHandle=function(e){let t=e;return!!t&&("string"==typeof t.kind&&"function"==typeof t.queryPermission&&"function"==typeof t.requestPermission)},e.isFileSystemFileHandle=function(e){return"file"===e.kind},e.isFileSystemDirectoryHandle=function(e){return"directory"===e.kind}}(XG||(XG={})),function(e){e.supported=function(e){return"function"==typeof(null===e||void 0===e?void 0:e.FileSystemObserver)}}(ZG||(ZG={})),lp(Li(1900,"File does not exist"),Zg.FileNotFound),lp(Li(1901,"File is Directory"),Zg.FileIsADirectory),lp(Li(1902,"File is not a directory"),Zg.FileNotADirectory),lp(Li(1903,"Directory is not empty"),Zg.Unknown),lp(Li(1904,"File exceeds available storage quota"),Zg.FileExceedsStorageQuota);var ij,nj=fn("textFileService");!function(e){e[e.FILE_IS_BINARY=0]="FILE_IS_BINARY"}(ij||(ij={}));var sj,rj,oj,aj=class extends mp{static isTextFileOperationError(e){return e instanceof Error&&!rn(e.textFileOperationResult)}constructor(e,t,i){super(e,pp.FILE_OTHER_ERROR),this.textFileOperationResult=t,this.options=i}};!function(e){e[e.SAVED=0]="SAVED",e[e.DIRTY=1]="DIRTY",e[e.PENDING_SAVE=2]="PENDING_SAVE",e[e.CONFLICT=3]="CONFLICT",e[e.ORPHAN=4]="ORPHAN",e[e.ERROR=5]="ERROR"}(sj||(sj={})),function(e){e[e.EDITOR=1]="EDITOR",e[e.REFERENCE=2]="REFERENCE",e[e.OTHER=3]="OTHER"}(rj||(rj={})),function(e){e[e.Encode=0]="Encode",e[e.Decode=1]="Decode"}(oj||(oj={}));Li(4019,"Text Editor"),Li(4020,"Built-in");var lj,hj,dj,cj;function uj(e,t,i){for(let n of i.visibleEditorPanes)if(n.group.id===t&&e.matches(n.input))return n.getViewState()}function gj(e){if(Sj(e))return!1;let t=e;return void 0!==(null===t||void 0===t?void 0:t.original)&&void 0!==t.modified}function pj(e){if(Sj(e))return!1;let t=e;return!(!t||t.resources&&!Array.isArray(t.resources))&&(!!t.resources||!!t.multiDiffSource)}function fj(e){if(Sj(e)||gj(e))return!1;let t=e;return void 0!==(null===t||void 0===t?void 0:t.primary)&&void 0!==t.secondary}function mj(e){var t,i,n,s;if(Sj(e))return!1;let r=e;return Gs.isUri(null===r||void 0===r||null===(t=r.base)||void 0===t?void 0:t.resource)&&Gs.isUri(null===r||void 0===r||null===(i=r.input1)||void 0===i?void 0:i.resource)&&Gs.isUri(null===r||void 0===r||null===(n=r.input2)||void 0===n?void 0:n.resource)&&Gs.isUri(null===r||void 0===r||null===(s=r.result)||void 0===s?void 0:s.resource)}!function(e){e[e.PROGRAMMATIC=1]="PROGRAMMATIC",e[e.USER=2]="USER",e[e.EDIT=3]="EDIT",e[e.NAVIGATION=4]="NAVIGATION",e[e.JUMP=5]="JUMP"}(lj||(lj={})),function(e){e[e.IDENTICAL=1]="IDENTICAL",e[e.SIMILAR=2]="SIMILAR",e[e.DIFFERENT=3]="DIFFERENT"}(hj||(hj={})),function(e){e[e.SHORT=0]="SHORT",e[e.MEDIUM=1]="MEDIUM",e[e.LONG=2]="LONG"}(dj||(dj={})),function(e){e[e.EXPLICIT=1]="EXPLICIT",e[e.AUTO=2]="AUTO",e[e.FOCUS_CHANGE=3]="FOCUS_CHANGE",e[e.WINDOW_CHANGE=4]="WINDOW_CHANGE"}(cj||(cj={}));var vj,_j=new class{constructor(){this.mapIdToSaveSource=new Map}registerSource(e,t){let i=this.mapIdToSaveSource.get(e);return i||(i={source:e,label:t},this.mapIdToSaveSource.set(e,i)),i.source}getSourceLabel(e){var t,i;return null!==(t=null===(i=this.mapIdToSaveSource.get(e))||void 0===i?void 0:i.label)&&void 0!==t?t:e}};!function(e){e[e.None=0]="None",e[e.Readonly=2]="Readonly",e[e.Untitled=4]="Untitled",e[e.Singleton=8]="Singleton",e[e.RequiresTrust=16]="RequiresTrust",e[e.CanSplitInGroup=32]="CanSplitInGroup",e[e.ForceDescription=64]="ForceDescription",e[e.CanDropIntoEditor=128]="CanDropIntoEditor",e[e.MultipleEditors=256]="MultipleEditors",e[e.Scratchpad=512]="Scratchpad"}(vj||(vj={}));var bj,Cj,yj,wj=class extends Co{};function Sj(e){return e instanceof wj}function kj(e){let t=e;return Sj(null===t||void 0===t?void 0:t.modified)&&Sj(null===t||void 0===t?void 0:t.original)}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.REPLACE=1]="REPLACE",e[e.MOVE=2]="MOVE",e[e.UNPIN=3]="UNPIN"}(bj||(bj={})),function(e){e[e.GROUP_ACTIVE=0]="GROUP_ACTIVE",e[e.GROUP_INDEX=1]="GROUP_INDEX",e[e.GROUP_LABEL=2]="GROUP_LABEL",e[e.GROUP_LOCKED=3]="GROUP_LOCKED",e[e.EDITORS_SELECTION=4]="EDITORS_SELECTION",e[e.EDITOR_OPEN=5]="EDITOR_OPEN",e[e.EDITOR_CLOSE=6]="EDITOR_CLOSE",e[e.EDITOR_MOVE=7]="EDITOR_MOVE",e[e.EDITOR_ACTIVE=8]="EDITOR_ACTIVE",e[e.EDITOR_LABEL=9]="EDITOR_LABEL",e[e.EDITOR_CAPABILITIES=10]="EDITOR_CAPABILITIES",e[e.EDITOR_PIN=11]="EDITOR_PIN",e[e.EDITOR_TRANSIENT=12]="EDITOR_TRANSIENT",e[e.EDITOR_STICKY=13]="EDITOR_STICKY",e[e.EDITOR_DIRTY=14]="EDITOR_DIRTY",e[e.EDITOR_WILL_DISPOSE=15]="EDITOR_WILL_DISPOSE"}(Cj||(Cj={})),function(e){e[e.PRIMARY=1]="PRIMARY",e[e.SECONDARY=2]="SECONDARY",e[e.BOTH=3]="BOTH",e[e.ANY=4]="ANY"}(yj||(yj={}));var Ej;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.KEYBOARD=1]="KEYBOARD",e[e.MOUSE=2]="MOUSE"}(Ej||(Ej={}));var Dj,Tj=new class{getOriginalUri(e,t){if(!e)return;if(mj(e))return Tj.getOriginalUri(e.result,t);if(null!==t&&void 0!==t&&t.supportSideBySide){let{primary:n,secondary:s}=this.getSideEditors(e);if(n&&s){var i;if((null===t||void 0===t?void 0:t.supportSideBySide)===yj.BOTH)return{primary:this.getOriginalUri(n,{filterByScheme:t.filterByScheme}),secondary:this.getOriginalUri(s,{filterByScheme:t.filterByScheme})};if((null===t||void 0===t?void 0:t.supportSideBySide)===yj.ANY)return null!==(i=this.getOriginalUri(n,{filterByScheme:t.filterByScheme}))&&void 0!==i?i:this.getOriginalUri(s,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===yj.PRIMARY?n:s}}if(gj(e)||pj(e)||fj(e)||mj(e))return;let n=function(e){let t=e;return Gs.isUri(null===t||void 0===t?void 0:t.preferredResource)}(e)?e.preferredResource:e.resource;return n&&null!==t&&void 0!==t&&t.filterByScheme?this.filterUri(n,t.filterByScheme):n}getSideEditors(e){return function(e){let t=e;return Sj(null===t||void 0===t?void 0:t.primary)&&Sj(null===t||void 0===t?void 0:t.secondary)}(e)||fj(e)?{primary:e.primary,secondary:e.secondary}:kj(e)||gj(e)?{primary:e.modified,secondary:e.original}:{primary:void 0,secondary:void 0}}getCanonicalUri(e,t){if(!e)return;if(mj(e))return Tj.getCanonicalUri(e.result,t);if(null!==t&&void 0!==t&&t.supportSideBySide){let{primary:n,secondary:s}=this.getSideEditors(e);if(n&&s){var i;if((null===t||void 0===t?void 0:t.supportSideBySide)===yj.BOTH)return{primary:this.getCanonicalUri(n,{filterByScheme:t.filterByScheme}),secondary:this.getCanonicalUri(s,{filterByScheme:t.filterByScheme})};if((null===t||void 0===t?void 0:t.supportSideBySide)===yj.ANY)return null!==(i=this.getCanonicalUri(n,{filterByScheme:t.filterByScheme}))&&void 0!==i?i:this.getCanonicalUri(s,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===yj.PRIMARY?n:s}}if(gj(e)||pj(e)||fj(e)||mj(e))return;let n=e.resource;return n&&null!==t&&void 0!==t&&t.filterByScheme?this.filterUri(n,t.filterByScheme):n}filterUri(e,t){if(Array.isArray(t)){if(t.some(t=>e.scheme===t))return e}else if(t===e.scheme)return e}};!function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"}(Dj||(Dj={}));var Ij;Tn.add("workbench.contributions.editor.inputFactories",new class{constructor(){this.editorSerializerConstructors=new Map,this.editorSerializerInstances=new Map}start(e){let t=this.instantiationService=e.get(pn);for(let[i,n]of this.editorSerializerConstructors)this.createEditorSerializer(i,n,t);this.editorSerializerConstructors.clear()}createEditorSerializer(e,t,i){let n=i.createInstance(t);this.editorSerializerInstances.set(e,n)}registerFileEditorFactory(e){if(this.fileEditorFactory)throw Error("Can only register one file editor factory.");this.fileEditorFactory=e}getFileEditorFactory(){return an(this.fileEditorFactory)}registerEditorSerializer(e,t){if(this.editorSerializerConstructors.has(e)||this.editorSerializerInstances.has(e))throw Error("A editor serializer with type ID '".concat(e,"' was already registered."));return this.instantiationService?this.createEditorSerializer(e,t,this.instantiationService):this.editorSerializerConstructors.set(e,t),vo(()=>{this.editorSerializerConstructors.delete(e),this.editorSerializerInstances.delete(e)})}getEditorSerializer(e){return this.editorSerializerInstances.get("string"==typeof e?e:e.typeId)}}),function(e){e[e.MOST_RECENTLY_ACTIVE=0]="MOST_RECENTLY_ACTIVE",e[e.SEQUENTIAL=1]="SEQUENTIAL"}(Ij||(Ij={}));var xj,Lj=fn("lifecycleService"),Aj=Hg,Nj=fn("untitledTextEditorService"),Fj=class extends Co{constructor(){super(...arguments),this._onWillDispose=this._register(new Ro),this.onWillDispose=this._onWillDispose.event,this.resolved=!1}async resolve(){this.resolved=!0}isResolved(){return this.resolved}isDisposed(){return this._store.isDisposed}dispose(){this._onWillDispose.fire(),super.dispose()}},Oj=fn("ILanguageDetectionService"),Rj=(gi=class extends Fj{constructor(e,t,i,n,s){super(),this.modelService=e,this.languageService=t,this.languageDetectionService=i,this.accessibilityService=n,this.textEditorModelHandle=void 0,this.modelDisposeListener=this._register(new yo),this.autoDetectLanguageThrottler=this._register(new kl(xj.AUTO_DETECT_LANGUAGE_THROTTLE_DELAY)),this._blockLanguageChangeListener=!1,this._languageChangeSource=void 0,s&&this.handleExistingModel(s)}handleExistingModel(e){let t=this.modelService.getModel(e);if(!t)throw Error("Document with resource ".concat(e.toString(!0)," does not exist"));this.textEditorModelHandle=e,this.registerModelDisposeListener(t)}registerModelDisposeListener(e){this.modelDisposeListener.value=e.onWillDispose(()=>{this.textEditorModelHandle=void 0,this.dispose()})}get textEditorModel(){return this.textEditorModelHandle?this.modelService.getModel(this.textEditorModelHandle):null}isReadonly(){return!0}get languageChangeSource(){return this._languageChangeSource}get hasLanguageSetExplicitly(){return"string"==typeof this._languageChangeSource}setLanguageId(e,t){this._languageChangeSource="user",this.setLanguageIdInternal(e,t)}setLanguageIdInternal(e,t){if(this.isResolved()&&e&&e!==this.textEditorModel.getLanguageId()){this._blockLanguageChangeListener=!0;try{this.textEditorModel.setLanguage(this.languageService.createById(e),t)}finally{this._blockLanguageChangeListener=!1}}}installModelListeners(e){let t=this._register(e.onDidChangeLanguage(e=>{"languageDetection"===e.source||this._blockLanguageChangeListener||(this._languageChangeSource="api",t.dispose())}))}getLanguageId(){var e;return null===(e=this.textEditorModel)||void 0===e?void 0:e.getLanguageId()}autoDetectLanguage(){return this.autoDetectLanguageThrottler.trigger(()=>this.doAutoDetectLanguage())}async doAutoDetectLanguage(){var e;if(this.hasLanguageSetExplicitly||!this.textEditorModelHandle||!this.languageDetectionService.isEnabledForLanguage(null!==(e=this.getLanguageId())&&void 0!==e?e:"plaintext"))return;let t=await this.languageDetectionService.detectLanguage(this.textEditorModelHandle),i=this.getLanguageId();if(t&&t!==i&&!this.isDisposed()){this.setLanguageIdInternal(t,"languageDetection");let e=this.languageService.getLanguageName(t);this.accessibilityService.alert(Li(4025,"Language {0} was automatically detected and set as the language mode.",null!==e&&void 0!==e?e:t))}}createTextEditorModel(e,t,i){let n=this.getFirstLineText(e),s=this.getOrCreateLanguage(t,this.languageService,i,n);return this.doCreateTextEditorModel(e,s,t)}doCreateTextEditorModel(e,t,i){let n=i&&this.modelService.getModel(i);return n?this.updateTextEditorModel(e,t.languageId):(n=this.modelService.createModel(e,t,i),this.createdEditorModel=!0,this.registerModelDisposeListener(n)),this.textEditorModelHandle=n.uri,n}getFirstLineText(e){let t=e;return"function"==typeof t.getFirstLineText?t.getFirstLineText(pS.FIRST_LINE_DETECTION_LENGTH_LIMIT):e.getLineContent(1).substr(0,pS.FIRST_LINE_DETECTION_LENGTH_LIMIT)}getOrCreateLanguage(e,t,i,n){return i&&"plaintext"!==i?t.createById(i):t.createByFilepathOrFirstLine(null!==e&&void 0!==e?e:null,n)}updateTextEditorModel(e,t,i){this.isResolved()&&(e&&this.modelService.updateModel(this.textEditorModel,e,i),t&&"plaintext"!==t&&this.textEditorModel.getLanguageId()!==t&&this.textEditorModel.setLanguage(this.languageService.createById(t)))}createSnapshot(){return this.textEditorModel?this.textEditorModel.createSnapshot(!0):null}isResolved(){return!!this.textEditorModelHandle}dispose(){this.modelDisposeListener.dispose(),this.textEditorModelHandle&&this.createdEditorModel&&this.modelService.destroyModel(this.textEditorModelHandle),this.textEditorModelHandle=void 0,this.createdEditorModel=!1,super.dispose()}},{_:xj=gi},{_:gi.AUTO_DETECT_LANGUAGE_THROTTLE_DELAY=600},gi);Rj=xj=ki([Ei(0,LI),Ei(1,Pw),Ei(2,Oj),Ei(3,uD)],Rj);var Mj,Pj=fn("workingCopyBackupService"),Bj=fn("workingCopyService");!function(e){e[e.None=0]="None",e[e.Untitled=2]="Untitled",e[e.Scratchpad=4]="Scratchpad"}(Mj||(Mj={}));var Uj,Hj=fn("editorService"),Wj="utf8",Vj="utf8bom",zj="utf16be",Kj="utf16le",qj=[254,255],Gj=[255,254],jj=[239,187,191];!function(e){e[e.STREAM_IS_BINARY=1]="STREAM_IS_BINARY"}(Uj||(Uj={}));var Yj=class extends Error{constructor(e,t){super(e),this.decodeStreamErrorKind=t}},Qj=class e{static async create(t){let n;if("utf8"!==t)n=(await i.e(4790).then(i.bind(i,4790)).then((0,l.o)()).then(e=>{var t;return null!==(t=e.default)&&void 0!==t?t:e})).getDecoder(Xj(t));else{let e=new TextDecoder;n={write:t=>e.decode(t,{stream:!0}),end:()=>e.decode()}}return new e(n)}constructor(e){this.iconvLiteDecoder=e}write(e){return this.iconvLiteDecoder.write(e)}end(){return this.iconvLiteDecoder.end()}};function $j(e,t){var n;let s=null!==(n=t.minBytesRequiredForDetection)&&void 0!==n?n:t.guessEncoding?4096:512;return new Promise((n,r)=>{let o,a=rg(e=>e.join("")),h=[],d=0,c=new Qo,u=async()=>{try{let e=await function(e,t,n){let{buffer:s,bytesRead:r}=e,o=function(e,t){if(!e||t<qj.length)return null;let i=e.readUInt8(0),n=e.readUInt8(1);if(i===qj[0]&&n===qj[1])return zj;if(i===Gj[0]&&n===Gj[1])return Kj;if(t<jj.length)return null;let s=e.readUInt8(2);return i===jj[0]&&n===jj[1]&&s===jj[2]?Vj:null}(s,r),a=!1;if("utf16be"!==o&&"utf16le"!==o&&s){let e=!0,t=!0,i=!1;for(let n=0;n<r&&n<512;n++){let r=n%2==1,o=0===s.readUInt8(n);if(o&&(i=!0),e&&(r&&!o||!r&&o)&&(e=!1),t&&(r&&o||!r&&!o)&&(t=!1),o&&!e&&!t)break}i&&(e?o=Kj:t?o=zj:a=!0)}return t&&!a&&!o&&s?async function(e,t){var n;let s,r=await i.e(8118).then(i.bind(i,8118)).then((0,l.o)()).then(e=>{var t;return null!==(t=e.default)&&void 0!==t?t:e}),o=function(e){let t="";for(let i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t}(e.slice(0,65536).buffer);t&&(t=Pr(t.map(e=>function(e){let t=nY[eY(e)];return t?t.guessableName:void 0}(e))),0===t.length&&(t=void 0));try{s=r.detect(o,t?{detectEncodings:t}:void 0)}catch(h){return null}if(null===(n=s)||void 0===n||!n.encoding)return null;let a=s.encoding.toLowerCase();return 0<=Zj.indexOf(a)?null:function(e){let t=eY(e);return Jj[t]||t}(s.encoding)}(s.slice(0,r),n).then(e=>({seemsBinary:!1,encoding:e})):{seemsBinary:a,encoding:o}}({buffer:gg.concat(h),bytesRead:d},t.guessEncoding,t.candidateGuessEncodings);if(e.seemsBinary&&t.acceptTextOnly)throw new Yj("Stream is binary but only text is accepted for decoding",Uj.STREAM_IS_BINARY);e.encoding=await t.overwriteEncoding(e.encoding),o=await Qj.create(e.encoding);let s=o.write(gg.concat(h).buffer);a.write(s),h.length=0,d=0,n({stream:a,detected:e})}catch(e){c.cancel(),a.destroy(),r(e)}};lg(e,{onData:async t=>{o?a.write(o.write(t.buffer)):(h.push(t),d+=t.byteLength,d>=s&&(e.pause(),await u(),setTimeout(()=>e.resume())))},onError:e=>a.error(e),onEnd:async()=>{var e;o||await u(),a.end(null===(e=o)||void 0===e?void 0:e.end())}},c.token)})}function Xj(e){return"utf8bom"===e||null===e?Wj:e}var Zj=["ascii","utf-16","utf-32"];var Jj={ibm866:"cp866",big5:"cp950"};function eY(e){return e.replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}var tY,iY={utf8:{labelLong:"UTF-8",labelShort:"UTF-8",order:1,alias:"utf8bom",guessableName:"UTF-8"},utf8bom:{labelLong:"UTF-8 with BOM",labelShort:"UTF-8 with BOM",encodeOnly:!0,order:2,alias:"utf8"},utf16le:{labelLong:"UTF-16 LE",labelShort:"UTF-16 LE",order:3,guessableName:"UTF-16LE"},utf16be:{labelLong:"UTF-16 BE",labelShort:"UTF-16 BE",order:4,guessableName:"UTF-16BE"},windows1252:{labelLong:"Western (Windows 1252)",labelShort:"Windows 1252",order:5,guessableName:"windows-1252"},iso88591:{labelLong:"Western (ISO 8859-1)",labelShort:"ISO 8859-1",order:6},iso88593:{labelLong:"Western (ISO 8859-3)",labelShort:"ISO 8859-3",order:7},iso885915:{labelLong:"Western (ISO 8859-15)",labelShort:"ISO 8859-15",order:8},macroman:{labelLong:"Western (Mac Roman)",labelShort:"Mac Roman",order:9},cp437:{labelLong:"DOS (CP 437)",labelShort:"CP437",order:10},windows1256:{labelLong:"Arabic (Windows 1256)",labelShort:"Windows 1256",order:11},iso88596:{labelLong:"Arabic (ISO 8859-6)",labelShort:"ISO 8859-6",order:12},windows1257:{labelLong:"Baltic (Windows 1257)",labelShort:"Windows 1257",order:13},iso88594:{labelLong:"Baltic (ISO 8859-4)",labelShort:"ISO 8859-4",order:14},iso885914:{labelLong:"Celtic (ISO 8859-14)",labelShort:"ISO 8859-14",order:15},windows1250:{labelLong:"Central European (Windows 1250)",labelShort:"Windows 1250",order:16,guessableName:"windows-1250"},iso88592:{labelLong:"Central European (ISO 8859-2)",labelShort:"ISO 8859-2",order:17,guessableName:"ISO-8859-2"},cp852:{labelLong:"Central European (CP 852)",labelShort:"CP 852",order:18},windows1251:{labelLong:"Cyrillic (Windows 1251)",labelShort:"Windows 1251",order:19,guessableName:"windows-1251"},cp866:{labelLong:"Cyrillic (CP 866)",labelShort:"CP 866",order:20,guessableName:"IBM866"},cp1125:{labelLong:"Cyrillic (CP 1125)",labelShort:"CP 1125",order:21,guessableName:"IBM1125"},iso88595:{labelLong:"Cyrillic (ISO 8859-5)",labelShort:"ISO 8859-5",order:22,guessableName:"ISO-8859-5"},koi8r:{labelLong:"Cyrillic (KOI8-R)",labelShort:"KOI8-R",order:23,guessableName:"KOI8-R"},koi8u:{labelLong:"Cyrillic (KOI8-U)",labelShort:"KOI8-U",order:24},iso885913:{labelLong:"Estonian (ISO 8859-13)",labelShort:"ISO 8859-13",order:25},windows1253:{labelLong:"Greek (Windows 1253)",labelShort:"Windows 1253",order:26,guessableName:"windows-1253"},iso88597:{labelLong:"Greek (ISO 8859-7)",labelShort:"ISO 8859-7",order:27,guessableName:"ISO-8859-7"},windows1255:{labelLong:"Hebrew (Windows 1255)",labelShort:"Windows 1255",order:28,guessableName:"windows-1255"},iso88598:{labelLong:"Hebrew (ISO 8859-8)",labelShort:"ISO 8859-8",order:29,guessableName:"ISO-8859-8"},iso885910:{labelLong:"Nordic (ISO 8859-10)",labelShort:"ISO 8859-10",order:30},iso885916:{labelLong:"Romanian (ISO 8859-16)",labelShort:"ISO 8859-16",order:31},windows1254:{labelLong:"Turkish (Windows 1254)",labelShort:"Windows 1254",order:32},iso88599:{labelLong:"Turkish (ISO 8859-9)",labelShort:"ISO 8859-9",order:33},windows1258:{labelLong:"Vietnamese (Windows 1258)",labelShort:"Windows 1258",order:34},gbk:{labelLong:"Simplified Chinese (GBK)",labelShort:"GBK",order:35},gb18030:{labelLong:"Simplified Chinese (GB18030)",labelShort:"GB18030",order:36},cp950:{labelLong:"Traditional Chinese (Big5)",labelShort:"Big5",order:37,guessableName:"Big5"},big5hkscs:{labelLong:"Traditional Chinese (Big5-HKSCS)",labelShort:"Big5-HKSCS",order:38},shiftjis:{labelLong:"Japanese (Shift JIS)",labelShort:"Shift JIS",order:39,guessableName:"SHIFT_JIS"},eucjp:{labelLong:"Japanese (EUC-JP)",labelShort:"EUC-JP",order:40,guessableName:"EUC-JP"},euckr:{labelLong:"Korean (EUC-KR)",labelShort:"EUC-KR",order:41,guessableName:"EUC-KR"},windows874:{labelLong:"Thai (Windows 874)",labelShort:"Windows 874",order:42},iso885911:{labelLong:"Latin/Thai (ISO 8859-11)",labelShort:"ISO 8859-11",order:43},koi8ru:{labelLong:"Cyrillic (KOI8-RU)",labelShort:"KOI8-RU",order:44},koi8t:{labelLong:"Tajik (KOI8-T)",labelShort:"KOI8-T",order:45},gb2312:{labelLong:"Simplified Chinese (GB 2312)",labelShort:"GB 2312",order:46,guessableName:"GB2312"},cp865:{labelLong:"Nordic DOS (CP 865)",labelShort:"CP 865",order:47},cp850:{labelLong:"Western European DOS (CP 850)",labelShort:"CP 850",order:48}},nY=(()=>{let e={};for(let t in iY)iY[t].guessableName&&(e[t]=iY[t]);return e})(),sY=(pi=class extends Rj{get name(){return"content"===this.configuredLabelFormat&&!this.hasAssociatedFilePath&&this.cachedModelFirstLineWords?this.cachedModelFirstLineWords:this.labelService.getUriBasenameLabel(this.resource)}constructor(e,t,i,n,s,r,o,a,l,h,d,c,u,g,p){super(o,r,g,p),this.resource=e,this.hasAssociatedFilePath=t,this.initialValue=i,this.preferredLanguageId=n,this.preferredEncoding=s,this.workingCopyBackupService=a,this.textResourceConfigurationService=l,this.workingCopyService=h,this.textFileService=d,this.labelService=c,this.editorService=u,this._onDidChangeContent=this._register(new Ro),this.onDidChangeContent=this._onDidChangeContent.event,this._onDidChangeName=this._register(new Ro),this.onDidChangeName=this._onDidChangeName.event,this._onDidChangeDirty=this._register(new Ro),this.onDidChangeDirty=this._onDidChangeDirty.event,this._onDidChangeEncoding=this._register(new Ro),this.onDidChangeEncoding=this._onDidChangeEncoding.event,this._onDidSave=this._register(new Ro),this.onDidSave=this._onDidSave.event,this._onDidRevert=this._register(new Ro),this.onDidRevert=this._onDidRevert.event,this.typeId="",this.capabilities=Mj.Untitled,this.configuredLabelFormat="content",this.cachedModelFirstLineWords=void 0,this.ignoreDirtyOnModelContentChange=!1,this.dirty=this.hasAssociatedFilePath||!!this.initialValue,this._register(this.workingCopyService.registerWorkingCopy(this)),n&&this.setLanguageId(n),this.onConfigurationChange(void 0,!1),this.registerListeners()}registerListeners(){this._register(this.textResourceConfigurationService.onDidChangeConfiguration(e=>this.onConfigurationChange(e,!0)))}onConfigurationChange(e,t){if(!e||e.affectsConfiguration(this.resource,"files.encoding")){let e=this.textResourceConfigurationService.getValue(this.resource,"files.encoding");this.configuredEncoding!==e&&"string"==typeof e&&(this.configuredEncoding=e,t&&!this.preferredEncoding&&this._onDidChangeEncoding.fire())}if(!e||e.affectsConfiguration(this.resource,"workbench.editor.untitled.labelFormat")){let e=this.textResourceConfigurationService.getValue(this.resource,"workbench.editor.untitled.labelFormat");this.configuredLabelFormat!==e&&("content"===e||"name"===e)&&(this.configuredLabelFormat=e,t&&this._onDidChangeName.fire())}}setLanguageId(e,t){let i=e===tY.ACTIVE_EDITOR_LANGUAGE_ID?this.editorService.activeTextEditorLanguageId:e;this.preferredLanguageId=i,i&&super.setLanguageId(i,t)}getLanguageId(){return this.textEditorModel?this.textEditorModel.getLanguageId():this.preferredLanguageId}getEncoding(){return this.preferredEncoding||this.configuredEncoding}async setEncoding(e){let t=this.getEncoding();this.preferredEncoding=e,t!==this.preferredEncoding&&this._onDidChangeEncoding.fire()}isDirty(){return this.dirty}isModified(){return this.isDirty()}setDirty(e){this.dirty!==e&&(this.dirty=e,this._onDidChangeDirty.fire())}async save(e){let t=await this.textFileService.save(this.resource,e);return t&&this._onDidSave.fire({reason:null===e||void 0===e?void 0:e.reason,source:null===e||void 0===e?void 0:e.source}),!!t}async revert(){this.ignoreDirtyOnModelContentChange=!0;try{this.updateTextEditorModel(QB(""))}finally{this.ignoreDirtyOnModelContentChange=!1}this.setDirty(!1),this._onDidRevert.fire()}async backup(e){var t;let i;return this.isResolved()?i=await this.textFileService.getEncodedReadable(this.resource,null!==(t=this.createSnapshot())&&void 0!==t?t:void 0,{encoding:Wj}):"string"==typeof this.initialValue&&(i=Cg(gg.fromString(this.initialValue))),{content:i}}async resolve(){let e=!1,t=!1;if(this.textEditorModel)this.updateTextEditorModel(void 0,this.preferredLanguageId);else{let i,n=await this.workingCopyBackupService.resolve(this);n?(i=n.value,t=!0):i=wg(gg.fromString(this.initialValue||""));let s=await $B(await this.textFileService.getDecodedStream(this.resource,i,{encoding:Wj}));this.createTextEditorModel(s,this.resource,this.preferredLanguageId),e=!0}let i=an(this.textEditorModel);return this.installModelListeners(i),e&&((t||this.initialValue)&&this.updateNameFromFirstLine(i),this.setDirty(this.hasAssociatedFilePath||!!t||!!this.initialValue),(t||this.initialValue)&&this._onDidChangeContent.fire()),super.resolve()}isResolved(){return!!this.textEditorModelHandle}installModelListeners(e){this._register(e.onDidChangeContent(t=>this.onModelContentChanged(e,t))),this._register(e.onDidChangeLanguage(()=>this.onConfigurationChange(void 0,!0))),super.installModelListeners(e)}onModelContentChanged(e,t){this.ignoreDirtyOnModelContentChange||(this.hasAssociatedFilePath||1!==e.getLineCount()||0!==e.getLineLength(1)?this.setDirty(!0):this.setDirty(!1)),t.changes.some(e=>(1===e.range.startLineNumber||1===e.range.endLineNumber)&&e.range.startColumn<=tY.FIRST_LINE_NAME_CANDIDATE_MAX_LENGTH)&&this.updateNameFromFirstLine(e),this._onDidChangeContent.fire(),this.autoDetectLanguage()}updateNameFromFirstLine(e){if(this.hasAssociatedFilePath)return;let t,i=e.getValueInRange({startLineNumber:1,endLineNumber:1,startColumn:1,endColumn:tY.FIRST_LINE_NAME_CANDIDATE_MAX_LENGTH+1}).trim().replace(/\s+/g," ").replace(/\u202E/g,"");i=i.substr(0,Ta(i,tY.FIRST_LINE_NAME_MAX_LENGTH)[0]),i&&RT().exec(i)&&(t=i),t!==this.cachedModelFirstLineWords&&(this.cachedModelFirstLineWords=t,this._onDidChangeName.fire())}isReadonly(){return!1}},{_:tY=pi},{_:pi.FIRST_LINE_NAME_MAX_LENGTH=40},{_:pi.FIRST_LINE_NAME_CANDIDATE_MAX_LENGTH=10*pi.FIRST_LINE_NAME_MAX_LENGTH},{_:pi.ACTIVE_EDITOR_LANGUAGE_ID="${activeEditorLanguage}"},pi);sY=tY=ki([Ei(5,Pw),Ei(6,LI),Ei(7,Pj),Ei(8,NI),Ei(9,Bj),Ei(10,nj),Ei(11,rx),Ei(12,Hj),Ei(13,Oj),Ei(14,uD)],sY);var rY,oY=fn("filesConfigurationService"),aY=fn("pathService");(function(e){e[e.Explorer=1]="Explorer",e[e.Scm=3]="Scm",e[e.Extensions=5]="Extensions",e[e.Window=10]="Window",e[e.Notification=15]="Notification",e[e.Dialog=20]="Dialog"})(rY||(rY={})),Object.freeze({total(){},worked(){},done(){}}),fi=class{get value(){return this._value}constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}},fi.None=Object.freeze({report(){}});var lY=class extends Co{constructor(e,t){super(),this.deferred=new Vl,t.withProgress(e,e=>(this.reporter=e,this.lastStep&&e.report(this.lastStep),this.deferred.p)),this._register(vo(()=>this.deferred.complete()))}report(e){this.reporter?this.reporter.report(e):this.lastStep=e}};lY=ki([Ei(1,hx)],lY);var hY,dY=(mi=class extends Rj{constructor(e,t,i,n,s,r,o,a,l,h,d,c,u,g,p,f,m){super(s,n,u,g),this.resource=e,this.preferredEncoding=t,this.preferredLanguageId=i,this.fileService=r,this.textFileService=o,this.workingCopyBackupService=a,this.logService=l,this.workingCopyService=h,this.filesConfigurationService=d,this.labelService=c,this.pathService=p,this.extensionService=f,this.progressService=m,this._onDidChangeContent=this._register(new Ro),this.onDidChangeContent=this._onDidChangeContent.event,this._onDidResolve=this._register(new Ro),this.onDidResolve=this._onDidResolve.event,this._onDidChangeDirty=this._register(new Ro),this.onDidChangeDirty=this._onDidChangeDirty.event,this._onDidSaveError=this._register(new Ro),this.onDidSaveError=this._onDidSaveError.event,this._onDidSave=this._register(new Ro),this.onDidSave=this._onDidSave.event,this._onDidRevert=this._register(new Ro),this.onDidRevert=this._onDidRevert.event,this._onDidChangeEncoding=this._register(new Ro),this.onDidChangeEncoding=this._onDidChangeEncoding.event,this._onDidChangeOrphaned=this._register(new Ro),this.onDidChangeOrphaned=this._onDidChangeOrphaned.event,this._onDidChangeReadonly=this._register(new Ro),this.onDidChangeReadonly=this._onDidChangeReadonly.event,this.typeId="",this.capabilities=Mj.None,this.versionId=0,this.ignoreDirtyOnModelContentChange=!1,this.ignoreSaveFromSaveParticipants=!1,this.lastModelContentChangeFromUndoRedo=void 0,this.saveSequentializer=new Ul,this.dirty=!1,this.inConflictMode=!1,this.inOrphanMode=!1,this.inErrorMode=!1,this.hasEncodingSetExplicitly=!1,this.name=Ps(this.labelService.getUriLabel(this.resource)),this.resourceHasExtension=!!tl.extname(this.resource),this._register(this.workingCopyService.registerWorkingCopy(this)),this.registerListeners()}registerListeners(){this._register(this.fileService.onDidFilesChange(e=>this.onDidFilesChange(e))),this._register(this.filesConfigurationService.onDidChangeFilesAssociation(()=>this.onDidChangeFilesAssociation())),this._register(this.filesConfigurationService.onDidChangeReadonly(()=>this._onDidChangeReadonly.fire()))}async onDidFilesChange(e){let t,i=!1;if(this.inOrphanMode?e.contains(this.resource,up.ADDED)&&(t=!1,i=!0):e.contains(this.resource,up.DELETED)&&(t=!0,i=!0),i&&this.inOrphanMode!==t){let e=!1;t&&(await El(100,Go.None),e=!!this.isDisposed()||!await this.fileService.exists(this.resource)),this.inOrphanMode!==e&&!this.isDisposed()&&this.setOrphaned(e)}}setOrphaned(e){this.inOrphanMode!==e&&(this.inOrphanMode=e,this._onDidChangeOrphaned.fire())}onDidChangeFilesAssociation(){if(!this.isResolved())return;let e=this.getFirstLineText(this.textEditorModel),t=this.getOrCreateLanguage(this.resource,this.languageService,this.preferredLanguageId,e);this.textEditorModel.setLanguage(t)}setLanguageId(e,t){super.setLanguageId(e,t),this.preferredLanguageId=e}async backup(e){var t;let i;return this.lastResolvedFileStat&&(i={mtime:this.lastResolvedFileStat.mtime,ctime:this.lastResolvedFileStat.ctime,size:this.lastResolvedFileStat.size,etag:this.lastResolvedFileStat.etag,orphaned:this.inOrphanMode}),{meta:i,content:await this.textFileService.getEncodedReadable(this.resource,null!==(t=this.createSnapshot())&&void 0!==t?t:void 0,{encoding:Wj})}}async revert(e){if(!this.isResolved())return;let t=this.dirty,i=this.doSetDirty(!1);if(null===e||void 0===e||!e.soft)try{await this.forceResolveFromFile()}catch(e){if(e.fileOperationResult!==pp.FILE_NOT_FOUND)throw i(),e}this._onDidRevert.fire(),t&&this._onDidChangeDirty.fire()}async resolve(e){this.trace("resolve() - enter"),ig("code/willResolveTextFileEditorModel"),this.isDisposed()?this.trace("resolve() - exit - without resolving because model is disposed"):null!==e&&void 0!==e&&e.contents||!this.dirty&&!this.saveSequentializer.isRunning()?(await this.doResolve(e),ig("code/didResolveTextFileEditorModel")):this.trace("resolve() - exit - without resolving because model is dirty or being saved")}async doResolve(e){return null!==e&&void 0!==e&&e.contents?this.resolveFromBuffer(e.contents,e):this.isResolved()||!await this.resolveFromBackup(e)?this.resolveFromFile(e):void 0}async resolveFromBuffer(e,t){let i,n,s,r;this.trace("resolveFromBuffer()");try{let e=await this.fileService.stat(this.resource);i=e.mtime,n=e.ctime,s=e.size,r=e.etag,this.setOrphaned(!1)}catch(e){i=Date.now(),n=Date.now(),s=0,r="",this.setOrphaned(e.fileOperationResult===pp.FILE_NOT_FOUND)}let o=await this.textFileService.encoding.getPreferredWriteEncoding(this.resource,this.preferredEncoding);this.resolveFromContent({resource:this.resource,name:this.name,mtime:i,ctime:n,size:s,etag:r,value:e,encoding:o.encoding,readonly:!1,locked:!1},!0,t)}async resolveFromBackup(e){let t=await this.workingCopyBackupService.resolve(this),i=Wj;return t&&(i=(await this.textFileService.encoding.getPreferredWriteEncoding(this.resource,this.preferredEncoding)).encoding),this.isResolved()?(this.trace("resolveFromBackup() - exit - without resolving because previously new model got created meanwhile"),!0):!!t&&(await this.doResolveFromBackup(t,i,e),!0)}async doResolveFromBackup(e,t,i){var n;this.trace("doResolveFromBackup()"),this.resolveFromContent({resource:this.resource,name:this.name,mtime:e.meta?e.meta.mtime:Date.now(),ctime:e.meta?e.meta.ctime:Date.now(),size:e.meta?e.meta.size:0,etag:e.meta?e.meta.etag:"",value:await $B(await this.textFileService.getDecodedStream(this.resource,e.value,{encoding:Wj})),encoding:t,readonly:!1,locked:!1},!0,i),(null===(n=e.meta)||void 0===n?void 0:n.orphaned)&&this.setOrphaned(!0)}async resolveFromFile(e){this.trace("resolveFromFile()");let t,i=null===e||void 0===e?void 0:e.forceReadFromFile,n=this.isResolved()||(null===e||void 0===e?void 0:e.allowBinary);i?t="":this.lastResolvedFileStat&&(t=this.lastResolvedFileStat.etag);let s=this.versionId;try{let i=await this.textFileService.readStream(this.resource,{acceptTextOnly:!n,etag:t,encoding:this.preferredEncoding,limits:null===e||void 0===e?void 0:e.limits});return this.setOrphaned(!1),s!==this.versionId?void this.trace("resolveFromFile() - exit - without resolving because model content changed"):this.resolveFromContent(i,!1,e)}catch(e){let t=e.fileOperationResult;if(this.setOrphaned(t===pp.FILE_NOT_FOUND),this.isResolved()&&t===pp.FILE_NOT_MODIFIED_SINCE)return void(e instanceof _p&&this.updateLastResolvedFileStat(e.stat));if(this.isResolved()&&t===pp.FILE_NOT_FOUND&&!i)return;throw e}}resolveFromContent(e,t,i){var n;if(this.trace("resolveFromContent() - enter"),this.isDisposed())return void this.trace("resolveFromContent() - exit - because model is disposed");this.updateLastResolvedFileStat({resource:this.resource,name:e.name,mtime:e.mtime,ctime:e.ctime,size:e.size,etag:e.etag,readonly:e.readonly,locked:e.locked,isFile:!0,isDirectory:!1,isSymbolicLink:!1,children:void 0});let s=this.contentEncoding;this.contentEncoding=e.encoding,this.preferredEncoding?this.updatePreferredEncoding(this.contentEncoding):s!==this.contentEncoding&&this._onDidChangeEncoding.fire(),this.textEditorModel?this.doUpdateTextModel(e.value,rR.reloadFromDisk()):this.doCreateTextModel(e.resource,e.value),this.setDirty(!!t),this._onDidResolve.fire(null!==(n=null===i||void 0===i?void 0:i.reason)&&void 0!==n?n:rj.OTHER)}doCreateTextModel(e,t){this.trace("doCreateTextModel()");let i=this.createTextEditorModel(t,e,this.preferredLanguageId);this.installModelListeners(i),this.autoDetectLanguage()}doUpdateTextModel(e,t){this.trace("doUpdateTextModel()"),this.ignoreDirtyOnModelContentChange=!0;try{this.updateTextEditorModel(e,this.preferredLanguageId,t)}finally{this.ignoreDirtyOnModelContentChange=!1}}installModelListeners(e){this._register(e.onDidChangeContent(t=>this.onModelContentChanged(e,t.isUndoing||t.isRedoing))),this._register(e.onDidChangeLanguage(()=>this.onMaybeShouldChangeEncoding())),super.installModelListeners(e)}onModelContentChanged(e,t){if(this.trace("onModelContentChanged() - enter"),this.versionId++,this.trace("onModelContentChanged() - new versionId ".concat(this.versionId)),t&&(this.lastModelContentChangeFromUndoRedo=Date.now()),!this.ignoreDirtyOnModelContentChange&&!this.isReadonly())if(e.getAlternativeVersionId()===this.bufferSavedVersionId){this.trace("onModelContentChanged() - model content changed back to last saved version");let e=this.dirty;this.setDirty(!1),e&&this._onDidRevert.fire()}else this.trace("onModelContentChanged() - model content changed and marked as dirty"),this.setDirty(!0);this._onDidChangeContent.fire(),this.autoDetectLanguage()}async autoDetectLanguage(){var e;await(null===(e=this.extensionService)||void 0===e?void 0:e.whenInstalledExtensionsRegistered());let t=this.getLanguageId();if(this.resource.scheme===this.pathService.defaultUriScheme&&(!t||"plaintext"===t)&&!this.resourceHasExtension)return super.autoDetectLanguage()}async forceResolveFromFile(){this.isDisposed()||await this.textFileService.files.resolve(this.resource,{reload:{async:!1},forceReadFromFile:!0})}isDirty(){return this.dirty}isModified(){return this.isDirty()}setDirty(e){if(!this.isResolved())return;let t=this.dirty;this.doSetDirty(e),e!==t&&this._onDidChangeDirty.fire()}doSetDirty(e){let t=this.dirty,i=this.inConflictMode,n=this.inErrorMode,s=this.bufferSavedVersionId;return e?this.dirty=!0:(this.dirty=!1,this.inConflictMode=!1,this.inErrorMode=!1,this.updateSavedVersionId()),()=>{this.dirty=t,this.inConflictMode=i,this.inErrorMode=n,this.bufferSavedVersionId=s}}async save(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.create(null);return!!this.isResolved()&&(this.isReadonly()?(this.trace("save() - ignoring request for readonly resource"),!1):!this.hasState(sj.CONFLICT)&&!this.hasState(sj.ERROR)||e.reason!==cj.AUTO&&e.reason!==cj.FOCUS_CHANGE&&e.reason!==cj.WINDOW_CHANGE?(this.trace("save() - enter"),await this.doSave(e),this.trace("save() - exit"),this.hasState(sj.SAVED)):(this.trace("save() - ignoring auto save request for model that is in conflict or error"),!1))}async doSave(e){"number"!=typeof e.reason&&(e.reason=cj.EXPLICIT);let t=this.versionId;if(this.trace("doSave(".concat(t,") - enter with versionId ").concat(t)),this.ignoreSaveFromSaveParticipants)return void this.trace("doSave(".concat(t,") - exit - refusing to save() recursively from save participant"));if(this.saveSequentializer.isRunning(t))return this.trace("doSave(".concat(t,") - exit - found a running save for versionId ").concat(t)),this.saveSequentializer.running;if(!e.force&&!this.dirty)return void this.trace("doSave(".concat(t,") - exit - because not dirty and/or versionId is different (this.isDirty: ").concat(this.dirty,", this.versionId: ").concat(this.versionId,")"));if(this.saveSequentializer.isRunning())return this.trace("doSave(".concat(t,") - exit - because busy saving")),this.saveSequentializer.cancelRunning(),this.saveSequentializer.queue(()=>this.doSave(e));this.isResolved()&&this.textEditorModel.pushStackElement();let i=new Qo;return this.progressService.withProgress({title:Li(14255,"Saving '{0}'",this.name),location:rY.Window,cancellable:!0,delay:this.isDirty()?3e3:5e3},n=>this.doSaveSequential(t,e,n,i),()=>{i.cancel()}).finally(()=>{i.dispose()})}doSaveSequential(e,t,i,n){return this.saveSequentializer.run(e,(async()=>{if(this.isResolved()&&!t.skipSaveParticipants)try{if(t.reason===cj.AUTO&&"number"==typeof this.lastModelContentChangeFromUndoRedo){let e=Date.now()-this.lastModelContentChangeFromUndoRedo;e<hY.UNDO_REDO_SAVE_PARTICIPANTS_AUTO_SAVE_THROTTLE_THRESHOLD&&await El(hY.UNDO_REDO_SAVE_PARTICIPANTS_AUTO_SAVE_THROTTLE_THRESHOLD-e)}if(!n.token.isCancellationRequested){this.ignoreSaveFromSaveParticipants=!0;try{var s;await this.textFileService.files.runSaveParticipants(this,{reason:null!==(s=t.reason)&&void 0!==s?s:cj.EXPLICIT,savedFrom:t.from},i,n.token)}catch(e){Bi(e)&&!n.token.isCancellationRequested&&n.cancel()}finally{this.ignoreSaveFromSaveParticipants=!1}}}catch(t){this.logService.error("[text file model] runSaveParticipants(".concat(e,") - resulted in an error: ").concat(t.toString()),this.resource.toString())}if(n.token.isCancellationRequested||(n.dispose(),this.isDisposed())||!this.isResolved())return;e=this.versionId,this.inErrorMode=!1,i.report({message:Li(14256,"Writing into file...")}),this.trace("doSave(".concat(e,") - before write()"));let r=an(this.lastResolvedFileStat),o=this;return this.saveSequentializer.run(e,(async()=>{try{let i=await this.textFileService.write(r.resource,o.createSnapshot(),{mtime:r.mtime,encoding:this.getEncoding(),etag:t.ignoreModifiedSince||!this.filesConfigurationService.preventSaveConflicts(r.resource,o.getLanguageId())?"":r.etag,unlock:t.writeUnlock,writeElevated:t.writeElevated});this.handleSaveSuccess(i,e,t)}catch(i){this.handleSaveError(i,e,t)}})())})(),()=>n.cancel())}handleSaveSuccess(e,t,i){this.updateLastResolvedFileStat(e),t===this.versionId?(this.trace("handleSaveSuccess(".concat(t,") - setting dirty to false because versionId did not change")),this.setDirty(!1)):this.trace("handleSaveSuccess(".concat(t,") - not setting dirty to false because versionId did change meanwhile")),this.setOrphaned(!1),this._onDidSave.fire({reason:i.reason,stat:e,source:i.source})}handleSaveError(e,t,i){if((i.ignoreErrorHandler?this.logService.trace:this.logService.error).apply(this.logService,["[text file model] handleSaveError(".concat(t,") - exit - resulted in a save error: ").concat(e.toString()),this.resource.toString()]),i.ignoreErrorHandler)throw e;this.setDirty(!0),this.inErrorMode=!0,e.fileOperationResult===pp.FILE_MODIFIED_SINCE&&(this.inConflictMode=!0),this.textFileService.files.saveErrorHandler.onSaveError(e,this,i),this._onDidSaveError.fire()}updateSavedVersionId(){this.isResolved()&&(this.bufferSavedVersionId=this.textEditorModel.getAlternativeVersionId())}updateLastResolvedFileStat(e){let t=this.isReadonly();this.lastResolvedFileStat?this.lastResolvedFileStat.mtime<=e.mtime?this.lastResolvedFileStat=e:this.lastResolvedFileStat=(0,r.A)((0,r.A)({},this.lastResolvedFileStat),{},{readonly:e.readonly,locked:e.locked}):this.lastResolvedFileStat=e,this.isReadonly()!==t&&this._onDidChangeReadonly.fire()}hasState(e){switch(e){case sj.CONFLICT:return this.inConflictMode;case sj.DIRTY:return this.dirty;case sj.ERROR:return this.inErrorMode;case sj.ORPHAN:return this.inOrphanMode;case sj.PENDING_SAVE:return this.saveSequentializer.isRunning();case sj.SAVED:return!this.dirty}}async joinState(e){return this.saveSequentializer.running}getLanguageId(){return this.textEditorModel?this.textEditorModel.getLanguageId():this.preferredLanguageId}async onMaybeShouldChangeEncoding(){if(this.hasEncodingSetExplicitly)return void this.trace("onMaybeShouldChangeEncoding() - ignoring because encoding was set explicitly");if("utf8bom"===this.contentEncoding||"utf16be"===this.contentEncoding||"utf16le"===this.contentEncoding)return void this.trace("onMaybeShouldChangeEncoding() - ignoring because content encoding has a BOM");let{encoding:e}=await this.textFileService.encoding.getPreferredReadEncoding(this.resource);if("string"==typeof e&&this.isNewEncoding(e)){if(!this.isDirty())return this.logService.info("Adjusting encoding based on configured language override to '".concat(e,"' for ").concat(this.resource.toString(!0),".")),this.forceResolveFromFile();this.trace("onMaybeShouldChangeEncoding() - ignoring because model is dirty")}else this.trace("onMaybeShouldChangeEncoding() - ignoring because preferred encoding ".concat(e," is not new"))}setEncoding(e,t){return this.hasEncodingSetExplicitly=!0,this.setEncodingInternal(e,t)}async setEncodingInternal(e,t){if(t===oj.Encode)this.updatePreferredEncoding(e),this.isDirty()||(this.versionId++,this.setDirty(!0)),this.inConflictMode||await this.save({source:hY.TEXTFILE_SAVE_ENCODING_SOURCE});else{if(!this.isNewEncoding(e))return;if(this.isDirty())throw Error("Cannot re-open a dirty text document with different encoding. Save it first.");this.updatePreferredEncoding(e),await this.forceResolveFromFile()}}updatePreferredEncoding(e){this.isNewEncoding(e)&&(this.preferredEncoding=e,this._onDidChangeEncoding.fire())}isNewEncoding(e){return!(this.preferredEncoding===e||!this.preferredEncoding&&this.contentEncoding===e)}getEncoding(){return this.preferredEncoding||this.contentEncoding}trace(e){this.logService.trace("[text file model] ".concat(e),this.resource.toString())}isResolved(){return!!this.textEditorModel}isReadonly(){return this.filesConfigurationService.isReadonly(this.resource,this.lastResolvedFileStat)}dispose(){this.trace("dispose()"),this.inConflictMode=!1,this.inOrphanMode=!1,this.inErrorMode=!1,super.dispose()}},{_:hY=mi},{_:mi.TEXTFILE_SAVE_ENCODING_SOURCE=_j.registerSource("textFileEncoding.source",Li(14254,"File Encoding Changed"))},{_:mi.UNDO_REDO_SAVE_PARTICIPANTS_AUTO_SAVE_THROTTLE_THRESHOLD=500},mi);dY=hY=ki([Ei(3,Pw),Ei(4,LI),Ei(5,Ap),Ei(6,nj),Ei(7,Pj),Ei(8,Np),Ei(9,Bj),Ei(10,oY),Ei(11,rx),Ei(12,Oj),Ei(13,uD),Ei(14,aY),Ei(15,_n),Ei(16,hx)],dY);var cY=class extends Co{constructor(e,t){super(),this.logService=e,this.progressService=t,this.saveParticipants=new Eo}addSaveParticipant(e){let t=this.saveParticipants.push(e);return vo(()=>t())}async participate(e,t,i,n){var s,r;let o=new Qo(n);null!==(s=e.textEditorModel)&&void 0!==s&&s.pushStackElement(),i.report({message:Li(14258,"Running Code Actions and Formatters...")});let a=!1;if(await this.progressService.withProgress({priority:ex.URGENT,location:rY.Notification,cancellable:Li(14259,"Skip"),delay:e.isDirty()?5e3:3e3},async i=>{let n=Array.from(this.saveParticipants).sort((e,t)=>{var i,n;return(null!==(i=e.ordinal)&&void 0!==i?i:0)-(null!==(n=t.ordinal)&&void 0!==n?n:0)});for(let s of n){if(o.token.isCancellationRequested||!e.textEditorModel)break;try{await Cl(s.participate(e,t,i,o.token),o.token)}catch(e){Bi(e)?o.token.isCancellationRequested||(o.cancel(),a=!0):this.logService.error(e)}}},()=>{o.cancel()}),null!==(r=e.textEditorModel)&&void 0!==r&&r.pushStackElement(),o.dispose(),a)throw new Ui}dispose(){this.saveParticipants.clear(),super.dispose()}};cY=ki([Ei(0,Np),Ei(1,hx)],cY);var uY=fn("workingCopyFileService"),gY=class extends Co{get models(){return[...this.mapResourceToModel.values()]}constructor(e,t,i,n,s){super(),this.instantiationService=e,this.fileService=t,this.notificationService=i,this.workingCopyFileService=n,this.uriIdentityService=s,this._onDidCreate=this._register(new Ro({leakWarningThreshold:500})),this.onDidCreate=this._onDidCreate.event,this._onDidResolve=this._register(new Ro),this.onDidResolve=this._onDidResolve.event,this._onDidRemove=this._register(new Ro),this.onDidRemove=this._onDidRemove.event,this._onDidChangeDirty=this._register(new Ro),this.onDidChangeDirty=this._onDidChangeDirty.event,this._onDidChangeReadonly=this._register(new Ro),this.onDidChangeReadonly=this._onDidChangeReadonly.event,this._onDidChangeOrphaned=this._register(new Ro),this.onDidChangeOrphaned=this._onDidChangeOrphaned.event,this._onDidSaveError=this._register(new Ro),this.onDidSaveError=this._onDidSaveError.event,this._onDidSave=this._register(new Ro),this.onDidSave=this._onDidSave.event,this._onDidRevert=this._register(new Ro),this.onDidRevert=this._onDidRevert.event,this._onDidChangeEncoding=this._register(new Ro),this.onDidChangeEncoding=this._onDidChangeEncoding.event,this.mapResourceToModel=new so,this.mapResourceToModelListeners=new so,this.mapResourceToDisposeListener=new so,this.mapResourceToPendingModelResolvers=new so,this.modelResolveQueue=this._register(new Al),this.saveErrorHandler=(()=>{let e=this.notificationService;return{onSaveError(t,i){e.error(Li(14257,"Failed to save '{0}': {1}",i.name,lk(t,!1)))}}})(),this.mapCorrelationIdToModelsToRestore=new Map,this.saveParticipants=this._register(this.instantiationService.createInstance(cY)),this.registerListeners()}registerListeners(){this._register(this.fileService.onDidFilesChange(e=>this.onDidFilesChange(e))),this._register(this.fileService.onDidChangeFileSystemProviderCapabilities(e=>this.onDidChangeFileSystemProviderCapabilities(e))),this._register(this.fileService.onDidChangeFileSystemProviderRegistrations(e=>this.onDidChangeFileSystemProviderRegistrations(e))),this._register(this.workingCopyFileService.onWillRunWorkingCopyFileOperation(e=>this.onWillRunWorkingCopyFileOperation(e))),this._register(this.workingCopyFileService.onDidFailWorkingCopyFileOperation(e=>this.onDidFailWorkingCopyFileOperation(e))),this._register(this.workingCopyFileService.onDidRunWorkingCopyFileOperation(e=>this.onDidRunWorkingCopyFileOperation(e)))}onDidFilesChange(e){for(let t of this.models)t.isDirty()||e.contains(t.resource,up.UPDATED,up.ADDED)&&this.queueModelReload(t)}onDidChangeFileSystemProviderCapabilities(e){this.queueModelReloads(e.scheme)}onDidChangeFileSystemProviderRegistrations(e){e.added&&this.queueModelReloads(e.scheme)}queueModelReloads(e){for(let t of this.models)t.isDirty()||e===t.resource.scheme&&this.queueModelReload(t)}queueModelReload(e){this.modelResolveQueue.queueSize(e.resource)<=1&&this.modelResolveQueue.queueFor(e.resource,async()=>{try{await this.reload(e)}catch(e){Ri(e)}})}onWillRunWorkingCopyFileOperation(e){if(e.operation===op.MOVE||e.operation===op.COPY){let t=[];for(let{source:i,target:n}of e.files)if(i){if(this.uriIdentityService.extUri.isEqual(i,n))continue;let e=[];for(let t of this.models)this.uriIdentityService.extUri.isEqualOrParent(t.resource,i)&&e.push(t);for(let s of e){let e,r=s.resource;e=this.uriIdentityService.extUri.isEqual(r,i)?n:hl(n,r.path.substr(i.path.length+1));let o=s.getLanguageId();t.push({source:r,target:e,language:o?{id:o,explicit:"user"===s.languageChangeSource}:void 0,encoding:s.getEncoding(),snapshot:s.isDirty()?s.createSnapshot():void 0})}}this.mapCorrelationIdToModelsToRestore.set(e.correlationId,t)}}onDidFailWorkingCopyFileOperation(e){if(e.operation===op.MOVE||e.operation===op.COPY){let t=this.mapCorrelationIdToModelsToRestore.get(e.correlationId);t&&(this.mapCorrelationIdToModelsToRestore.delete(e.correlationId),t.forEach(e=>{var t;e.snapshot&&(null===(t=this.get(e.source))||void 0===t||t.setDirty(!0))}))}}onDidRunWorkingCopyFileOperation(e){switch(e.operation){case op.CREATE:e.waitUntil((async()=>{for(let{target:t}of e.files){let e=this.get(t);e&&!e.isDisposed()&&await e.revert()}})());break;case op.MOVE:case op.COPY:e.waitUntil((async()=>{let t=this.mapCorrelationIdToModelsToRestore.get(e.correlationId);t&&(this.mapCorrelationIdToModelsToRestore.delete(e.correlationId),await Hl.settled(t.map(async e=>{var t;let i=this.uriIdentityService.asCanonicalUri(e.target),n=await this.resolve(i,{reload:{async:!1},contents:e.snapshot?XB(e.snapshot):void 0,encoding:e.encoding});(null===(t=e.language)||void 0===t?void 0:t.id)&&"plaintext"!==e.language.id&&(e.language.explicit?n.setLanguageId(e.language.id):"plaintext"===n.getLanguageId()&&".txt"!==al(i)&&n.updateTextEditorModel(void 0,e.language.id))})))})())}}get(e){return this.mapResourceToModel.get(e)}has(e){return this.mapResourceToModel.has(e)}async reload(e){await this.joinPendingResolves(e.resource),!e.isDirty()&&!e.isDisposed()&&this.has(e.resource)&&await this.doResolve(e,{reload:{async:!1}})}async resolve(e,t){let i=this.joinPendingResolves(e);return i&&await i,this.doResolve(e,t)}async doResolve(e,t){let i,n;Gs.isUri(e)?(n=e,i=this.get(n)):(n=e.resource,i=e);let s,r=!1;if(i)null!==t&&void 0!==t&&t.contents?s=i.resolve(t):null!==t&&void 0!==t&&t.reload?t.reload.async?(s=Promise.resolve(),(async()=>{try{await i.resolve(t)}catch(e){i.isDisposed()||Ri(e)}})()):s=i.resolve(t):s=Promise.resolve();else{r=!0;let e=i=this.instantiationService.createInstance(dY,n,t?t.encoding:void 0,t?t.languageId:void 0);s=i.resolve(t),this.registerModel(e)}this.mapResourceToPendingModelResolvers.set(n,s),this.add(n,i),r&&(this._onDidCreate.fire(i),i.isDirty()&&this._onDidChangeDirty.fire(i));try{await s}catch(e){throw r&&i.dispose(),e}finally{this.mapResourceToPendingModelResolvers.delete(n)}return null!==t&&void 0!==t&&t.languageId&&i.setLanguageId(t.languageId),r&&i.isDirty()&&this._onDidChangeDirty.fire(i),i}joinPendingResolves(e){if(this.mapResourceToPendingModelResolvers.get(e))return this.doJoinPendingResolves(e)}async doJoinPendingResolves(e){let t;for(;this.mapResourceToPendingModelResolvers.has(e);){let n=this.mapResourceToPendingModelResolvers.get(e);if(n===t)return;t=n;try{await n}catch(i){}}}registerModel(e){let t=new bo;t.add(e.onDidResolve(t=>this._onDidResolve.fire({model:e,reason:t}))),t.add(e.onDidChangeDirty(()=>this._onDidChangeDirty.fire(e))),t.add(e.onDidChangeReadonly(()=>this._onDidChangeReadonly.fire(e))),t.add(e.onDidChangeOrphaned(()=>this._onDidChangeOrphaned.fire(e))),t.add(e.onDidSaveError(()=>this._onDidSaveError.fire(e))),t.add(e.onDidSave(t=>this._onDidSave.fire((0,r.A)({model:e},t)))),t.add(e.onDidRevert(()=>this._onDidRevert.fire(e))),t.add(e.onDidChangeEncoding(()=>this._onDidChangeEncoding.fire(e))),this.mapResourceToModelListeners.set(e.resource,t)}add(e,t){var i;this.mapResourceToModel.get(e)!==t&&(null!==(i=this.mapResourceToDisposeListener.get(e))&&void 0!==i&&i.dispose(),this.mapResourceToModel.set(e,t),this.mapResourceToDisposeListener.set(e,t.onWillDispose(()=>this.remove(e))))}remove(e){let t=this.mapResourceToModel.delete(e),i=this.mapResourceToDisposeListener.get(e);i&&(po(i),this.mapResourceToDisposeListener.delete(e));let n=this.mapResourceToModelListeners.get(e);n&&(po(n),this.mapResourceToModelListeners.delete(e)),t&&this._onDidRemove.fire(e)}addSaveParticipant(e){return this.saveParticipants.addSaveParticipant(e)}runSaveParticipants(e,t,i,n){return this.saveParticipants.participate(e,t,i,n)}canDispose(e){return!(!e.isDisposed()&&(this.mapResourceToPendingModelResolvers.has(e.resource)||e.isDirty()))||this.doCanDispose(e)}async doCanDispose(e){let t=this.joinPendingResolves(e.resource);return t?(await t,this.canDispose(e)):!e.isDirty()||(await _o.toPromise(e.onDidChangeDirty),this.canDispose(e))}dispose(){super.dispose(),this.mapResourceToModel.clear(),this.mapResourceToPendingModelResolvers.clear(),po(this.mapResourceToDisposeListener.values()),this.mapResourceToDisposeListener.clear(),po(this.mapResourceToModelListeners.values()),this.mapResourceToModelListeners.clear()}};gY=ki([Ei(0,pn),Ei(1,Ap),Ei(2,BS),Ei(3,uY),Ei(4,Pp)],gY);var pY,fY=fn("elevatedFileService"),mY=fn("IFileDecorationsService"),vY=(vi=class extends Co{constructor(e,t,i,n,s,r,o,a,l,h,d,c,u,g,p,f,m,v){super(),this.fileService=e,this.lifecycleService=i,this.instantiationService=n,this.modelService=s,this.environmentService=r,this.dialogService=o,this.fileDialogService=a,this.textResourceConfigurationService=l,this.filesConfigurationService=h,this.codeEditorService=d,this.pathService=c,this.workingCopyFileService=u,this.uriIdentityService=g,this.languageService=p,this.logService=f,this.elevatedFileService=m,this.decorationsService=v,this.files=this._register(this.instantiationService.createInstance(gY)),this.untitled=t,this.provideDecorations()}provideDecorations(){let e=this._register(new class extends Co{constructor(e){super(),this.files=e,this.label=Li(14243,"Text File Model Decorations"),this._onDidChange=this._register(new Ro),this.onDidChange=this._onDidChange.event,this.registerListeners()}registerListeners(){this._register(this.files.onDidResolve(e=>{let{model:t}=e;(t.isReadonly()||t.hasState(sj.ORPHAN))&&this._onDidChange.fire([t.resource])})),this._register(this.files.onDidRemove(e=>this._onDidChange.fire([e]))),this._register(this.files.onDidChangeReadonly(e=>this._onDidChange.fire([e.resource]))),this._register(this.files.onDidChangeOrphaned(e=>this._onDidChange.fire([e.resource])))}provideDecorations(e){let t=this.files.get(e);if(!t||t.isDisposed())return;let i=t.isReadonly(),n=t.hasState(sj.ORPHAN);return i&&n?{color:Dc,letter:su.lockSmall,strikethrough:!0,tooltip:Li(14244,"Deleted, Read-only")}:i?{letter:su.lockSmall,tooltip:Li(14245,"Read-only")}:n?{color:Dc,strikethrough:!0,tooltip:Li(14246,"Deleted")}:void 0}}(this.files));this._register(this.decorationsService.registerDecorationsProvider(e))}get encoding(){return this._encoding||(this._encoding=this._register(this.instantiationService.createInstance(_Y))),this._encoding}async read(e,t){let[i,n]=await this.doRead(e,(0,r.A)((0,r.A)({},t),{},{preferUnbuffered:!0}));return(0,r.A)((0,r.A)({},i),{},{encoding:n.detected.encoding||"utf8",value:await ag(n.stream,e=>e.join(""))})}async readStream(e,t){let[i,n]=await this.doRead(e,t);return(0,r.A)((0,r.A)({},i),{},{encoding:n.detected.encoding||"utf8",value:await $B(n.stream)})}async doRead(e,t){let i,n=new Qo;if(null!==t&&void 0!==t&&t.preferUnbuffered){let s=await this.fileService.readFile(e,t,n.token);i=(0,r.A)((0,r.A)({},s),{},{value:wg(s.value)})}else i=await this.fileService.readFileStream(e,t,n.token);try{return[i,await this.doGetDecodedStream(e,i.value,t)]}catch(e){throw n.dispose(!0),e.decodeStreamErrorKind===Uj.STREAM_IS_BINARY?new aj(Li(14247,"File seems to be binary and cannot be opened as text"),ij.FILE_IS_BINARY,t):e}}async create(e,t){let i=await Promise.all(e.map(async e=>{var t;let i=await this.getEncodedReadable(e.resource,e.value);return{resource:e.resource,contents:i,overwrite:null===(t=e.options)||void 0===t?void 0:t.overwrite}}));return this.workingCopyFileService.create(i,Go.None,t)}async write(e,t,i){let n=await this.getEncodedReadable(e,t,i);return null!==i&&void 0!==i&&i.writeElevated&&this.elevatedFileService.isSupported(e)?this.elevatedFileService.writeFileElevated(e,n,i):this.fileService.writeFile(e,n,i)}async getEncodedReadable(e,t,n){let{encoding:s,addBOM:r}=await this.encoding.getWriteEncoding(e,n);return"utf8"!==s||r?(t||(t=""),async function(e,t,n){let s=(await i.e(4790).then(i.bind(i,4790)).then((0,l.o)()).then(e=>{var t;return null!==(t=e.default)&&void 0!==t?t:e})).getEncoder(Xj(t),n),r=!1,o=!1;return{read(){if(o)return null;let i=e.read();if("string"!=typeof i){if(o=!0,!r&&null!==n&&void 0!==n&&n.addBOM)switch(t){case Wj:case Vj:return gg.wrap(Uint8Array.from(jj));case zj:return gg.wrap(Uint8Array.from(qj));case Kj:return gg.wrap(Uint8Array.from(Gj))}let e=s.end();return e&&e.length>0?(r=!0,gg.wrap(e)):null}return r=!0,gg.wrap(s.write(i))}}}("string"==typeof t?function(e){let t=!1;return{read:()=>t?null:(t=!0,e)}}(t):t,s,{addBOM:r})):void 0===t?void 0:function(e){if(void 0!==e)return"string"==typeof e?gg.fromString(e):{read:()=>{let t=e.read();return"string"==typeof t?gg.fromString(t):null}}}(t)}async getDecodedStream(e,t,i){return(await this.doGetDecodedStream(e,t,i)).stream}doGetDecodedStream(e,t,i){var n;return $j(t,{acceptTextOnly:null!==(n=null===i||void 0===i?void 0:i.acceptTextOnly)&&void 0!==n&&n,guessEncoding:(null===i||void 0===i?void 0:i.autoGuessEncoding)||this.textResourceConfigurationService.getValue(e,"files.autoGuessEncoding"),candidateGuessEncodings:(null===i||void 0===i?void 0:i.candidateGuessEncodings)||this.textResourceConfigurationService.getValue(e,"files.candidateGuessEncodings"),overwriteEncoding:async t=>this.validateDetectedEncoding(e,null!==t&&void 0!==t?t:void 0,i)})}getEncoding(e){var t,i;return null!==(t=null===(i=e.scheme===Ha.untitled?this.untitled.get(e):this.files.get(e))||void 0===i?void 0:i.getEncoding())&&void 0!==t?t:this.encoding.getUnvalidatedEncodingForResource(e)}async resolveDecoding(e,t){return{preferredEncoding:(await this.encoding.getPreferredReadEncoding(e,t,void 0)).encoding,guessEncoding:(null===t||void 0===t?void 0:t.autoGuessEncoding)||this.textResourceConfigurationService.getValue(e,"files.autoGuessEncoding"),candidateGuessEncodings:(null===t||void 0===t?void 0:t.candidateGuessEncodings)||this.textResourceConfigurationService.getValue(e,"files.candidateGuessEncodings")}}async validateDetectedEncoding(e,t,i){let{encoding:n}=await this.encoding.getPreferredReadEncoding(e,i,t);return n}resolveEncoding(e,t){return this.encoding.getWriteEncoding(e,t)}async save(e,t){if(e.scheme===Ha.untitled){let i=this.untitled.get(e);if(i){let n;if(n=i.hasAssociatedFilePath?await this.suggestSavePath(e):await this.fileDialogService.pickFileToSave(await this.suggestSavePath(e),null===t||void 0===t?void 0:t.availableFileSystems),n)return this.saveAs(e,n,t)}}else{let i=this.files.get(e);if(i)return await i.save(t)?e:void 0}}async saveAs(e,t,i){var n;if(t||(t=await this.fileDialogService.pickFileToSave(await this.suggestSavePath(null!==(n=null===i||void 0===i?void 0:i.suggestedTarget)&&void 0!==n?n:e),null===i||void 0===i?void 0:i.availableFileSystems)),t){if(this.filesConfigurationService.isReadonly(t)){if(!await this.confirmMakeWriteable(t))return;this.filesConfigurationService.updateReadonly(t,!1)}return nl(e,t)?this.save(e,(0,r.A)((0,r.A)({},i),{},{force:!0})):this.fileService.hasProvider(e)&&this.uriIdentityService.extUri.isEqual(e,t)&&await this.fileService.exists(e)?(await this.workingCopyFileService.move([{file:{source:e,target:t}}],Go.None),await this.save(e,i)||await this.save(t,i),t):this.doSaveAs(e,t,i)}}async doSaveAs(e,t,i){let n,s=!1;if(e.scheme!==Ha.untitled){let t=this.files.get(e);(null===t||void 0===t?void 0:t.isResolved())&&(n=t)}else{let t=this.untitled.get(e);(null===t||void 0===t?void 0:t.isResolved())&&(n=t)}if(n)s=await this.doSaveAsTextFile(n,e,t,i);else if(this.fileService.hasProvider(e))await this.fileService.copy(e,t,!0),s=!0;else{let n=this.modelService.getModel(e);n&&(s=await this.doSaveAsTextFile(n,e,t,i))}if(s){try{await this.revert(e)}catch(e){this.logService.error(e)}return e.scheme===Ha.untitled&&this.untitled.notifyDidSave(e,t),t}}async doSaveAsTextFile(e,t,i,n){var s,o,a;let l,h=e;"function"==typeof h.getEncoding&&(l=h.getEncoding());let d,c,u,g=!1,p=this.files.get(i);if(null!==(s=p)&&void 0!==s&&s.isResolved())g=!0;else{g=await this.fileService.exists(i),g||await this.create([{resource:i,value:""}]);try{p=await this.files.resolve(i,{encoding:l})}catch(l){if(g&&(l.textFileOperationResult===ij.FILE_IS_BINARY||l.fileOperationResult===pp.FILE_TOO_LARGE))return await this.fileService.del(i),this.doSaveAsTextFile(e,t,i,n);throw l}}if(d=!(e instanceof sY&&e.hasAssociatedFilePath&&g&&this.uriIdentityService.extUri.isEqual(i,ml(e.resource,this.environmentService.remoteAuthority,this.pathService.defaultUriScheme)))||await this.confirmOverwrite(i),!d)return!1;if(e instanceof Rj?e.isResolved()&&(c=null!==(o=e.textEditorModel)&&void 0!==o?o:void 0):c=e,p.isResolved()&&(u=p.textEditorModel),c&&u){p.updatePreferredEncoding(l),this.modelService.updateModel(u,XB(c.createSnapshot()));let e=c.getLanguageId(),t=u.getLanguageId();"plaintext"!==e&&"plaintext"===t&&u.setLanguage(e);let i=this.codeEditorService.getTransientModelProperties(c);if(i)for(let[n,s]of i)this.codeEditorService.setTransientModelProperty(u,n,s)}return null!==(a=n)&&void 0!==a&&a.source||(n=(0,r.A)((0,r.A)({},n),{},{source:g?pY.TEXTFILE_SAVE_REPLACE_SOURCE:pY.TEXTFILE_SAVE_CREATE_SOURCE})),p.save((0,r.A)((0,r.A)({},n),{},{from:t}))}async confirmOverwrite(e){let{confirmed:t}=await this.dialogService.confirm({type:"warning",message:Li(14248,"'{0}' already exists. Do you want to replace it?",ol(e)),detail:Li(14249,"A file or folder with the name '{0}' already exists in the folder '{1}'. Replacing it will overwrite its current contents.",ol(e),ol(ll(e))),primaryButton:Li(14250,"&&Replace")});return t}async confirmMakeWriteable(e){let{confirmed:t}=await this.dialogService.confirm({type:"warning",message:Li(14251,"'{0}' is marked as read-only. Do you want to save anyway?",ol(e)),detail:Li(14252,"Paths can be configured as read-only via settings."),primaryButton:Li(14253,"&&Save Anyway")});return t}async suggestSavePath(e){if(this.fileService.hasProvider(e))return e;let t,i=this.environmentService.remoteAuthority,n=await this.fileDialogService.defaultFilePath();if(e.scheme===Ha.untitled){let s=this.untitled.get(e);if(s){if(s.hasAssociatedFilePath)return ml(e,i,this.pathService.defaultUriScheme);let r;r=await this.pathService.hasValidBasename(hl(n,s.name),s.name)?s.name:ol(e);let o=s.getLanguageId();t=o&&"plaintext"!==o?this.suggestFilename(o,r):r}}return t||(t=ol(e)),hl(n,t)}suggestFilename(e,t){var i;if(!this.languageService.getLanguageName(e))return t;let n=Bs(t),s=this.languageService.getExtensions(e);if(s.includes(n))return t;let r=s.at(0);if(r)return n?"".concat(t.substring(0,t.indexOf(n))).concat(r):"".concat(t).concat(r);let o=this.languageService.getFilenames(e);return o.includes(t)?t:null!==(i=o.at(0))&&void 0!==i?i:t}async revert(e,t){if(e.scheme===Ha.untitled){let i=this.untitled.get(e);if(i)return i.revert(t)}else{let i=this.files.get(e);if(i&&(i.isDirty()||null!==t&&void 0!==t&&t.force))return i.revert(t)}}isDirty(e){let t=e.scheme===Ha.untitled?this.untitled.get(e):this.files.get(e);return!!t&&t.isDirty()}},{_:pY=vi},{_:vi.TEXTFILE_SAVE_CREATE_SOURCE=_j.registerSource("textFileCreate.source",Li(14241,"File Created"))},{_:vi.TEXTFILE_SAVE_REPLACE_SOURCE=_j.registerSource("textFileOverwrite.source",Li(14242,"File Replaced"))},vi);vY=pY=ki([Ei(0,Ap),Ei(1,Nj),Ei(2,Lj),Ei(3,pn),Ei(4,LI),Ei(5,Aj),Ei(6,MS),Ei(7,PS),Ei(8,NI),Ei(9,oY),Ei(10,LS),Ei(11,aY),Ei(12,uY),Ei(13,Pp),Ei(14,Pw),Ei(15,Np),Ei(16,fY),Ei(17,mY)],vY);var _Y=class extends Co{get encodingOverrides(){return this._encodingOverrides}set encodingOverrides(e){this._encodingOverrides=e}constructor(e,t,i,n){super(),this.textResourceConfigurationService=e,this.environmentService=t,this.contextService=i,this.uriIdentityService=n,this._encodingOverrides=this.getDefaultEncodingOverrides(),this.registerListeners()}registerListeners(){this._register(this.contextService.onDidChangeWorkspaceFolders(()=>this.encodingOverrides=this.getDefaultEncodingOverrides()))}getDefaultEncodingOverrides(){let e=[];return e.push({parent:this.environmentService.userRoamingDataHome,encoding:Wj}),e.push({extension:Rp,encoding:Wj}),e.push({parent:this.environmentService.untitledWorkspacesHome,encoding:Wj}),this.contextService.getWorkspace().folders.forEach(t=>{e.push({parent:hl(t.uri,".vscode"),encoding:Wj})}),e}async getWriteEncoding(e,t){let{encoding:i,hasBOM:n}=await this.getPreferredWriteEncoding(e,t?t.encoding:void 0);return{encoding:i,addBOM:n}}async getPreferredWriteEncoding(e,t){let i=await this.getValidatedEncodingForResource(e,t);return{encoding:i,hasBOM:"utf16be"===i||"utf16le"===i||"utf8bom"===i}}async getPreferredReadEncoding(e,t,i){let n;null!==t&&void 0!==t&&t.encoding?n="utf8bom"===i&&"utf8"===t.encoding?Vj:t.encoding:"string"==typeof i?n=i:"utf8bom"===this.textResourceConfigurationService.getValue(e,"files.encoding")&&(n=Wj);let s=await this.getValidatedEncodingForResource(e,n);return{encoding:s,hasBOM:"utf16be"===s||"utf16le"===s||"utf8bom"===s}}getUnvalidatedEncodingForResource(e,t){let i;return i=this.getEncodingOverride(e)||t||this.textResourceConfigurationService.getValue(e,"files.encoding"),i||"utf8"}async getValidatedEncodingForResource(e,t){let n=this.getUnvalidatedEncodingForResource(e,t);return"utf8"!==n&&!await async function(e){return(await i.e(4790).then(i.bind(i,4790)).then((0,l.o)()).then(e=>{var t;return null!==(t=e.default)&&void 0!==t?t:e})).encodingExists(Xj(e))}(n)&&(n=Wj),n}getEncodingOverride(e){var t;if(e&&null!==(t=this.encodingOverrides)&&void 0!==t&&t.length)for(let i of this.encodingOverrides)if(i.parent&&this.uriIdentityService.extUri.isEqualOrParent(e,i.parent)||i.extension&&al(e)===".".concat(i.extension))return i.encoding}};_Y=ki([Ei(0,NI),Ei(1,Aj),Ei(2,Cx),Ei(3,Pp)],_Y);var bY=class extends vY{constructor(e,t,i,n,s,r,o,a,l,h,d,c,u,g,p,f,m,v){super(e,t,i,n,s,r,o,a,l,h,d,c,u,g,p,m,f,v),this.registerListeners()}registerListeners(){this._register(this.lifecycleService.onBeforeShutdown(e=>e.veto(this.onBeforeShutdown(),"veto.textFiles")))}onBeforeShutdown(){return!!this.files.models.some(e=>e.hasState(sj.PENDING_SAVE))}};bY=ki([Ei(0,Ap),Ei(1,Nj),Ei(2,Lj),Ei(3,pn),Ei(4,LI),Ei(5,Aj),Ei(6,MS),Ei(7,PS),Ei(8,NI),Ei(9,oY),Ei(10,LS),Ei(11,aY),Ei(12,uY),Ei(13,Pp),Ei(14,Pw),Ei(15,fY),Ei(16,Np),Ei(17,mY)],bY);var CY,yY=(_i=class extends Co{constructor(e,t,i,n){super(),this.getExpression=e,this.shouldUpdate=t,this.contextService=i,this.configurationService=n,this._onExpressionChange=this._register(new Ro),this.onExpressionChange=this._onExpressionChange.event,this.mapFolderToParsedExpression=new Map,this.mapFolderToConfiguredExpression=new Map,this.updateExpressions(!1),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{this.shouldUpdate(e)&&this.updateExpressions(!0)})),this._register(this.contextService.onDidChangeWorkspaceFolders(()=>this.updateExpressions(!0)))}updateExpressions(e){let t=!1;for(let r of this.contextService.getWorkspace().folders){let e=r.uri.toString(),i=this.doGetExpression(r.uri),n=this.mapFolderToConfiguredExpression.get(e);i?(!n||!dS(n.expression,i.expression))&&(t=!0,this.mapFolderToParsedExpression.set(e,Wx(i.expression)),this.mapFolderToConfiguredExpression.set(e,i)):n&&(t=!0,this.mapFolderToParsedExpression.delete(e),this.mapFolderToConfiguredExpression.delete(e))}let i=new ro(this.contextService.getWorkspace().folders.map(e=>e.uri));for(let[r]of this.mapFolderToConfiguredExpression)r!==CY.NO_FOLDER&&(i.has(Gs.parse(r))||(this.mapFolderToParsedExpression.delete(r),this.mapFolderToConfiguredExpression.delete(r),t=!0));let n=this.doGetExpression(void 0),s=this.mapFolderToConfiguredExpression.get(CY.NO_FOLDER);n?(!s||!dS(s.expression,n.expression))&&(t=!0,this.mapFolderToParsedExpression.set(CY.NO_FOLDER,Wx(n.expression)),this.mapFolderToConfiguredExpression.set(CY.NO_FOLDER,n)):s&&(t=!0,this.mapFolderToParsedExpression.delete(CY.NO_FOLDER),this.mapFolderToConfiguredExpression.delete(CY.NO_FOLDER)),e&&t&&this._onExpressionChange.fire()}doGetExpression(e){let t=this.getExpression(e);if(!t)return;let i=Object.keys(t);if(0===i.length)return;let n=!1,s=Object.create(null);for(let r of i){n||(n=Ns(r));let e=r,i=ja(e,!0);if(i){let t=i.toLowerCase();i!==i.toLowerCase()&&(e="".concat(t).concat(e.substring(1)))}s[e]=t[r]}return{expression:s,hasAbsolutePath:n}}matches(e,t){var i;if(0===this.mapFolderToParsedExpression.size)return!1;let n,s,r,o=this.contextService.getWorkspaceFolder(e);return o&&this.mapFolderToParsedExpression.has(o.uri.toString())?(n=this.mapFolderToParsedExpression.get(o.uri.toString()),s=this.mapFolderToConfiguredExpression.get(o.uri.toString())):(n=this.mapFolderToParsedExpression.get(CY.NO_FOLDER),s=this.mapFolderToConfiguredExpression.get(CY.NO_FOLDER)),!!n&&(r=o?cl(o.uri,e):this.uriToPath(e),!("string"!=typeof r||!n(r,void 0,t))||!(r===this.uriToPath(e)||null===(i=s)||void 0===i||!i.hasAbsolutePath)&&!!n(this.uriToPath(e),void 0,t))}uriToPath(e){return e.scheme===Ha.file?e.fsPath:e.path}},{_:CY=_i},{_:_i.NO_FOLDER=null},_i);yY=CY=ki([Ei(2,Cx),Ei(3,fr)],yY);var wY,SY,kY,EY=class extends wj{constructor(){super(...arguments),this._onDidChangeDirty=this._register(new Ro),this._onDidChangeLabel=this._register(new Ro),this._onDidChangeCapabilities=this._register(new Ro),this._onWillDispose=this._register(new Ro),this.onDidChangeDirty=this._onDidChangeDirty.event,this.onDidChangeLabel=this._onDidChangeLabel.event,this.onDidChangeCapabilities=this._onDidChangeCapabilities.event,this.onWillDispose=this._onWillDispose.event}get editorId(){}get capabilities(){return vj.Readonly}hasCapability(e){return e===vj.None?this.capabilities===vj.None:0!==(this.capabilities&e)}isReadonly(){return this.hasCapability(vj.Readonly)}getName(){return"Editor ".concat(this.typeId)}getDescription(e){}getTitle(e){return this.getName()}getLabelExtraClasses(){return[]}getAriaLabel(){return this.getTitle(dj.SHORT)}getIcon(){}getTelemetryDescriptor(){return{typeId:this.typeId}}isDirty(){return!1}isModified(){return this.isDirty()}isSaving(){return!1}async resolve(){return null}async save(e,t){return this}async saveAs(e,t){return this}async revert(e,t){}async rename(e,t){}copy(){return this}canMove(e,t){return!0}matches(e){var t;if(Sj(e))return this===e;let i=null===(t=e.options)||void 0===t?void 0:t.override;return(this.editorId===i||void 0===i||void 0===this.editorId)&&nl(this.resource,Tj.getCanonicalUri(e))}prefersEditorPane(e){return e.at(0)}toUntyped(e){}isDisposed(){return this._store.isDisposed}dispose(){this.isDisposed()||this._onWillDispose.fire(),super.dispose()}},DY=new jk("autoSaveAfterShortDelayContext",!1,!0);!function(e){e[e.OFF=0]="OFF",e[e.AFTER_SHORT_DELAY=1]="AFTER_SHORT_DELAY",e[e.AFTER_LONG_DELAY=2]="AFTER_LONG_DELAY",e[e.ON_FOCUS_CHANGE=3]="ON_FOCUS_CHANGE",e[e.ON_WINDOW_CHANGE=4]="ON_WINDOW_CHANGE"}(SY||(SY={})),function(e){e[e.SETTINGS=1]="SETTINGS",e[e.OUT_OF_WORKSPACE=2]="OUT_OF_WORKSPACE",e[e.ERRORS=3]="ERRORS",e[e.DISABLED=4]="DISABLED"}(kY||(kY={}));var TY=(bi=class extends Co{constructor(e,t,i,n,s,r,o,a){var l,h;super(),this.configurationService=t,this.contextService=i,this.environmentService=n,this.uriIdentityService=s,this.fileService=r,this.markerService=o,this.textResourceConfigurationService=a,this._onDidChangeAutoSaveConfiguration=this._register(new Ro),this.onDidChangeAutoSaveConfiguration=this._onDidChangeAutoSaveConfiguration.event,this._onDidChangeAutoSaveDisabled=this._register(new Ro),this.onDidChangeAutoSaveDisabled=this._onDidChangeAutoSaveDisabled.event,this._onDidChangeFilesAssociation=this._register(new Ro),this.onDidChangeFilesAssociation=this._onDidChangeFilesAssociation.event,this._onDidChangeReadonly=this._register(new Ro),this.onDidChangeReadonly=this._onDidChangeReadonly.event,this.autoSaveConfigurationCache=new ho(1e3),this.autoSaveAfterShortDelayOverrides=new so,this.autoSaveDisabledOverrides=new so,this.readonlyIncludeMatcher=this._register(new Bl(()=>this.createReadonlyMatcher(Dp))),this.readonlyExcludeMatcher=this._register(new Bl(()=>this.createReadonlyMatcher(Tp))),this.sessionReadonlyOverrides=new so(e=>this.uriIdentityService.extUri.getComparisonKey(e)),this.autoSaveAfterShortDelayContext=DY.bindTo(e);let d=t.getValue();this.currentGlobalAutoSaveConfiguration=this.computeAutoSaveConfiguration(void 0,d.files),this.currentFilesAssociationConfiguration=null===d||void 0===d||null===(l=d.files)||void 0===l?void 0:l.associations,this.currentHotExitConfiguration=(null===d||void 0===d||null===(h=d.files)||void 0===h?void 0:h.hotExit)||wp,this.onFilesConfigurationChange(d,!1),this.registerListeners()}createReadonlyMatcher(e){let t=this._register(new yY(t=>this.configurationService.getValue(e,{resource:t}),t=>t.affectsConfiguration(e),this.contextService,this.configurationService));return this._register(t.onExpressionChange(()=>this._onDidChangeReadonly.fire())),t}isReadonly(e,t){var i,n;let s=this.fileService.getProvider(e.scheme);if(s&&function(e){return!!(e.capabilities&Xg.Readonly)}(s))return null!==(i=s.readOnlyMessage)&&void 0!==i?i:wY.READONLY_MESSAGES.providerReadonly;let r=this.sessionReadonlyOverrides.get(e);return"boolean"==typeof r?!0===r&&wY.READONLY_MESSAGES.sessionReadonly:!this.uriIdentityService.extUri.isEqualOrParent(e,this.environmentService.userRoamingDataHome)&&!this.uriIdentityService.extUri.isEqual(e,null!==(n=this.contextService.getWorkspace().configuration)&&void 0!==n?n:void 0)&&(this.readonlyIncludeMatcher.value.matches(e)?!this.readonlyExcludeMatcher.value.matches(e)&&wY.READONLY_MESSAGES.configuredReadonly:this.configuredReadonlyFromPermissions&&null!==t&&void 0!==t&&t.locked?wY.READONLY_MESSAGES.fileLocked:!(null===t||void 0===t||!t.readonly)&&wY.READONLY_MESSAGES.fileReadonly)}async updateReadonly(e,t){if("toggle"===t){let n;try{n=await this.fileService.resolve(e,{resolveMetadata:!0})}catch(i){}t=!this.isReadonly(e,n)}"reset"===t?this.sessionReadonlyOverrides.delete(e):this.sessionReadonlyOverrides.set(e,t),this._onDidChangeReadonly.fire()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration("files")&&this.onFilesConfigurationChange(this.configurationService.getValue(),!0)}))}onFilesConfigurationChange(e,t){var i,n,s;this.currentGlobalAutoSaveConfiguration=this.computeAutoSaveConfiguration(void 0,e.files),this.autoSaveConfigurationCache.clear(),this.autoSaveAfterShortDelayContext.set(this.getAutoSaveMode(void 0).mode===SY.AFTER_SHORT_DELAY),t&&this._onDidChangeAutoSaveConfiguration.fire();let r=null===e||void 0===e||null===(i=e.files)||void 0===i?void 0:i.associations;dS(this.currentFilesAssociationConfiguration,r)||(this.currentFilesAssociationConfiguration=r,t&&this._onDidChangeFilesAssociation.fire());let o=null===e||void 0===e||null===(n=e.files)||void 0===n?void 0:n.hotExit;this.currentHotExitConfiguration=o===yp||o===Sp?o:wp;let a=!(null===e||void 0===e||null===(s=e.files)||void 0===s||!s.readonlyFromPermissions);a!==!!this.configuredReadonlyFromPermissions&&(this.configuredReadonlyFromPermissions=a,t&&this._onDidChangeReadonly.fire())}getAutoSaveConfiguration(e){let t=this.toResource(e);if(t){let e=this.autoSaveConfigurationCache.get(t);return e||(e=this.computeAutoSaveConfiguration(t,this.textResourceConfigurationService.getValue(t,"files")),this.autoSaveConfigurationCache.set(t,e)),e}return this.currentGlobalAutoSaveConfiguration}computeAutoSaveConfiguration(e,t){var i;let n,s,r,o,a,l;switch(null!==(i=null===t||void 0===t?void 0:t.autoSave)&&void 0!==i?i:wY.DEFAULT_AUTO_SAVE_MODE){case Cp.AFTER_DELAY:n="afterDelay",s="number"==typeof(null===t||void 0===t?void 0:t.autoSaveDelay)&&t.autoSaveDelay>=0?t.autoSaveDelay:wY.DEFAULT_AUTO_SAVE_DELAY,l=s<=wY.DEFAULT_AUTO_SAVE_DELAY;break;case Cp.ON_FOCUS_CHANGE:n="onFocusChange";break;case Cp.ON_WINDOW_CHANGE:n="onWindowChange"}return!0===(null===t||void 0===t?void 0:t.autoSaveWorkspaceFilesOnly)&&(r=!0,e&&!this.contextService.isInsideWorkspace(e)&&(a=!0,l=void 0)),!0===(null===t||void 0===t?void 0:t.autoSaveWhenNoErrors)&&(o=!0,l=void 0),{autoSave:n,autoSaveDelay:s,autoSaveWorkspaceFilesOnly:r,autoSaveWhenNoErrors:o,isOutOfWorkspace:a,isShortAutoSaveDelay:l}}toResource(e){return e instanceof EY?Tj.getOriginalUri(e,{supportSideBySide:yj.PRIMARY}):e}hasShortAutoSaveDelay(e){let t=this.toResource(e);return!(!t||!this.autoSaveAfterShortDelayOverrides.has(t))||!!this.getAutoSaveConfiguration(t).isShortAutoSaveDelay&&(!t||!this.autoSaveDisabledOverrides.has(t))}getAutoSaveMode(e,t){let i=this.toResource(e);if(i&&this.autoSaveAfterShortDelayOverrides.has(i))return{mode:SY.AFTER_SHORT_DELAY};if(i&&this.autoSaveDisabledOverrides.has(i))return{mode:SY.OFF,reason:kY.DISABLED};let n=this.getAutoSaveConfiguration(i);if(void 0===n.autoSave||"number"==typeof t&&("afterDelay"===n.autoSave&&t!==cj.AUTO||"onFocusChange"===n.autoSave&&t!==cj.FOCUS_CHANGE&&t!==cj.WINDOW_CHANGE||"onWindowChange"===n.autoSave&&t!==cj.WINDOW_CHANGE))return{mode:SY.OFF,reason:kY.SETTINGS};if(i){if(n.autoSaveWorkspaceFilesOnly&&n.isOutOfWorkspace)return{mode:SY.OFF,reason:kY.OUT_OF_WORKSPACE};if(n.autoSaveWhenNoErrors&&this.markerService.read({resource:i,take:1,severities:MF.Error}).length>0)return{mode:SY.OFF,reason:kY.ERRORS}}switch(n.autoSave){case"afterDelay":return"number"==typeof n.autoSaveDelay&&n.autoSaveDelay<=wY.DEFAULT_AUTO_SAVE_DELAY?{mode:n.autoSaveWhenNoErrors?SY.AFTER_LONG_DELAY:SY.AFTER_SHORT_DELAY}:{mode:SY.AFTER_LONG_DELAY};case"onFocusChange":return{mode:SY.ON_FOCUS_CHANGE};case"onWindowChange":return{mode:SY.ON_WINDOW_CHANGE}}}async toggleAutoSave(){let e,t=this.configurationService.getValue("files.autoSave");return e=[Cp.AFTER_DELAY,Cp.ON_FOCUS_CHANGE,Cp.ON_WINDOW_CHANGE].some(e=>e===t)?Cp.OFF:Cp.AFTER_DELAY,this.configurationService.updateValue("files.autoSave",e)}enableAutoSaveAfterShortDelay(e){var t;let i=this.toResource(e);if(!i)return Co.None;let n=null!==(t=this.autoSaveAfterShortDelayOverrides.get(i))&&void 0!==t?t:0;return this.autoSaveAfterShortDelayOverrides.set(i,n+1),vo(()=>{var e;let t=null!==(e=this.autoSaveAfterShortDelayOverrides.get(i))&&void 0!==e?e:0;t<=1?this.autoSaveAfterShortDelayOverrides.delete(i):this.autoSaveAfterShortDelayOverrides.set(i,t-1)})}disableAutoSave(e){var t;let i=this.toResource(e);if(!i)return Co.None;let n=null!==(t=this.autoSaveDisabledOverrides.get(i))&&void 0!==t?t:0;return this.autoSaveDisabledOverrides.set(i,n+1),0===n&&this._onDidChangeAutoSaveDisabled.fire(i),vo(()=>{var e;let t=null!==(e=this.autoSaveDisabledOverrides.get(i))&&void 0!==e?e:0;t<=1?(this.autoSaveDisabledOverrides.delete(i),this._onDidChangeAutoSaveDisabled.fire(i)):this.autoSaveDisabledOverrides.set(i,t-1)})}get isHotExitEnabled(){return!this.contextService.getWorkspace().transient&&this.currentHotExitConfiguration!==yp}get hotExitConfiguration(){return this.currentHotExitConfiguration}preventSaveConflicts(e,t){return"overwriteFileOnDisk"!==this.configurationService.getValue("files.saveConflictResolution",{resource:e,overrideIdentifier:t})}},{_:wY=bi},{_:bi.DEFAULT_AUTO_SAVE_MODE=Yn?Cp.AFTER_DELAY:Cp.OFF},{_:bi.DEFAULT_AUTO_SAVE_DELAY=1e3},{_:bi.READONLY_MESSAGES={providerReadonly:{value:Li(14042,"Editor is read-only because the file system of the file is read-only."),isTrusted:!0},sessionReadonly:{value:Li(14043,"Editor is read-only because the file was set read-only in this session. [Click here](command:{0}) to set writeable.","workbench.action.files.setActiveEditorWriteableInSession"),isTrusted:!0},configuredReadonly:{value:Li(14044,"Editor is read-only because the file was set read-only via settings. [Click here](command:{0}) to configure or [toggle for this session](command:{1}).","workbench.action.openSettings?%5B%22files.readonly%22%5D","workbench.action.files.toggleActiveEditorReadonlyInSession"),isTrusted:!0},fileLocked:{value:Li(14045,"Editor is read-only because of file permissions. [Click here](command:{0}) to set writeable anyway.","workbench.action.files.setActiveEditorWriteableInSession"),isTrusted:!0},fileReadonly:{value:Li(14046,"Editor is read-only because the file is read-only."),isTrusted:!0}}},bi);TY=wY=ki([Ei(0,AS),Ei(1,fr),Ei(2,Cx),Ei(3,Hg),Ei(4,Pp),Ei(5,Ap),Ei(6,VF),Ei(7,NI)],TY);var IY,xY,LY,AY,NY=class{isSupported(e){return!1}async writeFileElevated(e,t,i){throw Error("Unsupported")}};!function(e){e[e.Default=1]="Default",e[e.Last=2]="Last"}(IY||(IY={})),function(e){e[e.CLOSE=1]="CLOSE",e[e.QUIT=2]="QUIT",e[e.RELOAD=3]="RELOAD",e[e.LOAD=4]="LOAD"}(xY||(xY={})),function(e){e[e.NewWindow=1]="NewWindow",e[e.ReloadedWindow=3]="ReloadedWindow",e[e.ReopenedWindow=4]="ReopenedWindow"}(LY||(LY={})),function(e){e[e.Starting=1]="Starting",e[e.Ready=2]="Ready",e[e.Restored=3]="Restored",e[e.Eventually=4]="Eventually"}(AY||(AY={}));var FY,OY,RY=fn("editorPaneService");function MY(e){return!!e&&"string"==typeof e.editorTypeId}function PY(e){switch(e){case OY.BlockStartup:return AY.Starting;case OY.BlockRestore:return AY.Ready;case OY.AfterRestored:return AY.Restored;case OY.Eventually:return AY.Eventually}}!function(e){e.Workbench="workbench.contributions.kind"}(FY||(FY={})),function(e){e[e.BlockStartup=1]="BlockStartup",e[e.BlockRestore=2]="BlockRestore",e[e.AfterRestored=3]="AfterRestored",e[e.Eventually=4]="Eventually"}(OY||(OY={}));var BY=(Ci=class e extends Co{constructor(){super(...arguments),this.contributionsByPhase=new Map,this.contributionsByEditor=new Map,this.contributionsById=new Map,this.instancesById=new Map,this.instanceDisposables=this._register(new bo),this.timingsByPhase=new Map,this.pendingRestoredContributions=new Vl,this.whenRestored=this.pendingRestoredContributions.p}get timings(){return this.timingsByPhase}registerWorkbenchContribution2(e,t,i){let n={id:e,ctor:t};this.instantiationService&&this.lifecycleService&&this.logService&&this.environmentService&&this.editorPaneService&&("number"==typeof i&&this.lifecycleService.phase>=i||"string"==typeof e&&MY(i)&&this.editorPaneService.didInstantiateEditorPane(i.editorTypeId))?this.safeCreateContribution(this.instantiationService,this.logService,this.environmentService,n,"number"==typeof i?PY(i):this.lifecycleService.phase):("number"==typeof i&&to(this.contributionsByPhase,PY(i),[]).push(n),"string"==typeof e&&(this.contributionsById.has(e)?console.error("IWorkbenchContributionsRegistry#registerWorkbenchContribution(): Can't register multiple contributions with same id '".concat(e,"'")):this.contributionsById.set(e,n),MY(i)&&to(this.contributionsByEditor,i.editorTypeId,[]).push(n)))}registerWorkbenchContribution(e,t){this.registerWorkbenchContribution2(void 0,e,function(e){switch(e){case AY.Restored:return OY.AfterRestored;case AY.Eventually:return OY.Eventually}}(t))}getWorkbenchContribution(e){if(this.instancesById.has(e))return this.instancesById.get(e);let t=this.instantiationService,i=this.lifecycleService,n=this.logService,s=this.environmentService;if(!t||!i||!n||!s)throw Error("IWorkbenchContributionsRegistry#getContribution('".concat(e,"'): cannot be called before registry started"));let r=this.contributionsById.get(e);if(!r)throw Error("IWorkbenchContributionsRegistry#getContribution('".concat(e,"'): contribution with that identifier is unknown."));i.phase<AY.Restored&&n.warn("IWorkbenchContributionsRegistry#getContribution('".concat(e,"'): contribution instantiated before LifecyclePhase.Restored!")),this.safeCreateContribution(t,n,s,r,i.phase);let o=this.instancesById.get(e);if(!o)throw Error("IWorkbenchContributionsRegistry#getContribution('".concat(e,"'): failed to create contribution."));return o}start(e){let t=this.instantiationService=e.get(pn),i=this.lifecycleService=e.get(Lj),n=this.logService=e.get(Np),s=this.environmentService=e.get(Hg),r=this.editorPaneService=e.get(RY);this._register(i.onDidShutdown(()=>{this.instanceDisposables.clear()}));for(let o of[AY.Starting,AY.Ready,AY.Restored,AY.Eventually])this.instantiateByPhase(t,i,n,s,o);for(let o of this.contributionsByEditor.keys())r.didInstantiateEditorPane(o)&&this.onEditor(o,t,i,n,s);this._register(r.onWillInstantiateEditorPane(e=>this.onEditor(e.typeId,t,i,n,s)))}onEditor(e,t,i,n,s){let r=this.contributionsByEditor.get(e);if(r){this.contributionsByEditor.delete(e);for(let e of r)this.safeCreateContribution(t,n,s,e,i.phase)}}instantiateByPhase(e,t,i,n,s){t.phase>=s?this.doInstantiateByPhase(e,i,n,s):t.when(s).then(()=>this.doInstantiateByPhase(e,i,n,s))}async doInstantiateByPhase(e,t,i,n){let s=this.contributionsByPhase.get(n);if(s)switch(this.contributionsByPhase.delete(n),n){case AY.Starting:case AY.Ready:ig("code/willCreateWorkbenchContributions/".concat(n));for(let r of s)this.safeCreateContribution(e,t,i,r,n);ig("code/didCreateWorkbenchContributions/".concat(n));break;case AY.Restored:case AY.Eventually:n===AY.Eventually&&await this.pendingRestoredContributions.p,this.doInstantiateWhenIdle(s,e,t,i,n)}}doInstantiateWhenIdle(e,t,i,n,s){ig("code/willCreateWorkbenchContributions/".concat(s));let r=0,o=s===AY.Eventually?3e3:500,a=l=>{for(;r<e.length;){let h=e[r++];if(this.safeCreateContribution(t,i,n,h,s),l.timeRemaining()<1){Tl(a,o);break}}r===e.length&&(ig("code/didCreateWorkbenchContributions/".concat(s)),s===AY.Restored&&this.pendingRestoredContributions.complete())};Tl(a,o)}safeCreateContribution(t,i,n,s,r){if("string"==typeof s.id&&this.instancesById.has(s.id))return;let o=Date.now();try{"string"==typeof s.id&&ig("code/willCreateWorkbenchContribution/".concat(r,"/").concat(s.id));let e=t.createInstance(s.ctor);"string"==typeof s.id&&(this.instancesById.set(s.id,e),this.contributionsById.delete(s.id)),go(e)&&this.instanceDisposables.add(e)}catch(e){var a;i.error("Unable to create workbench contribution '".concat(null!==(a=s.id)&&void 0!==a?a:s.ctor.name,"'."),e)}finally{"string"==typeof s.id&&ig("code/didCreateWorkbenchContribution/".concat(r,"/").concat(s.id))}if("string"==typeof s.id||!n.isBuilt){var l;let t=Date.now()-o;if(t>(r<AY.Restored?e.BLOCK_BEFORE_RESTORE_WARN_THRESHOLD:e.BLOCK_AFTER_RESTORE_WARN_THRESHOLD)&&i.warn("Creation of workbench contribution '".concat(null!==(l=s.id)&&void 0!==l?l:s.ctor.name,"' took ").concat(t,"ms.")),"string"==typeof s.id){let e=this.timingsByPhase.get(r);e||(e=[],this.timingsByPhase.set(r,e)),e.push([s.id,t])}}}},{_:Ci.INSTANCE=new Ci},{_:Ci.BLOCK_BEFORE_RESTORE_WARN_THRESHOLD=20},{_:Ci.BLOCK_AFTER_RESTORE_WARN_THRESHOLD=100},Ci);BY.INSTANCE.registerWorkbenchContribution2.bind(BY.INSTANCE),BY.INSTANCE.getWorkbenchContribution.bind(BY.INSTANCE),Tn.add(FY.Workbench,BY.INSTANCE);var UY=fn("productService");function HY(e){return e.scheme!==Ha.file&&e.scheme!==Ha.vscodeRemote}function WY(e){var t;return null===(t=function(e){return e.folders.length?e.folders.every(e=>HY(e.uri))?e.folders[0].uri:void 0:e.configuration&&HY(e.configuration)?e.configuration:void 0}(e))||void 0===t?void 0:t.scheme}var VY,zY=(yi=class extends EY{get typeId(){return VY.ID}get capabilities(){let e=this.primary.capabilities;return e&=~vj.CanSplitInGroup,this.secondary.hasCapability(vj.RequiresTrust)&&(e|=vj.RequiresTrust),this.secondary.hasCapability(vj.Singleton)&&(e|=vj.Singleton),e|=vj.MultipleEditors,e}get resource(){if(this.hasIdenticalSides)return this.primary.resource}constructor(e,t,i,n,s){super(),this.preferredName=e,this.preferredDescription=t,this.secondary=i,this.primary=n,this.editorService=s,this.hasIdenticalSides=this.primary.matches(this.secondary),this.registerListeners()}registerListeners(){this._register(_o.once(_o.any(this.primary.onWillDispose,this.secondary.onWillDispose))(()=>{this.isDisposed()||this.dispose()})),this._register(this.primary.onDidChangeDirty(()=>this._onDidChangeDirty.fire())),this._register(this.primary.onDidChangeCapabilities(()=>this._onDidChangeCapabilities.fire())),this._register(this.secondary.onDidChangeCapabilities(()=>this._onDidChangeCapabilities.fire())),this._register(this.primary.onDidChangeLabel(()=>this._onDidChangeLabel.fire())),this._register(this.secondary.onDidChangeLabel(()=>this._onDidChangeLabel.fire()))}getName(){return this.getPreferredName()||(this.hasIdenticalSides?this.primary.getName():Li(4024,"{0} - {1}",this.secondary.getName(),this.primary.getName()))}getPreferredName(){return this.preferredName}getDescription(e){return this.getPreferredDescription()||(this.hasIdenticalSides?this.primary.getDescription(e):super.getDescription(e))}getPreferredDescription(){return this.preferredDescription}getTitle(e){var t;let i;i=this.hasIdenticalSides?null!==(t=this.primary.getTitle(e))&&void 0!==t?t:this.getName():super.getTitle(e);let n=this.getPreferredTitle();return n&&(i="".concat(n," (").concat(i,")")),i}getPreferredTitle(){var e;return this.preferredName&&this.preferredDescription?"".concat(this.preferredName," ").concat(this.preferredDescription):this.preferredName||this.preferredDescription?null!==(e=this.preferredName)&&void 0!==e?e:this.preferredDescription:void 0}getLabelExtraClasses(){return this.hasIdenticalSides?this.primary.getLabelExtraClasses():super.getLabelExtraClasses()}getAriaLabel(){return this.hasIdenticalSides?this.primary.getAriaLabel():super.getAriaLabel()}getTelemetryDescriptor(){return(0,r.A)((0,r.A)({},this.primary.getTelemetryDescriptor()),super.getTelemetryDescriptor())}isDirty(){return this.primary.isDirty()}isSaving(){return this.primary.isSaving()}async save(e,t){let i=await this.primary.save(e,t);return this.saveResultToEditor(i)}async saveAs(e,t){let i=await this.primary.saveAs(e,t);return this.saveResultToEditor(i)}saveResultToEditor(e){return e&&this.hasIdenticalSides?this.primary.matches(e)?this:e instanceof EY?new VY(this.preferredName,this.preferredDescription,e,e,this.editorService):gj(e)||pj(e)||fj(e)||mj(e)?void 0:{primary:e,secondary:e,label:this.preferredName,description:this.preferredDescription}:e}revert(e,t){return this.primary.revert(e,t)}async rename(e,t){if(!this.hasIdenticalSides)return;let i=await this.primary.rename(e,t);if(i){if(Sj(i.editor))return{editor:new VY(this.preferredName,this.preferredDescription,i.editor,i.editor,this.editorService),options:(0,r.A)((0,r.A)({},i.options),{},{viewState:uj(this,e,this.editorService)})};if(function(e){if(Sj(e))return!1;let t=e;return Gs.isUri(null===t||void 0===t?void 0:t.resource)}(i.editor))return{editor:{label:this.preferredName,description:this.preferredDescription,primary:i.editor,secondary:i.editor,options:(0,r.A)((0,r.A)({},i.options),{},{viewState:uj(this,e,this.editorService)})}}}}isReadonly(){return this.primary.isReadonly()}toUntyped(e){let t=this.primary.toUntyped(e),i=this.secondary.toUntyped(e);if(t&&i&&!gj(t)&&!gj(i)&&!pj(t)&&!pj(i)&&!fj(t)&&!fj(i)&&!mj(t)&&!mj(i)){let n={label:this.preferredName,description:this.preferredDescription,primary:t,secondary:i};return"number"==typeof(null===e||void 0===e?void 0:e.preserveViewState)&&(n.options={viewState:uj(this,e.preserveViewState,this.editorService)}),n}}matches(e){return this===e||!kj(e)&&!gj(e)&&(!!(e instanceof VY||fj(e))&&(this.primary.matches(e.primary)&&this.secondary.matches(e.secondary)))}},{_:VY=yi},{_:yi.ID="workbench.editorinputs.sidebysideEditorInput"},yi);zY=VY=ki([Ei(4,Hj)],zY);var KY,qY=class extends Fj{get originalModel(){return this._originalModel}get modifiedModel(){return this._modifiedModel}constructor(e,t){super(),this._originalModel=e,this._modifiedModel=t}async resolve(){var e,t;await Promise.all([null===(e=this._originalModel)||void 0===e?void 0:e.resolve(),null===(t=this._modifiedModel)||void 0===t?void 0:t.resolve()])}isResolved(){var e,t;return!(null===(e=this._originalModel)||void 0===e||!e.isResolved()||null===(t=this._modifiedModel)||void 0===t||!t.isResolved())}dispose(){super.dispose()}},GY=class extends qY{get originalModel(){return this._originalModel}get modifiedModel(){return this._modifiedModel}get textDiffEditorModel(){return this._textDiffEditorModel}constructor(e,t){super(e,t),this._textDiffEditorModel=void 0,this._originalModel=e,this._modifiedModel=t,this.updateTextDiffEditorModel()}async resolve(){await super.resolve(),this.updateTextDiffEditorModel()}updateTextDiffEditorModel(){var e,t;(null===(e=this.originalModel)||void 0===e?void 0:e.isResolved())&&(null===(t=this.modifiedModel)||void 0===t?void 0:t.isResolved())&&(this._textDiffEditorModel?(this._textDiffEditorModel.original=this.originalModel.textEditorModel,this._textDiffEditorModel.modified=this.modifiedModel.textEditorModel):this._textDiffEditorModel={original:this.originalModel.textEditorModel,modified:this.modifiedModel.textEditorModel})}isResolved(){return!!this._textDiffEditorModel}isReadonly(){return!!this.modifiedModel&&this.modifiedModel.isReadonly()}dispose(){this._textDiffEditorModel=void 0,super.dispose()}},jY="\\\\";!function(e){e[e.TEXT=0]="TEXT",e[e.VARIABLE=1]="VARIABLE",e[e.SEPARATOR=2]="SEPARATOR"}(KY||(KY={}));var YY,QY=(wi=class extends zY{get typeId(){return YY.ID}get editorId(){return this.modified.editorId===this.original.editorId?this.modified.editorId:void 0}get capabilities(){let e=super.capabilities;return this.labels.forceDescription&&(e|=vj.ForceDescription),e}constructor(e,t,i,n,s,r){super(e,t,i,n,r),this.original=i,this.modified=n,this.forceOpenAsBinary=s,this.cachedModel=void 0,this.labels=this.computeLabels()}computeLabels(){var e,t,i,n,s,r;let o,a,l,h,d=!1;if(this.preferredName)o=this.preferredName;else{let e=this.original.getName(),t=this.modified.getName();o=Li(4023,"{0} \u2194 {1}",e,t),d=e===t}if(this.preferredDescription)a=this.preferredDescription,l=this.preferredDescription,h=this.preferredDescription;else{a=this.computeLabel(this.original.getDescription(dj.SHORT),this.modified.getDescription(dj.SHORT)),h=this.computeLabel(this.original.getDescription(dj.LONG),this.modified.getDescription(dj.LONG));let e=this.original.getDescription(dj.MEDIUM),t=this.modified.getDescription(dj.MEDIUM);if("string"==typeof e&&"string"==typeof t&&(e||t)){let[i,n]=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Us,i=Array(e.length),n=!1;for(let s=0;s<e.length;s++){let r=e[s];if(""===r){i[s]=".".concat(t);continue}if(!r){i[s]=r;continue}n=!0;let o="",a=r;0===a.indexOf(jY)?(o=a.substr(0,a.indexOf(jY)+2),a=a.substr(a.indexOf(jY)+2)):0===a.indexOf(t)?(o=a.substr(0,a.indexOf(t)+t.length),a=a.substr(a.indexOf(t)+t.length)):0===a.indexOf("~")&&(o=a.substr(0,a.indexOf("~")+1),a=a.substr(a.indexOf("~")+1));let l=a.split(t);for(let h=1;n&&h<=l.length;h++)for(let r=l.length-h;n&&r>=0;r--){n=!1;let a=l.slice(r,r+h).join(t);for(let i=0;!n&&i<e.length;i++)if(i!==s&&e[i]&&e[i].indexOf(a)>-1){let s=r+h===l.length,o=r>0&&e[i].indexOf(t)>-1?t+a:a,d=e[i].endsWith(o);n=!s||d}if(!n){let e="";(l[0].endsWith(":")||""!==o)&&(1===r&&(r=0,h++,a=l[0]+t+a),r>0&&(e=l[0]+t),e=o+e),r>0&&(e=e+"\u2026"+t),e+=a,r+h<l.length&&(e=e+t+"\u2026"),i[s]=e}}n&&(i[s]=r)}return i}([e,t]);l=this.computeLabel(i,n)}}let c=this.computeLabel(null!==(e=this.original.getTitle(dj.SHORT))&&void 0!==e?e:this.original.getName(),null!==(t=this.modified.getTitle(dj.SHORT))&&void 0!==t?t:this.modified.getName()," \u2194 "),u=this.computeLabel(null!==(i=this.original.getTitle(dj.MEDIUM))&&void 0!==i?i:this.original.getName(),null!==(n=this.modified.getTitle(dj.MEDIUM))&&void 0!==n?n:this.modified.getName()," \u2194 "),g=this.computeLabel(null!==(s=this.original.getTitle(dj.LONG))&&void 0!==s?s:this.original.getName(),null!==(r=this.modified.getTitle(dj.LONG))&&void 0!==r?r:this.modified.getName()," \u2194 "),p=this.getPreferredTitle();return p&&(c="".concat(p," (").concat(c,")"),u="".concat(p," (").concat(u,")"),g="".concat(p," (").concat(g,")")),{name:o,shortDescription:a,mediumDescription:l,longDescription:h,forceDescription:d,shortTitle:c,mediumTitle:u,longTitle:g}}computeLabel(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" - ";if(e&&t)return e===t?t:"".concat(e).concat(i).concat(t)}getName(){return this.labels.name}getDescription(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:dj.MEDIUM){case dj.SHORT:return this.labels.shortDescription;case dj.LONG:return this.labels.longDescription;case dj.MEDIUM:default:return this.labels.mediumDescription}}getTitle(e){switch(e){case dj.SHORT:return this.labels.shortTitle;case dj.LONG:return this.labels.longTitle;default:case dj.MEDIUM:return this.labels.mediumTitle}}async resolve(){var e;let t=await this.createModel();return null!==(e=this.cachedModel)&&void 0!==e&&e.dispose(),this.cachedModel=t,this.cachedModel}prefersEditorPane(e){return this.forceOpenAsBinary?e.find(e=>"workbench.editors.binaryResourceDiffEditor"===e.typeId):e.find(e=>"workbench.editors.textDiffEditor"===e.typeId)}async createModel(){let[e,t]=await Promise.all([this.original.resolve(),this.modified.resolve()]);return t instanceof Rj&&e instanceof Rj?new GY(e,t):new qY(NF(e)?e:void 0,NF(t)?t:void 0)}toUntyped(e){let t=super.toUntyped(e);if(t)return(0,r.A)((0,r.A)({},t),{},{modified:t.primary,original:t.secondary})}matches(e){return this===e||(e instanceof YY?this.modified.matches(e.modified)&&this.original.matches(e.original)&&e.forceOpenAsBinary===this.forceOpenAsBinary:!!gj(e)&&(this.modified.matches(e.modified)&&this.original.matches(e.original)))}dispose(){this.cachedModel&&(this.cachedModel=void this.cachedModel.dispose()),super.dispose()}},{_:YY=wi},{_:wi.ID="workbench.editors.diffEditorInput"},wi);QY=YY=ki([Ei(5,Hj)],QY);var $Y,XY=new jk("workbenchState",void 0,{type:"string",description:Li(3946,"The kind of workspace opened in the window, either 'empty' (no workspace), 'folder' (single folder) or 'workspace' (multi-root workspace)")}),ZY=new jk("workspaceFolderCount",0,Li(3947,"The number of root folders in the workspace")),JY=new jk("openFolderWorkspaceSupport",!0,!0),eQ=new jk("enterMultiRootWorkspaceSupport",!0,!0),tQ=new jk("emptyWorkspaceSupport",!0,!0),iQ=new jk("dirtyWorkingCopies",!1,Li(3948,"Whether there are any working copies with unsaved changes")),nQ=new jk("remoteName","",Li(3949,"The name of the remote the window is connected to or an empty string if not connected to any remote")),sQ=new jk("virtualWorkspace","",Li(3950,"The scheme of the current workspace is from a virtual file system or an empty string.")),rQ=new jk("temporaryWorkspace",!1,Li(3951,"The scheme of the current workspace is from a temporary file system.")),oQ=new jk("hasWebFileSystemAccess",!1,!0),aQ=new jk("embedderIdentifier",void 0,Li(3952,"The identifier of the embedder according to the product service, if one is defined")),lQ=new jk("inAutomation",!1,Li(3953,"Whether VS Code is running under automation/smoke test")),hQ=new jk("isSandboxWorkspace",!1,!0),dQ=new jk("isFullscreen",!1,Li(3954,"Whether the main window is in fullscreen mode")),cQ=new jk("isAuxiliaryWindowFocusedContext",!1,Li(3955,"Whether an auxiliary window is focused"));new jk("isAuxiliaryWindow",!1,Li(3956,"Window is an auxiliary window")),new jk("activeEditorIsDirty",!1,Li(3957,"Whether the active editor has unsaved changes")),new jk("activeEditorIsNotPreview",!1,Li(3958,"Whether the active editor is not in preview mode")),new jk("activeEditorIsFirstInGroup",!1,Li(3959,"Whether the active editor is the first one in its group")),new jk("activeEditorIsLastInGroup",!1,Li(3960,"Whether the active editor is the last one in its group")),new jk("activeEditorIsPinned",!1,Li(3961,"Whether the active editor is pinned")),new jk("activeEditorIsReadonly",!1,Li(3962,"Whether the active editor is read-only")),new jk("activeCompareEditorCanSwap",!1,Li(3963,"Whether the active compare editor can swap sides")),new jk("activeEditorCanToggleReadonly",!0,Li(3964,"Whether the active editor can toggle between being read-only or writeable")),new jk("activeEditorCanRevert",!1,Li(3965,"Whether the active editor can revert")),new jk("activeEditorCanSplitInGroup",!0),new jk("activeEditor",null,{type:"string",description:Li(3966,"The identifier of the active editor")}),new jk("activeEditorAvailableEditorIds","",Li(3967,"The available editor identifiers that are usable for the active editor")),new jk("textCompareEditorVisible",!1,Li(3968,"Whether a text compare editor is visible")),new jk("textCompareEditorActive",!1,Li(3969,"Whether a text compare editor is active")),new jk("sideBySideEditorActive",!1,Li(3970,"Whether a side by side editor is active")),new jk("groupEditorsCount",0,Li(3971,"The number of opened editor groups"));var uQ=new jk("activeEditorGroupEmpty",!1,Li(3972,"Whether the active editor group is empty")),gQ=new jk("activeEditorGroupIndex",0,Li(3973,"The index of the active editor group")),pQ=new jk("activeEditorGroupLast",!1,Li(3974,"Whether the active editor group is the last group")),fQ=new jk("activeEditorGroupLocked",!1,Li(3975,"Whether the active editor group is locked")),mQ=new jk("multipleEditorGroups",!1,Li(3976,"Whether there are multiple editor groups opened"));new jk("multipleEditorsSelectedInGroup",!1,Li(3977,"Whether multiple editors have been selected in an editor group")),new jk("twoEditorsSelectedInGroup",!1,Li(3978,"Whether exactly two editors have been selected in an editor group")),new jk("SelectedEditorsInGroupFileOrUntitledResourceContextKey",!0,Li(3979,"Whether all selected editors in a group have a file or untitled resource associated")),new jk("editorPartMultipleEditorGroups",!1,Li(3980,"Whether there are multiple editor groups opened in an editor part")),new jk("editorPartMaximizedEditorGroup",!1,Li(3981,"Editor Part has a maximized group"));var vQ=new jk("editorIsOpen",!1,Li(3982,"Whether an editor is open")),_Q=new jk("inZenMode",!1,Li(3983,"Whether Zen mode is enabled")),bQ=new jk("isCenteredLayout",!1,Li(3984,"Whether centered layout is enabled for the main editor")),CQ=new jk("splitEditorsVertically",!1,Li(3985,"Whether editors split vertically")),yQ=new jk("mainEditorAreaVisible",!0,Li(3986,"Whether the editor area in the main window is visible")),wQ=new jk("editorTabsVisible",!0,Li(3987,"Whether editor tabs are visible")),SQ=new jk("sideBarVisible",!1,Li(3988,"Whether the sidebar is visible"));new jk("sideBarFocus",!1,Li(3989,"Whether the sidebar has keyboard focus")),new jk("activeViewlet","",Li(3990,"The identifier of the active viewlet")),new jk("statusBarFocused",!1,Li(3991,"Whether the status bar has keyboard focus"));var kQ=new jk("titleBarStyle","custom",Li(3992,"Style of the window title bar")),EQ=new jk("titleBarVisible",!1,Li(3993,"Whether the title bar is visible"));new jk("isCompactTitleBar",!1,Li(3994,"Title bar is in compact mode")),new jk("bannerFocused",!1,Li(3995,"Whether the banner has keyboard focus")),new jk("notificationFocus",!0,Li(3996,"Whether a notification has keyboard focus")),new jk("notificationCenterVisible",!1,Li(3997,"Whether the notifications center is visible")),new jk("notificationToastsVisible",!1,Li(3998,"Whether a notification toast is visible")),new jk("activeAuxiliary","",Li(3999,"The identifier of the active auxiliary panel")),new jk("auxiliaryBarFocus",!1,Li(4e3,"Whether the auxiliary bar has keyboard focus"));var DQ=new jk("auxiliaryBarVisible",!1,Li(4001,"Whether the auxiliary bar is visible")),TQ=new jk("auxiliaryBarMaximized",!1,Li(4002,"Whether the auxiliary bar is maximized"));new jk("activePanel","",Li(4003,"The identifier of the active panel")),new jk("panelFocus",!1,Li(4004,"Whether the panel has keyboard focus"));var IQ=new jk("panelPosition","bottom",Li(4005,"The position of the panel, always 'bottom'")),xQ=new jk("panelAlignment","center",Li(4006,"The alignment of the panel, either 'center', 'left', 'right' or 'justify'")),LQ=new jk("panelVisible",!1,Li(4007,"Whether the panel is visible")),AQ=new jk("panelMaximized",!1,Li(4008,"Whether the panel is maximized"));new jk("focusedView","",Li(4009,"The identifier of the view that has keyboard focus"));var NQ,FQ,OQ,RQ,MQ,PQ,BQ,UQ=(Si=class{constructor(e,t,i,n){this._contextKeyService=e,this._fileService=t,this._languageService=i,this._modelService=n,this._disposables=new bo,this._schemeKey=$Y.Scheme.bindTo(this._contextKeyService),this._filenameKey=$Y.Filename.bindTo(this._contextKeyService),this._dirnameKey=$Y.Dirname.bindTo(this._contextKeyService),this._pathKey=$Y.Path.bindTo(this._contextKeyService),this._langIdKey=$Y.LangId.bindTo(this._contextKeyService),this._resourceKey=$Y.Resource.bindTo(this._contextKeyService),this._extensionKey=$Y.Extension.bindTo(this._contextKeyService),this._hasResource=$Y.HasResource.bindTo(this._contextKeyService),this._isFileSystemResource=$Y.IsFileSystemResource.bindTo(this._contextKeyService),this._disposables.add(t.onDidChangeFileSystemProviderRegistrations(()=>{let e=this.get();this._isFileSystemResource.set(!(!e||!t.hasProvider(e)))})),this._disposables.add(n.onModelAdded(e=>{nl(e.uri,this.get())&&this._setLangId()})),this._disposables.add(n.onModelLanguageChanged(e=>{nl(e.model.uri,this.get())&&this._setLangId()}))}dispose(){this._disposables.dispose()}_setLangId(){var e,t;let i=this.get();if(!i)return void this._langIdKey.set(null);let n=null!==(e=null===(t=this._modelService.getModel(i))||void 0===t?void 0:t.getLanguageId())&&void 0!==e?e:this._languageService.guessLanguageIdByFilepathOrFirstLine(i);this._langIdKey.set(n)}set(e){null!==e&&void 0!==e||(e=void 0),!nl(this._value,e)&&(this._value=e,this._contextKeyService.bufferChangeEvents(()=>{this._resourceKey.set(e?e.toString():null),this._schemeKey.set(e?e.scheme:null),this._filenameKey.set(e?ol(e):null),this._dirnameKey.set(e?this.uriToPath(ll(e)):null),this._pathKey.set(e?this.uriToPath(e):null),this._setLangId(),this._extensionKey.set(e?al(e):null),this._hasResource.set(!!e),this._isFileSystemResource.set(!!e&&this._fileService.hasProvider(e))}))}uriToPath(e){return e.scheme===Ha.file?e.fsPath:e.path}reset(){this._value=void 0,this._contextKeyService.bufferChangeEvents(()=>{this._resourceKey.reset(),this._schemeKey.reset(),this._filenameKey.reset(),this._dirnameKey.reset(),this._pathKey.reset(),this._langIdKey.reset(),this._extensionKey.reset(),this._hasResource.reset(),this._isFileSystemResource.reset()})}get(){return this._value}},{_:$Y=Si},{_:Si.Scheme=new jk("resourceScheme",void 0,{type:"string",description:Li(4010,"The scheme of the resource")})},{_:Si.Filename=new jk("resourceFilename",void 0,{type:"string",description:Li(4011,"The file name of the resource")})},{_:Si.Dirname=new jk("resourceDirname",void 0,{type:"string",description:Li(4012,"The folder name the resource is contained in")})},{_:Si.Path=new jk("resourcePath",void 0,{type:"string",description:Li(4013,"The full path of the resource")})},{_:Si.LangId=new jk("resourceLangId",void 0,{type:"string",description:Li(4014,"The language identifier of the resource")})},{_:Si.Resource=new jk("resource",void 0,{type:"URI",description:Li(4015,"The full value of the resource including scheme and path")})},{_:Si.Extension=new jk("resourceExtname",void 0,{type:"string",description:Li(4016,"The extension name of the resource")})},{_:Si.HasResource=new jk("resourceSet",void 0,{type:"boolean",description:Li(4017,"Whether a resource is present or not")})},{_:Si.IsFileSystemResource=new jk("isFileSystemResource",void 0,{type:"boolean",description:Li(4018,"Whether the resource is backed by a file system provider")})},Si);UQ=$Y=ki([Ei(0,AS),Ei(1,Ap),Ei(2,Pw),Ei(3,LI)],UQ),function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"}(NQ||(NQ={})),function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL"}(FQ||(FQ={})),function(e){e[e.FIRST=0]="FIRST",e[e.LAST=1]="LAST",e[e.NEXT=2]="NEXT",e[e.PREVIOUS=3]="PREVIOUS"}(OQ||(OQ={})),function(e){e[e.MAXIMIZE=0]="MAXIMIZE",e[e.EXPAND=1]="EXPAND",e[e.EVEN=2]="EVEN"}(RQ||(RQ={})),function(e){e[e.COPY_EDITORS=0]="COPY_EDITORS",e[e.MOVE_EDITORS=1]="MOVE_EDITORS"}(MQ||(MQ={})),function(e){e[e.CREATION_TIME=0]="CREATION_TIME",e[e.MOST_RECENTLY_ACTIVE=1]="MOST_RECENTLY_ACTIVE",e[e.GRID_APPEARANCE=2]="GRID_APPEARANCE"}(PQ||(PQ={})),function(e){e[e.NEW_EDITOR=1]="NEW_EDITOR",e[e.MOVE_EDITOR=2]="MOVE_EDITOR",e[e.COPY_EDITOR=3]="COPY_EDITOR"}(BQ||(BQ={}));var HQ,WQ,VQ,zQ,KQ,qQ,GQ,jQ,YQ=fn("editorGroupsService");function QQ(e){switch(e){case GQ.LEFT:return"left";case GQ.RIGHT:return"right";case GQ.BOTTOM:return"bottom";case GQ.TOP:return"top";default:return"bottom"}}function $Q(e){switch(e){case jQ.ALWAYS:return"always";case jQ.NEVER:return"never";case jQ.REMEMBER_LAST:default:return"preserve"}}!function(e){e.TITLEBAR_PART="workbench.parts.titlebar",e.BANNER_PART="workbench.parts.banner",e.ACTIVITYBAR_PART="workbench.parts.activitybar",e.SIDEBAR_PART="workbench.parts.sidebar",e.PANEL_PART="workbench.parts.panel",e.AUXILIARYBAR_PART="workbench.parts.auxiliarybar",e.EDITOR_PART="workbench.parts.editor",e.STATUSBAR_PART="workbench.parts.statusbar"}(HQ||(HQ={})),function(e){e.SHOW_TABS="zenMode.showTabs",e.HIDE_LINENUMBERS="zenMode.hideLineNumbers",e.HIDE_STATUSBAR="zenMode.hideStatusBar",e.HIDE_ACTIVITYBAR="zenMode.hideActivityBar",e.CENTER_LAYOUT="zenMode.centerLayout",e.FULLSCREEN="zenMode.fullScreen",e.RESTORE="zenMode.restore",e.SILENT_NOTIFICATIONS="zenMode.silentNotifications"}(WQ||(WQ={})),function(e){e.ACTIVITY_BAR_LOCATION="workbench.activityBar.location",e.EDITOR_TABS_MODE="workbench.editor.showTabs",e.EDITOR_ACTIONS_LOCATION="workbench.editor.editorActionsLocation",e.COMMAND_CENTER="window.commandCenter",e.LAYOUT_ACTIONS="workbench.layoutControl.enabled"}(VQ||(VQ={})),function(e){e.DEFAULT="default",e.TOP="top",e.BOTTOM="bottom",e.HIDDEN="hidden"}(zQ||(zQ={})),function(e){e.MULTIPLE="multiple",e.SINGLE="single",e.NONE="none"}(KQ||(KQ={})),function(e){e.DEFAULT="default",e.TITLEBAR="titleBar",e.HIDDEN="hidden"}(qQ||(qQ={})),function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT",e[e.BOTTOM=2]="BOTTOM",e[e.TOP=3]="TOP"}(GQ||(GQ={})),function(e){e[e.ALWAYS=0]="ALWAYS",e[e.NEVER=1]="NEVER",e[e.REMEMBER_LAST=2]="REMEMBER_LAST"}(jQ||(jQ={})),QQ(GQ.LEFT),GQ.LEFT,QQ(GQ.RIGHT),GQ.RIGHT,QQ(GQ.BOTTOM),GQ.BOTTOM,QQ(GQ.TOP),GQ.TOP,$Q(jQ.ALWAYS),jQ.ALWAYS,$Q(jQ.NEVER),jQ.NEVER,$Q(jQ.REMEMBER_LAST),jQ.REMEMBER_LAST;var XQ=fn("paneCompositePartService"),ZQ=class extends Co{constructor(e,t,i,n,s,r,o,a,l,h){super(),this.contextKeyService=e,this.contextService=t,this.configurationService=i,this.environmentService=n,this.productService=s,this.editorGroupService=r,this.editorService=o,this.layoutService=a,this.paneCompositeService=l,this.workingCopyService=h,lz.bindTo(this.contextKeyService),hz.bindTo(this.contextKeyService),dz.bindTo(this.contextKeyService),cz.bindTo(this.contextKeyService),uz.bindTo(this.contextKeyService),gz.bindTo(this.contextKeyService),pz.bindTo(this.contextKeyService),nQ.bindTo(this.contextKeyService).set(function(e){if(!e)return;let t=e.indexOf("+");return t<0?e:e.substr(0,t)}(this.environmentService.remoteAuthority)||""),this.virtualWorkspaceContext=sQ.bindTo(this.contextKeyService),this.temporaryWorkspaceContext=rQ.bindTo(this.contextKeyService),this.updateWorkspaceContextKeys(),oQ.bindTo(this.contextKeyService).set(XG.supported(Lv));let d=!this.environmentService.isBuilt||this.environmentService.isExtensionDevelopment;fz.bindTo(this.contextKeyService).set(d),function(e,t){if(void 0!==gk.get(e))throw Hi("contextkey.setConstant(k, v) invoked with already set constant `k`");gk.set(e,t)}(fz.key,d),mz.bindTo(this.contextKeyService).set(this.productService.quality||""),aQ.bindTo(this.contextKeyService).set(s.embedderIdentifier),this.inAutomationContext=lQ.bindTo(this.contextKeyService),this.inAutomationContext.set(!!this.environmentService.enableSmokeTestDriver),this.activeEditorGroupEmpty=uQ.bindTo(this.contextKeyService),this.activeEditorGroupIndex=gQ.bindTo(this.contextKeyService),this.activeEditorGroupLast=pQ.bindTo(this.contextKeyService),this.activeEditorGroupLocked=fQ.bindTo(this.contextKeyService),this.multipleEditorGroupsContext=mQ.bindTo(this.contextKeyService),this.editorsVisibleContext=vQ.bindTo(this.contextKeyService),this.dirtyWorkingCopiesContext=iQ.bindTo(this.contextKeyService),this.dirtyWorkingCopiesContext.set(this.workingCopyService.hasDirty),this.workbenchStateContext=XY.bindTo(this.contextKeyService),this.updateWorkbenchStateContextKey(),this.workspaceFolderCountContext=ZY.bindTo(this.contextKeyService),this.updateWorkspaceFolderCountContextKey(),this.openFolderWorkspaceSupportContext=JY.bindTo(this.contextKeyService),this.openFolderWorkspaceSupportContext.set(jn||"string"==typeof this.environmentService.remoteAuthority),this.emptyWorkspaceSupportContext=tQ.bindTo(this.contextKeyService),this.emptyWorkspaceSupportContext.set(jn||"string"==typeof this.environmentService.remoteAuthority),this.enterMultiRootWorkspaceSupportContext=eQ.bindTo(this.contextKeyService),this.enterMultiRootWorkspaceSupportContext.set(jn||"string"==typeof this.environmentService.remoteAuthority),this.splitEditorsVerticallyContext=CQ.bindTo(this.contextKeyService),this.updateSplitEditorsVerticallyContext(),this.isMainWindowFullscreenContext=dQ.bindTo(this.contextKeyService),this.isAuxiliaryWindowFocusedContext=cQ.bindTo(this.contextKeyService),this.inZenModeContext=_Q.bindTo(this.contextKeyService),this.isMainEditorCenteredLayoutContext=bQ.bindTo(this.contextKeyService),this.mainEditorAreaVisibleContext=yQ.bindTo(this.contextKeyService),this.editorTabsVisibleContext=wQ.bindTo(this.contextKeyService),this.sideBarVisibleContext=SQ.bindTo(this.contextKeyService),this.titleAreaVisibleContext=EQ.bindTo(this.contextKeyService),this.titleBarStyleContext=kQ.bindTo(this.contextKeyService),this.updateTitleBarContextKeys(),this.panelPositionContext=IQ.bindTo(this.contextKeyService),this.panelPositionContext.set(QQ(this.layoutService.getPanelPosition())),this.panelVisibleContext=LQ.bindTo(this.contextKeyService),this.panelVisibleContext.set(this.layoutService.isVisible(HQ.PANEL_PART)),this.panelMaximizedContext=AQ.bindTo(this.contextKeyService),this.panelMaximizedContext.set(this.layoutService.isPanelMaximized()),this.panelAlignmentContext=xQ.bindTo(this.contextKeyService),this.panelAlignmentContext.set(this.layoutService.getPanelAlignment()),this.auxiliaryBarVisibleContext=DQ.bindTo(this.contextKeyService),this.auxiliaryBarVisibleContext.set(this.layoutService.isVisible(HQ.AUXILIARYBAR_PART)),this.auxiliaryBarMaximizedContext=TQ.bindTo(this.contextKeyService),this.auxiliaryBarMaximizedContext.set(this.layoutService.isAuxiliaryBarMaximized()),hQ.bindTo(this.contextKeyService),this.registerListeners()}registerListeners(){this.editorGroupService.whenReady.then(()=>{this.updateEditorAreaContextKeys(),this.updateActiveEditorGroupContextKeys(),this.updateVisiblePanesContextKeys()}),this._register(this.editorService.onDidActiveEditorChange(()=>this.updateActiveEditorGroupContextKeys())),this._register(this.editorService.onDidVisibleEditorsChange(()=>this.updateVisiblePanesContextKeys())),this._register(this.editorGroupService.onDidAddGroup(()=>this.updateEditorGroupsContextKeys())),this._register(this.editorGroupService.onDidRemoveGroup(()=>this.updateEditorGroupsContextKeys())),this._register(this.editorGroupService.onDidChangeGroupIndex(()=>this.updateActiveEditorGroupContextKeys())),this._register(this.editorGroupService.onDidChangeGroupLocked(()=>this.updateActiveEditorGroupContextKeys())),this._register(this.editorGroupService.onDidChangeEditorPartOptions(()=>this.updateEditorAreaContextKeys())),this._register(this.contextService.onDidChangeWorkbenchState(()=>this.updateWorkbenchStateContextKey())),this._register(this.contextService.onDidChangeWorkspaceFolders(()=>{this.updateWorkspaceFolderCountContextKey(),this.updateWorkspaceContextKeys()})),this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration("workbench.editor.openSideBySideDirection")&&this.updateSplitEditorsVerticallyContext()})),this._register(this.layoutService.onDidChangeZenMode(e=>this.inZenModeContext.set(e))),this._register(this.layoutService.onDidChangeActiveContainer(()=>this.isAuxiliaryWindowFocusedContext.set(this.layoutService.activeContainer!==this.layoutService.mainContainer))),this._register(Ov(e=>{e===Lv.vscodeWindowId&&this.isMainWindowFullscreenContext.set(function(e){return Av.INSTANCE.isFullscreen(e)}(Lv))})),this._register(this.layoutService.onDidChangeMainEditorCenteredLayout(e=>this.isMainEditorCenteredLayoutContext.set(e))),this._register(this.layoutService.onDidChangePanelPosition(e=>this.panelPositionContext.set(e))),this._register(this.layoutService.onDidChangePanelAlignment(e=>this.panelAlignmentContext.set(e))),this._register(this.paneCompositeService.onDidPaneCompositeClose(()=>this.updateSideBarContextKeys())),this._register(this.paneCompositeService.onDidPaneCompositeOpen(()=>this.updateSideBarContextKeys())),this._register(this.layoutService.onDidChangePartVisibility(()=>{this.mainEditorAreaVisibleContext.set(this.layoutService.isVisible(HQ.EDITOR_PART,Lv)),this.panelVisibleContext.set(this.layoutService.isVisible(HQ.PANEL_PART)),this.panelMaximizedContext.set(this.layoutService.isPanelMaximized()),this.auxiliaryBarVisibleContext.set(this.layoutService.isVisible(HQ.AUXILIARYBAR_PART)),this.updateTitleBarContextKeys()})),this._register(this.layoutService.onDidChangeAuxiliaryBarMaximized(()=>{this.auxiliaryBarMaximizedContext.set(this.layoutService.isAuxiliaryBarMaximized())})),this._register(this.workingCopyService.onDidChangeDirty(e=>this.dirtyWorkingCopiesContext.set(e.isDirty()||this.workingCopyService.hasDirty)))}updateVisiblePanesContextKeys(){this.editorService.visibleEditorPanes.length>0?this.editorsVisibleContext.set(!0):this.editorsVisibleContext.reset()}updateActiveEditorGroupContextKeys(){this.editorService.activeEditor?this.activeEditorGroupEmpty.reset():this.activeEditorGroupEmpty.set(!0);let e=this.editorGroupService.activeGroup;this.activeEditorGroupIndex.set(e.index+1),this.activeEditorGroupLocked.set(e.isLocked),this.updateEditorGroupsContextKeys()}updateEditorGroupsContextKeys(){let e=this.editorGroupService.count;e>1?this.multipleEditorGroupsContext.set(!0):this.multipleEditorGroupsContext.reset();let t=this.editorGroupService.activeGroup;this.activeEditorGroupLast.set(t.index===e-1)}updateEditorAreaContextKeys(){this.editorTabsVisibleContext.set("multiple"===this.editorGroupService.partOptions.showTabs)}updateWorkbenchStateContextKey(){this.workbenchStateContext.set(this.getWorkbenchStateString())}updateWorkspaceFolderCountContextKey(){this.workspaceFolderCountContext.set(this.contextService.getWorkspace().folders.length)}updateSplitEditorsVerticallyContext(){let e=function(e){return"down"===e.getValue("workbench.editor.openSideBySideDirection")?NQ.DOWN:NQ.RIGHT}(this.configurationService);this.splitEditorsVerticallyContext.set(e===NQ.DOWN)}getWorkbenchStateString(){switch(this.contextService.getWorkbenchState()){case Lp.EMPTY:return"empty";case Lp.FOLDER:return"folder";case Lp.WORKSPACE:return"workspace"}}updateSideBarContextKeys(){this.sideBarVisibleContext.set(this.layoutService.isVisible(HQ.SIDEBAR_PART))}updateTitleBarContextKeys(){this.titleAreaVisibleContext.set(this.layoutService.isVisible(HQ.TITLEBAR_PART,Lv)),this.titleBarStyleContext.set(oF(this.configurationService))}updateWorkspaceContextKeys(){this.virtualWorkspaceContext.set(WY(this.contextService.getWorkspace())||""),this.temporaryWorkspaceContext.set(function(e){var t;let i;return i=Gs.isUri(e)?e:e.configuration,(null===(t=i)||void 0===t?void 0:t.scheme)===Ha.tmp}(this.contextService.getWorkspace()))}};ZQ=ki([Ei(0,AS),Ei(1,Cx),Ei(2,fr),Ei(3,Aj),Ei(4,UY),Ei(5,YQ),Ei(6,Hj),Ei(7,DC),Ei(8,XQ),Ei(9,Bj)],ZQ),(new Ro).event,(new Ro).event,new class{constructor(){this._isOpen=!1,this._promise=new Promise((e,t)=>{this._completePromise=e})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}},new Ro;var JQ=[];zG.withServices(()=>Co.None),document.body;var e$=Gs.file(function(e){return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")+"T"+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0")+"."+(e.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}(new Date).replace(/-|:|\.\d+Z$/g,"")).with({scheme:"vscode-log"}),t$=Tn.as(em),i$=jn?{type:"string",scope:Jf.APPLICATION,enum:[yp,wp,Sp],default:wp,markdownEnumDescriptions:[Li(8078,"Disable hot exit. A prompt will show when attempting to close a window with editors that have unsaved changes."),Li(8079,"Hot exit will be triggered when the last window is closed on Windows/Linux or when the `workbench.action.quit` command is triggered (command palette, keybinding, menu). All windows without folders opened will be restored upon next launch. A list of previously opened windows with unsaved files can be accessed via `File > Open Recent > More...`"),Li(8080,"Hot exit will be triggered when the last window is closed on Windows/Linux or when the `workbench.action.quit` command is triggered (command palette, keybinding, menu), and also for any window with a folder opened regardless of whether it's the last window. All windows without folders opened will be restored upon next launch. A list of previously opened windows with unsaved files can be accessed via `File > Open Recent > More...`")],markdownDescription:Li(8081,"[Hot Exit](https://aka.ms/vscode-hot-exit) controls whether unsaved files are remembered between sessions, allowing the save prompt when exiting the editor to be skipped.",wp,Sp)}:{type:"string",scope:Jf.APPLICATION,enum:[yp,Sp],default:Sp,markdownEnumDescriptions:[Li(8078,"Disable hot exit. A prompt will show when attempting to close a window with editors that have unsaved changes."),Li(8082,"Hot exit will be triggered when the browser quits or the window or tab is closed.")],markdownDescription:Li(8081,"[Hot Exit](https://aka.ms/vscode-hot-exit) controls whether unsaved files are remembered between sessions, allowing the save prompt when exiting the editor to be skipped.",wp,Sp)};t$.registerConfiguration({id:"files",order:9,title:Li(8083,"Files"),type:"object",properties:{[Ep]:{type:"object",markdownDescription:Li(8084,"Configure [glob patterns](https://aka.ms/vscode-glob-patterns) for excluding files and folders. For example, the File Explorer decides which files and folders to show or hide based on this setting. Refer to the `#search.exclude#` setting to define search-specific excludes. Refer to the `#explorer.excludeGitIgnore#` setting for ignoring files based on your `.gitignore`."),default:(0,r.A)({"**/.git":!0,"**/.svn":!0,"**/.hg":!0,"**/.DS_Store":!0,"**/Thumbs.db":!0},Yn?{"**/*.crswap":!0}:void 0),scope:Jf.RESOURCE,additionalProperties:{anyOf:[{type:"boolean",enum:[!0,!1],enumDescriptions:[Li(8085,"Enable the pattern."),Li(8086,"Disable the pattern.")],description:Li(8087,"The glob pattern to match file paths against. Set to true or false to enable or disable the pattern.")},{type:"object",properties:{when:{type:"string",pattern:"\\w*\\$\\(basename\\)\\w*",default:"$(basename).ext",markdownDescription:Li(8088,"Additional check on the siblings of a matching file. Use \\$(basename) as variable for the matching file name.")}}}]}},[kp]:{type:"object",markdownDescription:Li(8089,'Configure [glob patterns](https://aka.ms/vscode-glob-patterns) of file associations to languages (for example `"*.extension": "html"`). Patterns will match on the absolute path of a file if they contain a path separator and will match on the name of the file otherwise. These have precedence over the default associations of the languages installed.'),additionalProperties:{type:"string"}},"files.encoding":{type:"string",enum:Object.keys(iY),default:"utf8",description:Li(8090,"The default character set encoding to use when reading and writing files. This setting can also be configured per language."),scope:Jf.LANGUAGE_OVERRIDABLE,enumDescriptions:Object.keys(iY).map(e=>iY[e].labelLong),enumItemLabels:Object.keys(iY).map(e=>iY[e].labelLong)},"files.autoGuessEncoding":{type:"boolean",default:!1,markdownDescription:Li(8091,"When enabled, the editor will attempt to guess the character set encoding when opening files. This setting can also be configured per language. Note, this setting is not respected by text search. Only {0} is respected.","`#files.encoding#`"),scope:Jf.LANGUAGE_OVERRIDABLE},"files.candidateGuessEncodings":{type:"array",items:{type:"string",enum:Object.keys(nY),enumDescriptions:Object.keys(nY).map(e=>nY[e].labelLong)},default:[],markdownDescription:Li(8092,"List of character set encodings that the editor should attempt to guess in the order they are listed. In case it cannot be determined, {0} is respected","`#files.encoding#`"),scope:Jf.LANGUAGE_OVERRIDABLE},"files.eol":{type:"string",enum:["\n","\r\n","auto"],enumDescriptions:[Li(8093,"LF"),Li(8094,"CRLF"),Li(8095,"Uses operating system specific end of line character.")],default:"auto",description:Li(8096,"The default end of line character."),scope:Jf.LANGUAGE_OVERRIDABLE},"files.enableTrash":{type:"boolean",default:!0,description:Li(8097,"Moves files/folders to the OS trash (recycle bin on Windows) when deleting. Disabling this will delete files/folders permanently.")},"files.trimTrailingWhitespace":{type:"boolean",default:!1,description:Li(8098,"When enabled, will trim trailing whitespace when saving a file."),scope:Jf.LANGUAGE_OVERRIDABLE},"files.trimTrailingWhitespaceInRegexAndStrings":{type:"boolean",default:!0,description:Li(8099,"When enabled, trailing whitespace will be removed from multiline strings and regexes will be removed on save or when executing 'editor.action.trimTrailingWhitespace'. This can cause whitespace to not be trimmed from lines when there isn't up-to-date token information."),scope:Jf.LANGUAGE_OVERRIDABLE},"files.insertFinalNewline":{type:"boolean",default:!1,description:Li(8100,"When enabled, insert a final new line at the end of the file when saving it."),scope:Jf.LANGUAGE_OVERRIDABLE},"files.trimFinalNewlines":{type:"boolean",default:!1,description:Li(8101,"When enabled, will trim all new lines after the final new line at the end of the file when saving it."),scope:Jf.LANGUAGE_OVERRIDABLE},"files.autoSave":{type:"string",enum:[Cp.OFF,Cp.AFTER_DELAY,Cp.ON_FOCUS_CHANGE,Cp.ON_WINDOW_CHANGE],markdownEnumDescriptions:[Li(8102,"An editor with changes is never automatically saved."),Li(8103,"An editor with changes is automatically saved after the configured `#files.autoSaveDelay#`."),Li(8104,"An editor with changes is automatically saved when the editor loses focus."),Li(8105,"An editor with changes is automatically saved when the window loses focus.")],default:Yn?Cp.AFTER_DELAY:Cp.OFF,markdownDescription:Li(8106,"Controls [auto save](https://code.visualstudio.com/docs/editor/codebasics#_save-auto-save) of editors that have unsaved changes.",Cp.OFF,Cp.AFTER_DELAY,Cp.ON_FOCUS_CHANGE,Cp.ON_WINDOW_CHANGE,Cp.AFTER_DELAY),scope:Jf.LANGUAGE_OVERRIDABLE},"files.autoSaveDelay":{type:"number",default:1e3,minimum:0,markdownDescription:Li(8107,"Controls the delay in milliseconds after which an editor with unsaved changes is saved automatically. Only applies when `#files.autoSave#` is set to `{0}`.",Cp.AFTER_DELAY),scope:Jf.LANGUAGE_OVERRIDABLE},"files.autoSaveWorkspaceFilesOnly":{type:"boolean",default:!1,markdownDescription:Li(8108,"When enabled, will limit [auto save](https://code.visualstudio.com/docs/editor/codebasics#_save-auto-save) of editors to files that are inside the opened workspace. Only applies when {0} is enabled.","`#files.autoSave#`"),scope:Jf.LANGUAGE_OVERRIDABLE},"files.autoSaveWhenNoErrors":{type:"boolean",default:!1,markdownDescription:Li(8109,"When enabled, will limit [auto save](https://code.visualstudio.com/docs/editor/codebasics#_save-auto-save) of editors to files that have no errors reported in them at the time the auto save is triggered. Only applies when {0} is enabled.","`#files.autoSave#`"),scope:Jf.LANGUAGE_OVERRIDABLE},"files.watcherExclude":{type:"object",patternProperties:{".*":{type:"boolean"}},default:{"**/.git/objects/**":!0,"**/.git/subtree-cache/**":!0,"**/.hg/store/**":!0},markdownDescription:Li(8110,"Configure paths or [glob patterns](https://aka.ms/vscode-glob-patterns) to exclude from file watching. Paths can either be relative to the watched folder or absolute. Glob patterns are matched relative from the watched folder. When you experience the file watcher process consuming a lot of CPU, make sure to exclude large folders that are of less interest (such as build output folders)."),scope:Jf.RESOURCE},"files.watcherInclude":{type:"array",items:{type:"string"},default:[],description:Li(8111,"Configure extra paths to watch for changes inside the workspace. By default, all workspace folders will be watched recursively, except for folders that are symbolic links. You can explicitly add absolute or relative paths to support watching folders that are symbolic links. Relative paths will be resolved to an absolute path using the currently opened workspace."),scope:Jf.RESOURCE},"files.hotExit":i$,"files.defaultLanguage":{type:"string",markdownDescription:Li(8112,"The default language identifier that is assigned to new files. If configured to `${activeEditorLanguage}`, will use the language identifier of the currently active text editor if any.")},[Dp]:{type:"object",patternProperties:{".*":{type:"boolean"}},default:{},markdownDescription:Li(8113,"Configure paths or [glob patterns](https://aka.ms/vscode-glob-patterns) to mark as read-only. Glob patterns are always evaluated relative to the path of the workspace folder unless they are absolute paths. You can exclude matching paths via the `#files.readonlyExclude#` setting. Files from readonly file system providers will always be read-only independent of this setting."),scope:Jf.RESOURCE},[Tp]:{type:"object",patternProperties:{".*":{type:"boolean"}},default:{},markdownDescription:Li(8114,"Configure paths or [glob patterns](https://aka.ms/vscode-glob-patterns) to exclude from being marked as read-only if they match as a result of the `#files.readonlyInclude#` setting. Glob patterns are always evaluated relative to the path of the workspace folder unless they are absolute paths. Files from readonly file system providers will always be read-only independent of this setting."),scope:Jf.RESOURCE},[Ip]:{type:"boolean",markdownDescription:Li(8115,"Marks files as read-only when their file permissions indicate as such. This can be overridden via `#files.readonlyInclude#` and `#files.readonlyExclude#` settings."),default:!1},"files.restoreUndoStack":{type:"boolean",description:Li(8116,"Restore the undo stack when a file is reopened."),default:!0},"files.saveConflictResolution":{type:"string",enum:["askUser","overwriteFileOnDisk"],enumDescriptions:[Li(8117,"Will refuse to save and ask for resolving the save conflict manually."),Li(8118,"Will resolve the save conflict by overwriting the file on disk with the changes in the editor.")],description:Li(8119,"A save conflict can occur when a file is saved to disk that was changed by another program in the meantime. To prevent data loss, the user is asked to compare the changes in the editor with the version on disk. This setting should only be changed if you frequently encounter save conflict errors and may result in data loss if used without caution."),default:"askUser",scope:Jf.LANGUAGE_OVERRIDABLE},"files.dialog.defaultPath":{type:"string",pattern:"^((\\/|\\\\\\\\|[a-zA-Z]:\\\\).*)?$",patternErrorMessage:Li(8120,"Default path for file dialogs must be an absolute path (e.g. C:\\\\myFolder or /myFolder)."),description:Li(8121,"Default path for file dialogs, overriding user's home path. Only used in the absence of a context-specific path, such as most recently opened file or folder."),scope:Jf.MACHINE},"files.simpleDialog.enable":{type:"boolean",description:Li(8122,"Enables the simple file dialog for opening and saving files and folders. The simple file dialog replaces the system file dialog when enabled."),default:!1},"files.participants.timeout":{type:"number",default:6e4,markdownDescription:Li(8123,"Timeout in milliseconds after which file participants for create, rename, and delete are cancelled. Use `0` to disable participants.")}}}),t$.registerConfiguration((0,r.A)((0,r.A)({},DI),{},{properties:{"editor.formatOnSave":{type:"boolean",markdownDescription:Li(8124,"Format a file on save. A formatter must be available and the editor must not be shutting down. When {0} is set to `afterDelay`, the file will only be formatted when saved explicitly.","`#files.autoSave#`"),scope:Jf.LANGUAGE_OVERRIDABLE},"editor.formatOnSaveMode":{type:"string",default:"file",enum:["file","modifications","modificationsIfAvailable"],enumDescriptions:[Li(8125,"Format the whole file."),Li(8126,"Format modifications (requires source control)."),Li(8127,"Will attempt to format modifications only (requires source control). If source control can't be used, then the whole file will be formatted.")],markdownDescription:Li(8128,"Controls if format on save formats the whole file or only modifications. Only applies when `#editor.formatOnSave#` is enabled."),scope:Jf.LANGUAGE_OVERRIDABLE}}}));var n$=class{constructor(){this.type=Yg.Directory,this._onDidChange=new Ro,this.onDidChange=this._onDidChange.event,this._onDidDelete=new Ro,this.onDidDelete=this._onDidDelete.event,this.ctime=Date.now(),this.mtime=Date.now(),this.type=Yg.Directory,this.entries=new Map}async stats(){return{ctime:this.ctime,mtime:this.mtime,size:0,type:Yg.Directory}}delete(){this._onDidDelete.fire()}addChild(e,t){this.entries.set(e,t),this._onDidChange.fire();let i={dispose:()=>{this.deleteChild(e)}};return t.onDidDelete(()=>{i.dispose()}),i}deleteChild(e){return!!this.entries.delete(e)&&(this.mtime=Date.now(),this._onDidChange.fire(),0===this.entries.size&&this.delete(),!0)}getChildren(e){return this.entries.get(e)}read(){return Array.from(this.entries.entries()).map(e=>{let[t,i]=e;return[t,i.type]})}},s$=class{constructor(e,t){this.uri=e,this.readonly=t,this.type=Yg.File,this._onDidChange=new Ro,this.onDidChange=this._onDidChange.event,this._onDidDelete=new Ro,this.onDidDelete=this._onDidDelete.event,this.ctime=Date.now(),this.mtime=Date.now(),this.onDidChange(()=>{this.mtime=Date.now()})}async stats(){return{ctime:this.ctime,mtime:this.mtime,size:await this.getSize(),type:Yg.File,permissions:this.readonly?Qg.Readonly:void 0}}async delete(){if(this.readonly)throw lp("Not allowed",Zg.FileWriteLocked);this._onDidDelete.fire()}};new TextEncoder;function r$(e){return"fulfilled"===e.status}var o$=class{constructor(){this.providers=[],this.onDidChangeCapabilities=_o.None,this._onDidChangeFile=new Ro,this.onDidChangeFile=this._onDidChangeFile.event,this._onDidChangeOverlays=new Ro,this.onDidChangeOverlays=this._onDidChangeOverlays.event,this.capabilities=Xg.FileReadWrite|Xg.PathCaseSensitive|Xg.FileReadStream}register(e,t){let i={priority:e,provider:t};this.providers.push(i),this.providers.sort((e,t)=>t.priority-e.priority);let n=new bo;return n.add(t.onDidChangeFile(e=>{this._onDidChangeFile.fire(e)})),n.add({dispose:()=>{let e=this.providers.indexOf(i);e>=0&&(this.providers.splice(e,1),this._onDidChangeOverlays.fire())}}),this._onDidChangeOverlays.fire(),n}get delegates(){return this.providers.map(e=>{let{provider:t}=e;return t})}async readFromDelegates(e,t){if(0===this.delegates.length)throw lp("No delegate",Zg.Unavailable);let i;for(let n of this.delegates){if(null!=t&&t.isCancellationRequested)throw Error("Cancelled");try{return await e(n)}catch(e){if(null!==i&&void 0!==i||(i=e),e instanceof ap&&[Zg.NoPermissions,Zg.FileNotFound,Zg.Unavailable].includes(e.code))continue;throw e}}throw i}async writeToDelegates(e,t){if(0===this.delegates.length)throw lp("No delegate",Zg.Unavailable);for(let n of this.delegates)if(!((n.capabilities&Xg.Readonly)>0)){try{await QG(tl,n,tl.dirname(e))}catch(i){}try{return await t(n)}catch(e){if(e instanceof ap&&[Zg.NoPermissions,Zg.FileNotFound,Zg.Unavailable].includes(e.code))continue;throw e}}throw lp("Not allowed",Zg.NoPermissions)}async stat(e){return await this.readFromDelegates(async t=>{var i;let n=await t.stat(e),s=(t.capabilities&Xg.Readonly)>0;return(0,r.A)((0,r.A)({},n),{},{permissions:null!==(i=n.permissions)&&void 0!==i?i:s?Qg.Readonly:void 0})})}async readFile(e){return await this.readFromDelegates(t=>t.readFile(e))}readFileStream(e,t,i){let n=rg(e=>gg.concat(e.map(e=>gg.wrap(e))).buffer);return this.readFromDelegates(async s=>{if(!np(s)){var r;let i=await this.readFile(e);return("number"==typeof t.position||"number"==typeof t.length)&&(i=i.slice(null!==(r=t.position)&&void 0!==r?r:0,t.length)),n.end(i)}{let r=s.readFileStream(e,t,i);await new Promise((e,t)=>{let s=!1;lg(r,{onData(e){s=!0,n.write(e)},onEnd(){n.end(),e()},onError(e){s?n.error(e):t(e)}},i)})}},i).catch(e=>{n.error(e)}),n}async readdir(e){let t=await Promise.allSettled(this.delegates.map(async t=>await t.readdir(e)));if(!t.some(r$))throw t[0].reason;return Object.entries(Object.fromEntries(t.filter(r$).map(e=>e.value).flat()))}watch(e,t){let i=new bo;for(let n of this.delegates)i.add(n.watch(e,t));return i}async writeFile(e,t,i){await this.writeToDelegates(e,async n=>{var s;let r;try{r=await n.stat(e)}catch(o){}if(null!=r&&((null!==(s=r.permissions)&&void 0!==s?s:0)&Qg.Readonly)>0)throw lp("Not allowed",Zg.NoPermissions);return await n.writeFile(e,t,i)})}async mkdir(e){await this.writeToDelegates(e,t=>t.mkdir(e))}async delete(e,t){await this.writeToDelegates(e,i=>i.delete(e,t))}async rename(e,t,i){await this.writeToDelegates(t,n=>n.rename(e,t,i))}},a$=new o$;a$.register(0,new tj);var l$,h$=new class extends Co{constructor(e){super(),this.memoryFdCounter=0,this.fdMemory=new Map,this.onDidChangeCapabilities=_o.None,this._onDidChangeFile=new Ro,this.onDidChangeFile=this._onDidChangeFile.event,this._bufferedChanges=[],this.rootByAuthority=new Map,this.capabilities=Xg.FileReadWrite|Xg.PathCaseSensitive|Xg.FileReadStream,e&&(this.capabilities|=Xg.Readonly)}async open(e){let t=await this.readFile(e),i=this.memoryFdCounter++;return this.fdMemory.set(i,t),i}async close(e){this.fdMemory.delete(e)}async read(e,t,i,n,s){let r=this.fdMemory.get(e);if(null==r)throw lp("No file with that descriptor open",Zg.Unavailable);let o=gg.wrap(r).slice(t,t+s);return i.set(o.buffer,n),o.byteLength}write(e,t,i,n,s){let r=this.fdMemory.get(e);if(null==r)throw lp("No file with that descriptor open",Zg.Unavailable);let o=gg.wrap(i).slice(n,n+s);return r.set(o.buffer,t),Promise.resolve(o.byteLength)}_lookupRoot(e){let t=e.toLowerCase(),i=this.rootByAuthority.get(t);return null!==i&&void 0!==i||(i=new n$,this.rootByAuthority.set(t,i)),i}_lookup(e,t){let i=e.path.split("/"),n=this._lookupRoot(e.authority);for(let s of i){if(0===s.length)continue;let e;if(n instanceof n$&&(e=n.getChildren(s)),null==e){if(t)return;throw lp("file not found",Zg.FileNotFound)}n=e}return n}_lookupAsDirectory(e,t){let i=this._lookup(e,t);if(i instanceof n$)return i;throw lp("file not a directory",Zg.FileNotADirectory)}_lookupAsFile(e,t){let i=this._lookup(e,t);if(null!=i&&i.type===Yg.File)return i;throw lp("file is a directory",Zg.FileIsADirectory)}registerFile(e){let t=e.uri.path.split("/"),i=this._lookupRoot(e.uri.authority),n=e.uri.with({path:"/"});for(let o of t.slice(0,-1)){if(""===o)continue;n=tl.joinPath(n,o);let e=i.getChildren(o);if(null!==e&&void 0!==e||(e=this.mkdirSync(n)),!(e instanceof n$))throw Error("file '".concat(n.toString(),"' is not a directory"));i=e}let s=t[t.length-1];if(null!=i.getChildren(s))throw Error("file '".concat(tl.joinPath(n,s).toString(),"/' already exists"));let r=new bo;return r.add(vo(()=>{this._fireSoon({resource:e.uri,type:up.DELETED})})),r.add(e.onDidDelete(()=>{r.dispose()})),r.add(e.onDidChange(()=>{this._fireSoon({resource:e.uri,type:up.UPDATED})})),r.add(i.addChild(s,e)),this._fireSoon({resource:e.uri,type:up.ADDED}),r}async stat(e){return await this._lookup(e,!1).stats()}readdirSync(e){return this._lookupAsDirectory(e,!1).read()}async readdir(e){return this.readdirSync(e)}async readFile(e){return await this._lookupAsFile(e,!1).read()}readFileStream(e,t,i){let n=this._lookupAsFile(e,!1),s=rg(e=>gg.concat(e.map(e=>gg.wrap(e))).buffer,{highWaterMark:10});return(async()=>{try{if(null==n.readStream||"number"==typeof t.length||"number"==typeof t.position){var r;let e=await n.read();("number"==typeof t.position||"number"==typeof t.length)&&(e=e.slice(null!==(r=t.position)&&void 0!==r?r:0,t.length)),s.end(e)}else{let e=(await n.readStream()).getReader(),t=await e.read();for(;!t.done&&!i.isCancellationRequested&&(await s.write(t.value),!i.isCancellationRequested);)t=await e.read();s.end(void 0)}}catch(e){s.error(lp(e,Zg.Unknown)),s.end()}})(),s}watch(){return Co.None}async writeFile(e,t,i){let n=this._lookup(e,!0);if(null!=n&&!(n instanceof s$))throw lp("file is directory",Zg.FileIsADirectory);if(null==n)throw lp("file not found",Zg.FileNotFound);if(!i.overwrite)throw lp("file exists already",Zg.FileExists);await n.write(t)}async rename(){throw lp("Not allowed",Zg.NoPermissions)}mkdirSync(e){if(null!=this._lookup(e,!0))throw lp("file exists already",Zg.FileExists);let t=ol(e),i=ll(e),n=this._lookupAsDirectory(i,!1),s=new n$,r=new bo;return r.add(s.onDidDelete(()=>{r.dispose(),this._fireSoon({resource:e,type:up.DELETED})})),r.add(s.onDidChange(()=>{this._fireSoon({resource:e,type:up.UPDATED})})),n.addChild(t,s),this._fireSoon({type:up.ADDED,resource:e}),s}async mkdir(){throw lp("Can' create a directory",Zg.NoPermissions)}deleteSync(e){let t=this._lookup(e,!0);if(null==t)throw lp("Not found",Zg.FileNotFound);if(t.type===Yg.Directory)throw lp("Can't delete a directory",Zg.NoPermissions);t.delete()}async delete(e){this.deleteSync(e)}_fireSoon(){this._bufferedChanges.push(...arguments),null!=this._fireSoonHandle&&(clearTimeout(this._fireSoonHandle),this._fireSoonHandle=void 0),this._fireSoonHandle=window.setTimeout(()=>{this._onDidChangeFile.fire(this._bufferedChanges),this._bufferedChanges.length=0},5)}}(!0),d$=new tj;d$.mkdir(Gs.from({scheme:Ha.vscodeUserData,path:"/User/"})),function(e){e.extensionFile="extension-file"}(l$||(l$={}));var c$={[l$.extensionFile]:h$,[e$.scheme]:new tj,[Ha.vscodeUserData]:d$,[Ha.tmp]:new tj,[Ha.file]:a$},u$=class extends $G{constructor(e,t){super(e),this.options=t;for(let[i,n]of Object.entries(c$)){let e=this.registerProvider(i,n);n instanceof o$&&n.onDidChangeOverlays(()=>{e.dispose(),e=this.registerProvider(i,n)})}}async withProvider(e){if("data"===e.scheme){let e=this.getProvider("http");if(null!=e)return e}return super.withProvider(e)}async toFileStat(e,t,i,n,s,r){var o,a,l;let h=async()=>await super.toFileStat(e,t,i,n,s,r);return null!==(o=null===(a=(l=this.options).statMiddleware)||void 0===a?void 0:a.call(l,t,h))&&void 0!==o?o:h()}};u$.$di$dependencies=[];var g$=new class extends nE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jk;super(),this.buffer=[],this._logger=void 0,this._logLevelDisposable=this._register(new yo),this.setLevel(e)}set logger(e){this._logger=e,this.setLevel(e.getLevel()),this._logLevelDisposable.value=e.onDidChangeLogLevel(this.setLevel,this);for(let{level:t,message:i}of this.buffer)eE(e,t,i);this.buffer=[]}log(e,t){this._logger?eE(this._logger,e,t):this.getLevel()<=e&&this.buffer.push({level:e,message:t})}dispose(){var e;null!==(e=this._logger)&&void 0!==e&&e.dispose(),super.dispose()}flush(){var e;null===(e=this._logger)||void 0===e||e.flush()}};!function(e){JQ.push(e)}(async e=>{g$.logger=e.get(Np)});var p$=Object.freeze({View:Ni(1733,"View"),Help:Ni(1734,"Help"),Test:Ni(1735,"Test"),File:Ni(1736,"File"),Preferences:Ni(1737,"Preferences"),Developer:Ni(1738,"Developer")}),f$=$w,m$=fn("extensionsWorkbenchService"),v$=fn("extensionGalleryService"),_$=fn("extensionManagementService");fn("IGlobalExtensionEnablementService"),fn("IExtensionTipsService"),fn("IAllowedExtensionsService");var b$,C$=fn("preferencesService"),y$=Rf("theme-selection-manage-extension",su.gear,Li(12722,"Icon for the 'Manage' action in the theme selection quick pick."));!function(e){e.BROWSE_GALLERY="marketplace",e.EXTENSIONS_VIEW="extensions",e.CUSTOM_TOP_ENTRY="customTopEntry"}(b$||(b$={}));var w$=class{constructor(e,t,i,n,s,r,o,a,l){this.getMarketplaceColorThemes=e,this.marketplaceQuery=t,this.extensionGalleryService=i,this.extensionManagementService=n,this.quickInputService=s,this.logService=r,this.progressService=o,this.extensionsWorkbenchService=a,this.dialogService=l,this._marketplaceExtensions=new Set,this._marketplaceThemes=[],this._searchOngoing=!1,this._searchError=void 0,this._onDidChange=new Ro,this._queryDelayer=new kl(200),this._installedExtensions=n.getInstalled().then(e=>{let t=new Set;for(let i of e)t.add(i.identifier.id);return t})}get themes(){return this._marketplaceThemes}get onDidChange(){return this._onDidChange.event}trigger(e){this._tokenSource&&(this._tokenSource=void this._tokenSource.cancel()),this._queryDelayer.trigger(()=>(this._tokenSource=new Qo,this.doSearch(e,this._tokenSource.token)))}async doSearch(e,t){this._searchOngoing=!0,this._onDidChange.fire();try{let i=await this._installedExtensions,n={text:"".concat(this.marketplaceQuery," ").concat(e),pageSize:20},s=await this.extensionGalleryService.query(n,t);for(let e=0;e<s.total&&e<1&&!t.isCancellationRequested;e++){let n=this._marketplaceThemes.length,r=0===e?s.firstPage:await s.getPage(e,t),o=[],a=[];for(let e=0;e<r.length&&!t.isCancellationRequested;e++){let t=r[e];!i.has(t.identifier.id)&&!this._marketplaceExtensions.has(t.identifier.id)&&(this._marketplaceExtensions.add(t.identifier.id),o.push(this.getMarketplaceColorThemes(t.publisher,t.name,t.version)),a.push(t))}let l=await Promise.all(o);for(let e=0;e<l.length;e++){let t=a[e];for(let i of l[e])this._marketplaceThemes.push({id:i.id,theme:i,label:i.label,description:"".concat(t.displayName," \xb7 ").concat(t.publisherDisplayName),galleryExtension:t,buttons:[A$]})}n!==this._marketplaceThemes.length&&(this._marketplaceThemes.sort((e,t)=>e.label.localeCompare(t.label)),this._onDidChange.fire())}}catch(e){Bi(e)||(this.logService.error("Error while searching for themes:",e),this._searchError="message"in e?e.message:String(e))}finally{this._searchOngoing=!1,this._onDidChange.fire()}}openQuickPick(e,t,i){let n,s=new bo;return new Promise((r,o)=>{let a=s.add(this.quickInputService.createQuickPick());a.items=[],a.sortByLabel=!1,a.matchOnDescription=!0,a.buttons=[this.quickInputService.backButton],a.title="Marketplace Themes",a.placeholder=Li(12723,"Type to Search More. Select to Install. Up/Down Keys to Preview"),a.canSelectMany=!1,s.add(a.onDidChangeValue(()=>this.trigger(a.value))),s.add(a.onDidAccept(async e=>{let s=a.selectedItems[0];(null===s||void 0===s?void 0:s.galleryExtension)&&(n="selected",a.hide(),await this.installExtension(s.galleryExtension)?i(s.theme,!0):i(t,!0))})),s.add(a.onDidTriggerItemButton(e=>{if(I$(e.item)){var t;let i=null===(t=e.item.theme)||void 0===t||null===(t=t.extensionData)||void 0===t?void 0:t.extensionId;i?this.extensionsWorkbenchService.openSearch("@id:".concat(i)):this.extensionsWorkbenchService.openSearch("".concat(this.marketplaceQuery," ").concat(a.value))}})),s.add(a.onDidChangeActive(e=>{var t;void 0===n&&i(null===(t=e[0])||void 0===t?void 0:t.theme,!1)})),s.add(a.onDidHide(()=>{void 0===n&&(i(t,!0),n="cancelled"),r(n)})),s.add(a.onDidTriggerButton(e=>{e===this.quickInputService.backButton&&(n="back",a.hide())})),s.add(this.onDidChange(()=>{var e;let t=this.themes;this._searchOngoing?t=t.concat({label:"$(loading~spin) Searching for themes...",id:void 0,alwaysShow:!0}):0===t.length&&this._searchError&&(t=[{label:"$(error) ".concat(Li(12724,"Error while searching for themes: {0}",this._searchError)),id:void 0,alwaysShow:!0}]);let i=null===(e=a.activeItems[0])||void 0===e?void 0:e.id,n=i?t.find(e=>I$(e)&&e.id===i):void 0;a.items=t,n&&(a.activeItems=[n])})),this.trigger(e),a.show()}).finally(()=>{s.dispose()})}async installExtension(e){if(this.extensionsWorkbenchService.openSearch("@id:".concat(e.identifier.id)),!(await this.dialogService.confirm({message:Li(12725,"This will install extension '{0}' published by '{1}'. Do you want to continue?",e.displayName,e.publisherDisplayName),primaryButton:Li(12726,"OK")})).confirmed)return!1;try{return await this.progressService.withProgress({location:rY.Notification,title:Li(12727,"Installing Extension {0}...",e.displayName)},async()=>{await this.extensionManagementService.installFromGallery(e,{isMachineScoped:!1})}),!0}catch(t){return this.logService.error("Problem installing extension ".concat(e.identifier.id),t),!1}}dispose(){this._tokenSource&&(this._tokenSource=void this._tokenSource.cancel()),this._queryDelayer.dispose(),this._marketplaceExtensions.clear(),this._marketplaceThemes.length=0,this._onDidChange.dispose()}};w$=ki([Ei(2,v$),Ei(3,_$),Ei(4,nT),Ei(5,Np),Ei(6,hx),Ei(7,m$),Ei(8,MS)],w$);var S$=class{constructor(e,t,i,n,s,r,o,a){this.options=e,this.setTheme=t,this.getMarketplaceColorThemes=i,this.quickInputService=n,this.extensionGalleryService=s,this.extensionsWorkbenchService=r,this.extensionResourceLoaderService=o,this.instantiationService=a}async openQuickPick(e,t){var i;let n;this.extensionGalleryService.isEnabled()&&(await this.extensionResourceLoaderService.supportsExtensionGalleryResources()&&this.options.browseMessage?(n=this.instantiationService.createInstance(w$,this.getMarketplaceColorThemes.bind(this),this.options.marketplaceTag),e=[T$(this.options.browseMessage,b$.BROWSE_GALLERY),...e]):e=[...e,{type:"separator"},T$(this.options.installMessage,b$.EXTENSIONS_VIEW)]);let s,r=(e,i)=>{s&&clearTimeout(s),s=Lv.setTimeout(()=>{s=void 0;let n=null!==e&&void 0!==e?e:t;this.setTheme(n,i?"auto":"preview").then(void 0,e=>{Ri(e),this.setTheme(t,void 0)})},i?0:200)},o=i=>{let s=new bo;return new Promise((a,l)=>{var h;let d=!1,c=e.findIndex(e=>I$(e)&&e.id===i),u=s.add(this.quickInputService.createQuickPick({useSeparators:!0}));u.items=e,u.title=this.options.title,u.description=this.options.description,u.placeholder=this.options.placeholderMessage,u.activeItems=[e[c]],u.canSelectMany=!1,u.toggles=this.options.toggles,null!==(h=u.toggles)&&void 0!==h&&h.forEach(e=>{s.add(e.onChange(()=>{var t,i;return null===(t=(i=this.options).onToggle)||void 0===t?void 0:t.call(i,e,u)}))}),u.matchOnDescription=!0,s.add(u.onDidAccept(async e=>{d=!0;let i=u.selectedItems[0];!i||i.configureItem?i&&i.configureItem!==b$.EXTENSIONS_VIEW?i.configureItem===b$.BROWSE_GALLERY&&n&&"back"===await n.openQuickPick(u.value,t,r)&&await o(void 0):this.extensionsWorkbenchService.openSearch("".concat(this.options.marketplaceTag," ").concat(u.value)):r(i.theme,!0),u.hide(),a()})),s.add(u.onDidChangeActive(e=>{var t;return r(null===(t=e[0])||void 0===t?void 0:t.theme,!1)})),s.add(u.onDidHide(()=>{d||(r(t,!0),a()),u.dispose()})),s.add(u.onDidTriggerItemButton(e=>{if(I$(e.item)){var t;let i=null===(t=e.item.theme)||void 0===t||null===(t=t.extensionData)||void 0===t?void 0:t.extensionId;i?this.extensionsWorkbenchService.openSearch("@id:".concat(i)):this.extensionsWorkbenchService.openSearch("".concat(this.options.marketplaceTag," ").concat(u.value))}})),u.show()}).finally(()=>{s.dispose()})};await o(t.id),null===(i=n)||void 0===i||i.dispose()}};S$=ki([Ei(3,nT),Ei(4,v$),Ei(5,m$),Ei(6,TC),Ei(7,pn)],S$);var k$="workbench.action.selectTheme";tT(class extends eT{constructor(){super({id:k$,title:Ni(12728,"Color Theme"),category:p$.Preferences,f1:!0,keybinding:{weight:TD.WorkbenchContrib,primary:a_(Yv.CtrlCmd|Kv.KeyK,Yv.CtrlCmd|Kv.KeyT)}})}getTitle(e){switch(e){case eu.DARK:return Li(12729,"Select Color Theme for System Dark Mode");case eu.LIGHT:return Li(12730,"Select Color Theme for System Light Mode");case eu.HIGH_CONTRAST_DARK:return Li(12731,"Select Color Theme for High Contrast Dark Mode");case eu.HIGH_CONTRAST_LIGHT:return Li(12732,"Select Color Theme for High Contrast Light Mode");default:return Li(12733,"Select Color Theme (detect system color mode disabled)")}}async run(e){let t,i=e.get(f$),n=e.get(C$),s=i.getPreferredColorScheme();t=new GU(s?(0,r.A)({title:Li(12734,"Detect system color mode enabled. Click to configure."),icon:su.colorMode,isChecked:!1},KN):(0,r.A)({title:Li(12735,"Detect system color mode disabled. Click to configure."),icon:su.colorMode,isChecked:!1},KN));let o,a={installMessage:Li(12736,"Install Additional Color Themes..."),browseMessage:"$(plus) "+Li(12737,"Browse Additional Color Themes..."),placeholderMessage:this.getTitle(s),marketplaceTag:"category:themes",toggles:[t],onToggle:async(e,t)=>{t.hide(),await n.openSettings({query:mn.DETECT_COLOR_SCHEME})}},l=e.get(pn).createInstance(S$,a,(e,t)=>i.setColorTheme(e,t),(e,t,n)=>i.getMarketplaceColorThemes(e,t,n)),h=await i.getColorThemes(),d=i.getColorTheme(),c=L$(h.filter(e=>e.type===eu.LIGHT),Li(12738,"light themes")),u=L$(h.filter(e=>e.type===eu.DARK),Li(12739,"dark themes")),g=L$(h.filter(e=>ru(e.type)),Li(12740,"high contrast themes"));switch(s){case eu.DARK:o=[...u,...c,...g];break;case eu.HIGH_CONTRAST_DARK:case eu.HIGH_CONTRAST_LIGHT:o=[...g,...c,...u];break;case eu.LIGHT:default:o=[...c,...u,...g]}await l.openQuickPick(o,d)}});var E$="workbench.action.selectIconTheme";tT(class extends eT{constructor(){super({id:E$,title:Ni(12741,"File Icon Theme"),category:p$.Preferences,f1:!0})}async run(e){let t=e.get(f$),i={installMessage:Li(12742,"Install Additional File Icon Themes..."),placeholderMessage:Li(12743,"Select File Icon Theme (Up/Down Keys to Preview)"),marketplaceTag:"tag:icon-theme"},n=e.get(pn).createInstance(S$,i,(e,i)=>t.setFileIconTheme(e,i),(e,i,n)=>t.getMarketplaceFileIconThemes(e,i,n)),s=[{type:"separator",label:Li(12744,"file icon themes")},{id:"",theme:ym.noIconTheme,label:Li(12745,"None"),description:Li(12746,"Disable File Icons")},...L$(await t.getFileIconThemes())];await n.openQuickPick(s,t.getFileIconTheme())}});var D$="workbench.action.selectProductIconTheme";function T$(e,t){return{id:void 0,label:e,alwaysShow:!0,buttons:[A$],configureItem:t}}function I$(e){return"separator"!==e.type}function x$(e){var t;let i=null!==(t=e.settingsId)&&void 0!==t?t:void 0,n={id:e.id,theme:e,label:e.label,description:e.description||(e.label===i?void 0:i)};return e.extensionData&&(n.buttons=[A$]),n}function L$(e,t){let i=e.map(x$).sort((e,t)=>e.label.localeCompare(t.label));return i.length>0&&t&&i.unshift({type:"separator",label:t}),i}tT(class extends eT{constructor(){super({id:D$,title:Ni(12747,"Product Icon Theme"),category:p$.Preferences,f1:!0})}async run(e){let t=e.get(f$),i={installMessage:Li(12748,"Install Additional Product Icon Themes..."),browseMessage:"$(plus) "+Li(12749,"Browse Additional Product Icon Themes..."),placeholderMessage:Li(12750,"Select Product Icon Theme (Up/Down Keys to Preview)"),marketplaceTag:"tag:product-icon-theme"},n=e.get(pn).createInstance(S$,i,(e,i)=>t.setProductIconTheme(e,i),(e,i,n)=>t.getMarketplaceProductIconThemes(e,i,n)),s=[{type:"separator",label:Li(12751,"product icon themes")},{id:"",theme:Lw.defaultTheme,label:Li(12752,"Default")},...L$(await t.getProductIconThemes())];await n.openQuickPick(s,t.getProductIconTheme())}}),AD.registerCommand("workbench.action.previewColorTheme",async function(e,t,i){let n=e.get(f$),s=function(e,t){return e.filter(e=>{let{extensionData:i}=e;return i&&i.extensionIsBuiltin&&pa(i.extensionPublisher,t.publisher)&&pa(i.extensionName,t.name)})}(await n.getColorThemes(),t);0===s.length&&(s=await n.getMarketplaceColorThemes(t.publisher,t.name,t.version));for(let r of s)if(!i||r.settingsId===i)return await n.setColorTheme(r,"preview"),r.settingsId});var A$={iconClass:yf.asClassName(y$),tooltip:Li(12753,"Manage Extension")};tT(class extends eT{constructor(){super({id:"workbench.action.generateColorTheme",title:Ni(12754,"Generate Color Theme From Current Settings"),category:p$.Developer,f1:!0})}run(e){let t=e.get(f$).getColorTheme(),i=Tn.as(Zl).getColors().filter(e=>!e.deprecationMessage).map(e=>e.id).sort(),n={},s=[];for(let a of i){let e=t.getColor(a,!1);e?n[a]=Ir.Format.CSS.formatHexA(e,!0):s.push(a)}let r=[];for(let a of s){let e=t.getColor(a);e?n["__"+a]=Ir.Format.CSS.formatHexA(e,!0):r.push(a)}for(let a of r)n["__"+a]=null;let o=JSON.stringify({$schema:mC,type:t.type,colors:n,tokenColors:t.tokenColors.filter(e=>!!e.scope)},null,"\t");return o=o.replace(/\"__/g,'//"'),e.get(Hj).openEditor({resource:void 0,contents:o,languageId:"jsonc",options:{pinned:!0}})}});tT(class extends eT{constructor(){super({id:"workbench.action.toggleLightDarkThemes",title:Ni(12755,"Toggle between Light/Dark Themes"),category:p$.Preferences,f1:!0})}async run(e){let t=e.get(f$),i=e.get(fr),n=e.get(BS),s=e.get(C$);if(i.getValue(mn.DETECT_COLOR_SCHEME)){let e=Li(12756,"Cannot toggle between light and dark themes when `{0}` is enabled in settings.",mn.DETECT_COLOR_SCHEME);return void n.prompt(xC.Info,e,[{label:Li(12757,"Open Settings"),run:()=>s.openUserSettings({query:mn.DETECT_COLOR_SCHEME})}])}let r=t.getColorTheme(),o=mn.PREFERRED_DARK_THEME;switch(r.type){case eu.LIGHT:o=mn.PREFERRED_DARK_THEME;break;case eu.DARK:o=mn.PREFERRED_LIGHT_THEME;break;case eu.HIGH_CONTRAST_LIGHT:o=mn.PREFERRED_HC_DARK_THEME;break;case eu.HIGH_CONTRAST_DARK:o=mn.PREFERRED_HC_LIGHT_THEME}let a=i.getValue(o);if(a&&"string"==typeof a){let e=(await t.getColorThemes()).find(e=>e.settingsId===a);e&&t.setColorTheme(e.id,"auto")}}});tT(class extends eT{constructor(){super({id:"workbench.action.browseColorThemesInMarketplace",title:Ni(12758,"Browse Color Themes in Marketplace"),category:p$.Preferences,f1:!0})}async run(e){let t="category:themes",i=e.get(f$),n=e.get(v$),s=e.get(TC),r=e.get(m$),o=e.get(pn);if(!n.isEnabled())return;if(!await s.supportsExtensionGalleryResources())return void await r.openSearch(t);let a,l=i.getColorTheme();await o.createInstance(w$,(e,t,n)=>i.getMarketplaceColorThemes(e,t,n),t).openQuickPick("",i.getColorTheme(),(e,t)=>{a&&clearTimeout(a),a=Lv.setTimeout(()=>{a=void 0;let n=null!==e&&void 0!==e?e:l;i.setColorTheme(n,t?"auto":"preview").then(void 0,e=>{Ri(e),i.setColorTheme(l,void 0)})},t?0:200)}).then(void 0,Ri)}});var N$=new QD("ThemesSubMenu");XD.appendMenuItem(QD.GlobalActivity,{title:Li(12759,"Themes"),submenu:N$,group:"2_configuration",order:7}),XD.appendMenuItem(QD.MenubarPreferencesMenu,{title:Li(12760,"&&Themes"),submenu:N$,group:"2_configuration",order:7}),XD.appendMenuItem(N$,{command:{id:k$,title:Li(12728,"Color Theme")},order:1}),XD.appendMenuItem(N$,{command:{id:E$,title:Li(12761,"File Icon Theme")},order:2}),XD.appendMenuItem(N$,{command:{id:D$,title:Li(12762,"Product Icon Theme")},order:3});var F$=class extends qw{registerEditorContainer(){return{dispose(){}}}setTheme(e){this.getColorThemes().then(t=>{setTimeout(()=>{var i;this.setColorTheme(null!==(i=t.find(t=>t.settingsId===e))&&void 0!==i?i:e,tr.MEMORY)})})}};function O$(){return(0,r.A)((0,r.A)({},function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{[Ap.toString()]:new bC(u$,[g$,e],!0),[nj.toString()]:new bC(bY,[],!0),[oY.toString()]:new bC(TY,[],!0),[fY.toString()]:new bC(NY,[],!0)}}()),{},{[$w.toString()]:new bC(F$,[],!1)})}}}]);