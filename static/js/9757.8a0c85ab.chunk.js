"use strict";(self.webpackChunkWindmill_Whitelabel_Example=self.webpackChunkWindmill_Whitelabel_Example||[]).push([[9757],{9757:(t,e,r)=>{r.r(e),r.d(e,{default:()=>k});var a=r(9379),i=r(9354),l=(r(8036),r(134)),n=r(1422),s=(0,l.h)(t=>{let{kind:e}=t;return l.ea.listHubIntegrations({kind:e})},{initial:{kind:"script",refreshCount:0},invalidateMs:6e4}),c=(0,l.h)(async t=>{let{filter:e,kind:r,appFilter:a}=t;try{var n;return(0,i.n)(l.In)?e.length>0?await l.da.queryHubScripts({text:e,limit:20,kind:r}):null!==(n=(await l.da.getTopHubScripts({limit:20,kind:r,app:a})).asks)&&void 0!==n?n:[]:void 0}catch(s){return void console.error("Error fetching top hub scripts")}},{initial:{filter:"",kind:"script",appFilter:void 0,refreshCount:0},invalidateMs:6e4}),o=(0,i._t)('<div class="text-2xs text-red-400 font-normal text-center py-2 px-3 items-center">Hub not available</div>'),d=(0,i._t)('<div class="flex flex-col"><div class="text-left text-xs font-normal leading-tight py-0"> </div> <div class="text-left text-2xs font-normal"> </div></div>'),p=(0,i._t)('<div class="text-gray-400 flex flex-row items-center justify-center"><!></div>'),u=(0,i._t)('<div class="grow truncate text-left text-2xs font-thin"> </div>'),v=(0,i._t)('<kbd class="!text-xs">&crarr;</kbd>'),h=(0,i._t)('<div><!></div> <div class="flex flex-col grow min-w-0"><div class="grow truncate text-left font-normal leading-tight py-0.5"> </div> <!></div> <!>',1),f=(0,i._t)('<li class="w-full"><!></li>'),x=(0,i._t)('<div class="text-2xs text-tercary font-extralight text-center py-2 px-3 items-center">There are more items than being displayed. Refine your search.</div>'),g=(0,i._t)('<div class="px-2 py-1"><a target="_blank" class="text-xs flex flex-row items-center gap-1 text-blue-500 hover:text-blue-600">Suggest script <!></a></div>'),m=(0,i._t)('<ul class="gap-1 flex flex-col"></ul> <!>',1),y=(0,i._t)('<div class="text-2xs text-primary font-light text-center py-2 px-3 items-center">No scripts found.</div>');function k(t,e){(0,i.ln)(e,!0);let[r,k]=(0,i._)(),b=(0,i.Kt)(!1),w=(0,i.o)(),_=(0,i.f)(e,"kind",3,"script"),P=(0,i.f)(e,"filter",11,""),$=(0,i.f)(e,"loading",15,!1),Q=(0,i.f)(e,"selected",3,void 0),A=(0,i.f)(e,"appFilter",3,void 0),C=(0,i.f)(e,"items",31,()=>(0,i.tn)([])),W=(0,i.f)(e,"displayPath",3,!1),S=(0,i.f)(e,"apps",31,()=>(0,i.tn)([])),H=(0,i.f)(e,"refreshCount",3,0),E=(0,i.Kt)((0,i.tn)([]));(0,i.At)(()=>{var t,e;P().length>0?S(Array.from(new Set(null!==(t=null===(e=C())||void 0===e?void 0:e.map(t=>t.app))&&void 0!==t?t:[])).sort()):S((0,i.Pt)(E))});let F=(0,l.Ai)(()=>c({appFilter:A(),filter:P(),kind:_(),refreshCount:H()}),{loadInit:!1});async function I(t){if(t.path.startsWith("hub/"))try{await l.da.pickHubScriptByPath({path:t.path})}catch(t){console.error("Failed to track hub script pick:",t)}w("pickScript",t)}(0,i.At)(()=>{P(),_(),A(),H(),F.refresh()}),(0,i.At)(()=>{$("loading"===F.status),(0,i.Wt)(b,!!F.error);let t=F.value;(0,i.It)(()=>{if(!t)return;let e=t.map(t=>(0,a.A)((0,a.A)({},t),{},{path:"hub/".concat(t.version_id,"/").concat(t.app,"/").concat(t.summary.toLowerCase().replaceAll(/\s+/g,"_")),summary:"".concat(t.summary," (").concat(t.app,")")}));C(A()?e.filter(t=>t.app===A()):e)})}),(0,i.At)(()=>{_(),H(),(0,i.It)(()=>{!async function(t){try{(0,i.Wt)(b,!1),(0,i.Wt)(E,(await s({kind:t,refreshCount:H()})).map(t=>t.name),!0)}catch(e){console.error("Hub is not available"),(0,i.Wt)(E,[],!0),(0,i.Wt)(b,!0)}}(_())})});var j=(0,i.gt)();(0,i.xt)("keydown",i.Zt,function(t){var e;if(null!=Q()&&C()&&Q()>=0&&Q()<(null===(e=C())||void 0===e?void 0:e.length)&&"Enter"===t.key){t.preventDefault(),I(C()[Q()])}});var z=(0,i.$t)(j),T=t=>{(0,i.ht)(t,o())},Y=t=>{var e=(0,i.gt)(),a=(0,i.$t)(e),s=t=>{var e=(0,i.gt)();(0,i.ot)((0,i.$t)(e),16,()=>Array(15).fill(0),i.st,(t,e)=>{(0,l.dr)(t,{layout:[.1,[1.5]]})}),(0,i.ht)(t,e)},c=t=>{var e=(0,i.gt)(),a=(0,i.$t)(e),s=t=>{var e=m(),a=(0,i.$t)(e);(0,i.ot)(a,23,C,t=>t.path,(t,e,r)=>{var a=f(),s=(0,i.Qt)(a);{let t=t=>{var r=d(),a=(0,i.Qt)(r),l=(0,i.Qt)(a,!0);(0,i.rn)(a);var n=(0,i.en)(a,2),s=(0,i.Qt)(n,!0);(0,i.rn)(n),(0,i.rn)(r),(0,i.kt)(()=>{var t,r;(0,i.pt)(l,null!==(t=(0,i.Pt)(e).summary)&&void 0!==t?t:""),(0,i.pt)(s,null!==(r=(0,i.Pt)(e).path)&&void 0!==r?r:"")}),(0,i.ht)(t,r)},a=(0,i.Yt)(()=>(0,i.Pt)(r)===Q());(0,l.Tr)(s,{class:"w-full",placement:"right",get forceOpen(){return(0,i.Pt)(a)},text:t,children:(t,a)=>{{let a=(0,i.Yt)(()=>Q()===(0,i.Pt)(r));(0,l.Zn)(t,{get selected(){return(0,i.Pt)(a)},variant:"subtle",unifiedSize:"sm",btnClasses:"justify-start",onClick:()=>I((0,i.Pt)(e)),children:(t,a)=>{var s=h(),c=(0,i.$t)(s),o=(0,i.Qt)(c),d=t=>{let r=(0,i.Yt)(()=>l.wt[(0,i.Pt)(e).app]);var a=(0,i.gt)();(0,i.et)((0,i.$t)(a),()=>(0,i.Pt)(r),(t,e)=>{e(t,{height:13,width:13})}),(0,i.ht)(t,a)},f=t=>{var e=p();(0,n.t)((0,i.Qt)(e),{size:"13"}),(0,i.rn)(e),(0,i.ht)(t,e)};(0,i.ut)(o,t=>{(0,i.Pt)(e).app in l.wt?t(d):t(f,!1)}),(0,i.rn)(c);var x=(0,i.en)(c,2),g=(0,i.Qt)(x),m=(0,i.Qt)(g,!0);(0,i.rn)(g);var y=(0,i.en)(g,2),k=t=>{var r=u(),a=(0,i.Qt)(r,!0);(0,i.rn)(r),(0,i.kt)(()=>(0,i.pt)(a,(0,i.Pt)(e).path)),(0,i.ht)(t,r)};(0,i.ut)(y,t=>{W()&&(0,i.Pt)(e).path&&t(k)}),(0,i.rn)(x);var b=(0,i.en)(x,2),w=t=>{(0,i.ht)(t,v())};(0,i.ut)(b,t=>{(0,i.Pt)(r)===Q()&&t(w)}),(0,i.kt)(t=>{var r;(0,i.X)(c,1,t),(0,i.pt)(m,null!==(r=(0,i.Pt)(e).summary)&&void 0!==r?r:"")},[()=>(0,i.Z)((0,l.o)("flex justify-center items-center"))]),(0,i.ht)(t,s)},$$slots:{default:!0}})}},$$slots:{text:!0,default:!0}})}(0,i.rn)(a),(0,i.ht)(t,a)}),(0,i.rn)(a);var s=(0,i.en)(a,2),c=t=>{(0,i.ht)(t,x())},o=t=>{var e=g(),a=(0,i.Qt)(e);(0,l.ti)((0,i.en)((0,i.Qt)(a)),{class:"size-3"}),(0,i.rn)(a),(0,i.rn)(e),(0,i.kt)(()=>(0,i.V)(a,"href","".concat((0,i.v)(l.En,"$hubBaseUrlStore",r),"?suggest_script=true"))),(0,i.ht)(t,e)};(0,i.ut)(s,t=>{20==C().length?t(c):t(o,!1)}),(0,i.ht)(t,e)},c=t=>{(0,i.ht)(t,y())};(0,i.ut)(a,t=>{C().length>0&&S().length>0?t(s):t(c,!1)},!0),(0,i.ht)(t,e)};(0,i.ut)(a,t=>{$()?t(s):t(c,!1)},!0),(0,i.ht)(t,e)};(0,i.ut)(z,t=>{(0,i.Pt)(b)?t(T):t(Y,!1)}),(0,i.ht)(t,j),(0,i.cn)(),k()}}}]);